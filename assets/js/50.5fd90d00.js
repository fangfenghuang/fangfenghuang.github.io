(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{380:function(r,a,t){"use strict";t.r(a);var e=t(0),i=Object(e.a)({},(function(){var r=this,a=r._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[a("p",[r._v("Dockerçš„å¤šæ¶æ„æ”¯æŒæ˜¯åŸºäºä¸åŒcpuçš„æ¶æ„è€Œä¸æ˜¯ä¸åŒæ“ä½œç³»ç»Ÿçš„æ¶æ„")]),r._v(" "),a("h2",{attrs:{id:"è·¨-cpu-æ¶æ„ç¼–è¯‘ç¨‹åºçš„æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¨-cpu-æ¶æ„ç¼–è¯‘ç¨‹åºçš„æ–¹æ³•"}},[r._v("#")]),r._v(" è·¨ CPU æ¶æ„ç¼–è¯‘ç¨‹åºçš„æ–¹æ³•")]),r._v(" "),a("ol",[a("li",[r._v("ç›´æ¥åœ¨ç›®æ ‡ç¡¬ä»¶ä¸Šç¼–è¯‘ï¼ˆå¸¸ç”¨ï¼‰")]),r._v(" "),a("li",[r._v("æ¨¡æ‹Ÿç›®æ ‡ç¡¬ä»¶")]),r._v(" "),a("li",[r._v("é€šè¿‡ binfmt_misc æ¨¡æ‹Ÿç›®æ ‡ç¡¬ä»¶çš„ç”¨æˆ·ç©ºé—´")]),r._v(" "),a("li",[r._v("ä½¿ç”¨äº¤å‰ç¼–è¯‘å™¨")])]),r._v(" "),a("h2",{attrs:{id:"buildx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buildx"}},[r._v("#")]),r._v(" buildx")]),r._v(" "),a("p",[r._v("Docker 19.03 å¼•å…¥çš„æ’ä»¶ buildx\nbuildx ä¼šé€šè¿‡ QEMU å’Œ binfmt_misc åˆ†åˆ«ä¸ºä¸åŒçš„ CPU æ¶æ„ï¼ˆarmï¼Œarm64 å’Œ amd64ç­‰ï¼‰æ„å»ºä¸åŒçš„é•œåƒã€‚æ„å»ºå®Œæˆåï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª manifest listï¼Œå…¶ä¸­åŒ…å«äº†æŒ‡å‘è¿™äº›é•œåƒçš„æŒ‡é’ˆã€‚")]),r._v(" "),a("h3",{attrs:{id:"ç¯å¢ƒè¦æ±‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒè¦æ±‚"}},[r._v("#")]),r._v(" ç¯å¢ƒè¦æ±‚")]),r._v(" "),a("ul",[a("li",[a("p",[r._v("è¦ç¡®ä¿ Docker ç‰ˆæœ¬ä¸ä½äº 19.03ï¼ŒåŒæ—¶è¿˜è¦é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ DOCKER_CLI_EXPERIMENTAL æ¥å¯ç”¨")])]),r._v(" "),a("li",[a("p",[r._v("å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Linuxï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ binfmt_misc\nå¤§å¤šæ•° Linux å‘è¡Œç‰ˆéƒ½å¾ˆå®¹æ˜“å¯ç”¨ï¼Œä¸è¿‡è¿˜æœ‰ä¸€ä¸ªæ›´å®¹æ˜“çš„åŠæ³•ï¼Œç›´æ¥è¿è¡Œä¸€ä¸ªç‰¹æƒå®¹å™¨ï¼Œå®¹å™¨é‡Œé¢å†™å¥½äº†è®¾ç½®è„šæœ¬ï¼š\nğŸ³ â†’ docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d\nå»ºè®®å°† Linux å†…æ ¸ç‰ˆæœ¬å‡çº§åˆ° 4.x ä»¥ä¸Šï¼Œç‰¹åˆ«æ˜¯ CentOS ç”¨æˆ·ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ã€‚\ncat /proc/sys/fs/binfmt_misc/qemu-aarch64")])]),r._v(" "),a("li",[a("p",[r._v("Docker é»˜è®¤ä¼šä½¿ç”¨ä¸æ”¯æŒå¤š CPU æ¶æ„çš„æ„å»ºå™¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ‡æ¢ã€‚\nå…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„æ„å»ºå™¨ï¼šdocker buildx create --use --name mybuilder\nå¯åŠ¨æ„å»ºå™¨ï¼š docker buildx inspect mybuilder --bootstrap\næŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ„å»ºå™¨åŠæ„å»ºå™¨æ”¯æŒçš„ CPU æ¶æ„ï¼šdocker buildx ls")])])]),r._v(" "),a("h3",{attrs:{id:"æ„å»ºé•œåƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºé•œåƒ"}},[r._v("#")]),r._v(" æ„å»ºé•œåƒ")]),r._v(" "),a("p",[r._v("docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm,linux/arm64,linux/amd64 . --push")]),r._v(" "),a("p",[r._v("å¦‚æœæƒ³å°†æ„å»ºå¥½çš„é•œåƒä¿å­˜åœ¨æœ¬åœ°ï¼Œå¯ä»¥å°† type æŒ‡å®šä¸º dockerï¼Œä½†å¿…é¡»åˆ†åˆ«ä¸ºä¸åŒçš„ CPU æ¶æ„æ„å»ºä¸åŒçš„é•œåƒï¼Œä¸èƒ½åˆå¹¶æˆä¸€ä¸ªé•œåƒ\nğŸ³ â†’ docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm -o type=docker .\nğŸ³ â†’ docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm64 -o type=docker .\nğŸ³ â†’ docker buildx build -t yangchuansheng/hello-arch --platform=linux/amd64 -o type=docker .")])])}),[],!1,null,null,null);a.default=i.exports}}]);