(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{381:function(a,t,l){"use strict";l.r(t);var e=l(0),i=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"efk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#efk"}},[a._v("#")]),a._v(" EFK")]),a._v(" "),t("p",[a._v("EFK(Elasticsearch + Fluentd + Kibana)是kubernetes官方推荐的日志收集方案，且fluentd已从CNCF 毕业")]),a._v(" "),t("p",[a._v("优缺点：")]),a._v(" "),t("ul",[t("li",[a._v("技术比较成熟，用户较多")]),a._v(" "),t("li",[a._v("更复杂的查询和数据分析建议使用EFK")]),a._v(" "),t("li",[a._v("fluentd性能不好，业界有部分已淘汰fluentd")]),a._v(" "),t("li",[a._v("ES查询功能较复杂，对我们来说有点大材小用")])]),a._v(" "),t("h2",{attrs:{id:"loki"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loki"}},[a._v("#")]),a._v(" loki")]),a._v(" "),t("p",[a._v("Promtail + Loki + Grafana（需要 Grafana v6.0+）")]),a._v(" "),t("ul",[t("li",[a._v("Loki 是主服务器，负责存储日志和处理查询。\nLoki 有几个客户端选项：Promtail（它还支持 systemd 日志摄取和基于 TCP 的 syslog 摄取）、Fluentd、Fluent Bit、Docker 插件等等！")]),a._v(" "),t("li",[a._v("promtail 是代理，负责收集日志并将其发送给 loki 。")]),a._v(" "),t("li",[a._v("Grafana 用于 UI 展示。\n优缺点：")]),a._v(" "),t("li",[a._v("使用了和Prometheus一样的标签来作为索引，也就是说，你通过这些标签既可以查询日志的内容也可以查询到监控的数据，不但减少了两种查询之间的切换成本，也极大地降低了日志索引的存储。")]),a._v(" "),t("li",[a._v("特别适合储存 Kubernetes Pod日志; 诸如Pod标签之类的元数据会被自动删除和编入索引;")]),a._v(" "),t("li",[a._v("受Grafana原生支持,避免kibana和grafana来回切换;")])])])}),[],!1,null,null,null);t.default=i.exports}}]);