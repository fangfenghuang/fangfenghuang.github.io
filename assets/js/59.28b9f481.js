(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{395:function(a,t,s){"use strict";s.r(t);var n=s(0),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[a._v("#")]),a._v(" å‰è¨€")]),a._v(" "),t("p",[a._v("prometheusé€šè¿‡æŠ“å–ç›‘æ§æ•°æ®ï¼Œå°†è§¦å‘è§„åˆ™çš„å‘Šè­¦ï¼Œæ¨é€åˆ°Alertmangerï¼ŒAlertmangerå¯¹å‘Šè­¦è¿›è¡Œåˆ†ç»„ã€èšåˆç­‰å¤„ç†åï¼Œå¯ä»¥é€šè¿‡é‚®ä»¶ã€Slackã€webhookç­‰æ–¹å¼å¯¹ç”¨æˆ·è¿›è¡Œå‘é€å‘Šè­¦ä¿¡æ¯ã€‚alertmanagerå‘Šè­¦çš„è®°å½•ä¸æ”¯æŒæŒä¹…åŒ–è®°å½•ï¼Œå‘é€çš„å‘Šè­¦ä¿¡æ¯ä¸ä¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œprometheuså°†æ‰€æœ‰æ•°æ®å­˜å‚¨ä¸ºæ—¶é—´åºåˆ—ï¼Œå´ä¸ä¼šå°†alertmanagerå‘é€çš„å‘Šè­¦ä¿¡æ¯åšä¸ºä¸€æ¡è®°å½•å­˜å‚¨ä¸‹æ¥ã€‚")]),a._v(" "),t("p",[a._v("è§£å†³çš„æ€è·¯å°±æ˜¯é€šè¿‡webhookå‘é€å‘Šè­¦ä¿¡æ¯åˆ°æŒ‡å®šæœåŠ¡ï¼Œå¹¶å°†è®°å½•è¾“å‡ºåˆ°stdoutï¼Œå†é€šè¿‡fluentdé‡‡é›†å®¹å™¨æ—¥å¿—æ¨é€åˆ°ES")]),a._v(" "),t("h2",{attrs:{id:"alertsnitch-mysql-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alertsnitch-mysql-grafana"}},[a._v("#")]),a._v(" alertsnitch + mysql + grafana")]),a._v(" "),t("p",[a._v("alertsnitchæ”¯æŒå°†alertmanagerçš„å‘Šè­¦æ•°æ®å†™å…¥mysqlå’Œpgï¼Œ å¹¶ç»“åˆgrafnaé¢æ¿ï¼Œå°†æ•°æ®è¿›è¡Œå±•ç¤ºã€‚")]),a._v(" "),t("h3",{attrs:{id:"alertsnitch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alertsnitch"}},[a._v("#")]),a._v(" alertsnitch")]),a._v(" "),t("p",[a._v("https://gitlab.com/yakshaving.art/alertsnitch")]),a._v(" "),t("ul",[t("li",[t("p",[a._v('é…ç½®å˜é‡ï¼š\nç¯å¢ƒå˜é‡æ•°æ®åº“é…ç½®æ ¼å¼ALERTSNITCH_DSN="${MYSQL_USER}ğŸ˜’{MYSQL_PASSWORD}@/${MYSQL_DATABASE}"\néƒ¨ç½²å®Œæˆåé…ç½®ingressï¼Œæ˜ å°„åŸŸåå¯¹å¤–æä¾›æœåŠ¡ï¼Œè¿‡ç¨‹ç•¥ï¼Œé…ç½®åŸŸååè°ƒç”¨æ–¹å¼ä¸ºï¼š\nhttps://alertsnitch.test.com/webhook')])]),a._v(" "),t("li",[t("p",[a._v("é…ç½®alertmanagerï¼š")])])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# é…ç½®æ¥æ”¶è€…")]),a._v("\n- name: default\n  webhook_configs:\n  - send_resolved: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n    http_config:\n      follow_redirects: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n    url: https://alertsnitch.test.cn/webhook\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h3",{attrs:{id:"grafana-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grafana-dashboard"}},[a._v("#")]),a._v(" grafana dashboard")]),a._v(" "),t("p",[a._v("ID: 15833\nhttps://grafana.com/grafana/dashboards/15833-prometheus-alert-history/")]),a._v(" "),t("h2",{attrs:{id:"alertmanager2es-es-kibana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alertmanager2es-es-kibana"}},[a._v("#")]),a._v(" alertmanager2es + ES + kibana")]),a._v(" "),t("p",[a._v("https://github.com/cloudflare/alertmanager2es")]),a._v(" "),t("p",[a._v("https://github.com/webdevops/alertmanager2es")]),a._v(" "),t("p",[a._v("docker pull webdevops/alertmanager2es:20.11.0")]),a._v(" "),t("p",[a._v("docker pull webdevops/alertmanager2es:development")]),a._v(" "),t("h2",{attrs:{id:"alertmanager-webhook-logger"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alertmanager-webhook-logger"}},[a._v("#")]),a._v(" alertmanager-webhook-logger")]),a._v(" "),t("p",[a._v("https://github.com/tomtom-international/alertmanager-webhook-logger\ndocker pull ghcr.io/tomtom-international/alertmanager-webhook-logger:1.0")]),a._v(" "),t("p",[a._v("https://github.com/grafana/alertmanager-webhook-logger\ndocker pull grafana/alertmanager-webhook-logger:0.3")]),a._v(" "),t("p",[a._v("é€ševentsæŒä¹…åŒ–ï¼Œé€šè¿‡fluentd+å®¹å™¨æ ‡å‡†è¾“å‡ºé‡‡é›†åˆ°ES")]),a._v(" "),t("h3",{attrs:{id:"éƒ¨ç½²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#éƒ¨ç½²"}},[a._v("#")]),a._v(" éƒ¨ç½²")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("---")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" monitoring\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ghcr.io/tomtom"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("international/alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.0")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" IfNotPresent\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("---")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" monitoring\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'6725'")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("protocol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" TCP\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6725")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6725")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" ClusterIP\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br")])]),t("h3",{attrs:{id:"alertmanageré…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alertmanageré…ç½®"}},[a._v("#")]),a._v(" alertmanageré…ç½®")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("global")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("route")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("receiver")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("receiver\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("receivers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("receiver\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("webhook_configs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" \n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("//alertmanager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("webhook"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("logger.monitoring"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6725")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);