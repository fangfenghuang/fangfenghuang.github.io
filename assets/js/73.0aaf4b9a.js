(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{401:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Json(Javascript Object Nanotation)是一种数据交换格式，常用于前后端数据传输。\ngo语言本身为我们提供了json的工具包”encoding/json”")]),s._v(" "),a("h2",{attrs:{id:"定制json序列化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定制json序列化"}},[s._v("#")]),s._v(" 定制JSON序列化")]),s._v(" "),a("p",[s._v("Json Marshal：将数据编码成json字符串")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    jsonStu, err := json.Marshal(stu)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("json.Unmarshal: 反序列的函数，将json字符串解码到相应的数据结构；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('    jsonstr := `{"a":"aaa","b":"bbb"}`\n    map1 := make(map[string]interface{})\n    err := json.Unmarshal([]byte(jsonstr), &map1)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"临时忽略struct空字段-omitempty"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#临时忽略struct空字段-omitempty"}},[s._v("#")]),s._v(" 临时忽略struct空字段： omitempty")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('json.Marshal(struct {\n    *User\n    Password bool `json:"password,omitempty"`  //忽略该字段\n    }{\n        User: user,\n    })\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"忽略一些字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#忽略一些字段"}},[s._v("#")]),s._v(" 忽略一些字段: -")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('json.Marshal(struct {\n    *User\n    Password bool `json:"-"`\n}{\n    User: user,\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"临时添加额外的字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#临时添加额外的字段"}},[s._v("#")]),s._v(" 临时添加额外的字段:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('json.Marshal(struct {\n    *User\n    Token    string `json:"token"`  //添加该字段\n    Password bool `json:"password,omitempty"`\n    }{\n        User: user,\n        Token: token,\n    })\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"临时粘合两个struct"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#临时粘合两个struct"}},[s._v("#")]),s._v(" 临时粘合两个struct")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('type BlogPost struct {\n    URL   string `json:"url"`\n    Title string `json:"title"`\n}\ntype Analytics struct {\n    Visitors  int `json:"visitors"`\n    PageViews int `json:"page_views"`\n}\njson.Marshal(struct{\n    *BlogPost\n    *Analytics\n}{post, analytics})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"一个json切分成两个struct-todo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一个json切分成两个struct-todo"}},[s._v("#")]),s._v(" 一个json切分成两个struct: todo")]),s._v(" "),a("h3",{attrs:{id:"用字符串传递数字-json-string"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用字符串传递数字-json-string"}},[s._v("#")]),s._v(" 用字符串传递数字: "),a("code",[s._v('json:",string"')])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('type TestObject struct {\n    Field1 int    `json:",string"`\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);