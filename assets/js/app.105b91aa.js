(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(p&&p(e);u.length;)u.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),n=i(i.s=t[0]))}return n}var r={},a={1:0},o=[];function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=a[n]=[e,r]}));e.push(t[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({}[n]||n)+"."+{2:"22dca872",3:"759551b0",4:"fb5fef80",5:"3ff92d1d",6:"99f416e3",7:"d996c5d0",8:"0ff2779d",9:"8582675e",10:"f0b9a357",11:"5e9d4442",12:"fd9fb50c",13:"a25462a4",14:"b3f50169",15:"48ec85a3",16:"23a381fd",17:"fce4526e",18:"5a7f9410",19:"9bd92abb",20:"cd613adc",21:"39678e7d",22:"18a1b0a4",23:"e81728ef",24:"2c47f148",25:"133e8693",26:"4c8f984a",27:"a2f30984",28:"bed824b7",29:"d25cd053",30:"5ed0a170",31:"78e76f31",32:"bde44dbe",33:"bbd5bc1e",34:"c395058a",35:"85e8117c",36:"ebde3125",37:"11468077",38:"58b8d85a",39:"fb78a74b",40:"fdd8e7f7",41:"9bda7a27",42:"6683d568",43:"b861cc49",44:"87a8ca0e",45:"d0365d4c",46:"ceb92d03",47:"58262ccf",48:"606fd8c4",49:"72883bce",50:"5fd90d00",51:"fed4a052",52:"e2ccdabe",53:"1e80aaaa",54:"d19130a3",55:"fc584fda",56:"f45b3334",57:"ddc391da",58:"9c01d07f",59:"28b9f481",60:"433f82be",61:"c7d46345",62:"0592d1ca",63:"5d5a64e8",64:"a5e108ea",65:"44bb9e5a",66:"22992592",67:"d8a16172",68:"fd3f16aa",69:"8176ca55",70:"0b5afd7c",71:"a29933fb",72:"05d914d5",73:"0aaf4b9a",74:"704e02ac",75:"f53c0442",76:"0e5684e0",77:"2e14a486",78:"f1629604",79:"462d6518",80:"26135f6e",81:"3d843fba",82:"cd3c3a45",83:"f1068b1a",84:"1b3fe5ad",85:"5424faa1",86:"94ec5ced",87:"f3fd6943",88:"06bd6e5d",89:"186aa41e",90:"5be9795c",91:"537fe6e4",92:"e51f855c",93:"db2f174b",94:"d9451de8"}[n]+".js"}(n);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,t[1](c)}a[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=r,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)i.d(t,r,function(e){return n[e]}.bind(null,r));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([102,0]),t()}([function(n,e,t){"use strict";function r(n,e,t,r,a,o,i,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),i?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},l._ssrRegister=c):a&&(c=s?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(n,e){return c.call(e),p(n,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var r=t(25),a=Function.prototype,o=a.bind,i=a.call,s=r&&o.bind(i,i);n.exports=r?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var r=t(67),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();n.exports=o},function(n,e,t){var r=t(4);n.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var r=t(2),a=t(45),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return o(a(n),e)}},function(n,e,t){var r=t(1);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(157),a=t(160);n.exports=function(n,e){var t=a(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return p})),t.d(e,"c",(function(){return d})),t.d(e,"f",(function(){return u})),t.d(e,"l",(function(){return m})),t.d(e,"m",(function(){return h})),t.d(e,"d",(function(){return f})),t.d(e,"k",(function(){return v})),t.d(e,"n",(function(){return b})),t.d(e,"a",(function(){return y}));const r=/#.*$/,a=/\.(md|html)$/,o=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(a,"")}function c(n){return i.test(n)}function l(n){return/^mailto:/.test(n)}function p(n){return/^tel:/.test(n)}function d(n){if(c(n))return n;if(!n)return"404";const e=n.match(r),t=e?e[0]:"",a=s(n);return o.test(a)?n:a+".html"+t}function u(n,e){const t=n.hash,a=function(n){const e=n&&n.match(r);if(e)return e[0]}(e);if(a&&t!==a)return!1;return s(n.path)===s(e)}function m(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){const r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;const a=e.split("/");t&&a[a.length-1]||a.pop();const o=n.replace(/^\//,"").split("/");for(let n=0;n<o.length;n++){const e=o[n];".."===e?a.pop():"."!==e&&a.push(e)}""!==a[0]&&a.unshift("");return a.join("/")}(e,t));const r=s(e);for(let e=0;e<n.length;e++)if(s(n[e].regularPath)===r)return Object.assign({},n[e],{type:"page",path:d(n[e].path)});return console.error(`[vuepress] No matching page found for sidebar item "${e}"`),{}}function h(n,e,t,r){const{pages:a,themeConfig:o}=t,i=r&&o.locales&&o.locales[r]||o;if("auto"===(n.frontmatter.sidebar||i.sidebar||o.sidebar))return g(n);const s=i.sidebar||o.sidebar;if(s){const{base:t,config:r}=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(const r in e)if(0===(t=n,/(\.html|\/)$/.test(t)?t:t+"/").indexOf(encodeURI(r)))return{base:r,config:e[r]};var t;return{}}(e,s);return"auto"===r?g(n):r?r.map(n=>function n(e,t,r,a=1){if("string"==typeof e)return m(t,e,r);if(Array.isArray(e))return Object.assign(m(t,e[0],r),{title:e[1]});{a>3&&console.error("[vuepress] detected a too deep nested sidebar group.");const o=e.children||[];return 0===o.length&&e.path?Object.assign(m(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:o.map(e=>n(e,t,r,a+1)),collapsable:!1!==e.collapsable}}}(n,a,t)):[]}return[]}function g(n){const e=f(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map(e=>({type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}))}]}function f(n){let e;return(n=n.map(n=>Object.assign({},n))).forEach(n=>{2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)}),n.filter(n=>2===n.level)}function v(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function b(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function k(n){let e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function y(n,e){return k(e)-k(n)}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r=t(14),a=t(142),o=t(143),i=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?a(n):o(n)}},function(n,e,t){var r=t(6).Symbol;n.exports=r},function(n,e,t){var r=t(7),a=t(61),o=t(98),i=t(24),s=t(52),c=TypeError,l=Object.defineProperty,p=Object.getOwnPropertyDescriptor;e.f=r?o?function(n,e,t){if(i(n),e=s(e),i(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=p(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return l(n,e,t)}:l:function(n,e,t){if(i(n),e=s(e),i(t),a)try{return l(n,e,t)}catch(n){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(3),a=t(1),o=function(n){return a(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?o(r[n]):r[n]&&r[n][e]}},function(n,e,t){var r=t(7),a=t(15),o=t(29);n.exports=r?function(n,e,t){return a.f(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var r=t(147),a=t(148),o=t(149),i=t(150),s=t(151);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(69);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(10)(Object,"create");n.exports=r},function(n,e,t){var r=t(169);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(40);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(a="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function a(n,e,t){return n<e?e:n>t?t:n}function o(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=a(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),p=r.speed,d=r.easing;return c.offsetWidth,i((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var a;return(a="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+e+"ms "+t,a}(n,p,d)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+p+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),p)}),p)):setTimeout(e,p)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*a(Math.random()*e,.1,.95)),e=a(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var a,i=e.querySelector(r.barSelector),c=n?"-100":o(t.status||0),p=document.querySelector(r.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(a=e.querySelector(r.spinnerSelector))&&u(a),p!=document.body&&l(p,"nprogress-custom-parent"),p.appendChild(e),e},t.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&u(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,a=n.length,o=e.charAt(0).toUpperCase()+e.slice(1);a--;)if((r=n[a]+o)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,a,o=arguments;if(2==o.length)for(t in e)void 0!==(a=e[t])&&e.hasOwnProperty(t)&&r(n,t,a);else r(n,o[1],o[2])}}();function c(n,e){return("string"==typeof n?n:d(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=d(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function p(n,e){var t,r=d(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function d(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function u(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=a)},function(n,e,t){var r=t(9),a=String,o=TypeError;n.exports=function(n){if(r(n))return n;throw o(a(n)+" is not an object")}},function(n,e,t){var r=t(4);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e,t){var r=t(43),a=t(51);n.exports=function(n){return r(a(n))}},function(n,e,t){var r=t(3),a=t(58),o=t(8),i=t(60),s=t(56),c=t(55),l=a("wks"),p=r.Symbol,d=p&&p.for,u=c?p:p&&p.withoutSetter||i;n.exports=function(n){if(!o(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&o(p,n)?l[n]=p[n]:l[n]=c&&d?d(e):u(e)}return l[n]}},function(n,e,t){var r=t(25),a=Function.prototype.call;n.exports=r?a.bind(a):function(){return a.apply(a,arguments)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){var r=t(2),a=r({}.toString),o=r("".slice);n.exports=function(n){return o(a(n),8,-1)}},function(n,e,t){var r=t(3),a=t(32),o=r["__core-js_shared__"]||a("__core-js_shared__",{});n.exports=o},function(n,e,t){var r=t(3),a=Object.defineProperty;n.exports=function(n,e){try{a(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(141),a=t(12),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return a(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(10)(t(6),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(161),a=t(168),o=t(170),i=t(171),s=t(172);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(5),a=t(40),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!a(n))||(i.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(13),a=t(12);n.exports=function(n){return"symbol"==typeof n||a(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){var r=t(3),a=t(50).f,o=t(17),i=t(110),s=t(32),c=t(63),l=t(122);n.exports=function(n,e){var t,p,d,u,m,h=n.target,g=n.global,f=n.stat;if(t=g?r:f?r[h]||s(h,{}):(r[h]||{}).prototype)for(p in e){if(u=e[p],d=n.dontCallGetSet?(m=a(t,p))&&m.value:t[p],!l(g?p:h+(f?".":"#")+p,n.forced)&&void 0!==d){if(typeof u==typeof d)continue;c(u,d)}(n.sham||d&&d.sham)&&o(u,"sham",!0),i(t,p,u,n)}}},function(n,e,t){var r=t(2),a=t(4),o=t(30),i=Object,s=r("".split);n.exports=a((function(){return!i("z").propertyIsEnumerable(0)}))?function(n){return"String"==o(n)?s(n,""):i(n)}:i},function(n,e,t){var r=t(1),a=t(108),o=TypeError;n.exports=function(n){if(r(n))return n;throw o(a(n)+" is not a function")}},function(n,e,t){var r=t(51),a=Object;n.exports=function(n){return a(r(n))}},function(n,e){n.exports={}},function(n,e,t){var r=t(120);n.exports=function(n){return r(n.length)}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),p=Object.prototype.toString,d=Math.max,u=Math.min,m=function(){return l.Date.now()};function h(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function g(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==p.call(n)}(n))return NaN;if(h(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=h(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=a.test(n);return s||o.test(n)?i(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,a,o,i,s,c,l=0,p=!1,f=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function b(e){var t=r,o=a;return r=a=void 0,l=e,i=n.apply(o,t)}function k(n){return l=n,s=setTimeout(E,e),p?b(n):i}function y(n){var t=n-c;return void 0===c||t>=e||t<0||f&&n-l>=o}function E(){var n=m();if(y(n))return _(n);s=setTimeout(E,function(n){var t=e-(n-c);return f?u(t,o-(n-l)):t}(n))}function _(n){return s=void 0,v&&r?b(n):(r=a=void 0,i)}function x(){var n=m(),t=y(n);if(r=arguments,a=this,c=n,t){if(void 0===s)return k(c);if(f)return s=setTimeout(E,e),b(c)}return void 0===s&&(s=setTimeout(E,e)),i}return e=g(e)||0,h(t)&&(p=!!t.leading,o=(f="maxWait"in t)?d(g(t.maxWait)||0,e):o,v="trailing"in t?!!t.trailing:v),x.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},x.flush=function(){return void 0===s?i:_(m())},x}},function(n,e,t){var r=t(7),a=t(28),o=t(104),i=t(29),s=t(26),c=t(52),l=t(8),p=t(61),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(n,e){if(n=s(n),e=c(e),p)try{return d(n,e)}catch(n){}if(l(n,e))return i(!a(o.f,n,e),n[e])}},function(n,e){var t=TypeError;n.exports=function(n){if(null==n)throw t("Can't call method on "+n);return n}},function(n,e,t){var r=t(105),a=t(53);n.exports=function(n){var e=r(n,"string");return a(e)?e:e+""}},function(n,e,t){var r=t(16),a=t(1),o=t(54),i=t(55),s=Object;n.exports=i?function(n){return"symbol"==typeof n}:function(n){var e=r("Symbol");return a(e)&&o(e.prototype,s(n))}},function(n,e,t){var r=t(2);n.exports=r({}.isPrototypeOf)},function(n,e,t){var r=t(56);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var r=t(57),a=t(4);n.exports=!!Object.getOwnPropertySymbols&&!a((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){var r,a,o=t(3),i=t(106),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,p=l&&l.v8;p&&(a=(r=p.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(a=+r[1]),n.exports=a},function(n,e,t){var r=t(59),a=t(31);(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.0",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e){n.exports=!1},function(n,e,t){var r=t(2),a=0,o=Math.random(),i=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++a+o,36)}},function(n,e,t){var r=t(7),a=t(4),o=t(97);n.exports=!r&&!a((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var r=t(2),a=t(1),o=t(31),i=r(Function.toString);a(o.inspectSource)||(o.inspectSource=function(n){return i(n)}),n.exports=o.inspectSource},function(n,e,t){var r=t(8),a=t(115),o=t(50),i=t(15);n.exports=function(n,e,t){for(var s=a(e),c=i.f,l=o.f,p=0;p<s.length;p++){var d=s[p];r(n,d)||t&&r(t,d)||c(n,d,l(e,d))}}},function(n,e,t){var r=t(119);n.exports=function(n){var e=+n;return e!=e||0===e?0:r(e)}},function(n,e,t){var r=t(2),a=t(24),o=t(129);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return a(t),o(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,a=n.length;++t<r;)n[a+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(18),a=t(152),o=t(153),i=t(154),s=t(155),c=t(156);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=a,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(13),a=t(35);n.exports=function(n){if(!a(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(173),a=t(12);n.exports=function n(e,t,o,i,s){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!=e&&t!=t:r(e,t,o,i,n,s))}},function(n,e,t){var r=t(74),a=t(176),o=t(75);n.exports=function(n,e,t,i,s,c){var l=1&t,p=n.length,d=e.length;if(p!=d&&!(l&&d>p))return!1;var u=c.get(n),m=c.get(e);if(u&&m)return u==e&&m==n;var h=-1,g=!0,f=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++h<p;){var v=n[h],b=e[h];if(i)var k=l?i(b,v,h,e,n,c):i(v,b,h,n,e,c);if(void 0!==k){if(k)continue;g=!1;break}if(f){if(!a(e,(function(n,e){if(!o(f,e)&&(v===n||s(v,n,t,i,c)))return f.push(e)}))){g=!1;break}}else if(v!==b&&!s(v,b,t,i,c)){g=!1;break}}return c.delete(n),c.delete(e),g}},function(n,e,t){var r=t(36),a=t(174),o=t(175);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(186),a=t(192),o=t(80);n.exports=function(n){return o(n)?r(n):a(n)}},function(n,e,t){(function(n){var r=t(6),a=t(188),o=e&&!e.nodeType&&e,i=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||a;n.exports=c}).call(this,t(48)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(189),a=t(190),o=t(191),i=o&&o.isTypedArray,s=i?a(i):r;n.exports=s},function(n,e,t){var r=t(70),a=t(38);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,e,t){var r=t(10)(t(6),"Set");n.exports=r},function(n,e,t){var r=t(35);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(85),a=t(22);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[a(e[t++])];return t&&t==o?n:void 0}},function(n,e,t){var r=t(5),a=t(39),o=t(203),i=t(206);n.exports=function(n,e){return r(n)?n:a(n,e)?[n]:o(i(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(139),a=t(144),o=t(215),i=t(223),s=t(232),c=t(101),l=o((function(n){var e=c(n);return s(e)&&(e=void 0),i(r(n,1,s,!0),a(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,a=r.exec(t);if(!a)return t;var o="",i=0,s=0;for(i=a.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=e}return s!==i?o+t.substring(s,i):o}},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},a=(t(235),t(0)),o=Object(a.a)(r,(function(){return(0,this._self._c)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=o.exports},function(n,e,t){"use strict";t.r(e);var r={name:"CodeGroup",data:()=>({codeTabs:[],activeCodeTabIndex:-1}),watch:{activeCodeTabIndex(n){this.codeTabs.forEach(n=>{n.elm.classList.remove("theme-code-block__active")}),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted(){this.codeTabs=(this.$slots.default||[]).filter(n=>Boolean(n.componentOptions)).map((n,e)=>(""===n.componentOptions.propsData.active&&(this.activeCodeTabIndex=e),{title:n.componentOptions.propsData.title,elm:n.elm})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab(n){this.activeCodeTabIndex=n}}},a=(t(236),t(0)),o=Object(a.a)(r,(function(){var n=this,e=n._self._c;return e("div",{staticClass:"theme-code-group"},[e("div",{staticClass:"theme-code-group__nav"},[e("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(t,r){return e("li",{key:t.title,staticClass:"theme-code-group__li"},[e("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(t.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?e("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=o.exports},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){var r=t(3),a=t(9),o=r.document,i=a(o)&&a(o.createElement);n.exports=function(n){return i?o.createElement(n):{}}},function(n,e,t){var r=t(7),a=t(4);n.exports=r&&a((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var r=t(58),a=t(60),o=r("keys");n.exports=function(n){return o[n]||(o[n]=a(n))}},function(n,e,t){var r=t(2),a=t(8),o=t(26),i=t(117).indexOf,s=t(46),c=r([].push);n.exports=function(n,e){var t,r=o(n),l=0,p=[];for(t in r)!a(s,t)&&a(r,t)&&c(p,t);for(;e.length>l;)a(r,t=e[l++])&&(~i(p,t)||c(p,t));return p}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){n.exports=t(243)},function(n,e,t){"use strict";var r=t(42),a=t(123).left,o=t(124),i=t(57),s=t(125);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return a(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!r.call({1:2},1);e.f=o?function(n){var e=a(this,n);return!!e&&e.enumerable}:r},function(n,e,t){var r=t(28),a=t(9),o=t(53),i=t(107),s=t(109),c=t(27),l=TypeError,p=c("toPrimitive");n.exports=function(n,e){if(!a(n)||o(n))return n;var t,c=i(n,p);if(c){if(void 0===e&&(e="default"),t=r(c,n,e),!a(t)||o(t))return t;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(n,e)}},function(n,e,t){var r=t(16);n.exports=r("navigator","userAgent")||""},function(n,e,t){var r=t(44);n.exports=function(n,e){var t=n[e];return null==t?void 0:r(t)}},function(n,e){var t=String;n.exports=function(n){try{return t(n)}catch(n){return"Object"}}},function(n,e,t){var r=t(28),a=t(1),o=t(9),i=TypeError;n.exports=function(n,e){var t,s;if("string"===e&&a(t=n.toString)&&!o(s=r(t,n)))return s;if(a(t=n.valueOf)&&!o(s=r(t,n)))return s;if("string"!==e&&a(t=n.toString)&&!o(s=r(t,n)))return s;throw i("Can't convert object to primitive value")}},function(n,e,t){var r=t(1),a=t(15),o=t(111),i=t(32);n.exports=function(n,e,t,s){s||(s={});var c=s.enumerable,l=void 0!==s.name?s.name:e;if(r(t)&&o(t,l,s),s.global)c?n[e]=t:i(e,t);else{try{s.unsafe?n[e]&&(c=!0):delete n[e]}catch(n){}c?n[e]=t:a.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n}},function(n,e,t){var r=t(4),a=t(1),o=t(8),i=t(7),s=t(112).CONFIGURABLE,c=t(62),l=t(113),p=l.enforce,d=l.get,u=Object.defineProperty,m=i&&!r((function(){return 8!==u((function(){}),"length",{value:8}).length})),h=String(String).split("String"),g=n.exports=function(n,e,t){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!o(n,"name")||s&&n.name!==e)&&(i?u(n,"name",{value:e,configurable:!0}):n.name=e),m&&t&&o(t,"arity")&&n.length!==t.arity&&u(n,"length",{value:t.arity});try{t&&o(t,"constructor")&&t.constructor?i&&u(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var r=p(n);return o(r,"source")||(r.source=h.join("string"==typeof e?e:"")),n};Function.prototype.toString=g((function(){return a(this)&&d(this).source||c(this)}),"toString")},function(n,e,t){var r=t(7),a=t(8),o=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=a(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&i(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var r,a,o,i=t(114),s=t(3),c=t(2),l=t(9),p=t(17),d=t(8),u=t(31),m=t(99),h=t(46),g=s.TypeError,f=s.WeakMap;if(i||u.state){var v=u.state||(u.state=new f),b=c(v.get),k=c(v.has),y=c(v.set);r=function(n,e){if(k(v,n))throw new g("Object already initialized");return e.facade=n,y(v,n,e),e},a=function(n){return b(v,n)||{}},o=function(n){return k(v,n)}}else{var E=m("state");h[E]=!0,r=function(n,e){if(d(n,E))throw new g("Object already initialized");return e.facade=n,p(n,E,e),e},a=function(n){return d(n,E)?n[E]:{}},o=function(n){return d(n,E)}}n.exports={set:r,get:a,has:o,enforce:function(n){return o(n)?a(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=a(e)).type!==n)throw g("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){var r=t(3),a=t(1),o=t(62),i=r.WeakMap;n.exports=a(i)&&/native code/.test(o(i))},function(n,e,t){var r=t(16),a=t(2),o=t(116),i=t(121),s=t(24),c=a([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=o.f(s(n)),t=i.f;return t?c(e,t(n)):e}},function(n,e,t){var r=t(100),a=t(96).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,a)}},function(n,e,t){var r=t(26),a=t(118),o=t(47),i=function(n){return function(e,t,i){var s,c=r(e),l=o(c),p=a(i,l);if(n&&t!=t){for(;l>p;)if((s=c[p++])!=s)return!0}else for(;l>p;p++)if((n||p in c)&&c[p]===t)return n||p||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var r=t(64),a=Math.max,o=Math.min;n.exports=function(n,e){var t=r(n);return t<0?a(t+e,0):o(t,e)}},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?r:t)(e)}},function(n,e,t){var r=t(64),a=Math.min;n.exports=function(n){return n>0?a(r(n),9007199254740991):0}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var r=t(4),a=t(1),o=/#|\.prototype\./,i=function(n,e){var t=c[s(n)];return t==p||t!=l&&(a(e)?r(e):!!e)},s=i.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",p=i.POLYFILL="P";n.exports=i},function(n,e,t){var r=t(44),a=t(45),o=t(43),i=t(47),s=TypeError,c=function(n){return function(e,t,c,l){r(t);var p=a(e),d=o(p),u=i(p),m=n?u-1:0,h=n?-1:1;if(c<2)for(;;){if(m in d){l=d[m],m+=h;break}if(m+=h,n?m<0:u<=m)throw s("Reduce of empty array with no initial value")}for(;n?m>=0:u>m;m+=h)m in d&&(l=t(l,d[m],m,p));return l}};n.exports={left:c(!1),right:c(!0)}},function(n,e,t){"use strict";var r=t(4);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){var r=t(30),a=t(3);n.exports="process"==r(a.process)},function(n,e,t){var r=t(42),a=t(3),o=t(127),i=t(128),s=a.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=i(n,e,c),r({global:!0,constructor:!0,arity:1,forced:c},t)},p=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:c},t)}};l("Error",(function(n){return function(e){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return o(n,this,arguments)}})),l("URIError",(function(n){return function(e){return o(n,this,arguments)}})),p("CompileError",(function(n){return function(e){return o(n,this,arguments)}})),p("LinkError",(function(n){return function(e){return o(n,this,arguments)}})),p("RuntimeError",(function(n){return function(e){return o(n,this,arguments)}}))},function(n,e,t){var r=t(25),a=Function.prototype,o=a.apply,i=a.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(o):function(){return i.apply(o,arguments)})},function(n,e,t){"use strict";var r=t(16),a=t(8),o=t(17),i=t(54),s=t(65),c=t(63),l=t(130),p=t(131),d=t(132),u=t(136),m=t(137),h=t(138),g=t(7),f=t(59);n.exports=function(n,e,t,v){var b=v?2:1,k=n.split("."),y=k[k.length-1],E=r.apply(null,k);if(E){var _=E.prototype;if(!f&&a(_,"cause")&&delete _.cause,!t)return E;var x=r("Error"),w=e((function(n,e){var t=d(v?e:n,void 0),r=v?new E(n):new E;return void 0!==t&&o(r,"message",t),h&&o(r,"stack",m(r.stack,2)),this&&i(_,this)&&p(r,this,w),arguments.length>b&&u(r,arguments[b]),r}));if(w.prototype=_,"Error"!==y?s?s(w,x):c(w,x,{name:!0}):g&&"stackTraceLimit"in E&&(l(w,E,"stackTraceLimit"),l(w,E,"prepareStackTrace")),c(w,E),!f)try{_.name!==y&&o(_,"name",y),_.constructor=w}catch(n){}return w}}},function(n,e,t){var r=t(1),a=String,o=TypeError;n.exports=function(n){if("object"==typeof n||r(n))return n;throw o("Can't set "+a(n)+" as a prototype")}},function(n,e,t){var r=t(15).f;n.exports=function(n,e,t){t in n||r(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){var r=t(1),a=t(9),o=t(65);n.exports=function(n,e,t){var i,s;return o&&r(i=e.constructor)&&i!==t&&a(s=i.prototype)&&s!==t.prototype&&o(n,s),n}},function(n,e,t){var r=t(133);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){var r=t(134),a=String;n.exports=function(n){if("Symbol"===r(n))throw TypeError("Cannot convert a Symbol value to a string");return a(n)}},function(n,e,t){var r=t(135),a=t(1),o=t(30),i=t(27)("toStringTag"),s=Object,c="Arguments"==o(function(){return arguments}());n.exports=r?o:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=s(n),i))?t:c?o(e):"Object"==(r=o(e))&&a(e.callee)?"Arguments":r}},function(n,e,t){var r={};r[t(27)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){var r=t(9),a=t(17);n.exports=function(n,e){r(e)&&"cause"in e&&a(n,"cause",e.cause)}},function(n,e,t){var r=t(2),a=Error,o=r("".replace),i=String(a("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(i);n.exports=function(n,e){if(c&&"string"==typeof n&&!a.prepareStackTrace)for(;e--;)n=o(n,s,"");return n}},function(n,e,t){var r=t(4),a=t(29);n.exports=!r((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",a(1,7)),7!==n.stack)}))},function(n,e,t){var r=t(66),a=t(140);n.exports=function n(e,t,o,i,s){var c=-1,l=e.length;for(o||(o=a),s||(s=[]);++c<l;){var p=e[c];t>0&&o(p)?t>1?n(p,t-1,o,i,s):r(s,p):i||(s[s.length]=p)}return s}},function(n,e,t){var r=t(14),a=t(33),o=t(5),i=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||a(n)||!!(i&&n&&n[i])}},function(n,e,t){var r=t(13),a=t(12);n.exports=function(n){return a(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(14),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var a=i.call(n);return r&&(e?n[s]=t:delete n[s]),a}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(145),a=t(201),o=t(41),i=t(5),s=t(212);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?i(n)?a(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(146),a=t(200),o=t(83);n.exports=function(n){var e=a(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(68),a=t(72);n.exports=function(n,e,t,o){var i=t.length,s=i,c=!o;if(null==n)return!s;for(n=Object(n);i--;){var l=t[i];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){var p=(l=t[i])[0],d=n[p],u=l[1];if(c&&l[2]){if(void 0===d&&!(p in n))return!1}else{var m=new r;if(o)var h=o(d,u,p,n,e,m);if(!(void 0===h?a(u,d,3,o,m):h))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(19),a=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():a.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(19);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(19);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(19);n.exports=function(n,e){var t=this.__data__,a=r(t,n);return a<0?(++this.size,t.push([n,e])):t[a][1]=e,this}},function(n,e,t){var r=t(18);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(18),a=t(34),o=t(36);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var i=t.__data__;if(!a||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(70),a=t(158),o=t(35),i=t(71),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,d=l.hasOwnProperty,u=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||a(n))&&(r(n)?u:s).test(i(n))}},function(n,e,t){var r,a=t(159),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(6)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(162),a=t(18),o=t(34);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},function(n,e,t){var r=t(163),a=t(164),o=t(165),i=t(166),s=t(167);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(20);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(20),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return a.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(20),a=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:a.call(e,n)}},function(n,e,t){var r=t(20);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(21);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(21);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(21);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(21);n.exports=function(n,e){var t=r(this,n),a=t.size;return t.set(n,e),this.size+=t.size==a?0:1,this}},function(n,e,t){var r=t(68),a=t(73),o=t(177),i=t(180),s=t(196),c=t(5),l=t(77),p=t(79),d="[object Object]",u=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,h,g){var f=c(n),v=c(e),b=f?"[object Array]":s(n),k=v?"[object Array]":s(e),y=(b="[object Arguments]"==b?d:b)==d,E=(k="[object Arguments]"==k?d:k)==d,_=b==k;if(_&&l(n)){if(!l(e))return!1;f=!0,y=!1}if(_&&!y)return g||(g=new r),f||p(n)?a(n,e,t,m,h,g):o(n,e,b,t,m,h,g);if(!(1&t)){var x=y&&u.call(n,"__wrapped__"),w=E&&u.call(e,"__wrapped__");if(x||w){var A=x?n.value():n,C=w?e.value():e;return g||(g=new r),h(A,C,t,m,g)}}return!!_&&(g||(g=new r),i(n,e,t,m,h,g))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(14),a=t(178),o=t(69),i=t(73),s=t(179),c=t(37),l=r?r.prototype:void 0,p=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,d,u){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!d(new a(n),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var m=s;case"[object Set]":var h=1&r;if(m||(m=c),n.size!=e.size&&!h)return!1;var g=u.get(n);if(g)return g==e;r|=2,u.set(n,e);var f=i(m(n),m(e),r,l,d,u);return u.delete(n),f;case"[object Symbol]":if(p)return p.call(n)==p.call(e)}return!1}},function(n,e,t){var r=t(6).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(181),a=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,i,s){var c=1&t,l=r(n),p=l.length;if(p!=r(e).length&&!c)return!1;for(var d=p;d--;){var u=l[d];if(!(c?u in e:a.call(e,u)))return!1}var m=s.get(n),h=s.get(e);if(m&&h)return m==e&&h==n;var g=!0;s.set(n,e),s.set(e,n);for(var f=c;++d<p;){var v=n[u=l[d]],b=e[u];if(o)var k=c?o(b,v,u,e,n,s):o(v,b,u,n,e,s);if(!(void 0===k?v===b||i(v,b,t,o,s):k)){g=!1;break}f||(f="constructor"==u)}if(g&&!f){var y=n.constructor,E=e.constructor;y==E||!("constructor"in n)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof E&&E instanceof E||(g=!1)}return s.delete(n),s.delete(e),g}},function(n,e,t){var r=t(182),a=t(183),o=t(76);n.exports=function(n){return r(n,o,a)}},function(n,e,t){var r=t(66),a=t(5);n.exports=function(n,e,t){var o=e(n);return a(n)?o:r(o,t(n))}},function(n,e,t){var r=t(184),a=t(185),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),r(i(n),(function(e){return o.call(n,e)})))}:a;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=0,o=[];++t<r;){var i=n[t];e(i,t,n)&&(o[a++]=i)}return o}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(187),a=t(33),o=t(5),i=t(77),s=t(78),c=t(79),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),p=!t&&a(n),d=!t&&!p&&i(n),u=!t&&!p&&!d&&c(n),m=t||p||d||u,h=m?r(n.length,String):[],g=h.length;for(var f in n)!e&&!l.call(n,f)||m&&("length"==f||d&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||s(f,g))||h.push(f);return h}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(13),a=t(38),o=t(12),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&a(n.length)&&!!i[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(67),a=e&&!e.nodeType&&e,o=a&&"object"==typeof n&&n&&!n.nodeType&&n,i=o&&o.exports===a&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(48)(n))},function(n,e,t){var r=t(193),a=t(194),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return a(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(195)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(197),a=t(34),o=t(198),i=t(81),s=t(199),c=t(13),l=t(71),p=l(r),d=l(a),u=l(o),m=l(i),h=l(s),g=c;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||a&&"[object Map]"!=g(new a)||o&&"[object Promise]"!=g(o.resolve())||i&&"[object Set]"!=g(new i)||s&&"[object WeakMap]"!=g(new s))&&(g=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case p:return"[object DataView]";case d:return"[object Map]";case u:return"[object Promise]";case m:return"[object Set]";case h:return"[object WeakMap]"}return e}),n.exports=g},function(n,e,t){var r=t(10)(t(6),"DataView");n.exports=r},function(n,e,t){var r=t(10)(t(6),"Promise");n.exports=r},function(n,e,t){var r=t(10)(t(6),"WeakMap");n.exports=r},function(n,e,t){var r=t(82),a=t(76);n.exports=function(n){for(var e=a(n),t=e.length;t--;){var o=e[t],i=n[o];e[t]=[o,i,r(i)]}return e}},function(n,e,t){var r=t(72),a=t(202),o=t(209),i=t(39),s=t(82),c=t(83),l=t(22);n.exports=function(n,e){return i(n)&&s(e)?c(l(n),e):function(t){var i=a(t,n);return void 0===i&&i===e?o(t,n):r(e,i,3)}}},function(n,e,t){var r=t(84);n.exports=function(n,e,t){var a=null==n?void 0:r(n,e);return void 0===a?t:a}},function(n,e,t){var r=t(204),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(a,(function(n,t,r,a){e.push(r?a.replace(o,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var r=t(205);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(36);function a(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,a=e?e.apply(this,r):r[0],o=t.cache;if(o.has(a))return o.get(a);var i=n.apply(this,r);return t.cache=o.set(a,i)||o,i};return t.cache=new(a.Cache||r),t}a.Cache=r,n.exports=a},function(n,e,t){var r=t(207);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(14),a=t(208),o=t(5),i=t(40),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return a(e,n)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,a=Array(r);++t<r;)a[t]=e(n[t],t,n);return a}},function(n,e,t){var r=t(210),a=t(211);n.exports=function(n,e){return null!=n&&a(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(85),a=t(33),o=t(5),i=t(78),s=t(38),c=t(22);n.exports=function(n,e,t){for(var l=-1,p=(e=r(e,n)).length,d=!1;++l<p;){var u=c(e[l]);if(!(d=null!=n&&t(n,u)))break;n=n[u]}return d||++l!=p?d:!!(p=null==n?0:n.length)&&s(p)&&i(u,p)&&(o(n)||a(n))}},function(n,e,t){var r=t(213),a=t(214),o=t(39),i=t(22);n.exports=function(n){return o(n)?r(i(n)):a(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(84);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(41),a=t(216),o=t(218);n.exports=function(n,e){return o(a(n,e,r),n+"")}},function(n,e,t){var r=t(217),a=Math.max;n.exports=function(n,e,t){return e=a(void 0===e?n.length-1:e,0),function(){for(var o=arguments,i=-1,s=a(o.length-e,0),c=Array(s);++i<s;)c[i]=o[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=o[i];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(219),a=t(222)(r);n.exports=a},function(n,e,t){var r=t(220),a=t(221),o=t(41),i=a?function(n,e){return a(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(10),a=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=a},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(74),a=t(224),o=t(229),i=t(75),s=t(230),c=t(37);n.exports=function(n,e,t){var l=-1,p=a,d=n.length,u=!0,m=[],h=m;if(t)u=!1,p=o;else if(d>=200){var g=e?null:s(n);if(g)return c(g);u=!1,p=i,h=new r}else h=e?[]:m;n:for(;++l<d;){var f=n[l],v=e?e(f):f;if(f=t||0!==f?f:0,u&&v==v){for(var b=h.length;b--;)if(h[b]===v)continue n;e&&h.push(v),m.push(f)}else p(h,v,t)||(h!==m&&h.push(v),m.push(f))}return m}},function(n,e,t){var r=t(225);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(226),a=t(227),o=t(228);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,a,t)}},function(n,e){n.exports=function(n,e,t,r){for(var a=n.length,o=t+(r?1:-1);r?o--:++o<a;)if(e(n[o],o,n))return o;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,a=n.length;++r<a;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,a=null==n?0:n.length;++r<a;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(81),a=t(231),o=t(37),i=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:a;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(80),a=t(12);n.exports=function(n){return a(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(86)},function(n,e,t){"use strict";t(87)},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(88)},function(n,e,t){"use strict";t(89)},function(n,e,t){"use strict";t(90)},function(n,e,t){"use strict";t(91)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.8
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),a=Array.isArray;function o(n){return null==n}function i(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return"function"==typeof n}function p(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function u(n){return"[object Object]"===d.call(n)}function m(n){return"[object RegExp]"===d.call(n)}function h(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function g(n){return i(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function f(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===d?JSON.stringify(n,null,2):String(n)}function v(n){var e=parseFloat(n);return isNaN(e)?n:e}function b(n,e){for(var t=Object.create(null),r=n.split(","),a=0;a<r.length;a++)t[r[a]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}b("slot,component",!0);var k=b("key,ref,slot,slot-scope,is");function y(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var E=Object.prototype.hasOwnProperty;function _(n,e){return E.call(n,e)}function x(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var w=/-(\w)/g,A=x((function(n){return n.replace(w,(function(n,e){return e?e.toUpperCase():""}))})),C=x((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),B=/\B([A-Z])/g,T=x((function(n){return n.replace(B,"-$1").toLowerCase()}));var P=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function I(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function S(n,e){for(var t in e)n[t]=e[t];return n}function z(n){for(var e={},t=0;t<n.length;t++)n[t]&&S(e,n[t]);return e}function D(n,e,t){}var O=function(n,e,t){return!1},j=function(n){return n};function q(n,e){if(n===e)return!0;var t=p(n),r=p(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var a=Array.isArray(n),o=Array.isArray(e);if(a&&o)return n.length===e.length&&n.every((function(n,t){return q(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(a||o)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return q(n[t],e[t])}))}catch(n){return!1}}function $(n,e){for(var t=0;t<n.length;t++)if(q(n[t],e))return t;return-1}function M(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function F(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var U=["component","directive","filter"],R=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],L={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:D,parsePlatformTagName:j,mustUseProp:O,async:!0,_lifecycleHooks:R},N=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function G(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function K(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var V=new RegExp("[^".concat(N.source,".$_\\d]"));var H="__proto__"in{},Z="undefined"!=typeof window,W=Z&&window.navigator.userAgent.toLowerCase(),X=W&&/msie|trident/.test(W),Y=W&&W.indexOf("msie 9.0")>0,Q=W&&W.indexOf("edge/")>0;W&&W.indexOf("android");var J=W&&/iphone|ipad|ipod|ios/.test(W);W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W);var nn,en=W&&W.match(/firefox\/(\d+)/),tn={}.watch,rn=!1;if(Z)try{var an={};Object.defineProperty(an,"passive",{get:function(){rn=!0}}),window.addEventListener("test-passive",null,an)}catch(n){}var on=function(){return void 0===nn&&(nn=!Z&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),nn},sn=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function cn(n){return"function"==typeof n&&/native code/.test(n.toString())}var ln,pn="undefined"!=typeof Symbol&&cn(Symbol)&&"undefined"!=typeof Reflect&&cn(Reflect.ownKeys);ln="undefined"!=typeof Set&&cn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var dn=null;function un(n){void 0===n&&(n=null),n||dn&&dn._scope.off(),dn=n,n&&n._scope.on()}var mn=function(){function n(n,e,t,r,a,o,i,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=a,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),hn=function(n){void 0===n&&(n="");var e=new mn;return e.text=n,e.isComment=!0,e};function gn(n){return new mn(void 0,void 0,void 0,String(n))}function fn(n){var e=new mn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var vn=0,bn=function(){function n(){this.id=vn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){y(this.subs,n)},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.slice();for(var t=0,r=e.length;t<r;t++){e[t].update()}},n}();bn.target=null;var kn=[];function yn(n){kn.push(n),bn.target=n}function En(){kn.pop(),bn.target=kn[kn.length-1]}var _n=Array.prototype,xn=Object.create(_n);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=_n[n];K(xn,n,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a,o=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":a=t;break;case"splice":a=t.slice(2)}return a&&i.observeArray(a),i.dep.notify(),o}))}));var wn=Object.getOwnPropertyNames(xn),An={},Cn=!0;function Bn(n){Cn=n}var Tn={notify:D,depend:D,addSub:D,removeSub:D},Pn=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?Tn:new bn,this.vmCount=0,K(n,"__ob__",this),a(n)){if(!t)if(H)n.__proto__=xn;else for(var r=0,o=wn.length;r<o;r++){K(n,s=wn[r],xn[s])}e||this.observeArray(n)}else{var i=Object.keys(n);for(r=0;r<i.length;r++){var s;Sn(n,s=i[r],An,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)In(n[e],!1,this.mock)},n}();function In(n,e,t){var r;if(!(!p(n)||Mn(n)||n instanceof mn))return _(n,"__ob__")&&n.__ob__ instanceof Pn?r=n.__ob__:!Cn||!t&&on()||!a(n)&&!u(n)||!Object.isExtensible(n)||n.__v_skip||(r=new Pn(n,e,t)),r}function Sn(n,e,t,r,o,i){var s=new bn,c=Object.getOwnPropertyDescriptor(n,e);if(!c||!1!==c.configurable){var l=c&&c.get,p=c&&c.set;l&&!p||t!==An&&2!==arguments.length||(t=n[e]);var d=!o&&In(t,!1,i);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=l?l.call(n):t;return bn.target&&(s.depend(),d&&(d.dep.depend(),a(e)&&On(e))),Mn(e)&&!o?e.value:e},set:function(e){var r=l?l.call(n):t;if(F(r,e)){if(p)p.call(n,e);else{if(l)return;if(!o&&Mn(r)&&!Mn(e))return void(r.value=e);t=e}d=!o&&In(e,!1,i),s.notify()}}}),s}}function zn(n,e,t){if(!$n(n)){var r=n.__ob__;return a(n)&&h(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),r&&!r.shallow&&r.mock&&In(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||r&&r.vmCount?t:r?(Sn(r.value,e,t,void 0,r.shallow,r.mock),r.dep.notify(),t):(n[e]=t,t)}}function Dn(n,e){if(a(n)&&h(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||$n(n)||_(n,e)&&(delete n[e],t&&t.dep.notify())}}function On(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),a(e)&&On(e)}function jn(n){return qn(n,!0),K(n,"__v_isShallow",!0),n}function qn(n,e){if(!$n(n)){In(n,e,on());0}}function $n(n){return!(!n||!n.__v_isReadonly)}function Mn(n){return!(!n||!0!==n.__v_isRef)}function Fn(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if(Mn(n))return n.value;var r=n&&n.__ob__;return r&&r.dep.depend(),n},set:function(n){var r=e[t];Mn(r)&&!Mn(n)?r.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Un;var Rn=function(){function n(n){void 0===n&&(n=!1),this.active=!0,this.effects=[],this.cleanups=[],!n&&Un&&(this.parent=Un,this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Un;try{return Un=this,n()}finally{Un=e}}else 0},n.prototype.on=function(){Un=this},n.prototype.off=function(){Un=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(this.parent&&!n){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}},n}();function Ln(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Nn=x((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function Gn(n,e){function t(){var n=t.fns;if(!a(n))return Ce(n,null,arguments,e,"v-on handler");for(var r=n.slice(),o=0;o<r.length;o++)Ce(r[o],null,arguments,e,"v-on handler")}return t.fns=n,t}function Kn(n,e,t,r,a,i){var c,l,p,d;for(c in n)l=n[c],p=e[c],d=Nn(c),o(l)||(o(p)?(o(l.fns)&&(l=n[c]=Gn(l,i)),s(d.once)&&(l=n[c]=a(d.name,l,d.capture)),t(d.name,l,d.capture,d.passive,d.params)):l!==p&&(p.fns=l,n[c]=p));for(c in e)o(n[c])&&r((d=Nn(c)).name,e[c],d.capture)}function Vn(n,e,t){var r;n instanceof mn&&(n=n.data.hook||(n.data.hook={}));var a=n[e];function c(){t.apply(this,arguments),y(r.fns,c)}o(a)?r=Gn([c]):i(a.fns)&&s(a.merged)?(r=a).fns.push(c):r=Gn([a,c]),r.merged=!0,n[e]=r}function Hn(n,e,t,r,a){if(i(e)){if(_(e,t))return n[t]=e[t],a||delete e[t],!0;if(_(e,r))return n[t]=e[r],a||delete e[r],!0}return!1}function Zn(n){return c(n)?[gn(n)]:a(n)?function n(e,t){var r,l,p,d,u=[];for(r=0;r<e.length;r++)o(l=e[r])||"boolean"==typeof l||(p=u.length-1,d=u[p],a(l)?l.length>0&&(Wn((l=n(l,"".concat(t||"","_").concat(r)))[0])&&Wn(d)&&(u[p]=gn(d.text+l[0].text),l.shift()),u.push.apply(u,l)):c(l)?Wn(d)?u[p]=gn(d.text+l):""!==l&&u.push(gn(l)):Wn(l)&&Wn(d)?u[p]=gn(d.text+l.text):(s(e._isVList)&&i(l.tag)&&o(l.key)&&i(t)&&(l.key="__vlist".concat(t,"_").concat(r,"__")),u.push(l)));return u}(n):void 0}function Wn(n){return i(n)&&i(n.text)&&!1===n.isComment}function Xn(n,e){var t,r,o,s,c=null;if(a(n)||"string"==typeof n)for(c=new Array(n.length),t=0,r=n.length;t<r;t++)c[t]=e(n[t],t);else if("number"==typeof n)for(c=new Array(n),t=0;t<n;t++)c[t]=e(t+1,t);else if(p(n))if(pn&&n[Symbol.iterator]){c=[];for(var l=n[Symbol.iterator](),d=l.next();!d.done;)c.push(e(d.value,c.length)),d=l.next()}else for(o=Object.keys(n),c=new Array(o.length),t=0,r=o.length;t<r;t++)s=o[t],c[t]=e(n[s],s,t);return i(c)||(c=[]),c._isVList=!0,c}function Yn(n,e,t,r){var a,o=this.$scopedSlots[n];o?(t=t||{},r&&(t=S(S({},r),t)),a=o(t)||(l(e)?e():e)):a=this.$slots[n]||(l(e)?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},a):a}function Qn(n){return Pt(this.$options,"filters",n,!0)||j}function Jn(n,e){return a(n)?-1===n.indexOf(e):n!==e}function ne(n,e,t,r,a){var o=L.keyCodes[e]||t;return a&&r&&!L.keyCodes[e]?Jn(a,r):o?Jn(o,n):r?T(r)!==e:void 0===n}function ee(n,e,t,r,o){if(t)if(p(t)){a(t)&&(t=z(t));var i=void 0,s=function(a){if("class"===a||"style"===a||k(a))i=n;else{var s=n.attrs&&n.attrs.type;i=r||L.mustUseProp(e,s,a)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=A(a),l=T(a);c in i||l in i||(i[a]=t[a],o&&((n.on||(n.on={}))["update:".concat(a)]=function(n){t[a]=n}))};for(var c in t)s(c)}else;return n}function te(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||ae(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),r}function re(n,e,t){return ae(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function ae(n,e,t){if(a(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&oe(n[r],"".concat(e,"_").concat(r),t);else oe(n,e,t)}function oe(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function ie(n,e){if(e)if(u(e)){var t=n.on=n.on?S({},n.on):{};for(var r in e){var a=t[r],o=e[r];t[r]=a?[].concat(a,o):o}}else;return n}function se(n,e,t,r){e=e||{$stable:!t};for(var o=0;o<n.length;o++){var i=n[o];a(i)?se(i,e,t):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return r&&(e.$key=r),e}function ce(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function le(n,e){return"string"==typeof n?e+n:n}function pe(n){n._o=re,n._n=v,n._s=f,n._l=Xn,n._t=Yn,n._q=q,n._i=$,n._m=te,n._f=Qn,n._k=ne,n._b=ee,n._v=gn,n._e=hn,n._u=se,n._g=ie,n._d=ce,n._p=le}function de(n,e){if(!n||!n.length)return{};for(var t={},r=0,a=n.length;r<a;r++){var o=n[r],i=o.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,o.context!==e&&o.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(o);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in t)t[l].every(ue)&&delete t[l];return t}function ue(n){return n.isComment&&!n.asyncFactory||" "===n.text}function me(n){return n.isComment&&n.asyncFactory}function he(n,e,t,a){var o,i=Object.keys(t).length>0,s=e?!!e.$stable:!i,c=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&a&&a!==r&&c===a.$key&&!i&&!a.$hasNormal)return a;for(var l in o={},e)e[l]&&"$"!==l[0]&&(o[l]=ge(n,t,l,e[l]))}else o={};for(var p in t)p in o||(o[p]=fe(t,p));return e&&Object.isExtensible(e)&&(e._normalized=o),K(o,"$stable",s),K(o,"$key",c),K(o,"$hasNormal",i),o}function ge(n,e,t,r){var o=function(){var e=dn;un(n);var t=arguments.length?r.apply(null,arguments):r({}),o=(t=t&&"object"==typeof t&&!a(t)?[t]:Zn(t))&&t[0];return un(e),t&&(!o||1===t.length&&o.isComment&&!me(o))?void 0:t};return r.proxy&&Object.defineProperty(e,t,{get:o,enumerable:!0,configurable:!0}),o}function fe(n,e){return function(){return n[e]}}function ve(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};K(e,"_v_attr_proxy",!0),be(e,n.$attrs,r,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||be(n._listenersProxy={},n.$listeners,r,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||ye(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:P(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return Fn(n,e,t)}))}}}function be(n,e,t,r,a){var o=!1;for(var i in e)i in n?e[i]!==t[i]&&(o=!0):(o=!0,ke(n,i,r,a));for(var i in n)i in e||(o=!0,delete n[i]);return o}function ke(n,e,t,r){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[r][e]}})}function ye(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var Ee=null;function _e(n,e){return(n.__esModule||pn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),p(n)?e.extend(n):n}function xe(n){if(a(n))for(var e=0;e<n.length;e++){var t=n[e];if(i(t)&&(i(t.componentOptions)||me(t)))return t}}function we(n,e,t,r,d,u){return(a(t)||c(t))&&(d=r,r=t,t=void 0),s(u)&&(d=2),function(n,e,t,r,c){if(i(t)&&i(t.__ob__))return hn();i(t)&&i(t.is)&&(e=t.is);if(!e)return hn();0;a(r)&&l(r[0])&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===c?r=Zn(r):1===c&&(r=function(n){for(var e=0;e<n.length;e++)if(a(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var d,u;if("string"==typeof e){var m=void 0;u=n.$vnode&&n.$vnode.ns||L.getTagNamespace(e),d=L.isReservedTag(e)?new mn(L.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!i(m=Pt(n.$options,"components",e))?new mn(e,t,r,void 0,void 0,n):kt(m,t,n,r,e)}else d=kt(e,t,n,r);return a(d)?d:i(d)?(i(u)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(i(e.children))for(var a=0,c=e.children.length;a<c;a++){var l=e.children[a];i(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(d,u),i(t)&&function(n){p(n.style)&&Re(n.style);p(n.class)&&Re(n.class)}(t),d):hn()}(n,e,t,r,d)}function Ae(n,e,t){yn();try{if(e)for(var r=e;r=r.$parent;){var a=r.$options.errorCaptured;if(a)for(var o=0;o<a.length;o++)try{if(!1===a[o].call(r,n,e,t))return}catch(n){Be(n,r,"errorCaptured hook")}}Be(n,e,t)}finally{En()}}function Ce(n,e,t,r,a){var o;try{(o=t?n.apply(e,t):n.call(e))&&!o._isVue&&g(o)&&!o._handled&&(o.catch((function(n){return Ae(n,r,a+" (Promise/async)")})),o._handled=!0)}catch(n){Ae(n,r,a)}return o}function Be(n,e,t){if(L.errorHandler)try{return L.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Te(e,null,"config.errorHandler")}Te(n,e,t)}function Te(n,e,t){if(!Z||"undefined"==typeof console)throw n;console.error(n)}var Pe,Ie=!1,Se=[],ze=!1;function De(){ze=!1;var n=Se.slice(0);Se.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&cn(Promise)){var Oe=Promise.resolve();Pe=function(){Oe.then(De),J&&setTimeout(D)},Ie=!0}else if(X||"undefined"==typeof MutationObserver||!cn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Pe="undefined"!=typeof setImmediate&&cn(setImmediate)?function(){setImmediate(De)}:function(){setTimeout(De,0)};else{var je=1,qe=new MutationObserver(De),$e=document.createTextNode(String(je));qe.observe($e,{characterData:!0}),Pe=function(){je=(je+1)%2,$e.data=String(je)},Ie=!0}function Me(n,e){var t;if(Se.push((function(){if(n)try{n.call(e)}catch(n){Ae(n,e,"nextTick")}else t&&t(e)})),ze||(ze=!0,Pe()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function Fe(n){return function(e,t){if(void 0===t&&(t=dn),t)return function(n,e,t){var r=n.$options;r[e]=At(r[e],t)}(t,n,e)}}Fe("beforeMount"),Fe("mounted"),Fe("beforeUpdate"),Fe("updated"),Fe("beforeDestroy"),Fe("destroyed"),Fe("errorCaptured"),Fe("activated"),Fe("deactivated"),Fe("serverPrefetch"),Fe("renderTracked"),Fe("renderTriggered");var Ue=new ln;function Re(n){return function n(e,t){var r,o,i=a(e);if(!i&&!p(e)||Object.isFrozen(e)||e instanceof mn)return;if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(i)for(r=e.length;r--;)n(e[r],t);else if(Mn(e))n(e.value,t);else for(o=Object.keys(e),r=o.length;r--;)n(e[o[r]],t)}(n,Ue),Ue.clear(),n}var Le,Ne=0,Ge=function(){function n(n,e,t,r,a){var o,i;o=this,void 0===(i=Un||(n?n._scope:void 0))&&(i=Un),i&&i.active&&i.effects.push(o),(this.vm=n)&&a&&(n._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++Ne,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ln,this.newDepIds=new ln,this.expression="",l(e)?this.getter=e:(this.getter=function(n){if(!V.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=D)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;yn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Ae(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Re(n),En(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():dt(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||p(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');Ce(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&y(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function Ke(n,e){Le.$on(n,e)}function Ve(n,e){Le.$off(n,e)}function He(n,e){var t=Le;return function r(){var a=e.apply(null,arguments);null!==a&&t.$off(n,r)}}function Ze(n,e,t){Le=n,Kn(e,t||{},Ke,Ve,He,n),Le=void 0}var We=null;function Xe(n){var e=We;return We=n,function(){We=e}}function Ye(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function Qe(n,e){if(e){if(n._directInactive=!1,Ye(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)Qe(n.$children[t]);Je(n,"activated")}}function Je(n,e,t,r){void 0===r&&(r=!0),yn();var a=dn;r&&un(n);var o=n.$options[e],i="".concat(e," hook");if(o)for(var s=0,c=o.length;s<c;s++)Ce(o[s],n,t||null,n,i);n._hasHookEvent&&n.$emit("hook:"+e),r&&un(a),En()}var nt=[],et=[],tt={},rt=!1,at=!1,ot=0;var it=0,st=Date.now;if(Z&&!X){var ct=window.performance;ct&&"function"==typeof ct.now&&st()>document.createEvent("Event").timeStamp&&(st=function(){return ct.now()})}var lt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function pt(){var n,e;for(it=st(),at=!0,nt.sort(lt),ot=0;ot<nt.length;ot++)(n=nt[ot]).before&&n.before(),e=n.id,tt[e]=null,n.run();var t=et.slice(),r=nt.slice();ot=nt.length=et.length=0,tt={},rt=at=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,Qe(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r&&r._watcher===t&&r._isMounted&&!r._isDestroyed&&Je(r,"updated")}}(r),sn&&L.devtools&&sn.emit("flush")}function dt(n){var e=n.id;if(null==tt[e]&&(n!==bn.target||!n.noRecurse)){if(tt[e]=!0,at){for(var t=nt.length-1;t>ot&&nt[t].id>n.id;)t--;nt.splice(t+1,0,n)}else nt.push(n);rt||(rt=!0,Me(pt))}}function ut(n,e){if(n){for(var t=Object.create(null),r=pn?Reflect.ownKeys(n):Object.keys(n),a=0;a<r.length;a++){var o=r[a];if("__ob__"!==o){var i=n[o].from;if(i in e._provided)t[o]=e._provided[i];else if("default"in n[o]){var s=n[o].default;t[o]=l(s)?s.call(e):s}else 0}}return t}}function mt(n,e,t,o,i){var c,l=this,p=i.options;_(o,"_uid")?(c=Object.create(o))._original=o:(c=o,o=o._original);var d=s(p._compiled),u=!d;this.data=n,this.props=e,this.children=t,this.parent=o,this.listeners=n.on||r,this.injections=ut(p.inject,o),this.slots=function(){return l.$slots||he(o,n.scopedSlots,l.$slots=de(t,o)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return he(o,n.scopedSlots,this.slots())}}),d&&(this.$options=p,this.$slots=this.slots(),this.$scopedSlots=he(o,n.scopedSlots,this.$slots)),p._scopeId?this._c=function(n,e,t,r){var i=we(c,n,e,t,r,u);return i&&!a(i)&&(i.fnScopeId=p._scopeId,i.fnContext=o),i}:this._c=function(n,e,t,r){return we(c,n,e,t,r,u)}}function ht(n,e,t,r,a){var o=fn(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function gt(n,e){for(var t in e)n[A(t)]=e[t]}function ft(n){return n.name||n.__name||n._componentTag}pe(mt.prototype);var vt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;vt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;i(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,We)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,a,o){var i=a.data.scopedSlots,s=n.$scopedSlots,c=!!(i&&!i.$stable||s!==r&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c),p=n.$vnode;n.$options._parentVnode=a,n.$vnode=a,n._vnode&&(n._vnode.parent=a),n.$options._renderChildren=o;var d=a.data.attrs||r;n._attrsProxy&&be(n._attrsProxy,d,p.data&&p.data.attrs||r,n,"$attrs")&&(l=!0),n.$attrs=d,t=t||r;var u=n.$options._parentListeners;if(n._listenersProxy&&be(n._listenersProxy,t,u||r,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,Ze(n,t,u),e&&n.$options.props){Bn(!1);for(var m=n._props,h=n.$options._propKeys||[],g=0;g<h.length;g++){var f=h[g],v=n.$options.props;m[f]=It(f,v,e,n)}Bn(!0),n.$options.propsData=e}l&&(n.$slots=de(o,a.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,Je(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,et.push(e)):Qe(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Ye(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);Je(e,"deactivated")}}(e,!0):e.$destroy())}},bt=Object.keys(vt);function kt(n,e,t,c,l){if(!o(n)){var d=t.$options._base;if(p(n)&&(n=d.extend(n)),"function"==typeof n){var u;if(o(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&i(n.errorComp))return n.errorComp;if(i(n.resolved))return n.resolved;var t=Ee;if(t&&i(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),s(n.loading)&&i(n.loadingComp))return n.loadingComp;if(t&&!i(n.owners)){var r=n.owners=[t],a=!0,c=null,l=null;t.$on("hook:destroyed",(function(){return y(r,t)}));var d=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},u=M((function(t){n.resolved=_e(t,e),a?r.length=0:d(!0)})),m=M((function(e){i(n.errorComp)&&(n.error=!0,d(!0))})),h=n(u,m);return p(h)&&(g(h)?o(n.resolved)&&h.then(u,m):g(h.component)&&(h.component.then(u,m),i(h.error)&&(n.errorComp=_e(h.error,e)),i(h.loading)&&(n.loadingComp=_e(h.loading,e),0===h.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,d(!1))}),h.delay||200)),i(h.timeout)&&(l=setTimeout((function(){l=null,o(n.resolved)&&m(null)}),h.timeout)))),a=!1,n.loading?n.loadingComp:n.resolved}}(u=n,d)))return function(n,e,t,r,a){var o=hn();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:a},o}(u,e,t,c,l);e=e||{},Gt(n),i(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var o=e.on||(e.on={}),s=o[r],c=e.model.callback;i(s)?(a(s)?-1===s.indexOf(c):s!==c)&&(o[r]=[c].concat(s)):o[r]=c}(n.options,e);var m=function(n,e,t){var r=e.options.props;if(!o(r)){var a={},s=n.attrs,c=n.props;if(i(s)||i(c))for(var l in r){var p=T(l);Hn(a,c,l,p,!0)||Hn(a,s,l,p,!1)}return a}}(e,n);if(s(n.options.functional))return function(n,e,t,o,s){var c=n.options,l={},p=c.props;if(i(p))for(var d in p)l[d]=It(d,p,e||r);else i(t.attrs)&&gt(l,t.attrs),i(t.props)&&gt(l,t.props);var u=new mt(t,l,s,o,n),m=c.render.call(null,u._c,u);if(m instanceof mn)return ht(m,t,u.parent,c,u);if(a(m)){for(var h=Zn(m)||[],g=new Array(h.length),f=0;f<h.length;f++)g[f]=ht(h[f],t,u.parent,c,u);return g}}(n,m,e,t,c);var h=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<bt.length;t++){var r=bt[t],a=e[r],o=vt[r];a===o||a&&a._merged||(e[r]=a?yt(o,a):o)}}(e);var v=ft(n.options)||l;return new mn("vue-component-".concat(n.cid).concat(v?"-".concat(v):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:m,listeners:h,tag:l,children:c},u)}}}function yt(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}var Et=D,_t=L.optionMergeStrategies;function xt(n,e){if(!e)return n;for(var t,r,a,o=pn?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++)"__ob__"!==(t=o[i])&&(r=n[t],a=e[t],_(n,t)?r!==a&&u(r)&&u(a)&&xt(r,a):zn(n,t,a));return n}function wt(n,e,t){return t?function(){var r=l(e)?e.call(t,t):e,a=l(n)?n.call(t,t):n;return r?xt(r,a):a}:e?n?function(){return xt(l(e)?e.call(this,this):e,l(n)?n.call(this,this):n)}:e:n}function At(n,e){var t=e?n?n.concat(e):a(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function Ct(n,e,t,r){var a=Object.create(n||null);return e?S(a,e):a}_t.data=function(n,e,t){return t?wt(n,e,t):e&&"function"!=typeof e?n:wt(n,e)},R.forEach((function(n){_t[n]=At})),U.forEach((function(n){_t[n+"s"]=Ct})),_t.watch=function(n,e,t,r){if(n===tn&&(n=void 0),e===tn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var o={};for(var i in S(o,n),e){var s=o[i],c=e[i];s&&!a(s)&&(s=[s]),o[i]=s?s.concat(c):a(c)?c:[c]}return o},_t.props=_t.methods=_t.inject=_t.computed=function(n,e,t,r){if(!n)return e;var a=Object.create(null);return S(a,n),e&&S(a,e),a},_t.provide=wt;var Bt=function(n,e){return void 0===e?n:e};function Tt(n,e,t){if(l(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var r,o,i={};if(a(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(i[A(o)]={type:null});else if(u(t))for(var s in t)o=t[s],i[A(s)]=u(o)?o:{type:o};else 0;n.props=i}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(a(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(u(t))for(var i in t){var s=t[i];r[i]=u(s)?S({from:i},s):{from:s}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];l(r)&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=Tt(n,e.extends,t)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)n=Tt(n,e.mixins[r],t);var i,s={};for(i in n)c(i);for(i in e)_(n,i)||c(i);function c(r){var a=_t[r]||Bt;s[r]=a(n[r],e[r],t,r)}return s}function Pt(n,e,t,r){if("string"==typeof t){var a=n[e];if(_(a,t))return a[t];var o=A(t);if(_(a,o))return a[o];var i=C(o);return _(a,i)?a[i]:a[t]||a[o]||a[i]}}function It(n,e,t,r){var a=e[n],o=!_(t,n),i=t[n],s=Ot(Boolean,a.type);if(s>-1)if(o&&!_(a,"default"))i=!1;else if(""===i||i===T(n)){var c=Ot(String,a.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!_(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return l(r)&&"Function"!==zt(e.type)?r.call(n):r}(r,a,n);var p=Cn;Bn(!0),In(i),Bn(p)}return i}var St=/^\s*function (\w+)/;function zt(n){var e=n&&n.toString().match(St);return e?e[1]:""}function Dt(n,e){return zt(n)===zt(e)}function Ot(n,e){if(!a(e))return Dt(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Dt(e[t],n))return t;return-1}var jt={enumerable:!0,configurable:!0,get:D,set:D};function qt(n,e,t){jt.get=function(){return this[e][t]},jt.set=function(n){this[e][t]=n},Object.defineProperty(n,t,jt)}function $t(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props=jn({}),a=n.$options._propKeys=[];n.$parent&&Bn(!1);var o=function(o){a.push(o);var i=It(o,e,t,n);Sn(r,o,i),o in n||qt(n,"_props",o)};for(var i in e)o(i);Bn(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var r=n._setupContext=ve(n);un(n),yn();var a=Ce(t,null,[n._props||jn({}),r],n,"setup");if(En(),un(),l(a))e.render=a;else if(p(a))if(n._setupState=a,a.__sfc){var o=n._setupProxy={};for(var i in a)"__sfc"!==i&&Fn(o,a,i)}else for(var i in a)G(i)||Fn(n,a,i);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?D:P(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;u(e=n._data=l(e)?function(n,e){yn();try{return n.call(e,e)}catch(n){return Ae(n,e,"data()"),{}}finally{En()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,a=(n.$options.methods,t.length);for(;a--;){var o=t[a];0,r&&_(r,o)||G(o)||qt(n,"_data",o)}var i=In(e);i&&i.vmCount++}(n);else{var t=In(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=on();for(var a in e){var o=e[a],i=l(o)?o:o.get;0,r||(t[a]=new Ge(n,i||D,D,Mt)),a in n||Ft(n,a,o)}}(n,e.computed),e.watch&&e.watch!==tn&&function(n,e){for(var t in e){var r=e[t];if(a(r))for(var o=0;o<r.length;o++)Lt(n,t,r[o]);else Lt(n,t,r)}}(n,e.watch)}var Mt={lazy:!0};function Ft(n,e,t){var r=!on();l(t)?(jt.get=r?Ut(e):Rt(t),jt.set=D):(jt.get=t.get?r&&!1!==t.cache?Ut(e):Rt(t.get):D,jt.set=t.set||D),Object.defineProperty(n,e,jt)}function Ut(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),bn.target&&e.depend(),e.value}}function Rt(n){return function(){return n.call(this,this)}}function Lt(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var Nt=0;function Gt(n){var e=n.options;if(n.super){var t=Gt(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var a in t)t[a]!==r[a]&&(e||(e={}),e[a]=t[a]);return e}(n);r&&S(n.extendOptions,r),(e=n.options=Tt(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Kt(n){this._init(n)}function Vt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,a=n._Ctor||(n._Ctor={});if(a[r])return a[r];var o=ft(n)||ft(t.options);var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=Tt(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)qt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)Ft(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,U.forEach((function(n){i[n]=t[n]})),o&&(i.options.components[o]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=S({},i.options),a[r]=i,i}}function Ht(n){return n&&(ft(n.Ctor.options)||n.tag)}function Zt(n,e){return a(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!m(n)&&n.test(e)}function Wt(n,e){var t=n.cache,r=n.keys,a=n._vnode;for(var o in t){var i=t[o];if(i){var s=i.name;s&&!e(s)&&Xt(t,o,r,a)}}}function Xt(n,e,t,r){var a=n[e];!a||r&&a.tag===r.tag||a.componentInstance.$destroy(),n[e]=null,y(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=Nt++,e._isVue=!0,e.__v_skip=!0,e._scope=new Rn(!0),n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var a=r.componentOptions;t.propsData=a.propsData,t._parentListeners=a.listeners,t._renderChildren=a.children,t._componentTag=a.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Tt(Gt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Ze(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,a=t&&t.context;n.$slots=de(e._renderChildren,a),n.$scopedSlots=t?he(n.$parent,t.data.scopedSlots,n.$slots):r,n._c=function(e,t,r,a){return we(n,e,t,r,a,!1)},n.$createElement=function(e,t,r,a){return we(n,e,t,r,a,!0)};var o=t&&t.data;Sn(n,"$attrs",o&&o.attrs||r,null,!0),Sn(n,"$listeners",e._parentListeners||r,null,!0)}(e),Je(e,"beforeCreate",void 0,!1),function(n){var e=ut(n.$options.inject,n);e&&(Bn(!1),Object.keys(e).forEach((function(t){Sn(n,t,e[t])})),Bn(!0))}(e),$t(e),function(n){var e=n.$options.provide;if(e){var t=l(e)?e.call(n):e;if(!p(t))return;for(var r=Ln(n),a=pn?Reflect.ownKeys(t):Object.keys(t),o=0;o<a.length;o++){var i=a[o];Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))}}}(e),Je(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Kt),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=zn,n.prototype.$delete=Dn,n.prototype.$watch=function(n,e,t){if(u(e))return Lt(this,n,e,t);(t=t||{}).user=!0;var r=new Ge(this,n,e,t);if(t.immediate){var a='callback for immediate watcher "'.concat(r.expression,'"');yn(),Ce(e,this,[r.value],this,a),En()}return function(){r.teardown()}}}(Kt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(a(n))for(var o=0,i=n.length;o<i;o++)r.$on(n[o],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(a(n)){for(var r=0,o=n.length;r<o;r++)t.$off(n[r],e);return t}var i,s=t._events[n];if(!s)return t;if(!e)return t._events[n]=null,t;for(var c=s.length;c--;)if((i=s[c])===e||i.fn===e){s.splice(c,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?I(t):t;for(var r=I(arguments,1),a='event handler for "'.concat(n,'"'),o=0,i=t.length;o<i;o++)Ce(t[o],e,r,e,a)}return e}}(Kt),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,a=t._vnode,o=Xe(t);t._vnode=n,t.$el=a?t.__patch__(a,n):t.__patch__(t.$el,n,e,!1),o(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){Je(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||y(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),Je(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Kt),function(n){pe(n.prototype),n.prototype.$nextTick=function(n){return Me(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,r=t.render,o=t._parentVnode;o&&e._isMounted&&(e.$scopedSlots=he(e.$parent,o.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&ye(e._slotsProxy,e.$scopedSlots)),e.$vnode=o;try{un(e),Ee=e,n=r.call(e._renderProxy,e.$createElement)}catch(t){Ae(t,e,"render"),n=e._vnode}finally{Ee=null,un()}return a(n)&&1===n.length&&(n=n[0]),n instanceof mn||(n=hn()),n.parent=o,n}}(Kt);var Yt=[String,RegExp,Array],Qt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Yt,exclude:Yt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var a=t.tag,o=t.componentInstance,i=t.componentOptions;n[r]={name:Ht(i),tag:a,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Xt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Xt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Wt(n,(function(n){return Zt(e,n)}))})),this.$watch("exclude",(function(e){Wt(n,(function(n){return!Zt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=xe(n),t=e&&e.componentOptions;if(t){var r=Ht(t),a=this.include,o=this.exclude;if(a&&(!r||!Zt(a,r))||o&&r&&Zt(o,r))return e;var i=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;i[c]?(e.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return L}};Object.defineProperty(n,"config",e),n.util={warn:Et,extend:S,mergeOptions:Tt,defineReactive:Sn},n.set=zn,n.delete=Dn,n.nextTick=Me,n.observable=function(n){return In(n),n},n.options=Object.create(null),U.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,S(n.options.components,Qt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=I(arguments,1);return t.unshift(this),l(n.install)?n.install.apply(n,t):l(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Tt(this.options,n),this}}(n),Vt(n),function(n){U.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&l(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Kt),Object.defineProperty(Kt.prototype,"$isServer",{get:on}),Object.defineProperty(Kt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Kt,"FunctionalRenderContext",{value:mt}),Kt.version="2.7.8";var Jt=b("style,class"),nr=b("input,textarea,option,select,progress"),er=b("contenteditable,draggable,spellcheck"),tr=b("events,caret,typing,plaintext-only"),rr=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ar="http://www.w3.org/1999/xlink",or=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},ir=function(n){return or(n)?n.slice(6,n.length):""},sr=function(n){return null==n||!1===n};function cr(n){for(var e=n.data,t=n,r=n;i(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=lr(r.data,e));for(;i(t=t.parent);)t&&t.data&&(e=lr(e,t.data));return function(n,e){if(i(n)||i(e))return pr(n,dr(e));return""}(e.staticClass,e.class)}function lr(n,e){return{staticClass:pr(n.staticClass,e.staticClass),class:i(n.class)?[n.class,e.class]:e.class}}function pr(n,e){return n?e?n+" "+e:n:e||""}function dr(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,a=n.length;r<a;r++)i(e=dr(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):p(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var ur={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},mr=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),hr=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),gr=function(n){return mr(n)||hr(n)};var fr=Object.create(null);var vr=b("text,number,password,search,email,tel,url");var br=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(ur[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),kr={create:function(n,e){yr(e)},update:function(n,e){n.data.ref!==e.data.ref&&(yr(n,!0),yr(e))},destroy:function(n){yr(n,!0)}};function yr(n,e){var t=n.data.ref;if(i(t)){var r=n.context,o=n.componentInstance||n.elm,s=e?null:o,c=e?void 0:o;if(l(t))Ce(t,r,[s],r,"template ref function");else{var p=n.data.refInFor,d="string"==typeof t||"number"==typeof t,u=Mn(t),m=r.$refs;if(d||u)if(p){var h=d?m[t]:t.value;e?a(h)&&y(h,o):a(h)?h.includes(o)||h.push(o):d?(m[t]=[o],Er(r,t,m[t])):t.value=[o]}else if(d){if(e&&m[t]!==o)return;m[t]=c,Er(r,t,s)}else if(u){if(e&&t.value!==o)return;t.value=s}else 0}}}function Er(n,e,t){var r=n._setupState;r&&_(r,e)&&(Mn(r[e])?r[e].value=t:r[e]=t)}var _r=new mn("",{},[]),xr=["create","activate","update","remove","destroy"];function wr(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&i(n.data)===i(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=i(t=n.data)&&i(t=t.attrs)&&t.type,a=i(t=e.data)&&i(t=t.attrs)&&t.type;return r===a||vr(r)&&vr(a)}(n,e)||s(n.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function Ar(n,e,t){var r,a,o={};for(r=e;r<=t;++r)i(a=n[r].key)&&(o[a]=r);return o}var Cr={create:Br,update:Br,destroy:function(n){Br(n,_r)}};function Br(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,a,o=n===_r,i=e===_r,s=Pr(n.data.directives,n.context),c=Pr(e.data.directives,e.context),l=[],p=[];for(t in c)r=s[t],a=c[t],r?(a.oldValue=r.value,a.oldArg=r.arg,Sr(a,"update",e,n),a.def&&a.def.componentUpdated&&p.push(a)):(Sr(a,"bind",e,n),a.def&&a.def.inserted&&l.push(a));if(l.length){var d=function(){for(var t=0;t<l.length;t++)Sr(l[t],"inserted",e,n)};o?Vn(e,"insert",d):d()}p.length&&Vn(e,"postpatch",(function(){for(var t=0;t<p.length;t++)Sr(p[t],"componentUpdated",e,n)}));if(!o)for(t in s)c[t]||Sr(s[t],"unbind",n,n,i)}(n,e)}var Tr=Object.create(null);function Pr(n,e){var t,r,a=Object.create(null);if(!n)return a;for(t=0;t<n.length;t++)(r=n[t]).modifiers||(r.modifiers=Tr),a[Ir(r)]=r,e._setupState&&e._setupState.__sfc&&(r.def=r.def||Pt(e,"_setupState","v-"+r.name)),r.def=r.def||Pt(e.$options,"directives",r.name);return a}function Ir(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function Sr(n,e,t,r,a){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,a)}catch(r){Ae(r,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var zr=[kr,Cr];function Dr(n,e){var t=e.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(e.data.attrs))){var r,a,c=e.elm,l=n.data.attrs||{},p=e.data.attrs||{};for(r in(i(p.__ob__)||s(p._v_attr_proxy))&&(p=e.data.attrs=S({},p)),p)a=p[r],l[r]!==a&&Or(c,r,a,e.data.pre);for(r in(X||Q)&&p.value!==l.value&&Or(c,"value",p.value),l)o(p[r])&&(or(r)?c.removeAttributeNS(ar,ir(r)):er(r)||c.removeAttribute(r))}}function Or(n,e,t,r){r||n.tagName.indexOf("-")>-1?jr(n,e,t):rr(e)?sr(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):er(e)?n.setAttribute(e,function(n,e){return sr(e)||"false"===e?"false":"contenteditable"===n&&tr(e)?e:"true"}(e,t)):or(e)?sr(t)?n.removeAttributeNS(ar,ir(e)):n.setAttributeNS(ar,e,t):jr(n,e,t)}function jr(n,e,t){if(sr(t))n.removeAttribute(e);else{if(X&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var qr={create:Dr,update:Dr};function $r(n,e){var t=e.elm,r=e.data,a=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(a)||o(a.staticClass)&&o(a.class)))){var s=cr(e),c=t._transitionClasses;i(c)&&(s=pr(s,dr(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var Mr,Fr={create:$r,update:$r};function Ur(n,e,t){var r=Mr;return function a(){var o=e.apply(null,arguments);null!==o&&Nr(n,a,t,r)}}var Rr=Ie&&!(en&&Number(en[1])<=53);function Lr(n,e,t,r){if(Rr){var a=it,o=e;e=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=a||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}Mr.addEventListener(n,e,rn?{capture:t,passive:r}:t)}function Nr(n,e,t,r){(r||Mr).removeEventListener(n,e._wrapper||e,t)}function Gr(n,e){if(!o(n.data.on)||!o(e.data.on)){var t=e.data.on||{},r=n.data.on||{};Mr=e.elm||n.elm,function(n){if(i(n.__r)){var e=X?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}i(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Kn(t,r,Lr,Nr,Ur,e.context),Mr=void 0}}var Kr,Vr={create:Gr,update:Gr,destroy:function(n){return Gr(n,_r)}};function Hr(n,e){if(!o(n.data.domProps)||!o(e.data.domProps)){var t,r,a=e.elm,c=n.data.domProps||{},l=e.data.domProps||{};for(t in(i(l.__ob__)||s(l._v_attr_proxy))&&(l=e.data.domProps=S({},l)),c)t in l||(a[t]="");for(t in l){if(r=l[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===c[t])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===t&&"PROGRESS"!==a.tagName){a._value=r;var p=o(r)?"":String(r);Zr(a,p)&&(a.value=p)}else if("innerHTML"===t&&hr(a.tagName)&&o(a.innerHTML)){(Kr=Kr||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var d=Kr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}else if(r!==c[t])try{a[t]=r}catch(n){}}}}function Zr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(i(r)){if(r.number)return v(t)!==v(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Wr={create:Hr,update:Hr},Xr=x((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Yr(n){var e=Qr(n.style);return n.staticStyle?S(n.staticStyle,e):e}function Qr(n){return Array.isArray(n)?z(n):"string"==typeof n?Xr(n):n}var Jr,na=/^--/,ea=/\s*!important$/,ta=function(n,e,t){if(na.test(e))n.style.setProperty(e,t);else if(ea.test(t))n.style.setProperty(T(e),t.replace(ea,""),"important");else{var r=aa(e);if(Array.isArray(t))for(var a=0,o=t.length;a<o;a++)n.style[r]=t[a];else n.style[r]=t}},ra=["Webkit","Moz","ms"],aa=x((function(n){if(Jr=Jr||document.createElement("div").style,"filter"!==(n=A(n))&&n in Jr)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<ra.length;t++){var r=ra[t]+e;if(r in Jr)return r}}));function oa(n,e){var t=e.data,r=n.data;if(!(o(t.staticStyle)&&o(t.style)&&o(r.staticStyle)&&o(r.style))){var a,s,c=e.elm,l=r.staticStyle,p=r.normalizedStyle||r.style||{},d=l||p,u=Qr(e.data.style)||{};e.data.normalizedStyle=i(u.__ob__)?S({},u):u;var m=function(n,e){var t,r={};if(e)for(var a=n;a.componentInstance;)(a=a.componentInstance._vnode)&&a.data&&(t=Yr(a.data))&&S(r,t);(t=Yr(n.data))&&S(r,t);for(var o=n;o=o.parent;)o.data&&(t=Yr(o.data))&&S(r,t);return r}(e,!0);for(s in d)o(m[s])&&ta(c,s,"");for(s in m)(a=m[s])!==d[s]&&ta(c,s,null==a?"":a)}}var ia={create:oa,update:oa},sa=/\s+/;function ca(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(sa).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function la(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(sa).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function pa(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&S(e,da(n.name||"v")),S(e,n),e}return"string"==typeof n?da(n):void 0}}var da=x((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),ua=Z&&!Y,ma="transition",ha="transitionend",ga="animation",fa="animationend";ua&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(ma="WebkitTransition",ha="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ga="WebkitAnimation",fa="webkitAnimationEnd"));var va=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function ba(n){va((function(){va(n)}))}function ka(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),ca(n,e))}function ya(n,e){n._transitionClasses&&y(n._transitionClasses,e),la(n,e)}function Ea(n,e,t){var r=xa(n,e),a=r.type,o=r.timeout,i=r.propCount;if(!a)return t();var s="transition"===a?ha:fa,c=0,l=function(){n.removeEventListener(s,p),t()},p=function(e){e.target===n&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),o+1),n.addEventListener(s,p)}var _a=/\b(transform|all)(,|$)/;function xa(n,e){var t,r=window.getComputedStyle(n),a=(r[ma+"Delay"]||"").split(", "),o=(r[ma+"Duration"]||"").split(", "),i=wa(a,o),s=(r[ga+"Delay"]||"").split(", "),c=(r[ga+"Duration"]||"").split(", "),l=wa(s,c),p=0,d=0;return"transition"===e?i>0&&(t="transition",p=i,d=o.length):"animation"===e?l>0&&(t="animation",p=l,d=c.length):d=(t=(p=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?o.length:c.length:0,{type:t,timeout:p,propCount:d,hasTransform:"transition"===t&&_a.test(r[ma+"Property"])}}function wa(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Aa(e)+Aa(n[t])})))}function Aa(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function Ca(n,e){var t=n.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=pa(n.data.transition);if(!o(r)&&!i(t._enterCb)&&1===t.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,d=r.enterToClass,u=r.enterActiveClass,m=r.appearClass,h=r.appearToClass,g=r.appearActiveClass,f=r.beforeEnter,b=r.enter,k=r.afterEnter,y=r.enterCancelled,E=r.beforeAppear,_=r.appear,x=r.afterAppear,w=r.appearCancelled,A=r.duration,C=We,B=We.$vnode;B&&B.parent;)C=B.context,B=B.parent;var T=!C._isMounted||!n.isRootInsert;if(!T||_||""===_){var P=T&&m?m:c,I=T&&g?g:u,S=T&&h?h:d,z=T&&E||f,D=T&&l(_)?_:b,O=T&&x||k,j=T&&w||y,q=v(p(A)?A.enter:A);0;var $=!1!==a&&!Y,F=Pa(D),U=t._enterCb=M((function(){$&&(ya(t,S),ya(t,I)),U.cancelled?($&&ya(t,P),j&&j(t)):O&&O(t),t._enterCb=null}));n.data.show||Vn(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),D&&D(t,U)})),z&&z(t),$&&(ka(t,P),ka(t,I),ba((function(){ya(t,P),U.cancelled||(ka(t,S),F||(Ta(q)?setTimeout(U,q):Ea(t,s,U)))}))),n.data.show&&(e&&e(),D&&D(t,U)),$||F||U()}}}function Ba(n,e){var t=n.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=pa(n.data.transition);if(o(r)||1!==t.nodeType)return e();if(!i(t._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,d=r.leaveActiveClass,u=r.beforeLeave,m=r.leave,h=r.afterLeave,g=r.leaveCancelled,f=r.delayLeave,b=r.duration,k=!1!==a&&!Y,y=Pa(m),E=v(p(b)?b.leave:b);0;var _=t._leaveCb=M((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),k&&(ya(t,l),ya(t,d)),_.cancelled?(k&&ya(t,c),g&&g(t)):(e(),h&&h(t)),t._leaveCb=null}));f?f(x):x()}function x(){_.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),k&&(ka(t,c),ka(t,d),ba((function(){ya(t,c),_.cancelled||(ka(t,l),y||(Ta(E)?setTimeout(_,E):Ea(t,s,_)))}))),m&&m(t,_),k||y||_())}}function Ta(n){return"number"==typeof n&&!isNaN(n)}function Pa(n){if(o(n))return!1;var e=n.fns;return i(e)?Pa(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function Ia(n,e){!0!==e.data.show&&Ca(e)}var Sa=function(n){var e,t,r={},l=n.modules,p=n.nodeOps;for(e=0;e<xr.length;++e)for(r[xr[e]]=[],t=0;t<l.length;++t)i(l[t][xr[e]])&&r[xr[e]].push(l[t][xr[e]]);function d(n){var e=p.parentNode(n);i(e)&&p.removeChild(e,n)}function u(n,e,t,a,o,c,l){if(i(n.elm)&&i(c)&&(n=c[l]=fn(n)),n.isRootInsert=!o,!function(n,e,t,a){var o=n.data;if(i(o)){var c=i(n.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(n,!1),i(n.componentInstance))return m(n,e),h(t,n.elm,a),s(c)&&function(n,e,t,a){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(o=s.data)&&i(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](_r,s);e.push(s);break}h(t,n.elm,a)}(n,e,t,a),!0}}(n,e,t,a)){var d=n.data,u=n.children,f=n.tag;i(f)?(n.elm=n.ns?p.createElementNS(n.ns,f):p.createElement(f,n),k(n),g(n,u,e),i(d)&&v(n,e),h(t,n.elm,a)):s(n.isComment)?(n.elm=p.createComment(n.text),h(t,n.elm,a)):(n.elm=p.createTextNode(n.text),h(t,n.elm,a))}}function m(n,e){i(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,f(n)?(v(n,e),k(n)):(yr(n),e.push(n))}function h(n,e,t){i(n)&&(i(t)?p.parentNode(t)===n&&p.insertBefore(n,e,t):p.appendChild(n,e))}function g(n,e,t){if(a(e)){0;for(var r=0;r<e.length;++r)u(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&p.appendChild(n.elm,p.createTextNode(String(n.text)))}function f(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return i(n.tag)}function v(n,t){for(var a=0;a<r.create.length;++a)r.create[a](_r,n);i(e=n.data.hook)&&(i(e.create)&&e.create(_r,n),i(e.insert)&&t.push(n))}function k(n){var e;if(i(e=n.fnScopeId))p.setStyleScope(n.elm,e);else for(var t=n;t;)i(e=t.context)&&i(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e),t=t.parent;i(e=We)&&e!==n.context&&e!==n.fnContext&&i(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e)}function y(n,e,t,r,a,o){for(;r<=a;++r)u(t[r],o,n,e,!1,t,r)}function E(n){var e,t,a=n.data;if(i(a))for(i(e=a.hook)&&i(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(i(e=n.children))for(t=0;t<n.children.length;++t)E(n.children[t])}function _(n,e,t){for(;e<=t;++e){var r=n[e];i(r)&&(i(r.tag)?(x(r),E(r)):d(r.elm))}}function x(n,e){if(i(e)||i(n.data)){var t,a=r.remove.length+1;for(i(e)?e.listeners+=a:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,a),i(t=n.componentInstance)&&i(t=t._vnode)&&i(t.data)&&x(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);i(t=n.data.hook)&&i(t=t.remove)?t(n,e):e()}else d(n.elm)}function w(n,e,t,r){for(var a=t;a<r;a++){var o=e[a];if(i(o)&&wr(n,o))return a}}function A(n,e,t,a,c,l){if(n!==e){i(e.elm)&&i(a)&&(e=a[c]=fn(e));var d=e.elm=n.elm;if(s(n.isAsyncPlaceholder))i(e.asyncFactory.resolved)?T(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var m,h=e.data;i(h)&&i(m=h.hook)&&i(m=m.prepatch)&&m(n,e);var g=n.children,v=e.children;if(i(h)&&f(e)){for(m=0;m<r.update.length;++m)r.update[m](n,e);i(m=h.hook)&&i(m=m.update)&&m(n,e)}o(e.text)?i(g)&&i(v)?g!==v&&function(n,e,t,r,a){var s,c,l,d=0,m=0,h=e.length-1,g=e[0],f=e[h],v=t.length-1,b=t[0],k=t[v],E=!a;for(0;d<=h&&m<=v;)o(g)?g=e[++d]:o(f)?f=e[--h]:wr(g,b)?(A(g,b,r,t,m),g=e[++d],b=t[++m]):wr(f,k)?(A(f,k,r,t,v),f=e[--h],k=t[--v]):wr(g,k)?(A(g,k,r,t,v),E&&p.insertBefore(n,g.elm,p.nextSibling(f.elm)),g=e[++d],k=t[--v]):wr(f,b)?(A(f,b,r,t,m),E&&p.insertBefore(n,f.elm,g.elm),f=e[--h],b=t[++m]):(o(s)&&(s=Ar(e,d,h)),o(c=i(b.key)?s[b.key]:w(b,e,d,h))?u(b,r,n,g.elm,!1,t,m):wr(l=e[c],b)?(A(l,b,r,t,m),e[c]=void 0,E&&p.insertBefore(n,l.elm,g.elm)):u(b,r,n,g.elm,!1,t,m),b=t[++m]);d>h?y(n,o(t[v+1])?null:t[v+1].elm,t,m,v,r):m>v&&_(e,d,h)}(d,g,v,t,l):i(v)?(i(n.text)&&p.setTextContent(d,""),y(d,null,v,0,v.length-1,t)):i(g)?_(g,0,g.length-1):i(n.text)&&p.setTextContent(d,""):n.text!==e.text&&p.setTextContent(d,e.text),i(h)&&i(m=h.hook)&&i(m=m.postpatch)&&m(n,e)}}}function C(n,e,t){if(s(t)&&i(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var B=b("attrs,class,staticClass,staticStyle,key");function T(n,e,t,r){var a,o=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(a=c.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return m(e,t),!0;if(i(o)){if(i(l))if(n.hasChildNodes())if(i(a=c)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==n.innerHTML)return!1}else{for(var p=!0,d=n.firstChild,u=0;u<l.length;u++){if(!d||!T(d,l[u],t,r)){p=!1;break}d=d.nextSibling}if(!p||d)return!1}else g(e,l,t);if(i(c)){var h=!1;for(var f in c)if(!B(f)){h=!0,v(e,t);break}!h&&c.class&&Re(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,a){if(!o(e)){var c,l=!1,d=[];if(o(n))l=!0,u(e,d);else{var m=i(n.nodeType);if(!m&&wr(n,e))A(n,e,d,null,null,a);else{if(m){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&T(n,e,d))return C(e,d,!0),n;c=n,n=new mn(p.tagName(c).toLowerCase(),{},[],void 0,c)}var h=n.elm,g=p.parentNode(h);if(u(e,d,h._leaveCb?null:g,p.nextSibling(h)),i(e.parent))for(var v=e.parent,b=f(e);v;){for(var k=0;k<r.destroy.length;++k)r.destroy[k](v);if(v.elm=e.elm,b){for(var y=0;y<r.create.length;++y)r.create[y](_r,v);var x=v.data.hook.insert;if(x.merged)for(var w=1;w<x.fns.length;w++)x.fns[w]()}else yr(v);v=v.parent}i(g)?_([n],0,0):i(n.tag)&&E(n)}}return C(e,d,l),e.elm}i(n)&&E(n)}}({nodeOps:br,modules:[qr,Fr,Vr,Wr,ia,Z?{create:Ia,activate:Ia,remove:function(n,e){!0!==n.data.show?Ba(n,e):e()}}:{}].concat(zr)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&Fa(n,"input")}));var za={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?Vn(t,"postpatch",(function(){za.componentUpdated(n,e,t)})):Da(n,e,t.context),n._vOptions=[].map.call(n.options,qa)):("textarea"===t.tag||vr(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",$a),n.addEventListener("compositionend",Ma),n.addEventListener("change",Ma),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){Da(n,e,t.context);var r=n._vOptions,a=n._vOptions=[].map.call(n.options,qa);if(a.some((function(n,e){return!q(n,r[e])})))(n.multiple?e.value.some((function(n){return ja(n,a)})):e.value!==e.oldValue&&ja(e.value,a))&&Fa(n,"change")}}};function Da(n,e,t){Oa(n,e,t),(X||Q)&&setTimeout((function(){Oa(n,e,t)}),0)}function Oa(n,e,t){var r=e.value,a=n.multiple;if(!a||Array.isArray(r)){for(var o,i,s=0,c=n.options.length;s<c;s++)if(i=n.options[s],a)o=$(r,qa(i))>-1,i.selected!==o&&(i.selected=o);else if(q(qa(i),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));a||(n.selectedIndex=-1)}}function ja(n,e){return e.every((function(e){return!q(e,n)}))}function qa(n){return"_value"in n?n._value:n.value}function $a(n){n.target.composing=!0}function Ma(n){n.target.composing&&(n.target.composing=!1,Fa(n.target,"input"))}function Fa(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Ua(n){return!n.componentInstance||n.data&&n.data.transition?n:Ua(n.componentInstance._vnode)}var Ra={model:za,show:{bind:function(n,e,t){var r=e.value,a=(t=Ua(t)).data&&t.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&a?(t.data.show=!0,Ca(t,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=Ua(t)).data&&t.data.transition?(t.data.show=!0,r?Ca(t,(function(){n.style.display=n.__vOriginalDisplay})):Ba(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,a){a||(n.style.display=n.__vOriginalDisplay)}}},La={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Na(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Na(xe(e.children)):n}function Ga(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var a=t._parentListeners;for(var r in a)e[A(r)]=a[r];return e}function Ka(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Va=function(n){return n.tag||me(n)},Ha=function(n){return"show"===n.name},Za={name:"transition",props:La,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Va)).length){0;var r=this.mode;0;var a=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return a;var o=Na(a);if(!o)return a;if(this._leaving)return Ka(n,a);var i="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?i+"comment":i+o.tag:c(o.key)?0===String(o.key).indexOf(i)?o.key:i+o.key:o.key;var s=(o.data||(o.data={})).transition=Ga(this),l=this._vnode,p=Na(l);if(o.data.directives&&o.data.directives.some(Ha)&&(o.data.show=!0),p&&p.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(o,p)&&!me(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var d=p.data.transition=S({},s);if("out-in"===r)return this._leaving=!0,Vn(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ka(n,a);if("in-out"===r){if(me(o))return l;var u,m=function(){u()};Vn(s,"afterEnter",m),Vn(s,"enterCancelled",m),Vn(d,"delayLeave",(function(n){u=n}))}}return a}}},Wa=S({tag:String,moveClass:String},La);function Xa(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Ya(n){n.data.newPos=n.elm.getBoundingClientRect()}function Qa(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,a=e.top-t.top;if(r||a){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(a,"px)"),o.transitionDuration="0s"}}delete Wa.mode;var Ja={Transition:Za,TransitionGroup:{props:Wa,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var a=Xe(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,a(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,a=this.$slots.default||[],o=this.children=[],i=Ga(this),s=0;s<a.length;s++){if((p=a[s]).tag)if(null!=p.key&&0!==String(p.key).indexOf("__vlist"))o.push(p),t[p.key]=p,(p.data||(p.data={})).transition=i;else;}if(r){var c=[],l=[];for(s=0;s<r.length;s++){var p;(p=r[s]).data.transition=i,p.data.pos=p.elm.getBoundingClientRect(),t[p.key]?c.push(p):l.push(p)}this.kept=n(e,null,c),this.removed=l}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Xa),n.forEach(Ya),n.forEach(Qa),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;ka(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(ha,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(ha,n),t._moveCb=null,ya(t,e))})}})))},methods:{hasMove:function(n,e){if(!ua)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){la(t,n)})),ca(t,e),t.style.display="none",this.$el.appendChild(t);var r=xa(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};function no(n,e){for(var t in e)n[t]=e[t];return n}Kt.config.mustUseProp=function(n,e,t){return"value"===t&&nr(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Kt.config.isReservedTag=gr,Kt.config.isReservedAttr=Jt,Kt.config.getTagNamespace=function(n){return hr(n)?"svg":"math"===n?"math":void 0},Kt.config.isUnknownElement=function(n){if(!Z)return!0;if(gr(n))return!1;if(n=n.toLowerCase(),null!=fr[n])return fr[n];var e=document.createElement(n);return n.indexOf("-")>-1?fr[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:fr[n]=/HTMLUnknownElement/.test(e.toString())},S(Kt.options.directives,Ra),S(Kt.options.components,Ja),Kt.prototype.__patch__=Z?Sa:D,Kt.prototype.$mount=function(n,e){return function(n,e,t){var r;n.$el=e,n.$options.render||(n.$options.render=hn),Je(n,"beforeMount"),r=function(){n._update(n._render(),t)},new Ge(n,r,D,{before:function(){n._isMounted&&!n._isDestroyed&&Je(n,"beforeUpdate")}},!0),t=!1;var a=n._preWatchers;if(a)for(var o=0;o<a.length;o++)a[o].run();return null==n.$vnode&&(n._isMounted=!0,Je(n,"mounted")),n}(this,n=n&&Z?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},Z&&setTimeout((function(){L.devtools&&sn&&sn.emit("init",Kt)}),0);var eo=/[!'()*]/g,to=function(n){return"%"+n.charCodeAt(0).toString(16)},ro=/%2C/g,ao=function(n){return encodeURIComponent(n).replace(eo,to).replace(ro,",")};function oo(n){try{return decodeURIComponent(n)}catch(n){0}return n}var io=function(n){return null==n||"object"==typeof n?n:String(n)};function so(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=oo(t.shift()),a=t.length>0?oo(t.join("=")):null;void 0===e[r]?e[r]=a:Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]})),e):e}function co(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return ao(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(ao(e)):r.push(ao(e)+"="+ao(n)))})),r.join("&")}return ao(e)+"="+ao(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var lo=/\/?$/;function po(n,e,t,r){var a=r&&r.options.stringifyQuery,o=e.query||{};try{o=uo(o)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:go(e,a),matched:n?ho(n):[]};return t&&(i.redirectedFrom=go(t,a)),Object.freeze(i)}function uo(n){if(Array.isArray(n))return n.map(uo);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=uo(n[t]);return e}return n}var mo=po(null,{path:"/"});function ho(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function go(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var a=n.hash;return void 0===a&&(a=""),(t||"/")+(e||co)(r)+a}function fo(n,e,t){return e===mo?n===e:!!e&&(n.path&&e.path?n.path.replace(lo,"")===e.path.replace(lo,"")&&(t||n.hash===e.hash&&vo(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&vo(n.query,e.query)&&vo(n.params,e.params))))}function vo(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,a){var o=n[t];if(r[a]!==t)return!1;var i=e[t];return null==o||null==i?o===i:"object"==typeof o&&"object"==typeof i?vo(o,i):String(o)===String(i)}))}function bo(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var a=t.instances[r],o=t.enteredCbs[r];if(a&&o){delete t.enteredCbs[r];for(var i=0;i<o.length;i++)a._isBeingDestroyed||o[i](a)}}}}var ko={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,a=e.parent,o=e.data;o.routerView=!0;for(var i=a.$createElement,s=t.name,c=a.$route,l=a._routerViewCache||(a._routerViewCache={}),p=0,d=!1;a&&a._routerRoot!==a;){var u=a.$vnode?a.$vnode.data:{};u.routerView&&p++,u.keepAlive&&a._directInactive&&a._inactive&&(d=!0),a=a.$parent}if(o.routerViewDepth=p,d){var m=l[s],h=m&&m.component;return h?(m.configProps&&yo(h,o,m.route,m.configProps),i(h,o,r)):i()}var g=c.matched[p],f=g&&g.components[s];if(!g||!f)return l[s]=null,i();l[s]={component:f},o.registerRouteInstance=function(n,e){var t=g.instances[s];(e&&t!==n||!e&&t===n)&&(g.instances[s]=e)},(o.hook||(o.hook={})).prepatch=function(n,e){g.instances[s]=e.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==g.instances[s]&&(g.instances[s]=n.componentInstance),bo(c)};var v=g.props&&g.props[s];return v&&(no(l[s],{route:c,configProps:v}),yo(f,o,c,v)),i(f,o,r)}};function yo(n,e,t,r){var a=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(a){a=e.props=no({},a);var o=e.attrs=e.attrs||{};for(var i in a)n.props&&i in n.props||(o[i]=a[i],delete a[i])}}function Eo(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var a=e.split("/");t&&a[a.length-1]||a.pop();for(var o=n.replace(/^\//,"").split("/"),i=0;i<o.length;i++){var s=o[i];".."===s?a.pop():"."!==s&&a.push(s)}return""!==a[0]&&a.unshift(""),a.join("/")}function _o(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var xo=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},wo=Mo,Ao=Io,Co=function(n,e){return zo(Io(n,e),e)},Bo=zo,To=$o,Po=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Io(n,e){for(var t,r=[],a=0,o=0,i="",s=e&&e.delimiter||"/";null!=(t=Po.exec(n));){var c=t[0],l=t[1],p=t.index;if(i+=n.slice(o,p),o=p+c.length,l)i+=l[1];else{var d=n[o],u=t[2],m=t[3],h=t[4],g=t[5],f=t[6],v=t[7];i&&(r.push(i),i="");var b=null!=u&&null!=d&&d!==u,k="+"===f||"*"===f,y="?"===f||"*"===f,E=t[2]||s,_=h||g;r.push({name:m||a++,prefix:u||"",delimiter:E,optional:y,repeat:k,partial:b,asterisk:!!v,pattern:_?Oo(_):v?".*":"[^"+Do(E)+"]+?"})}}return o<n.length&&(i+=n.substr(o)),i&&r.push(i),r}function So(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function zo(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",qo(e)));return function(e,r){for(var a="",o=e||{},i=(r||{}).pretty?So:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,p=o[c.name];if(null==p){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(xo(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(l=i(p[d]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");a+=(0===d?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(p),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function Do(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Oo(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function jo(n,e){return n.keys=e,n}function qo(n){return n&&n.sensitive?"":"i"}function $o(n,e,t){xo(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,a=!1!==t.end,o="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)o+=Do(s);else{var c=Do(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var p=Do(t.delimiter||"/"),d=o.slice(-p.length)===p;return r||(o=(d?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&d?"":"(?="+p+"|$)",jo(new RegExp("^"+o,qo(t)),e)}function Mo(n,e,t){return xo(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return jo(n,e)}(n,e):xo(n)?function(n,e,t){for(var r=[],a=0;a<n.length;a++)r.push(Mo(n[a],e,t).source);return jo(new RegExp("(?:"+r.join("|")+")",qo(t)),e)}(n,e,t):function(n,e,t){return $o(Io(n,t),e,t)}(n,e,t)}wo.parse=Ao,wo.compile=Co,wo.tokensToFunction=Bo,wo.tokensToRegExp=To;var Fo=Object.create(null);function Uo(n,e,t){e=e||{};try{var r=Fo[n]||(Fo[n]=wo.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Ro(n,e,t,r){var a="string"==typeof n?{path:n}:n;if(a._normalized)return a;if(a.name){var o=(a=no({},n)).params;return o&&"object"==typeof o&&(a.params=no({},o)),a}if(!a.path&&a.params&&e){(a=no({},a))._normalized=!0;var i=no(no({},e.params),a.params);if(e.name)a.name=e.name,a.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;a.path=Uo(s,i,e.path)}else 0;return a}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var a=n.indexOf("?");return a>=0&&(t=n.slice(a+1),n=n.slice(0,a)),{path:n,query:t,hash:e}}(a.path||""),l=e&&e.path||"/",p=c.path?Eo(c.path,l,t||a.append):l,d=function(n,e,t){void 0===e&&(e={});var r,a=t||so;try{r=a(n||"")}catch(n){r={}}for(var o in e){var i=e[o];r[o]=Array.isArray(i)?i.map(io):io(i)}return r}(c.query,a.query,r&&r.options.parseQuery),u=a.hash||c.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:p,query:d,hash:u}}var Lo,No=function(){},Go={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,a=t.resolve(this.to,r,this.append),o=a.location,i=a.route,s=a.href,c={},l=t.options.linkActiveClass,p=t.options.linkExactActiveClass,d=null==l?"router-link-active":l,u=null==p?"router-link-exact-active":p,m=null==this.activeClass?d:this.activeClass,h=null==this.exactActiveClass?u:this.exactActiveClass,g=i.redirectedFrom?po(null,Ro(i.redirectedFrom),null,t):i;c[h]=fo(r,g,this.exactPath),c[m]=this.exact||this.exactPath?c[h]:function(n,e){return 0===n.path.replace(lo,"/").indexOf(e.path.replace(lo,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,g);var f=c[h]?this.ariaCurrentValue:null,v=function(n){Ko(n)&&(e.replace?t.replace(o,No):t.push(o,No))},b={click:Ko};Array.isArray(this.event)?this.event.forEach((function(n){b[n]=v})):b[this.event]=v;var k={class:c},y=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:v,isActive:c[m],isExactActive:c[h]});if(y){if(1===y.length)return y[0];if(y.length>1||!y.length)return 0===y.length?n():n("span",{},y)}if("a"===this.tag)k.on=b,k.attrs={href:s,"aria-current":f};else{var E=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(E){E.isStatic=!1;var _=E.data=no({},E.data);for(var x in _.on=_.on||{},_.on){var w=_.on[x];x in b&&(_.on[x]=Array.isArray(w)?w:[w])}for(var A in b)A in _.on?_.on[A].push(b[A]):_.on[A]=v;var C=E.data.attrs=no({},E.data.attrs);C.href=s,C["aria-current"]=f}else k.on=b}return n(this.tag,k,this.$slots.default)}};function Ko(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Vo="undefined"!=typeof window;function Ho(n,e,t,r,a){var o=e||[],i=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,a,o,i){var s=a.path,c=a.name;0;var l=a.pathToRegexpOptions||{},p=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return _o(e.path+"/"+n)}(s,o,l.strict);"boolean"==typeof a.caseSensitive&&(l.sensitive=a.caseSensitive);var d={path:p,regex:Zo(p,l),components:a.components||{default:a.component},alias:a.alias?"string"==typeof a.alias?[a.alias]:a.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:i,redirect:a.redirect,beforeEnter:a.beforeEnter,meta:a.meta||{},props:null==a.props?{}:a.components?a.props:{default:a.props}};a.children&&a.children.forEach((function(a){var o=i?_o(i+"/"+a.path):void 0;n(e,t,r,a,d,o)}));t[d.path]||(e.push(d.path),t[d.path]=d);if(void 0!==a.alias)for(var u=Array.isArray(a.alias)?a.alias:[a.alias],m=0;m<u.length;++m){0;var h={path:u[m],children:a.children};n(e,t,r,h,o,d.path||"/")}c&&(r[c]||(r[c]=d))}(o,i,s,n,a)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:i,nameMap:s}}function Zo(n,e){return wo(n,[],e)}function Wo(n,e){var t=Ho(n),r=t.pathList,a=t.pathMap,o=t.nameMap;function i(n,t,i){var s=Ro(n,t,!1,e),l=s.name;if(l){var p=o[l];if(!p)return c(null,s);var d=p.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var u in t.params)!(u in s.params)&&d.indexOf(u)>-1&&(s.params[u]=t.params[u]);return s.path=Uo(p.path,s.params),c(p,s,i)}if(s.path){s.params={};for(var m=0;m<r.length;m++){var h=r[m],g=a[h];if(Xo(g.regex,s.path,s.params))return c(g,s,i)}}return c(null,s)}function s(n,t){var r=n.redirect,a="function"==typeof r?r(po(n,t,null,e)):r;if("string"==typeof a&&(a={path:a}),!a||"object"!=typeof a)return c(null,t);var s=a,l=s.name,p=s.path,d=t.query,u=t.hash,m=t.params;if(d=s.hasOwnProperty("query")?s.query:d,u=s.hasOwnProperty("hash")?s.hash:u,m=s.hasOwnProperty("params")?s.params:m,l){o[l];return i({_normalized:!0,name:l,query:d,hash:u,params:m},void 0,t)}if(p){var h=function(n,e){return Eo(n,e.parent?e.parent.path:"/",!0)}(p,n);return i({_normalized:!0,path:Uo(h,m),query:d,hash:u},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=i({_normalized:!0,path:Uo(t,e.params)});if(r){var a=r.matched,o=a[a.length-1];return e.params=r.params,c(o,e)}return c(null,e)}(0,t,n.matchAs):po(n,t,r,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?o[n]:void 0;Ho([e||n],r,a,o,t),t&&t.alias.length&&Ho(t.alias.map((function(n){return{path:n,children:[e]}})),r,a,o,t)},getRoutes:function(){return r.map((function(n){return a[n]}))},addRoutes:function(n){Ho(n,r,a,o)}}}function Xo(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var a=1,o=r.length;a<o;++a){var i=n.keys[a-1];i&&(t[i.name||"pathMatch"]="string"==typeof r[a]?oo(r[a]):r[a])}return!0}var Yo=Vo&&window.performance&&window.performance.now?window.performance:Date;function Qo(){return Yo.now().toFixed(3)}var Jo=Qo();function ni(){return Jo}function ei(n){return Jo=n}var ti=Object.create(null);function ri(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=no({},window.history.state);return t.key=ni(),window.history.replaceState(t,"",e),window.addEventListener("popstate",ii),function(){window.removeEventListener("popstate",ii)}}function ai(n,e,t,r){if(n.app){var a=n.options.scrollBehavior;a&&n.app.$nextTick((function(){var o=function(){var n=ni();if(n)return ti[n]}(),i=a.call(n,e,t,r?o:null);i&&("function"==typeof i.then?i.then((function(n){di(n,o)})).catch((function(n){0})):di(i,o))}))}}function oi(){var n=ni();n&&(ti[n]={x:window.pageXOffset,y:window.pageYOffset})}function ii(n){oi(),n.state&&n.state.key&&ei(n.state.key)}function si(n){return li(n.x)||li(n.y)}function ci(n){return{x:li(n.x)?n.x:window.pageXOffset,y:li(n.y)?n.y:window.pageYOffset}}function li(n){return"number"==typeof n}var pi=/^#\d/;function di(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var a=pi.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(a){var o=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(a,o={x:li((t=o).x)?t.x:0,y:li(t.y)?t.y:0})}else si(n)&&(e=ci(n))}else r&&si(n)&&(e=ci(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var ui,mi=Vo&&((-1===(ui=window.navigator.userAgent).indexOf("Android 2.")&&-1===ui.indexOf("Android 4.0")||-1===ui.indexOf("Mobile Safari")||-1!==ui.indexOf("Chrome")||-1!==ui.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function hi(n,e){oi();var t=window.history;try{if(e){var r=no({},t.state);r.key=ni(),t.replaceState(r,"",n)}else t.pushState({key:ei(Qo())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function gi(n){hi(n,!0)}function fi(n,e,t){var r=function(a){a>=n.length?t():n[a]?e(n[a],(function(){r(a+1)})):r(a+1)};r(0)}var vi={redirected:2,aborted:4,cancelled:8,duplicated:16};function bi(n,e){return yi(n,e,vi.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return Ei.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function ki(n,e){return yi(n,e,vi.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function yi(n,e,t,r){var a=new Error(r);return a._isRouter=!0,a.from=n,a.to=e,a.type=t,a}var Ei=["params","query","hash"];function _i(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function xi(n,e){return _i(n)&&n._isRouter&&(null==e||n.type===e)}function wi(n){return function(e,t,r){var a=!1,o=0,i=null;Ai(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){a=!0,o++;var c,l=Ti((function(e){var a;((a=e).__esModule||Bi&&"Module"===a[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Lo.extend(e),t.components[s]=e,--o<=0&&r()})),p=Ti((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=_i(n)?n:new Error(e),r(i))}));try{c=n(l,p)}catch(n){p(n)}if(c)if("function"==typeof c.then)c.then(l,p);else{var d=c.component;d&&"function"==typeof d.then&&d.then(l,p)}}})),a||r()}}function Ai(n,e){return Ci(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function Ci(n){return Array.prototype.concat.apply([],n)}var Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Ti(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var Pi=function(n,e){this.router=n,this.base=function(n){if(!n)if(Vo){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=mo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Ii(n,e,t,r){var a=Ai(n,(function(n,r,a,o){var i=function(n,e){"function"!=typeof n&&(n=Lo.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,r,a,o)})):t(i,r,a,o)}));return Ci(r?a.reverse():a)}function Si(n,e){if(e)return function(){return n.apply(e,arguments)}}Pi.prototype.listen=function(n){this.cb=n},Pi.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},Pi.prototype.onError=function(n){this.errorCbs.push(n)},Pi.prototype.transitionTo=function(n,e,t){var r,a=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var o=this.current;this.confirmTransition(r,(function(){a.updateRoute(r),e&&e(r),a.ensureURL(),a.router.afterHooks.forEach((function(n){n&&n(r,o)})),a.ready||(a.ready=!0,a.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!a.ready&&(xi(n,vi.redirected)&&o===mo||(a.ready=!0,a.readyErrorCbs.forEach((function(e){e(n)}))))}))},Pi.prototype.confirmTransition=function(n,e,t){var r=this,a=this.current;this.pending=n;var o,i,s=function(n){!xi(n)&&_i(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=a.matched.length-1;if(fo(n,a)&&c===l&&n.matched[c]===a.matched[l])return this.ensureURL(),n.hash&&ai(this.router,a,n,!1),s(((i=yi(o=a,n,vi.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",i));var p=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),d=p.updated,u=p.deactivated,m=p.activated,h=[].concat(function(n){return Ii(n,"beforeRouteLeave",Si,!0)}(u),this.router.beforeHooks,function(n){return Ii(n,"beforeRouteUpdate",Si)}(d),m.map((function(n){return n.beforeEnter})),wi(m)),g=function(e,t){if(r.pending!==n)return s(ki(a,n));try{e(n,a,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return yi(n,e,vi.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(a,n))):_i(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(bi(a,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};fi(h,g,(function(){fi(function(n){return Ii(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,a,o){return n(r,a,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),o(n)}))}}(n,t,r)}))}(m).concat(r.router.resolveHooks),g,(function(){if(r.pending!==n)return s(ki(a,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){bo(n)}))}))}))},Pi.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},Pi.prototype.setupListeners=function(){},Pi.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=mo,this.pending=null};var zi=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Di(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=mi&&t;r&&this.listeners.push(ri());var a=function(){var t=n.current,a=Di(n.base);n.current===mo&&a===n._startLocation||n.transitionTo(a,(function(n){r&&ai(e,n,t,!0)}))};window.addEventListener("popstate",a),this.listeners.push((function(){window.removeEventListener("popstate",a)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){hi(_o(r.base+n.fullPath)),ai(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){gi(_o(r.base+n.fullPath)),ai(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Di(this.base)!==this.current.fullPath){var e=_o(this.base+this.current.fullPath);n?hi(e):gi(e)}},e.prototype.getCurrentLocation=function(){return Di(this.base)},e}(Pi);function Di(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(_o(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var Oi=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=Di(n);if(!/^\/#/.test(e))return window.location.replace(_o(n+"/#"+e)),!0}(this.base)||ji()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=mi&&e;t&&this.listeners.push(ri());var r=function(){var e=n.current;ji()&&n.transitionTo(qi(),(function(r){t&&ai(n.router,r,e,!0),mi||Fi(r.fullPath)}))},a=mi?"popstate":"hashchange";window.addEventListener(a,r),this.listeners.push((function(){window.removeEventListener(a,r)}))}},e.prototype.push=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Mi(n.fullPath),ai(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,a=this.current;this.transitionTo(n,(function(n){Fi(n.fullPath),ai(r.router,n,a,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;qi()!==e&&(n?Mi(e):Fi(e))},e.prototype.getCurrentLocation=function(){return qi()},e}(Pi);function ji(){var n=qi();return"/"===n.charAt(0)||(Fi("/"+n),!1)}function qi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function $i(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function Mi(n){mi?hi($i(n)):window.location.hash=n}function Fi(n){mi?gi($i(n)):window.location.replace($i(n))}var Ui=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){xi(n,vi.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Pi),Ri=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Wo(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!mi&&!1!==n.fallback,this.fallback&&(e="hash"),Vo||(e="abstract"),this.mode=e,e){case"history":this.history=new zi(this,n.base);break;case"hash":this.history=new Oi(this,n.base,this.fallback);break;case"abstract":this.history=new Ui(this,n.base);break;default:0}},Li={currentRoute:{configurable:!0}};function Ni(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}Ri.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Li.currentRoute.get=function(){return this.history&&this.history.current},Ri.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof zi||t instanceof Oi){var r=function(n){t.setupListeners(),function(n){var r=t.current,a=e.options.scrollBehavior;mi&&a&&"fullPath"in n&&ai(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},Ri.prototype.beforeEach=function(n){return Ni(this.beforeHooks,n)},Ri.prototype.beforeResolve=function(n){return Ni(this.resolveHooks,n)},Ri.prototype.afterEach=function(n){return Ni(this.afterHooks,n)},Ri.prototype.onReady=function(n,e){this.history.onReady(n,e)},Ri.prototype.onError=function(n){this.history.onError(n)},Ri.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},Ri.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},Ri.prototype.go=function(n){this.history.go(n)},Ri.prototype.back=function(){this.go(-1)},Ri.prototype.forward=function(){this.go(1)},Ri.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},Ri.prototype.resolve=function(n,e,t){var r=Ro(n,e=e||this.history.current,t,this),a=this.match(r,e),o=a.redirectedFrom||a.fullPath;return{location:r,route:a,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?_o(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:a}},Ri.prototype.getRoutes=function(){return this.matcher.getRoutes()},Ri.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==mo&&this.history.transitionTo(this.history.getCurrentLocation())},Ri.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==mo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ri.prototype,Li),Ri.install=function n(e){if(!n.installed||Lo!==e){n.installed=!0,Lo=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",ko),e.component("RouterLink",Go);var a=e.config.optionMergeStrategies;a.beforeRouteEnter=a.beforeRouteLeave=a.beforeRouteUpdate=a.created}},Ri.version="3.5.4",Ri.isNavigationFailure=xi,Ri.NavigationFailureType=vi,Ri.START_LOCATION=mo,Vo&&window.Vue&&window.Vue.use(Ri);var Gi=Ri;t(103);t(126);var Ki={NotFound:()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,331)),Layout:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,330))},Vi={"v-6ee71fe0":()=>t.e(6).then(t.bind(null,333)),"v-06a3e7f2":()=>t.e(8).then(t.bind(null,334)),"v-fc698e82":()=>t.e(7).then(t.bind(null,335)),"v-3b2b3709":()=>t.e(10).then(t.bind(null,336)),"v-3a9d6f9d":()=>t.e(9).then(t.bind(null,337)),"v-561954fe":()=>t.e(11).then(t.bind(null,332)),"v-169b12eb":()=>t.e(12).then(t.bind(null,338)),"v-be755618":()=>t.e(15).then(t.bind(null,339)),"v-132121e4":()=>t.e(14).then(t.bind(null,340)),"v-4b9555d9":()=>t.e(13).then(t.bind(null,341)),"v-26c04c03":()=>t.e(16).then(t.bind(null,342)),"v-4d3d3bec":()=>t.e(17).then(t.bind(null,343)),"v-59c6ef63":()=>t.e(18).then(t.bind(null,344)),"v-0b248a60":()=>t.e(19).then(t.bind(null,345)),"v-2f3eb2e7":()=>t.e(20).then(t.bind(null,346)),"v-1247b65b":()=>t.e(21).then(t.bind(null,347)),"v-cbe0d60a":()=>t.e(22).then(t.bind(null,348)),"v-81d98e10":()=>t.e(23).then(t.bind(null,349)),"v-16eeeecc":()=>t.e(24).then(t.bind(null,350)),"v-c5d8330a":()=>t.e(25).then(t.bind(null,351)),"v-211c03e0":()=>t.e(27).then(t.bind(null,352)),"v-6da5591e":()=>t.e(26).then(t.bind(null,353)),"v-019d3da2":()=>t.e(28).then(t.bind(null,354)),"v-3d63ec0a":()=>t.e(30).then(t.bind(null,355)),"v-185c15db":()=>t.e(29).then(t.bind(null,356)),"v-680c343b":()=>t.e(31).then(t.bind(null,357)),"v-9b6819e6":()=>t.e(32).then(t.bind(null,358)),"v-db387184":()=>t.e(33).then(t.bind(null,359)),"v-07c97ac3":()=>t.e(34).then(t.bind(null,360)),"v-335e284a":()=>t.e(35).then(t.bind(null,361)),"v-33c779e9":()=>t.e(3).then(t.bind(null,362)),"v-2e5f8162":()=>t.e(36).then(t.bind(null,363)),"v-3f9afa48":()=>t.e(37).then(t.bind(null,364)),"v-e15ee02a":()=>t.e(38).then(t.bind(null,365)),"v-3a4f35cc":()=>t.e(40).then(t.bind(null,366)),"v-50a8e3a0":()=>t.e(39).then(t.bind(null,367)),"v-77a29116":()=>t.e(41).then(t.bind(null,368)),"v-58d0a1ce":()=>t.e(42).then(t.bind(null,369)),"v-d7e2a582":()=>t.e(43).then(t.bind(null,370)),"v-7ebc8c8b":()=>t.e(44).then(t.bind(null,371)),"v-33dd887e":()=>t.e(45).then(t.bind(null,372)),"v-03d01b37":()=>t.e(46).then(t.bind(null,373)),"v-6e85c154":()=>t.e(48).then(t.bind(null,374)),"v-68efef1e":()=>t.e(47).then(t.bind(null,375)),"v-5b19c60a":()=>t.e(49).then(t.bind(null,376)),"v-e1ca0762":()=>t.e(52).then(t.bind(null,377)),"v-32d723b6":()=>t.e(51).then(t.bind(null,378)),"v-5d2403be":()=>t.e(53).then(t.bind(null,379)),"v-43971d6a":()=>t.e(50).then(t.bind(null,380)),"v-11c4c310":()=>t.e(54).then(t.bind(null,381)),"v-3b906eab":()=>t.e(55).then(t.bind(null,382)),"v-0523fe6a":()=>t.e(56).then(t.bind(null,383)),"v-31339544":()=>t.e(60).then(t.bind(null,384)),"v-7e4b3a46":()=>t.e(61).then(t.bind(null,385)),"v-be31a184":()=>t.e(62).then(t.bind(null,386)),"v-338caad2":()=>t.e(57).then(t.bind(null,387)),"v-572ce303":()=>t.e(63).then(t.bind(null,388)),"v-131bc9a5":()=>t.e(64).then(t.bind(null,389)),"v-582a5ac3":()=>t.e(58).then(t.bind(null,390)),"v-6a155cef":()=>t.e(65).then(t.bind(null,391)),"v-fa04c054":()=>t.e(67).then(t.bind(null,392)),"v-394a82c1":()=>t.e(66).then(t.bind(null,393)),"v-6c7b2800":()=>t.e(68).then(t.bind(null,394)),"v-306f5d23":()=>t.e(59).then(t.bind(null,395)),"v-0169ea0d":()=>t.e(71).then(t.bind(null,396)),"v-51cd8504":()=>t.e(70).then(t.bind(null,397)),"v-783e73dc":()=>t.e(69).then(t.bind(null,398)),"v-5b58f46b":()=>t.e(72).then(t.bind(null,399)),"v-d695f1cc":()=>t.e(74).then(t.bind(null,400)),"v-92ed690a":()=>t.e(73).then(t.bind(null,401)),"v-018b12ce":()=>t.e(75).then(t.bind(null,402)),"v-3f6d3b4e":()=>t.e(76).then(t.bind(null,403)),"v-13d7c644":()=>t.e(77).then(t.bind(null,404)),"v-080925d0":()=>t.e(80).then(t.bind(null,405)),"v-2e18135a":()=>t.e(79).then(t.bind(null,406)),"v-a2c6b924":()=>t.e(81).then(t.bind(null,407)),"v-4a20ad90":()=>t.e(78).then(t.bind(null,408)),"v-51e55098":()=>t.e(83).then(t.bind(null,409)),"v-20df4130":()=>t.e(82).then(t.bind(null,410)),"v-1efcbbda":()=>t.e(84).then(t.bind(null,411)),"v-09ac84c7":()=>t.e(85).then(t.bind(null,412)),"v-7d5d8b2d":()=>t.e(87).then(t.bind(null,413)),"v-4ed9e4ca":()=>t.e(86).then(t.bind(null,414)),"v-6202dee6":()=>t.e(88).then(t.bind(null,415)),"v-18dfbaf2":()=>t.e(89).then(t.bind(null,416)),"v-994f98d2":()=>t.e(90).then(t.bind(null,417)),"v-ea545412":()=>t.e(91).then(t.bind(null,418)),"v-1d3069d2":()=>t.e(92).then(t.bind(null,419)),"v-0c8b6730":()=>t.e(93).then(t.bind(null,420))};function Hi(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Zi=/-(\w)/g,Wi=Hi(n=>n.replace(Zi,(n,e)=>e?e.toUpperCase():"")),Xi=/\B([A-Z])/g,Yi=Hi(n=>n.replace(Xi,"-$1").toLowerCase()),Qi=Hi(n=>n.charAt(0).toUpperCase()+n.slice(1));function Ji(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(Qi(Wi(e))):n(Qi(e))||n(Yi(e))}const ns=Object.assign({},Ki,Vi),es=n=>ns[n],ts=n=>Vi[n],rs=n=>Ki[n],as=n=>Kt.component(n);function os(n){return Ji(ts,n)}function is(n){return Ji(rs,n)}function ss(n){return Ji(es,n)}function cs(n){return Ji(as,n)}function ls(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!cs(n)&&ss(n)){const e=await ss(n)();Kt.component(n,e.default)}}))}function ps(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var ds=t(92),us=t.n(ds),ms=t(93),hs=t.n(ms),gs={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${hs()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=vs(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=bs(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return us()([{name:"description",content:this.$description}],n,this.siteMeta,ks)},updateCanonicalLink(){fs(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",vs(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){bs(null,this.currentMetaTags),fs()}};function fs(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function vs(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function bs(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function ks(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var ys=t(49),Es={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(ys)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+t;for(let n=0;n<e.length;n++){const o=e[n],i=e[n+1],s=0===n&&0===t||t>=o.parentElement.offsetTop+10&&(!i||t<i.parentElement.offsetTop-10),c=decodeURIComponent(this.$route.hash);if(s&&c!==decodeURIComponent(o.hash)){const t=o;if(a===r)for(let t=n+1;t<e.length;t++)if(c===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},_s=t(23),xs=t.n(_s),ws={mounted(){xs.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Kt.component(n.name)||xs.a.start(),t()}),this.$router.afterEach(()=>{xs.a.done(),this.isSidebarOpen=!1})}};t(233),t(234);class As{constructor(){this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}show({text:n="",duration:e=3e3}){let t=document.createElement("div");t.className="message move-in",t.innerHTML=`\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">${n}</div>\n    `,this.containerEl.appendChild(t),e>0&&setTimeout(()=>{this.close(t)},e)}close(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",()=>{n.remove()})}}var Cs={mounted(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy(){setTimeout(()=>{(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach(n=>{document.querySelectorAll(n).forEach(this.generateCopyButton)})},1e3)},generateCopyButton(n){if(n.classList.contains("codecopy-enabled"))return;const e=document.createElement("i");e.className="code-copy",e.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',e.title="Copy to clipboard",e.addEventListener("click",()=>{this.copyToClipboard(n.innerText)}),n.appendChild(e),n.classList.add("codecopy-enabled")},copyToClipboard(n){const e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy");(new As).show({text:"å¤å¶æå ð",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var Bs={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},Ts={},Ps=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},Is=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:Bs[n]},Ss=function n(e,t,r){var a=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))a[n]=t[n];else{var e=n.replace("data","");a.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,o=e.children;a.appendChild(n(t,r,o))})),a},zs=function(n,e,t){var r,a=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==a.length||t?a:a[0]},Ds=function(n,e){var t,r,a=n.match(/<style>([\s\S]+)<\/style>/),o=n.match(/<template>([\s\S]+)<\/template>/),i=n.match(/<script>([\s\S]+)<\/script>/),s={css:a&&a[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=Ps(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),a=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,o=[eval][0](a);return o.template=e,o}(s.js,s.html);var c=Is("vue");return s.jsLib.unshift(c),s},Os=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<html>([\s\S]+)<\/html>/),o=n.match(/<script>([\s\S]+)<\/script>/),i={css:r&&r[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:o&&o[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return i.htmlTpl=i.html,i.jsTpl=i.js,i.script=(t=i.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),i},js=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function qs(){var n=zs(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=zs(n,"vuepress-plugin-demo-block__code"),t=zs(n,"vuepress-plugin-demo-block__display"),r=zs(n,"vuepress-plugin-demo-block__footer"),a=zs(t,"vuepress-plugin-demo-block__app"),o=decodeURIComponent(n.dataset.code),i=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);i=i?JSON.parse(i):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),a=new Function("return ".concat(r))(),o={js:a,css:a.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:js(n),htmlTpl:Ps("")},i=Is("react"),s=Is("reactDOM");return o.jsLib.unshift(i,s),o}(o,i):"vanilla"===s?Os(o,i):Ds(o,i),p=Ss("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(p),p.addEventListener("click",$s.bind(null,p,c,e,r)),Is("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=a.concat(o).concat(Is("cssLib")).concat(Is("jsLib")).join(",");return Ss("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:i}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),Is("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,a=n.jsLib,o=n.cssLib,i=JSON.stringify({css:e,html:t,js:r,js_external:a.concat(Is("jsLib")).join(";"),css_external:o.concat(Is("cssLib")).join(";"),layout:Is("codepenLayout"),js_pre_processor:Is("codepenJsProcessor"),editors:Is("codepenEditors")});return Ss("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:i}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==i.horizontal?i.horizontal:Is("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var d=e.firstChild.cloneNode(!0);d.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(d)}if(l.css&&function(n){if(!Ts[n]){var e=Ss("style",{innerHTML:n});document.body.appendChild(e),Ts[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),a);else if("vue"===s){var u=(new(Vue.extend(l.script))).$mount();a.appendChild(u.$el)}else"vanilla"===s&&(a.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){qs()}),300)}function $s(n,e,t,r){var a="1"!==n.dataset.isExpand;t.style.height=a?"".concat(e,"px"):0,a?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=a?"1":"0"}var Ms={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},qs()},updated:function(){qs()}},Fs="auto",Us="zoom-in",Rs="zoom-out",Ls="grab",Ns="move";function Gs(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a={passive:!1};r?n.addEventListener(e,t,a):n.removeEventListener(e,t,a)}function Ks(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Vs(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Hs(n,e,t){!function(n){var e=Zs,t=Ws;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var a=n.transform;delete n.transform,n[t]=a}}(e);var r=n.style,a={};for(var o in e)t&&(a[o]=r[o]||""),r[o]=e[o];return a}var Zs="transition",Ws="transform",Xs="transform",Ys="transitionend";var Qs=function(){},Js={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Qs,onClose:Qs,onGrab:Qs,onMove:Qs,onRelease:Qs,onBeforeOpen:Qs,onBeforeClose:Qs,onBeforeGrab:Qs,onBeforeRelease:Qs,onImageLoading:Qs,onImageLoaded:Qs},nc={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),tc(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,a=this.lastScrollPosition.y-t,o=this.options.scrollThreshold;(Math.abs(a)>=o||Math.abs(r)>=o)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(ec(n)&&!tc(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){ec(n)&&!tc(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function ec(n){return 0===n.button}function tc(n){return n.metaKey||n.ctrlKey}var rc={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Hs(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Gs(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Hs(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oc=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),ic=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sc={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Vs(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,a=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Ls:Rs,transition:Xs+"\n        "+r+"s\n        "+a,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Hs(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Hs(this.el,{transform:"none"})},grab:function(n,e,t){var r=cc(),a=r.x-n,o=r.y-e;Hs(this.el,{cursor:Ns,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=cc(),a=r.x-n,o=r.y-e;Hs(this.el,{transition:Xs,transform:"translate3d(\n        "+(this.translate.x+a)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Hs(this.el,this.styleClose)},restoreOpenStyle:function(){Hs(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=cc(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,a=r.customSize,o=r.scaleBase;if(!a&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(a&&"object"===(void 0===a?"undefined":ac(a)))return{x:a.width/this.rect.width,y:a.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,c=cc(),l={x:c.x-i,y:c.y-s},p=l.x/i,d=l.y/s,u=o+Math.min(p,d);if(a&&"string"==typeof a){var m=t||this.el.naturalWidth,h=e||this.el.naturalHeight,g=parseFloat(a)*m/(100*this.rect.width),f=parseFloat(a)*h/(100*this.rect.height);if(u>g||u>f)return{x:g,y:f}}return{x:u,y:u}}};function cc(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function lc(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Gs(n,r,e[r],t)}))}var pc=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(sc),this.overlay=Object.create(rc),this.handler=Object.create(nc),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=ic({},Js,e),this.overlay.init(this),this.handler.init(this)}return oc(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Us,Gs(n,"click",this.handler.click),this.options.preloadImage&&Ks(Vs(n)));return this}},{key:"config",value:function(n){return n?(ic(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var a=this.target.srcOriginal;null!=a&&(this.options.onImageLoading(r),Ks(a,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Gs(document,"scroll",this.handler.scroll),Gs(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Gs(window,"resize",this.handler.resizeWindow);var o=function n(){Gs(r,Ys,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&lc(document,e.handler,!0),t(r)};return Gs(r,Ys,o),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=Fs,this.overlay.fadeOut(),this.target.zoomOut(),Gs(document,"scroll",this.handler.scroll,!1),Gs(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Gs(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Gs(t,Ys,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&lc(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Gs(t,Ys,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var a=this.target.el;this.options.onBeforeGrab(a),this.released=!1,this.target.grab(n,e,t);var o=function n(){Gs(a,Ys,n,!1),r(a)};return Gs(a,Ys,o),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Ns,this.target.move(n,e,t);var a=this.target.el,o=function n(){Gs(a,Ys,n,!1),r(a)};return Gs(a,Ys,o),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=Fs,this.target.restoreOpenStyle();var r=function r(){Gs(t,Ys,r,!1),n.lock=!1,n.released=!0,e(t)};return Gs(t,Ys,r),this}}}]),n}();const dc=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),uc=Number("500");class mc{constructor(){this.instance=new pc(dc)}update(n=".theme-vdoing-content img:not(.no-zoom)"){"undefined"!=typeof window&&this.instance.listen(n)}updateDelay(n=".theme-vdoing-content img:not(.no-zoom)",e=uc){setTimeout(()=>this.update(n),e)}}var hc=[gs,Es,ws,Cs,Ms,{watch:{"$page.path"(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted(){this.$vuepress.zooming=new mc,this.$vuepress.zooming.updateDelay()}}],gc={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return ps("layout",n),Kt.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},fc=t(0),vc=Object(fc.a)(gc,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(vc,"mixins",hc);const bc=[{name:"v-6ee71fe0",path:"/tech/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6ee71fe0").then(t)}},{path:"/tech/index.html",redirect:"/tech/"},{path:"/00.ç®å½é¡µ/01.ææ¯æè°.html",redirect:"/tech/"},{name:"v-06a3e7f2",path:"/pages/yxcypz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-06a3e7f2").then(t)}},{path:"/pages/yxcypz/index.html",redirect:"/pages/yxcypz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.html",redirect:"/pages/yxcypz/"},{name:"v-fc698e82",path:"/life/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-fc698e82").then(t)}},{path:"/life/index.html",redirect:"/life/"},{path:"/00.ç®å½é¡µ/02.çæ´»éå.html",redirect:"/life/"},{name:"v-3b2b3709",path:"/pages/yxgjaz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3b2b3709").then(t)}},{path:"/pages/yxgjaz/index.html",redirect:"/pages/yxgjaz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/03.ä¸äºå·¥å·å®è£.html",redirect:"/pages/yxgjaz/"},{name:"v-3a9d6f9d",path:"/pages/yxgjwz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3a9d6f9d").then(t)}},{path:"/pages/yxgjwz/index.html",redirect:"/pages/yxgjwz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.html",redirect:"/pages/yxgjwz/"},{name:"v-561954fe",path:"/pages/markdown/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-561954fe").then(t)}},{path:"/pages/markdown/index.html",redirect:"/pages/markdown/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/04.markdownå¸¸ç¨è¯­æ³ç»ä»¶.html",redirect:"/pages/markdown/"},{name:"v-169b12eb",path:"/pages/2022ckjl/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-169b12eb").then(t)}},{path:"/pages/2022ckjl/index.html",redirect:"/pages/2022ckjl/"},{path:"/01.ææ¯æè°/02.è¸©åè®°å½/01.2022è¸©åè®°å½.html",redirect:"/pages/2022ckjl/"},{name:"v-be755618",path:"/pages/k8s03/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-be755618").then(t)}},{path:"/pages/k8s03/index.html",redirect:"/pages/k8s03/"},{path:"/01.ææ¯æè°/03.kubernetes/03.k8sç½ç».html",redirect:"/pages/k8s03/"},{name:"v-132121e4",path:"/pages/k8s02/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-132121e4").then(t)}},{path:"/pages/k8s02/index.html",redirect:"/pages/k8s02/"},{path:"/01.ææ¯æè°/03.kubernetes/02.k8så­å¨.html",redirect:"/pages/k8s02/"},{name:"v-4b9555d9",path:"/pages/k8s01/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4b9555d9").then(t)}},{path:"/pages/k8s01/index.html",redirect:"/pages/k8s01/"},{path:"/01.ææ¯æè°/03.kubernetes/01.k8såºç¡.html",redirect:"/pages/k8s01/"},{name:"v-26c04c03",path:"/pages/k8s04/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-26c04c03").then(t)}},{path:"/pages/k8s04/index.html",redirect:"/pages/k8s04/"},{path:"/01.ææ¯æè°/03.kubernetes/04.pod cgroupåèµæºéå¶.html",redirect:"/pages/k8s04/"},{name:"v-4d3d3bec",path:"/pages/k8s05/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4d3d3bec").then(t)}},{path:"/pages/k8s05/index.html",redirect:"/pages/k8s05/"},{path:"/01.ææ¯æè°/03.kubernetes/05.æµééå¶.html",redirect:"/pages/k8s05/"},{name:"v-59c6ef63",path:"/pages/k8s06/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-59c6ef63").then(t)}},{path:"/pages/k8s06/index.html",redirect:"/pages/k8s06/"},{path:"/01.ææ¯æè°/03.kubernetes/06.ç½ç»ç­ç¥calico.html",redirect:"/pages/k8s06/"},{name:"v-0b248a60",path:"/pages/k8s07/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0b248a60").then(t)}},{path:"/pages/k8s07/index.html",redirect:"/pages/k8s07/"},{path:"/01.ææ¯æè°/03.kubernetes/07.grafanaåpromuthues.html",redirect:"/pages/k8s07/"},{name:"v-2f3eb2e7",path:"/pages/k8s08/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2f3eb2e7").then(t)}},{path:"/pages/k8s08/index.html",redirect:"/pages/k8s08/"},{path:"/01.ææ¯æè°/03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.html",redirect:"/pages/k8s08/"},{name:"v-1247b65b",path:"/pages/k8s09/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1247b65b").then(t)}},{path:"/pages/k8s09/index.html",redirect:"/pages/k8s09/"},{path:"/01.ææ¯æè°/03.kubernetes/09.ceph.html",redirect:"/pages/k8s09/"},{name:"v-cbe0d60a",path:"/pages/k8s10/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-cbe0d60a").then(t)}},{path:"/pages/k8s10/index.html",redirect:"/pages/k8s10/"},{path:"/01.ææ¯æè°/03.kubernetes/10.chrony.html",redirect:"/pages/k8s10/"},{name:"v-81d98e10",path:"/pages/k8s11/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-81d98e10").then(t)}},{path:"/pages/k8s11/index.html",redirect:"/pages/k8s11/"},{path:"/01.ææ¯æè°/03.kubernetes/11.crd operator.html",redirect:"/pages/k8s11/"},{name:"v-16eeeecc",path:"/pages/k8s12/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-16eeeecc").then(t)}},{path:"/pages/k8s12/index.html",redirect:"/pages/k8s12/"},{path:"/01.ææ¯æè°/03.kubernetes/12.criä¹containerd shimv2.html",redirect:"/pages/k8s12/"},{name:"v-c5d8330a",path:"/pages/k8s13/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-c5d8330a").then(t)}},{path:"/pages/k8s13/index.html",redirect:"/pages/k8s13/"},{path:"/01.ææ¯æè°/03.kubernetes/13.harbor.html",redirect:"/pages/k8s13/"},{name:"v-211c03e0",path:"/pages/k8s15/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-211c03e0").then(t)}},{path:"/pages/k8s15/index.html",redirect:"/pages/k8s15/"},{path:"/01.ææ¯æè°/03.kubernetes/15.Loongnix mips64.html",redirect:"/pages/k8s15/"},{name:"v-6da5591e",path:"/pages/k8s14/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6da5591e").then(t)}},{path:"/pages/k8s14/index.html",redirect:"/pages/k8s14/"},{path:"/01.ææ¯æè°/03.kubernetes/14.helm chart.html",redirect:"/pages/k8s14/"},{name:"v-019d3da2",path:"/pages/k8s16/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-019d3da2").then(t)}},{path:"/pages/k8s16/index.html",redirect:"/pages/k8s16/"},{path:"/01.ææ¯æè°/03.kubernetes/16.openebs-lvm-localpv.html",redirect:"/pages/k8s16/"},{name:"v-3d63ec0a",path:"/pages/devops/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3d63ec0a").then(t)}},{path:"/pages/devops/index.html",redirect:"/pages/devops/"},{path:"/01.ææ¯æè°/03.kubernetes/18.DevOps.html",redirect:"/pages/devops/"},{name:"v-185c15db",path:"/pages/ingressroute/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-185c15db").then(t)}},{path:"/pages/ingressroute/index.html",redirect:"/pages/ingressroute/"},{path:"/01.ææ¯æè°/03.kubernetes/17.traefik-ingressroute.html",redirect:"/pages/ingressroute/"},{name:"v-680c343b",path:"/pages/serverless/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-680c343b").then(t)}},{path:"/pages/serverless/index.html",redirect:"/pages/serverless/"},{path:"/01.ææ¯æè°/03.kubernetes/19.serverless.html",redirect:"/pages/serverless/"},{name:"v-9b6819e6",path:"/pages/k8s20/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-9b6819e6").then(t)}},{path:"/pages/k8s20/index.html",redirect:"/pages/k8s20/"},{path:"/01.ææ¯æè°/03.kubernetes/20.k8så®¹å¨æéå¤ç.html",redirect:"/pages/k8s20/"},{name:"v-db387184",path:"/pages/k8smianshi1/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-db387184").then(t)}},{path:"/pages/k8smianshi1/index.html",redirect:"/pages/k8smianshi1/"},{path:"/01.ææ¯æè°/03.kubernetes/301.k8sé¢è¯/01.1.html",redirect:"/pages/k8smianshi1/"},{name:"v-07c97ac3",path:"/pages/kubevirtyuanli/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-07c97ac3").then(t)}},{path:"/pages/kubevirtyuanli/index.html",redirect:"/pages/kubevirtyuanli/"},{path:"/01.ææ¯æè°/03.kubernetes/302.kubevirt/01.kubevirtåç.html",redirect:"/pages/kubevirtyuanli/"},{name:"v-335e284a",path:"/pages/kubevirtdeploy/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-335e284a").then(t)}},{path:"/pages/kubevirtdeploy/index.html",redirect:"/pages/kubevirtdeploy/"},{path:"/01.ææ¯æè°/03.kubernetes/302.kubevirt/02.kubevirté¨ç½².html",redirect:"/pages/kubevirtdeploy/"},{name:"v-33c779e9",path:"/pages/kata1/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-33c779e9").then(t)}},{path:"/pages/kata1/index.html",redirect:"/pages/kata1/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.html",redirect:"/pages/kata1/"},{name:"v-2e5f8162",path:"/pages/kata2/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2e5f8162").then(t)}},{path:"/pages/kata2/index.html",redirect:"/pages/kata2/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.html",redirect:"/pages/kata2/"},{name:"v-3f9afa48",path:"/pages/kata3/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3f9afa48").then(t)}},{path:"/pages/kata3/index.html",redirect:"/pages/kata3/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.html",redirect:"/pages/kata3/"},{name:"v-e15ee02a",path:"/pages/kata4/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-e15ee02a").then(t)}},{path:"/pages/kata4/index.html",redirect:"/pages/kata4/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/04.guest kernelåguestos.html",redirect:"/pages/kata4/"},{name:"v-3a4f35cc",path:"/pages/kata6/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3a4f35cc").then(t)}},{path:"/pages/kata6/index.html",redirect:"/pages/kata6/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.html",redirect:"/pages/kata6/"},{name:"v-50a8e3a0",path:"/pages/kata5/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-50a8e3a0").then(t)}},{path:"/pages/kata5/index.html",redirect:"/pages/kata5/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/05.kata-monitorçæ§.html",redirect:"/pages/kata5/"},{name:"v-77a29116",path:"/pages/kata7/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-77a29116").then(t)}},{path:"/pages/kata7/index.html",redirect:"/pages/kata7/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.html",redirect:"/pages/kata7/"},{name:"v-58d0a1ce",path:"/pages/kata8/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-58d0a1ce").then(t)}},{path:"/pages/kata8/index.html",redirect:"/pages/kata8/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.html",redirect:"/pages/kata8/"},{name:"v-d7e2a582",path:"/pages/kata0201/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-d7e2a582").then(t)}},{path:"/pages/kata0201/index.html",redirect:"/pages/kata0201/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.html",redirect:"/pages/kata0201/"},{name:"v-7ebc8c8b",path:"/pages/kata0202/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-7ebc8c8b").then(t)}},{path:"/pages/kata0202/index.html",redirect:"/pages/kata0202/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.html",redirect:"/pages/kata0202/"},{name:"v-33dd887e",path:"/pages/kata0401/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-33dd887e").then(t)}},{path:"/pages/kata0401/index.html",redirect:"/pages/kata0401/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.html",redirect:"/pages/kata0401/"},{name:"v-03d01b37",path:"/pages/kata0402/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-03d01b37").then(t)}},{path:"/pages/kata0402/index.html",redirect:"/pages/kata0402/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».html",redirect:"/pages/kata0402/"},{name:"v-6e85c154",path:"/pages/kata0404/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6e85c154").then(t)}},{path:"/pages/kata0404/index.html",redirect:"/pages/kata0404/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.html",redirect:"/pages/kata0404/"},{name:"v-68efef1e",path:"/pages/kata0403/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-68efef1e").then(t)}},{path:"/pages/kata0403/index.html",redirect:"/pages/kata0403/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.html",redirect:"/pages/kata0403/"},{name:"v-5b19c60a",path:"/pages/kata0501/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5b19c60a").then(t)}},{path:"/pages/kata0501/index.html",redirect:"/pages/kata0501/"},{path:"/01.ææ¯æè°/03.kubernetes/303.kata-containers/05.kataV3.0/01.kata v3.0.html",redirect:"/pages/kata0501/"},{name:"v-e1ca0762",path:"/pages/docker03/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-e1ca0762").then(t)}},{path:"/pages/docker03/index.html",redirect:"/pages/docker03/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/03.dockeréå.html",redirect:"/pages/docker03/"},{name:"v-32d723b6",path:"/pages/docker02/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-32d723b6").then(t)}},{path:"/pages/docker02/index.html",redirect:"/pages/docker02/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/02.dockerfileæ¹æº.html",redirect:"/pages/docker02/"},{name:"v-5d2403be",path:"/pages/docker04/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5d2403be").then(t)}},{path:"/pages/docker04/index.html",redirect:"/pages/docker04/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/04.dockeréåä¼å.html",redirect:"/pages/docker04/"},{name:"v-43971d6a",path:"/pages/docker01/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-43971d6a").then(t)}},{path:"/pages/docker01/index.html",redirect:"/pages/docker01/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/01.buildxå¤å¹³å°æå»º.html",redirect:"/pages/docker01/"},{name:"v-11c4c310",path:"/pages/docker05/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-11c4c310").then(t)}},{path:"/pages/docker05/index.html",redirect:"/pages/docker05/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.html",redirect:"/pages/docker05/"},{name:"v-3b906eab",path:"/pages/docker06/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3b906eab").then(t)}},{path:"/pages/docker06/index.html",redirect:"/pages/docker06/"},{path:"/01.ææ¯æè°/03.kubernetes/304.docker/06.dockeråºç¡.html",redirect:"/pages/docker06/"},{name:"v-0523fe6a",path:"/pages/rzcjfa/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0523fe6a").then(t)}},{path:"/pages/rzcjfa/index.html",redirect:"/pages/rzcjfa/"},{path:"/01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/01.æ¥å¿ééæ¹æ¡.html",redirect:"/pages/rzcjfa/"},{name:"v-31339544",path:"/pages/loki/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-31339544").then(t)}},{path:"/pages/loki/index.html",redirect:"/pages/loki/"},{path:"/01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/05.loki.html",redirect:"/pages/loki/"},{name:"v-7e4b3a46",path:"/pages/gpu01/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-7e4b3a46").then(t)}},{path:"/pages/gpu01/index.html",redirect:"/pages/gpu01/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/01.nvidia-device-plugins.html",redirect:"/pages/gpu01/"},{name:"v-be31a184",path:"/pages/4paradigm/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-be31a184").then(t)}},{path:"/pages/4paradigm/index.html",redirect:"/pages/4paradigm/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/02.ç¬¬åèå¼vGPU.html",redirect:"/pages/4paradigm/"},{name:"v-338caad2",path:"/pages/fluentd-log/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-338caad2").then(t)}},{path:"/pages/fluentd-log/index.html",redirect:"/pages/fluentd-log/"},{path:"/01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/02.fluentdéç½®.html",redirect:"/pages/fluentd-log/"},{name:"v-572ce303",path:"/pages/tencnt-cpu-manager/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-572ce303").then(t)}},{path:"/pages/tencnt-cpu-manager/index.html",redirect:"/pages/tencnt-cpu-manager/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/03.è¾è®¯gpu-manager.html",redirect:"/pages/tencnt-cpu-manager/"},{name:"v-131bc9a5",path:"/pages/ali-gpushare/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-131bc9a5").then(t)}},{path:"/pages/ali-gpushare/index.html",redirect:"/pages/ali-gpushare/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/04.é¿égpu-share.html",redirect:"/pages/ali-gpushare/"},{name:"v-582a5ac3",path:"/pages/fadb16/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-582a5ac3").then(t)}},{path:"/pages/fadb16/index.html",redirect:"/pages/fadb16/"},{path:"/01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/03.eventsæä¹å.html",redirect:"/pages/fadb16/"},{name:"v-6a155cef",path:"/pages/nvidiadevice/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6a155cef").then(t)}},{path:"/pages/nvidiadevice/index.html",redirect:"/pages/nvidiadevice/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/05.è±ä¼è¾¾é©±å¨å®è£.html",redirect:"/pages/nvidiadevice/"},{name:"v-fa04c054",path:"/pages/golang01/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-fa04c054").then(t)}},{path:"/pages/golang01/index.html",redirect:"/pages/golang01/"},{path:"/01.ææ¯æè°/04.golang/01.å¸¸ç¨è®¡ç®.html",redirect:"/pages/golang01/"},{name:"v-394a82c1",path:"/pages/qgpu/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-394a82c1").then(t)}},{path:"/pages/qgpu/index.html",redirect:"/pages/qgpu/"},{path:"/01.ææ¯æè°/03.kubernetes/306.GPU/06.è¾è®¯äºqGPU.html",redirect:"/pages/qgpu/"},{name:"v-6c7b2800",path:"/pages/golang02/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6c7b2800").then(t)}},{path:"/pages/golang02/index.html",redirect:"/pages/golang02/"},{path:"/01.ææ¯æè°/04.golang/02.golangé¢è¯é®é¢.html",redirect:"/pages/golang02/"},{name:"v-306f5d23",path:"/pages/alert-log/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-306f5d23").then(t)}},{path:"/pages/alert-log/index.html",redirect:"/pages/alert-log/"},{path:"/01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/04.alertmanageræä¹å.html",redirect:"/pages/alert-log/"},{name:"v-0169ea0d",path:"/pages/golang05/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0169ea0d").then(t)}},{path:"/pages/golang05/index.html",redirect:"/pages/golang05/"},{path:"/01.ææ¯æè°/04.golang/05.go-å°è£ç»§æ¿åå¤æ.html",redirect:"/pages/golang05/"},{name:"v-51cd8504",path:"/pages/golang04/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-51cd8504").then(t)}},{path:"/pages/golang04/index.html",redirect:"/pages/golang04/"},{path:"/01.ææ¯æè°/04.golang/04.go embed.html",redirect:"/pages/golang04/"},{name:"v-783e73dc",path:"/pages/golang03/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-783e73dc").then(t)}},{path:"/pages/golang03/index.html",redirect:"/pages/golang03/"},{path:"/01.ææ¯æè°/04.golang/03.go-æé.html",redirect:"/pages/golang03/"},{name:"v-5b58f46b",path:"/pages/golang06/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5b58f46b").then(t)}},{path:"/pages/golang06/index.html",redirect:"/pages/golang06/"},{path:"/01.ææ¯æè°/04.golang/06.go-æä»¶æä½.html",redirect:"/pages/golang06/"},{name:"v-d695f1cc",path:"/pages/golang08/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-d695f1cc").then(t)}},{path:"/pages/golang08/index.html",redirect:"/pages/golang08/"},{path:"/01.ææ¯æè°/04.golang/08.go-sliceåç.html",redirect:"/pages/golang08/"},{name:"v-92ed690a",path:"/pages/golang07/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-92ed690a").then(t)}},{path:"/pages/golang07/index.html",redirect:"/pages/golang07/"},{path:"/01.ææ¯æè°/04.golang/07.go-json.html",redirect:"/pages/golang07/"},{name:"v-018b12ce",path:"/pages/golang09/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-018b12ce").then(t)}},{path:"/pages/golang09/index.html",redirect:"/pages/golang09/"},{path:"/01.ææ¯æè°/04.golang/09.ginæ¡æ¶ä½¿ç¨sockjs-go.html",redirect:"/pages/golang09/"},{name:"v-3f6d3b4e",path:"/pages/b5149c/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3f6d3b4e").then(t)}},{path:"/pages/b5149c/index.html",redirect:"/pages/b5149c/"},{path:"/01.ææ¯æè°/06.è®¡ç®æºç½ç»åºç¡/01.å³äºcgroup.html",redirect:"/pages/b5149c/"},{name:"v-13d7c644",path:"/pages/95ef75/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-13d7c644").then(t)}},{path:"/pages/95ef75/index.html",redirect:"/pages/95ef75/"},{path:"/01.ææ¯æè°/06.è®¡ç®æºç½ç»åºç¡/02.å³äºcpuåå­.html",redirect:"/pages/95ef75/"},{name:"v-080925d0",path:"/pages/33705b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-080925d0").then(t)}},{path:"/pages/33705b/index.html",redirect:"/pages/33705b/"},{path:"/01.ææ¯æè°/07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.html",redirect:"/pages/33705b/"},{name:"v-2e18135a",path:"/pages/697e48/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2e18135a").then(t)}},{path:"/pages/697e48/index.html",redirect:"/pages/697e48/"},{path:"/01.ææ¯æè°/07.èæå/02.èæååºç¡æ¦å¿µ.html",redirect:"/pages/697e48/"},{name:"v-a2c6b924",path:"/pages/yhsjff/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-a2c6b924").then(t)}},{path:"/pages/yhsjff/index.html",redirect:"/pages/yhsjff/"},{path:"/01.ææ¯æè°/08.è¿ç»´èæ¬/01.Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³.html",redirect:"/pages/yhsjff/"},{name:"v-4a20ad90",path:"/pages/6f3d25/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4a20ad90").then(t)}},{path:"/pages/6f3d25/index.html",redirect:"/pages/6f3d25/"},{path:"/01.ææ¯æè°/07.èæå/01.å¼å¯ç¡¬ä»¶èæå.html",redirect:"/pages/6f3d25/"},{name:"v-51e55098",path:"/pages/ythx/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-51e55098").then(t)}},{path:"/pages/ythx/index.html",redirect:"/pages/ythx/"},{path:"/02.çæ´»éå/01.å»æ¡æ¥è®°/01.å»æ¡è±é.html",redirect:"/pages/ythx/"},{name:"v-20df4130",path:"/pages/jqdd/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-20df4130").then(t)}},{path:"/pages/jqdd/index.html",redirect:"/pages/jqdd/"},{path:"/01.ææ¯æè°/09.è½¯èé«é¡¹/01.æ¬è¯·ç­å¾.html",redirect:"/pages/jqdd/"},{name:"v-1efcbbda",path:"/pages/2bb179/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1efcbbda").then(t)}},{path:"/pages/2bb179/index.html",redirect:"/pages/2bb179/"},{path:"/02.çæ´»éå/01.å»æ¡æ¥è®°/02.å»ç«åé.html",redirect:"/pages/2bb179/"},{name:"v-09ac84c7",path:"/pages/b5e483/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-09ac84c7").then(t)}},{path:"/pages/b5e483/index.html",redirect:"/pages/b5e483/"},{path:"/02.çæ´»éå/01.å»æ¡æ¥è®°/03.å»æ¡ç¬è®°.html",redirect:"/pages/b5e483/"},{name:"v-7d5d8b2d",path:"/books/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-7d5d8b2d").then(t)}},{path:"/books/index.html",redirect:"/books/"},{path:"/04.éè¯»/01.ä¹¦å.html",redirect:"/books/"},{name:"v-4ed9e4ca",path:"/about/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4ed9e4ca").then(t)}},{path:"/about/index.html",redirect:"/about/"},{path:"/03.å³äº/01.å³äº.html",redirect:"/about/"},{name:"v-6202dee6",path:"/pages/yzbook/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6202dee6").then(t)}},{path:"/pages/yzbook/index.html",redirect:"/pages/yzbook/"},{path:"/04.éè¯»/02.ä¼è´¨åå®¢.html",redirect:"/pages/yzbook/"},{name:"v-18dfbaf2",path:"/pages/yzgihub/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-18dfbaf2").then(t)}},{path:"/pages/yzgihub/index.html",redirect:"/pages/yzgihub/"},{path:"/04.éè¯»/03.ä¼è´¨å¼æºé¡¹ç®.html",redirect:"/pages/yzgihub/"},{name:"v-994f98d2",path:"/archives/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-994f98d2").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-ea545412",path:"/categories/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-ea545412").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-1d3069d2",path:"/tags/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1d3069d2").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-0c8b6730",path:"/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0c8b6730").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:vc}],kc={title:"hff",description:"https://fangfenghuang.github.io/",base:"/",headTags:[["link",{rel:"icon",href:"/img/logo.ico"}],["meta",{name:"keywords",content:"go,python,c,c++,vue,shell,php"}],["meta",{name:"baidu-site-verification",content:"code-LTKHwOecxI"}],["meta",{name:"theme-color",content:"#11a8cd"}],["meta",{name:"referrer",content:"no-referrer-when-downgrade"}],["link",{rel:"stylesheet",href:"https://at.alicdn.com/t/font_3114978_qe0b39no76.css"}],["script",{language:"javascript",type:"text/javascript",src:"/js/pgmanor-self.js"}]],pages:[{title:"ææ¯æè°",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"01.ææ¯æè°",imgUrl:"/img/tech.png",description:"å­¦ä¹ ãå·¥ä½"}},title:"ææ¯æè°",date:"2020-03-11T21:50:53.000Z",permalink:"/tech/",sidebar:!1,article:!1,comment:!1,editLink:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ææ¯æè°"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ææ¯æè°"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2020-03-11T21:50:53.000Z"},{itemprop:"name",content:"ææ¯æè°"},{itemprop:"description",content:""}]},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html",relativePath:"00.ç®å½é¡µ/01.ææ¯æè°.md",key:"v-6ee71fe0",path:"/tech/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"ä¸äºå¸¸ç¨éç½®",frontmatter:{title:"ä¸äºå¸¸ç¨éç½®",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxcypz/",categories:["ææ¯æè°","å¸¸ç¨æ»ç»"],tags:["å¸¸ç¨","éç½®"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå¸¸ç¨éç½®"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå¸¸ç¨éç½®"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{property:"article:tag",content:"éç½®"},{itemprop:"name",content:"ä¸äºå¸¸ç¨éç½®"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.md",key:"v-06a3e7f2",path:"/pages/yxcypz/",headers:[{level:2,title:"hosts",slug:"hosts",normalizedTitle:"hosts",charIndex:2},{level:2,title:"winscp",slug:"winscp",normalizedTitle:"winscp",charIndex:46}],headersStr:"hosts winscp",content:"# hosts\n\nC:\\Windows\\System32\\drivers\\etc\\\n\n\n# winscp\n\nsudo su -c /usr/libexec/openssh/sftp-server",normalizedContent:"# hosts\n\nc:\\windows\\system32\\drivers\\etc\\\n\n\n# winscp\n\nsudo su -c /usr/libexec/openssh/sftp-server",charsets:{},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"çæ´»éå",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"02.çæ´»éå",imgUrl:"/img/life.png",description:"ä¸ªäººãéç¬"}},title:"çæ´»éå",date:"2020-03-11T21:50:54.000Z",permalink:"/life/",sidebar:!1,article:!1,comment:!1,editLink:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"çæ´»éå"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html"},{property:"og:type",content:"article"},{property:"og:title",content:"çæ´»éå"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2020-03-11T21:50:54.000Z"},{itemprop:"name",content:"çæ´»éå"},{itemprop:"description",content:""}]},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html",relativePath:"00.ç®å½é¡µ/02.çæ´»éå.md",key:"v-fc698e82",path:"/life/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"ä¸äºå·¥å·å®è£",frontmatter:{title:"ä¸äºå·¥å·å®è£",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxgjaz/",categories:["ææ¯æè°","å¸¸ç¨æ»ç»"],tags:["å¸¸ç¨","å·¥å·"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå·¥å·å®è£"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå·¥å·å®è£"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{property:"article:tag",content:"å·¥å·"},{itemprop:"name",content:"ä¸äºå·¥å·å®è£"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/03.ä¸äºå·¥å·å®è£.md",key:"v-3b2b3709",path:"/pages/yxgjaz/",headers:[{level:2,title:"sysbenchå®è£",slug:"sysbenchå®è£",normalizedTitle:"sysbenchå®è£",charIndex:2},{level:2,title:"centoså®è£fioågfioï¼å¾å½¢çé¢ï¼",slug:"centoså®è£fioågfio-å¾å½¢çé¢",normalizedTitle:"centoså®è£fioågfioï¼å¾å½¢çé¢ï¼",charIndex:210},{level:2,title:"go å®è£",slug:"go-å®è£",normalizedTitle:"go å®è£",charIndex:1180},{level:2,title:"aptå®è£docker",slug:"aptå®è£docker",normalizedTitle:"aptå®è£docker",charIndex:1608},{level:2,title:"dockerå®è£",slug:"dockerå®è£",normalizedTitle:"dockerå®è£",charIndex:1999},{level:2,title:"centos7å®è£iperfï¼",slug:"centos7å®è£iperf",normalizedTitle:"centos7å®è£iperfï¼",charIndex:3478}],headersStr:"sysbenchå®è£ centoså®è£fioågfioï¼å¾å½¢çé¢ï¼ go å®è£ aptå®è£docker dockerå®è£ centos7å®è£iperfï¼",content:"# sysbenchå®è£\n\nhttps://github.com/akopytov/sysbench#rhelcentos%E8%8E%B7%E5%8F%96 curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.rpm.sh | sudo bash sudo yum -y install sysbench\n\n\n# centoså®è£fioågfioï¼å¾å½¢çé¢ï¼\n\nyum install gcc yum install libaio-devel (å¿é¡»åå®è£ï¼å¦åå¸è½½fioåéæ°æ§è¡) yum install gtk2-devel glib2-devel\n\nä¸è½½fioåç¼©åï¼è§£åfioåç¼©æä»¶ ##wget https://github.com/axboe/fio/archive/refs/tags/fio-2.2.10.tar.gz\n\ntar -zxvf fio-2.1.10.tar.gz\n\ncd fio-2.2.10\n\n./configure --enable-gfio\n\nmake fio\n\nmake gfio\n\nmake install\n\nln -s /usr/local/bin/fio /usr/bin/fio ln -s /usr/local/bin/gfio /usr/bin/gfio\n\nè¿å¥serveræ¨¡å¼ï¼./fio -S\n\nä½¿ç¨gfioå¾å½¢åæµè¯ï¼gfio\n\né®é¢ï¼\n\n 1. è¿ç¨ä½¿ç¨å¾å½¢åçé¢æ¶åºéï¼MoTTY X11 proxy: Unsupported authorisation protocol http://t.zoukankan.com/create-serenditipy-p-15407983.html\n\næ®éç¨æ·æ¥éï¼rootç¨æ·ä¸æ¥éçè§£å³æ¹æ³ï¼ cp /root/.Xauthority /home/xxx/\n\næ®éç¨æ·ä¸æ¥éï¼rootç¨æ·æ¥éçè§£å³æ¹æ³ï¼ cp /home/xxx/.Xauthority /root/\n\n 2. MoTTY X11 proxy: Authorisation not recognised https://blog.csdn.net/u014780310/article/details/118966628\n\n1ãcd ~/ 2ãxauth list 3ãæ ¹æ®åé¢æç¤ºçcannot open localhostï¼10.0ä»¥åä¸é¢ååºæ¥çunix:10ï¼æ§è¡å¦ä¸å½ä»¤: xauth add bluedon-PC/unix:10 MIT-MAGIC-COOKIE-1 fd2c21d2294dd751801469e960799ab7 4ãéåºç»ç«¯ï¼éæ°ç»å½\n\n\n# go å®è£\n\n$ wget -c https://studygolang.com/dl/golang/go1.18.linux-amd64.tar.gz\n$ tar -C /usr/local -xzf go1.18.linux-amd64.tar.gz\n# æ³¨æåçº§éè¦åå é¤/usr/local/goååè§£å\n\n$ vi /root/.bashrc\nexport GOROOT=/usr/local/go\nexport GOPATH=/root/go\nexport PATH=$PATH:$GOPATH/bin:$GOROOT/bin\nexport GOBIN=/root/go/bin\nexport GO111MODULE=on\nexport GOPROXY=https://goproxy.cn,direct\n\n$ source /root/.bashrc\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# aptå®è£docker\n\næ´æ°æ°æ®æº apt-get update apt-get -y install apt-transport-https ca-certificates curl software-properties-common curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - add-apt-repository \"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" apt-get update && apt-get install -y docker-ce éªè¯å®è£ docker version\n\n\n# dockerå®è£\n\n# å¸è½½æ§çæ¬Dockerè½¯ä»¶\n## ä»¥YUMæ¹å¼å®è£çDockerå¸è½½\nyum remove docker \\\n           docker-client \\\n           docker-client-latest \\\n           docker-common \\\n           docker-latest \\\n           docker-latest-logrotate \\\n           docker-logrotate \\\n           docker-selinux \\\n           docker-engine-selinux \\\n           docker-engine \\\n           container*\n## ä»¥RPMæ¹å¼å®è£çDockerå¸è½½\n### åæ¥è¯¢å®è£äºåªäºDockerç¸å³çå\n[root@mvxl7365 ~]# rpm -qa|grep docker\ndocker-ce-17.03.2.ce-1.el7.centos.x86_64\ndocker-ce-selinux-17.03.2.ce-1.el7.centos.noarch\n### éä¸è¿è¡å¸è½½\n[root@mvxl7365 ~]# rpm -e docker-ce-17.03.2.ce-1.el7.centos.x86_64\n[root@mvxl7365 ~]# rpm -e docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch\n### æ£æ¥æ¯å¦å¸è½½å¹²å\n[root@mvxl7365 ~]# rpm -qa|grep docker\n\n3ãä½¿ç¨curlåçº§å°ææ°ç\nå½ä»¤ï¼\ncurl -fsSL https://get.docker.com/ | sh\n\n4ãéå¯Docker\nå½ä»¤ï¼\nsystemctl restart docker\n\n5ãè®¾ç½®Dockerå¼æºèªå¯\nå½ä»¤ï¼\nsystemctl enable docker\n\n6ãæ¥çDockerçæ¬ä¿¡æ¯\nå½ä»¤ï¼\ndocker version\n\n7ãæ¥çDockerç³»ç»ä¿¡æ¯ï¼åæ¬éååå®¹å¨æ°â¦\nå½ä»¤ï¼\ndocker info\n\n8ãä½¿ç¨docker imageså½ä»¤æ¥çèªå·±ä¹åçéåæ¯å¦å­å¨\nå½ä»¤ï¼\ndocker images\n\n9ãæ¥çå®¹å¨\nå½ä»¤ï¼\ndocker ps\nå¦ææ­¤æ¶å®¹å¨åè¡¨æ¾ç¤ºä¸ºç©ºï¼æèéå¯å®¹å¨æ¥å¦ä¸æç¤ºï¼\nError response from daemon: Unknown runtime specified docker-runc\nError: failed to start containers: yapi\nå¯æ§è¡ä»¥ä¸å½ä»¤ï¼\ngrep -rl 'docker-runc' /var/lib/docker/containers/ | xargs sed -i 's/docker-runc/runc/g'\nç¶åéå¯dockerï¼å½ä»¤å¦ä¸ï¼\nsystemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n\n\n\n# centos7å®è£iperfï¼\n\nyum install -y iperf3",normalizedContent:"# sysbenchå®è£\n\nhttps://github.com/akopytov/sysbench#rhelcentos%e8%8e%b7%e5%8f%96 curl -s https://packagecloud.io/install/repositories/akopytov/sysbench/script.rpm.sh | sudo bash sudo yum -y install sysbench\n\n\n# centoså®è£fioågfioï¼å¾å½¢çé¢ï¼\n\nyum install gcc yum install libaio-devel (å¿é¡»åå®è£ï¼å¦åå¸è½½fioåéæ°æ§è¡) yum install gtk2-devel glib2-devel\n\nä¸è½½fioåç¼©åï¼è§£åfioåç¼©æä»¶ ##wget https://github.com/axboe/fio/archive/refs/tags/fio-2.2.10.tar.gz\n\ntar -zxvf fio-2.1.10.tar.gz\n\ncd fio-2.2.10\n\n./configure --enable-gfio\n\nmake fio\n\nmake gfio\n\nmake install\n\nln -s /usr/local/bin/fio /usr/bin/fio ln -s /usr/local/bin/gfio /usr/bin/gfio\n\nè¿å¥serveræ¨¡å¼ï¼./fio -s\n\nä½¿ç¨gfioå¾å½¢åæµè¯ï¼gfio\n\né®é¢ï¼\n\n 1. è¿ç¨ä½¿ç¨å¾å½¢åçé¢æ¶åºéï¼motty x11 proxy: unsupported authorisation protocol http://t.zoukankan.com/create-serenditipy-p-15407983.html\n\næ®éç¨æ·æ¥éï¼rootç¨æ·ä¸æ¥éçè§£å³æ¹æ³ï¼ cp /root/.xauthority /home/xxx/\n\næ®éç¨æ·ä¸æ¥éï¼rootç¨æ·æ¥éçè§£å³æ¹æ³ï¼ cp /home/xxx/.xauthority /root/\n\n 2. motty x11 proxy: authorisation not recognised https://blog.csdn.net/u014780310/article/details/118966628\n\n1ãcd ~/ 2ãxauth list 3ãæ ¹æ®åé¢æç¤ºçcannot open localhostï¼10.0ä»¥åä¸é¢ååºæ¥çunix:10ï¼æ§è¡å¦ä¸å½ä»¤: xauth add bluedon-pc/unix:10 mit-magic-cookie-1 fd2c21d2294dd751801469e960799ab7 4ãéåºç»ç«¯ï¼éæ°ç»å½\n\n\n# go å®è£\n\n$ wget -c https://studygolang.com/dl/golang/go1.18.linux-amd64.tar.gz\n$ tar -c /usr/local -xzf go1.18.linux-amd64.tar.gz\n# æ³¨æåçº§éè¦åå é¤/usr/local/goååè§£å\n\n$ vi /root/.bashrc\nexport goroot=/usr/local/go\nexport gopath=/root/go\nexport path=$path:$gopath/bin:$goroot/bin\nexport gobin=/root/go/bin\nexport go111module=on\nexport goproxy=https://goproxy.cn,direct\n\n$ source /root/.bashrc\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# aptå®è£docker\n\næ´æ°æ°æ®æº apt-get update apt-get -y install apt-transport-https ca-certificates curl software-properties-common curl -fssl https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - add-apt-repository \"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\" apt-get update && apt-get install -y docker-ce éªè¯å®è£ docker version\n\n\n# dockerå®è£\n\n# å¸è½½æ§çæ¬dockerè½¯ä»¶\n## ä»¥yumæ¹å¼å®è£çdockerå¸è½½\nyum remove docker \\\n           docker-client \\\n           docker-client-latest \\\n           docker-common \\\n           docker-latest \\\n           docker-latest-logrotate \\\n           docker-logrotate \\\n           docker-selinux \\\n           docker-engine-selinux \\\n           docker-engine \\\n           container*\n## ä»¥rpmæ¹å¼å®è£çdockerå¸è½½\n### åæ¥è¯¢å®è£äºåªäºdockerç¸å³çå\n[root@mvxl7365 ~]# rpm -qa|grep docker\ndocker-ce-17.03.2.ce-1.el7.centos.x86_64\ndocker-ce-selinux-17.03.2.ce-1.el7.centos.noarch\n### éä¸è¿è¡å¸è½½\n[root@mvxl7365 ~]# rpm -e docker-ce-17.03.2.ce-1.el7.centos.x86_64\n[root@mvxl7365 ~]# rpm -e docker-ce-selinux-17.03.2.ce-1.el7.centos.noarch\n### æ£æ¥æ¯å¦å¸è½½å¹²å\n[root@mvxl7365 ~]# rpm -qa|grep docker\n\n3ãä½¿ç¨curlåçº§å°ææ°ç\nå½ä»¤ï¼\ncurl -fssl https://get.docker.com/ | sh\n\n4ãéå¯docker\nå½ä»¤ï¼\nsystemctl restart docker\n\n5ãè®¾ç½®dockerå¼æºèªå¯\nå½ä»¤ï¼\nsystemctl enable docker\n\n6ãæ¥çdockerçæ¬ä¿¡æ¯\nå½ä»¤ï¼\ndocker version\n\n7ãæ¥çdockerç³»ç»ä¿¡æ¯ï¼åæ¬éååå®¹å¨æ°â¦\nå½ä»¤ï¼\ndocker info\n\n8ãä½¿ç¨docker imageså½ä»¤æ¥çèªå·±ä¹åçéåæ¯å¦å­å¨\nå½ä»¤ï¼\ndocker images\n\n9ãæ¥çå®¹å¨\nå½ä»¤ï¼\ndocker ps\nå¦ææ­¤æ¶å®¹å¨åè¡¨æ¾ç¤ºä¸ºç©ºï¼æèéå¯å®¹å¨æ¥å¦ä¸æç¤ºï¼\nerror response from daemon: unknown runtime specified docker-runc\nerror: failed to start containers: yapi\nå¯æ§è¡ä»¥ä¸å½ä»¤ï¼\ngrep -rl 'docker-runc' /var/lib/docker/containers/ | xargs sed -i 's/docker-runc/runc/g'\nç¶åéå¯dockerï¼å½ä»¤å¦ä¸ï¼\nsystemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n\n\n\n# centos7å®è£iperfï¼\n\nyum install -y iperf3",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ä¸äºå·¥å·ç½ç«",frontmatter:{title:"ä¸äºå·¥å·ç½ç«",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxgjwz/",categories:["ææ¯æè°","å¸¸ç¨æ»ç»"],tags:["å¸¸ç¨","å·¥å·"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå·¥å·ç½ç«"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå·¥å·ç½ç«"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{property:"article:tag",content:"å·¥å·"},{itemprop:"name",content:"ä¸äºå·¥å·ç½ç«"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.md",key:"v-3a9d6f9d",path:"/pages/yxgjwz/",headers:[{level:2,title:"æç´¢å¼æ",slug:"æç´¢å¼æ",normalizedTitle:"æç´¢å¼æ",charIndex:2},{level:2,title:"ä¸äºå·¥å·ç½ç«",slug:"ä¸äºå·¥å·ç½ç«",normalizedTitle:"ä¸äºå·¥å·ç½ç«",charIndex:83},{level:2,title:"ä¸äºæä»¶",slug:"ä¸äºæä»¶",normalizedTitle:"ä¸äºæä»¶",charIndex:166},{level:2,title:"ä¸äºå¸¸ç¨æ¥è¯¢ç½ç«",slug:"ä¸äºå¸¸ç¨æ¥è¯¢ç½ç«",normalizedTitle:"ä¸äºå¸¸ç¨æ¥è¯¢ç½ç«",charIndex:258},{level:2,title:"å¶ä»",slug:"å¶ä»",normalizedTitle:"å¶ä»",charIndex:352}],headersStr:"æç´¢å¼æ ä¸äºå·¥å·ç½ç« ä¸äºæä»¶ ä¸äºå¸¸ç¨æ¥è¯¢ç½ç« å¶ä»",content:"# æç´¢å¼æ\n\nhttps://www.google.com https://www.google.com.hk/ https://cn.bing.com/\n\n\n# ä¸äºå·¥å·ç½ç«\n\nhttp://www.pdman.cn/#/ æ°æ®åºå»ºæ¨¡\n\nhttps://app.diagrams.net/ ç»å¾å·¥å· dockeréåä»\n\n\n# ä¸äºæä»¶\n\n[chrome md]æä»¶(https://blog.csdn.net/twingao/article/details/105170034) google vpn\n\n\n# ä¸äºå¸¸ç¨æ¥è¯¢ç½ç«\n\nå­¦åæ¥è¯¢ https://www.iprdb.com/ ä¸å©æ¥è¯¢ http://www2.soopat.com/Home/IIndex ä¸å©æ¥è¯¢ ï¼qqé®ç®±ï¼\n\n\n# å¶ä»\n\næ¥æ¾éåèªå·±å½åç½ç»ç¯å¢çä¼éCloudflare Anycast IP",normalizedContent:"# æç´¢å¼æ\n\nhttps://www.google.com https://www.google.com.hk/ https://cn.bing.com/\n\n\n# ä¸äºå·¥å·ç½ç«\n\nhttp://www.pdman.cn/#/ æ°æ®åºå»ºæ¨¡\n\nhttps://app.diagrams.net/ ç»å¾å·¥å· dockeréåä»\n\n\n# ä¸äºæä»¶\n\n[chrome md]æä»¶(https://blog.csdn.net/twingao/article/details/105170034) google vpn\n\n\n# ä¸äºå¸¸ç¨æ¥è¯¢ç½ç«\n\nå­¦åæ¥è¯¢ https://www.iprdb.com/ ä¸å©æ¥è¯¢ http://www2.soopat.com/home/iindex ä¸å©æ¥è¯¢ ï¼qqé®ç®±ï¼\n\n\n# å¶ä»\n\næ¥æ¾éåèªå·±å½åç½ç»ç¯å¢çä¼écloudflare anycast ip",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"markdownå¸¸ç¨è¯­æ³ç»ä»¶",frontmatter:{title:"markdownå¸¸ç¨è¯­æ³ç»ä»¶",date:"2022-08-26T09:51:37.000Z",permalink:"/pages/markdown/",categories:["ææ¯æè°","å¸¸ç¨æ»ç»"],tags:["å¸¸ç¨","å·¥å·"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"image",content:"https://pic4.zhimg.com/80/v2-a47051e92cf74930bedd7469978e6c08_hd.png"},{name:"twitter:title",content:"markdownå¸¸ç¨è¯­æ³ç»ä»¶"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:"https://pic4.zhimg.com/80/v2-a47051e92cf74930bedd7469978e6c08_hd.png"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E7%BB%84%E4%BB%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"markdownå¸¸ç¨è¯­æ³ç»ä»¶"},{property:"og:description",content:""},{property:"og:image",content:"https://pic4.zhimg.com/80/v2-a47051e92cf74930bedd7469978e6c08_hd.png"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E7%BB%84%E4%BB%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-26T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{property:"article:tag",content:"å·¥å·"},{itemprop:"name",content:"markdownå¸¸ç¨è¯­æ³ç»ä»¶"},{itemprop:"description",content:""},{itemprop:"image",content:"https://pic4.zhimg.com/80/v2-a47051e92cf74930bedd7469978e6c08_hd.png"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95%E7%BB%84%E4%BB%B6.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/04.markdownå¸¸ç¨è¯­æ³ç»ä»¶.md",key:"v-561954fe",path:"/pages/markdown/",headers:[{level:2,title:"ç®å½å¯¼èª",slug:"ç®å½å¯¼èª",normalizedTitle:"ç®å½å¯¼èª",charIndex:2},{level:2,title:"å­ä½",slug:"å­ä½",normalizedTitle:"å­ä½",charIndex:124},{level:2,title:"åéçº¿",slug:"åéçº¿",normalizedTitle:"åéçº¿",charIndex:241},{level:2,title:"åè¡¨",slug:"åè¡¨",normalizedTitle:"åè¡¨",charIndex:459},{level:2,title:"åºå",slug:"åºå",normalizedTitle:"åºå",charIndex:648},{level:2,title:"ä»£ç æ¡",slug:"ä»£ç æ¡",normalizedTitle:"ä»£ç æ¡",charIndex:812},{level:2,title:"é¾æ¥",slug:"é¾æ¥",normalizedTitle:"é¾æ¥",charIndex:1028},{level:2,title:"å¾ç",slug:"å¾ç",normalizedTitle:"å¾ç",charIndex:1075},{level:2,title:"è¡¨æ ¼",slug:"è¡¨æ ¼",normalizedTitle:"è¡¨æ ¼",charIndex:1084},{level:2,title:"æ¢è¡",slug:"æ¢è¡",normalizedTitle:"æ¢è¡",charIndex:1204},{level:2,title:"æµç¨å¾",slug:"æµç¨å¾",normalizedTitle:"æµç¨å¾",charIndex:1297},{level:2,title:"æ°å­¦å¬å¼",slug:"æ°å­¦å¬å¼",normalizedTitle:"æ°å­¦å¬å¼",charIndex:1305},{level:2,title:"Todo List",slug:"todo-list",normalizedTitle:"todo list",charIndex:1359},{level:2,title:"èæ³¨",slug:"èæ³¨",normalizedTitle:"èæ³¨",charIndex:1402}],headersStr:"ç®å½å¯¼èª å­ä½ åéçº¿ åè¡¨ åºå ä»£ç æ¡ é¾æ¥ å¾ç è¡¨æ ¼ æ¢è¡ æµç¨å¾ æ°å­¦å¬å¼ Todo List èæ³¨",content:'# ç®å½å¯¼èª\n\n[TOC]\n\n[TOC=2] // æåH1å°H2çåå®¹æ¾ç¤º [TOC=3] // æåH1å°H3çåå®¹æ¾ç¤º [TOC=2,3] // æåH2å°H3çåå®¹æ¾ç¤º\n\næ³¨æï¼[TOC] åé¢å¿é¡»å¢å ä¸ä¸ªç©ºè¡æè½æ­£ç¡®æ¾ç¤ºç®å½ç»æ\n\n\n# å­ä½\n\næä½æå­ æä½æå­ ç²ä½æå­ ç²ä½æå­ ç²æä½æå­ ç²æä½æå­ ==èæ¯é«äº®== æ­¤å¤è¢«å é¤\n\næ ¼å¼åææ¬ å ç² å ç² å°å·ææ¬ å¾æ å¾æ ä¸åçº¿ ä¸åçº¿ å é¤çº¿ å é¤çº¿ AAAä¸æ  AAAä¸æ  é«äº® å¸¦ä¸åçº¿ææ¬\n\n\n# åéçº¿\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n\n# åè¡¨\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\nåè¡¨åµå¥åªéå¨å­åè¡¨çéé¡¹åæ·»å åä¸ªç©ºæ ¼å³å¯ï¼\n\n 1. ç¬¬ä¸é¡¹ï¼\n    * ç¬¬ä¸é¡¹åµå¥çç¬¬ä¸ä¸ªåç´ \n    * ç¬¬ä¸é¡¹åµå¥çç¬¬äºä¸ªåç´ \n 2. ç¬¬äºé¡¹ï¼\n    * ç¬¬äºé¡¹åµå¥çç¬¬ä¸ä¸ªåç´ \n    * ç¬¬äºé¡¹åµå¥çç¬¬äºä¸ªåç´ \n\n\n# åºå\n\n> åºåå¼ç¨\n\n> æå¤å±\n> \n> > ç¬¬ä¸å±åµå¥\n> > \n> > > ç¬¬äºå±åµå¥\n\n> åºåä¸­ä½¿ç¨åè¡¨\n> \n>  1. ç¬¬ä¸é¡¹\n>  2. ç¬¬äºé¡¹\n> \n>  * ç¬¬ä¸é¡¹\n>  * ç¬¬äºé¡¹\n>  * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n   \n   > Markdownæç¨ å­¦çä¸ä»æ¯ææ¯æ´æ¯æ¢¦æ³\n\n * ç¬¬äºé¡¹\n\n\n# ä»£ç æ¡\n\na = 1\n\nThere is a literal backtick (`) here.\n\n//åä¸ªç©ºæ ¼ç¼©è¿è¡¨ç¤ºä»£ç å\nimport os\nprint("hello world")\ndef show_time():\nreturn time.time()\n\n\nimport os\nprint("hello world")\ndef show_time():\nreturn time.time()\n\n\n1\n2\n3\n4\n\n\n\n# é¾æ¥\n\nè¿æ¯ä¸ä¸ªé¾æ¥ æ°æµªæ°é»\n\nhttps://news.sina.com.cn/\n\n\n# å¾ç\n\n\n\n\n# è¡¨æ ¼\n\n-: è®¾ç½®åå®¹ææ é¢æ å³å¯¹é½ :- è®¾ç½®åå®¹ææ é¢æ å·¦å¯¹é½ :-: è®¾ç½®åå®¹ææ é¢æ å±ä¸­å¯¹é½\n\nå·¦å¯¹é½     å±ä¸­å¯¹é½    å³å¯¹é½\nååæ ¼11   ååæ ¼12   ååæ ¼13\nååæ ¼21   ååæ ¼22   ååæ ¼23\n\n\n# æ¢è¡\n\nå¨è¡çæ«å°¾æ·»å è³å°ä¸¤ä¸ªç©ºæ ¼ï¼ç¶ååæ¥Enterå¦èµ·ä¸è¡ï¼ ç¬¬2ç§æ¹å¼æ¯å¨éè¦æ¢è¡çä¸¤è¡åå®¹ä¹é´ç©ºä¸è¡ï¼ ç¬¬3ç§æ¹å¼æ¯å¨éè¦æ¢è¡çåå®¹æ«å°¾æ·»å ä¸ä¸ªæ¢è¡æ ç­¾ï¼ä¹å°±æ¯\næ ç­¾ã\n\n\n# æµç¨å¾\n\n\n# æ°å­¦å¬å¼\n\næ¨èä¸ä¸ªå¸¸ç¨çæ°å­¦å¬å¼å¨çº¿ç¼è¯ç½ç«ï¼https://www.latexlive.com\n\n\n# Todo List\n\n * [ ] å¾åäºé¡¹\n * [x] å·²å®æçå¾åäºé¡¹\n\n\n# èæ³¨\n\nå¨ææ¡£æ«å°¾åä¸[+^+æ°å­+]:+æå­åå®¹ å£°æä¸ä¸ªèæ³¨ ç¶åå°±è·æç®å¼ç¨ä¸æ ·ï¼å¨è¦å¼ç¨è¯¥èæ³¨çæå­åæå¥[+^+æ°å­+]å³å¯\n\nè¯¥æ¹æ³æ ¹æ®å®éªè¯æææ[^1] [^1]:æç« é¾æ¥',normalizedContent:'# ç®å½å¯¼èª\n\n[toc]\n\n[toc=2] // æåh1å°h2çåå®¹æ¾ç¤º [toc=3] // æåh1å°h3çåå®¹æ¾ç¤º [toc=2,3] // æåh2å°h3çåå®¹æ¾ç¤º\n\næ³¨æï¼[toc] åé¢å¿é¡»å¢å ä¸ä¸ªç©ºè¡æè½æ­£ç¡®æ¾ç¤ºç®å½ç»æ\n\n\n# å­ä½\n\næä½æå­ æä½æå­ ç²ä½æå­ ç²ä½æå­ ç²æä½æå­ ç²æä½æå­ ==èæ¯é«äº®== æ­¤å¤è¢«å é¤\n\næ ¼å¼åææ¬ å ç² å ç² å°å·ææ¬ å¾æ å¾æ ä¸åçº¿ ä¸åçº¿ å é¤çº¿ å é¤çº¿ aaaä¸æ  aaaä¸æ  é«äº® å¸¦ä¸åçº¿ææ¬\n\n\n# åéçº¿\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n----------------------------------------\n\n\n# åè¡¨\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n * ç¬¬äºé¡¹\n * ç¬¬ä¸é¡¹\n\nåè¡¨åµå¥åªéå¨å­åè¡¨çéé¡¹åæ·»å åä¸ªç©ºæ ¼å³å¯ï¼\n\n 1. ç¬¬ä¸é¡¹ï¼\n    * ç¬¬ä¸é¡¹åµå¥çç¬¬ä¸ä¸ªåç´ \n    * ç¬¬ä¸é¡¹åµå¥çç¬¬äºä¸ªåç´ \n 2. ç¬¬äºé¡¹ï¼\n    * ç¬¬äºé¡¹åµå¥çç¬¬ä¸ä¸ªåç´ \n    * ç¬¬äºé¡¹åµå¥çç¬¬äºä¸ªåç´ \n\n\n# åºå\n\n> åºåå¼ç¨\n\n> æå¤å±\n> \n> > ç¬¬ä¸å±åµå¥\n> > \n> > > ç¬¬äºå±åµå¥\n\n> åºåä¸­ä½¿ç¨åè¡¨\n> \n>  1. ç¬¬ä¸é¡¹\n>  2. ç¬¬äºé¡¹\n> \n>  * ç¬¬ä¸é¡¹\n>  * ç¬¬äºé¡¹\n>  * ç¬¬ä¸é¡¹\n\n * ç¬¬ä¸é¡¹\n   \n   > markdownæç¨ å­¦çä¸ä»æ¯ææ¯æ´æ¯æ¢¦æ³\n\n * ç¬¬äºé¡¹\n\n\n# ä»£ç æ¡\n\na = 1\n\nthere is a literal backtick (`) here.\n\n//åä¸ªç©ºæ ¼ç¼©è¿è¡¨ç¤ºä»£ç å\nimport os\nprint("hello world")\ndef show_time():\nreturn time.time()\n\n\nimport os\nprint("hello world")\ndef show_time():\nreturn time.time()\n\n\n1\n2\n3\n4\n\n\n\n# é¾æ¥\n\nè¿æ¯ä¸ä¸ªé¾æ¥ æ°æµªæ°é»\n\nhttps://news.sina.com.cn/\n\n\n# å¾ç\n\n\n\n\n# è¡¨æ ¼\n\n-: è®¾ç½®åå®¹ææ é¢æ å³å¯¹é½ :- è®¾ç½®åå®¹ææ é¢æ å·¦å¯¹é½ :-: è®¾ç½®åå®¹ææ é¢æ å±ä¸­å¯¹é½\n\nå·¦å¯¹é½     å±ä¸­å¯¹é½    å³å¯¹é½\nååæ ¼11   ååæ ¼12   ååæ ¼13\nååæ ¼21   ååæ ¼22   ååæ ¼23\n\n\n# æ¢è¡\n\nå¨è¡çæ«å°¾æ·»å è³å°ä¸¤ä¸ªç©ºæ ¼ï¼ç¶ååæ¥enterå¦èµ·ä¸è¡ï¼ ç¬¬2ç§æ¹å¼æ¯å¨éè¦æ¢è¡çä¸¤è¡åå®¹ä¹é´ç©ºä¸è¡ï¼ ç¬¬3ç§æ¹å¼æ¯å¨éè¦æ¢è¡çåå®¹æ«å°¾æ·»å ä¸ä¸ªæ¢è¡æ ç­¾ï¼ä¹å°±æ¯\næ ç­¾ã\n\n\n# æµç¨å¾\n\n\n# æ°å­¦å¬å¼\n\næ¨èä¸ä¸ªå¸¸ç¨çæ°å­¦å¬å¼å¨çº¿ç¼è¯ç½ç«ï¼https://www.latexlive.com\n\n\n# todo list\n\n * [ ] å¾åäºé¡¹\n * [x] å·²å®æçå¾åäºé¡¹\n\n\n# èæ³¨\n\nå¨ææ¡£æ«å°¾åä¸[+^+æ°å­+]:+æå­åå®¹ å£°æä¸ä¸ªèæ³¨ ç¶åå°±è·æç®å¼ç¨ä¸æ ·ï¼å¨è¦å¼ç¨è¯¥èæ³¨çæå­åæå¥[+^+æ°å­+]å³å¯\n\nè¯¥æ¹æ³æ ¹æ®å®éªè¯æææ[^1] [^1]:æç« é¾æ¥',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"2022è¸©åè®°å½",frontmatter:{title:"2022è¸©åè®°å½",date:"2022-01-02T09:51:37.000Z",permalink:"/pages/2022ckjl/",categories:["ææ¯æè°","å¸¸ç¨æ»ç»"],tags:["è¸©å"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"2022è¸©åè®°å½"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"},{property:"og:type",content:"article"},{property:"og:title",content:"2022è¸©åè®°å½"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-01-02T09:51:37.000Z"},{property:"article:tag",content:"è¸©å"},{itemprop:"name",content:"2022è¸©åè®°å½"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html",relativePath:"01.ææ¯æè°/02.è¸©åè®°å½/01.2022è¸©åè®°å½.md",key:"v-169b12eb",path:"/pages/2022ckjl/",headers:[{level:2,title:"cordnsååè§£æalpineéåä¸å¼å®¹é®é¢",slug:"cordnsååè§£æalpineéåä¸å¼å®¹é®é¢",normalizedTitle:"cordnsååè§£æalpineéåä¸å¼å®¹é®é¢",charIndex:2},{level:2,title:"kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å",slug:"kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å",normalizedTitle:"kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å",charIndex:353},{level:2,title:"containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥",slug:"containerdéå¯ä¸å½±åå®¹å¨è¿ç¨-dockerä¹å¯ä»¥",normalizedTitle:"containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥",charIndex:414},{level:2,title:"éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢",slug:"éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢",normalizedTitle:"éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢",charIndex:448},{level:2,title:"golang mkdir 777 æéé®é¢",slug:"golang-mkdir-777-æéé®é¢",normalizedTitle:"golang mkdir 777 æéé®é¢",charIndex:528},{level:2,title:"k8s nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed podä¸æ­åå»ºï¼å¦cpu/mem/gpuèµæºä¸è¶³",slug:"k8s-nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed-podä¸æ­åå»º-å¦cpu-mem-gpuèµæºä¸è¶³",normalizedTitle:"k8s nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed podä¸æ­åå»ºï¼å¦cpu/mem/gpuèµæºä¸è¶³",charIndex:635}],headersStr:"cordnsååè§£æalpineéåä¸å¼å®¹é®é¢ kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥ éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢ golang mkdir 777 æéé®é¢ k8s nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed podä¸æ­åå»ºï¼å¦cpu/mem/gpuèµæºä¸è¶³",content:"# cordnsååè§£æalpineéåä¸å¼å®¹é®é¢\n\n> 20220622\n\nalpineçæ¬å¼å®¹æ§é®é¢ä¼å¯¼è´backend podécordnsè§£æå¤±è´¥ dockeréåæ¯ä½¿ç¨alpineä½ä¸ºåºåï¼å¦æçæ¬ä¸å¹éä¼å¯¼è´ååè§£æé®é¢ https://stackoverflow.com/questions/65181012/does-alpine-have-known-dns-issue-within-kubernetes https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/dns-debugging-resolution/ https://github.com/kubernetes-sigs/kind/issues/2418\n\n\n# kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å\n\néå¯æå¡å¨ä¼å¯¼è´kata-deployèµ·ä¸æ¥\n\n\n# containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥\n\n\n# éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢\n\nhttps://github.com/containerd/containerd/issues/5597\n\n\n# golang mkdir 777 æéé®é¢\n\nhttps://github.com/golang/go/issues/15210 https://zhuanlan.zhihu.com/p/33692995\n\n\n# k8s nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed podä¸æ­åå»ºï¼å¦cpu/mem/gpuèµæºä¸è¶³\n\npod.spec.nodeNameå°Podç´æ¥è°åº¦å°æå®çNodeèç¹ä¸ï¼ä¼ãè·³è¿Schedulerçè°åº¦ç­ç¥ãï¼è¯¥å¹éè§åæ¯ãå¼ºå¶ãå¹éãå¯ä»¥è¶è¿Taintsæ±¡ç¹è¿è¡è°åº¦ã\n\nNode didn't have enough resource: cpu, requested: 100000, used: 1440, capacity: 7800\n\nEvents:\n  Type     Reason    Age    From             Message\n  ----     ------    ----   ----             -------\n  Warning  OutOfcpu  4m19s  kubelet, tztest  Node didn't have enough resource: cpu, requested: 100000, used: 1440, capacity: 7800\n\n[root@tztest kbuser]# kubectl get pod -n hff\nNAME                        READY   STATUS     RESTARTS   AGE\nhff-sts-0                   1/1     Running    0          53d\nweb-demo-799fccc7dd-295bk   0/1     OutOfcpu   0          7s\nweb-demo-799fccc7dd-7z6fm   0/1     OutOfcpu   0          11s\nweb-demo-799fccc7dd-n6jzz   0/1     OutOfcpu   0          5s\nweb-demo-799fccc7dd-ph4vt   0/1     OutOfcpu   0          18s\nweb-demo-799fccc7dd-rqhk5   0/1     OutOfcpu   0          3s\nweb-demo-799fccc7dd-t74r7   0/1     OutOfcpu   0          13s\nweb-demo-799fccc7dd-tqhv5   0/1     OutOfcpu   0          9s\nweb-demo-799fccc7dd-xcldr   0/1     OutOfcpu   0          15s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n",normalizedContent:"# cordnsååè§£æalpineéåä¸å¼å®¹é®é¢\n\n> 20220622\n\nalpineçæ¬å¼å®¹æ§é®é¢ä¼å¯¼è´backend podécordnsè§£æå¤±è´¥ dockeréåæ¯ä½¿ç¨alpineä½ä¸ºåºåï¼å¦æçæ¬ä¸å¹éä¼å¯¼è´ååè§£æé®é¢ https://stackoverflow.com/questions/65181012/does-alpine-have-known-dns-issue-within-kubernetes https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/dns-debugging-resolution/ https://github.com/kubernetes-sigs/kind/issues/2418\n\n\n# kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å\n\néå¯æå¡å¨ä¼å¯¼è´kata-deployèµ·ä¸æ¥\n\n\n# containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥\n\n\n# éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢\n\nhttps://github.com/containerd/containerd/issues/5597\n\n\n# golang mkdir 777 æéé®é¢\n\nhttps://github.com/golang/go/issues/15210 https://zhuanlan.zhihu.com/p/33692995\n\n\n# k8s nodenameæå®èç¹æ¶èµæºä¸è¶³å¯¼è´failed podä¸æ­åå»ºï¼å¦cpu/mem/gpuèµæºä¸è¶³\n\npod.spec.nodenameå°podç´æ¥è°åº¦å°æå®çnodeèç¹ä¸ï¼ä¼ãè·³è¿schedulerçè°åº¦ç­ç¥ãï¼è¯¥å¹éè§åæ¯ãå¼ºå¶ãå¹éãå¯ä»¥è¶è¿taintsæ±¡ç¹è¿è¡è°åº¦ã\n\nnode didn't have enough resource: cpu, requested: 100000, used: 1440, capacity: 7800\n\nevents:\n  type     reason    age    from             message\n  ----     ------    ----   ----             -------\n  warning  outofcpu  4m19s  kubelet, tztest  node didn't have enough resource: cpu, requested: 100000, used: 1440, capacity: 7800\n\n[root@tztest kbuser]# kubectl get pod -n hff\nname                        ready   status     restarts   age\nhff-sts-0                   1/1     running    0          53d\nweb-demo-799fccc7dd-295bk   0/1     outofcpu   0          7s\nweb-demo-799fccc7dd-7z6fm   0/1     outofcpu   0          11s\nweb-demo-799fccc7dd-n6jzz   0/1     outofcpu   0          5s\nweb-demo-799fccc7dd-ph4vt   0/1     outofcpu   0          18s\nweb-demo-799fccc7dd-rqhk5   0/1     outofcpu   0          3s\nweb-demo-799fccc7dd-t74r7   0/1     outofcpu   0          13s\nweb-demo-799fccc7dd-tqhv5   0/1     outofcpu   0          9s\nweb-demo-799fccc7dd-xcldr   0/1     outofcpu   0          15s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"k8sç½ç»",frontmatter:{title:"k8sç½ç»",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s03/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã",meta:[{name:"twitter:title",content:"k8sç½ç»"},{name:"twitter:description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8sç½ç»"},{property:"og:description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"k8sç½ç»"},{itemprop:"description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html",relativePath:"01.ææ¯æè°/03.kubernetes/03.k8sç½ç».md",key:"v-be755618",path:"/pages/k8s03/",headers:[{level:2,title:"dockerç½ç»",slug:"dockerç½ç»",normalizedTitle:"dockerç½ç»",charIndex:2},{level:2,title:"k8sç½ç»",slug:"k8sç½ç»",normalizedTitle:"k8sç½ç»",charIndex:489},{level:3,title:"docker0:",slug:"docker0",normalizedTitle:"docker0:",charIndex:499},{level:3,title:"calicoç½ç»",slug:"calicoç½ç»",normalizedTitle:"calicoç½ç»",charIndex:1130},{level:4,title:"Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã",slug:"calicoä¸»è¦ç±felixãorchestrator-pluginãetcdãbirdåbgp-router-reflectorç­ç»ä»¶ç»æã",normalizedTitle:"calicoä¸»è¦ç±felixãorchestrator pluginãetcdãbirdåbgp router reflectorç­ç»ä»¶ç»æã",charIndex:1142},{level:4,title:"BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",slug:"bgp-pod-1è·¨èç¹è®¿é®pod-2å¤§è´æµç¨å¦ä¸",normalizedTitle:"bgp: pod 1è·¨èç¹è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼",charIndex:1444},{level:4,title:"Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼",slug:"calico-route-reflectoræ¨¡å¼-rr-è·¯ç±å¨åå°",normalizedTitle:"calico route reflectoræ¨¡å¼ï¼rrï¼ï¼è·¯ç±å¨åå°ï¼",charIndex:1677},{level:4,title:"IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",slug:"ipip-pod-1è®¿é®pod-2å¤§è´æµç¨å¦ä¸",normalizedTitle:"ipip: pod 1è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼",charIndex:1763}],headersStr:"dockerç½ç» k8sç½ç» docker0: calicoç½ç» Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼ Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼ IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",content:"# dockerç½ç»\n\nå®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã\n\ndocker0ï¼Dockeræå¡ä¼å¨å®æå¨çæºå¨ä¸åå»ºä¸ä¸ªåä¸ºdocker0çç½æ¡¥ã docker0çIPå°åä¸º172.17.0.1ï¼å­ç½æ©ç ä¸º255.255.0.0ã\n\n[root@rqy-k8s-2 kbuser]# docker network ls NETWORK ID NAME DRIVER SCOPE e29e51f3f12a bridge bridge local b70c41f7568e host host local 3a890954cce6 none null local\n\nDockerå®¹å¨å¨å¯å¨æ¶ï¼å¦ææ²¡ææ¾å¼æå®å å¥ä»»ä½ç½ç»ï¼å°±ä¼é»è®¤å å¥å°åä¸ºbridgeçç½ç»ãèè¿ä¸ªbridgeç½ç»å°±æ¯åºäºdocker0å®ç°çã å å¥hostç½ç»çå®¹å¨ï¼å¯ä»¥å®ç°åDocker daemonå®æ¤è¿ç¨ï¼ä¹å°±æ¯Dockeræå¡ï¼æå¨çå®¿ä¸»æºç½ç»ç¯å¢è¿è¡ç´æ¥éä¿¡ noneç½ç»ï¼åè¡¨ç¤ºå®¹å¨å¨å¯å¨æ¶ä¸å¸¦ä»»ä½ç½ç»è®¾å¤ã\n\n\n# k8sç½ç»\n\n\n# docker0:\n\n 1. åä¸Podåçå®¹å¨é´éä¿¡: å ä¸ºpauseå®¹å¨æä¾podåç½ç»å±äº«ï¼æä»¥å®¹å¨ç´æ¥å¯ä»¥ä½¿ç¨localhost(lo)è®¿é®å¶ä»å®¹å¨\n\n 2. åPodå½¼æ­¤ä¹é´çéä¿¡(ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢, ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸) 1)ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢: éè¿dockeré»è®¤çdockerç½æ¡¥äºè¿å®¹å¨(docker0), ifconfig æ¥äºdocker0 2)ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸: éè¿CNIæä»¶å®ç°ï¼eg: flannel,calico\n\n 3. Podä¸Serviceé´çéä¿¡ Serviceåéçipå«cluster ipæ¯ä¸ä¸ªèæipï¼ç¸å¯¹åºå®ï¼é¤éå é¤serviceï¼ï¼è¿ä¸ªipåªè½å¨k8séç¾¤åé¨ä½¿ç¨ï¼ å¦æserviceéè¦å¯¹å¤æä¾ï¼åªè½ä½¿ç¨Nodeportæ¹å¼æ å°å°ä¸»æºä¸ï¼ä½¿ç¨ä¸»æºçipåç«¯å£å¯¹å¤æä¾æå¡ã èç¹ä¸é¢æä¸ªkube-proxyè¿ç¨ï¼è¿ä¸ªè¿ç¨ä»master apiserverè·åä¿¡æ¯ï¼æç¥serviceåendpointçåå»ºï¼ç¶ååä¸¤ä¸ªäºï¼ 1.ä¸ºæ¯ä¸ªservice å¨éç¾¤ä¸­æ¯ä¸ªèç¹ä¸é¢åå»ºä¸ä¸ªéæºç«¯å£ï¼ä»»ä½è¯¥ç«¯å£ä¸é¢çè¿æ¥ä¼ä»£çå°ç¸åºçpod 2.éç¾¤ä¸­æ¯ä¸ªèç¹å®è£iptables/ipvsè§åï¼ç¨äºclusterip + portè·¯ç±å°ä¸ä¸æ­¥å®ä¹çéæºç«¯å£ä¸é¢ï¼ æä»¥éç¾¤ä¸­æ¯ä¸ªnodeä¸é¢é½æserviceçè½¬åè§å:iptables -L -n -t filter\n\n\n# calicoç½ç»\n\n# Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã\n\n * Felixï¼Calico Agentï¼è¿è¡äºæ¯ä¸ªèç¹ã\n * Orchestrator Plugiï¼ç¼æç³»ç»ï¼å¦ Kubernetes ã OpenStack ç­ï¼ä»¥å° Calicoæ´åè¿ç³»ç»ä¸­çæä»¶ï¼ä¾å¦KubernetesçCNIã\n * etcdï¼æä¹å­å¨Calicoæ°æ®çå­å¨ç®¡çç³»ç»ã\n * BIRDï¼ç¨äºååè·¯ç±ä¿¡æ¯çBGPå®¢æ·ç«¯ã\n * BGP Route Reflectorï¼BGPè·¯ç±åå°å¨ï¼å¯éç»ä»¶ï¼ç¨äºè¾å¤§è§æ¨¡çç½ç»åºæ¯ã\n\n# BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾Veth Pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. å®¿ä¸»æºæ ¹æ®è·¯ç±è§åï¼å°æ°æ®åè½¬åç»ä¸ä¸è·³ï¼ç½å³ï¼ï¼\n 3. å°è¾¾Node2ï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã è¿éææ ¸å¿çâä¸ä¸è·³âè·¯ç±è§åï¼å°±æ¯ç±CalicoçFelixè¿ç¨è´è´£ç»´æ¤çãè¿äºè·¯ç±è§åä¿¡æ¯ï¼åæ¯éè¿BGP Clientä¹å°±æ¯BIRDç»ä»¶ï¼ä½¿ç¨BGPåè®®ä¼ è¾èæ¥çã\n\n# Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼\n\nCalicoç»´æ¤çç½ç»å¨é»è®¤æ¯ï¼Node-to-Node Meshï¼å¨äºèæ¨¡å¼ï¼meshï¼\n\n# IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾Veth Pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. è¿å¥IPé§éè®¾å¤ï¼tunl0ï¼ï¼ç±Linuxåæ ¸IPIPé©±å¨å°è£å¨å®¿ä¸»æºç½ç»çIPåä¸­ï¼æ°çIPåç®çå°ä¹æ¯åIPåçä¸ä¸è·³å°åï¼å³192.168.31.63ï¼ï¼è¿æ ·ï¼å°±æäºNode1å°Node2çæ°æ®åï¼\n 3. æ°æ®åç»è¿è·¯ç±å¨ä¸å±è½¬åå°Node2ï¼\n 4. Node2æ¶å°æ°æ®ååï¼ç½ç»åè®®æ ä¼ä½¿ç¨IPIPé©±å¨è¿è¡è§£åï¼ä»ä¸­æ¿å°åå§IPåï¼\n 5. ç¶åæ ¹æ®è·¯ç±è§åï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã",normalizedContent:"# dockerç½ç»\n\nå®¹å¨ç½ç»åç«¯äº docker çç½ç»ãdocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç ipã\n\ndocker0ï¼dockeræå¡ä¼å¨å®æå¨çæºå¨ä¸åå»ºä¸ä¸ªåä¸ºdocker0çç½æ¡¥ã docker0çipå°åä¸º172.17.0.1ï¼å­ç½æ©ç ä¸º255.255.0.0ã\n\n[root@rqy-k8s-2 kbuser]# docker network ls network id name driver scope e29e51f3f12a bridge bridge local b70c41f7568e host host local 3a890954cce6 none null local\n\ndockerå®¹å¨å¨å¯å¨æ¶ï¼å¦ææ²¡ææ¾å¼æå®å å¥ä»»ä½ç½ç»ï¼å°±ä¼é»è®¤å å¥å°åä¸ºbridgeçç½ç»ãèè¿ä¸ªbridgeç½ç»å°±æ¯åºäºdocker0å®ç°çã å å¥hostç½ç»çå®¹å¨ï¼å¯ä»¥å®ç°ådocker daemonå®æ¤è¿ç¨ï¼ä¹å°±æ¯dockeræå¡ï¼æå¨çå®¿ä¸»æºç½ç»ç¯å¢è¿è¡ç´æ¥éä¿¡ noneç½ç»ï¼åè¡¨ç¤ºå®¹å¨å¨å¯å¨æ¶ä¸å¸¦ä»»ä½ç½ç»è®¾å¤ã\n\n\n# k8sç½ç»\n\n\n# docker0:\n\n 1. åä¸podåçå®¹å¨é´éä¿¡: å ä¸ºpauseå®¹å¨æä¾podåç½ç»å±äº«ï¼æä»¥å®¹å¨ç´æ¥å¯ä»¥ä½¿ç¨localhost(lo)è®¿é®å¶ä»å®¹å¨\n\n 2. åpodå½¼æ­¤ä¹é´çéä¿¡(ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢, ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸) 1)ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢: éè¿dockeré»è®¤çdockerç½æ¡¥äºè¿å®¹å¨(docker0), ifconfig æ¥äºdocker0 2)ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸: éè¿cniæä»¶å®ç°ï¼eg: flannel,calico\n\n 3. podä¸serviceé´çéä¿¡ serviceåéçipå«cluster ipæ¯ä¸ä¸ªèæipï¼ç¸å¯¹åºå®ï¼é¤éå é¤serviceï¼ï¼è¿ä¸ªipåªè½å¨k8séç¾¤åé¨ä½¿ç¨ï¼ å¦æserviceéè¦å¯¹å¤æä¾ï¼åªè½ä½¿ç¨nodeportæ¹å¼æ å°å°ä¸»æºä¸ï¼ä½¿ç¨ä¸»æºçipåç«¯å£å¯¹å¤æä¾æå¡ã èç¹ä¸é¢æä¸ªkube-proxyè¿ç¨ï¼è¿ä¸ªè¿ç¨ä»master apiserverè·åä¿¡æ¯ï¼æç¥serviceåendpointçåå»ºï¼ç¶ååä¸¤ä¸ªäºï¼ 1.ä¸ºæ¯ä¸ªservice å¨éç¾¤ä¸­æ¯ä¸ªèç¹ä¸é¢åå»ºä¸ä¸ªéæºç«¯å£ï¼ä»»ä½è¯¥ç«¯å£ä¸é¢çè¿æ¥ä¼ä»£çå°ç¸åºçpod 2.éç¾¤ä¸­æ¯ä¸ªèç¹å®è£iptables/ipvsè§åï¼ç¨äºclusterip + portè·¯ç±å°ä¸ä¸æ­¥å®ä¹çéæºç«¯å£ä¸é¢ï¼ æä»¥éç¾¤ä¸­æ¯ä¸ªnodeä¸é¢é½æserviceçè½¬åè§å:iptables -l -n -t filter\n\n\n# calicoç½ç»\n\n# calicoä¸»è¦ç±felixãorchestrator pluginãetcdãbirdåbgp router reflectorç­ç»ä»¶ç»æã\n\n * felixï¼calico agentï¼è¿è¡äºæ¯ä¸ªèç¹ã\n * orchestrator plugiï¼ç¼æç³»ç»ï¼å¦ kubernetes ã openstack ç­ï¼ä»¥å° calicoæ´åè¿ç³»ç»ä¸­çæä»¶ï¼ä¾å¦kubernetesçcniã\n * etcdï¼æä¹å­å¨calicoæ°æ®çå­å¨ç®¡çç³»ç»ã\n * birdï¼ç¨äºååè·¯ç±ä¿¡æ¯çbgpå®¢æ·ç«¯ã\n * bgp route reflectorï¼bgpè·¯ç±åå°å¨ï¼å¯éç»ä»¶ï¼ç¨äºè¾å¤§è§æ¨¡çç½ç»åºæ¯ã\n\n# bgp: pod 1è·¨èç¹è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾veth pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. å®¿ä¸»æºæ ¹æ®è·¯ç±è§åï¼å°æ°æ®åè½¬åç»ä¸ä¸è·³ï¼ç½å³ï¼ï¼\n 3. å°è¾¾node2ï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã è¿éææ ¸å¿çâä¸ä¸è·³âè·¯ç±è§åï¼å°±æ¯ç±calicoçfelixè¿ç¨è´è´£ç»´æ¤çãè¿äºè·¯ç±è§åä¿¡æ¯ï¼åæ¯éè¿bgp clientä¹å°±æ¯birdç»ä»¶ï¼ä½¿ç¨bgpåè®®ä¼ è¾èæ¥çã\n\n# calico route reflectoræ¨¡å¼ï¼rrï¼ï¼è·¯ç±å¨åå°ï¼\n\ncalicoç»´æ¤çç½ç»å¨é»è®¤æ¯ï¼node-to-node meshï¼å¨äºèæ¨¡å¼ï¼meshï¼\n\n# ipip: pod 1è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾veth pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. è¿å¥ipé§éè®¾å¤ï¼tunl0ï¼ï¼ç±linuxåæ ¸ipipé©±å¨å°è£å¨å®¿ä¸»æºç½ç»çipåä¸­ï¼æ°çipåç®çå°ä¹æ¯åipåçä¸ä¸è·³å°åï¼å³192.168.31.63ï¼ï¼è¿æ ·ï¼å°±æäºnode1å°node2çæ°æ®åï¼\n 3. æ°æ®åç»è¿è·¯ç±å¨ä¸å±è½¬åå°node2ï¼\n 4. node2æ¶å°æ°æ®ååï¼ç½ç»åè®®æ ä¼ä½¿ç¨ipipé©±å¨è¿è¡è§£åï¼ä»ä¸­æ¿å°åå§ipåï¼\n 5. ç¶åæ ¹æ®è·¯ç±è§åï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"k8så­å¨",frontmatter:{title:"k8så­å¨",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s02/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"dockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­",meta:[{name:"twitter:title",content:"k8så­å¨"},{name:"twitter:description",content:"dockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8så­å¨"},{property:"og:description",content:"dockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"k8så­å¨"},{itemprop:"description",content:"dockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html",relativePath:"01.ææ¯æè°/03.kubernetes/02.k8så­å¨.md",key:"v-132121e4",path:"/pages/k8s02/",headers:[{level:2,title:"Docker éåå­å¨åç",slug:"docker-éåå­å¨åç",normalizedTitle:"docker éåå­å¨åç",charIndex:2},{level:3,title:"overlay2",slug:"overlay2",normalizedTitle:"overlay2",charIndex:66},{level:4,title:"æ°å¢ä¸ä¸ªéå",slug:"æ°å¢ä¸ä¸ªéå",normalizedTitle:"æ°å¢ä¸ä¸ªéå",charIndex:1476},{level:4,title:"åæ¶å¤å¶",slug:"åæ¶å¤å¶",normalizedTitle:"åæ¶å¤å¶",charIndex:4157},{level:3,title:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",slug:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",normalizedTitle:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",charIndex:4386},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:4920}],headersStr:"Docker éåå­å¨åç overlay2 æ°å¢ä¸ä¸ªéå åæ¶å¤å¶ æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´ åèèµæ",content:'# Docker éåå­å¨åç\n\ndockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­\n\n\n# overlay2\n\nLinux åæ ¸å¨ 4.0 çæ¬å¯¹overlayåäºå¾å¤å¿è¦çæ¹è¿ï¼æ­¤æ¶ç OverlayFS è¢«ç§°ä¹ä¸ºoverlay2\n\n * è¦æ³ä½¿ç¨overlay2ï¼Docker çæ¬å¿é¡»é«äº 17.06.02ã\n * å¦æä½ çæä½ç³»ç»æ¯ RHEL æ CentOSï¼Linux åæ ¸çæ¬å¿é¡»ä½¿ç¨ 3.10.0-514 æèæ´é«çæ¬ï¼å¶ä» Linux åè¡ççåæ ¸çæ¬å¿é¡»é«äº 4.0ï¼ä¾å¦ Ubuntu æ Debianï¼\n * overlay2æå¥½æ­é xfs æä»¶ç³»ç»ä½¿ç¨ï¼å¹¶ä¸ä½¿ç¨ xfs ä½ä¸ºåºå±æä»¶ç³»ç»æ¶ï¼d_typeå¿é¡»å¼å¯ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤éªè¯ d_type æ¯å¦å¼å¯ï¼\n\n$ xfs_info /var/lib/docker | grep ftype\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\n\n\n1\n2\n\n\nverlay2 æ¯è¿æ ·å¨å­æä»¶çï¼ overlay2å°éåå±åå®¹å¨å±é½æ¾å¨åç¬çç®å½ï¼å¹¶ä¸æå¯ä¸ IDï¼æ¯ä¸å±ä»å­å¨åçååçæä»¶ï¼æç»ä½¿ç¨èåæè½½ææ¯å°å®¹å¨å±åéåå±çæææä»¶ç»ä¸æè½½å°å®¹å¨ä¸­ï¼ä½¿å¾å®¹å¨ä¸­çå°å®æ´çç³»ç»æä»¶ã\n\n[root@localhost ~]# docker info | grep Storage\n Storage Driver: overlay2\n\n\n1\n2\n\n\nOverlayé©±å¨çéååªæä¸¤å±ï¼ä¸ä¸ªupperæä»¶ç³»ç»åä¸ä¸ªloweræä»¶ç³»ç»ï¼åå«ä»£è¡¨Dockerçéåå±åå®¹å¨å±\n\nmergedå±æ¯lowerå±åupperå±çç»ä¸è§å¾\n\nå½éè¦ä¿®æ¹ä¸ä¸ªæä»¶æ¶ï¼ä½¿ç¨CoWå°æä»¶ä»åªè¯»çlowerå¤å¶å°å¯åçupperè¿è¡ä¿®æ¹ï¼ç»æä¹ä¿å­å¨upperå±ã\n\nå¨Dockerä¸­ï¼åºä¸çåªè¯»å±å°±æ¯imageï¼å¯åå±å°±æ¯Containerãvoerlay2é©±å¨å­å¨ä½ç½®ä¸º/var/lib/docker/ï¼/app/dockerï¼\n\n[root@tztest kbuser]# ls /app/docker/\nbuilder  buildkit  containerd  containers  image  kubelet  network  overlay2  plugins  runtimes  swarm  tmp  trust  volumes\n[root@tztest kbuser]# ls /app/docker/overlay2/7e32a486c4dc7a52d0685b7fb3e4f6fb4eb7b9ae963f0820285c3659e3f361ca\ncommitted  diff  link  lower  work\n[root@tztest kbuser]# ls /app/docker/image/overlay2\ndistribution  imagedb  layerdb  repositories.json\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n * overlay2ç®å½ï¼å­å¨éååå®¹å¨çå±ä¿¡æ¯\n\n * imageç®å½ï¼å­å¨éååç¸å³ä¿¡æ¯\n\n * repositories.jsonå°±æ¯å­å¨éåä¿¡æ¯ï¼ä¸»è¦æ¯nameåimage idçå¯¹åºï¼digeståimage idçå¯¹åº\n\n# æ°å¢ä¸ä¸ªéå\n\n[root@tztest kbuser]# docker images | grep web-demo\nweb-demo_c7cac94                    dev-1648826415118                          df2b573855e0        12 days ago         17.7MB\n[root@tztest kbuser]# ls /app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\ncommitted  diff  link  lower  work\n\nï¼å¯è½æ°å¢å¤ä¸ªéåå±ç®å½æä»¶ï¼\n\n\n//åè®¸ä¸ä¸ªå®¹å¨\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n[root@tztest kbuser]#  docker ps | grep hfftest\n1e73601f56d9        df2b573855e0                                          "sh"                     34 seconds ago      Up 32 seconds       80/tcp, 8080/tcp         hfftest\n\n\n[root@tztest kbuser]# ls /app/docker/overlay2/ -tl\næ»ç¨é 3900\ndrwx------ 5 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0\ndrwx------ 4 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0-init\ndrwx------ 2 root root 69632 4æ  14 16:42 l\ndrwx------ 4 root root  4096 4æ   1 23:22 d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\n//å¤äºä¸¤ä¸ªç®å½ï¼4695d98...108d41eb0ï¼åä¸ä¸ªlç®å½\n\nlç®å½æ¯ä¸å è½¯è¿æ¥ï¼æä¸äºè¾ç­çéæºä¸²è½¯è¿å°éåå±ç diff æä»¶å¤¹ä¸ï¼è¿æ ·åæ¯ä¸ºäºé¿åè¾¾å°mountå½ä»¤åæ°çé¿åº¦éå¶ã\n\n\n[root@tztest kbuser]# docker inspect df2b573855e0 | grep Dir\n\n"LowerDir": "/app/docker/overlay2/d90eefdee868034a568195793cd1c269664a8e459f773cef20cefe5fc81f9e1b/diff:/app/docker/overlay2/b1789038611adaa88789bc8600ff21ebf28d0f4437ae720bfea03b34d50cc689/diff:/app/docker/overlay2/9c3ce321c132b4e638a2187c58d6af6dff58f74c3f49780df8ee4eb80b0dc5f2/diff:/app/docker/overlay2/198313ba0d321e9efa1205820408780b4edb07027456cfcd89cc660bbfa92953/diff",\n"MergedDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/merged",\n"UpperDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/diff",\n"WorkDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/work"\n\nLowerDirï¼å¯¹åºçæ¯å®¹å¨çåªè¯»éåå±ï¼å¨æ°çæç®å½2c...74-initä¸ï¼\nUpperDirï¼ä¸ºå®¹å¨çå¯è¯»åå±ï¼å¨æ°çæç®å½2c...74ä¸ï¼\nMergedDirï¼ä¸ºåºå±åªè¯»éåå±åä¸å±å¯è¯»åå®¹å¨å±çç»ä¸è§å¾\n\n//åå¥ä¸ä¸ªæä»¶ï¼\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n/app # touch hfftest0414\n/app # echo 111 > hfftest0414\n\n[root@tztest kbuser]# find / -name  hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/diff/app/hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/merged/app/hfftest0414\n//åå¥æä»¶å¨UpperDiråMergedDirä¸­\n\n//åæ­¢å®¹å¨åï¼åå»ºçæä»¶ä»ç¶å­å¨ï¼diff,mergeä¸å¨äºï¼ãå½å®¹å¨è¢«å é¤åï¼ä¸¤ä¸ªæ°å¢ç®å½åå¶ç¸å³æä»¶è¢«å é¤\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n\n\n# åæ¶å¤å¶\n\noverlay2 å¯¹æä»¶çä¿®æ¹éç¨çæ¯åæ¶å¤å¶çå·¥ä½æºå¶ï¼\n\n * ç¬¬ä¸æ¬¡ä¿®æ¹æä»¶ï¼å½æä»¬ç¬¬ä¸æ¬¡å¨å®¹å¨ä¸­ä¿®æ¹æä¸ªæä»¶æ¶ï¼overlay2 ä¼è§¦ååæ¶å¤å¶æä½ï¼overlay2 é¦åä»éåå±å¤å¶æä»¶å°å®¹å¨å±ï¼ç¶åå¨å®¹å¨å±æ§è¡å¯¹åºçæä»¶ä¿®æ¹æä½ã\n * å é¤æä»¶æç®å½ï¼å½æä»¶æç®å½è¢«å é¤æ¶ï¼overlay2 å¹¶ä¸ä¼çæ­£ä»éåä¸­å é¤å®ï¼å ä¸ºéåå±æ¯åªè¯»çï¼overlay2 ä¼åå»ºä¸ä¸ªç¹æ®çæä»¶æç®å½ï¼è¿ç§ç¹æ®çæä»¶æç®å½ä¼é»æ­¢å®¹å¨çè®¿é®ã\n\n\n# æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´\n\n[root@tztest kbuser]# docker system df\nTYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE\nImages              117                 51                  18.52GB             11.19GB (60%)\nContainers          203                 100                 2.842GB             1.446GB (50%)\nLocal Volumes       13                  12                  30.42MB             0B (0%)\nBuild Cache         0                   0                   0B                  0B\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# åèèµæ\n\nhttps://www.modb.pro/db/127388',normalizedContent:'# docker éåå­å¨åç\n\ndockeræ¯æå¤ç§graphdriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­\n\n\n# overlay2\n\nlinux åæ ¸å¨ 4.0 çæ¬å¯¹overlayåäºå¾å¤å¿è¦çæ¹è¿ï¼æ­¤æ¶ç overlayfs è¢«ç§°ä¹ä¸ºoverlay2\n\n * è¦æ³ä½¿ç¨overlay2ï¼docker çæ¬å¿é¡»é«äº 17.06.02ã\n * å¦æä½ çæä½ç³»ç»æ¯ rhel æ centosï¼linux åæ ¸çæ¬å¿é¡»ä½¿ç¨ 3.10.0-514 æèæ´é«çæ¬ï¼å¶ä» linux åè¡ççåæ ¸çæ¬å¿é¡»é«äº 4.0ï¼ä¾å¦ ubuntu æ debianï¼\n * overlay2æå¥½æ­é xfs æä»¶ç³»ç»ä½¿ç¨ï¼å¹¶ä¸ä½¿ç¨ xfs ä½ä¸ºåºå±æä»¶ç³»ç»æ¶ï¼d_typeå¿é¡»å¼å¯ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤éªè¯ d_type æ¯å¦å¼å¯ï¼\n\n$ xfs_info /var/lib/docker | grep ftype\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\n\n\n1\n2\n\n\nverlay2 æ¯è¿æ ·å¨å­æä»¶çï¼ overlay2å°éåå±åå®¹å¨å±é½æ¾å¨åç¬çç®å½ï¼å¹¶ä¸æå¯ä¸ idï¼æ¯ä¸å±ä»å­å¨åçååçæä»¶ï¼æç»ä½¿ç¨èåæè½½ææ¯å°å®¹å¨å±åéåå±çæææä»¶ç»ä¸æè½½å°å®¹å¨ä¸­ï¼ä½¿å¾å®¹å¨ä¸­çå°å®æ´çç³»ç»æä»¶ã\n\n[root@localhost ~]# docker info | grep storage\n storage driver: overlay2\n\n\n1\n2\n\n\noverlayé©±å¨çéååªæä¸¤å±ï¼ä¸ä¸ªupperæä»¶ç³»ç»åä¸ä¸ªloweræä»¶ç³»ç»ï¼åå«ä»£è¡¨dockerçéåå±åå®¹å¨å±\n\nmergedå±æ¯lowerå±åupperå±çç»ä¸è§å¾\n\nå½éè¦ä¿®æ¹ä¸ä¸ªæä»¶æ¶ï¼ä½¿ç¨cowå°æä»¶ä»åªè¯»çlowerå¤å¶å°å¯åçupperè¿è¡ä¿®æ¹ï¼ç»æä¹ä¿å­å¨upperå±ã\n\nå¨dockerä¸­ï¼åºä¸çåªè¯»å±å°±æ¯imageï¼å¯åå±å°±æ¯containerãvoerlay2é©±å¨å­å¨ä½ç½®ä¸º/var/lib/docker/ï¼/app/dockerï¼\n\n[root@tztest kbuser]# ls /app/docker/\nbuilder  buildkit  containerd  containers  image  kubelet  network  overlay2  plugins  runtimes  swarm  tmp  trust  volumes\n[root@tztest kbuser]# ls /app/docker/overlay2/7e32a486c4dc7a52d0685b7fb3e4f6fb4eb7b9ae963f0820285c3659e3f361ca\ncommitted  diff  link  lower  work\n[root@tztest kbuser]# ls /app/docker/image/overlay2\ndistribution  imagedb  layerdb  repositories.json\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n * overlay2ç®å½ï¼å­å¨éååå®¹å¨çå±ä¿¡æ¯\n\n * imageç®å½ï¼å­å¨éååç¸å³ä¿¡æ¯\n\n * repositories.jsonå°±æ¯å­å¨éåä¿¡æ¯ï¼ä¸»è¦æ¯nameåimage idçå¯¹åºï¼digeståimage idçå¯¹åº\n\n# æ°å¢ä¸ä¸ªéå\n\n[root@tztest kbuser]# docker images | grep web-demo\nweb-demo_c7cac94                    dev-1648826415118                          df2b573855e0        12 days ago         17.7mb\n[root@tztest kbuser]# ls /app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\ncommitted  diff  link  lower  work\n\nï¼å¯è½æ°å¢å¤ä¸ªéåå±ç®å½æä»¶ï¼\n\n\n//åè®¸ä¸ä¸ªå®¹å¨\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n[root@tztest kbuser]#  docker ps | grep hfftest\n1e73601f56d9        df2b573855e0                                          "sh"                     34 seconds ago      up 32 seconds       80/tcp, 8080/tcp         hfftest\n\n\n[root@tztest kbuser]# ls /app/docker/overlay2/ -tl\næ»ç¨é 3900\ndrwx------ 5 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0\ndrwx------ 4 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0-init\ndrwx------ 2 root root 69632 4æ  14 16:42 l\ndrwx------ 4 root root  4096 4æ   1 23:22 d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\n//å¤äºä¸¤ä¸ªç®å½ï¼4695d98...108d41eb0ï¼åä¸ä¸ªlç®å½\n\nlç®å½æ¯ä¸å è½¯è¿æ¥ï¼æä¸äºè¾ç­çéæºä¸²è½¯è¿å°éåå±ç diff æä»¶å¤¹ä¸ï¼è¿æ ·åæ¯ä¸ºäºé¿åè¾¾å°mountå½ä»¤åæ°çé¿åº¦éå¶ã\n\n\n[root@tztest kbuser]# docker inspect df2b573855e0 | grep dir\n\n"lowerdir": "/app/docker/overlay2/d90eefdee868034a568195793cd1c269664a8e459f773cef20cefe5fc81f9e1b/diff:/app/docker/overlay2/b1789038611adaa88789bc8600ff21ebf28d0f4437ae720bfea03b34d50cc689/diff:/app/docker/overlay2/9c3ce321c132b4e638a2187c58d6af6dff58f74c3f49780df8ee4eb80b0dc5f2/diff:/app/docker/overlay2/198313ba0d321e9efa1205820408780b4edb07027456cfcd89cc660bbfa92953/diff",\n"mergeddir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/merged",\n"upperdir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/diff",\n"workdir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/work"\n\nlowerdirï¼å¯¹åºçæ¯å®¹å¨çåªè¯»éåå±ï¼å¨æ°çæç®å½2c...74-initä¸ï¼\nupperdirï¼ä¸ºå®¹å¨çå¯è¯»åå±ï¼å¨æ°çæç®å½2c...74ä¸ï¼\nmergeddirï¼ä¸ºåºå±åªè¯»éåå±åä¸å±å¯è¯»åå®¹å¨å±çç»ä¸è§å¾\n\n//åå¥ä¸ä¸ªæä»¶ï¼\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n/app # touch hfftest0414\n/app # echo 111 > hfftest0414\n\n[root@tztest kbuser]# find / -name  hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/diff/app/hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/merged/app/hfftest0414\n//åå¥æä»¶å¨upperdiråmergeddirä¸­\n\n//åæ­¢å®¹å¨åï¼åå»ºçæä»¶ä»ç¶å­å¨ï¼diff,mergeä¸å¨äºï¼ãå½å®¹å¨è¢«å é¤åï¼ä¸¤ä¸ªæ°å¢ç®å½åå¶ç¸å³æä»¶è¢«å é¤\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n\n\n# åæ¶å¤å¶\n\noverlay2 å¯¹æä»¶çä¿®æ¹éç¨çæ¯åæ¶å¤å¶çå·¥ä½æºå¶ï¼\n\n * ç¬¬ä¸æ¬¡ä¿®æ¹æä»¶ï¼å½æä»¬ç¬¬ä¸æ¬¡å¨å®¹å¨ä¸­ä¿®æ¹æä¸ªæä»¶æ¶ï¼overlay2 ä¼è§¦ååæ¶å¤å¶æä½ï¼overlay2 é¦åä»éåå±å¤å¶æä»¶å°å®¹å¨å±ï¼ç¶åå¨å®¹å¨å±æ§è¡å¯¹åºçæä»¶ä¿®æ¹æä½ã\n * å é¤æä»¶æç®å½ï¼å½æä»¶æç®å½è¢«å é¤æ¶ï¼overlay2 å¹¶ä¸ä¼çæ­£ä»éåä¸­å é¤å®ï¼å ä¸ºéåå±æ¯åªè¯»çï¼overlay2 ä¼åå»ºä¸ä¸ªç¹æ®çæä»¶æç®å½ï¼è¿ç§ç¹æ®çæä»¶æç®å½ä¼é»æ­¢å®¹å¨çè®¿é®ã\n\n\n# æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´\n\n[root@tztest kbuser]# docker system df\ntype                total               active              size                reclaimable\nimages              117                 51                  18.52gb             11.19gb (60%)\ncontainers          203                 100                 2.842gb             1.446gb (50%)\nlocal volumes       13                  12                  30.42mb             0b (0%)\nbuild cache         0                   0                   0b                  0b\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# åèèµæ\n\nhttps://www.modb.pro/db/127388',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"k8såºç¡",frontmatter:{title:"k8såºç¡",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/k8s01/",categories:["k8s"],tags:["k8s"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"kubectl api-versions\n`",meta:[{name:"twitter:title",content:"k8såºç¡"},{name:"twitter:description",content:"kubectl api-versions\n`"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8såºç¡"},{property:"og:description",content:"kubectl api-versions\n`"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"k8s"},{itemprop:"name",content:"k8såºç¡"},{itemprop:"description",content:"kubectl api-versions\n`"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html",relativePath:"01.ææ¯æè°/03.kubernetes/01.k8såºç¡.md",key:"v-4b9555d9",path:"/pages/k8s01/",headers:[{level:2,title:"apiVersion",slug:"apiversion",normalizedTitle:"apiversion",charIndex:2},{level:2,title:"resourceVersion",slug:"resourceversion",normalizedTitle:"resourceversion",charIndex:1054},{level:2,title:"Patch æºå¶",slug:"patch-æºå¶",normalizedTitle:"patch æºå¶",charIndex:1361},{level:2,title:"externalTrafficPolicyï¼è·³è¿SNAT",slug:"externaltrafficpolicy-è·³è¿snat",normalizedTitle:"externaltrafficpolicyï¼è·³è¿snat",charIndex:1784},{level:2,title:"å­å¨ç©ºé´èµæºéå¶ephemeral-storage",slug:"å­å¨ç©ºé´èµæºéå¶ephemeral-storage",normalizedTitle:"å­å¨ç©ºé´èµæºéå¶ephemeral-storage",charIndex:2066},{level:3,title:"ä½¿ç¨éå¶ï¼",slug:"ä½¿ç¨éå¶",normalizedTitle:"ä½¿ç¨éå¶ï¼",charIndex:2394},{level:3,title:"ææ",slug:"ææ",normalizedTitle:"ææ",charIndex:2549},{level:2,title:"Qos æå¡è´¨éç­çº§",slug:"qos-æå¡è´¨éç­çº§",normalizedTitle:"qos æå¡è´¨éç­çº§",charIndex:2605},{level:2,title:"ResourceVersion",slug:"resourceversion-2",normalizedTitle:"resourceversion",charIndex:2998},{level:3,title:"è°ä¼å»ºè®®",slug:"è°ä¼å»ºè®®",normalizedTitle:"è°ä¼å»ºè®®",charIndex:4188},{level:2,title:"ä¸»æºç½ç»hostNetwork",slug:"ä¸»æºç½ç»hostnetwork",normalizedTitle:"ä¸»æºç½ç»hostnetwork",charIndex:4439},{level:2,title:"podçéå¯ç­ç¥",slug:"podçéå¯ç­ç¥",normalizedTitle:"podçéå¯ç­ç¥",charIndex:4698},{level:2,title:"å é¤ä¸ä¸ªPodä¼åçä»ä¹äºæï¼",slug:"å é¤ä¸ä¸ªpodä¼åçä»ä¹äºæ",normalizedTitle:"å é¤ä¸ä¸ªpodä¼åçä»ä¹äºæï¼",charIndex:4767},{level:2,title:"éåæåç­ç¥ ImagePullPolicy",slug:"éåæåç­ç¥-imagepullpolicy",normalizedTitle:"éåæåç­ç¥ imagepullpolicy",charIndex:5071},{level:2,title:"ä¸ºå®¹å¨éç½®hosts",slug:"ä¸ºå®¹å¨éç½®hosts",normalizedTitle:"ä¸ºå®¹å¨éç½®hosts",charIndex:5176},{level:2,title:"å®¹å¨ä¿®æ¹hostname",slug:"å®¹å¨ä¿®æ¹hostname",normalizedTitle:"å®¹å¨ä¿®æ¹hostname",charIndex:5392},{level:2,title:"kubernetes æå®èç¹nodeNameä¸NodeSelector",slug:"kubernetes-æå®èç¹nodenameä¸nodeselector",normalizedTitle:"kubernetes æå®èç¹nodenameä¸nodeselector",charIndex:5611},{level:2,title:"",slug:"",normalizedTitle:"",charIndex:0}],headersStr:"apiVersion resourceVersion Patch æºå¶ externalTrafficPolicyï¼è·³è¿SNAT å­å¨ç©ºé´èµæºéå¶ephemeral-storage ä½¿ç¨éå¶ï¼ ææ Qos æå¡è´¨éç­çº§ ResourceVersion è°ä¼å»ºè®® ä¸»æºç½ç»hostNetwork podçéå¯ç­ç¥ å é¤ä¸ä¸ªPodä¼åçä»ä¹äºæï¼ éåæåç­ç¥ ImagePullPolicy ä¸ºå®¹å¨éç½®hosts å®¹å¨ä¿®æ¹hostname kubernetes æå®èç¹nodeNameä¸NodeSelector ",content:'# apiVersion\n\nkubectl api-versions\n\n\n1\n\n\n * alpha åç§°ä¸­å¸¦æalphaçAPIçæ¬æ¯è¿å¥Kubernetesçæ°åè½çæ©æåéçæ¬ãè¿äºå¯è½åå«éè¯¯ï¼å¹¶ä¸ä¸ä¿è¯å°æ¥å¯ä»¥ä½¿ç¨ã\n\n * beta APIçæ¬åç§°ä¸­çbetaè¡¨ç¤ºæµè¯å·²ç»è¶è¿äºalphaçº§å«ï¼å¹¶ä¸è¯¥åè½æç»å°åå«å¨Kubernetesä¸­ã è½ç¶å®çå·¥ä½æ¹å¼å¯è½ä¼æ¹åï¼å¹¶ä¸å¯¹è±¡çå®ä¹æ¹å¼å¯è½ä¼å®å¨æ¹åï¼ä½è¯¥ç¹å¾æ¬èº«å¾å¯è½ä»¥æç§å½¢å¼å°å¶åä¸ºKubernetesã\n\n * stable ç¨³å®çapiVersionè¿äºåç§°ä¸­ä¸åå«alphaæbetaã å®ä»¬å¯ä»¥å®å¨ä½¿ç¨ã\n\n * v1 è¿æ¯Kubernetes APIçç¬¬ä¸ä¸ªç¨³å®çæ¬ã å®åå«è®¸å¤æ ¸å¿å¯¹è±¡ã\n\n * apps/v1 appsæ¯Kubernetesä¸­æå¸¸è§çAPIç»ï¼å¶ä¸­åå«è®¸å¤æ ¸å¿å¯¹è±¡åv1ã å®åæ¬ä¸å¨Kubernetesä¸è¿è¡åºç¨ç¨åºç¸å³çåè½ï¼å¦Deploymentsï¼RollingUpdatesåReplicaSetsã\n\n * autoscaling/v1 æ­¤APIçæ¬åè®¸æ ¹æ®ä¸åçèµæºä½¿ç¨ææ èªå¨è°æ´å®¹å¨ãæ­¤ç¨³å®çæ¬ä»æ¯æCPUæ©å±ï¼ä½æªæ¥çalphaåbetaçæ¬å°åè®¸æ¨æ ¹æ®åå­ä½¿ç¨æåµåèªå®ä¹ææ è¿è¡æ©å±ã\n\n * batch/v1 batchAPIç»åå«ä¸æ¹å¤çåç±»ä¼¼ä½ä¸çä»»å¡ç¸å³çå¯¹è±¡ï¼èä¸æ¯ååºç¨ç¨åºä¸æ ·çä»»å¡ï¼å¦æ éæå°è¿è¡Webæå¡å¨ï¼ã è¿ä¸ªapiVersionæ¯è¿äºAPIå¯¹è±¡çç¬¬ä¸ä¸ªç¨³å®çæ¬ã\n\n * batch/v1beta1 Kubernetesä¸­æ¹å¤çå¯¹è±¡çæ°åè½æµè¯çï¼ç¹å«æ¯åæ¬åè®¸æ¨å¨ç¹å®æ¶é´æå¨æè¿è¡ä½ä¸çCronJobsã\n\n * certificates.k8s.io/v1beta1 æ­¤APIçæ¬æ·»å äºéªè¯ç½ç»è¯ä¹¦çåè½ï¼ä»¥ä¾¿å¨ç¾¤éä¸­è¿è¡å®å¨éä¿¡ã æ¨å¯ä»¥å¨å®æ¹ææ¡£ä¸éè¯»æ´å¤åå®¹ã\n\n * extensions/v1beta1 æ­¤çæ¬çAPIåå«è®¸å¤æ°çå¸¸ç¨Kubernetesåè½ã é¨ç½²ï¼DaemonSetsï¼ReplicaSetåIngressesé½å¨æ­¤çæ¬ä¸­æ¶å°äºéå¤§æ´æ¹ã\n\n * policy/v1beta1 æ­¤apiVersionå¢å äºè®¾ç½®podä¸­æ­é¢ç®åpodå®å¨æ§æ°è§åçåè½\n\n * rbac.authorization.k8s.io/v1 æ­¤apiVersionåå«Kubernetesåºäºè§è²çè®¿é®æ§å¶çé¢å¤åè½ãè¿æå©äºæ¨ä¿æ¤ç¾¤é\n\n\n# resourceVersion\n\nè¿ä¸ªçæ¬å·æ¯ä¸ä¸ª K8s çåé¨æºå¶ï¼ç¨æ·ä¸åºè¯¥åè®¾å®æ¯ä¸ä¸ªæ°å­æèéè¿æ¯è¾ä¸¤ä¸ªçæ¬å·å¤§å°æ¥ç¡®å®èµæºå¯¹è±¡çæ°æ§ï¼å¯ä¸è½åçå°±æ¯éè¿æ¯è¾çæ¬å·ç¸ç­æ¥ç¡®å®å¯¹è±¡æ¯å¦æ¯åä¸ä¸ªçæ¬ï¼å³æ¯å¦åçäºååï¼ãè resourceVersion ä¸ä¸ªéè¦çç¨å¤ï¼å°±æ¯æ¥å update è¯·æ±ççæ¬æ§å¶ã kube-apiserver ä¼æ ¡éªç¨æ· update è¯·æ±æäº¤å¯¹è±¡ä¸­ç resourceVersion ä¸å®è¦åå½å K8s ä¸­è¿ä¸ªå¯¹è±¡ææ°ç resourceVersion ä¸è´ï¼æè½æ¥åæ¬æ¬¡ updateãå¦åï¼K8s ä¼æç»è¯·æ±ï¼å¹¶åè¯ç¨æ·åçäºçæ¬å²çªï¼Conflictï¼ã\n\n\n# Patch æºå¶\n\n * json patch å¨ json patch ä¸­æä»¬è¦æå®æä½ç±»åï¼æ¯å¦ add æ°å¢è¿æ¯ replace æ¿æ¢ï¼å¦å¤å¨ä¿®æ¹ containers åè¡¨æ¶è¦éè¿åç´ åºå·æ¥æå®å®¹å¨ã\n\n * merge patchï¼é»è®¤ï¼ merge patch æ æ³åç¬æ´æ°ä¸ä¸ªåè¡¨ä¸­çæä¸ªåç´ ï¼å æ­¤ä¸ç®¡æä»¬æ¯è¦å¨ containers éæ°å¢å®¹å¨ãè¿æ¯ä¿®æ¹å·²æå®¹å¨ç imageãenv ç­å­æ®µï¼é½è¦ç¨æ´ä¸ª containers åè¡¨æ¥æäº¤ patchï¼\n\n * strategic merge patch å¨æä»¬ patch æ´æ° containers ä¸åéè¦æå®ä¸æ åºå·äºï¼èæ¯æå® name æ¥ä¿®æ¹ï¼K8s ä¼æ name ä½ä¸º key æ¥è®¡ç® mergeã ç®å strategic ç­ç¥åªè½ç¨äºåç K8s èµæºä»¥å Aggregated API æ¹å¼çèªå®ä¹èµæºï¼å¯¹äº CRD å®ä¹çèµæºå¯¹è±¡ï¼æ¯æ æ³ä½¿ç¨çã\n\n\n# externalTrafficPolicyï¼è·³è¿SNAT\n\nå¯¹äºService, å¦ææå®ç±»åä¸º NodePort, é£ä¹è¿ä¸ªç«¯å£ä¼å¨éç¾¤çææ Node ä¸æå¼ï¼å³ä½¿è¿ä¸ªNode ä¸é¢æ²¡æè¿ä¸ªpod\n\nKube-proxyè½¬åæ¶ä¼ä¿çæºIPãå³ï¼å®¹å¨æ¶å°çæ¥æï¼çå°æºIPå°åè¿æ¯ç¨æ·çã\n\nç¼ºç¹æ¯è´è½½åè¡¡å¯è½ä¸æ¯å¾å¥½ï¼å ä¸ºä¸æ¦å®¹å¨å®ä¾åå¸å¨å¤ä¸ªèç¹ä¸ï¼å®åªè½¬åç»æ¬æºï¼ä¸è·¨èç¹è½¬åæµéãå½ç¶ï¼å°äºä¸æ¬¡è½¬åï¼æ§è½ä¼ç¸å¯¹å¥½ä¸ä¸¢ä¸¢ã\n\næ³¨ï¼è¿ç§æ¨¡å¼ä¸çServiceç±»ååªè½ä¸ºå¤é¨æµéï¼å³ï¼LoadBalancer æè NodePort ä¸¤ç§ï¼å¦åä¼æ¥é\n\n\n# å­å¨ç©ºé´èµæºéå¶ephemeral-storage\n\nå¨æ¯ä¸ªKubernetesçèç¹ä¸ï¼kubeletçæ ¹ç®å½(é»è®¤æ¯/var/lib/kubelet)åæ¥å¿ç®å½(/var/log)ä¿å­å¨èç¹çä¸»ååºä¸ï¼è¿ä¸ªååºåæ¶ä¹ä¼è¢«PodçEmptyDirç±»åçvolumeãå®¹å¨æ¥å¿ãéåçå±ãå®¹å¨çå¯åå±æå ç¨ã\n\nresources:\n  requests:\n    cpu: 1\n    memory: 2048Mi\n    ephemeral-storage: 2Gi\n  limits:\n    cpu: 2\n    memory: 2048Mi\n    ephemeral-storage: 5Gi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# ä½¿ç¨éå¶ï¼\n\n * åªè¦Root Diråkubelet --root-dirå¨ä¸ä¸ªååºï¼å°±è½èµ·ä½ç¨\n * å¦æè¿è¡æ¶æå®äºå«çç¬ç«çååºï¼æ¯å¦ä¿®æ¹äºdockerçéåå±åå®¹å¨å¯åå±çå­å¨ä½ç½®(é»è®¤æ¯/var/lib/docker)æå¨çååºï¼å°ä¸åå°å¶è®¡å¥ephemeral-storageçæ¶èã\n\n\n# ææ\n\nå¨å®¹å¨åå¥è¶è¿å­å¨éå¶æ¶å°±ä¼è¢«é©±éæ teststorage 0/1 Evicted 0 1m\n\n\n# Qos æå¡è´¨éç­çº§\n\nGuaranteedï¼Pod éçæ¯ä¸ªå®¹å¨é½å¿é¡»æåå­/CPU éå¶åè¯·æ±ï¼èä¸å¼å¿é¡»ç¸ç­ã Burstableï¼Pod éè³å°æä¸ä¸ªå®¹å¨æåå­æè CPU è¯·æ±ä¸ä¸æ»¡è¶³ Guarantee ç­çº§çè¦æ±ï¼å³åå­/CPU çå¼è®¾ç½®çä¸åã BestEffortï¼å®¹å¨å¿é¡»æ²¡æä»»ä½åå­æè CPU çéå¶æè¯·æ±ã\n\nä¸ä¸ªçº§å«çä¼åçº§ä»ä½å°é«çé¡ºåºæ¯ï¼ BestEffort pods -> Burstable pods -> Guaranteed pods\n\nå¯åç¼©èµæºï¼å¦CPUï¼å³ä½¿cpu è¶éï¼ä¹å¯ä»¥ååæ¶é´çè¿è¡ï¼åªæ¯è¿è¡åæ¢ï¼è¿ç¨ä¸ä¼æã ä¸å¯åç¼©èµæºï¼Memory/Storageï¼åå­ä¸åäºCPUï¼ç³»ç»åå­ä¸è¶³æ¶ï¼ä¼è§¦å OOMææ­»è¿ç¨ï¼æç§oom score æ¥ç¡®å®åkillè°ï¼oom_score_adjå¼è¶é«ï¼è¢«kill çä¼åçº§è¶é«ã\n\n\n# ResourceVersion\n\nç»å¤§é¨åæåµä¸ï¼apiserver ç´æ¥ä»æ¬å°ç¼å­æä¾æå¡ï¼å ä¸ºå®ç¼å­äºéç¾¤å¨éæ°æ®ï¼ï¼ æäºç¹æ®æåµï¼ä¾å¦ï¼ å®¢æ·ç«¯æç¡®è¦æ±ä» etcd è¯»æ°æ®ï¼è¿½æ±æé«çæ°æ®åç¡®æ§ï¼ apiserver æ¬å°ç¼å­è¿æ²¡å»ºå¥½ å¯¹äºéç»æåçæ°æ®å­å¨ç³»ç»æ¥è¯´ï¼LISTæä½éå¸¸é½æ¯éå¸¸ééçº§çï¼ä¸ä»å ç¨å¤§éç ç£ç IOãç½ç»å¸¦å®½å CPUãK8sçLISTè¯·æ±å¤§é¨åé½åºè¯¥è¢«apiserveræ¡ä½ï¼ä»å®çæ¬å°ç¼å­æä¾æå¡ï¼ä½å¦æä½¿ç¨ä¸å½ï¼å°±ä¼è·³è¿ç¼å­ç´æ¥å°è¾¾ etcdï¼æå¾å¤§çç¨³å®æ§é£é©ã\n\nGetè¯·æ±ï¼GetOptions{}ä¸ListOption{}ä¸æ ·ï¼ä¸è®¾ç½®ResourceVersion=0ä¼å¯¼è´ apiserverå»etcdæ¿æ°æ®ï¼åºè¯¥å°½éé¿åã\n\nWhen specified with a watch call, shows changes that occur after that particular version of a resource. Defaults to changes from the beginning of history. \nWhen specified for list: \n\n\n1\n2\n\n * if unset, then the result is returned from remote storage based on quorum-read flag;\n * if it\'s 0, then we simply return what we currently have in cache, no guarantee;\n * if set to non zero, then the result is at least as fresh as given rv. æªæå®ResourceVersionï¼è·åææ°æ°æ®ï¼ApiServeræ¶å°è¿ä¸ªç±»åçè¯»è¯·æ±åï¼ä¼åEtcdååºçº¿æ§è¯»è¯·æ±è·åetcdææ°æ°æ® ResourceVersion=â0â,è·åApiServerçç¼å­æ°æ®ï¼æå¯è½æ¯è¿ææ°æ®ã ResouceVersionä¸ºé0çå­ç¬¦ä¸²ï¼è·åä¸å°äºè¯¥versionçæ°æ®ã é»è®¤æ¯æªæå®ResouceVersionã å¦æå®¢æ·ç«¯æ²¡ä¼ ListOptionï¼ååå§åä¸ä¸ªé»è®¤å¼ï¼å¶ä¸­çResourceVersionè®¾ç½®ä¸ºç©ºå­ç¬¦ä¸²ï¼ è¿å°ä½¿apiserverä»etcdæåæ°æ®æ¥è¿åç»å®¢æ·ç«¯ï¼èä¸ä½¿ç¨æ¬å°ç¼å­ï¼é¤éæ¬å°ç¼å­è¿æ²¡æå»ºå¥½ï¼ã resourceVersion=0å°å¯¼è´limitè¢«å¿½ç¥ï¼ä¹å°±æ¯è¯´ï¼ è½ç¶æå®äºlimitï¼ä½è¯·æ±ä¼è¿åå¨éæ°æ®ã ä» v1.19 çæ¬å¼å§ï¼Kubernetes API æå¡å¨æ¯æ list è¯·æ±ç resourceVersionMatch åæ°\n\n\n# è°ä¼å»ºè®®\n\nList è¯·æ±é»è®¤è®¾ç½® ResourceVersion=0 ä¼åä½¿ç¨ namespaced API éè¿label/field selectoråè¿æ»¤\n\nhttp://arthurchiao.art/blog/k8s-reliability-list-data-zh https://www.pudn.com/news/62c14ac49f2d63494a8b7887.html https://kubernetes.io/zh-cn/docs/reference/_print/\n\n\n# ä¸»æºç½ç»hostNetwork\n\n * Podä½¿ç¨ä¸»æºç½ç»åªéè¦å¨éç½®ä¸­æ·»å hostNetwork: trueå³å¯\n * é¨ç½²åå¯ä»¥çå°PodçIPä¸èç¹çIPç¸åï¼è¯´æPodç´æ¥ä½¿ç¨äºä¸»æºç½ç»ã\n * Podç´æ¥ä½¿ç¨ä¸»æºçç½ç»ä¼å ç¨å®¿ä¸»æºçç«¯å£ï¼PodçIPå°±æ¯å®¿ä¸»æºçIPï¼ä½¿ç¨æ¶éè¦èèæ¯å¦ä¸ä¸»æºä¸çç«¯å£å²çª\n * ç±äºå ç¨ä¸»æºç«¯å£ï¼ä½¿ç¨Deploymenté¨ç½²hostNetworkç±»åPodæ¶ï¼è¦æ³¨æPodçå¯æ¬æ°ä¸è¦è¶è¿èç¹æ°éï¼å¦åä¼å¯¼è´ä¸ä¸ªèç¹ä¸è°åº¦äºå¤ä¸ªPodï¼Podå¯å¨æ¶ç«¯å£å²çªæ æ³åå»º\n\n\n# podçéå¯ç­ç¥\n\nAlwaysï¼ä½å¡podå¯¹è±¡ç»æ­¢å°±éå¯ï¼æ­¤ä¸ºé»è®¤ç­ç¥ã\n\nOnFailureï¼ä»å¨podå¯¹è±¡åºç°éè¯¯æ¶æéå¯\n\n\n# å é¤ä¸ä¸ªPodä¼åçä»ä¹äºæï¼\n\nKube-apiserverä¼æ¥åå°ç¨æ·çå é¤æä»¤ï¼é»è®¤æ30ç§æ¶é´ç­å¾ä¼ééåºï¼è¶è¿30ç§ä¼è¢«æ è®°ä¸ºæ­»äº¡ç¶æï¼æ­¤æ¶Podçç¶æTerminatingï¼kubeletçå°podæ è®°ä¸ºTerminatingå°±å¼å§äºå³é­Podçå·¥ä½ï¼\n\nå³é­æµç¨å¦ä¸ï¼ 1ã podä»serviceçendpointåè¡¨ä¸­è¢«ç§»é¤ï¼ 2ã å¦æè¯¥podå®ä¹äºä¸ä¸ªåæ­¢åçé©å­ï¼å¶ä¼å¨podåé¨è¢«è°ç¨ï¼åæ­¢é©å­ä¸è¬å®ä¹äºå¦ä½ä¼éçç»æè¿ç¨ï¼ 3ã è¿ç¨è¢«åéTERMä¿¡å·ï¼kill -14ï¼ 4ã å½è¶è¿ä¼ééåºçæ¶é´åï¼Podä¸­çææè¿ç¨é½ä¼è¢«åéSIGKILLä¿¡å·ï¼kill -9ï¼ã\n\n\n# éåæåç­ç¥ ImagePullPolicy\n\nAlwaysï¼ä¸ç®¡éåæ¯å¦å­å¨é½ä¼è¿è¡ä¸æ¬¡æå Neverï¼ä¸ç®¡éåæ¯å¦å­å¨é½ä¸ä¼è¿è¡æå IfNotPresentï¼åªæéåä¸å­å¨æ¶ï¼æä¼è¿è¡éåæå\n\n\n# ä¸ºå®¹å¨éç½®hosts\n\n\n# éç½®å¨äºçº§ipsecä¸ï¼åcointarinersåçº§\n\nspec:\n   ...\n    spec:\n      hostAliases:\n      - ip: "172.16.0.12"\n        hostnames:\n        - "api.cc.pro"\n      containers:\n      - name: cc-x\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®¹å¨ä¿®æ¹hostname\n\nspec:\n  hostname: busybox-1\n  subdomain: busybox-subdomain\n\n\n1\n2\n3\n\n\nå ä¸ºpodçè®¿é®ååæ¯hostname.custom-subdomain.default.svc.cluster.local\n\næä»¥è¯¥ Pod çååæ¯ busybox-1.busybox-subdomain.default.svc.cluster.localã\n\n\n# kubernetes æå®èç¹nodeNameä¸NodeSelector\n\nPod.spec.nodeNameç¨äºå¼ºå¶çº¦æå°Podè°åº¦å°æå®çNodeèç¹ä¸ï¼è¿éè¯´æ¯âè°åº¦âï¼ä½å¶å®æå®äºnodeNameçPodä¼ç´æ¥è·³è¿Schedulerçè°åº¦é»è¾ï¼ç´æ¥åå¥PodListåè¡¨ï¼è¯¥å¹éè§åæ¯å¼ºå¶å¹éã Pod.spec.nodeSelectoræ¯éè¿kubernetesçlabel-selectoræºå¶è¿è¡èç¹éæ©ï¼ç±schedulerè°åº¦ç­ç¥MatchNodeSelectorè¿è¡labelå¹éï¼è°åº¦podå°ç®æ èç¹ï¼è¯¥å¹éè§åæ¯å¼ºå¶çº¦æãå¯ç¨èç¹éæ©å¨çæ­¥éª¤ä¸ºï¼Nodeæ·»å labelæ è®°>Podå®ä¹ä¸­æ·»å nodeSelector\n\n\n#',normalizedContent:'# apiversion\n\nkubectl api-versions\n\n\n1\n\n\n * alpha åç§°ä¸­å¸¦æalphaçapiçæ¬æ¯è¿å¥kubernetesçæ°åè½çæ©æåéçæ¬ãè¿äºå¯è½åå«éè¯¯ï¼å¹¶ä¸ä¸ä¿è¯å°æ¥å¯ä»¥ä½¿ç¨ã\n\n * beta apiçæ¬åç§°ä¸­çbetaè¡¨ç¤ºæµè¯å·²ç»è¶è¿äºalphaçº§å«ï¼å¹¶ä¸è¯¥åè½æç»å°åå«å¨kubernetesä¸­ã è½ç¶å®çå·¥ä½æ¹å¼å¯è½ä¼æ¹åï¼å¹¶ä¸å¯¹è±¡çå®ä¹æ¹å¼å¯è½ä¼å®å¨æ¹åï¼ä½è¯¥ç¹å¾æ¬èº«å¾å¯è½ä»¥æç§å½¢å¼å°å¶åä¸ºkubernetesã\n\n * stable ç¨³å®çapiversionè¿äºåç§°ä¸­ä¸åå«alphaæbetaã å®ä»¬å¯ä»¥å®å¨ä½¿ç¨ã\n\n * v1 è¿æ¯kubernetes apiçç¬¬ä¸ä¸ªç¨³å®çæ¬ã å®åå«è®¸å¤æ ¸å¿å¯¹è±¡ã\n\n * apps/v1 appsæ¯kubernetesä¸­æå¸¸è§çapiç»ï¼å¶ä¸­åå«è®¸å¤æ ¸å¿å¯¹è±¡åv1ã å®åæ¬ä¸å¨kubernetesä¸è¿è¡åºç¨ç¨åºç¸å³çåè½ï¼å¦deploymentsï¼rollingupdatesåreplicasetsã\n\n * autoscaling/v1 æ­¤apiçæ¬åè®¸æ ¹æ®ä¸åçèµæºä½¿ç¨ææ èªå¨è°æ´å®¹å¨ãæ­¤ç¨³å®çæ¬ä»æ¯æcpuæ©å±ï¼ä½æªæ¥çalphaåbetaçæ¬å°åè®¸æ¨æ ¹æ®åå­ä½¿ç¨æåµåèªå®ä¹ææ è¿è¡æ©å±ã\n\n * batch/v1 batchapiç»åå«ä¸æ¹å¤çåç±»ä¼¼ä½ä¸çä»»å¡ç¸å³çå¯¹è±¡ï¼èä¸æ¯ååºç¨ç¨åºä¸æ ·çä»»å¡ï¼å¦æ éæå°è¿è¡webæå¡å¨ï¼ã è¿ä¸ªapiversionæ¯è¿äºapiå¯¹è±¡çç¬¬ä¸ä¸ªç¨³å®çæ¬ã\n\n * batch/v1beta1 kubernetesä¸­æ¹å¤çå¯¹è±¡çæ°åè½æµè¯çï¼ç¹å«æ¯åæ¬åè®¸æ¨å¨ç¹å®æ¶é´æå¨æè¿è¡ä½ä¸çcronjobsã\n\n * certificates.k8s.io/v1beta1 æ­¤apiçæ¬æ·»å äºéªè¯ç½ç»è¯ä¹¦çåè½ï¼ä»¥ä¾¿å¨ç¾¤éä¸­è¿è¡å®å¨éä¿¡ã æ¨å¯ä»¥å¨å®æ¹ææ¡£ä¸éè¯»æ´å¤åå®¹ã\n\n * extensions/v1beta1 æ­¤çæ¬çapiåå«è®¸å¤æ°çå¸¸ç¨kubernetesåè½ã é¨ç½²ï¼daemonsetsï¼replicasetåingressesé½å¨æ­¤çæ¬ä¸­æ¶å°äºéå¤§æ´æ¹ã\n\n * policy/v1beta1 æ­¤apiversionå¢å äºè®¾ç½®podä¸­æ­é¢ç®åpodå®å¨æ§æ°è§åçåè½\n\n * rbac.authorization.k8s.io/v1 æ­¤apiversionåå«kubernetesåºäºè§è²çè®¿é®æ§å¶çé¢å¤åè½ãè¿æå©äºæ¨ä¿æ¤ç¾¤é\n\n\n# resourceversion\n\nè¿ä¸ªçæ¬å·æ¯ä¸ä¸ª k8s çåé¨æºå¶ï¼ç¨æ·ä¸åºè¯¥åè®¾å®æ¯ä¸ä¸ªæ°å­æèéè¿æ¯è¾ä¸¤ä¸ªçæ¬å·å¤§å°æ¥ç¡®å®èµæºå¯¹è±¡çæ°æ§ï¼å¯ä¸è½åçå°±æ¯éè¿æ¯è¾çæ¬å·ç¸ç­æ¥ç¡®å®å¯¹è±¡æ¯å¦æ¯åä¸ä¸ªçæ¬ï¼å³æ¯å¦åçäºååï¼ãè resourceversion ä¸ä¸ªéè¦çç¨å¤ï¼å°±æ¯æ¥å update è¯·æ±ççæ¬æ§å¶ã kube-apiserver ä¼æ ¡éªç¨æ· update è¯·æ±æäº¤å¯¹è±¡ä¸­ç resourceversion ä¸å®è¦åå½å k8s ä¸­è¿ä¸ªå¯¹è±¡ææ°ç resourceversion ä¸è´ï¼æè½æ¥åæ¬æ¬¡ updateãå¦åï¼k8s ä¼æç»è¯·æ±ï¼å¹¶åè¯ç¨æ·åçäºçæ¬å²çªï¼conflictï¼ã\n\n\n# patch æºå¶\n\n * json patch å¨ json patch ä¸­æä»¬è¦æå®æä½ç±»åï¼æ¯å¦ add æ°å¢è¿æ¯ replace æ¿æ¢ï¼å¦å¤å¨ä¿®æ¹ containers åè¡¨æ¶è¦éè¿åç´ åºå·æ¥æå®å®¹å¨ã\n\n * merge patchï¼é»è®¤ï¼ merge patch æ æ³åç¬æ´æ°ä¸ä¸ªåè¡¨ä¸­çæä¸ªåç´ ï¼å æ­¤ä¸ç®¡æä»¬æ¯è¦å¨ containers éæ°å¢å®¹å¨ãè¿æ¯ä¿®æ¹å·²æå®¹å¨ç imageãenv ç­å­æ®µï¼é½è¦ç¨æ´ä¸ª containers åè¡¨æ¥æäº¤ patchï¼\n\n * strategic merge patch å¨æä»¬ patch æ´æ° containers ä¸åéè¦æå®ä¸æ åºå·äºï¼èæ¯æå® name æ¥ä¿®æ¹ï¼k8s ä¼æ name ä½ä¸º key æ¥è®¡ç® mergeã ç®å strategic ç­ç¥åªè½ç¨äºåç k8s èµæºä»¥å aggregated api æ¹å¼çèªå®ä¹èµæºï¼å¯¹äº crd å®ä¹çèµæºå¯¹è±¡ï¼æ¯æ æ³ä½¿ç¨çã\n\n\n# externaltrafficpolicyï¼è·³è¿snat\n\nå¯¹äºservice, å¦ææå®ç±»åä¸º nodeport, é£ä¹è¿ä¸ªç«¯å£ä¼å¨éç¾¤çææ node ä¸æå¼ï¼å³ä½¿è¿ä¸ªnode ä¸é¢æ²¡æè¿ä¸ªpod\n\nkube-proxyè½¬åæ¶ä¼ä¿çæºipãå³ï¼å®¹å¨æ¶å°çæ¥æï¼çå°æºipå°åè¿æ¯ç¨æ·çã\n\nç¼ºç¹æ¯è´è½½åè¡¡å¯è½ä¸æ¯å¾å¥½ï¼å ä¸ºä¸æ¦å®¹å¨å®ä¾åå¸å¨å¤ä¸ªèç¹ä¸ï¼å®åªè½¬åç»æ¬æºï¼ä¸è·¨èç¹è½¬åæµéãå½ç¶ï¼å°äºä¸æ¬¡è½¬åï¼æ§è½ä¼ç¸å¯¹å¥½ä¸ä¸¢ä¸¢ã\n\næ³¨ï¼è¿ç§æ¨¡å¼ä¸çserviceç±»ååªè½ä¸ºå¤é¨æµéï¼å³ï¼loadbalancer æè nodeport ä¸¤ç§ï¼å¦åä¼æ¥é\n\n\n# å­å¨ç©ºé´èµæºéå¶ephemeral-storage\n\nå¨æ¯ä¸ªkubernetesçèç¹ä¸ï¼kubeletçæ ¹ç®å½(é»è®¤æ¯/var/lib/kubelet)åæ¥å¿ç®å½(/var/log)ä¿å­å¨èç¹çä¸»ååºä¸ï¼è¿ä¸ªååºåæ¶ä¹ä¼è¢«podçemptydirç±»åçvolumeãå®¹å¨æ¥å¿ãéåçå±ãå®¹å¨çå¯åå±æå ç¨ã\n\nresources:\n  requests:\n    cpu: 1\n    memory: 2048mi\n    ephemeral-storage: 2gi\n  limits:\n    cpu: 2\n    memory: 2048mi\n    ephemeral-storage: 5gi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# ä½¿ç¨éå¶ï¼\n\n * åªè¦root diråkubelet --root-dirå¨ä¸ä¸ªååºï¼å°±è½èµ·ä½ç¨\n * å¦æè¿è¡æ¶æå®äºå«çç¬ç«çååºï¼æ¯å¦ä¿®æ¹äºdockerçéåå±åå®¹å¨å¯åå±çå­å¨ä½ç½®(é»è®¤æ¯/var/lib/docker)æå¨çååºï¼å°ä¸åå°å¶è®¡å¥ephemeral-storageçæ¶èã\n\n\n# ææ\n\nå¨å®¹å¨åå¥è¶è¿å­å¨éå¶æ¶å°±ä¼è¢«é©±éæ teststorage 0/1 evicted 0 1m\n\n\n# qos æå¡è´¨éç­çº§\n\nguaranteedï¼pod éçæ¯ä¸ªå®¹å¨é½å¿é¡»æåå­/cpu éå¶åè¯·æ±ï¼èä¸å¼å¿é¡»ç¸ç­ã burstableï¼pod éè³å°æä¸ä¸ªå®¹å¨æåå­æè cpu è¯·æ±ä¸ä¸æ»¡è¶³ guarantee ç­çº§çè¦æ±ï¼å³åå­/cpu çå¼è®¾ç½®çä¸åã besteffortï¼å®¹å¨å¿é¡»æ²¡æä»»ä½åå­æè cpu çéå¶æè¯·æ±ã\n\nä¸ä¸ªçº§å«çä¼åçº§ä»ä½å°é«çé¡ºåºæ¯ï¼ besteffort pods -> burstable pods -> guaranteed pods\n\nå¯åç¼©èµæºï¼å¦cpuï¼å³ä½¿cpu è¶éï¼ä¹å¯ä»¥ååæ¶é´çè¿è¡ï¼åªæ¯è¿è¡åæ¢ï¼è¿ç¨ä¸ä¼æã ä¸å¯åç¼©èµæºï¼memory/storageï¼åå­ä¸åäºcpuï¼ç³»ç»åå­ä¸è¶³æ¶ï¼ä¼è§¦å oomææ­»è¿ç¨ï¼æç§oom score æ¥ç¡®å®åkillè°ï¼oom_score_adjå¼è¶é«ï¼è¢«kill çä¼åçº§è¶é«ã\n\n\n# resourceversion\n\nç»å¤§é¨åæåµä¸ï¼apiserver ç´æ¥ä»æ¬å°ç¼å­æä¾æå¡ï¼å ä¸ºå®ç¼å­äºéç¾¤å¨éæ°æ®ï¼ï¼ æäºç¹æ®æåµï¼ä¾å¦ï¼ å®¢æ·ç«¯æç¡®è¦æ±ä» etcd è¯»æ°æ®ï¼è¿½æ±æé«çæ°æ®åç¡®æ§ï¼ apiserver æ¬å°ç¼å­è¿æ²¡å»ºå¥½ å¯¹äºéç»æåçæ°æ®å­å¨ç³»ç»æ¥è¯´ï¼listæä½éå¸¸é½æ¯éå¸¸ééçº§çï¼ä¸ä»å ç¨å¤§éç ç£ç ioãç½ç»å¸¦å®½å cpuãk8sçlistè¯·æ±å¤§é¨åé½åºè¯¥è¢«apiserveræ¡ä½ï¼ä»å®çæ¬å°ç¼å­æä¾æå¡ï¼ä½å¦æä½¿ç¨ä¸å½ï¼å°±ä¼è·³è¿ç¼å­ç´æ¥å°è¾¾ etcdï¼æå¾å¤§çç¨³å®æ§é£é©ã\n\ngetè¯·æ±ï¼getoptions{}ä¸listoption{}ä¸æ ·ï¼ä¸è®¾ç½®resourceversion=0ä¼å¯¼è´ apiserverå»etcdæ¿æ°æ®ï¼åºè¯¥å°½éé¿åã\n\nwhen specified with a watch call, shows changes that occur after that particular version of a resource. defaults to changes from the beginning of history. \nwhen specified for list: \n\n\n1\n2\n\n * if unset, then the result is returned from remote storage based on quorum-read flag;\n * if it\'s 0, then we simply return what we currently have in cache, no guarantee;\n * if set to non zero, then the result is at least as fresh as given rv. æªæå®resourceversionï¼è·åææ°æ°æ®ï¼apiserveræ¶å°è¿ä¸ªç±»åçè¯»è¯·æ±åï¼ä¼åetcdååºçº¿æ§è¯»è¯·æ±è·åetcdææ°æ°æ® resourceversion=â0â,è·åapiserverçç¼å­æ°æ®ï¼æå¯è½æ¯è¿ææ°æ®ã resouceversionä¸ºé0çå­ç¬¦ä¸²ï¼è·åä¸å°äºè¯¥versionçæ°æ®ã é»è®¤æ¯æªæå®resouceversionã å¦æå®¢æ·ç«¯æ²¡ä¼ listoptionï¼ååå§åä¸ä¸ªé»è®¤å¼ï¼å¶ä¸­çresourceversionè®¾ç½®ä¸ºç©ºå­ç¬¦ä¸²ï¼ è¿å°ä½¿apiserverä»etcdæåæ°æ®æ¥è¿åç»å®¢æ·ç«¯ï¼èä¸ä½¿ç¨æ¬å°ç¼å­ï¼é¤éæ¬å°ç¼å­è¿æ²¡æå»ºå¥½ï¼ã resourceversion=0å°å¯¼è´limitè¢«å¿½ç¥ï¼ä¹å°±æ¯è¯´ï¼ è½ç¶æå®äºlimitï¼ä½è¯·æ±ä¼è¿åå¨éæ°æ®ã ä» v1.19 çæ¬å¼å§ï¼kubernetes api æå¡å¨æ¯æ list è¯·æ±ç resourceversionmatch åæ°\n\n\n# è°ä¼å»ºè®®\n\nlist è¯·æ±é»è®¤è®¾ç½® resourceversion=0 ä¼åä½¿ç¨ namespaced api éè¿label/field selectoråè¿æ»¤\n\nhttp://arthurchiao.art/blog/k8s-reliability-list-data-zh https://www.pudn.com/news/62c14ac49f2d63494a8b7887.html https://kubernetes.io/zh-cn/docs/reference/_print/\n\n\n# ä¸»æºç½ç»hostnetwork\n\n * podä½¿ç¨ä¸»æºç½ç»åªéè¦å¨éç½®ä¸­æ·»å hostnetwork: trueå³å¯\n * é¨ç½²åå¯ä»¥çå°podçipä¸èç¹çipç¸åï¼è¯´æpodç´æ¥ä½¿ç¨äºä¸»æºç½ç»ã\n * podç´æ¥ä½¿ç¨ä¸»æºçç½ç»ä¼å ç¨å®¿ä¸»æºçç«¯å£ï¼podçipå°±æ¯å®¿ä¸»æºçipï¼ä½¿ç¨æ¶éè¦èèæ¯å¦ä¸ä¸»æºä¸çç«¯å£å²çª\n * ç±äºå ç¨ä¸»æºç«¯å£ï¼ä½¿ç¨deploymenté¨ç½²hostnetworkç±»åpodæ¶ï¼è¦æ³¨æpodçå¯æ¬æ°ä¸è¦è¶è¿èç¹æ°éï¼å¦åä¼å¯¼è´ä¸ä¸ªèç¹ä¸è°åº¦äºå¤ä¸ªpodï¼podå¯å¨æ¶ç«¯å£å²çªæ æ³åå»º\n\n\n# podçéå¯ç­ç¥\n\nalwaysï¼ä½å¡podå¯¹è±¡ç»æ­¢å°±éå¯ï¼æ­¤ä¸ºé»è®¤ç­ç¥ã\n\nonfailureï¼ä»å¨podå¯¹è±¡åºç°éè¯¯æ¶æéå¯\n\n\n# å é¤ä¸ä¸ªpodä¼åçä»ä¹äºæï¼\n\nkube-apiserverä¼æ¥åå°ç¨æ·çå é¤æä»¤ï¼é»è®¤æ30ç§æ¶é´ç­å¾ä¼ééåºï¼è¶è¿30ç§ä¼è¢«æ è®°ä¸ºæ­»äº¡ç¶æï¼æ­¤æ¶podçç¶æterminatingï¼kubeletçå°podæ è®°ä¸ºterminatingå°±å¼å§äºå³é­podçå·¥ä½ï¼\n\nå³é­æµç¨å¦ä¸ï¼ 1ã podä»serviceçendpointåè¡¨ä¸­è¢«ç§»é¤ï¼ 2ã å¦æè¯¥podå®ä¹äºä¸ä¸ªåæ­¢åçé©å­ï¼å¶ä¼å¨podåé¨è¢«è°ç¨ï¼åæ­¢é©å­ä¸è¬å®ä¹äºå¦ä½ä¼éçç»æè¿ç¨ï¼ 3ã è¿ç¨è¢«åétermä¿¡å·ï¼kill -14ï¼ 4ã å½è¶è¿ä¼ééåºçæ¶é´åï¼podä¸­çææè¿ç¨é½ä¼è¢«åésigkillä¿¡å·ï¼kill -9ï¼ã\n\n\n# éåæåç­ç¥ imagepullpolicy\n\nalwaysï¼ä¸ç®¡éåæ¯å¦å­å¨é½ä¼è¿è¡ä¸æ¬¡æå neverï¼ä¸ç®¡éåæ¯å¦å­å¨é½ä¸ä¼è¿è¡æå ifnotpresentï¼åªæéåä¸å­å¨æ¶ï¼æä¼è¿è¡éåæå\n\n\n# ä¸ºå®¹å¨éç½®hosts\n\n\n# éç½®å¨äºçº§ipsecä¸ï¼åcointarinersåçº§\n\nspec:\n   ...\n    spec:\n      hostaliases:\n      - ip: "172.16.0.12"\n        hostnames:\n        - "api.cc.pro"\n      containers:\n      - name: cc-x\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®¹å¨ä¿®æ¹hostname\n\nspec:\n  hostname: busybox-1\n  subdomain: busybox-subdomain\n\n\n1\n2\n3\n\n\nå ä¸ºpodçè®¿é®ååæ¯hostname.custom-subdomain.default.svc.cluster.local\n\næä»¥è¯¥ pod çååæ¯ busybox-1.busybox-subdomain.default.svc.cluster.localã\n\n\n# kubernetes æå®èç¹nodenameä¸nodeselector\n\npod.spec.nodenameç¨äºå¼ºå¶çº¦æå°podè°åº¦å°æå®çnodeèç¹ä¸ï¼è¿éè¯´æ¯âè°åº¦âï¼ä½å¶å®æå®äºnodenameçpodä¼ç´æ¥è·³è¿schedulerçè°åº¦é»è¾ï¼ç´æ¥åå¥podliståè¡¨ï¼è¯¥å¹éè§åæ¯å¼ºå¶å¹éã pod.spec.nodeselectoræ¯éè¿kubernetesçlabel-selectoræºå¶è¿è¡èç¹éæ©ï¼ç±schedulerè°åº¦ç­ç¥matchnodeselectorè¿è¡labelå¹éï¼è°åº¦podå°ç®æ èç¹ï¼è¯¥å¹éè§åæ¯å¼ºå¶çº¦æãå¯ç¨èç¹éæ©å¨çæ­¥éª¤ä¸ºï¼nodeæ·»å labelæ è®°>podå®ä¹ä¸­æ·»å nodeselector\n\n\n#',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"pod cgroupåèµæºéå¶",frontmatter:{title:"pod cgroupåèµæºéå¶",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s04/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã",meta:[{name:"twitter:title",content:"pod cgroupåèµæºéå¶"},{name:"twitter:description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"pod cgroupåèµæºéå¶"},{property:"og:description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"pod cgroupåèµæºéå¶"},{itemprop:"description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/04.pod cgroupåèµæºéå¶.md",key:"v-26c04c03",path:"/pages/k8s04/",headers:[{level:2,title:"K8sä¸­çCgroups",slug:"k8sä¸­çcgroups",normalizedTitle:"k8sä¸­çcgroups",charIndex:1589},{level:3,title:"å®¹å¨çº§å«çCgroup",slug:"å®¹å¨çº§å«çcgroup",normalizedTitle:"å®¹å¨çº§å«çcgroup",charIndex:1936},{level:3,title:"Podçº§å«çCgroup",slug:"podçº§å«çcgroup",normalizedTitle:"podçº§å«çcgroup",charIndex:2119},{level:3,title:"QoSçº§å«çCgroup",slug:"qosçº§å«çcgroup",normalizedTitle:"qosçº§å«çcgroup",charIndex:2635},{level:3,title:"èç¹Nodeçº§å«çCgroup",slug:"èç¹nodeçº§å«çcgroup",normalizedTitle:"èç¹nodeçº§å«çcgroup",charIndex:3026},{level:2,title:"èµæºéå¶",slug:"èµæºéå¶",normalizedTitle:"èµæºéå¶",charIndex:3145},{level:3,title:"Eviction",slug:"eviction",normalizedTitle:"eviction",charIndex:3723},{level:2,title:"å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",slug:"å®¹å¨æ¯ä¸ä¸ª-åè¿ç¨-æ¨¡å",normalizedTitle:"å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",charIndex:4226}],headersStr:"K8sä¸­çCgroups å®¹å¨çº§å«çCgroup Podçº§å«çCgroup QoSçº§å«çCgroup èç¹Nodeçº§å«çCgroup èµæºéå¶ Eviction å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã\n\n[root@localhost ~]# mount -t cgroup\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_prio,net_cls)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct,cpu)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\ncpusetãcpuã memoryå­ç³»ç»\n\ncfs_periodåcfs_quota:éå¶è¿ç¨å¨é¿åº¦ä¸ºcfs_periodçä¸æ®µæ¶é´åï¼åªè½è¢«åéå°æ»éä¸ºcfs_quotaçCPUæ¶é´,CPU quotaé»è®¤æ²¡æä»»ä½éå¶ï¼å³ï¼-1ï¼,CPU periodé»è®¤100 msï¼100000 usï¼\n\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_quota_us\n-1\n\n\n1\n2\n3\n4\n\n\næ³¨ï¼ å¯åç¼©èµæºï¼cpuç­(å½å¯åç¼©èµæºä¸è¶³æ¶ï¼Podåªä¼âé¥¥é¥¿âï¼ä½ä¸ä¼éåº) éå¯åç¼©èµæºï¼ mem(å½ä¸å¯åç¼©èµæºä¸è¶³æ¶ï¼Podå°±ä¼å ä¸ºOOMï¼Out-Of-Memoryï¼è¢«åæ ¸ææã)\n\n\n# K8sä¸­çCgroups\n\nkubeletå¯å¨æ¶ï¼å®ä¼æ ¹æ®éè¦åå»ºä¸ä¸ª4å±çcgroupæ ã\n\n * Node(root) cgroup\n * QoS cgroup\n * Pod cgroup\n * Container cgroup\n\nKubeletè¿è¡å¨Kuberneteséç¾¤çå·¥ä½èç¹ä¸ï¼ç®¡çpodççå½å¨æï¼è¿æ¥å°CRIãCNIãCSIç­è¿è¡æ¶æ¥å£ï¼éè¿cgroupæç§éç½®åpodæä¾èµæºï¼å¹¶å¨ä½¿ç¨è¶è¿æ¶å é¤æOOMKilled podã\n\nkubeletä¸­çææcgroupæä½é½æ¯ç±å¶åé¨çcontainerManageræ¨¡åå®ç°çï¼è¯¥æ¨¡åéè¿cgroup(ä»ä¸å°ä¸)å¯¹èµæºä½¿ç¨è¿è¡éå±éå¶\n\n> container-> pod-> qos -> node(root)ã\n\n\n# å®¹å¨çº§å«çCgroup\n\n * å¦æå®¹å¨è¶åºå¶åå­éå¶ï¼åå¯è½ç»æ­¢è¯¥å®¹å¨ãå¦æå®æ¯å¯éæ°å¯å¨çï¼kubeletå°éæ°å¯å¨å®ï¼å°±åå¤çä»»ä½å¶ä»ç±»åçè¿è¡æ¶æéä¸æ ·ã\n * å¦æå®¹å¨è¶åºäºå®çåå­è¯·æ±ï¼é£ä¹æ¯å½èç¹èå°½åå­æ¶ï¼å®çPodå¾å¯è½ä¼è¢«éåºã\n * å®¹å¨å¯è½è¢«åè®¸ï¼ä¹å¯è½ä¸è¢«åè®¸å¨è¾é¿æ¶é´åè¶è¿å¶CPUéå¶ãä½æ¯ï¼å®ä¸ä¼å ä¸ºCPUå ç¨è¿å¤èè¢«ææ­»ã\n\n\n# Podçº§å«çCgroup\n\næ¯ä¸ªpodé½æä¸å®çå¼éèµæºï¼æ¯å¦ç±sandboxå®¹å¨ædocker containerd-shim(å¨1.22ä¸­å é¤)ä½¿ç¨çèµæºãå¦å¤ï¼podå¨æå®åå­ç±»åçå·æ¶ä¹ä¼å ç¨åå­èµæºã\n\n * è®¡ç®ææpodå®¹å¨çCPUè¯·æ±/éå¶ååå­éå¶ï¼å¹¶å°CPUè¯·æ±/éå¶è½¬æ¢ä¸ºcpuharesåcpuQuotaã\n\n> pod/cpu.shares = sum(pod.spec.containers.resources.requests[cpu]) pod/cpu.cfs_quota_us = sum(pod.spec.containers.resources.limits[cpu]) pod/memory.limit_in_bytes = sum(pod.spec.containers.resources.limits[memory])\n\n * åªæpod cgroupçcpuãå¦æå¶ä¸­ä¸ä¸ªå®¹å¨åªæå®è¯·æ±èä¸æå®éå¶ï¼åå°è®¾ç½®å±äº«å¼ï¼èä¸è®¾ç½®å¶éå¶å¼ã\n\n * åªè®¾ç½®cpuãå½æ å®¹å¨æå®è¯·æ±å¼æéå¶å¼æ¶å±äº«ï¼å³podå¨èµæºç©ºé²æ¶ä½¿ç¨ææèç¹èµæºï¼å¨èµæºåéæ¶ä¸è·åä»»ä½èµæºï¼ç¬¦åä½ä¼åçº§åå\n\n\n# QoSçº§å«çCgroup\n\n * Guaranteed(ä¿è¯å)::ç±è¯·æ±è®¾ç½®çå¼ç­äºç±éå¶è®¾ç½®çå¼ã å½Podéçæ¯ä¸ä¸ªContaineré½åæ¶è®¾ç½®äºrequestsålimitsï¼å¹¶ä¸requestsålimitså¼ç¸ç­çæ¶åï¼è¿ä¸ªPodå°±å±äºGuaranteedç±»å«\n * Burstable(çªå¢å):è¯·æ±è®¾ç½®çå¼å°äºéå¶è®¾ç½®çå¼ï¼ä½æ¯!= 0ã èå½Podä¸æ»¡è¶³Guaranteedçæ¡ä»¶ï¼ä½è³å°æä¸ä¸ªContainerè®¾ç½®äºrequestsãé£ä¹è¿ä¸ªPodå°±ä¼è¢«ååå°Burstableç±»å«\n * BestEffort(å°½åèä¸ºå):è¯·æ±åéå¶è®¾ç½®çå¼é½æ¯0ã ä¼åçº§æ¯ èå¦æä¸ä¸ªPodæ¢æ²¡æè®¾ç½®requestsï¼ä¹æ²¡æè®¾ç½®limitsï¼é£ä¹å®çQoSç±»å«å°±æ¯BestEffort\n\n> Guaranteed > Burstable > BestEffort\n\n\n# èç¹Nodeçº§å«çCgroup\n\n * ä¸å¡æµç¨ä½¿ç¨çèµæºï¼å³podä½¿ç¨çèµæºã\n * Kubernetesç»ä»¶ä½¿ç¨çèµæºï¼å¦kubeletådockerã\n * ç³»ç»ç»ä»¶ä½¿ç¨çèµæºï¼å¦logindãjournaldåå¶ä»è¿ç¨ã\n\n\n# èµæºéå¶\n\nå¨è°åº¦çæ¶åï¼kube-scheduleråªä¼æç§requestsçå¼è¿è¡è®¡ç®ãèå¨çæ­£è®¾ç½®Cgroupséå¶çæ¶åï¼kubeletåä¼æç§limitsçå¼æ¥è¿è¡è®¾ç½®ã\n\n * å½ä½ æå®äºrequests.cpu=250mä¹åï¼ç¸å½äºå°Cgroupsçcpu.sharesçå¼è®¾ç½®ä¸º(250/1000)*1024ãèå½ä½ æ²¡æè®¾ç½®requests.cpuçæ¶åï¼cpu.sharesé»è®¤åæ¯1024\n\n * å¦æä½ æå®äºlimits.cpu=500mä¹åï¼åç¸å½äºå°Cgroupsçcpu.cfs_quota_usçå¼è®¾ç½®ä¸º(500/1000)*100msï¼ècpu.cfs_period_usçå¼å§ç»æ¯100msãè¿æ ·ï¼Kuberneteså°±ä¸ºä½ è®¾ç½®äºè¿ä¸ªå®¹å¨åªè½ç¨å°CPUç50%ã\n\n * å¯¹äºåå­æ¥è¯´ï¼å½ä½ æå®äºlimits.memory=128Miä¹åï¼ç¸å½äºå°Cgroupsçmemory.limit_in_bytesè®¾ç½®ä¸º128 * 1024 * 1024ã\n\n> Kubernetesè¿ç§å¯¹CPUååå­èµæºéé¢çè®¾è®¡ï¼å®éä¸åèäºBorgè®ºæä¸­å¯¹âå¨æèµæºè¾¹çâçå®ä¹ï¼æ¢ï¼å®¹å¨åä½ä¸å¨æäº¤æ¶æè®¾ç½®çèµæºè¾¹çï¼å¹¶ä¸ä¸å®æ¯è°åº¦ç³»ç»æå¿é¡»ä¸¥æ ¼éµå®çï¼è¿æ¯å ä¸ºå¨å®éåºæ¯ä¸­ï¼å¤§å¤æ°ä½ä¸ä½¿ç¨å°çèµæºå¶å®è¿å°äºå®æè¯·æ±çèµæºéé¢ã\n\n\n# Eviction\n\nç®åï¼Kubernetesä¸ºä½ è®¾ç½®çEvictionçé»è®¤éå¼å¦ä¸æç¤ºï¼\n\nmemory.available<100Mi nodefs.available<10% nodefs.inodesFree<5% imagefs.available<15% å½ç¶ï¼ä¸è¿°åä¸ªè§¦åæ¡ä»¶å¨kubeletéé½æ¯å¯éç½®çãæ¯å¦ä¸é¢è¿ä¸ªä¾å­ï¼\n\nkubelet --eviction-hard=imagefs.available<10%,memory.available<500Mi,nodefs.available<5%,nodefs.inodesFree<5% --eviction-soft=imagefs.available<30%,nodefs.available<10% --eviction-soft-grace-period=imagefs.available=2m,nodefs.available=2m --eviction-max-pod-grace-period=600 å¨è¿ä¸ªéç½®ä¸­ï¼ä½ å¯ä»¥çå°Evictionå¨Kuberneteséå¶å®åä¸ºSoftåHardä¸¤ç§æ¨¡å¼ã\n\n\n# å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",normalizedContent:"cgroups æ¯ control groups çç¼©åï¼ç± linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼cpuãåå­ãi/oï¼ã\n\n[root@localhost ~]# mount -t cgroup\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_prio,net_cls)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct,cpu)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\ncpusetãcpuã memoryå­ç³»ç»\n\ncfs_periodåcfs_quota:éå¶è¿ç¨å¨é¿åº¦ä¸ºcfs_periodçä¸æ®µæ¶é´åï¼åªè½è¢«åéå°æ»éä¸ºcfs_quotaçcpuæ¶é´,cpu quotaé»è®¤æ²¡æä»»ä½éå¶ï¼å³ï¼-1ï¼,cpu periodé»è®¤100 msï¼100000 usï¼\n\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_quota_us\n-1\n\n\n1\n2\n3\n4\n\n\næ³¨ï¼ å¯åç¼©èµæºï¼cpuç­(å½å¯åç¼©èµæºä¸è¶³æ¶ï¼podåªä¼âé¥¥é¥¿âï¼ä½ä¸ä¼éåº) éå¯åç¼©èµæºï¼ mem(å½ä¸å¯åç¼©èµæºä¸è¶³æ¶ï¼podå°±ä¼å ä¸ºoomï¼out-of-memoryï¼è¢«åæ ¸ææã)\n\n\n# k8sä¸­çcgroups\n\nkubeletå¯å¨æ¶ï¼å®ä¼æ ¹æ®éè¦åå»ºä¸ä¸ª4å±çcgroupæ ã\n\n * node(root) cgroup\n * qos cgroup\n * pod cgroup\n * container cgroup\n\nkubeletè¿è¡å¨kuberneteséç¾¤çå·¥ä½èç¹ä¸ï¼ç®¡çpodççå½å¨æï¼è¿æ¥å°criãcniãcsiç­è¿è¡æ¶æ¥å£ï¼éè¿cgroupæç§éç½®åpodæä¾èµæºï¼å¹¶å¨ä½¿ç¨è¶è¿æ¶å é¤æoomkilled podã\n\nkubeletä¸­çææcgroupæä½é½æ¯ç±å¶åé¨çcontainermanageræ¨¡åå®ç°çï¼è¯¥æ¨¡åéè¿cgroup(ä»ä¸å°ä¸)å¯¹èµæºä½¿ç¨è¿è¡éå±éå¶\n\n> container-> pod-> qos -> node(root)ã\n\n\n# å®¹å¨çº§å«çcgroup\n\n * å¦æå®¹å¨è¶åºå¶åå­éå¶ï¼åå¯è½ç»æ­¢è¯¥å®¹å¨ãå¦æå®æ¯å¯éæ°å¯å¨çï¼kubeletå°éæ°å¯å¨å®ï¼å°±åå¤çä»»ä½å¶ä»ç±»åçè¿è¡æ¶æéä¸æ ·ã\n * å¦æå®¹å¨è¶åºäºå®çåå­è¯·æ±ï¼é£ä¹æ¯å½èç¹èå°½åå­æ¶ï¼å®çpodå¾å¯è½ä¼è¢«éåºã\n * å®¹å¨å¯è½è¢«åè®¸ï¼ä¹å¯è½ä¸è¢«åè®¸å¨è¾é¿æ¶é´åè¶è¿å¶cpuéå¶ãä½æ¯ï¼å®ä¸ä¼å ä¸ºcpuå ç¨è¿å¤èè¢«ææ­»ã\n\n\n# podçº§å«çcgroup\n\næ¯ä¸ªpodé½æä¸å®çå¼éèµæºï¼æ¯å¦ç±sandboxå®¹å¨ædocker containerd-shim(å¨1.22ä¸­å é¤)ä½¿ç¨çèµæºãå¦å¤ï¼podå¨æå®åå­ç±»åçå·æ¶ä¹ä¼å ç¨åå­èµæºã\n\n * è®¡ç®ææpodå®¹å¨çcpuè¯·æ±/éå¶ååå­éå¶ï¼å¹¶å°cpuè¯·æ±/éå¶è½¬æ¢ä¸ºcpuharesåcpuquotaã\n\n> pod/cpu.shares = sum(pod.spec.containers.resources.requests[cpu]) pod/cpu.cfs_quota_us = sum(pod.spec.containers.resources.limits[cpu]) pod/memory.limit_in_bytes = sum(pod.spec.containers.resources.limits[memory])\n\n * åªæpod cgroupçcpuãå¦æå¶ä¸­ä¸ä¸ªå®¹å¨åªæå®è¯·æ±èä¸æå®éå¶ï¼åå°è®¾ç½®å±äº«å¼ï¼èä¸è®¾ç½®å¶éå¶å¼ã\n\n * åªè®¾ç½®cpuãå½æ å®¹å¨æå®è¯·æ±å¼æéå¶å¼æ¶å±äº«ï¼å³podå¨èµæºç©ºé²æ¶ä½¿ç¨ææèç¹èµæºï¼å¨èµæºåéæ¶ä¸è·åä»»ä½èµæºï¼ç¬¦åä½ä¼åçº§åå\n\n\n# qosçº§å«çcgroup\n\n * guaranteed(ä¿è¯å)::ç±è¯·æ±è®¾ç½®çå¼ç­äºç±éå¶è®¾ç½®çå¼ã å½podéçæ¯ä¸ä¸ªcontaineré½åæ¶è®¾ç½®äºrequestsålimitsï¼å¹¶ä¸requestsålimitså¼ç¸ç­çæ¶åï¼è¿ä¸ªpodå°±å±äºguaranteedç±»å«\n * burstable(çªå¢å):è¯·æ±è®¾ç½®çå¼å°äºéå¶è®¾ç½®çå¼ï¼ä½æ¯!= 0ã èå½podä¸æ»¡è¶³guaranteedçæ¡ä»¶ï¼ä½è³å°æä¸ä¸ªcontainerè®¾ç½®äºrequestsãé£ä¹è¿ä¸ªpodå°±ä¼è¢«ååå°burstableç±»å«\n * besteffort(å°½åèä¸ºå):è¯·æ±åéå¶è®¾ç½®çå¼é½æ¯0ã ä¼åçº§æ¯ èå¦æä¸ä¸ªpodæ¢æ²¡æè®¾ç½®requestsï¼ä¹æ²¡æè®¾ç½®limitsï¼é£ä¹å®çqosç±»å«å°±æ¯besteffort\n\n> guaranteed > burstable > besteffort\n\n\n# èç¹nodeçº§å«çcgroup\n\n * ä¸å¡æµç¨ä½¿ç¨çèµæºï¼å³podä½¿ç¨çèµæºã\n * kubernetesç»ä»¶ä½¿ç¨çèµæºï¼å¦kubeletådockerã\n * ç³»ç»ç»ä»¶ä½¿ç¨çèµæºï¼å¦logindãjournaldåå¶ä»è¿ç¨ã\n\n\n# èµæºéå¶\n\nå¨è°åº¦çæ¶åï¼kube-scheduleråªä¼æç§requestsçå¼è¿è¡è®¡ç®ãèå¨çæ­£è®¾ç½®cgroupséå¶çæ¶åï¼kubeletåä¼æç§limitsçå¼æ¥è¿è¡è®¾ç½®ã\n\n * å½ä½ æå®äºrequests.cpu=250mä¹åï¼ç¸å½äºå°cgroupsçcpu.sharesçå¼è®¾ç½®ä¸º(250/1000)*1024ãèå½ä½ æ²¡æè®¾ç½®requests.cpuçæ¶åï¼cpu.sharesé»è®¤åæ¯1024\n\n * å¦æä½ æå®äºlimits.cpu=500mä¹åï¼åç¸å½äºå°cgroupsçcpu.cfs_quota_usçå¼è®¾ç½®ä¸º(500/1000)*100msï¼ècpu.cfs_period_usçå¼å§ç»æ¯100msãè¿æ ·ï¼kuberneteså°±ä¸ºä½ è®¾ç½®äºè¿ä¸ªå®¹å¨åªè½ç¨å°cpuç50%ã\n\n * å¯¹äºåå­æ¥è¯´ï¼å½ä½ æå®äºlimits.memory=128miä¹åï¼ç¸å½äºå°cgroupsçmemory.limit_in_bytesè®¾ç½®ä¸º128 * 1024 * 1024ã\n\n> kubernetesè¿ç§å¯¹cpuååå­èµæºéé¢çè®¾è®¡ï¼å®éä¸åèäºborgè®ºæä¸­å¯¹âå¨æèµæºè¾¹çâçå®ä¹ï¼æ¢ï¼å®¹å¨åä½ä¸å¨æäº¤æ¶æè®¾ç½®çèµæºè¾¹çï¼å¹¶ä¸ä¸å®æ¯è°åº¦ç³»ç»æå¿é¡»ä¸¥æ ¼éµå®çï¼è¿æ¯å ä¸ºå¨å®éåºæ¯ä¸­ï¼å¤§å¤æ°ä½ä¸ä½¿ç¨å°çèµæºå¶å®è¿å°äºå®æè¯·æ±çèµæºéé¢ã\n\n\n# eviction\n\nç®åï¼kubernetesä¸ºä½ è®¾ç½®çevictionçé»è®¤éå¼å¦ä¸æç¤ºï¼\n\nmemory.available<100mi nodefs.available<10% nodefs.inodesfree<5% imagefs.available<15% å½ç¶ï¼ä¸è¿°åä¸ªè§¦åæ¡ä»¶å¨kubeletéé½æ¯å¯éç½®çãæ¯å¦ä¸é¢è¿ä¸ªä¾å­ï¼\n\nkubelet --eviction-hard=imagefs.available<10%,memory.available<500mi,nodefs.available<5%,nodefs.inodesfree<5% --eviction-soft=imagefs.available<30%,nodefs.available<10% --eviction-soft-grace-period=imagefs.available=2m,nodefs.available=2m --eviction-max-pod-grace-period=600 å¨è¿ä¸ªéç½®ä¸­ï¼ä½ å¯ä»¥çå°evictionå¨kuberneteséå¶å®åä¸ºsoftåhardä¸¤ç§æ¨¡å¼ã\n\n\n# å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"æµééå¶",frontmatter:{title:"æµééå¶",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s05/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`',meta:[{name:"twitter:title",content:"æµééå¶"},{name:"twitter:description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æµééå¶"},{property:"og:description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"æµééå¶"},{itemprop:"description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/05.æµééå¶.md",key:"v-4d3d3bec",path:"/pages/k8s05/",headers:[{level:2,title:"æµééå¶éªè¯",slug:"æµééå¶éªè¯",normalizedTitle:"æµééå¶éªè¯",charIndex:313}],headersStr:"æµééå¶éªè¯",content:'# kubeletå¯å¨åæ°ï¼\n\n> --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin --network-plugin=cni\n\nsystemctl cat kubelet | grep network-plugin\n\n\n1\n\n\n\n# calicoéç½®\n\n[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n\n\n1\n2\n\n\n\n# æµééå¶éªè¯\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: netperf-server\n  annotations:\n    kubernetes.io/egress-bandwidth: 1M\n    kubernetes.io/ingress-bandwidth: 1M\nspec:\n  containers:\n  - image: sirot/netperf-latest\n    command: ["/bin/sh","-c","netserver -p 4444 -4; iperf3 -s -i 1;"]\n    imagePullPolicy: IfNotPresent\n    name: netperf\n    ports:\n    - name: netperf-port\n      containerPort: 4444\n    - name: iperf-port\n      containerPort: 5210\n  restartPolicy: Always\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n> æ³¨ï¼ podåå»ºåä¿®æ¹annotationæ æï¼éè¦éå¯podæçæ å¦æä¸æ¯dockerèæ¯ä½¿ç¨containerdä½ä¸ºruntimeï¼éè¦containerd 1.4çæ¬æè½æ¯æã\n\n tc qdisc show\n\n...\n\nqdisc tbf 1: dev cali90ab6b94883 root refcnt 2 rate 1000Kbit burst 27917286b lat 1924.2s\n\nqdisc ingress ffff: dev cali90ab6b94883 parent ffff:fff1 ----------------\n\nqdisc tbf 1: dev 31b3 root refcnt 2 rate 1000Kbit burst 27917286b lat 1924.2s\n\nroot@netperf-server:/# iperf3 -c 10.19.0.13\n\nConnecting to host 10.19.0.13, port 5201\n\n[  4] local 10.242.235.108 port 46514 connected to 10.19.0.13 port 5201\n\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n\n[  4]   0.00-1.00   sec  26.2 MBytes   220 Mbits/sec    1    274 KBytes\n\n[  4]   1.00-2.00   sec  0.00 Bytes  0.00 bits/sec    0    275 KBytes\n\n[  4]   2.00-3.00   sec  0.00 Bytes  0.00 bits/sec    0    278 KBytes\n\n[  4]   3.00-4.00   sec   331 KBytes  2.71 Mbits/sec    0    285 KBytes\n\n[  4]   4.00-5.00   sec  0.00 Bytes  0.00 bits/sec    0    295 KBytes\n\n[  4]   5.00-6.00   sec   382 KBytes  3.13 Mbits/sec    0    312 KBytes\n\n[  4]   6.00-7.00   sec  0.00 Bytes  0.00 bits/sec    0    332 KBytes\n\n[  4]   7.00-8.00   sec  0.00 Bytes  0.00 bits/sec    0    361 KBytes\n\n[  4]   8.00-9.00   sec   446 KBytes  3.65 Mbits/sec    0    389 KBytes\n\n^C[  4]   9.00-9.55   sec  0.00 Bytes  0.00 bits/sec    0    405 KBytes\n\n- - - - - - - - - - - - - - - - - - - - - - - - -\n\n[ ID] Interval           Transfer     Bandwidth       Retr\n\n[  4]   0.00-9.55   sec  27.4 MBytes  24.1 Mbits/sec    1             sender\n\n[  4]   0.00-9.55   sec  0.00 Bytes  0.00 bits/sec                  receiver\n\niperf3: interrupt - the client has terminated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n',normalizedContent:'# kubeletå¯å¨åæ°ï¼\n\n> --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin --network-plugin=cni\n\nsystemctl cat kubelet | grep network-plugin\n\n\n1\n\n\n\n# calicoéç½®\n\n[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n\n\n1\n2\n\n\n\n# æµééå¶éªè¯\n\napiversion: v1\nkind: pod\nmetadata:\n  name: netperf-server\n  annotations:\n    kubernetes.io/egress-bandwidth: 1m\n    kubernetes.io/ingress-bandwidth: 1m\nspec:\n  containers:\n  - image: sirot/netperf-latest\n    command: ["/bin/sh","-c","netserver -p 4444 -4; iperf3 -s -i 1;"]\n    imagepullpolicy: ifnotpresent\n    name: netperf\n    ports:\n    - name: netperf-port\n      containerport: 4444\n    - name: iperf-port\n      containerport: 5210\n  restartpolicy: always\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n> æ³¨ï¼ podåå»ºåä¿®æ¹annotationæ æï¼éè¦éå¯podæçæ å¦æä¸æ¯dockerèæ¯ä½¿ç¨containerdä½ä¸ºruntimeï¼éè¦containerd 1.4çæ¬æè½æ¯æã\n\n tc qdisc show\n\n...\n\nqdisc tbf 1: dev cali90ab6b94883 root refcnt 2 rate 1000kbit burst 27917286b lat 1924.2s\n\nqdisc ingress ffff: dev cali90ab6b94883 parent ffff:fff1 ----------------\n\nqdisc tbf 1: dev 31b3 root refcnt 2 rate 1000kbit burst 27917286b lat 1924.2s\n\nroot@netperf-server:/# iperf3 -c 10.19.0.13\n\nconnecting to host 10.19.0.13, port 5201\n\n[  4] local 10.242.235.108 port 46514 connected to 10.19.0.13 port 5201\n\n[ id] interval           transfer     bandwidth       retr  cwnd\n\n[  4]   0.00-1.00   sec  26.2 mbytes   220 mbits/sec    1    274 kbytes\n\n[  4]   1.00-2.00   sec  0.00 bytes  0.00 bits/sec    0    275 kbytes\n\n[  4]   2.00-3.00   sec  0.00 bytes  0.00 bits/sec    0    278 kbytes\n\n[  4]   3.00-4.00   sec   331 kbytes  2.71 mbits/sec    0    285 kbytes\n\n[  4]   4.00-5.00   sec  0.00 bytes  0.00 bits/sec    0    295 kbytes\n\n[  4]   5.00-6.00   sec   382 kbytes  3.13 mbits/sec    0    312 kbytes\n\n[  4]   6.00-7.00   sec  0.00 bytes  0.00 bits/sec    0    332 kbytes\n\n[  4]   7.00-8.00   sec  0.00 bytes  0.00 bits/sec    0    361 kbytes\n\n[  4]   8.00-9.00   sec   446 kbytes  3.65 mbits/sec    0    389 kbytes\n\n^c[  4]   9.00-9.55   sec  0.00 bytes  0.00 bits/sec    0    405 kbytes\n\n- - - - - - - - - - - - - - - - - - - - - - - - -\n\n[ id] interval           transfer     bandwidth       retr\n\n[  4]   0.00-9.55   sec  27.4 mbytes  24.1 mbits/sec    1             sender\n\n[  4]   0.00-9.55   sec  0.00 bytes  0.00 bits/sec                  receiver\n\niperf3: interrupt - the client has terminated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ç½ç»ç­ç¥calico",frontmatter:{title:"ç½ç»ç­ç¥calico",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s06/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"https://kubernetes.io/docs/concepts/services-networking/network-policies/",meta:[{name:"twitter:title",content:"ç½ç»ç­ç¥calico"},{name:"twitter:description",content:"https://kubernetes.io/docs/concepts/services-networking/network-policies/"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ç½ç»ç­ç¥calico"},{property:"og:description",content:"https://kubernetes.io/docs/concepts/services-networking/network-policies/"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ç½ç»ç­ç¥calico"},{itemprop:"description",content:"https://kubernetes.io/docs/concepts/services-networking/network-policies/"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html",relativePath:"01.ææ¯æè°/03.kubernetes/06.ç½ç»ç­ç¥calico.md",key:"v-59c6ef63",path:"/pages/k8s06/",headers:[{level:2,title:"kubernetes NetworkPolicy",slug:"kubernetes-networkpolicy",normalizedTitle:"kubernetes networkpolicy",charIndex:2},{level:2,title:"calico NetworkPolicy",slug:"calico-networkpolicy",normalizedTitle:"calico networkpolicy",charIndex:106},{level:2,title:"ç½ç»ç­ç¥éç¦»éå¶é®é¢",slug:"ç½ç»ç­ç¥éç¦»éå¶é®é¢",normalizedTitle:"ç½ç»ç­ç¥éç¦»éå¶é®é¢",charIndex:1563},{level:3,title:"å³äºæºå°åé®é¢ï¼",slug:"å³äºæºå°åé®é¢",normalizedTitle:"å³äºæºå°åé®é¢ï¼",charIndex:1864},{level:3,title:"å»ºè®®ï¼",slug:"å»ºè®®",normalizedTitle:"å»ºè®®ï¼",charIndex:2322}],headersStr:"kubernetes NetworkPolicy calico NetworkPolicy ç½ç»ç­ç¥éç¦»éå¶é®é¢ å³äºæºå°åé®é¢ï¼ å»ºè®®ï¼",content:"# kubernetes NetworkPolicy\n\nhttps://kubernetes.io/docs/concepts/services-networking/network-policies/\n\n\n# calico NetworkPolicy\n\nhttps://docs.projectcalico.org/reference/resources/globalnetworkpolicy\n\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-default\nspec:\n  egress:\n  - action: Allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: Allow\n    destination: {}\n    source: {}\n  order: 9999\n  types:\n  - Ingress\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-egress-deny\nspec:\n  egress:\n  - action: Deny\n    destination:\n      selector: area == 'dummy'\n    source: {}\n  namespaceSelector: (! has(privileged-namespace))\n  order: 502\n  types:\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-egress-allow\nspec:\n  egress:\n  - action: Allow\n    destination:\n      nets:\n      - 127.0.0.1/32\n    source:\n      namespaceSelector: name == \"dummy\"\n  order: 501\n  types:\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-privileged-namespace\nspec:\n  egress:\n  - action: Allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: Allow\n    destination: {}\n    source: {}\n  namespaceSelector: has(privileged-namespace)\n  order: 500\n  types:\n  - Ingress\n  - Egress\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n\n\n\n# ç½ç»ç­ç¥éç¦»éå¶é®é¢\n\n * é»è®¤æåµä¸ï¼åéå°serviceçæ°æ®åType=LoadBalancer/NodePortä¼ç»è¿SNATï¼ä¼å¯¼è´ç½ç»ç­ç¥ä¸çæ\n * ç½ç»ç­ç¥ä¸è½éå¶ä¸»æºè®¿é®ï¼å³ä¾¿è®¾ç½®äºææç½æ®µæç»ã (Traffic from a host to its workload endpoints (e.g. Kubernetes pods) is always allowed, despite any policy in place. This ensures that kubelet liveness and readiness probes always work.)\n\n\n# å³äºæºå°åé®é¢ï¼\n\n 1. éç¾¤åéè¿podipè®¿é®ä¸å®ä¸ä¼SNAT\n 2. éç¾¤åéè¿clusterIPè®¿é®é»è®¤ä¸ä¼SNAT\n 3. nodeportåLBé»è®¤ä¼SNAT ï¼ç½ç»ç­ç¥å¯è½ä¼æ æ³å½ä¸­ï¼\n\n * externalTrafficPolicy: Cluster ï¼é»è®¤ï¼ nodeport: å¨éç¾¤åè®¿é®çå°çIPæ¯è¯·æ±çèç¹IPï¼epæ¯è½®è®­ç å¨éç¾¤å¤è®¿é®çå°çIPæ¯è¯·æ±çèç¹IPï¼epæ¯è½®è®­ç LB: éç¾¤åè®¿é®çå°çé½æ¯å½åpodæå¨èç¹IPï¼epæ¯è½®è®­ç éç¾¤å¤è¯·æ±ä¸æ¬¡é½æ¯çå°çèç¹1ï¼åºå®ï¼çIPï¼epæ¯è½®è®­ç\n * externalTrafficPolicy: local nodeport: éç¾¤åè®¿é®è¯·æ±IPä¸å½åpodèç¹ä¸è´æ¶çå°çæ¯podIPï¼å¦åæ¯å½åpodæå¨èç¹IPï¼epåèç¹ (??????) å¨éç¾¤å¤è®¿é®çå°çæ¯çå®çIP,epå¯¹åºè¯·æ±çèç¹IP LB: éç¾¤åè®¿é®çå°çé½æ¯çå®çIPï¼å½åpodIPï¼ï¼epåèç¹ éç¾¤å¤è¯·æ±ä¸æ¬¡é½æ¯çå®çIPï¼epåèç¹\n\n\n# å»ºè®®ï¼\n\nå»ºè®®å¨æå¡éç½®ä¸­å° spec.externalTrafficPolicy è®¾ç½®ä¸º localï¼ä»¥ä¾¿æ°æ®åçæºå°åä¿æä¸åï¼å³æ°æ®åçæºå°åå°±æ¯å®¢æ·ç«¯çæºå°åã",normalizedContent:"# kubernetes networkpolicy\n\nhttps://kubernetes.io/docs/concepts/services-networking/network-policies/\n\n\n# calico networkpolicy\n\nhttps://docs.projectcalico.org/reference/resources/globalnetworkpolicy\n\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-default\nspec:\n  egress:\n  - action: allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: allow\n    destination: {}\n    source: {}\n  order: 9999\n  types:\n  - ingress\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-egress-deny\nspec:\n  egress:\n  - action: deny\n    destination:\n      selector: area == 'dummy'\n    source: {}\n  namespaceselector: (! has(privileged-namespace))\n  order: 502\n  types:\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-egress-allow\nspec:\n  egress:\n  - action: allow\n    destination:\n      nets:\n      - 127.0.0.1/32\n    source:\n      namespaceselector: name == \"dummy\"\n  order: 501\n  types:\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-privileged-namespace\nspec:\n  egress:\n  - action: allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: allow\n    destination: {}\n    source: {}\n  namespaceselector: has(privileged-namespace)\n  order: 500\n  types:\n  - ingress\n  - egress\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n\n\n\n# ç½ç»ç­ç¥éç¦»éå¶é®é¢\n\n * é»è®¤æåµä¸ï¼åéå°serviceçæ°æ®åtype=loadbalancer/nodeportä¼ç»è¿snatï¼ä¼å¯¼è´ç½ç»ç­ç¥ä¸çæ\n * ç½ç»ç­ç¥ä¸è½éå¶ä¸»æºè®¿é®ï¼å³ä¾¿è®¾ç½®äºææç½æ®µæç»ã (traffic from a host to its workload endpoints (e.g. kubernetes pods) is always allowed, despite any policy in place. this ensures that kubelet liveness and readiness probes always work.)\n\n\n# å³äºæºå°åé®é¢ï¼\n\n 1. éç¾¤åéè¿podipè®¿é®ä¸å®ä¸ä¼snat\n 2. éç¾¤åéè¿clusteripè®¿é®é»è®¤ä¸ä¼snat\n 3. nodeportålbé»è®¤ä¼snat ï¼ç½ç»ç­ç¥å¯è½ä¼æ æ³å½ä¸­ï¼\n\n * externaltrafficpolicy: cluster ï¼é»è®¤ï¼ nodeport: å¨éç¾¤åè®¿é®çå°çipæ¯è¯·æ±çèç¹ipï¼epæ¯è½®è®­ç å¨éç¾¤å¤è®¿é®çå°çipæ¯è¯·æ±çèç¹ipï¼epæ¯è½®è®­ç lb: éç¾¤åè®¿é®çå°çé½æ¯å½åpodæå¨èç¹ipï¼epæ¯è½®è®­ç éç¾¤å¤è¯·æ±ä¸æ¬¡é½æ¯çå°çèç¹1ï¼åºå®ï¼çipï¼epæ¯è½®è®­ç\n * externaltrafficpolicy: local nodeport: éç¾¤åè®¿é®è¯·æ±ipä¸å½åpodèç¹ä¸è´æ¶çå°çæ¯podipï¼å¦åæ¯å½åpodæå¨èç¹ipï¼epåèç¹ (??????) å¨éç¾¤å¤è®¿é®çå°çæ¯çå®çip,epå¯¹åºè¯·æ±çèç¹ip lb: éç¾¤åè®¿é®çå°çé½æ¯çå®çipï¼å½åpodipï¼ï¼epåèç¹ éç¾¤å¤è¯·æ±ä¸æ¬¡é½æ¯çå®çipï¼epåèç¹\n\n\n# å»ºè®®ï¼\n\nå»ºè®®å¨æå¡éç½®ä¸­å° spec.externaltrafficpolicy è®¾ç½®ä¸º localï¼ä»¥ä¾¿æ°æ®åçæºå°åä¿æä¸åï¼å³æ°æ®åçæºå°åå°±æ¯å®¢æ·ç«¯çæºå°åã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"grafanaåpromuthues",frontmatter:{title:"grafanaåpromuthues",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s07/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"grafanaåpromuthues"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html"},{property:"og:type",content:"article"},{property:"og:title",content:"grafanaåpromuthues"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"grafanaåpromuthues"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html",relativePath:"01.ææ¯æè°/03.kubernetes/07.grafanaåpromuthues.md",key:"v-0b248a60",path:"/pages/k8s07/",headers:[{level:2,title:"ç»ä»¶",slug:"ç»ä»¶",normalizedTitle:"ç»ä»¶",charIndex:2},{level:2,title:"curl",slug:"curl",normalizedTitle:"curl",charIndex:406},{level:2,title:"ç­å è½½",slug:"ç­å è½½",normalizedTitle:"ç­å è½½",charIndex:755},{level:2,title:"pushgateway",slug:"pushgateway",normalizedTitle:"pushgateway",charIndex:807},{level:2,title:"Grafana",slug:"grafana",normalizedTitle:"grafana",charIndex:823},{level:2,title:"ææ ",slug:"ææ ",normalizedTitle:"ææ ",charIndex:835},{level:3,title:"ææ ç±»å",slug:"ææ ç±»å",normalizedTitle:"ææ ç±»å",charIndex:842},{level:3,title:"è®¡ç®è¡¨è¾¾å¼ï¼",slug:"è®¡ç®è¡¨è¾¾å¼",normalizedTitle:"è®¡ç®è¡¨è¾¾å¼ï¼",charIndex:923},{level:3,title:"ææ å½åè§è",slug:"ææ å½åè§è",normalizedTitle:"ææ å½åè§è",charIndex:1099}],headersStr:"ç»ä»¶ curl ç­å è½½ pushgateway Grafana ææ  ææ ç±»å è®¡ç®è¡¨è¾¾å¼ï¼ ææ å½åè§è",content:"# ç»ä»¶\n\n * Prometheus Server: ç¨äºæ¶éåå­å¨æ¶é´åºåæ°æ®ã\n * Client Library: å®¢æ·ç«¯åºï¼ä¸ºéè¦çæ§çæå¡çæç¸åºç metrics å¹¶æ´é²ç» Prometheus serverãå½Prometheus server æ¥ pull æ¶ï¼ç´æ¥è¿åå®æ¶ç¶æç metricsãå¯¹äºæºå¨å±é¢ç metricesï¼éè¦ä½¿ç¨ node exporterã\n * Push Gateway: ä¸»è¦ç¨äºç­æç jobsã\n * Exporters: ç¨äºæ´é²å·²æçç¬¬ä¸æ¹æå¡ç metrics ç» Prometheusã\n * Alertmanager: ä» Prometheus server ç«¯æ¥æ¶å° alerts åï¼ä¼è¿è¡å»é¤éå¤æ°æ®ï¼åç»ï¼å¹¶è·¯ç±å°å¯¹æ¶çæ¥åæ¹å¼ï¼ååºæ¥è­¦ãå¸¸è§çæ¥æ¶æ¹å¼æï¼çµå­é®ä»¶ï¼pagerdutyï¼OpsGenie, webhook ç­ã\n\n\n# curl\n\necho \"hfftest 111\" |curl --data-binary @- http://10.19.0.13:9091/metrics/job/schedulerStatus/instance/tztest\n\ncurl -X POST -g 'http://127.0.0.1:9090/api/v1/admin/tsdb/delete_series?match[]=scheduler_effective_dynamic_schedule_count'\n\ncurl -X POST -g 'http://10.19.0.13:9090/api/v1/admin/tsdb/delete_series?match[]={job=\"schedulerStatus\"}'\n\n\n# ç­å è½½\n\ncurl -XPOST <prometheus-url>/-/reload\n\n\n1\n\n\n\n# pushgateway\n\n\n# Grafana\n\n\n# ææ \n\n\n# ææ ç±»å\n\nCounterï¼è®¡æ°å¨ï¼å¯¹æ°æ®åªå¢ä¸å Gauageï¼ä»ªè¡¨çï¼å¯å¢å¯å Histogramï¼ç´æ¹å¾ï¼,Summaryï¼æè¦ï¼æä¾æ´å¤çç»è®¡ä¿¡\n\n\n# è®¡ç®è¡¨è¾¾å¼ï¼\n\nPrometheusä¸ºä¸åçæ°æ®æä¾äºéå¸¸å¤çè®¡ç®å½æ°ï¼å¶ä¸­æä¸ªå°æå·§å°±æ¯éå°counteræ°æ®ç±»åï¼å¨åä»»ä½æä½ä¹åï¼åå¥ä¸ä¸ä¸ªrate()æèincrease()å½æ°\n\n> 100-avg(irate(node_cpu_seconds_total{mode='idle'}[5m])) by (node_name)*100\n\n\n# ææ å½åè§è\n\nä¸ä¸ªææ åç§°ï¼ â¢ å¿é¡»ç¬¦åææå­ç¬¦çæ°æ®æ¨¡åã â¢ åºè¯¥å·æä¸ææ æå±åç¸å³çï¼åä¸ªè¯æ±ï¼åºç¨ç¨åºåç¼ãåç¼ææ¶è¢«å®¢æ·ç«¯åºç§°ä¸ºå½åç©ºé´ãå¯¹äºç¹å®äºåºç¨ç¨åºçææ ï¼åç¼éå¸¸æ¯åºç¨ç¨åºåç§°æ¬èº«ãç¶èï¼ææ¶åææ æ´éç¨ï¼æ¯å¦å®¢æ·ç«¯åºå¯¼åºçæ ååææ ãä¾å¦ï¼ â prometheus_notifications_total ï¼éå¯¹Prometheus æå¡å¨ï¼ â process_cpu_seconds_total ï¼ç±å®¢æ·ç«¯åºå¯¼åºï¼ â http_request_duration_seconds ï¼ç¨äºææHTTPè¯·æ±ï¼ â¢ å¿é¡»æä¸ä¸ªåä¸çåä½ï¼å³ï¼ä¸è¦æç§ä¸æ¯«ç§ï¼æç§ä¸å­èæ··ç¨ï¼ã â¢ åºè¯¥ä½¿ç¨åºæ¬åä½ï¼å¦ç§ãå­èãç±³ââèä¸æ¯æ¯«ç§ãåå­èãå¬éï¼ãåè§ä¸é¢çåºæ¬åä½åè¡¨ã â¢ åºä»¥å¤æ°å½¢å¼ç¨åç¼æ¥æè¿°åä½ãè¯·æ³¨æï¼ç´¯è®¡è®¡æ°ä»¥totalä½ä¸ºåç¼ï¼éå å¨åä½ä¹åã â http_request_duration_seconds â node_memory_usage_bytes â http_requests_total ï¼ç¨äºæ åä½çç´¯è®¡è®¡æ°ï¼ â process_cpu_seconds_total ï¼ç¨äºæåä½çç´¯è®¡è®¡æ°ï¼ â foobar_build_info ï¼ç¨äºæä¾å³äºæ­£å¨è¿è¡çäºè¿å¶æä»¶çåæ°æ®çä¼ªææ ï¼ â¢ åºè¯¥å¨ææçæ ç­¾ç»´åº¦ä¸­è¡¨ç¤ºç¸åççæ§é»è¾ã â è¯·æ±æä¹æ¶é¿ â ä¼ è¾çæ°æ®å­èæ° â ç¬æ¶èµæºä½¿ç¨ç¾åæ¯",normalizedContent:"# ç»ä»¶\n\n * prometheus server: ç¨äºæ¶éåå­å¨æ¶é´åºåæ°æ®ã\n * client library: å®¢æ·ç«¯åºï¼ä¸ºéè¦çæ§çæå¡çæç¸åºç metrics å¹¶æ´é²ç» prometheus serverãå½prometheus server æ¥ pull æ¶ï¼ç´æ¥è¿åå®æ¶ç¶æç metricsãå¯¹äºæºå¨å±é¢ç metricesï¼éè¦ä½¿ç¨ node exporterã\n * push gateway: ä¸»è¦ç¨äºç­æç jobsã\n * exporters: ç¨äºæ´é²å·²æçç¬¬ä¸æ¹æå¡ç metrics ç» prometheusã\n * alertmanager: ä» prometheus server ç«¯æ¥æ¶å° alerts åï¼ä¼è¿è¡å»é¤éå¤æ°æ®ï¼åç»ï¼å¹¶è·¯ç±å°å¯¹æ¶çæ¥åæ¹å¼ï¼ååºæ¥è­¦ãå¸¸è§çæ¥æ¶æ¹å¼æï¼çµå­é®ä»¶ï¼pagerdutyï¼opsgenie, webhook ç­ã\n\n\n# curl\n\necho \"hfftest 111\" |curl --data-binary @- http://10.19.0.13:9091/metrics/job/schedulerstatus/instance/tztest\n\ncurl -x post -g 'http://127.0.0.1:9090/api/v1/admin/tsdb/delete_series?match[]=scheduler_effective_dynamic_schedule_count'\n\ncurl -x post -g 'http://10.19.0.13:9090/api/v1/admin/tsdb/delete_series?match[]={job=\"schedulerstatus\"}'\n\n\n# ç­å è½½\n\ncurl -xpost <prometheus-url>/-/reload\n\n\n1\n\n\n\n# pushgateway\n\n\n# grafana\n\n\n# ææ \n\n\n# ææ ç±»å\n\ncounterï¼è®¡æ°å¨ï¼å¯¹æ°æ®åªå¢ä¸å gauageï¼ä»ªè¡¨çï¼å¯å¢å¯å histogramï¼ç´æ¹å¾ï¼,summaryï¼æè¦ï¼æä¾æ´å¤çç»è®¡ä¿¡\n\n\n# è®¡ç®è¡¨è¾¾å¼ï¼\n\nprometheusä¸ºä¸åçæ°æ®æä¾äºéå¸¸å¤çè®¡ç®å½æ°ï¼å¶ä¸­æä¸ªå°æå·§å°±æ¯éå°counteræ°æ®ç±»åï¼å¨åä»»ä½æä½ä¹åï¼åå¥ä¸ä¸ä¸ªrate()æèincrease()å½æ°\n\n> 100-avg(irate(node_cpu_seconds_total{mode='idle'}[5m])) by (node_name)*100\n\n\n# ææ å½åè§è\n\nä¸ä¸ªææ åç§°ï¼ â¢ å¿é¡»ç¬¦åææå­ç¬¦çæ°æ®æ¨¡åã â¢ åºè¯¥å·æä¸ææ æå±åç¸å³çï¼åä¸ªè¯æ±ï¼åºç¨ç¨åºåç¼ãåç¼ææ¶è¢«å®¢æ·ç«¯åºç§°ä¸ºå½åç©ºé´ãå¯¹äºç¹å®äºåºç¨ç¨åºçææ ï¼åç¼éå¸¸æ¯åºç¨ç¨åºåç§°æ¬èº«ãç¶èï¼ææ¶åææ æ´éç¨ï¼æ¯å¦å®¢æ·ç«¯åºå¯¼åºçæ ååææ ãä¾å¦ï¼ â prometheus_notifications_total ï¼éå¯¹prometheus æå¡å¨ï¼ â process_cpu_seconds_total ï¼ç±å®¢æ·ç«¯åºå¯¼åºï¼ â http_request_duration_seconds ï¼ç¨äºææhttpè¯·æ±ï¼ â¢ å¿é¡»æä¸ä¸ªåä¸çåä½ï¼å³ï¼ä¸è¦æç§ä¸æ¯«ç§ï¼æç§ä¸å­èæ··ç¨ï¼ã â¢ åºè¯¥ä½¿ç¨åºæ¬åä½ï¼å¦ç§ãå­èãç±³ââèä¸æ¯æ¯«ç§ãåå­èãå¬éï¼ãåè§ä¸é¢çåºæ¬åä½åè¡¨ã â¢ åºä»¥å¤æ°å½¢å¼ç¨åç¼æ¥æè¿°åä½ãè¯·æ³¨æï¼ç´¯è®¡è®¡æ°ä»¥totalä½ä¸ºåç¼ï¼éå å¨åä½ä¹åã â http_request_duration_seconds â node_memory_usage_bytes â http_requests_total ï¼ç¨äºæ åä½çç´¯è®¡è®¡æ°ï¼ â process_cpu_seconds_total ï¼ç¨äºæåä½çç´¯è®¡è®¡æ°ï¼ â foobar_build_info ï¼ç¨äºæä¾å³äºæ­£å¨è¿è¡çäºè¿å¶æä»¶çåæ°æ®çä¼ªææ ï¼ â¢ åºè¯¥å¨ææçæ ç­¾ç»´åº¦ä¸­è¡¨ç¤ºç¸åççæ§é»è¾ã â è¯·æ±æä¹æ¶é¿ â ä¼ è¾çæ°æ®å­èæ° â ç¬æ¶èµæºä½¿ç¨ç¾åæ¯",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"etcdèç¹downæºæ°æ®æ¢å¤",frontmatter:{title:"etcdèç¹downæºæ°æ®æ¢å¤",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s08/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼",meta:[{name:"twitter:title",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{name:"twitter:description",content:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html"},{property:"og:type",content:"article"},{property:"og:title",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{property:"og:description",content:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{itemprop:"description",content:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html",relativePath:"01.ææ¯æè°/03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.md",key:"v-2f3eb2e7",path:"/pages/k8s08/",headersStr:null,content:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼\n\n(2) åæ­¢etcdæå¡\n\n(3) éè¦å°éç½®ä¸­ç cluster_stateæ¹ä¸ºï¼existingï¼å ä¸ºæ¯å å¥å·²æéç¾¤ï¼ä¸è½ç¨ new ä¿®å¤æºå¨é®é¢ï¼å é¤æ§çæ°æ®ç®å½ï¼éæ°å¯å¨ etcd æå¡\n\n(4) å å¥ memeberï¼ etcdctl member add xxx âpeer-urls=https://x.x.x.x:2380\n\n(5) éªè¯ï¼etcdctl endpoint status",normalizedContent:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åxxï¼\n\n(2) åæ­¢etcdæå¡\n\n(3) éè¦å°éç½®ä¸­ç cluster_stateæ¹ä¸ºï¼existingï¼å ä¸ºæ¯å å¥å·²æéç¾¤ï¼ä¸è½ç¨ new ä¿®å¤æºå¨é®é¢ï¼å é¤æ§çæ°æ®ç®å½ï¼éæ°å¯å¨ etcd æå¡\n\n(4) å å¥ memeberï¼ etcdctl member add xxx âpeer-urls=https://x.x.x.x:2380\n\n(5) éªè¯ï¼etcdctl endpoint status",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ceph",frontmatter:{title:"ceph",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s09/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",meta:[{name:"twitter:title",content:"ceph"},{name:"twitter:description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ceph"},{property:"og:description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ceph"},{itemprop:"description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html",relativePath:"01.ææ¯æè°/03.kubernetes/09.ceph.md",key:"v-1247b65b",path:"/pages/k8s09/",headers:[{level:2,title:"æè½½ç¹æ¥è¯¢",slug:"æè½½ç¹æ¥è¯¢",normalizedTitle:"æè½½ç¹æ¥è¯¢",charIndex:2},{level:2,title:"rbd vs cephfs",slug:"rbd-vs-cephfs",normalizedTitle:"rbd vs cephfs",charIndex:12}],headersStr:"æè½½ç¹æ¥è¯¢ rbd vs cephfs",content:"# æè½½ç¹æ¥è¯¢\n\n\n# rbd vs cephfs\n\nrbdä¸æ¯æReadWriteMany å¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",normalizedContent:"# æè½½ç¹æ¥è¯¢\n\n\n# rbd vs cephfs\n\nrbdä¸æ¯æreadwritemany å¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"chrony",frontmatter:{title:"chrony",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s10/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"chrony"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html"},{property:"og:type",content:"article"},{property:"og:title",content:"chrony"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"chrony"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html",relativePath:"01.ææ¯æè°/03.kubernetes/10.chrony.md",key:"v-cbe0d60a",path:"/pages/k8s10/",headers:[{level:2,title:"ä¸ãChronyç®è¿°",slug:"ä¸ãchronyç®è¿°",normalizedTitle:"ä¸ãchronyç®è¿°",charIndex:2},{level:2,title:"äºãé¨ç½²çæ¬ï¼",slug:"äºãé¨ç½²çæ¬",normalizedTitle:"äºãé¨ç½²çæ¬ï¼",charIndex:376},{level:2,title:"ä¸ãç¯å¢éç½®ï¼",slug:"ä¸ãç¯å¢éç½®",normalizedTitle:"ä¸ãç¯å¢éç½®ï¼",charIndex:398},{level:2,title:"åãNTP/Chronyå¯¹æ¯ï¼",slug:"åãntp-chronyå¯¹æ¯",normalizedTitle:"åãntp/chronyå¯¹æ¯ï¼",charIndex:481},{level:3,title:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:",slug:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹",normalizedTitle:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:",charIndex:635},{level:3,title:"ntpè½åï¼chronyåä¸å°çï¼",slug:"ntpè½å-chronyåä¸å°ç",normalizedTitle:"ntpè½åï¼chronyåä¸å°çï¼",charIndex:915},{level:3,title:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼",slug:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½",normalizedTitle:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼",charIndex:1204},{level:2,title:"äºãchronyæå¡å®è£çæä»¶ï¼",slug:"äºãchronyæå¡å®è£çæä»¶",normalizedTitle:"äºãchronyæå¡å®è£çæä»¶ï¼",charIndex:1892},{level:2,title:"å­ãChronyéç½®chrony.conf",slug:"å­ãchronyéç½®chrony-conf",normalizedTitle:"å­ãchronyéç½®chrony.conf",charIndex:2984},{level:3,title:"å¸¸ç¨éç½®é¡¹ï¼",slug:"å¸¸ç¨éç½®é¡¹",normalizedTitle:"å¸¸ç¨éç½®é¡¹ï¼",charIndex:3010},{level:3,title:"å»ºè®®éç½®é¡¹ï¼",slug:"å»ºè®®éç½®é¡¹",normalizedTitle:"å»ºè®®éç½®é¡¹ï¼",charIndex:4453},{level:3,title:"NTP Server(masterèç¹)",slug:"ntp-server-masterèç¹",normalizedTitle:"ntp server(masterèç¹)",charIndex:4655},{level:3,title:"NTP Client(æ®énodeèç¹)",slug:"ntp-client-æ®énodeèç¹",normalizedTitle:"ntp client(æ®énodeèç¹)",charIndex:4835},{level:2,title:"ä¸ãé¨ç½²:",slug:"ä¸ãé¨ç½²",normalizedTitle:"ä¸ãé¨ç½²:",charIndex:5031},{level:2,title:"å«ãå¸¸ç¨chronyå½ä»¤ï¼",slug:"å«ãå¸¸ç¨chronyå½ä»¤",normalizedTitle:"å«ãå¸¸ç¨chronyå½ä»¤ï¼",charIndex:5222},{level:2,title:"ä¹ãé®é¢å®ä½æè·¯",slug:"ä¹ãé®é¢å®ä½æè·¯",normalizedTitle:"ä¹ãé®é¢å®ä½æè·¯",charIndex:5528},{level:2,title:"åãåèèµæï¼",slug:"åãåèèµæ",normalizedTitle:"åãåèèµæï¼",charIndex:5651}],headersStr:"ä¸ãChronyç®è¿° äºãé¨ç½²çæ¬ï¼ ä¸ãç¯å¢éç½®ï¼ åãNTP/Chronyå¯¹æ¯ï¼ chronyçä¼å¿åæ¬ä»¥ä¸å ç¹: ntpè½åï¼chronyåä¸å°çï¼ chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼ äºãchronyæå¡å®è£çæä»¶ï¼ å­ãChronyéç½®chrony.conf å¸¸ç¨éç½®é¡¹ï¼ å»ºè®®éç½®é¡¹ï¼ NTP Server(masterèç¹) NTP Client(æ®énodeèç¹) ä¸ãé¨ç½²: å«ãå¸¸ç¨chronyå½ä»¤ï¼ ä¹ãé®é¢å®ä½æè·¯ åãåèèµæï¼",content:"# ä¸ãChronyç®è¿°\n\nchronyæ¯ç½ç»æ¶é´åè®®(NTP)çå¦ä¸ç§å®ç°,ä¸ç½ç»æ¶é´åè®®åå°ç¨åº(ntpd)ä¸å,å®å¯ä»¥æ´å¿«å°ä¸æ´åç¡®å°åæ­¥ç³»ç»æ¶éï¼è¯·æ³¨æï¼ntpdä»ç¶åå«å¶ä¸­ä»¥ä¾éè¦è¿è¡NTPæå¡çå®¢æ·ä½¿ç¨ã ä¸¤ä¸ªä¸»è¦ç¨åºï¼chronydåchronyc\n\n * chronydï¼åå°è¿è¡çå®æ¤è¿ç¨ï¼ç¨äºè°æ´åæ ¸ä¸­è¿è¡çç³»ç»æ¶éåæ¶éæå¡å¨åæ­¥ãå®ç¡®å®è®¡ç®æºå¢åæ¶é´çæ¯çï¼å¹¶å¯¹æ­¤è¿è¡è¡¥å¿\n * chronycï¼å½ä»¤è¡ç¨æ·å·¥å·ï¼ç¨äºçæ§æ§è½å¹¶è¿è¡å¤æ ·åçéç½®ãå®å¯ä»¥å¨chronydå®ä¾æ§å¶çè®¡ç®æºä¸å·¥ä½ï¼ä¹å¯å¨ä¸å°ä¸åçè¿ç¨è®¡ç®æºä¸å·¥ä½\n\n> æå¡unitæä»¶ï¼ /usr/lib/systemd/system/chronyd.service çå¬ç«¯å£ï¼ 323/udpï¼123/udp éç½®æä»¶ï¼ /etc/chrony.conf\n\n\n# äºãé¨ç½²çæ¬ï¼\n\nå®æ¹çæ¬ï¼3.4\n\n\n# ä¸ãç¯å¢éç½®ï¼\n\n1ãå³é­firewalldé²ç«å¢ 2ãå³é­SELinux 3ãchronyä¸ntpé½æ¯æ¶é´åæ­¥è½¯ä»¶ï¼ä¸¤ä¸ªè½¯ä»¶ä¸è½å¤åæ¶å¼å¯ï¼ä¼åºç°æ¶é´å²çª\n\n\n# åãNTP/Chronyå¯¹æ¯ï¼\n\nä½¿ç¨chronydæå¡å¹³æ»åæ­¥æ¶é´çæ¹å¼è¦ä¼äºcrontab + ntpdateï¼å ä¸ºntpdateåæ­¥æ¶é´ä¼é ææ¶é´çè·³è·ï¼å¯¹ä¸äºä¾èµæ¶é´çç¨åºåæå¡ä¼é æå½±åï¼ä¾å¦ï¼sleepãtimerç­ï¼ä¸chronydæå¡å¯ä»¥å¨ä¿®æ­£æ¶é´çè¿ç¨ä¸­åæ¶ä¿®æ­£CPU tickã\n\n\n# chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:\n\n1.æ´å¿«çåæ­¥åªéè¦æ°åéèéæ°å°æ¶æ¶é´ï¼ä»èæå¤§ç¨åº¦åå°æ¶é´åé¢çè¯¯å·®ï¼è¿å¯¹äºå¹¶éå¨å¤©24å°æ¶çè¿è¡çå°å¼è®¡ç®æºæç³»ç»èè¨éå¸¸æç¨ï¼ 2.è½å¤æ´å¥½å°ååºæ¶éé¢ççå¿«éååï¼è¿å¯¹äºå·å¤ä¸ç¨³å®æ¶éçèææºæå¯¼è´èµäºä¸­é¢çåçæ¯ååçèè½ææ¯; 3.å¨åå§åæ­¥åï¼å®ä¸ä¼åæ­¢æ¶éï¼ä»¥é²å¯¹éè¦ç³»ç»æ¶é´ä¿æåè°çåºç¨ç¨åºé æå½±å; 4.å¨åºå¯¹ä¸´æ¶éå¯¹ç§°å»¶è¿æ¶(ä¾å¦å¤§è§æ¨¡ä¸è½½é æé¾æ¥é¥±åç­æåµ)æä¾äºæ´å¥½çç¨³å®æ§; 5.æ éå¯¹æ¶é´æå¡å¨è¿è¡å®æè½®è¯¢ï¼å æ­¤å·å¤é´æ­æ§ç½ç»è¿æ¥(å¦ç½ç»ä¸ç¨³å®çåºæ¯)çç³»ç»ä»ç¶å¯ä»¥å¿«éåæ­¥æ¶éã\n\n\n# ntpè½åï¼chronyåä¸å°çï¼\n\nntpæ¯æRFC 5905çæææä½æ¨¡å¼ï¼åæ¬å¹¿æ­ãå¤æ­åmanycastæå¡å¨/å®¢æ·ç«¯ãç¶èï¼å¹¿æ­åå¤æ­æ¨¡å¼æ¬è´¨ä¸ä¸å¦æ®éçæå¡å¨/å®¢æ·æºæ¨¡å¼åç¡®åå®å¨ï¼å³ä½¿æèº«ä»½éªè¯ï¼ï¼éå¸¸åºè¯¥é¿åã ntpæ¯æèªå¨å¯é¥åè®®ï¼RFC 5906ï¼æ¥ä½¿ç¨å¬é¥å å¯å¯¹æå¡å¨è¿è¡èº«ä»½éªè¯ãè¯·æ³¨æï¼è¯¥åè®®å·²è¢«è¯ææ¯ä¸å®å¨çï¼å¹¶ä¸å·²è¢«NTSï¼RFC 8915ï¼æ·æ±°ã ntpå·²ç»è¢«ç§»æ¤å°æ´å¤çæä½ç³»ç»ä¸­ã ntpåå«å¤§éç¨äºåç§ç¡¬ä»¶åèæ¶éçé©±å¨ç¨åºãchronyéè¦å¶ä»ç¨åºï¼å¦gpsdæntp refclockï¼éè¿SHMæSOCKæ¥å£æä¾åèæ¶é´ã\n\n\n# chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼\n\nchronyå¯ä»¥å¨è®¿é®æ¶é´åèæ¯æ­æ­ç»­ç»­çç¯å¢ä¸­ææå°æ§è¡ãntpéè¦å®æå¯¹å¼ç¨è¿è¡è½®è¯¢æè½æ­£å¸¸å·¥ä½ã chronyéå¸¸å¯ä»¥æ´å¿«å°åæ­¥æ¶éï¼å¹¶å·ææ´å¥½çæ¶é´ç²¾åº¦ã chronyå¿«ééåºæ¶ééçççªç¶ååï¼ä¾å¦ï¼ç±äºæ¶ä½æ¯è¡å¨çæ¸©åº¦ååï¼ãntpå¯è½éè¦å¾é¿æ¶é´æè½éæ°å®å®ä¸æ¥ã chronyå³ä½¿å¨ç½ç»æ¥å¡æ¶é´è¾é¿çæåµä¸ä¹è½è¡¨ç°è¯å¥½ã é»è®¤éç½®ä¸­çchronyä»ä¸å ç¨æ¶é´æ¥ä¸æä¹±å¶ä»æ­£å¨è¿è¡çç¨åºãntpä¹å¯ä»¥éç½®ä¸ºä»ä¸æ­¥è¿æ¶é´ï¼ä½æ¯å¨è¿ç§æåµä¸ï¼å®å¿é¡»ä½¿ç¨ä¸åçæ¹æ³æ¥è°æ´æ¶éï¼daemonå¾ªç¯èä¸æ¯åæ ¸è§ç¨ï¼ï¼è¿å¯è½ä¼å¯¹æ¶éçåç¡®æ§äº§çè´é¢å½±åã chronyå¯ä»¥å¨æ´å¤§çèå´åè°æ´æ¶éçéçï¼è¿ä½¿å¾å®çè³å¯ä»¥å¨æ¶éä¸­æ­æä¸ç¨³å®çæºå¨ä¸è¿è¡ï¼ä¾å¦å¨æäºèææºä¸­ï¼ã chronyæ´å°ï¼å ç¨çåå­æ´å°ï¼åªæå¨éè¦æ¶æä¼å¤éCPUï¼è¿æ ·æ´ççµã chronyå¯ä»¥åntpåä¸å°çäºæï¼ chronyæ¯æç½ç»æ¶é´å®å¨ï¼NTSï¼è®¤è¯æºå¶ã chronyå¨Linuxä¸æ¯æç¡¬ä»¶æ¶é´æ³ï¼è¿åè®¸å¨æ¬å°ç½ç»ä¸­è¿è¡éå¸¸ç¨³å®ååç¡®çåæ­¥ã chronyä¸ºç¬ç«ç½ç»æä¾æ¯æï¼æ è®ºæ¶é´æ ¡æ­£çå¯ä¸æ¹æ³æ¯æå¨è¾å¥ï¼ä¾å¦ï¼ç±ç®¡çåæ¥çæ¶éï¼ãchronyå¯ä»¥æ¥çå¨ä¸åæ´æ°æ¶æ´æ­£çéè¯¯ï¼è®¡ç®åºè®¡ç®æºè·å¾æä¸¢å¤±æ¶é´çéçï¼å¹¶ä½¿ç¨æ­¤ä¼°è®¡å¼æ¥éåè°æ´è®¡ç®æºæ¶éã chronyæ¯æè®¡ç®å®æ¶æ¶éçå¢çæä¸¢å¤±çï¼å³å¨è®¡ç®æºå³é­æ¶ä¿ææ¶é´çæ¶éãå½ç³»ç»å¼å¯¼æ¶ï¼å®å¯ä»¥ä½¿ç¨è¿äºæ°æ®ä»å®æ¶æ¶éçä¿®æ­£çæ¬è®¾ç½®ç³»ç»æ¶é´ãå°ç®åä¸ºæ­¢ï¼è¿äºå®æ¶æ¶éå·¥å·ä»å¨Linuxä¸å¯ç¨ã\n\n\n# äºãchronyæå¡å®è£çæä»¶ï¼\n\n[root@master200.yinzhengjie.org.cn ~]# rpm -ql chrony\n/etc/NetworkManager/dispatcher.d/20-chrony\n/etc/chrony.confãããããããã#chronyçä¸»éç½®æä»¶\n/etc/chrony.keys\n/etc/dhcp/dhclient.d/chrony.sh\n/etc/logrotate.d/chrony\n/etc/sysconfig/chronyd\n/usr/bin/chronycãããããããã#chronycæ¯ä¸ä¸ªå½ä»¤è¡äº¤äºå¼æ¥å£ç¨åºï¼å¯ç¨äºçè§chronydçæ§è½ï¼å¹¶å¨è¿è¡æ¶æ´æ¹åç§æä½åæ°ã\n/usr/lib/systemd/ntp-units.d/50-chronyd.list\n/usr/lib/systemd/system/chrony-dnssrv@.service\n/usr/lib/systemd/system/chrony-dnssrv@.timer\n/usr/lib/systemd/system/chrony-wait.service\n/usr/lib/systemd/system/chronyd.serviceãããããã#CentOS 7.xçæ¬å¯¹åºçunit file\n/usr/libexec/chrony-helper\n/usr/sbin/chronyd              #chronydæ¯ä¸ä¸ªå¯ä»¥å¨å¯å¨æ¶å¯å¨çå®æ¤ç¨åºï¼å®æ¢å¯ä»¥åå½æå¡ç«¯è¿ç¨ä¹å¯ä»¥åå½æå¡ç«¯è¿ç¨\n/usr/share/doc/chrony-3.4\n/usr/share/doc/chrony-3.4/COPYING\n/usr/share/doc/chrony-3.4/FAQ\n/usr/share/doc/chrony-3.4/NEWS\n/usr/share/doc/chrony-3.4/README\n/usr/share/man/man1/chronyc.1.gz\n/usr/share/man/man5/chrony.conf.5.gz\n/usr/share/man/man8/chronyd.8.gz\n/var/lib/chrony\n/var/lib/chrony/drift\n/var/lib/chrony/rtc\n/var/log/chrony\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# å­ãChronyéç½®chrony.conf\n\n\n# å¸¸ç¨éç½®é¡¹ï¼\n\nPool 10.210.116.60                       #æ­¤æä»¤çè¯­æ³ä¸serveræä»¤çè¯­æ³ç±»ä¼¼ï¼åªæ¯å®ç¨äºæå®NTPæå¡å¨æ± ï¼èä¸æ¯åä¸ªNTPæå¡å¨ãæ± åç§°éè¦è§£æä¸ºå¤ä¸ªå°åï¼è¿äºå°åå¯è½ä¼éçæ¶é´çæ¨ç§»èæ¹åã\nserver 0.centos.pool.ntp.org iburst          #serverå¯ç¨äºæ¶éæå¡å¨ï¼iburstï¼å½æå¡å¨å¯è¾¾æ¶ï¼åéä¸ä¸ªå«ä¸ªæ°æ®åèä¸æ¯éå¸¸çä¸ä¸ªæ°æ®åï¼åé´ééå¸¸ä¸º2ç§ï¼å¯å å¿«åå§åæ­¥éåº¦; iburst æ¯åæ°, ä¸è¬ç¨æ­¤åæ°å³å¯ãè¯¥åæ°çå«ä¹æ¯å¨å¤´åæ¬¡ NTP è¯·æ±ä»¥ 2s æèæ´ç­çé´éï¼èä¸æ¯ä»¥ minpoll x æå®çæå°é´éï¼è¿æ ·çè®¾ç½®å¯ä»¥è®© chronyd å¯å¨æ¶å¿«éè¿è¡ä¸æ¬¡åæ­¥ã\nå¶ä»çåæ°æ minpoll x é»è®¤å¼æ¯ 6ï¼ä»£è¡¨ 64sãmaxpoll x é»è®¤å¼æ¯ 9ï¼ä»£è¡¨ 512sã\nserver 1.centos.pool.ntp.org iburst          #N.centos.pool.ntp.orgï¼è¿ä¸ªæ¯å°åæ± ï¼æ¯ntpæå¡çèæéç¾¤ï¼è¿éå¯ä»¥åæéç¾¤å°åï¼ä¹å¯ä»¥åæå®çææå¡å¨\npeer 10.210.116.160     #åntp, å¯¹ç­ä½æ¨¡å¼\ndriftfile /var/lib/chrony/drift              #æ ¹æ®å®éæ¶é´è®¡ç®åºè®¡ç®æºå¢åæ¶é´çæ¯çï¼è®²å®è®°å½å°ä¸ä¸ªæä»¶ä¸­ï¼ä¼å¨éå¯åä¸ºç³»ç»æ¶éååºè¡¥å¿\nmakestep 1.0 3                         #å½å¤´ä¸æ¬¡æ ¡æ¶ï¼å¦ææ¶é´ç¸å·® 1.0s, åè·³è·å¼æ ¡æ¶\nrtcsync                                #å¯ç¨åæ ¸æ¨¡å¼ï¼ç³»ç»æ¶éæ¯11åéä¼æ·è´å°å®æ¶æ¶éï¼RTCï¼\n#allow 192.168.0.0/16                   #allow/denyï¼ä»åè®¸/æç»192.168.2.0/24ç½ç»çä¸»æºå¯ä»¥è®¿é®æ­¤æ¶é´æå¡å¨ deny allæç»ææå®¢æ·ç«¯\n#local stratum 10                       #å³ä½¿serveræä»¤ä¸­æ¶é´æå¡å¨ä¸å¯ç¨ï¼ä¹åè®¸è®²æ¬å°æ¶é´åä¸ºæ åæ¶é´ææ¶ç»å¶å®å®¢æ·ç«¯\nstratumweight 0.05                      # è®©chronydå¨éæ©æºæ¶å¿½ç¥æºçå±çº§\n#hwtimestamp *                        #éè¿ä½¿ç¨ hwtimestamp æä»¤å¯ç¨ç¡¬ä»¶æ¶é´æ³\n#minsources 2                          #å¢å è°æ´æéçå¯éæ©æºçæå°æ°é\n#keyfile /etc/chrony.keys                 # æå®åå«NTPéªè¯å¯é¥çæä»¶ã\nlogdir /var/log/chrony                   # æå®æ¥å¿æä»¶çç®å½ã\nlogchange 0.5                          # å¦ææ¶éè°æ´å¤§äº0.5ç§ï¼ååç³»ç»æ¥å¿åéæ¶æ¯\n#log measurements statistics tracking      #éæ©æ¥å¿æä»¶è¦è®°å½çä¿¡æ¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# å»ºè®®éç½®é¡¹ï¼\n\n 1. å½åèç¹è®¾ç½®æserver:127.127.0.1\n 2. ä¸ä¸ªmasterèç¹ä½ä¸ºå¶ä»æ®éèç¹çæ¶é´æå¡å¨ï¼éç½®æpoolï¼\n 3. ä¸ä¸ªmasterèç¹äºä¸ºpeer(ååntp)\n 4. å¦ææå¤é¨æ¶éæºéç½®ï¼åè®¾ç½®æpool\n 5. å¦ææ¶é´è¶è¿10minï¼ååè®¸ç¬¬ä¸æ¬¡è·³è· ï¼ä¸ä¹åæ²ééæ±ä¿æä¸è´ï¼å¯ä¿®æ¹ç­ç¥ï¼\n 6. æå¤3ä¸ªå¤é¨æ¶éæºï¼å¯ä»¥ä¸è®¾ç½®å¤é¨æ¶éæº\n\n\n# NTP Server(masterèç¹)\n\nserver 127.127.0.1 pool å¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 peer master2èç¹IP peer master3èç¹IP driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# NTP Client(æ®énodeèç¹)\n\nserver 127.127.0.1 poolå¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 pool master1èç¹IP pool master2èç¹IP pool master3èç¹IP driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ä¸ãé¨ç½²:\n\nenable chronyï¼ disable ntpd\n\n 1. Stop/disable ntpd\n 2. configure chrony.conf(master/node)\n 3. systemctl start/enable chronyd.service\n 4. systemctl restart chronyd.service (notify)\n\n\n# å«ãå¸¸ç¨chronyå½ä»¤ï¼\n\n1ã chronyd -q 'server ntp.ntsc.ac.cn iburst' ä¸´æ¶åæ­¥æ¶é´ 2ã chronyc -n sources -v æ¥çæ¶é´åæ­¥æå¡å¨åè¡¨ 3ã accheck - æ£æ¥NTPè®¿é®æ¯å¦å¯¹ç¹å®ä¸»æºå¯ç¨ 4ã activity - è¯¥å½ä»¤ä¼æ¾ç¤ºæå¤å°NTPæºå¨çº¿/ç¦»çº¿ 5ã add server - æå¨æ·»å ä¸å°æ°çNTPæå¡å¨ã 6ã clients - å¨å®¢æ·ç«¯æ¥åå·²è®¿é®å°æå¡å¨ 7ã delete - æå¨ç§»é¤NTPæå¡å¨æå¯¹ç­æå¡å¨ 8ã settime - æå¨è®¾ç½®å®æ¤è¿ç¨æ¶é´ 9ã tracking - æ¾ç¤ºç³»ç»æ¶é´ä¿¡æ¯\n\n\n# ä¹ãé®é¢å®ä½æè·¯\n\n1.æ£æ¥chronyæå¡æ¯å¦æ­£å¸¸ï¼chrony activity 2.æ£æ¥ntpdæå¡æ¯å¦å¯å¨ï¼systemctl is-active ntpd 3.æ£æ¥æ¶é´åæ­¥æå¡å¨åè¡¨ï¼chronyc -n sources -v\n\n\n# åãåèèµæï¼\n\nhttps://chrony.tuxfamily.org/documentation.html",normalizedContent:"# ä¸ãchronyç®è¿°\n\nchronyæ¯ç½ç»æ¶é´åè®®(ntp)çå¦ä¸ç§å®ç°,ä¸ç½ç»æ¶é´åè®®åå°ç¨åº(ntpd)ä¸å,å®å¯ä»¥æ´å¿«å°ä¸æ´åç¡®å°åæ­¥ç³»ç»æ¶éï¼è¯·æ³¨æï¼ntpdä»ç¶åå«å¶ä¸­ä»¥ä¾éè¦è¿è¡ntpæå¡çå®¢æ·ä½¿ç¨ã ä¸¤ä¸ªä¸»è¦ç¨åºï¼chronydåchronyc\n\n * chronydï¼åå°è¿è¡çå®æ¤è¿ç¨ï¼ç¨äºè°æ´åæ ¸ä¸­è¿è¡çç³»ç»æ¶éåæ¶éæå¡å¨åæ­¥ãå®ç¡®å®è®¡ç®æºå¢åæ¶é´çæ¯çï¼å¹¶å¯¹æ­¤è¿è¡è¡¥å¿\n * chronycï¼å½ä»¤è¡ç¨æ·å·¥å·ï¼ç¨äºçæ§æ§è½å¹¶è¿è¡å¤æ ·åçéç½®ãå®å¯ä»¥å¨chronydå®ä¾æ§å¶çè®¡ç®æºä¸å·¥ä½ï¼ä¹å¯å¨ä¸å°ä¸åçè¿ç¨è®¡ç®æºä¸å·¥ä½\n\n> æå¡unitæä»¶ï¼ /usr/lib/systemd/system/chronyd.service çå¬ç«¯å£ï¼ 323/udpï¼123/udp éç½®æä»¶ï¼ /etc/chrony.conf\n\n\n# äºãé¨ç½²çæ¬ï¼\n\nå®æ¹çæ¬ï¼3.4\n\n\n# ä¸ãç¯å¢éç½®ï¼\n\n1ãå³é­firewalldé²ç«å¢ 2ãå³é­selinux 3ãchronyä¸ntpé½æ¯æ¶é´åæ­¥è½¯ä»¶ï¼ä¸¤ä¸ªè½¯ä»¶ä¸è½å¤åæ¶å¼å¯ï¼ä¼åºç°æ¶é´å²çª\n\n\n# åãntp/chronyå¯¹æ¯ï¼\n\nä½¿ç¨chronydæå¡å¹³æ»åæ­¥æ¶é´çæ¹å¼è¦ä¼äºcrontab + ntpdateï¼å ä¸ºntpdateåæ­¥æ¶é´ä¼é ææ¶é´çè·³è·ï¼å¯¹ä¸äºä¾èµæ¶é´çç¨åºåæå¡ä¼é æå½±åï¼ä¾å¦ï¼sleepãtimerç­ï¼ä¸chronydæå¡å¯ä»¥å¨ä¿®æ­£æ¶é´çè¿ç¨ä¸­åæ¶ä¿®æ­£cpu tickã\n\n\n# chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:\n\n1.æ´å¿«çåæ­¥åªéè¦æ°åéèéæ°å°æ¶æ¶é´ï¼ä»èæå¤§ç¨åº¦åå°æ¶é´åé¢çè¯¯å·®ï¼è¿å¯¹äºå¹¶éå¨å¤©24å°æ¶çè¿è¡çå°å¼è®¡ç®æºæç³»ç»èè¨éå¸¸æç¨ï¼ 2.è½å¤æ´å¥½å°ååºæ¶éé¢ççå¿«éååï¼è¿å¯¹äºå·å¤ä¸ç¨³å®æ¶éçèææºæå¯¼è´èµäºä¸­é¢çåçæ¯ååçèè½ææ¯; 3.å¨åå§åæ­¥åï¼å®ä¸ä¼åæ­¢æ¶éï¼ä»¥é²å¯¹éè¦ç³»ç»æ¶é´ä¿æåè°çåºç¨ç¨åºé æå½±å; 4.å¨åºå¯¹ä¸´æ¶éå¯¹ç§°å»¶è¿æ¶(ä¾å¦å¤§è§æ¨¡ä¸è½½é æé¾æ¥é¥±åç­æåµ)æä¾äºæ´å¥½çç¨³å®æ§; 5.æ éå¯¹æ¶é´æå¡å¨è¿è¡å®æè½®è¯¢ï¼å æ­¤å·å¤é´æ­æ§ç½ç»è¿æ¥(å¦ç½ç»ä¸ç¨³å®çåºæ¯)çç³»ç»ä»ç¶å¯ä»¥å¿«éåæ­¥æ¶éã\n\n\n# ntpè½åï¼chronyåä¸å°çï¼\n\nntpæ¯ærfc 5905çæææä½æ¨¡å¼ï¼åæ¬å¹¿æ­ãå¤æ­åmanycastæå¡å¨/å®¢æ·ç«¯ãç¶èï¼å¹¿æ­åå¤æ­æ¨¡å¼æ¬è´¨ä¸ä¸å¦æ®éçæå¡å¨/å®¢æ·æºæ¨¡å¼åç¡®åå®å¨ï¼å³ä½¿æèº«ä»½éªè¯ï¼ï¼éå¸¸åºè¯¥é¿åã ntpæ¯æèªå¨å¯é¥åè®®ï¼rfc 5906ï¼æ¥ä½¿ç¨å¬é¥å å¯å¯¹æå¡å¨è¿è¡èº«ä»½éªè¯ãè¯·æ³¨æï¼è¯¥åè®®å·²è¢«è¯ææ¯ä¸å®å¨çï¼å¹¶ä¸å·²è¢«ntsï¼rfc 8915ï¼æ·æ±°ã ntpå·²ç»è¢«ç§»æ¤å°æ´å¤çæä½ç³»ç»ä¸­ã ntpåå«å¤§éç¨äºåç§ç¡¬ä»¶åèæ¶éçé©±å¨ç¨åºãchronyéè¦å¶ä»ç¨åºï¼å¦gpsdæntp refclockï¼éè¿shmæsockæ¥å£æä¾åèæ¶é´ã\n\n\n# chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼\n\nchronyå¯ä»¥å¨è®¿é®æ¶é´åèæ¯æ­æ­ç»­ç»­çç¯å¢ä¸­ææå°æ§è¡ãntpéè¦å®æå¯¹å¼ç¨è¿è¡è½®è¯¢æè½æ­£å¸¸å·¥ä½ã chronyéå¸¸å¯ä»¥æ´å¿«å°åæ­¥æ¶éï¼å¹¶å·ææ´å¥½çæ¶é´ç²¾åº¦ã chronyå¿«ééåºæ¶ééçççªç¶ååï¼ä¾å¦ï¼ç±äºæ¶ä½æ¯è¡å¨çæ¸©åº¦ååï¼ãntpå¯è½éè¦å¾é¿æ¶é´æè½éæ°å®å®ä¸æ¥ã chronyå³ä½¿å¨ç½ç»æ¥å¡æ¶é´è¾é¿çæåµä¸ä¹è½è¡¨ç°è¯å¥½ã é»è®¤éç½®ä¸­çchronyä»ä¸å ç¨æ¶é´æ¥ä¸æä¹±å¶ä»æ­£å¨è¿è¡çç¨åºãntpä¹å¯ä»¥éç½®ä¸ºä»ä¸æ­¥è¿æ¶é´ï¼ä½æ¯å¨è¿ç§æåµä¸ï¼å®å¿é¡»ä½¿ç¨ä¸åçæ¹æ³æ¥è°æ´æ¶éï¼daemonå¾ªç¯èä¸æ¯åæ ¸è§ç¨ï¼ï¼è¿å¯è½ä¼å¯¹æ¶éçåç¡®æ§äº§çè´é¢å½±åã chronyå¯ä»¥å¨æ´å¤§çèå´åè°æ´æ¶éçéçï¼è¿ä½¿å¾å®çè³å¯ä»¥å¨æ¶éä¸­æ­æä¸ç¨³å®çæºå¨ä¸è¿è¡ï¼ä¾å¦å¨æäºèææºä¸­ï¼ã chronyæ´å°ï¼å ç¨çåå­æ´å°ï¼åªæå¨éè¦æ¶æä¼å¤écpuï¼è¿æ ·æ´ççµã chronyå¯ä»¥åntpåä¸å°çäºæï¼ chronyæ¯æç½ç»æ¶é´å®å¨ï¼ntsï¼è®¤è¯æºå¶ã chronyå¨linuxä¸æ¯æç¡¬ä»¶æ¶é´æ³ï¼è¿åè®¸å¨æ¬å°ç½ç»ä¸­è¿è¡éå¸¸ç¨³å®ååç¡®çåæ­¥ã chronyä¸ºç¬ç«ç½ç»æä¾æ¯æï¼æ è®ºæ¶é´æ ¡æ­£çå¯ä¸æ¹æ³æ¯æå¨è¾å¥ï¼ä¾å¦ï¼ç±ç®¡çåæ¥çæ¶éï¼ãchronyå¯ä»¥æ¥çå¨ä¸åæ´æ°æ¶æ´æ­£çéè¯¯ï¼è®¡ç®åºè®¡ç®æºè·å¾æä¸¢å¤±æ¶é´çéçï¼å¹¶ä½¿ç¨æ­¤ä¼°è®¡å¼æ¥éåè°æ´è®¡ç®æºæ¶éã chronyæ¯æè®¡ç®å®æ¶æ¶éçå¢çæä¸¢å¤±çï¼å³å¨è®¡ç®æºå³é­æ¶ä¿ææ¶é´çæ¶éãå½ç³»ç»å¼å¯¼æ¶ï¼å®å¯ä»¥ä½¿ç¨è¿äºæ°æ®ä»å®æ¶æ¶éçä¿®æ­£çæ¬è®¾ç½®ç³»ç»æ¶é´ãå°ç®åä¸ºæ­¢ï¼è¿äºå®æ¶æ¶éå·¥å·ä»å¨linuxä¸å¯ç¨ã\n\n\n# äºãchronyæå¡å®è£çæä»¶ï¼\n\n[root@master200.yinzhengjie.org.cn ~]# rpm -ql chrony\n/etc/networkmanager/dispatcher.d/20-chrony\n/etc/chrony.confãããããããã#chronyçä¸»éç½®æä»¶\n/etc/chrony.keys\n/etc/dhcp/dhclient.d/chrony.sh\n/etc/logrotate.d/chrony\n/etc/sysconfig/chronyd\n/usr/bin/chronycãããããããã#chronycæ¯ä¸ä¸ªå½ä»¤è¡äº¤äºå¼æ¥å£ç¨åºï¼å¯ç¨äºçè§chronydçæ§è½ï¼å¹¶å¨è¿è¡æ¶æ´æ¹åç§æä½åæ°ã\n/usr/lib/systemd/ntp-units.d/50-chronyd.list\n/usr/lib/systemd/system/chrony-dnssrv@.service\n/usr/lib/systemd/system/chrony-dnssrv@.timer\n/usr/lib/systemd/system/chrony-wait.service\n/usr/lib/systemd/system/chronyd.serviceãããããã#centos 7.xçæ¬å¯¹åºçunit file\n/usr/libexec/chrony-helper\n/usr/sbin/chronyd              #chronydæ¯ä¸ä¸ªå¯ä»¥å¨å¯å¨æ¶å¯å¨çå®æ¤ç¨åºï¼å®æ¢å¯ä»¥åå½æå¡ç«¯è¿ç¨ä¹å¯ä»¥åå½æå¡ç«¯è¿ç¨\n/usr/share/doc/chrony-3.4\n/usr/share/doc/chrony-3.4/copying\n/usr/share/doc/chrony-3.4/faq\n/usr/share/doc/chrony-3.4/news\n/usr/share/doc/chrony-3.4/readme\n/usr/share/man/man1/chronyc.1.gz\n/usr/share/man/man5/chrony.conf.5.gz\n/usr/share/man/man8/chronyd.8.gz\n/var/lib/chrony\n/var/lib/chrony/drift\n/var/lib/chrony/rtc\n/var/log/chrony\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# å­ãchronyéç½®chrony.conf\n\n\n# å¸¸ç¨éç½®é¡¹ï¼\n\npool 10.210.116.60                       #æ­¤æä»¤çè¯­æ³ä¸serveræä»¤çè¯­æ³ç±»ä¼¼ï¼åªæ¯å®ç¨äºæå®ntpæå¡å¨æ± ï¼èä¸æ¯åä¸ªntpæå¡å¨ãæ± åç§°éè¦è§£æä¸ºå¤ä¸ªå°åï¼è¿äºå°åå¯è½ä¼éçæ¶é´çæ¨ç§»èæ¹åã\nserver 0.centos.pool.ntp.org iburst          #serverå¯ç¨äºæ¶éæå¡å¨ï¼iburstï¼å½æå¡å¨å¯è¾¾æ¶ï¼åéä¸ä¸ªå«ä¸ªæ°æ®åèä¸æ¯éå¸¸çä¸ä¸ªæ°æ®åï¼åé´ééå¸¸ä¸º2ç§ï¼å¯å å¿«åå§åæ­¥éåº¦; iburst æ¯åæ°, ä¸è¬ç¨æ­¤åæ°å³å¯ãè¯¥åæ°çå«ä¹æ¯å¨å¤´åæ¬¡ ntp è¯·æ±ä»¥ 2s æèæ´ç­çé´éï¼èä¸æ¯ä»¥ minpoll x æå®çæå°é´éï¼è¿æ ·çè®¾ç½®å¯ä»¥è®© chronyd å¯å¨æ¶å¿«éè¿è¡ä¸æ¬¡åæ­¥ã\nå¶ä»çåæ°æ minpoll x é»è®¤å¼æ¯ 6ï¼ä»£è¡¨ 64sãmaxpoll x é»è®¤å¼æ¯ 9ï¼ä»£è¡¨ 512sã\nserver 1.centos.pool.ntp.org iburst          #n.centos.pool.ntp.orgï¼è¿ä¸ªæ¯å°åæ± ï¼æ¯ntpæå¡çèæéç¾¤ï¼è¿éå¯ä»¥åæéç¾¤å°åï¼ä¹å¯ä»¥åæå®çææå¡å¨\npeer 10.210.116.160     #åntp, å¯¹ç­ä½æ¨¡å¼\ndriftfile /var/lib/chrony/drift              #æ ¹æ®å®éæ¶é´è®¡ç®åºè®¡ç®æºå¢åæ¶é´çæ¯çï¼è®²å®è®°å½å°ä¸ä¸ªæä»¶ä¸­ï¼ä¼å¨éå¯åä¸ºç³»ç»æ¶éååºè¡¥å¿\nmakestep 1.0 3                         #å½å¤´ä¸æ¬¡æ ¡æ¶ï¼å¦ææ¶é´ç¸å·® 1.0s, åè·³è·å¼æ ¡æ¶\nrtcsync                                #å¯ç¨åæ ¸æ¨¡å¼ï¼ç³»ç»æ¶éæ¯11åéä¼æ·è´å°å®æ¶æ¶éï¼rtcï¼\n#allow 192.168.0.0/16                   #allow/denyï¼ä»åè®¸/æç»192.168.2.0/24ç½ç»çä¸»æºå¯ä»¥è®¿é®æ­¤æ¶é´æå¡å¨ deny allæç»ææå®¢æ·ç«¯\n#local stratum 10                       #å³ä½¿serveræä»¤ä¸­æ¶é´æå¡å¨ä¸å¯ç¨ï¼ä¹åè®¸è®²æ¬å°æ¶é´åä¸ºæ åæ¶é´ææ¶ç»å¶å®å®¢æ·ç«¯\nstratumweight 0.05                      # è®©chronydå¨éæ©æºæ¶å¿½ç¥æºçå±çº§\n#hwtimestamp *                        #éè¿ä½¿ç¨ hwtimestamp æä»¤å¯ç¨ç¡¬ä»¶æ¶é´æ³\n#minsources 2                          #å¢å è°æ´æéçå¯éæ©æºçæå°æ°é\n#keyfile /etc/chrony.keys                 # æå®åå«ntpéªè¯å¯é¥çæä»¶ã\nlogdir /var/log/chrony                   # æå®æ¥å¿æä»¶çç®å½ã\nlogchange 0.5                          # å¦ææ¶éè°æ´å¤§äº0.5ç§ï¼ååç³»ç»æ¥å¿åéæ¶æ¯\n#log measurements statistics tracking      #éæ©æ¥å¿æä»¶è¦è®°å½çä¿¡æ¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# å»ºè®®éç½®é¡¹ï¼\n\n 1. å½åèç¹è®¾ç½®æserver:127.127.0.1\n 2. ä¸ä¸ªmasterèç¹ä½ä¸ºå¶ä»æ®éèç¹çæ¶é´æå¡å¨ï¼éç½®æpoolï¼\n 3. ä¸ä¸ªmasterèç¹äºä¸ºpeer(ååntp)\n 4. å¦ææå¤é¨æ¶éæºéç½®ï¼åè®¾ç½®æpool\n 5. å¦ææ¶é´è¶è¿10minï¼ååè®¸ç¬¬ä¸æ¬¡è·³è· ï¼ä¸ä¹åæ²ééæ±ä¿æä¸è´ï¼å¯ä¿®æ¹ç­ç¥ï¼\n 6. æå¤3ä¸ªå¤é¨æ¶éæºï¼å¯ä»¥ä¸è®¾ç½®å¤é¨æ¶éæº\n\n\n# ntp server(masterèç¹)\n\nserver 127.127.0.1 pool å¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 peer master2èç¹ip peer master3èç¹ip driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ntp client(æ®énodeèç¹)\n\nserver 127.127.0.1 poolå¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 pool master1èç¹ip pool master2èç¹ip pool master3èç¹ip driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ä¸ãé¨ç½²:\n\nenable chronyï¼ disable ntpd\n\n 1. stop/disable ntpd\n 2. configure chrony.conf(master/node)\n 3. systemctl start/enable chronyd.service\n 4. systemctl restart chronyd.service (notify)\n\n\n# å«ãå¸¸ç¨chronyå½ä»¤ï¼\n\n1ã chronyd -q 'server ntp.ntsc.ac.cn iburst' ä¸´æ¶åæ­¥æ¶é´ 2ã chronyc -n sources -v æ¥çæ¶é´åæ­¥æå¡å¨åè¡¨ 3ã accheck - æ£æ¥ntpè®¿é®æ¯å¦å¯¹ç¹å®ä¸»æºå¯ç¨ 4ã activity - è¯¥å½ä»¤ä¼æ¾ç¤ºæå¤å°ntpæºå¨çº¿/ç¦»çº¿ 5ã add server - æå¨æ·»å ä¸å°æ°çntpæå¡å¨ã 6ã clients - å¨å®¢æ·ç«¯æ¥åå·²è®¿é®å°æå¡å¨ 7ã delete - æå¨ç§»é¤ntpæå¡å¨æå¯¹ç­æå¡å¨ 8ã settime - æå¨è®¾ç½®å®æ¤è¿ç¨æ¶é´ 9ã tracking - æ¾ç¤ºç³»ç»æ¶é´ä¿¡æ¯\n\n\n# ä¹ãé®é¢å®ä½æè·¯\n\n1.æ£æ¥chronyæå¡æ¯å¦æ­£å¸¸ï¼chrony activity 2.æ£æ¥ntpdæå¡æ¯å¦å¯å¨ï¼systemctl is-active ntpd 3.æ£æ¥æ¶é´åæ­¥æå¡å¨åè¡¨ï¼chronyc -n sources -v\n\n\n# åãåèèµæï¼\n\nhttps://chrony.tuxfamily.org/documentation.html",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"crd operator",frontmatter:{title:"crd operator",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s11/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)",meta:[{name:"twitter:title",content:"crd operator"},{name:"twitter:description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html"},{property:"og:type",content:"article"},{property:"og:title",content:"crd operator"},{property:"og:description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"crd operator"},{itemprop:"description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html",relativePath:"01.ææ¯æè°/03.kubernetes/11.crd operator.md",key:"v-81d98e10",path:"/pages/k8s11/",headers:[{level:2,title:"CRD",slug:"crd",normalizedTitle:"crd",charIndex:2},{level:2,title:"Operator",slug:"operator",normalizedTitle:"operator",charIndex:48}],headersStr:"CRD Operator",content:"# CRD\n\nèªå®ä¹èµæºçæè¿°(Custom Resource Definition)\n\n\n# Operator\n\nOperatorçå·¥ä½åçï¼å®éä¸æ¯å©ç¨äºKubernetesçèªå®ä¹APIèµæºï¼CRDï¼ï¼æ¥æè¿°æä»¬æ³è¦é¨ç½²çâæç¶æåºç¨âï¼ç¶åå¨èªå®ä¹æ§å¶å¨éï¼æ ¹æ®èªå®ä¹APIå¯¹è±¡çååï¼æ¥å®æå·ä½çé¨ç½²åè¿ç»´å·¥ä½ã",normalizedContent:"# crd\n\nèªå®ä¹èµæºçæè¿°(custom resource definition)\n\n\n# operator\n\noperatorçå·¥ä½åçï¼å®éä¸æ¯å©ç¨äºkubernetesçèªå®ä¹apièµæºï¼crdï¼ï¼æ¥æè¿°æä»¬æ³è¦é¨ç½²çâæç¶æåºç¨âï¼ç¶åå¨èªå®ä¹æ§å¶å¨éï¼æ ¹æ®èªå®ä¹apiå¯¹è±¡çååï¼æ¥å®æå·ä½çé¨ç½²åè¿ç»´å·¥ä½ã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"criä¹containerd shimv2",frontmatter:{title:"criä¹containerd shimv2",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s12/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"https://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼",meta:[{name:"twitter:title",content:"criä¹containerd shimv2"},{name:"twitter:description",content:"https://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html"},{property:"og:type",content:"article"},{property:"og:title",content:"criä¹containerd shimv2"},{property:"og:description",content:"https://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"criä¹containerd shimv2"},{itemprop:"description",content:"https://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html",relativePath:"01.ææ¯æè°/03.kubernetes/12.criä¹containerd shimv2.md",key:"v-16eeeecc",path:"/pages/k8s12/",headers:[{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2}],headersStr:"åèèµæ",content:"# åèèµæ\n\nhttps://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼",normalizedContent:"# åèèµæ\n\nhttps://www.infoq.cn/article/r*ikovovthhadaww1hb1 cri shimv2ï¼ä¸ç§ kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"harbor",frontmatter:{title:"harbor",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s13/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"harbor"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html"},{property:"og:type",content:"article"},{property:"og:title",content:"harbor"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"harbor"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html",relativePath:"01.ææ¯æè°/03.kubernetes/13.harbor.md",key:"v-c5d8330a",path:"/pages/k8s13/",headers:[{level:2,title:"harboråçº§æ°æ®åºè¿ç§»ååæ»",slug:"harboråçº§æ°æ®åºè¿ç§»ååæ»",normalizedTitle:"harboråçº§æ°æ®åºè¿ç§»ååæ»",charIndex:2},{level:3,title:"harborå®è£",slug:"harborå®è£",normalizedTitle:"harborå®è£",charIndex:23},{level:3,title:"harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼",slug:"harboråçº§-å¤§äºv1-10-xå°æ´æ°çæ¬",normalizedTitle:"harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼",charIndex:141},{level:3,title:"harboråæ»",slug:"harboråæ»",normalizedTitle:"harboråæ»",charIndex:566},{level:3,title:"harboræ°æ®åºè¿ç§»ågolang-migrate",slug:"harboræ°æ®åºè¿ç§»ågolang-migrate",normalizedTitle:"harboræ°æ®åºè¿ç§»ågolang-migrate",charIndex:662}],headersStr:"harboråçº§æ°æ®åºè¿ç§»ååæ» harborå®è£ harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼ harboråæ» harboræ°æ®åºè¿ç§»ågolang-migrate",content:"# harboråçº§æ°æ®åºè¿ç§»ååæ»\n\n\n# harborå®è£\n\n 1. ä¸è½½docker-compose\n 2. ä¸è½½ï¼è§£åHarborç¦»çº¿å\n 3. ä¿®æ¹éç½®harbor.yml.tmpl>harbor.ymlåçæè¯ä¹¦ç­\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼\n\nharborä¸åé¶æ®µçåçº§æ¹å¼ä¸åï¼å­å¨å¼å®¹æ§é®é¢ï¼æäºçæ¬æ æ³ç´æ¥è·¨çæ¬åçº§ï¼éè¦å¤é¶æ®µåçº§æ¹å¼è¾¾å°æç»åçº§ç®ç èªharborv2èµ·ï¼è¿ç§»å·¥å·å¨é¨è½¬ç§»å°äº goharbor/prepare è¿ä¸ªéåä¸­\n\n 1. å°githubä¸è½½2.4.2çæ¬çç¦»çº¿åï¼åå«éågoharbor/prepareï¼\n 2. åå¤è¿ç§»å·¥å·éågoharbor/prepare\n 3. åæ­¢harbor\n 4. å¤ä»½æ°æ®åºåå®è£ç®å½\n 5. è§£åç¦»çº¿åå°å®è£ç®å½\n 6. ç§»å¨æ§çéç½®æä»¶å°æ°çå®è£ç®å½ä¸\n 7. æ°æ®è¿ç§»ï¼docker run -it --rm -v /:/hostfs goharbor/prepare:v2.4.2 migrate -i /opt/harbor/harbor.yml ï¼æ­¤æ´æ°åæ¬æ°æ®åºæ¨¡å¼ï¼schemaï¼åéç½®æä»¶æ°æ®ï¼\n 8. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråæ»\n\n 1. åæ­¢harbor\n 2. å é¤å®è£ç®å½åæ°æ®åºæä»¶\n 3. å°å¤ä»½ç®å½åå¤ä»½æ°æ®åºè¿ååå®è£ç®å½åæ°æ®åºç®å½\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboræ°æ®åºè¿ç§»ågolang-migrate\n\næ°æ®åºåçº§æ¯èªå¨å®æçï¼ç¨æ·æå¨æ§è¡åçº§éç½®æä»¶çå½ä»¤è¡å·¥å·åãæ­¤å·¥å·åä¸Harborä¸ååå¸ï¼è¢«åå«å¨goharbor/prepareéåä¸­ã\n\næ¯æ¬¡å¯å¨Harborå®ä¾æ¶ï¼å®çæ°æ®åºæ¨¡å¼é½æ¯èªå¨åçº§çï¼å¶åçä¸ºï¼Harborå¨æ¯æ¬¡å¯å¨æ¶é½ä¼è°ç¨ç¬¬ä¸æ¹åº âgolang-migrateâï¼å®ä¼æ£æµå½åæ°æ®åºæ¨¡å¼ççæ¬ï¼å¦æå®ä¾ççæ¬æ¯å½åæ°æ®åºççæ¬æ´é«ï¼åä¼èªå¨åçº§ã\n\n$ docker run -v /:/hostfs goharbor/prepare:v2.0.0 migrate -i ${harbor.ymlè·¯å¾}\n\n\n1\n",normalizedContent:"# harboråçº§æ°æ®åºè¿ç§»ååæ»\n\n\n# harborå®è£\n\n 1. ä¸è½½docker-compose\n 2. ä¸è½½ï¼è§£åharborç¦»çº¿å\n 3. ä¿®æ¹éç½®harbor.yml.tmpl>harbor.ymlåçæè¯ä¹¦ç­\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼\n\nharborä¸åé¶æ®µçåçº§æ¹å¼ä¸åï¼å­å¨å¼å®¹æ§é®é¢ï¼æäºçæ¬æ æ³ç´æ¥è·¨çæ¬åçº§ï¼éè¦å¤é¶æ®µåçº§æ¹å¼è¾¾å°æç»åçº§ç®ç èªharborv2èµ·ï¼è¿ç§»å·¥å·å¨é¨è½¬ç§»å°äº goharbor/prepare è¿ä¸ªéåä¸­\n\n 1. å°githubä¸è½½2.4.2çæ¬çç¦»çº¿åï¼åå«éågoharbor/prepareï¼\n 2. åå¤è¿ç§»å·¥å·éågoharbor/prepare\n 3. åæ­¢harbor\n 4. å¤ä»½æ°æ®åºåå®è£ç®å½\n 5. è§£åç¦»çº¿åå°å®è£ç®å½\n 6. ç§»å¨æ§çéç½®æä»¶å°æ°çå®è£ç®å½ä¸\n 7. æ°æ®è¿ç§»ï¼docker run -it --rm -v /:/hostfs goharbor/prepare:v2.4.2 migrate -i /opt/harbor/harbor.yml ï¼æ­¤æ´æ°åæ¬æ°æ®åºæ¨¡å¼ï¼schemaï¼åéç½®æä»¶æ°æ®ï¼\n 8. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråæ»\n\n 1. åæ­¢harbor\n 2. å é¤å®è£ç®å½åæ°æ®åºæä»¶\n 3. å°å¤ä»½ç®å½åå¤ä»½æ°æ®åºè¿ååå®è£ç®å½åæ°æ®åºç®å½\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboræ°æ®åºè¿ç§»ågolang-migrate\n\næ°æ®åºåçº§æ¯èªå¨å®æçï¼ç¨æ·æå¨æ§è¡åçº§éç½®æä»¶çå½ä»¤è¡å·¥å·åãæ­¤å·¥å·åä¸harborä¸ååå¸ï¼è¢«åå«å¨goharbor/prepareéåä¸­ã\n\næ¯æ¬¡å¯å¨harborå®ä¾æ¶ï¼å®çæ°æ®åºæ¨¡å¼é½æ¯èªå¨åçº§çï¼å¶åçä¸ºï¼harborå¨æ¯æ¬¡å¯å¨æ¶é½ä¼è°ç¨ç¬¬ä¸æ¹åº âgolang-migrateâï¼å®ä¼æ£æµå½åæ°æ®åºæ¨¡å¼ççæ¬ï¼å¦æå®ä¾ççæ¬æ¯å½åæ°æ®åºççæ¬æ´é«ï¼åä¼èªå¨åçº§ã\n\n$ docker run -v /:/hostfs goharbor/prepare:v2.0.0 migrate -i ${harbor.ymlè·¯å¾}\n\n\n1\n",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"Loongnix mips64",frontmatter:{title:"Loongnix mips64",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s15/",categories:["ææ¯æè°","kubernetes"],tags:["mips"],titleTag:"åå",readingShow:"top",description:"Loongnix-20.loongarch64æ¡é¢ç³»ç»\n  Loongnix-server-20.loongarch64æå¡å¨ç³»ç»",meta:[{name:"twitter:title",content:"Loongnix mips64"},{name:"twitter:description",content:"Loongnix-20.loongarch64æ¡é¢ç³»ç»\n  Loongnix-server-20.loongarch64æå¡å¨ç³»ç»"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html"},{property:"og:type",content:"article"},{property:"og:title",content:"Loongnix mips64"},{property:"og:description",content:"Loongnix-20.loongarch64æ¡é¢ç³»ç»\n  Loongnix-server-20.loongarch64æå¡å¨ç³»ç»"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"mips"},{itemprop:"name",content:"Loongnix mips64"},{itemprop:"description",content:"Loongnix-20.loongarch64æ¡é¢ç³»ç»\n  Loongnix-server-20.loongarch64æå¡å¨ç³»ç»"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html",relativePath:"01.ææ¯æè°/03.kubernetes/15.Loongnix mips64.md",key:"v-211c03e0",path:"/pages/k8s15/",headers:[{level:2,title:"é¾è¯mips64",slug:"é¾è¯mips64",normalizedTitle:"é¾è¯mips64",charIndex:2},{level:2,title:"ç¤¾åºééæåµï¼",slug:"ç¤¾åºééæåµ",normalizedTitle:"ç¤¾åºééæåµï¼",charIndex:15},{level:2,title:"æºï¼",slug:"æº",normalizedTitle:"æºï¼",charIndex:323},{level:3,title:"yumæºä¿®æ¹ï¼",slug:"yumæºä¿®æ¹",normalizedTitle:"yumæºä¿®æ¹ï¼",charIndex:330},{level:3,title:"aptæºï¼",slug:"aptæº",normalizedTitle:"aptæºï¼",charIndex:826},{level:3,title:"Loongnix-20.mips64elç³»ç»æºå°å",slug:"loongnix-20-mips64elç³»ç»æºå°å",normalizedTitle:"loongnix-20.mips64elç³»ç»æºå°å",charIndex:1367},{level:3,title:"é¾è¯NPMæº",slug:"é¾è¯npmæº",normalizedTitle:"é¾è¯npmæº",charIndex:1712},{level:2,title:"harbor",slug:"harbor",normalizedTitle:"harbor",charIndex:1795},{level:2,title:"åèèµæ",slug:"åèèµæ",normalizedTitle:"åèèµæ",charIndex:2105}],headersStr:"é¾è¯mips64 ç¤¾åºééæåµï¼ æºï¼ yumæºä¿®æ¹ï¼ aptæºï¼ Loongnix-20.mips64elç³»ç»æºå°å é¾è¯NPMæº harbor åèèµæ",content:'# é¾è¯mips64\n\n\n# ç¤¾åºééæåµï¼\n\né¾è¯å¹³å°å·²ééäºMIPSä¸çloongnix-Serverä»¥åDebian10å¯¹åºççæ¬ï¼nodejs-v12.16.3ï¼LoongArchä¸çLoongnix-20.loongarch64æ¡é¢ç³»ç»ä»¥åLoongnix-server-20.loongarch64æå¡å¨ç³»ç»å¯¹åºççæ¬: nodejs-v14.16.1ï¼å¹¶å°æç»­ç»´æ¤ï¼åäºä¸ºç¨æ·æä¾å¥½ç¨çå¼åç¯å¢ã\n\n * mips: loongnix-Server Debian10\n * LoongArch: Loongnix-20.loongarch64æ¡é¢ç³»ç» Loongnix-server-20.loongarch64æå¡å¨ç³»ç»\n\n\n# æºï¼\n\n\n# yumæºä¿®æ¹ï¼\n\nyum install epel-release -y\n\nvi  /etc/yum.repos.d/Loongnix-Base.repo\norg>cn\nsed -i \'s/org/cn/g\' /etc/yum.repos.d/Loongnix-Base.repo \nyum clean all \nyum makecache\n\nyum install epel-release -y && cp /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel-test.repo && sed -i s/ftp.loongnix.org/10.2.5.28/g /etc/yum.repos.d/epel-test.repo && yum makecache && yum install git which gcc g++ libatomic gpg tar openssl11 -y\n\nyum install epel-release -y && yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# aptæºï¼\n\necho "deb http://os.loongnix.org/mirrors/debian/debian/ buster main" >> /etc/apt/sources.list\n\necho "deb http://mirrors.163.com/debian/ buster main contrib non-free" > /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-updates main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-backports main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian-security buster/updates main contrib non-free" >> /etc/apt/sources.list\n\n\n1\n2\n3\n\n\n\n# Loongnix-20.mips64elç³»ç»æºå°å\n\ndeb [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ DaoXiangHu-testing main contrib non-free \ndeb-src [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ DaoXiangHu-testing main contrib non-free\nLoongnix-server-1.7.2007 æå¡å¨ç³»ç»æºå°å\nhttp://ftp.loongnix.org/os/loongnix-server/1.7/\n\n\n1\n2\n3\n4\n\n\n\n# é¾è¯NPMæº\n\næºå°å1ï¼http://npm.loongnix.cn:4873 æºå°å2ï¼http://registry.loongnix.cn:4873\n\n\n# harbor\n\næ§è¡ä»¥ä¸å½ä»¤ç¼è¾/etc/docker/daemon.jsonï¼å¢å insecure-registriesçéç½®ï¼éæ°å è½½å¹¶éå¯dockerä½¿éç½®çæ\n\nmkdir -p /etc/docker/\ntee /etc/docker/daemon.json <<-âEOFâ\n{\nâinsecure-registriesâ:[âharbor.loongnix.cnâ]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl enable docker\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åèèµæ\n\nhttp://doc.loongnix.cn/web/#/50?page_id=146 é¾è¯Dockerå®è£æå http://ftp.loongnix.cn/ é¾è¯å¼æºç¤¾åºftpä¸è½½ç«ç¹ http://www.loongnix.cn/index.php/Container-Registry Loongarchæ¶æçè½¯ä»¶ä»åºç«ç¹ http://ask.loongnix.cn/?/search/q-bm9kZWpz#all',normalizedContent:'# é¾è¯mips64\n\n\n# ç¤¾åºééæåµï¼\n\né¾è¯å¹³å°å·²ééäºmipsä¸çloongnix-serverä»¥ådebian10å¯¹åºççæ¬ï¼nodejs-v12.16.3ï¼loongarchä¸çloongnix-20.loongarch64æ¡é¢ç³»ç»ä»¥åloongnix-server-20.loongarch64æå¡å¨ç³»ç»å¯¹åºççæ¬: nodejs-v14.16.1ï¼å¹¶å°æç»­ç»´æ¤ï¼åäºä¸ºç¨æ·æä¾å¥½ç¨çå¼åç¯å¢ã\n\n * mips: loongnix-server debian10\n * loongarch: loongnix-20.loongarch64æ¡é¢ç³»ç» loongnix-server-20.loongarch64æå¡å¨ç³»ç»\n\n\n# æºï¼\n\n\n# yumæºä¿®æ¹ï¼\n\nyum install epel-release -y\n\nvi  /etc/yum.repos.d/loongnix-base.repo\norg>cn\nsed -i \'s/org/cn/g\' /etc/yum.repos.d/loongnix-base.repo \nyum clean all \nyum makecache\n\nyum install epel-release -y && cp /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel-test.repo && sed -i s/ftp.loongnix.org/10.2.5.28/g /etc/yum.repos.d/epel-test.repo && yum makecache && yum install git which gcc g++ libatomic gpg tar openssl11 -y\n\nyum install epel-release -y && yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# aptæºï¼\n\necho "deb http://os.loongnix.org/mirrors/debian/debian/ buster main" >> /etc/apt/sources.list\n\necho "deb http://mirrors.163.com/debian/ buster main contrib non-free" > /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-updates main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-backports main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian-security buster/updates main contrib non-free" >> /etc/apt/sources.list\n\n\n1\n2\n3\n\n\n\n# loongnix-20.mips64elç³»ç»æºå°å\n\ndeb [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ daoxianghu-testing main contrib non-free \ndeb-src [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ daoxianghu-testing main contrib non-free\nloongnix-server-1.7.2007 æå¡å¨ç³»ç»æºå°å\nhttp://ftp.loongnix.org/os/loongnix-server/1.7/\n\n\n1\n2\n3\n4\n\n\n\n# é¾è¯npmæº\n\næºå°å1ï¼http://npm.loongnix.cn:4873 æºå°å2ï¼http://registry.loongnix.cn:4873\n\n\n# harbor\n\næ§è¡ä»¥ä¸å½ä»¤ç¼è¾/etc/docker/daemon.jsonï¼å¢å insecure-registriesçéç½®ï¼éæ°å è½½å¹¶éå¯dockerä½¿éç½®çæ\n\nmkdir -p /etc/docker/\ntee /etc/docker/daemon.json <<-âeofâ\n{\nâinsecure-registriesâ:[âharbor.loongnix.cnâ]\n}\neof\nsudo systemctl daemon-reload\nsudo systemctl enable docker\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åèèµæ\n\nhttp://doc.loongnix.cn/web/#/50?page_id=146 é¾è¯dockerå®è£æå http://ftp.loongnix.cn/ é¾è¯å¼æºç¤¾åºftpä¸è½½ç«ç¹ http://www.loongnix.cn/index.php/container-registry loongarchæ¶æçè½¯ä»¶ä»åºç«ç¹ http://ask.loongnix.cn/?/search/q-bm9kzwpz#all',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"helm chart",frontmatter:{title:"helm chart",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s14/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"helm chart"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html"},{property:"og:type",content:"article"},{property:"og:title",content:"helm chart"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"helm chart"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html",relativePath:"01.ææ¯æè°/03.kubernetes/14.helm chart.md",key:"v-6da5591e",path:"/pages/k8s14/",headers:[{level:2,title:"helmå½ä»¤ï¼",slug:"helmå½ä»¤",normalizedTitle:"helmå½ä»¤ï¼",charIndex:2},{level:2,title:"examples/",slug:"examples",normalizedTitle:"examples/",charIndex:185}],headersStr:"helmå½ä»¤ï¼ examples/",content:"# helmå½ä»¤ï¼\n\nhelm create myservice helm install . helm install myservice --name myservice --namespace hfftest helm list helm package .\n\nhelm ls --all hfftest helm del --purge hfftest\n\n\n# examples/\n\nChart.yaml # Yamlæä»¶ï¼ç¨äºæè¿°Chartçåºæ¬ä¿¡æ¯ï¼åæ¬åç§°çæ¬ç­ LICENSE # [å¯é] åè®® README.md # [å¯é] å½åChartçä»ç» values.yaml # Chartçé»è®¤éç½®æä»¶ requirements.yaml # [å¯é] ç¨äºå­æ¾å½åChartä¾èµçå¶å®Chartçè¯´ææä»¶ charts/ # [å¯é]: è¯¥ç®å½ä¸­æ¾ç½®å½åChartä¾èµçå¶å®Chart templates/ # [å¯é]: é¨ç½²æä»¶æ¨¡çç®å½ï¼æ¨¡çä½¿ç¨çå¼æ¥èªvalues.yamlåç±Tilleræä¾çå¼ templates/NOTES.txt # [å¯é]: æ¾ç½®Chartçä½¿ç¨æå",normalizedContent:"# helmå½ä»¤ï¼\n\nhelm create myservice helm install . helm install myservice --name myservice --namespace hfftest helm list helm package .\n\nhelm ls --all hfftest helm del --purge hfftest\n\n\n# examples/\n\nchart.yaml # yamlæä»¶ï¼ç¨äºæè¿°chartçåºæ¬ä¿¡æ¯ï¼åæ¬åç§°çæ¬ç­ license # [å¯é] åè®® readme.md # [å¯é] å½åchartçä»ç» values.yaml # chartçé»è®¤éç½®æä»¶ requirements.yaml # [å¯é] ç¨äºå­æ¾å½åchartä¾èµçå¶å®chartçè¯´ææä»¶ charts/ # [å¯é]: è¯¥ç®å½ä¸­æ¾ç½®å½åchartä¾èµçå¶å®chart templates/ # [å¯é]: é¨ç½²æä»¶æ¨¡çç®å½ï¼æ¨¡çä½¿ç¨çå¼æ¥èªvalues.yamlåç±tilleræä¾çå¼ templates/notes.txt # [å¯é]: æ¾ç½®chartçä½¿ç¨æå",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"openebs-lvm-localpv",frontmatter:{title:"openebs-lvm-localpv",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/k8s16/",categories:["ææ¯æè°","kubernetes"],tags:["csi"],titleTag:"åå",readingShow:"top",description:"https://github.com/openebs/lvm-localpv",meta:[{name:"twitter:title",content:"openebs-lvm-localpv"},{name:"twitter:description",content:"https://github.com/openebs/lvm-localpv"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.openebs-lvm-localpv.html"},{property:"og:type",content:"article"},{property:"og:title",content:"openebs-lvm-localpv"},{property:"og:description",content:"https://github.com/openebs/lvm-localpv"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.openebs-lvm-localpv.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"csi"},{itemprop:"name",content:"openebs-lvm-localpv"},{itemprop:"description",content:"https://github.com/openebs/lvm-localpv"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.openebs-lvm-localpv.html",relativePath:"01.ææ¯æè°/03.kubernetes/16.openebs-lvm-localpv.md",key:"v-019d3da2",path:"/pages/k8s16/",headers:[{level:2,title:"pv",slug:"pv",normalizedTitle:"pv",charIndex:36},{level:3,title:"åå»ºpv",slug:"åå»ºpv",normalizedTitle:"åå»ºpv",charIndex:50},{level:3,title:"åå»ºvg",slug:"åå»ºvg",normalizedTitle:"åå»ºvg",charIndex:141},{level:2,title:"deploy",slug:"deploy",normalizedTitle:"deploy",charIndex:246}],headersStr:"pv åå»ºpv åå»ºvg deploy",content:'https://github.com/openebs/lvm-localpv\n\n\n# pv\n\n\n# åå»ºpv\n\npvname=${disk}1\n\nsgdisk -n 1:2048 ${disk} pvcreate ${pvname} pvdisplay ${pvname}\n\n\n# åå»ºvg\n\nvgcreate ${vgname} ${pvname} vgextend ${vgname} ${pvname} pvdisplay ${pvname} | grep ${vgname}\n\n\n# deploy\n\n$ kubectl apply -f https://openebs.github.io/charts/lvm-operator.yaml\n\n\n# åºç¨\n\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: openebs-lvmpv\nallowVolumeExpansion: true\nparameters:\n  storage: "lvm"\n  volgroup: "lvmvg"\nprovisioner: local.csi.openebs.io\nallowedTopologies:\n- matchLabelExpressions:\n  - key: kubernetes.io/hostname\n    values:\n      - lvmpv-node1\n      - lvmpv-node2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nvolgroupï¼éæ©vg allowedTopologies: éæ©èç¹\n\n\n# diskåæ¶\n\npvname=${disk}1\n\nvgremove ${vgname} æ vgreduce ${vgname} ${pvname}\n\npvremove ${pvname}\n\npvdisplay ${pvname}\n\nsgdisk --zap-all --clear --mbrtogpt ${disk}',normalizedContent:'https://github.com/openebs/lvm-localpv\n\n\n# pv\n\n\n# åå»ºpv\n\npvname=${disk}1\n\nsgdisk -n 1:2048 ${disk} pvcreate ${pvname} pvdisplay ${pvname}\n\n\n# åå»ºvg\n\nvgcreate ${vgname} ${pvname} vgextend ${vgname} ${pvname} pvdisplay ${pvname} | grep ${vgname}\n\n\n# deploy\n\n$ kubectl apply -f https://openebs.github.io/charts/lvm-operator.yaml\n\n\n# åºç¨\n\napiversion: storage.k8s.io/v1\nkind: storageclass\nmetadata:\n  name: openebs-lvmpv\nallowvolumeexpansion: true\nparameters:\n  storage: "lvm"\n  volgroup: "lvmvg"\nprovisioner: local.csi.openebs.io\nallowedtopologies:\n- matchlabelexpressions:\n  - key: kubernetes.io/hostname\n    values:\n      - lvmpv-node1\n      - lvmpv-node2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nvolgroupï¼éæ©vg allowedtopologies: éæ©èç¹\n\n\n# diskåæ¶\n\npvname=${disk}1\n\nvgremove ${vgname} æ vgreduce ${vgname} ${pvname}\n\npvremove ${pvname}\n\npvdisplay ${pvname}\n\nsgdisk --zap-all --clear --mbrtogpt ${disk}',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"DevOps",frontmatter:{title:"DevOps",date:"2022-08-24T16:38:55.000Z",permalink:"/pages/devops/",categories:["ææ¯æè°","kubernetes"],tags:["DevOps"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"DevOps"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/18.DevOps.html"},{property:"og:type",content:"article"},{property:"og:title",content:"DevOps"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/18.DevOps.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T16:38:55.000Z"},{property:"article:tag",content:"DevOps"},{itemprop:"name",content:"DevOps"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/18.DevOps.html",relativePath:"01.ææ¯æè°/03.kubernetes/18.DevOps.md",key:"v-3d63ec0a",path:"/pages/devops/",headers:[{level:2,title:"CI/CDæµæ°´çº¿",slug:"ci-cdæµæ°´çº¿",normalizedTitle:"ci/cdæµæ°´çº¿",charIndex:172},{level:3,title:"Jenkins",slug:"jenkins",normalizedTitle:"jenkins",charIndex:267}],headersStr:"CI/CDæµæ°´çº¿ Jenkins",content:"DevOpsæ¯ä¸å¥å®æ´çè¿ç»´å¼åæµç¨ï¼å¯ä»¥å®ç°å¿«éçæå»ºãæµè¯ååå¸è½¯ä»¶ï¼æ´ä¸ªæµç¨åæ¬ææ·å¼å-æç»­éæ-æç»­äº¤ä»-æç»­é¨ç½²-DevOpsã\n\n * CI(Continued integrate æç»­éæ)\n * CD(Continued Delivery æç»­äº¤ä»)\n * CD(Continued Deployment æç»­é¨ç½²)\n\n\n# CI/CDæµæ°´çº¿\n\n * å¤SCMæ¯æï¼GitLab/GitHub/BitBucket/SVNç­\n * å¾å½¢çé¢\n * sonarQube\n * æ¯æç¼å­\n * èªå¨åå¸ï¼æ´æ°éå\n\n\n# Jenkins\n\nJenkinsæ¯ä¸ä¸ªå¼æºçãæä¾åå¥½æä½çé¢çæç»­éæï¼CIï¼å·¥å·ï¼èµ·æºäºHudsonï¼ä¸»è¦ç¨äºæç»­ãèªå¨çæå»º/æµè¯è½¯ä»¶é¡¹ç®ãçæ§å¤é¨ä»»å¡çè¿è¡ã",normalizedContent:"devopsæ¯ä¸å¥å®æ´çè¿ç»´å¼åæµç¨ï¼å¯ä»¥å®ç°å¿«éçæå»ºãæµè¯ååå¸è½¯ä»¶ï¼æ´ä¸ªæµç¨åæ¬ææ·å¼å-æç»­éæ-æç»­äº¤ä»-æç»­é¨ç½²-devopsã\n\n * ci(continued integrate æç»­éæ)\n * cd(continued delivery æç»­äº¤ä»)\n * cd(continued deployment æç»­é¨ç½²)\n\n\n# ci/cdæµæ°´çº¿\n\n * å¤scmæ¯æï¼gitlab/github/bitbucket/svnç­\n * å¾å½¢çé¢\n * sonarqube\n * æ¯æç¼å­\n * èªå¨åå¸ï¼æ´æ°éå\n\n\n# jenkins\n\njenkinsæ¯ä¸ä¸ªå¼æºçãæä¾åå¥½æä½çé¢çæç»­éæï¼ciï¼å·¥å·ï¼èµ·æºäºhudsonï¼ä¸»è¦ç¨äºæç»­ãèªå¨çæå»º/æµè¯è½¯ä»¶é¡¹ç®ãçæ§å¤é¨ä»»å¡çè¿è¡ã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"traefik-IngressRoute",frontmatter:{title:"traefik-IngressRoute",date:"2022-08-24T16:38:55.000Z",permalink:"/pages/ingressroute/",categories:["ææ¯æè°","kubernetes"],tags:["ç½ç»"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"traefik-IngressRoute"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.traefik-ingressroute.html"},{property:"og:type",content:"article"},{property:"og:title",content:"traefik-IngressRoute"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.traefik-ingressroute.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T16:38:55.000Z"},{property:"article:tag",content:"ç½ç»"},{itemprop:"name",content:"traefik-IngressRoute"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.traefik-ingressroute.html",relativePath:"01.ææ¯æè°/03.kubernetes/17.traefik-ingressroute.md",key:"v-185c15db",path:"/pages/ingressroute/",headers:[{level:2,title:"è·¯ç±å¹éè§å",slug:"è·¯ç±å¹éè§å",normalizedTitle:"è·¯ç±å¹éè§å",charIndex:553},{level:2,title:"ä¸­é´ä»¶",slug:"ä¸­é´ä»¶",normalizedTitle:"ä¸­é´ä»¶",charIndex:1086},{level:2,title:"httpséç½®",slug:"httpséç½®",normalizedTitle:"httpséç½®",charIndex:1283}],headersStr:"è·¯ç±å¹éè§å ä¸­é´ä»¶ httpséç½®",content:"IngressRouteæ¯traefikç¼åçä¸ä¸ªèªå®ä¹èµæº(CRD),å¯ä»¥æ´å¥½çéç½®traefikæéçè·¯ç±ä¿¡æ¯ https://doc.traefik.io/traefik/reference/dynamic-configuration/kubernetes-crd/#resources\n\napiVersion: traefik.containo.us/v1alpha1\nkind: IngressRoute\nmetadata:\n  name: nginx-test\n  namespace: kube-ops\nspec:\n  entryPoints:\n    # æå®å¥å£ç¹ä¸ºwebãè¿éçwebå°±æ¯traefikéæéç½®(å¯å¨åæ°)ä¸­ç --entryPoints.web.address=:8000,éè¿ä»ªè¡¨çä¹å¯ä»¥çå°\n    - web\n  routes:\n    - kind: Rule\n      match: Host(`test.com`) # å¹éè§å,ç¬¬ä¸é¨åè¯´æ\n      services:\n        - name: nginx-test\n          port: 80\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# è·¯ç±å¹éè§å\n\n * Headers(key, value): å¤æ­è¯·æ±å¤´æ¯å¦å­å¨ï¼keyæ¯è¯·æ±å¤´åç§°ï¼valueæ¯å¼\n * HeadersRegexp(key, regexp): åä¸,å¯ä»¥ä½¿ç¨æ­£åæ¥å¹é\n * Host(example.com, ...): æ£æ¥è¯·æ±Hostè¯·æ±å¤´,å¤æ­å¶å¼æ¯å¦ä¸ºç»å®ä¹ä¸\n * HostHeader(example.com, ...): åä¸\n * HostRegexp(example.com, {subdomain:[a-z]+}.example.com, ...): åä¸ï¼å¯ä»¥ä½¿ç¨æ­£å\n * Method(GET, ...): æ£æ¥è¯·æ±æ¹æ³æ¯å¦ä¸ºç»å®çä¸ä¸ªmethodsï¼GETï¼POSTï¼PUTï¼DELETEï¼PATCHï¼\n * Path(/path, /articles/{cat:[a-z]+}/{id:[0-9]+}, ...): å¹éç¡®åçè¯·æ±è·¯å¾ãæ¥åæ­£åè¡¨è¾¾å¼\n * PathPrefix(/products/, /articles/{cat:[a-z]+}/{id:[0-9]+}): å¹éè¯·æ±åç¼è·¯å¾ãæ¥åæ­£åè¡¨è¾¾å¼\n * Query(foo=bar, bar=baz): å¹éæ¥è¯¢å­ç¬¦ä¸²åæ°\n\n\n# ä¸­é´ä»¶\n\napiVersion: traefik.containo.us/v1alpha1\nkind: Middleware\nmetadata:\n  name: stripprefix-test\n  namespace: test\nspec:\n  stripPrefix:\n    prefixes:\n    - /test/\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# httpséç½®\n\n * çæè¯ä¹¦secret\n\nkubectl create secret tls nginx-test --cert=tls.crt --key=tls.key\n\n * ä¿®æ¹ä¹åçIngressRoute\n\napiVersion: traefik.containo.us/v1alpha1\nkind: IngressRoute\nmetadata:\n  name: nginx-test\n  namespace: kube-ops\nspec:\n  entryPoints:\n    # æå®å¥å£ç¹ä¸ºwebãè¿éçwebå°±æ¯traefikéæéç½®(å¯å¨åæ°)ä¸­ç --entryPoints.web.address=:8000,éè¿ä»ªè¡¨çä¹å¯ä»¥çå°\n    - web\n  routes:\n    - kind: Rule\n      match: Host(`test.com`) # å¹éè§å,ç¬¬ä¸é¨åè¯´æ\n      services:\n        - name: nginx-test\n          port: 80\n  tls:\n    secretName: nginx-test\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n",normalizedContent:"ingressrouteæ¯traefikç¼åçä¸ä¸ªèªå®ä¹èµæº(crd),å¯ä»¥æ´å¥½çéç½®traefikæéçè·¯ç±ä¿¡æ¯ https://doc.traefik.io/traefik/reference/dynamic-configuration/kubernetes-crd/#resources\n\napiversion: traefik.containo.us/v1alpha1\nkind: ingressroute\nmetadata:\n  name: nginx-test\n  namespace: kube-ops\nspec:\n  entrypoints:\n    # æå®å¥å£ç¹ä¸ºwebãè¿éçwebå°±æ¯traefikéæéç½®(å¯å¨åæ°)ä¸­ç --entrypoints.web.address=:8000,éè¿ä»ªè¡¨çä¹å¯ä»¥çå°\n    - web\n  routes:\n    - kind: rule\n      match: host(`test.com`) # å¹éè§å,ç¬¬ä¸é¨åè¯´æ\n      services:\n        - name: nginx-test\n          port: 80\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# è·¯ç±å¹éè§å\n\n * headers(key, value): å¤æ­è¯·æ±å¤´æ¯å¦å­å¨ï¼keyæ¯è¯·æ±å¤´åç§°ï¼valueæ¯å¼\n * headersregexp(key, regexp): åä¸,å¯ä»¥ä½¿ç¨æ­£åæ¥å¹é\n * host(example.com, ...): æ£æ¥è¯·æ±hostè¯·æ±å¤´,å¤æ­å¶å¼æ¯å¦ä¸ºç»å®ä¹ä¸\n * hostheader(example.com, ...): åä¸\n * hostregexp(example.com, {subdomain:[a-z]+}.example.com, ...): åä¸ï¼å¯ä»¥ä½¿ç¨æ­£å\n * method(get, ...): æ£æ¥è¯·æ±æ¹æ³æ¯å¦ä¸ºç»å®çä¸ä¸ªmethodsï¼getï¼postï¼putï¼deleteï¼patchï¼\n * path(/path, /articles/{cat:[a-z]+}/{id:[0-9]+}, ...): å¹éç¡®åçè¯·æ±è·¯å¾ãæ¥åæ­£åè¡¨è¾¾å¼\n * pathprefix(/products/, /articles/{cat:[a-z]+}/{id:[0-9]+}): å¹éè¯·æ±åç¼è·¯å¾ãæ¥åæ­£åè¡¨è¾¾å¼\n * query(foo=bar, bar=baz): å¹éæ¥è¯¢å­ç¬¦ä¸²åæ°\n\n\n# ä¸­é´ä»¶\n\napiversion: traefik.containo.us/v1alpha1\nkind: middleware\nmetadata:\n  name: stripprefix-test\n  namespace: test\nspec:\n  stripprefix:\n    prefixes:\n    - /test/\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# httpséç½®\n\n * çæè¯ä¹¦secret\n\nkubectl create secret tls nginx-test --cert=tls.crt --key=tls.key\n\n * ä¿®æ¹ä¹åçingressroute\n\napiversion: traefik.containo.us/v1alpha1\nkind: ingressroute\nmetadata:\n  name: nginx-test\n  namespace: kube-ops\nspec:\n  entrypoints:\n    # æå®å¥å£ç¹ä¸ºwebãè¿éçwebå°±æ¯traefikéæéç½®(å¯å¨åæ°)ä¸­ç --entrypoints.web.address=:8000,éè¿ä»ªè¡¨çä¹å¯ä»¥çå°\n    - web\n  routes:\n    - kind: rule\n      match: host(`test.com`) # å¹éè§å,ç¬¬ä¸é¨åè¯´æ\n      services:\n        - name: nginx-test\n          port: 80\n  tls:\n    secretname: nginx-test\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"Serverless",frontmatter:{title:"Serverless",date:"2022-08-24T16:38:55.000Z",permalink:"/pages/serverless/",categories:["ææ¯æè°","kubernetes"],tags:["Serverless"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"Serverless"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/19.serverless.html"},{property:"og:type",content:"article"},{property:"og:title",content:"Serverless"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/19.serverless.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T16:38:55.000Z"},{property:"article:tag",content:"Serverless"},{itemprop:"name",content:"Serverless"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/19.serverless.html",relativePath:"01.ææ¯æè°/03.kubernetes/19.serverless.md",key:"v-680c343b",path:"/pages/serverless/",headers:[{level:2,title:"å¸ååºç¨åºæ¯",slug:"å¸ååºç¨åºæ¯",normalizedTitle:"å¸ååºç¨åºæ¯",charIndex:324},{level:2,title:"é®é¢",slug:"é®é¢",normalizedTitle:"é®é¢",charIndex:463}],headersStr:"å¸ååºç¨åºæ¯ é®é¢",content:"ä»åè¯è§åº¦çè§£,serverè¯ä¸ºæå¡ï¼lessè¯ä¸ºå°ï¼Serverlesså¯ä»¥çè§£ä¸ºæ æå¡å¨è®¡ç®ã\n\nä»è¯­ä¹è§åº¦çè§£ï¼ä¹æä»¥å«æ æå¡å¨è®¡ç®ï¼æ¯å ä¸ºåä¼ ç»çPaaS(å¹³å°å³æå¡)ç¸æ¯ï¼ç¨æ·ä¸éè¦å³å¿æå¡å¨çé¨ç½²ä¸éç½®ãä½è¿å¹¶ä¸æå³çä¸éè¦æå¡å¨ï¼åªæ¯è¿äºä¸è¥¿çç±äºå¹³å°æ¥æä¾ã\n\nä»æ¶æè§åº¦çè§£ï¼Serverless=FaaS+äºä»¶é©±å¨+BaaS=æ æå¡å¨è®¡ç®(Serverless computing)\n\n> FaaS: Function as a Service,å½æ°å³æå¡ äºä»¶é©±å¨ï¼éè¿äºä»¶è§¦åçå½¢å¼å»å®æå½æ°çè°ç¨ï¼å¤çè¯·æ±åååºï¼å¦å®æ¶ä»»å¡/httpè¯·æ±...ï¼ BaaS: Backend as a Service åç«¯å³æå¡\n\n\n# å¸ååºç¨åºæ¯\n\nServerless éç¨äºäºä»¶è§¦åçåºæ¯ãå½æä¸ªäºä»¶åçæ¶ï¼æèµ·å¹¶è°ç¨ Serverless äºå½æ°ï¼æ¯å¦æä»¶ä¸ä¼ ãæ¶æ¯éåä¸­çæ¶æ¯äºä»¶ãå®æ¶å¨äºä»¶ï¼ä¹å¯ä»¥æ¯ IoT è®¾å¤çæä¸ªäºä»¶ãè¿å¯ä»¥ç¨äºä¸äºæä»¶å¤çï¼æ¯å¦å¾åå¤çãé³è§é¢å¤çåæ¥å¿åæç­åºæ¯ã\n\n\n# é®é¢",normalizedContent:"ä»åè¯è§åº¦çè§£,serverè¯ä¸ºæå¡ï¼lessè¯ä¸ºå°ï¼serverlesså¯ä»¥çè§£ä¸ºæ æå¡å¨è®¡ç®ã\n\nä»è¯­ä¹è§åº¦çè§£ï¼ä¹æä»¥å«æ æå¡å¨è®¡ç®ï¼æ¯å ä¸ºåä¼ ç»çpaas(å¹³å°å³æå¡)ç¸æ¯ï¼ç¨æ·ä¸éè¦å³å¿æå¡å¨çé¨ç½²ä¸éç½®ãä½è¿å¹¶ä¸æå³çä¸éè¦æå¡å¨ï¼åªæ¯è¿äºä¸è¥¿çç±äºå¹³å°æ¥æä¾ã\n\nä»æ¶æè§åº¦çè§£ï¼serverless=faas+äºä»¶é©±å¨+baas=æ æå¡å¨è®¡ç®(serverless computing)\n\n> faas: function as a service,å½æ°å³æå¡ äºä»¶é©±å¨ï¼éè¿äºä»¶è§¦åçå½¢å¼å»å®æå½æ°çè°ç¨ï¼å¤çè¯·æ±åååºï¼å¦å®æ¶ä»»å¡/httpè¯·æ±...ï¼ baas: backend as a service åç«¯å³æå¡\n\n\n# å¸ååºç¨åºæ¯\n\nserverless éç¨äºäºä»¶è§¦åçåºæ¯ãå½æä¸ªäºä»¶åçæ¶ï¼æèµ·å¹¶è°ç¨ serverless äºå½æ°ï¼æ¯å¦æä»¶ä¸ä¼ ãæ¶æ¯éåä¸­çæ¶æ¯äºä»¶ãå®æ¶å¨äºä»¶ï¼ä¹å¯ä»¥æ¯ iot è®¾å¤çæä¸ªäºä»¶ãè¿å¯ä»¥ç¨äºä¸äºæä»¶å¤çï¼æ¯å¦å¾åå¤çãé³è§é¢å¤çåæ¥å¿åæç­åºæ¯ã\n\n\n# é®é¢",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"k8så®¹å¨æéå¤ç",frontmatter:{title:"k8så®¹å¨æéå¤ç",date:"2022-08-24T16:38:55.000Z",permalink:"/pages/k8s20/",categories:["ææ¯æè°","kubernetes"],tags:["Serverless"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"k8så®¹å¨æéå¤ç"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/20.k8s%E5%AE%B9%E5%99%A8%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8så®¹å¨æéå¤ç"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/20.k8s%E5%AE%B9%E5%99%A8%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T16:38:55.000Z"},{property:"article:tag",content:"Serverless"},{itemprop:"name",content:"k8så®¹å¨æéå¤ç"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/20.k8s%E5%AE%B9%E5%99%A8%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86.html",relativePath:"01.ææ¯æè°/03.kubernetes/20.k8så®¹å¨æéå¤ç.md",key:"v-9b6819e6",path:"/pages/k8s20/",headers:[{level:2,title:"Kubelet ä½¿ç¨çç®å½æå¨ç£ççæ»¡",slug:"kubelet-ä½¿ç¨çç®å½æå¨ç£ççæ»¡",normalizedTitle:"kubelet ä½¿ç¨çç®å½æå¨ç£ççæ»¡",charIndex:2},{level:2,title:"æ¥çæä»¶ioæ¯å¦é«",slug:"æ¥çæä»¶ioæ¯å¦é«",normalizedTitle:"æ¥çæä»¶ioæ¯å¦é«",charIndex:880},{level:2,title:"å®¹å¨æå",slug:"å®¹å¨æå",normalizedTitle:"å®¹å¨æå",charIndex:1247}],headersStr:"Kubelet ä½¿ç¨çç®å½æå¨ç£ççæ»¡ æ¥çæä»¶ioæ¯å¦é« å®¹å¨æå",content:'# Kubelet ä½¿ç¨çç®å½æå¨ç£ççæ»¡\n\nkubelet é»è®¤ä½¿ç¨çç®å½ /var/lib/kubelet ï¼éè¿ kubelet ç --root-dir åæ°æå®ï¼ç¨äºå­å¨æä»¶ä¿¡æ¯ãPod ç¸å³çç¶æä»¥åæè½½ç volumeï¼ä¾å¦ï¼ emptyDir ã ConfigMap å Secret ï¼ã\n\nç°è±¡ï¼ æ°å»º Pod æ¶æ æ³æåè¿è¡ mkdirï¼å¯¼è´ Sandbox ä¹æ æ³åå»ºæå\n\nWarning UnexpectedAdmissionError 44m kubelet, 172.22.0.44 Update plugin resources failed d\nue to failed to write checkpoint file "kubelet_internal_checkpoint": write /var/lib/kubelet/deviceplugins/.728425055: no space left on device, which is unexpected.\n\n\n1\n2\n\n\nå¤çæ¹å¼ï¼\n\n 1. æå¨å é¤ docker çé¨å log æä»¶æå¯åå±æä»¶ãéå¸¸å é¤ log æä»¶ï¼ç¤ºä¾å¦ä¸ï¼\n\n$ cd /var/lib/docker/containers\n$ du -sh * # æ¾å°æ¯è¾å¤§çç®å½\n$ cd dda02c9a7491fa797ab730c1568ba06cba74cecd4e4a82e9d90d00fa11de743c\n$ cat /dev/null > dda02c9a7491fa797ab730c1568ba06cba74cecd4e4a82e9d90d00fa11de74\n3c-json.log.9 # å é¤logæä»¶\n\n\n1\n2\n3\n4\n5\n\n 2. æ§è¡ä»¥ä¸å½ä»¤ï¼å°è¯¥ Node æ è®°ä¸ºä¸å¯è°åº¦ï¼å¹¶å°å¶å·²æç Pod é©±éå°å¶å®èç¹ã kubectl drain\n 3. systemctl restart dockerd\n 4. kubectl uncordon\n\n\n# æ¥çæä»¶ioæ¯å¦é«\n\nææ¶èç¹å¨ä½ cpu âusâ (user) ãé« cpu âidâ (idle) çæ¡ä»¶ä¸ï¼ä»ä¼åºç°è´è½½å¾é«çæåµãéå¸¸æ¯ç±äºæä»¶ IO æ§è½è¾¾å°ç¶é¢ï¼å¯¼è´ IO Wait è¿å¤ï¼ä½¿èç¹æ´ä½è´è½½åé«ï¼å½±åå¶å®è¿ç¨çæ§è½ã æ¬æä»¥ topãatop å iotop å·¥å·ä¸ºä¾ï¼æ¥å¤æ­ç£ç I/O æ¯å¦æ­£å¨éä½åºç¨æ§è½ã\n\ntop:å¯æ¥çæ ¸ç wa å¼ï¼waï¼waitï¼è¡¨ç¤º IO WAIT ç CPU å ç¨ãé»è®¤æ¾ç¤ºæææ ¸çå¹³åå¼ï¼æ 1æ¥çæ¯ä¸ªæ ¸ç wa å¼ãå¦ wa éå¸¸ä¸º0%ï¼å¦æç»å¸¸æµ®å¨å¨1%ä¹ä¸ï¼è¯´æå­å¨è®¾å¤çéåº¦å·²ç»å¤ªæ¢ï¼æ æ³è·ä¸ CPU çå¤çé åº¦ã atop:æ¥ç busyï¼ ç»§ç»­å¨è¯¥çé¢æ dï¼å¯æ¥çåªäºè¿ç¨æ­£å¨ä½¿ç¨ç£ç IOã iotop -oPaï¼æ¥çåªäºè¿ç¨å ç¨ç£ç IO\n\n\n# å®¹å¨æå',normalizedContent:'# kubelet ä½¿ç¨çç®å½æå¨ç£ççæ»¡\n\nkubelet é»è®¤ä½¿ç¨çç®å½ /var/lib/kubelet ï¼éè¿ kubelet ç --root-dir åæ°æå®ï¼ç¨äºå­å¨æä»¶ä¿¡æ¯ãpod ç¸å³çç¶æä»¥åæè½½ç volumeï¼ä¾å¦ï¼ emptydir ã configmap å secret ï¼ã\n\nç°è±¡ï¼ æ°å»º pod æ¶æ æ³æåè¿è¡ mkdirï¼å¯¼è´ sandbox ä¹æ æ³åå»ºæå\n\nwarning unexpectedadmissionerror 44m kubelet, 172.22.0.44 update plugin resources failed d\nue to failed to write checkpoint file "kubelet_internal_checkpoint": write /var/lib/kubelet/deviceplugins/.728425055: no space left on device, which is unexpected.\n\n\n1\n2\n\n\nå¤çæ¹å¼ï¼\n\n 1. æå¨å é¤ docker çé¨å log æä»¶æå¯åå±æä»¶ãéå¸¸å é¤ log æä»¶ï¼ç¤ºä¾å¦ä¸ï¼\n\n$ cd /var/lib/docker/containers\n$ du -sh * # æ¾å°æ¯è¾å¤§çç®å½\n$ cd dda02c9a7491fa797ab730c1568ba06cba74cecd4e4a82e9d90d00fa11de743c\n$ cat /dev/null > dda02c9a7491fa797ab730c1568ba06cba74cecd4e4a82e9d90d00fa11de74\n3c-json.log.9 # å é¤logæä»¶\n\n\n1\n2\n3\n4\n5\n\n 2. æ§è¡ä»¥ä¸å½ä»¤ï¼å°è¯¥ node æ è®°ä¸ºä¸å¯è°åº¦ï¼å¹¶å°å¶å·²æç pod é©±éå°å¶å®èç¹ã kubectl drain\n 3. systemctl restart dockerd\n 4. kubectl uncordon\n\n\n# æ¥çæä»¶ioæ¯å¦é«\n\nææ¶èç¹å¨ä½ cpu âusâ (user) ãé« cpu âidâ (idle) çæ¡ä»¶ä¸ï¼ä»ä¼åºç°è´è½½å¾é«çæåµãéå¸¸æ¯ç±äºæä»¶ io æ§è½è¾¾å°ç¶é¢ï¼å¯¼è´ io wait è¿å¤ï¼ä½¿èç¹æ´ä½è´è½½åé«ï¼å½±åå¶å®è¿ç¨çæ§è½ã æ¬æä»¥ topãatop å iotop å·¥å·ä¸ºä¾ï¼æ¥å¤æ­ç£ç i/o æ¯å¦æ­£å¨éä½åºç¨æ§è½ã\n\ntop:å¯æ¥çæ ¸ç wa å¼ï¼waï¼waitï¼è¡¨ç¤º io wait ç cpu å ç¨ãé»è®¤æ¾ç¤ºæææ ¸çå¹³åå¼ï¼æ 1æ¥çæ¯ä¸ªæ ¸ç wa å¼ãå¦ wa éå¸¸ä¸º0%ï¼å¦æç»å¸¸æµ®å¨å¨1%ä¹ä¸ï¼è¯´æå­å¨è®¾å¤çéåº¦å·²ç»å¤ªæ¢ï¼æ æ³è·ä¸ cpu çå¤çé åº¦ã atop:æ¥ç busyï¼ ç»§ç»­å¨è¯¥çé¢æ dï¼å¯æ¥çåªäºè¿ç¨æ­£å¨ä½¿ç¨ç£ç ioã iotop -opaï¼æ¥çåªäºè¿ç¨å ç¨ç£ç io\n\n\n# å®¹å¨æå',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"1",frontmatter:{title:1,date:"2022-07-27T14:56:54.000Z",permalink:"/pages/k8smianshi1/",categories:["ææ¯æè°","kubernetes","k8sé¢è¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"1"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/301.k8s%E9%9D%A2%E8%AF%95/01.1.html"},{property:"og:type",content:"article"},{property:"og:title",content:"1"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/301.k8s%E9%9D%A2%E8%AF%95/01.1.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"1"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/301.k8s%E9%9D%A2%E8%AF%95/01.1.html",relativePath:"01.ææ¯æè°/03.kubernetes/301.k8sé¢è¯/01.1.md",key:"v-db387184",path:"/pages/k8smianshi1/",headers:[{level:2,title:"ç®è¦è¯´ä¸Kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½ï¼(8å¤§ç»ä»¶)",slug:"ç®è¦è¯´ä¸kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½-8å¤§ç»ä»¶",normalizedTitle:"ç®è¦è¯´ä¸kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½ï¼(8å¤§ç»ä»¶)",charIndex:2},{level:2,title:"kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶",slug:"kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶",normalizedTitle:"kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶",charIndex:804},{level:2,title:"åèï¼",slug:"åè",normalizedTitle:"åèï¼",charIndex:1425}],headersStr:"ç®è¦è¯´ä¸Kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½ï¼(8å¤§ç»ä»¶) kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶ åèï¼",content:"# ç®è¦è¯´ä¸Kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½ï¼(8å¤§ç»ä»¶)\n\netcdï¼æä¾æ°æ®åºæå¡ä¿å­äºæ´ä¸ªéç¾¤çç¶æ\n\nkube-apiserverï¼æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãAPIæ³¨åååç°ç­æºå¶\n\nkube-controller-managerï¼è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n\ncloud-controller-managerï¼æ¯ä¸åºå±äºè®¡ç®æå¡åäº¤äºçæ§å¶å¨\n\nkub-schedulerï¼è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å°Podè°åº¦å°ç¸åºçæºå¨ä¸\n\nkubeletï¼è´è´£ç»´æ¤å®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£Volumeåç½ç»çç®¡çï¼è¿è¡å¨æ¯ä¸ªè®¡ç®èç¹ä¸ï¼ä½ä¸ºagentï¼æ¥æ¶åéè¯¥èç¹çPodsä»»å¡åç®¡çå®¹å¨ï¼å¨ææ§è·åå®¹å¨ç¶æï¼åé¦ç»kube-apiserverã\n\nkube-proxyï¼è´è´£ä¸ºServiceæä¾åé¨çæå¡åç°åè´è½½åè¡¡ï¼å¹¶ç»´æ¤ç½ç»è§åãè¿è¡å¨æ¯ä¸ªè®¡ç®èç¹ä¸ï¼è´è´£Podç½ç»ä»£çãå®æ¶ä»etcdè·åå°serviceä¿¡æ¯æ¥åç¸åºçç­ç¥ã\n\ncontainer-runtimeï¼æ¯è´è´£ç®¡çè¿è¡å®¹å¨çè½¯ä»¶ï¼æ¯å¦docker\n\nkubectl:å®¢æ·ç«¯å½ä»¤è¡å·¥å·ï¼ä½ä¸ºæ´ä¸ªç³»ç»çæä½å¥å£ã\n\nkube-controller-manager:æ§è¡æ´ä¸ªç³»ç»çåå°ä»»å¡ï¼åæ¬èç¹ç¶æç¶åµãPodä¸ªæ°ãPodsåServiceçå³èç­ã\n\nkube-scheduler:è´è´£èç¹èµæºç®¡çï¼æ¥æ¶æ¥èªkube-apiserveråå»ºPodsä»»å¡ï¼å¹¶åéå°æä¸ªèç¹ã\n\nkube-dnsï¼ä¸ä¸ªå¯éçDNSæå¡ï¼ç¨äºä¸ºæ¯ä¸ªServiceå¯¹è±¡åå»ºDNSè®°å½ï¼è¿æ ·ææçPodå°±å¯ä»¥éè¿DNSè®¿é®æå¡äºã\n\nIngress Controller ä¸ºæå¡æä¾å¤ç½å¥å£\n\nHeapster æä¾èµæºçæ§\n\nDashboard æä¾ GUI\n\n\n# kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶\n\n1ï¼ livenessProbeæ¢é å¯ä»¥æ ¹æ®ç¨æ·èªå®ä¹è§åæ¥å¤å®podæ¯å¦å¥åº·ï¼å¦ælivenessProbeæ¢éæ¢æµå°å®¹å¨ä¸å¥åº·ï¼åkubeletä¼æ ¹æ®å¶éå¯ç­ç¥æ¥å³å®æ¯å¦éå¯ï¼å¦æä¸ä¸ªå®¹å¨ä¸åå«livenessProbeæ¢éï¼åkubeletä¼è®¤ä¸ºå®¹å¨çlivenessProbeæ¢éçè¿åå¼æ°¸è¿æåã\n\n2ï¼ ReadinessProbeæ¢é åæ ·æ¯å¯ä»¥æ ¹æ®ç¨æ·èªå®ä¹è§åæ¥å¤æ­podæ¯å¦å¥åº·ï¼å¦ææ¢æµå¤±è´¥ï¼æ§å¶å¨ä¼å°æ­¤podä»å¯¹åºserviceçendpointåè¡¨ä¸­ç§»é¤ï¼ä»æ­¤ä¸åå°ä»»ä½è¯·æ±è°åº¦å°æ­¤Podä¸ï¼ç´å°ä¸æ¬¡æ¢æµæåã\n\n3ï¼ startupProbeæ¢é å¯å¨æ£æ¥æºå¶ï¼åºç¨ä¸äºå¯å¨ç¼æ¢çä¸å¡ï¼é¿åä¸å¡é¿æ¶é´å¯å¨èè¢«ä¸é¢ä¸¤ç±»æ¢ékillæï¼è¿ä¸ªé®é¢ä¹å¯ä»¥æ¢å¦ä¸ç§æ¹å¼è§£å³ï¼å°±æ¯å®ä¹ä¸é¢ä¸¤ç±»æ¢éæºå¶æ¶ï¼åå§åæ¶é´å®ä¹çé¿ä¸äºå³å¯ã\n\næ¯ç§æ¢æµæ¹æ³è½æ¯æä»¥ä¸å ä¸ªç¸åçæ£æ¥åæ°ï¼ç¨äºè®¾ç½®æ§å¶æ£æ¥æ¶é´ï¼\n\ninitialDelaySecondsï¼åå§ç¬¬ä¸æ¬¡æ¢æµé´éï¼ç¨äºåºç¨å¯å¨çæ¶é´ï¼é²æ­¢åºç¨è¿æ²¡å¯å¨èå¥åº·æ£æ¥å¤±è´¥ periodSecondsï¼æ£æ¥é´éï¼å¤ä¹æ§è¡probeæ£æ¥ï¼é»è®¤ä¸º10sï¼ timeoutSecondsï¼æ£æ¥è¶æ¶æ¶é¿ï¼æ¢æµåºç¨timeoutåä¸ºå¤±è´¥ï¼ successThresholdï¼æåæ¢æµéå¼ï¼è¡¨ç¤ºæ¢æµå¤å°æ¬¡ä¸ºå¥åº·æ­£å¸¸ï¼é»è®¤æ¢æµ1æ¬¡ã\n\n\n# åèï¼\n\nhttps://zhuangxiaoyan.blog.csdn.net/article/details/120679513",normalizedContent:"# ç®è¦è¯´ä¸kubernetesæåªäºæ ¸å¿ç»ä»¶ä»¥åè¿äºç»ä»¶è´è´£ä»ä¹å·¥ä½ï¼(8å¤§ç»ä»¶)\n\netcdï¼æä¾æ°æ®åºæå¡ä¿å­äºæ´ä¸ªéç¾¤çç¶æ\n\nkube-apiserverï¼æä¾äºèµæºæä½çå¯ä¸å¥å£ï¼å¹¶æä¾è®¤è¯ãææãè®¿é®æ§å¶ãapiæ³¨åååç°ç­æºå¶\n\nkube-controller-managerï¼è´è´£ç»´æ¤éç¾¤çç¶æï¼æ¯å¦æéæ£æµãèªå¨æ©å±ãæ»å¨æ´æ°ç­\n\ncloud-controller-managerï¼æ¯ä¸åºå±äºè®¡ç®æå¡åäº¤äºçæ§å¶å¨\n\nkub-schedulerï¼è´è´£èµæºçè°åº¦ï¼æç§é¢å®çè°åº¦ç­ç¥å°podè°åº¦å°ç¸åºçæºå¨ä¸\n\nkubeletï¼è´è´£ç»´æ¤å®¹å¨ççå½å¨æï¼åæ¶ä¹è´è´£volumeåç½ç»çç®¡çï¼è¿è¡å¨æ¯ä¸ªè®¡ç®èç¹ä¸ï¼ä½ä¸ºagentï¼æ¥æ¶åéè¯¥èç¹çpodsä»»å¡åç®¡çå®¹å¨ï¼å¨ææ§è·åå®¹å¨ç¶æï¼åé¦ç»kube-apiserverã\n\nkube-proxyï¼è´è´£ä¸ºserviceæä¾åé¨çæå¡åç°åè´è½½åè¡¡ï¼å¹¶ç»´æ¤ç½ç»è§åãè¿è¡å¨æ¯ä¸ªè®¡ç®èç¹ä¸ï¼è´è´£podç½ç»ä»£çãå®æ¶ä»etcdè·åå°serviceä¿¡æ¯æ¥åç¸åºçç­ç¥ã\n\ncontainer-runtimeï¼æ¯è´è´£ç®¡çè¿è¡å®¹å¨çè½¯ä»¶ï¼æ¯å¦docker\n\nkubectl:å®¢æ·ç«¯å½ä»¤è¡å·¥å·ï¼ä½ä¸ºæ´ä¸ªç³»ç»çæä½å¥å£ã\n\nkube-controller-manager:æ§è¡æ´ä¸ªç³»ç»çåå°ä»»å¡ï¼åæ¬èç¹ç¶æç¶åµãpodä¸ªæ°ãpodsåserviceçå³èç­ã\n\nkube-scheduler:è´è´£èç¹èµæºç®¡çï¼æ¥æ¶æ¥èªkube-apiserveråå»ºpodsä»»å¡ï¼å¹¶åéå°æä¸ªèç¹ã\n\nkube-dnsï¼ä¸ä¸ªå¯éçdnsæå¡ï¼ç¨äºä¸ºæ¯ä¸ªserviceå¯¹è±¡åå»ºdnsè®°å½ï¼è¿æ ·ææçpodå°±å¯ä»¥éè¿dnsè®¿é®æå¡äºã\n\ningress controller ä¸ºæå¡æä¾å¤ç½å¥å£\n\nheapster æä¾èµæºçæ§\n\ndashboard æä¾ gui\n\n\n# kubeneteséå¯¹podèµæºå¯¹è±¡çå¥åº·çæµæºå¶\n\n1ï¼ livenessprobeæ¢é å¯ä»¥æ ¹æ®ç¨æ·èªå®ä¹è§åæ¥å¤å®podæ¯å¦å¥åº·ï¼å¦ælivenessprobeæ¢éæ¢æµå°å®¹å¨ä¸å¥åº·ï¼åkubeletä¼æ ¹æ®å¶éå¯ç­ç¥æ¥å³å®æ¯å¦éå¯ï¼å¦æä¸ä¸ªå®¹å¨ä¸åå«livenessprobeæ¢éï¼åkubeletä¼è®¤ä¸ºå®¹å¨çlivenessprobeæ¢éçè¿åå¼æ°¸è¿æåã\n\n2ï¼ readinessprobeæ¢é åæ ·æ¯å¯ä»¥æ ¹æ®ç¨æ·èªå®ä¹è§åæ¥å¤æ­podæ¯å¦å¥åº·ï¼å¦ææ¢æµå¤±è´¥ï¼æ§å¶å¨ä¼å°æ­¤podä»å¯¹åºserviceçendpointåè¡¨ä¸­ç§»é¤ï¼ä»æ­¤ä¸åå°ä»»ä½è¯·æ±è°åº¦å°æ­¤podä¸ï¼ç´å°ä¸æ¬¡æ¢æµæåã\n\n3ï¼ startupprobeæ¢é å¯å¨æ£æ¥æºå¶ï¼åºç¨ä¸äºå¯å¨ç¼æ¢çä¸å¡ï¼é¿åä¸å¡é¿æ¶é´å¯å¨èè¢«ä¸é¢ä¸¤ç±»æ¢ékillæï¼è¿ä¸ªé®é¢ä¹å¯ä»¥æ¢å¦ä¸ç§æ¹å¼è§£å³ï¼å°±æ¯å®ä¹ä¸é¢ä¸¤ç±»æ¢éæºå¶æ¶ï¼åå§åæ¶é´å®ä¹çé¿ä¸äºå³å¯ã\n\næ¯ç§æ¢æµæ¹æ³è½æ¯æä»¥ä¸å ä¸ªç¸åçæ£æ¥åæ°ï¼ç¨äºè®¾ç½®æ§å¶æ£æ¥æ¶é´ï¼\n\ninitialdelaysecondsï¼åå§ç¬¬ä¸æ¬¡æ¢æµé´éï¼ç¨äºåºç¨å¯å¨çæ¶é´ï¼é²æ­¢åºç¨è¿æ²¡å¯å¨èå¥åº·æ£æ¥å¤±è´¥ periodsecondsï¼æ£æ¥é´éï¼å¤ä¹æ§è¡probeæ£æ¥ï¼é»è®¤ä¸º10sï¼ timeoutsecondsï¼æ£æ¥è¶æ¶æ¶é¿ï¼æ¢æµåºç¨timeoutåä¸ºå¤±è´¥ï¼ successthresholdï¼æåæ¢æµéå¼ï¼è¡¨ç¤ºæ¢æµå¤å°æ¬¡ä¸ºå¥åº·æ­£å¸¸ï¼é»è®¤æ¢æµ1æ¬¡ã\n\n\n# åèï¼\n\nhttps://zhuangxiaoyan.blog.csdn.net/article/details/120679513",charsets:{cjk:!0}},{title:"kubevirtåç",frontmatter:{title:"kubevirtåç",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/kubevirtyuanli/",categories:["ææ¯æè°","kubernetes","kubevirt"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kubevirtåç"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/01.kubevirt%E5%8E%9F%E7%90%86.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kubevirtåç"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/01.kubevirt%E5%8E%9F%E7%90%86.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kubevirtåç"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/01.kubevirt%E5%8E%9F%E7%90%86.html",relativePath:"01.ææ¯æè°/03.kubernetes/302.kubevirt/01.kubevirtåç.md",key:"v-07c97ac3",path:"/pages/kubevirtyuanli/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"kubevirté¨ç½²",frontmatter:{title:"kubevirté¨ç½²",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/kubevirtdeploy/",categories:["ææ¯æè°","kubernetes","kubevirt"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kubevirté¨ç½²"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/02.kubevirt%E9%83%A8%E7%BD%B2.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kubevirté¨ç½²"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/02.kubevirt%E9%83%A8%E7%BD%B2.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kubevirté¨ç½²"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/302.kubevirt/02.kubevirt%E9%83%A8%E7%BD%B2.html",relativePath:"01.ææ¯æè°/03.kubernetes/302.kubevirt/02.kubevirté¨ç½².md",key:"v-335e284a",path:"/pages/kubevirtdeploy/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"kataåºæ¬åçä¸æ¶æ",frontmatter:{title:"kataåºæ¬åçä¸æ¶æ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata1/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã",meta:[{name:"image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{name:"twitter:title",content:"kataåºæ¬åçä¸æ¶æ"},{name:"twitter:description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataåºæ¬åçä¸æ¶æ"},{property:"og:description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{property:"og:image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataåºæ¬åçä¸æ¶æ"},{itemprop:"description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{itemprop:"image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.md",key:"v-33c779e9",path:"/pages/kata1/",headers:[{level:2,title:"The speed of containers, the security of VMs",slug:"the-speed-of-containers-the-security-of-vms",normalizedTitle:"the speed of containers, the security of vms",charIndex:498},{level:2,title:"é¡¹ç®æè·¯ï¼",slug:"é¡¹ç®æè·¯",normalizedTitle:"é¡¹ç®æè·¯ï¼",charIndex:766},{level:2,title:"å®å¨éç¦»",slug:"å®å¨éç¦»",normalizedTitle:"å®å¨éç¦»",charIndex:1046},{level:2,title:"kataéç¦»æç",slug:"kataéç¦»æç",normalizedTitle:"kataéç¦»æç",charIndex:1151},{level:2,title:"åå°èæåå¼é",slug:"åå°èæåå¼é",normalizedTitle:"åå°èæåå¼é",charIndex:1543},{level:2,title:"ææ ·æ¥ä¸å®¹å¨ççæ",slug:"ææ ·æ¥ä¸å®¹å¨ççæ",normalizedTitle:"ææ ·æ¥ä¸å®¹å¨ççæ",charIndex:1716},{level:2,title:"åä¼ ç»çrunCçåºå«",slug:"åä¼ ç»çruncçåºå«",normalizedTitle:"åä¼ ç»çruncçåºå«",charIndex:1896},{level:2,title:"ä½¿ç¨åºæ¯",slug:"ä½¿ç¨åºæ¯",normalizedTitle:"ä½¿ç¨åºæ¯",charIndex:2036},{level:2,title:"Kata Containers 2.x vs 1.x",slug:"kata-containers-2-x-vs-1-x",normalizedTitle:"kata containers 2.x vs 1.x",charIndex:2686},{level:2,title:"kata Runtime (shimv2)",slug:"kata-runtime-shimv2",normalizedTitle:"kata runtime (shimv2)",charIndex:3249},{level:2,title:"kata-agent",slug:"kata-agent",normalizedTitle:"kata-agent",charIndex:3767},{level:2,title:"èæåææ¯",slug:"èæåææ¯",normalizedTitle:"èæåææ¯",charIndex:3974},{level:3,title:"hypervisor",slug:"hypervisor",normalizedTitle:"hypervisor",charIndex:4182},{level:4,title:"qemu-system-x86_64",slug:"qemu-system-x86-64",normalizedTitle:"qemu-system-x86_64",charIndex:4502},{level:3,title:"cgroup",slug:"cgroup",normalizedTitle:"cgroup",charIndex:4555},{level:3,title:"å®¢æ·æºåæ ¸åéå",slug:"å®¢æ·æºåæ ¸åéå",normalizedTitle:"å®¢æ·æºåæ ¸åéå",charIndex:4583},{level:3,title:"ç½ç»åå­å¨",slug:"ç½ç»åå­å¨",normalizedTitle:"ç½ç»åå­å¨",charIndex:4622},{level:3,title:"CPUååå­",slug:"cpuååå­",normalizedTitle:"cpuååå­",charIndex:4653},{level:3,title:"VSOCK",slug:"vsock",normalizedTitle:"vsock",charIndex:2013},{level:3,title:"kata monitor",slug:"kata-monitor",normalizedTitle:"kata monitor",charIndex:4698},{level:2,title:"ææ¯è¦ç¹æ»ç»",slug:"ææ¯è¦ç¹æ»ç»",normalizedTitle:"ææ¯è¦ç¹æ»ç»",charIndex:4737},{level:2,title:"é¨ç½²ç»ä»¶ï¼",slug:"é¨ç½²ç»ä»¶",normalizedTitle:"é¨ç½²ç»ä»¶ï¼",charIndex:5153},{level:2,title:"å®¹å¨åå»ºæµç¨",slug:"å®¹å¨åå»ºæµç¨",normalizedTitle:"å®¹å¨åå»ºæµç¨",charIndex:5443},{level:2,title:"ç¯å¢è¦æ±ï¼",slug:"ç¯å¢è¦æ±",normalizedTitle:"ç¯å¢è¦æ±ï¼",charIndex:5823},{level:2,title:"å¯¹èµæºç®¡ççä¸äºå½±å",slug:"å¯¹èµæºç®¡ççä¸äºå½±å",normalizedTitle:"å¯¹èµæºç®¡ççä¸äºå½±å",charIndex:5908},{level:2,title:"å­å¨éå¶ï¼",slug:"å­å¨éå¶",normalizedTitle:"å­å¨éå¶ï¼",charIndex:6115},{level:2,title:"ä¸»æºèµæºå±äº«é®é¢",slug:"ä¸»æºèµæºå±äº«é®é¢",normalizedTitle:"ä¸»æºèµæºå±äº«é®é¢",charIndex:6316},{level:3,title:"Privileged containers",slug:"privileged-containers",normalizedTitle:"privileged containers",charIndex:6455},{level:2,title:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",slug:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",normalizedTitle:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",charIndex:6947},{level:2,title:"éåï¼",slug:"éå",normalizedTitle:"éåï¼",charIndex:6976},{level:2,title:"ç½ç»éå¶",slug:"ç½ç»éå¶",normalizedTitle:"ç½ç»éå¶",charIndex:7334},{level:2,title:"èµæºçº¦æç®¡ç",slug:"èµæºçº¦æç®¡ç",normalizedTitle:"èµæºçº¦æç®¡ç",charIndex:7688},{level:2,title:"åå­ç¸å³é®é¢ï¼",slug:"åå­ç¸å³é®é¢",normalizedTitle:"åå­ç¸å³é®é¢ï¼",charIndex:7820},{level:2,title:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",slug:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",normalizedTitle:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",charIndex:7891},{level:2,title:"Sandboxä¸Container",slug:"sandboxä¸container",normalizedTitle:"sandboxä¸container",charIndex:8296},{level:2,title:"k8sådockeråéæ¬é³çæäº(v1.23ä¹å)",slug:"k8sådockeråéæ¬é³çæäº-v1-23ä¹å",normalizedTitle:"k8sådockeråéæ¬é³çæäº(v1.23ä¹å)",charIndex:8471},{level:2,title:"docker vs containerd",slug:"docker-vs-containerd",normalizedTitle:"docker vs containerd",charIndex:8948},{level:2,title:"Kata Containers ä¸ gVisor",slug:"kata-containers-ä¸-gvisor",normalizedTitle:"kata containers ä¸ gvisor",charIndex:9332},{level:2,title:"runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢",slug:"runcå®¹å¨çå®å¨æ§-éç¦»-é®é¢",normalizedTitle:"runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢",charIndex:9839},{level:2,title:"çæ³çå¤ç§æ·ç¶æ",slug:"çæ³çå¤ç§æ·ç¶æ",normalizedTitle:"çæ³çå¤ç§æ·ç¶æ",charIndex:10085},{level:2,title:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",slug:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",normalizedTitle:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",charIndex:10328},{level:2,title:"kata vs container",slug:"kata-vs-container",normalizedTitle:"kata vs container",charIndex:10503},{level:2,title:"kata vs VMï¼openstackï¼",slug:"kata-vs-vm-openstack",normalizedTitle:"kata vs vmï¼openstackï¼",charIndex:10527},{level:2,title:"kata vs kubevirt",slug:"kata-vs-kubevirt",normalizedTitle:"kata vs kubevirt",charIndex:10555}],headersStr:"The speed of containers, the security of VMs é¡¹ç®æè·¯ï¼ å®å¨éç¦» kataéç¦»æç åå°èæåå¼é ææ ·æ¥ä¸å®¹å¨ççæ åä¼ ç»çrunCçåºå« ä½¿ç¨åºæ¯ Kata Containers 2.x vs 1.x kata Runtime (shimv2) kata-agent èæåææ¯ hypervisor qemu-system-x86_64 cgroup å®¢æ·æºåæ ¸åéå ç½ç»åå­å¨ CPUååå­ VSOCK kata monitor ææ¯è¦ç¹æ»ç» é¨ç½²ç»ä»¶ï¼ å®¹å¨åå»ºæµç¨ ç¯å¢è¦æ±ï¼ å¯¹èµæºç®¡ççä¸äºå½±å å­å¨éå¶ï¼ ä¸»æºèµæºå±äº«é®é¢ Privileged containers dockeråæ¢æcontainerdçä½¿ç¨å½±å éåï¼ ç½ç»éå¶ èµæºçº¦æç®¡ç åå­ç¸å³é®é¢ï¼ runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é Sandboxä¸Container k8sådockeråéæ¬é³çæäº(v1.23ä¹å) docker vs containerd Kata Containers ä¸ gVisor runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢ çæ³çå¤ç§æ·ç¶æ k8sçåçå¤ç§æ·è§£å³æ¹æ¡ kata vs container kata vs VMï¼openstackï¼ kata vs kubevirt",content:'# å®å¨å®¹å¨-Kata containers\n\nå®å¨å®¹å¨4ç±»æ¹æ¡ï¼\n\n * ä¼ ç»OSå®¹å¨éåå®å¨æºå¶ï¼runc + SELinux, AppArmor, â¦ + rootless modeï¼\n * ç¨æ·æåæ ¸çå®¹å¨ï¼GoogleçgVisorï¼\n * Library OSï¼UniKernelãNabla Containersï¼\n * è½»éèæåçå®¹å¨ï¼Kata ContainersãFirecrackerï¼ã\n\nKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã\n\nKataContainersç¤¾åºäº2018å¹´5æåå¸äºç¬¬ä¸ç1.0ãç±äºKataå®¹å¨è¿è¡æ¶å¼å®¹OCIï¼å®å¯ä»¥æ ç¼å°æå¥Dockerå¼æåä»»ä½å¶ä»å®¹å¨ç®¡çå¹³å°ï¼å¦KubernetesåOpen-Stackï¼åªéç®åå°å°RUNCæ¿æ¢ä¸ºKata-runtimeã\n\nKata Containers çæ¬è´¨å°±æ¯ä¸ä¸ªç²¾ç®åçè½»éçº§èææºã\n\n\n# The speed of containers, the security of VMs\n\nå®å¨ä½ç°å¨:\n\nå¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ãI/O ååå­çéç¦»ï¼å¹¶ä¸å¯ä»¥å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»åèæå VT æ©å±ã\n\nå®¹å¨ä½ç°å¨ï¼\n\nå¼å®¹æ§ä¸ï¼æ¯æOCIä»¥åCRIæ¥å£ï¼åå®¹å¨ä¸æ ·æä½ã æ§è½ä¸ï¼å¯å¨éåº¦è¾¾å°ç¾æ¯«ç§çº§ï¼æ¥è¿å®¹å¨ã å¼éä¸ï¼åå­å¼éå°ï¼ç±»ä¼¼å®¹å¨ã ä¸KubernetesåDockeræ ç¼è¡æ¥ï¼å¹¶ä¸æ¯runcçæ¿ä»£å å¼æºåºç¡è®¾æ½åºéä¼ä¸çå¼æºæ²»çé¡¹ç® å¤æ¶ææ¯æï¼x86ãARMãIBM PowerãIBM s/390x\n\n\n# é¡¹ç®æè·¯ï¼\n\n 1. æä½ç³»ç»æ¬èº«çå®¹å¨æºå¶æ²¡åæ³è§£å³å®å¨æ§é®é¢ï¼éè¦ä¸ä¸ªéç¦»å±ï¼\n 2. èææºæ¯ä¸ä¸ªç°æçéç¦»å±ï¼AWSè¿æ ·çäºæå¡å·²ç»è®©å¨ä¸çç¸ä¿¡ï¼å¯¹æ·æ¥è¯´ï¼"secure of VM" æ¯å¯ä»¥æ»¡è¶³éæ±çï¼\n 3. èæºéé¢åªè¦æä¸ªåæ ¸ï¼å°±å¯ä»¥æ¯æ OCI è§èçè¯­ä¹ï¼å¨åæ ¸ä¸è·ä¸ª Linux åºç¨è¿å¹¶ä¸å¤ªé¾å®ç°ï¼\n 4. èæºå¯è½ä¸å¤å¿«ï¼é»ç¢äºå®å¨å®¹å¨ç¯å¢çåºç¨ï¼é£ä¹å¯ä¸å¯ä»¥æ¥æ "speed of container" å¢ï¼ ç°å¨ï¼å¦ææåä¸ä¸ªé®é¢å¯ä»¥è§£å³ï¼é£ä¹å®å°±æ¯æä»¬è¦çâå®å¨çå®¹å¨âäºââè¿å°±æ¯ Kata Containersã\n\n\n# å®å¨éç¦»\n\nå®å¨æ§é®é¢90%ä»¥ä¸å¯ä»¥å½ç»ä¸ºéç¦»æ§é®é¢\n\n * Dockerå®å¨éç¦»é®é¢\n\n * å¨Kata Containersä¸­ï¼æ¯ä¸ªå®¹å¨é½æèªå·±çè½»éçº§èææºåå°åæ ¸ï¼éè¿ç¡¬ä»¶èæåæä¾å®¹å¨éç¦»ã\n\n\n# kataéç¦»æç\n\nkata å®éä¸æ¯éè¿åå»ºè½»éçº§èææºå®ç°å®¹å¨ä¹é´çèµæºéç¦»ï¼åå¨èææºä¸­è¿è¡å®¹å¨è¿è¡æ¶ï¼è¿æ ·å°±ä½¿å®¹å¨å¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ï¼I / Oååå­çéç¦»ï¼å¹¶å¯ä»¥éè¿èæåVTæ©å±å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»ã\n\nä¼ ç»çæä½ç³»ç»å®¹å¨ææ¯æ¯åæ ¸è¿ç¨ç®¡ççä¸ä¸ªå»¶ä¼¸ï¼å®¹å¨è¿ç¨æ¬èº«æ¯ä¸ç»å³èçè¿ç¨ï¼å¯¹äºå®¿ä¸»æºçè°åº¦å¨æ¥è¯´æ¯å®å¨å¯è§çï¼ä¸ä¸ª Pod éçææå®¹å¨æè¿ç¨ï¼åæ¶ä¹é½è¢«å®¿ä¸»æºè°åº¦åç®¡çãè¿å°±æå³çï¼å¨æå¤§éå®¹å¨çç¯å¢ä¸ï¼å®¿ä¸»æºåæ ¸çè´æå¾éãèéçº³å®å¨å®¹å¨ä¹åï¼ä»å®¿ä¸»æºä¸æ¯çä¸å°è¿äºå®æ´çä¿¡æ¯çï¼éç¦»å±åæ¶ä¹éä½äºå®¿ä¸»æºçè°åº¦å¼éï¼åå°äºç»´æ¤è´æï¼é¿åäºå®¹å¨ä¹é´ãå®¹å¨åå®¿ä¸»æºä¹é´çæå¡è´¨éå¹²æ°ã\n\nå®å¨å®¹å¨ä½ä¸ºä¸éå±éï¼å¯ä»¥è®©å®¿ä¸»æºçè¿ç»´ç®¡çæä½ä¸è½ç´æ¥è®¿é®å°åºç¨çæ°æ®ï¼è¿æ ·ï¼æç¨æ·çåºç¨æ°æ®ç´æ¥ä¿æ¤å¨æ²ç®±éå°±å¯ä»¥éä½å¯¹ç¨æ·çææè¦æ±ï¼ä¿éç¨æ·çæ°æ®ç§å¯æ§ã\n\n\n# åå°èæåå¼é\n\n * éè¿âå°ç¨ä¸å¿è¦çåå­âåâå±äº«è½å±äº«çåå­âæ¥éä½åå­çå¼éï¼æ´å°çåå­ä¸ä»å¼éæ´å°ï¼å¯å¨ä¹æ´è½»å¿«\n\n * æå³é®çæ§è½ä¼åæ¥èªIntel Clear Containersã\n\n * æå³é®çä¼åå¶å®å°±æ¯VMçå¯å¨æ¶é´è¿è¡è£åªï¼ä¼åã\n\n * ä½¿ç¨ç¹å®çLinuxåæ ¸ï¼ä½¿ç¨ç®åçinitrdä»¥årootfsã\n\n\n# ææ ·æ¥ä¸å®¹å¨ççæ\n\nkata-containerså®æ¬è´¨ä¸å°±ä¸ä¸ªå®¹å¨çruntimeãåªè¦å®ç°äºOCIçæ¥å£å°±å¯ä»¥æ¥ä¸é£äºå®¹å¨ç®¡çå·¥å·ï¼åªè¦å®ç°äºCRIæ¥å£ï¼å°±å¯ä»¥æ¥ä¸k8sã\n\næä»¥kata-containersä¸OCIè¿è¡æ¶è§èå¼å®¹ï¼å¯ä»¥éè¿CRI-OåContainerdå®ç°ä¸ Kubernetes CRIè¿è¡æ ç¼åä½ãï¼Shim APIï¼\n\n\n# åä¼ ç»çrunCçåºå«\n\næå¤§çåºå«å°±å¨äºcontaineræ¯æ¾å¨èææºéé¢è¿è¡çï¼ä¸­é´å¤äºä¸å±kernelåï¼å¤é¢çå®¹å¨ç®¡çè½¯ä»¶å°±æ æ³ç®¡çï¼çæ§éé¢çè¿ç¨ãå®¹å¨ï¼ä¹æ æ³åéé¢éä¿¡ã è§£å³æ¹æ¡å°±æ¯å¨VMéé¢æ¾äºä¸ä¸ªagentï¼åå¤éè¿VSOCKéä¿¡ï¼è¿æ ·å­åå¤å°±æéäºã\n\n\n# ä½¿ç¨åºæ¯\n\n * ä¸»è¦ä½¿ç¨åºæ¯æ¯å¨å¬æäºæ¨¡å¼\n\n * è£¸éå±åºç¡è®¾æ½\n\n * æ··åå·¥ä½è´è½½çäº§ç¯å¢\n\n * çç®¡åææççäº§ç¯å¢\n\n * å¤ç§æ·å®¹å¨éç¾¤\n\n * å·æåæ ¸ç¸å³åè½çéççä¾èµåæ ¸çå·¥ä½è´è½½\n\n\n# æ¶æï¼Kata2.0ï¼\n\narchitecture\n\n\n\n\n\næ´ä¸ªkataçæç³»ç»åä¸º 3 é¨åï¼\n\n * å®¹å¨è°åº¦ç³»ç»ï¼å¦ K8sï¼\n * ä¸å± runtimeï¼è¿ä¸å±ä¸»è¦æ¯å®ç°äº CRI æ¥å£ï¼ç¶åä½¿ç¨ä¸å± runtime å¯¹å®¹å¨è¿è¡ç®¡çãä¸å± runtime å¸åä»£è¡¨æ containerd å CRI-Oã\n * ä¸å± runtimeï¼è¿ä¸å±æä¼ç´æ¥è´è´£å®¹å¨çç®¡çï¼å¸åä»£è¡¨ä¸º runc å Kata Containersã\n\nå¯¹ Kata Containers æ¥è¯´ï¼Kata Containers ä¼æ¥æ¶æ¥èªä¸å± runtime çè¯·æ±ï¼å®ç°å®¹å¨çåå»ºãå é¤ç­ç®¡çå·¥ä½ã\n\nåæ¶ï¼ä¸å¾ä¸­ä¹æ 3 ä¸ªéä¿¡åè®®å­å¨ï¼\n\n * CRIï¼ å®¹å¨è¿è¡æ¶æ¥å£ï¼è¿æ¯ k8sï¼å®éä¸æ¯ kubeletï¼å ä¸å± runtime ä¹é´çéä¿¡æ¥å£\n * shim v2ï¼ä¸å± runtime ï¼å¦ containerd ï¼å ä¸å± runtimeï¼å¦ Kata Containers ï¼ ä¹é´çéä¿¡æ¥å£\n * agent åè®®ï¼è¿æ¯ Kata Containers åé¨çåè®®ï¼ç¨äº Kata Containers ç shim è¿ç¨å guest åç agent ä¹é´çéä¿¡ã\n\n\n# Kata Containers 2.x vs 1.x\n\n2.x å¨å¼åä¸ä¸»è¦æä»¥ä¸å ä¸ªéå¤§çåæ´ç¹ï¼\n\n * agent ä½¿ç¨ Rust éå\n\n * åªæ¯æ shimv2ï¼å æ­¤å°äº proxy å shim ç»ä»¶, shimv2 æä¾äº Containerd Runtime V2 (Shim API) ç Kata å®ç°ï¼ä»èä½¿å¾ Kubernetes åºæ¯ä¸è½å¤å®ç°æ¯ä¸ª Pod ä¸ä¸ª shim è¿ç¨ â shimv2ã\n\n * å¨ Kata Containers 2.x ä¸­ï¼æ ¸å¿ç»ä»¶åªå©ä¸ä¸¤ä¸ªï¼runtime åagent ï¼ä¸é½å¨ kata-containers è¿ä¸ª repo ä¸ã\n\nå¨kata1.xï¼ kata-containerå¯ä»¥å½ådockerçä¸ä¸ªæä»¶ï¼å¯å¨kata-containerå¯ä»¥éè¿dockerå½ä»¤ï¼ä½æ¯kata2.xä¹åï¼kataå»æäºdockerçcliï¼ä¸è½éè¿dockerå¯å¨kata runtimeå®¹å¨ã\n\nå¨ Kata 1.x ä¸­ï¼é¢åç¨æ·çä¸»è¦ç»ä»¶æ¯è¿è¡æ¶ï¼kata-runtimeï¼ãå¯¹äº Kata 2.0ï¼ä¸»è¦ç»ä»¶æ¯ Kata containerd shim v2ã å¯¹â Kata è¿è¡æ¶âçä»»ä½æåååºæä»£ Kata containerd shim v2ã\n\n\n# kata Runtime (shimv2)\n\nruntime ä¸ºè¿è¡å¨å®¿ä¸»æºä¸çãæ¯æ shim v2 åè®®çè¿ç¨ãå¨è¿ç³»åæç« ä¸­ï¼å¤æ°æåµä¸å¯ä»¥å° runtime ãshimv2 è§ä¸ºåä¸åå®¹ã\n\næ´ä¸ª Runtime ï¼å¶å¯æ§è¡ç¨åºä¸º containerd-shim-kata-v2ï¼ä¹å³ shim è¿ç¨ï¼è¿ä¹æ¯ Kata Containers çå¥å£ç¹ãRuntime å¯¹ä¸æ¥å containerd çè¯·æ±ï¼éè¿ shimv2 âåè®®âï¼ï¼å¯¹ guest æ¥è¯´ï¼éè¿ guest åç agent æ¥æ§å¶ guest åå®¹å¨çåå»ºãå é¤ç­ç®¡çã\n\nRuntime å agent ä¹é´çéç¨äº ttrpc åè®®éä¿¡ï¼è¿æ¯ä¸ä¸ªä½¿ç¨äº protocol buffer ç¼è§£ç æ¹å¼çç±»ä¼¼ gRPC çéä¿¡æ¹å¼ãè¯¥åè®®ç± containerd åå»ºï¼ç¨äº containered ååºå± runtime ä¹é´çéä¿¡ãå¨ Kata Containers ä¸­ï¼ runtime å agent ä¹éè¿ ttrpc éä¿¡ã\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\n\n# kata-agent\n\nagent å¯ä»¥ä½ä¸º guest init è¿ç¨å¯å¨ï¼ä¹å¯ä»¥ä½¿ç¨ systemd ç­ä½ä¸º init ï¼agent ä½ä¸ºæ®éè¿ç¨å¯å¨ã http://liubin.org/kata-dev-book/src/agent-arch.html\n\nhttps://github.com/kata-containers/kata-containers/tree/main/src/agent\n\n\n# èæåææ¯\n\nkata sanbox/vmçæ¥å£ å¨èææºä¸­ï¼æä»¬éè¦æä¾ä»¥ä¸virtioè®¾å¤ï¼(qemu)\n\n * å­å¨(virtio-fs)\n * ç½ç»(tap): åºäºæ§è½èèï¼qemué»è®¤ä¸ºvhost-netä½ä¸ºvirtio-net åç«¯ï¼é»è®¤éç½®è¿å¨è¯ä¼°ä¸­ã\n * æ§å¶ï¼virtio-vsockï¼\n * è®¾å¤é©±å¨ï¼vfioï¼:è®¾å¤ç´é\n * å¨æèµæºç®¡ç(acpi): CPUãåå­åè®¾å¤ç­ææ\n\n\n# hypervisor\n\nKata Containers æ¯æå¤ä¸ªypervisor\n\n * QEMU æ¯ä¸ä¸ªæçèå¤æçç®¡çç¨åºã\n\n * Firecracker æ¯AWS ä¸ºæ æå¡å¨åºæ¯å¼åçè½»éçº§hypervisorãå®åªæ¯ææéçèæè®¾å¤ã\n\n * Cloud-Hypervisor æ¯è±ç¹å°éå¯¹äºåçåºæ¯è®¾è®¡çå¦ä¸æ¬¾è½»éçº§hypervisorã\n\n * ACRN æ¯éå¯¹è¾¹ç¼åºæ¯å¼åçhypervisorã\n\n[root@localhost ~]#  kata-runtime kata-env | awk -v RS= \'/\\[Hypervisor\\]/\' | grep Path\n  Path = "/opt/kata/bin/qemu-system-x86_64"\n\n\n1\n2\n\n\n# qemu-system-x86_64\n\n\n# cgroup\n\n[[kata cgroup]]\n\n\n# å®¢æ·æºåæ ¸åéå\n\n[[guest kernelåguestos]]\n\n\n# ç½ç»åå­å¨\n\n[[kataç½ç»åå­å¨æä»¶ç³»ç»åæ]]\n\n\n# CPUååå­\n\n[[kata CPUååå­]]\n\n\n# VSOCK\n\nVsock\n\n\n# kata monitor\n\n[[kata-monitorçæ§ææ ]]\n\n\n# ææ¯è¦ç¹æ»ç»\n\n * VMä½ä¸ºå®å¨æ²ç®±\n\n * æ¯æå¤ç§èæåæ¹æ¡ï¼qemuãfirecrackerãcloud-hypervisorç­\n\n * vmä¸­agentè´è´£ç´æ¥åå»ºãæ´æ°ãéæ¯å®¹å¨\n\n * ä½¿ç¨vsockä½ä¸ºshim v2è¿ç¨ä¸agentçéä¿¡ä¿¡é\n\n * ä½¿ç¨tcè§å/macvtapè¿æ¥vethåtapï¼æ¥æéCNIåVMç½ç»\n\n * éè¿virtio-9pãvirtio-fså°hostä¸éåæè½½å°vmä¸­\n\n * éè¿åè®¾å¤éä¼ ï¼å°hostä¸åè®¾å¤ä½ä¸ºå®¹å¨rootfs\n\nä¸»è¦è§£å³çé®é¢ï¼ç°æå®¹å¨ç½ç»æ¨¡åä¸ç°æèææºç½ç»æ¨¡åä¸å¹éçé®é¢ï¼å°CNIç½ç»åèæºç½ç»å¯¹æ¥wethåtapè¿éæ¹æ¡ï¼\n\n 1. tcfilterï¼ä½¿ç¨tc ruleså°vethçingressåegresséååå«å¯¹æ¥tapçegressåingresséåå®ç°vethåtapçç´è¿\n\n 2. macvtapï¼ç°æèæç½å¡è¿éææ¯\n\n\n# é¨ç½²ç»ä»¶ï¼\n\né¨ç½²å¨ä¸»æºä¸çï¼\n\n * cloud-hypervisor, firecracker,Â qemu, åæ¯æçäºè¿å¶æä»¶\n\n * containerd-shim-kata-v2\n\n * kata-collect-data.sh\n\n * kata-runtime\n\néå:\n\n * kata-containers.imgåkata-containers-initrd.imgï¼ä» Kata GitHub åå¸é¡µé¢ä¸­æå\n\n * vmlinuz.containeråvmlinuz-virtiofs.containerï¼ä» Kata GitHub åå¸é¡µé¢ä¸­æå\n\n\n# å®¹å¨åå»ºæµç¨\n\n * ç¨æ·åå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨ï¼containerdï¼åå»ºkata runtime\n\n * kata-runtimeå è½½éç½®æä»¶ï¼è°ç¨shimv2 API\n\n * kata-runtimeè¿è¡hypervisor\n\n * hypervisoråå»ºåå¼å¯èææºVMï¼åå»ºå®¹å¨æ ¹ç¯å¢rootfsï¼\n\n * proxyä½ä¸º VM å¼å¯¼çä¸é¨åå¯å¨\n\n * è¿è¡æ¶è°ç¨proxyçCreateSandboxAPI è¯·æ±proxyåå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨å°å®¹å¨çæ§å¶æè¿åç»è¿è¡ctrå½ä»¤çç¨æ·\n\n[[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]]\n\n\n# éå¶ä¸çº¦æ:\n\nåèèµæï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md\n\n\n# ç¯å¢è¦æ±ï¼\n\n * Kata Containers éè¦åµå¥èæåæè£¸æº\n\n * ä¸æ¯æk8sä½¿ç¨dockerè¿è¡æ¶ï¼éè¦åæ¢æcontainerdæcri-o\n\n\n# å¯¹èµæºç®¡ççä¸äºå½±å\n\n * æ æ³è¿è¡containerçº§å«çæ§å¶ é¦åèææºæ¬èº«å°±æ¯hostä¸çä¸ä¸ªè¿ç¨ï¼ä»ç¶åhostä¸çcgroupæ§å¶ãæä»¥ä»ç¶å¯ä»¥çæ§æ´ä¸ªpodçèµæºä½¿ç¨æ°æ®ï¼å¹¶æ§å¶podçèµæºä½¿ç¨ã ä½æ¯æä»¬æ æ³æ¿å°containerçº§å«çæ°æ®ï¼ä¹æ æ³ç´æ¥éè¿hostçcgroupæ¥æ§å¶podéé¢containerçèµæºä½¿ç¨ã\n\n * èæåææ¯çä¸äºå½±å\n\n * èæåçoverhead\n\n\n# å­å¨éå¶ï¼\n\nKata ä¸æ¯æ k8s subPath (emptydir?)\n\nhttps://github.com/kata-containers/runtime/issues/2812\n\nhttps://github.com/kata-containers/kata-containers/issues/1728\n\nå®æµconfigmapæ²¡æé®é¢ï¼å¯è½åªå¯¹äºemptydirä½¿ç¨æé®é¢?\n\n\n# ä¸»æºèµæºå±äº«é®é¢\n\nRUNCå¯ä»¥å¯å¨ä¸ä¸ªå®¹å¨ä»¥ç¹ææ¨¡å¼è®¿é®ä¸»æºè®¾å¤ï¼èKata-runtimeä¹æ¯ææ­¤éé¡¹ï¼ä½å¨è¿ç§æåµä¸ï¼è·å¾å¯¹å®¢æ·VMè®¾å¤çå®å¨è®¿é®ãå°½ç®¡è¿ä¸ªéé¡¹è¢«è§ä¸ºä¸ç§éå¶ï¼ä½ä»å®å¨æ§çè§åº¦æ¥çï¼å®ç¡®å®æ¯ä¸ç§ä¼å¿ï¼å ä¸ºå¨å®¹å¨çæ ¹åçº§çæåµä¸ï¼ä¸ä¼æ¯å®³ä¸»æºåæ ¸ã\n\n\n# Privileged containers\n\nhttps://github.com/kata-containers/documentation/blob/master/Limitations.md#docker-run---privileged\n\nhttps://github.com/kata-containers/runtime/issues/1568\n\nhttps://github.com/kata-containers/documentation/blob/master/how-to/privileged.md\n\nrunc Kata ä¸­çç¹ææ¯æä¸å®¹å¨ææ¬è´¨çä¸åãå®¹å¨å¨æ¥å®¾ä¸­ä»¥æåçåè½è¿è¡ï¼å¹¶è¢«æäºè®¿é®ç¨æ·è®¾å¤èä¸æ¯ä¸»æºè®¾å¤çæéãsecurityContext privileged=trueä¸ Kubernetesä¸èµ·ä½¿ç¨ä¹æ¯å¦æ­¤ã\n\nå¨ runc ä¸­ï¼â--privilegedâä¼å°ä¸»æº dev çåè½è½¬æ¢ä¸ºå®¹å¨ã\n\nå¨ Kata ä¸­ï¼â--privilegedâæå³ç Kata VM ä¸­çå®¹å¨å¯ä»¥è®¿é® Kata guest VM ä¸­çææè®¾å¤ã\n\n\n# dockeråæ¢æcontainerdçä½¿ç¨å½±å\n\n\n# éåï¼\n\n * éåä¸å¤ç¨ï¼\n\ncontainerdéç¨èªå·±çæ¹å¼ç®¡çå®¹å¨éåï¼ä¸è½å¬ç¨dockerå·²æéåï¼å¹¶ä¸containerdéåä½¿ç¨äºå½åç©ºé´è¿è¡äºéç¦»ï¼crié»è®¤å½åç©ºé´æ¯k8s.ioï¼containerdé»è®¤å­å¨å½åç©ºé´æ¯defaultã\n\n * éåæå»º\n\nåæ¢å° containerd ä¹åï¼éè¦æ³¨æ docker.sock ä¸åå¯ç¨ï¼ä¹å°±æå³çä¸è½åå¨å®¹å¨éé¢æ§è¡ docker å½ä»¤æ¥æå»ºéåäºï¼docker build æå»ºéåçåºç¨éè¦åæ¢å°æ é Dockerd å°±å¯ä»¥æå»ºéåçå·¥å·ï¼å¦ docker buildxãbuildahãkaniko\n\n * æ¥å¿éç½®\n\ndocker å containerd é¤äºå¨å¸¸ç¨å½ä»¤ä¸æäºåºå«å¤ï¼å¨å®¹å¨æ¥å¿åç¸å³åæ°éç½®æ¹é¢ä¹å­å¨ä¸äºå·®å¼ã\n\n\n# ç½ç»éå¶\n\n * kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶ååºç¨æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n * Kata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\nDocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãKata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° Kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° VMãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# èµæºçº¦æç®¡ç\n\nRUNCåªä½¿ç¨æ§å¶ç»(cgroups)æ¥éå¶ãä¼ååãæ§å¶åè®¡ç®èµæºï¼èå¯¹äºkat-runtimeï¼ç±äºåå®å¨å±ï¼ä¸ºäºå¾å°ç¸åçç»æï¼å¯è½æå¿è¦å°çº¦æåºç¨å°å¤ä¸ªçº§å«ãå æ­¤ï¼èµæºçº¦æç®¡çå¨RUNCä¸­æ¯ç²ç²åº¦çï¼èå¨kataè¿è¡æ¶æ¯ç»ç²åº¦çã\n\n\n# åå­ç¸å³é®é¢ï¼\n\nèææºä¹åºç¨äºä¸äºåå­ç®¡çææ¯ï¼KSMï¼balloonï¼è¿äºå¯è½ä¹ä¼å¯¹åå­ç®¡çæä¸äºå½±åã\n\n\n# ä¸äºç¥è¯æ©å±ï¼\n\n\n# runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é\n\nrunCæ¯ä¸ä¸ªæ ¹æ®OCIæ ååå»ºå¹¶è¿è¡å®¹å¨çå½ä»¤è¡å·¥å·ï¼CLI toolï¼(low-level runtime)ã\n\nDockerå°±æ¯åºäºrunCåå»ºçï¼ç®åå°è¯´ï¼runCå°±æ¯dockerä¸­æä¸ºæ ¸å¿çé¨å\n\ncontainerdæ¯å®¹å¨ææ¯æ ååä¹åçäº§ç©ï¼ä¸ºäºè½å¤å¼å®¹OCIæ åï¼å°å®¹å¨è¿è¡æ¶åå¶ç®¡çåè½ä»Docker Daemonå¥ç¦»ãçè®ºä¸ï¼å³ä½¿ä¸è¿è¡dockerdï¼ä¹è½å¤ç´æ¥éè¿containerdæ¥ç®¡çå®¹å¨ãï¼å½ç¶ï¼containerdæ¬èº«ä¹åªæ¯ä¸ä¸ªå®æ¤è¿ç¨ï¼å®¹å¨çå®éè¿è¡æ¶ç±åé¢ä»ç»çrunCæ§å¶ãï¼\n\nKubelet æ¯ä¸ä¸ªCRIå®¢æ·ç«¯ï¼å¹¶ææCRIå®ç°æ¥å¤çæ¥å£çæå¡ç«¯ãCRI-OåContainerdæ¯ä¾èµOCIå¼å®¹è¿è¡æ¶æ¥ç®¡çå®¹å¨å®ä¾çCRIå®ç°ï¼high level runtimeï¼ã\n\n\n# Sandboxä¸Container\n\nSandboxæ¯ä¸ä¸ªç»ä¸ãåºæ¬çéç¦»ç©ºé´ï¼ä¸ä¸ªèææºä¸­åªæä¸ä¸ªSandboxï¼ä½æ¯è¯¥Sandboxåå¯ä»¥æå¤ä¸ªå®¹å¨ï¼è¿å°±å¯¹åºäºKubernetes Podçæ¨¡åï¼å¯¹äºDockeræ¥è¯´ï¼ä¸è¬ä¸ä¸ªSandboxååªè¿è¡ä¸ä¸ªContainerãæ è®ºæ¯åªç§æåµï¼SandboxçIDä¸åé¨ç¬¬ä¸ä¸ªå®¹å¨çIDç¸åã\n\n\n# k8sådockeråéæ¬é³çæäº(v1.23ä¹å)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.20.md#dockershim-deprecation\n\nhttps://kubernetes.io/zh/blog/2020/12/02/dont-panic-kubernetes-and-docker/\n\ndockeræ¯ä¸ä¸ªå®æ´çææ¯å æ ï¼æ¯ä¸ä¸ªç¨æ·åå¥½çæ½è±¡å±ï¼ä½æ¯ï¼å¯¹äºk8sæ¥è¯´ï¼å¹¶ä¸æ¯è®¾è®¡ç¨æ¥åµå¥å° Kubernetesçï¼éCRIå®¹å¨è¿è¡æ¶æ¥å£ï¼ï¼å®éä¸k8séè¦çæ¯containerdï¼dockerä¸­çä¸ä¸ªé«çº§è¿è¡æ¶åè½ï¼ï¼ç±äºDocker ä¸å¼å®¹ CRIï¼Kubernetes éç¾¤ä¸å¾ä¸å¼å¥ä¸ä¸ªå«å Dockershim çå·¥å·æ¥è®¿é®å®çæ­£éè¦ç containerdãï¼å¢å è¿ç»´ææ¬ï¼å®¹æåºéï¼ã\n\näºæ¯k8så³å®ä¸åæ¯æDockershimï¼ç¨æ·åºè¯¥å°å®¹å¨è¿è¡æ¶ä» Docker åæ¢å°å¶ä»åæ¯æçå®¹å¨è¿è¡æ¶ã\n\n\n# docker vs containerd\n\ndockerç± docker-client ,dockerd,containerd,docker-shim,runcç»æï¼æä»¥containerdæ¯dockerçåºç¡ç»ä»¶ä¹ä¸\n\nä»k8sçè§åº¦çï¼å¯ä»¥éæ© containerd æ docker ä½ä¸ºè¿è¡æ¶ç»ä»¶ï¼Containerd è°ç¨é¾æ´ç­ï¼ç»ä»¶æ´å°ï¼æ´ç¨³å®ï¼å ç¨èç¹èµæºæ´å°\n\nè°ç¨é¾\n\nDocker ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e docker shim ï¼å¨ kubelet è¿ç¨ä¸­ï¼ --\x3e dockerd --\x3e containerd\n\nContainerd ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e cri pluginï¼å¨ containerd è¿ç¨ä¸­ï¼ --\x3e containerd\n\n\n# Kata Containers ä¸ gVisor\n\nå¨2018å¹´ï¼Google å¬å¸ååå¸äºä¸ä¸ªåå« gVisor çé¡¹ç®ãgVisor é¡¹ç®ç»å®¹å¨è¿ç¨éç½®ä¸ä¸ªç¨ Go è¯­è¨å®ç°çãè¿è¡å¨ç¨æ·æçãæå°çâç¬ç«åæ ¸âãè¿ä¸ªåæ ¸å¯¹å®¹å¨è¿ç¨æ´é² Linux åæ ¸ ABIï¼æ®æ¼çâGuest Kernelâçè§è²ï¼ä»èè¾¾å°äºå°å®¹å¨åå®¿ä¸»æºéç¦»å¼çç®çã\n\nkataågvisorçæ¬è´¨ï¼é½æ¯ç»è¿ç¨åéäºä¸ä¸ªç¬ç«çæä½ç³»ç»åæ ¸ï¼ä»èé¿åäºè®©å®¹å¨å±äº«å®¿ä¸»æºçåæ ¸ãè¿æ ·ï¼å®¹å¨è¿ç¨è½å¤çå°çæ»å»é¢ï¼å°±ä»æ´ä¸ªå®¿ä¸»æºåæ ¸åæäºä¸ä¸ªæå°çãç¬ç«çãä»¥å®¹å¨ä¸ºåä½çåæ ¸ï¼ä»èææè§£å³äºå®¹å¨è¿ç¨åçâéé¸âæèå¤ºåæ´ä¸ªå®¿ä¸»æºçæ§å¶æçé®é¢ã\n\nèå®ä»¬çåºå«å¨äºï¼Kata Containers ä½¿ç¨çæ¯ä¼ ç»çèæåææ¯ï¼éè¿èæç¡¬ä»¶æ¨¡æåºäºä¸å°âå°èææºâï¼ç¶åå¨è¿ä¸ªå°èææºéå®è£äºä¸ä¸ªè£åªåç Linux åæ ¸æ¥å®ç°å¼ºéç¦»ã\n\nè gVisor çåæ³åæ´å æ¿è¿ï¼Google çå·¥ç¨å¸ç´æ¥ç¨ Go è¯­è¨âæ¨¡æâåºäºä¸ä¸ªè¿è¡å¨ç¨æ·æçæä½ç³»ç»åæ ¸ï¼ç¶åéè¿è¿ä¸ªæ¨¡æçåæ ¸æ¥ä»£æ¿å®¹å¨è¿ç¨åå®¿ä¸»æºåèµ·æéçãå¯æ§çç³»ç»è°ç¨ã\n\n\n# runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢\n\nDockerçå®å¨é®é¢æ¬è´¨ä¸å°±æ¯å®¹å¨ææ¯çå®å¨æ§é®é¢ï¼åºäºè½¯ä»¶éç¦»ï¼è¿åæ¬å±ç¨åæ ¸é®é¢ä»¥åNamespaceè¿ä¸å¤å®åçéå¶ï¼\n\n 1. /procã/sysç­æªå®å¨éç¦»\n 2. Top, free, iostatç­å½ä»¤å±ç¤ºçä¿¡æ¯æªéç¦»\n 3. Rootç¨æ·æªéç¦»\n 4. /devè®¾å¤æªéç¦»\n 5. åæ ¸æ¨¡åæªéç¦»\n 6. SELinuxãtimeãsyslogç­ææç°æNamespaceä¹å¤çä¿¡æ¯é½æªéç¦» éåæ¬èº«ä¸å®å¨ä¹ä¼å¯¼è´å®å¨æ§é®é¢ã\n\n\n# çæ³çå¤ç§æ·ç¶æ\n\nçæ³æ¥è¯´ï¼å¹³å°çåä¸ªç§æ·ï¼tenantï¼ä¹é´åºè¯¥æ æ³æåå°å½¼æ­¤çå­å¨ï¼è¡¨ç°å¾å°±åæ¯ä¸ªç§æ·ç¬å æ´ä¸ªå¹³å°ä¸æ ·ãå·ä½æ¥è¯´å°±æ¯ï¼æä¸è½çå°å¶å®ç§æ·çèµæºï¼æçèµæºè·æ»¡äºï¼ä¹ä¸è½å½±åå¶å®ç§æ·çèµæºä½¿ç¨ãææ æ³ä»ç½ç»æåæ ¸ä¸å¶å®ç§æ·ã\n\nKubernetesÂ å½ç¶åä¸å°ï¼å¶ä¸­æå¤§çä¸¤ä¸ªåå æ¯ï¼\n\n * kube-apiserverÂ æ¯æ´ä¸ªéç¾¤ä¸­çåä¾ï¼å¹¶ä¸æ²¡æå¤ç§æ·æ¦å¿µï¼\n\n * é»è®¤ç oci-runtime æ¯ runcï¼è runc å¯å¨çå®¹å¨æ¯å±äº«åæ ¸çã\n\n\n# k8sçåçå¤ç§æ·è§£å³æ¹æ¡\n\n * å½åç©ºé´éç¦»â\n * RBACæéç®¡çâ\n * èµæºéé¢ResourceQuotaâ\n * Pod Security Policy\n * podè°åº¦ï¼ç»å®èç¹ãæ±¡ç¹å®¹å¿â\n * ç½ç»ç­ç¥éå¶â\n * æå¡ç½æ ¼ï¼Istioâ\n * StorageClasså­å¨èµæºéç¦»ï¼æè§æä¹ä¸å¤§ï¼\n * å¤éç¾¤éç¦»ç®¡ç\n\n\n# kata vs container\n\n\n\n\n# kata vs VMï¼openstackï¼\n\n\n\n\n# kata vs kubevirt\n\n * (kata)ï¼å¨èææºåä½¿ç¨å®¹å¨ï¼å¯ä»¥åå»ºä¸ä¸ªåå«å¤ä¸ªå®¹å¨çåºç¨ï¼å¹¶ä¸é½å¨èææºåè¿è¡ï¼å¯ä»¥åæ¶å¨å¤ä¸ªèææºä¸åå»º/éæ¯å®¹å¨ï¼èèææºåå¯å¨ä½¿ç¨ç°æèææºåºç¡è®¾æ½å¨ç©çæå¡å¨ä¹é´è¿ç§»ã\n * (kubevirt)ï¼å¨å®¹å¨åä½¿ç¨èææºï¼å©ç¨èµæºç®¡çææ¯ï¼å©ç¨æå»ºåé¨ç½²å·¥å·\n * Kubevirtæ¯åç¨Kubernetesçæ©å±æ§æ¥ç®¡çVMï¼éè¿CRDç®¡çèææºï¼ï¼ä½ ç¨å°çæ¯ä¸ä¸ªçæ­£çVMï¼\n * KubeVirtæ¨å¨æä¾å°½å¯è½å¤çèææºåè½\n * Kata-containeræ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æçVMçå®å¨æ§åéç¦»æ§ï¼ä»¥å®¹å¨çæ¹å¼è¿è¡ï¼æçå®¹å¨çéåº¦åç¹ç¹ï¼ä½ä¸æ¯ä¸ä¸ªçæ­£çVMï¼Kataå®¹å¨åè¯å¾ä¸ºèææºæä¾ç±»ä¼¼å®¹å¨çä½éª\n * Virtletæ¯æVMå½æä¸ä¸ªCRIæ¥è·äºï¼æ¯æPod APIæ¥å®ä¹ä¸ä¸ªVMï¼æä»¥VMçå¾å¤åè½æ¯å¦ç­è¿ç§»ç­ï¼Virtletæ¯æ²¡æ³æ»¡è¶³VMçå¨é¨ç¹æ§çï¼ç®æ¯ä¸ä¸ª70%åè½çVM\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers',normalizedContent:'# å®å¨å®¹å¨-kata containers\n\nå®å¨å®¹å¨4ç±»æ¹æ¡ï¼\n\n * ä¼ ç»oså®¹å¨éåå®å¨æºå¶ï¼runc + selinux, apparmor, â¦ + rootless modeï¼\n * ç¨æ·æåæ ¸çå®¹å¨ï¼googleçgvisorï¼\n * library osï¼unikernelãnabla containersï¼\n * è½»éèæåçå®¹å¨ï¼kata containersãfirecrackerï¼ã\n\nkata containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âintelclear containersâåâhyper runvâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çvmï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã\n\nkatacontainersç¤¾åºäº2018å¹´5æåå¸äºç¬¬ä¸ç1.0ãç±äºkataå®¹å¨è¿è¡æ¶å¼å®¹ociï¼å®å¯ä»¥æ ç¼å°æå¥dockerå¼æåä»»ä½å¶ä»å®¹å¨ç®¡çå¹³å°ï¼å¦kubernetesåopen-stackï¼åªéç®åå°å°runcæ¿æ¢ä¸ºkata-runtimeã\n\nkata containers çæ¬è´¨å°±æ¯ä¸ä¸ªç²¾ç®åçè½»éçº§èææºã\n\n\n# the speed of containers, the security of vms\n\nå®å¨ä½ç°å¨:\n\nå¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ãi/o ååå­çéç¦»ï¼å¹¶ä¸å¯ä»¥å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»åèæå vt æ©å±ã\n\nå®¹å¨ä½ç°å¨ï¼\n\nå¼å®¹æ§ä¸ï¼æ¯æociä»¥åcriæ¥å£ï¼åå®¹å¨ä¸æ ·æä½ã æ§è½ä¸ï¼å¯å¨éåº¦è¾¾å°ç¾æ¯«ç§çº§ï¼æ¥è¿å®¹å¨ã å¼éä¸ï¼åå­å¼éå°ï¼ç±»ä¼¼å®¹å¨ã ä¸kubernetesådockeræ ç¼è¡æ¥ï¼å¹¶ä¸æ¯runcçæ¿ä»£å å¼æºåºç¡è®¾æ½åºéä¼ä¸çå¼æºæ²»çé¡¹ç® å¤æ¶ææ¯æï¼x86ãarmãibm powerãibm s/390x\n\n\n# é¡¹ç®æè·¯ï¼\n\n 1. æä½ç³»ç»æ¬èº«çå®¹å¨æºå¶æ²¡åæ³è§£å³å®å¨æ§é®é¢ï¼éè¦ä¸ä¸ªéç¦»å±ï¼\n 2. èææºæ¯ä¸ä¸ªç°æçéç¦»å±ï¼awsè¿æ ·çäºæå¡å·²ç»è®©å¨ä¸çç¸ä¿¡ï¼å¯¹æ·æ¥è¯´ï¼"secure of vm" æ¯å¯ä»¥æ»¡è¶³éæ±çï¼\n 3. èæºéé¢åªè¦æä¸ªåæ ¸ï¼å°±å¯ä»¥æ¯æ oci è§èçè¯­ä¹ï¼å¨åæ ¸ä¸è·ä¸ª linux åºç¨è¿å¹¶ä¸å¤ªé¾å®ç°ï¼\n 4. èæºå¯è½ä¸å¤å¿«ï¼é»ç¢äºå®å¨å®¹å¨ç¯å¢çåºç¨ï¼é£ä¹å¯ä¸å¯ä»¥æ¥æ "speed of container" å¢ï¼ ç°å¨ï¼å¦ææåä¸ä¸ªé®é¢å¯ä»¥è§£å³ï¼é£ä¹å®å°±æ¯æä»¬è¦çâå®å¨çå®¹å¨âäºââè¿å°±æ¯ kata containersã\n\n\n# å®å¨éç¦»\n\nå®å¨æ§é®é¢90%ä»¥ä¸å¯ä»¥å½ç»ä¸ºéç¦»æ§é®é¢\n\n * dockerå®å¨éç¦»é®é¢\n\n * å¨kata containersä¸­ï¼æ¯ä¸ªå®¹å¨é½æèªå·±çè½»éçº§èææºåå°åæ ¸ï¼éè¿ç¡¬ä»¶èæåæä¾å®¹å¨éç¦»ã\n\n\n# kataéç¦»æç\n\nkata å®éä¸æ¯éè¿åå»ºè½»éçº§èææºå®ç°å®¹å¨ä¹é´çèµæºéç¦»ï¼åå¨èææºä¸­è¿è¡å®¹å¨è¿è¡æ¶ï¼è¿æ ·å°±ä½¿å®¹å¨å¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ï¼i / oååå­çéç¦»ï¼å¹¶å¯ä»¥éè¿èæåvtæ©å±å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»ã\n\nä¼ ç»çæä½ç³»ç»å®¹å¨ææ¯æ¯åæ ¸è¿ç¨ç®¡ççä¸ä¸ªå»¶ä¼¸ï¼å®¹å¨è¿ç¨æ¬èº«æ¯ä¸ç»å³èçè¿ç¨ï¼å¯¹äºå®¿ä¸»æºçè°åº¦å¨æ¥è¯´æ¯å®å¨å¯è§çï¼ä¸ä¸ª pod éçææå®¹å¨æè¿ç¨ï¼åæ¶ä¹é½è¢«å®¿ä¸»æºè°åº¦åç®¡çãè¿å°±æå³çï¼å¨æå¤§éå®¹å¨çç¯å¢ä¸ï¼å®¿ä¸»æºåæ ¸çè´æå¾éãèéçº³å®å¨å®¹å¨ä¹åï¼ä»å®¿ä¸»æºä¸æ¯çä¸å°è¿äºå®æ´çä¿¡æ¯çï¼éç¦»å±åæ¶ä¹éä½äºå®¿ä¸»æºçè°åº¦å¼éï¼åå°äºç»´æ¤è´æï¼é¿åäºå®¹å¨ä¹é´ãå®¹å¨åå®¿ä¸»æºä¹é´çæå¡è´¨éå¹²æ°ã\n\nå®å¨å®¹å¨ä½ä¸ºä¸éå±éï¼å¯ä»¥è®©å®¿ä¸»æºçè¿ç»´ç®¡çæä½ä¸è½ç´æ¥è®¿é®å°åºç¨çæ°æ®ï¼è¿æ ·ï¼æç¨æ·çåºç¨æ°æ®ç´æ¥ä¿æ¤å¨æ²ç®±éå°±å¯ä»¥éä½å¯¹ç¨æ·çææè¦æ±ï¼ä¿éç¨æ·çæ°æ®ç§å¯æ§ã\n\n\n# åå°èæåå¼é\n\n * éè¿âå°ç¨ä¸å¿è¦çåå­âåâå±äº«è½å±äº«çåå­âæ¥éä½åå­çå¼éï¼æ´å°çåå­ä¸ä»å¼éæ´å°ï¼å¯å¨ä¹æ´è½»å¿«\n\n * æå³é®çæ§è½ä¼åæ¥èªintel clear containersã\n\n * æå³é®çä¼åå¶å®å°±æ¯vmçå¯å¨æ¶é´è¿è¡è£åªï¼ä¼åã\n\n * ä½¿ç¨ç¹å®çlinuxåæ ¸ï¼ä½¿ç¨ç®åçinitrdä»¥årootfsã\n\n\n# ææ ·æ¥ä¸å®¹å¨ççæ\n\nkata-containerså®æ¬è´¨ä¸å°±ä¸ä¸ªå®¹å¨çruntimeãåªè¦å®ç°äºociçæ¥å£å°±å¯ä»¥æ¥ä¸é£äºå®¹å¨ç®¡çå·¥å·ï¼åªè¦å®ç°äºcriæ¥å£ï¼å°±å¯ä»¥æ¥ä¸k8sã\n\næä»¥kata-containersä¸ociè¿è¡æ¶è§èå¼å®¹ï¼å¯ä»¥éè¿cri-oåcontainerdå®ç°ä¸ kubernetes criè¿è¡æ ç¼åä½ãï¼shim apiï¼\n\n\n# åä¼ ç»çruncçåºå«\n\næå¤§çåºå«å°±å¨äºcontaineræ¯æ¾å¨èææºéé¢è¿è¡çï¼ä¸­é´å¤äºä¸å±kernelåï¼å¤é¢çå®¹å¨ç®¡çè½¯ä»¶å°±æ æ³ç®¡çï¼çæ§éé¢çè¿ç¨ãå®¹å¨ï¼ä¹æ æ³åéé¢éä¿¡ã è§£å³æ¹æ¡å°±æ¯å¨vméé¢æ¾äºä¸ä¸ªagentï¼åå¤éè¿vsockéä¿¡ï¼è¿æ ·å­åå¤å°±æéäºã\n\n\n# ä½¿ç¨åºæ¯\n\n * ä¸»è¦ä½¿ç¨åºæ¯æ¯å¨å¬æäºæ¨¡å¼\n\n * è£¸éå±åºç¡è®¾æ½\n\n * æ··åå·¥ä½è´è½½çäº§ç¯å¢\n\n * çç®¡åææççäº§ç¯å¢\n\n * å¤ç§æ·å®¹å¨éç¾¤\n\n * å·æåæ ¸ç¸å³åè½çéççä¾èµåæ ¸çå·¥ä½è´è½½\n\n\n# æ¶æï¼kata2.0ï¼\n\narchitecture\n\n\n\n\n\næ´ä¸ªkataçæç³»ç»åä¸º 3 é¨åï¼\n\n * å®¹å¨è°åº¦ç³»ç»ï¼å¦ k8sï¼\n * ä¸å± runtimeï¼è¿ä¸å±ä¸»è¦æ¯å®ç°äº cri æ¥å£ï¼ç¶åä½¿ç¨ä¸å± runtime å¯¹å®¹å¨è¿è¡ç®¡çãä¸å± runtime å¸åä»£è¡¨æ containerd å cri-oã\n * ä¸å± runtimeï¼è¿ä¸å±æä¼ç´æ¥è´è´£å®¹å¨çç®¡çï¼å¸åä»£è¡¨ä¸º runc å kata containersã\n\nå¯¹ kata containers æ¥è¯´ï¼kata containers ä¼æ¥æ¶æ¥èªä¸å± runtime çè¯·æ±ï¼å®ç°å®¹å¨çåå»ºãå é¤ç­ç®¡çå·¥ä½ã\n\nåæ¶ï¼ä¸å¾ä¸­ä¹æ 3 ä¸ªéä¿¡åè®®å­å¨ï¼\n\n * criï¼ å®¹å¨è¿è¡æ¶æ¥å£ï¼è¿æ¯ k8sï¼å®éä¸æ¯ kubeletï¼å ä¸å± runtime ä¹é´çéä¿¡æ¥å£\n * shim v2ï¼ä¸å± runtime ï¼å¦ containerd ï¼å ä¸å± runtimeï¼å¦ kata containers ï¼ ä¹é´çéä¿¡æ¥å£\n * agent åè®®ï¼è¿æ¯ kata containers åé¨çåè®®ï¼ç¨äº kata containers ç shim è¿ç¨å guest åç agent ä¹é´çéä¿¡ã\n\n\n# kata containers 2.x vs 1.x\n\n2.x å¨å¼åä¸ä¸»è¦æä»¥ä¸å ä¸ªéå¤§çåæ´ç¹ï¼\n\n * agent ä½¿ç¨ rust éå\n\n * åªæ¯æ shimv2ï¼å æ­¤å°äº proxy å shim ç»ä»¶, shimv2 æä¾äº containerd runtime v2 (shim api) ç kata å®ç°ï¼ä»èä½¿å¾ kubernetes åºæ¯ä¸è½å¤å®ç°æ¯ä¸ª pod ä¸ä¸ª shim è¿ç¨ â shimv2ã\n\n * å¨ kata containers 2.x ä¸­ï¼æ ¸å¿ç»ä»¶åªå©ä¸ä¸¤ä¸ªï¼runtime åagent ï¼ä¸é½å¨ kata-containers è¿ä¸ª repo ä¸ã\n\nå¨kata1.xï¼ kata-containerå¯ä»¥å½ådockerçä¸ä¸ªæä»¶ï¼å¯å¨kata-containerå¯ä»¥éè¿dockerå½ä»¤ï¼ä½æ¯kata2.xä¹åï¼kataå»æäºdockerçcliï¼ä¸è½éè¿dockerå¯å¨kata runtimeå®¹å¨ã\n\nå¨ kata 1.x ä¸­ï¼é¢åç¨æ·çä¸»è¦ç»ä»¶æ¯è¿è¡æ¶ï¼kata-runtimeï¼ãå¯¹äº kata 2.0ï¼ä¸»è¦ç»ä»¶æ¯ kata containerd shim v2ã å¯¹â kata è¿è¡æ¶âçä»»ä½æåååºæä»£ kata containerd shim v2ã\n\n\n# kata runtime (shimv2)\n\nruntime ä¸ºè¿è¡å¨å®¿ä¸»æºä¸çãæ¯æ shim v2 åè®®çè¿ç¨ãå¨è¿ç³»åæç« ä¸­ï¼å¤æ°æåµä¸å¯ä»¥å° runtime ãshimv2 è§ä¸ºåä¸åå®¹ã\n\næ´ä¸ª runtime ï¼å¶å¯æ§è¡ç¨åºä¸º containerd-shim-kata-v2ï¼ä¹å³ shim è¿ç¨ï¼è¿ä¹æ¯ kata containers çå¥å£ç¹ãruntime å¯¹ä¸æ¥å containerd çè¯·æ±ï¼éè¿ shimv2 âåè®®âï¼ï¼å¯¹ guest æ¥è¯´ï¼éè¿ guest åç agent æ¥æ§å¶ guest åå®¹å¨çåå»ºãå é¤ç­ç®¡çã\n\nruntime å agent ä¹é´çéç¨äº ttrpc åè®®éä¿¡ï¼è¿æ¯ä¸ä¸ªä½¿ç¨äº protocol buffer ç¼è§£ç æ¹å¼çç±»ä¼¼ grpc çéä¿¡æ¹å¼ãè¯¥åè®®ç± containerd åå»ºï¼ç¨äº containered ååºå± runtime ä¹é´çéä¿¡ãå¨ kata containers ä¸­ï¼ runtime å agent ä¹éè¿ ttrpc éä¿¡ã\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\n\n# kata-agent\n\nagent å¯ä»¥ä½ä¸º guest init è¿ç¨å¯å¨ï¼ä¹å¯ä»¥ä½¿ç¨ systemd ç­ä½ä¸º init ï¼agent ä½ä¸ºæ®éè¿ç¨å¯å¨ã http://liubin.org/kata-dev-book/src/agent-arch.html\n\nhttps://github.com/kata-containers/kata-containers/tree/main/src/agent\n\n\n# èæåææ¯\n\nkata sanbox/vmçæ¥å£ å¨èææºä¸­ï¼æä»¬éè¦æä¾ä»¥ä¸virtioè®¾å¤ï¼(qemu)\n\n * å­å¨(virtio-fs)\n * ç½ç»(tap): åºäºæ§è½èèï¼qemué»è®¤ä¸ºvhost-netä½ä¸ºvirtio-net åç«¯ï¼é»è®¤éç½®è¿å¨è¯ä¼°ä¸­ã\n * æ§å¶ï¼virtio-vsockï¼\n * è®¾å¤é©±å¨ï¼vfioï¼:è®¾å¤ç´é\n * å¨æèµæºç®¡ç(acpi): cpuãåå­åè®¾å¤ç­ææ\n\n\n# hypervisor\n\nkata containers æ¯æå¤ä¸ªypervisor\n\n * qemu æ¯ä¸ä¸ªæçèå¤æçç®¡çç¨åºã\n\n * firecracker æ¯aws ä¸ºæ æå¡å¨åºæ¯å¼åçè½»éçº§hypervisorãå®åªæ¯ææéçèæè®¾å¤ã\n\n * cloud-hypervisor æ¯è±ç¹å°éå¯¹äºåçåºæ¯è®¾è®¡çå¦ä¸æ¬¾è½»éçº§hypervisorã\n\n * acrn æ¯éå¯¹è¾¹ç¼åºæ¯å¼åçhypervisorã\n\n[root@localhost ~]#  kata-runtime kata-env | awk -v rs= \'/\\[hypervisor\\]/\' | grep path\n  path = "/opt/kata/bin/qemu-system-x86_64"\n\n\n1\n2\n\n\n# qemu-system-x86_64\n\n\n# cgroup\n\n[[kata cgroup]]\n\n\n# å®¢æ·æºåæ ¸åéå\n\n[[guest kernelåguestos]]\n\n\n# ç½ç»åå­å¨\n\n[[kataç½ç»åå­å¨æä»¶ç³»ç»åæ]]\n\n\n# cpuååå­\n\n[[kata cpuååå­]]\n\n\n# vsock\n\nvsock\n\n\n# kata monitor\n\n[[kata-monitorçæ§ææ ]]\n\n\n# ææ¯è¦ç¹æ»ç»\n\n * vmä½ä¸ºå®å¨æ²ç®±\n\n * æ¯æå¤ç§èæåæ¹æ¡ï¼qemuãfirecrackerãcloud-hypervisorç­\n\n * vmä¸­agentè´è´£ç´æ¥åå»ºãæ´æ°ãéæ¯å®¹å¨\n\n * ä½¿ç¨vsockä½ä¸ºshim v2è¿ç¨ä¸agentçéä¿¡ä¿¡é\n\n * ä½¿ç¨tcè§å/macvtapè¿æ¥vethåtapï¼æ¥æécniåvmç½ç»\n\n * éè¿virtio-9pãvirtio-fså°hostä¸éåæè½½å°vmä¸­\n\n * éè¿åè®¾å¤éä¼ ï¼å°hostä¸åè®¾å¤ä½ä¸ºå®¹å¨rootfs\n\nä¸»è¦è§£å³çé®é¢ï¼ç°æå®¹å¨ç½ç»æ¨¡åä¸ç°æèææºç½ç»æ¨¡åä¸å¹éçé®é¢ï¼å°cniç½ç»åèæºç½ç»å¯¹æ¥wethåtapè¿éæ¹æ¡ï¼\n\n 1. tcfilterï¼ä½¿ç¨tc ruleså°vethçingressåegresséååå«å¯¹æ¥tapçegressåingresséåå®ç°vethåtapçç´è¿\n\n 2. macvtapï¼ç°æèæç½å¡è¿éææ¯\n\n\n# é¨ç½²ç»ä»¶ï¼\n\né¨ç½²å¨ä¸»æºä¸çï¼\n\n * cloud-hypervisor, firecracker,Â qemu, åæ¯æçäºè¿å¶æä»¶\n\n * containerd-shim-kata-v2\n\n * kata-collect-data.sh\n\n * kata-runtime\n\néå:\n\n * kata-containers.imgåkata-containers-initrd.imgï¼ä» kata github åå¸é¡µé¢ä¸­æå\n\n * vmlinuz.containeråvmlinuz-virtiofs.containerï¼ä» kata github åå¸é¡µé¢ä¸­æå\n\n\n# å®¹å¨åå»ºæµç¨\n\n * ç¨æ·åå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨ï¼containerdï¼åå»ºkata runtime\n\n * kata-runtimeå è½½éç½®æä»¶ï¼è°ç¨shimv2 api\n\n * kata-runtimeè¿è¡hypervisor\n\n * hypervisoråå»ºåå¼å¯èææºvmï¼åå»ºå®¹å¨æ ¹ç¯å¢rootfsï¼\n\n * proxyä½ä¸º vm å¼å¯¼çä¸é¨åå¯å¨\n\n * è¿è¡æ¶è°ç¨proxyçcreatesandboxapi è¯·æ±proxyåå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨å°å®¹å¨çæ§å¶æè¿åç»è¿è¡ctrå½ä»¤çç¨æ·\n\n[[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]]\n\n\n# éå¶ä¸çº¦æ:\n\nåèèµæï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md\n\n\n# ç¯å¢è¦æ±ï¼\n\n * kata containers éè¦åµå¥èæåæè£¸æº\n\n * ä¸æ¯æk8sä½¿ç¨dockerè¿è¡æ¶ï¼éè¦åæ¢æcontainerdæcri-o\n\n\n# å¯¹èµæºç®¡ççä¸äºå½±å\n\n * æ æ³è¿è¡containerçº§å«çæ§å¶ é¦åèææºæ¬èº«å°±æ¯hostä¸çä¸ä¸ªè¿ç¨ï¼ä»ç¶åhostä¸çcgroupæ§å¶ãæä»¥ä»ç¶å¯ä»¥çæ§æ´ä¸ªpodçèµæºä½¿ç¨æ°æ®ï¼å¹¶æ§å¶podçèµæºä½¿ç¨ã ä½æ¯æä»¬æ æ³æ¿å°containerçº§å«çæ°æ®ï¼ä¹æ æ³ç´æ¥éè¿hostçcgroupæ¥æ§å¶podéé¢containerçèµæºä½¿ç¨ã\n\n * èæåææ¯çä¸äºå½±å\n\n * èæåçoverhead\n\n\n# å­å¨éå¶ï¼\n\nkata ä¸æ¯æ k8s subpath (emptydir?)\n\nhttps://github.com/kata-containers/runtime/issues/2812\n\nhttps://github.com/kata-containers/kata-containers/issues/1728\n\nå®æµconfigmapæ²¡æé®é¢ï¼å¯è½åªå¯¹äºemptydirä½¿ç¨æé®é¢?\n\n\n# ä¸»æºèµæºå±äº«é®é¢\n\nruncå¯ä»¥å¯å¨ä¸ä¸ªå®¹å¨ä»¥ç¹ææ¨¡å¼è®¿é®ä¸»æºè®¾å¤ï¼èkata-runtimeä¹æ¯ææ­¤éé¡¹ï¼ä½å¨è¿ç§æåµä¸ï¼è·å¾å¯¹å®¢æ·vmè®¾å¤çå®å¨è®¿é®ãå°½ç®¡è¿ä¸ªéé¡¹è¢«è§ä¸ºä¸ç§éå¶ï¼ä½ä»å®å¨æ§çè§åº¦æ¥çï¼å®ç¡®å®æ¯ä¸ç§ä¼å¿ï¼å ä¸ºå¨å®¹å¨çæ ¹åçº§çæåµä¸ï¼ä¸ä¼æ¯å®³ä¸»æºåæ ¸ã\n\n\n# privileged containers\n\nhttps://github.com/kata-containers/documentation/blob/master/limitations.md#docker-run---privileged\n\nhttps://github.com/kata-containers/runtime/issues/1568\n\nhttps://github.com/kata-containers/documentation/blob/master/how-to/privileged.md\n\nrunc kata ä¸­çç¹ææ¯æä¸å®¹å¨ææ¬è´¨çä¸åãå®¹å¨å¨æ¥å®¾ä¸­ä»¥æåçåè½è¿è¡ï¼å¹¶è¢«æäºè®¿é®ç¨æ·è®¾å¤èä¸æ¯ä¸»æºè®¾å¤çæéãsecuritycontext privileged=trueä¸ kubernetesä¸èµ·ä½¿ç¨ä¹æ¯å¦æ­¤ã\n\nå¨ runc ä¸­ï¼â--privilegedâä¼å°ä¸»æº dev çåè½è½¬æ¢ä¸ºå®¹å¨ã\n\nå¨ kata ä¸­ï¼â--privilegedâæå³ç kata vm ä¸­çå®¹å¨å¯ä»¥è®¿é® kata guest vm ä¸­çææè®¾å¤ã\n\n\n# dockeråæ¢æcontainerdçä½¿ç¨å½±å\n\n\n# éåï¼\n\n * éåä¸å¤ç¨ï¼\n\ncontainerdéç¨èªå·±çæ¹å¼ç®¡çå®¹å¨éåï¼ä¸è½å¬ç¨dockerå·²æéåï¼å¹¶ä¸containerdéåä½¿ç¨äºå½åç©ºé´è¿è¡äºéç¦»ï¼crié»è®¤å½åç©ºé´æ¯k8s.ioï¼containerdé»è®¤å­å¨å½åç©ºé´æ¯defaultã\n\n * éåæå»º\n\nåæ¢å° containerd ä¹åï¼éè¦æ³¨æ docker.sock ä¸åå¯ç¨ï¼ä¹å°±æå³çä¸è½åå¨å®¹å¨éé¢æ§è¡ docker å½ä»¤æ¥æå»ºéåäºï¼docker build æå»ºéåçåºç¨éè¦åæ¢å°æ é dockerd å°±å¯ä»¥æå»ºéåçå·¥å·ï¼å¦ docker buildxãbuildahãkaniko\n\n * æ¥å¿éç½®\n\ndocker å containerd é¤äºå¨å¸¸ç¨å½ä»¤ä¸æäºåºå«å¤ï¼å¨å®¹å¨æ¥å¿åç¸å³åæ°éç½®æ¹é¢ä¹å­å¨ä¸äºå·®å¼ã\n\n\n# ç½ç»éå¶\n\n * kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶ååºç¨æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n * kata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\ndocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãkata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° vmãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# èµæºçº¦æç®¡ç\n\nruncåªä½¿ç¨æ§å¶ç»(cgroups)æ¥éå¶ãä¼ååãæ§å¶åè®¡ç®èµæºï¼èå¯¹äºkat-runtimeï¼ç±äºåå®å¨å±ï¼ä¸ºäºå¾å°ç¸åçç»æï¼å¯è½æå¿è¦å°çº¦æåºç¨å°å¤ä¸ªçº§å«ãå æ­¤ï¼èµæºçº¦æç®¡çå¨runcä¸­æ¯ç²ç²åº¦çï¼èå¨kataè¿è¡æ¶æ¯ç»ç²åº¦çã\n\n\n# åå­ç¸å³é®é¢ï¼\n\nèææºä¹åºç¨äºä¸äºåå­ç®¡çææ¯ï¼ksmï¼balloonï¼è¿äºå¯è½ä¹ä¼å¯¹åå­ç®¡çæä¸äºå½±åã\n\n\n# ä¸äºç¥è¯æ©å±ï¼\n\n\n# runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é\n\nruncæ¯ä¸ä¸ªæ ¹æ®ociæ ååå»ºå¹¶è¿è¡å®¹å¨çå½ä»¤è¡å·¥å·ï¼cli toolï¼(low-level runtime)ã\n\ndockerå°±æ¯åºäºruncåå»ºçï¼ç®åå°è¯´ï¼runcå°±æ¯dockerä¸­æä¸ºæ ¸å¿çé¨å\n\ncontainerdæ¯å®¹å¨ææ¯æ ååä¹åçäº§ç©ï¼ä¸ºäºè½å¤å¼å®¹ociæ åï¼å°å®¹å¨è¿è¡æ¶åå¶ç®¡çåè½ä»docker daemonå¥ç¦»ãçè®ºä¸ï¼å³ä½¿ä¸è¿è¡dockerdï¼ä¹è½å¤ç´æ¥éè¿containerdæ¥ç®¡çå®¹å¨ãï¼å½ç¶ï¼containerdæ¬èº«ä¹åªæ¯ä¸ä¸ªå®æ¤è¿ç¨ï¼å®¹å¨çå®éè¿è¡æ¶ç±åé¢ä»ç»çruncæ§å¶ãï¼\n\nkubelet æ¯ä¸ä¸ªcriå®¢æ·ç«¯ï¼å¹¶ææcriå®ç°æ¥å¤çæ¥å£çæå¡ç«¯ãcri-oåcontainerdæ¯ä¾èµociå¼å®¹è¿è¡æ¶æ¥ç®¡çå®¹å¨å®ä¾çcriå®ç°ï¼high level runtimeï¼ã\n\n\n# sandboxä¸container\n\nsandboxæ¯ä¸ä¸ªç»ä¸ãåºæ¬çéç¦»ç©ºé´ï¼ä¸ä¸ªèææºä¸­åªæä¸ä¸ªsandboxï¼ä½æ¯è¯¥sandboxåå¯ä»¥æå¤ä¸ªå®¹å¨ï¼è¿å°±å¯¹åºäºkubernetes podçæ¨¡åï¼å¯¹äºdockeræ¥è¯´ï¼ä¸è¬ä¸ä¸ªsandboxååªè¿è¡ä¸ä¸ªcontainerãæ è®ºæ¯åªç§æåµï¼sandboxçidä¸åé¨ç¬¬ä¸ä¸ªå®¹å¨çidç¸åã\n\n\n# k8sådockeråéæ¬é³çæäº(v1.23ä¹å)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/changelog/changelog-1.20.md#dockershim-deprecation\n\nhttps://kubernetes.io/zh/blog/2020/12/02/dont-panic-kubernetes-and-docker/\n\ndockeræ¯ä¸ä¸ªå®æ´çææ¯å æ ï¼æ¯ä¸ä¸ªç¨æ·åå¥½çæ½è±¡å±ï¼ä½æ¯ï¼å¯¹äºk8sæ¥è¯´ï¼å¹¶ä¸æ¯è®¾è®¡ç¨æ¥åµå¥å° kubernetesçï¼écriå®¹å¨è¿è¡æ¶æ¥å£ï¼ï¼å®éä¸k8séè¦çæ¯containerdï¼dockerä¸­çä¸ä¸ªé«çº§è¿è¡æ¶åè½ï¼ï¼ç±äºdocker ä¸å¼å®¹ criï¼kubernetes éç¾¤ä¸å¾ä¸å¼å¥ä¸ä¸ªå«å dockershim çå·¥å·æ¥è®¿é®å®çæ­£éè¦ç containerdãï¼å¢å è¿ç»´ææ¬ï¼å®¹æåºéï¼ã\n\näºæ¯k8så³å®ä¸åæ¯ædockershimï¼ç¨æ·åºè¯¥å°å®¹å¨è¿è¡æ¶ä» docker åæ¢å°å¶ä»åæ¯æçå®¹å¨è¿è¡æ¶ã\n\n\n# docker vs containerd\n\ndockerç± docker-client ,dockerd,containerd,docker-shim,runcç»æï¼æä»¥containerdæ¯dockerçåºç¡ç»ä»¶ä¹ä¸\n\nä»k8sçè§åº¦çï¼å¯ä»¥éæ© containerd æ docker ä½ä¸ºè¿è¡æ¶ç»ä»¶ï¼containerd è°ç¨é¾æ´ç­ï¼ç»ä»¶æ´å°ï¼æ´ç¨³å®ï¼å ç¨èç¹èµæºæ´å°\n\nè°ç¨é¾\n\ndocker ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e docker shim ï¼å¨ kubelet è¿ç¨ä¸­ï¼ --\x3e dockerd --\x3e containerd\n\ncontainerd ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e cri pluginï¼å¨ containerd è¿ç¨ä¸­ï¼ --\x3e containerd\n\n\n# kata containers ä¸ gvisor\n\nå¨2018å¹´ï¼google å¬å¸ååå¸äºä¸ä¸ªåå« gvisor çé¡¹ç®ãgvisor é¡¹ç®ç»å®¹å¨è¿ç¨éç½®ä¸ä¸ªç¨ go è¯­è¨å®ç°çãè¿è¡å¨ç¨æ·æçãæå°çâç¬ç«åæ ¸âãè¿ä¸ªåæ ¸å¯¹å®¹å¨è¿ç¨æ´é² linux åæ ¸ abiï¼æ®æ¼çâguest kernelâçè§è²ï¼ä»èè¾¾å°äºå°å®¹å¨åå®¿ä¸»æºéç¦»å¼çç®çã\n\nkataågvisorçæ¬è´¨ï¼é½æ¯ç»è¿ç¨åéäºä¸ä¸ªç¬ç«çæä½ç³»ç»åæ ¸ï¼ä»èé¿åäºè®©å®¹å¨å±äº«å®¿ä¸»æºçåæ ¸ãè¿æ ·ï¼å®¹å¨è¿ç¨è½å¤çå°çæ»å»é¢ï¼å°±ä»æ´ä¸ªå®¿ä¸»æºåæ ¸åæäºä¸ä¸ªæå°çãç¬ç«çãä»¥å®¹å¨ä¸ºåä½çåæ ¸ï¼ä»èææè§£å³äºå®¹å¨è¿ç¨åçâéé¸âæèå¤ºåæ´ä¸ªå®¿ä¸»æºçæ§å¶æçé®é¢ã\n\nèå®ä»¬çåºå«å¨äºï¼kata containers ä½¿ç¨çæ¯ä¼ ç»çèæåææ¯ï¼éè¿èæç¡¬ä»¶æ¨¡æåºäºä¸å°âå°èææºâï¼ç¶åå¨è¿ä¸ªå°èææºéå®è£äºä¸ä¸ªè£åªåç linux åæ ¸æ¥å®ç°å¼ºéç¦»ã\n\nè gvisor çåæ³åæ´å æ¿è¿ï¼google çå·¥ç¨å¸ç´æ¥ç¨ go è¯­è¨âæ¨¡æâåºäºä¸ä¸ªè¿è¡å¨ç¨æ·æçæä½ç³»ç»åæ ¸ï¼ç¶åéè¿è¿ä¸ªæ¨¡æçåæ ¸æ¥ä»£æ¿å®¹å¨è¿ç¨åå®¿ä¸»æºåèµ·æéçãå¯æ§çç³»ç»è°ç¨ã\n\n\n# runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢\n\ndockerçå®å¨é®é¢æ¬è´¨ä¸å°±æ¯å®¹å¨ææ¯çå®å¨æ§é®é¢ï¼åºäºè½¯ä»¶éç¦»ï¼è¿åæ¬å±ç¨åæ ¸é®é¢ä»¥ånamespaceè¿ä¸å¤å®åçéå¶ï¼\n\n 1. /procã/sysç­æªå®å¨éç¦»\n 2. top, free, iostatç­å½ä»¤å±ç¤ºçä¿¡æ¯æªéç¦»\n 3. rootç¨æ·æªéç¦»\n 4. /devè®¾å¤æªéç¦»\n 5. åæ ¸æ¨¡åæªéç¦»\n 6. selinuxãtimeãsyslogç­ææç°ænamespaceä¹å¤çä¿¡æ¯é½æªéç¦» éåæ¬èº«ä¸å®å¨ä¹ä¼å¯¼è´å®å¨æ§é®é¢ã\n\n\n# çæ³çå¤ç§æ·ç¶æ\n\nçæ³æ¥è¯´ï¼å¹³å°çåä¸ªç§æ·ï¼tenantï¼ä¹é´åºè¯¥æ æ³æåå°å½¼æ­¤çå­å¨ï¼è¡¨ç°å¾å°±åæ¯ä¸ªç§æ·ç¬å æ´ä¸ªå¹³å°ä¸æ ·ãå·ä½æ¥è¯´å°±æ¯ï¼æä¸è½çå°å¶å®ç§æ·çèµæºï¼æçèµæºè·æ»¡äºï¼ä¹ä¸è½å½±åå¶å®ç§æ·çèµæºä½¿ç¨ãææ æ³ä»ç½ç»æåæ ¸ä¸å¶å®ç§æ·ã\n\nkubernetesÂ å½ç¶åä¸å°ï¼å¶ä¸­æå¤§çä¸¤ä¸ªåå æ¯ï¼\n\n * kube-apiserverÂ æ¯æ´ä¸ªéç¾¤ä¸­çåä¾ï¼å¹¶ä¸æ²¡æå¤ç§æ·æ¦å¿µï¼\n\n * é»è®¤ç oci-runtime æ¯ runcï¼è runc å¯å¨çå®¹å¨æ¯å±äº«åæ ¸çã\n\n\n# k8sçåçå¤ç§æ·è§£å³æ¹æ¡\n\n * å½åç©ºé´éç¦»â\n * rbacæéç®¡çâ\n * èµæºéé¢resourcequotaâ\n * pod security policy\n * podè°åº¦ï¼ç»å®èç¹ãæ±¡ç¹å®¹å¿â\n * ç½ç»ç­ç¥éå¶â\n * æå¡ç½æ ¼ï¼istioâ\n * storageclasså­å¨èµæºéç¦»ï¼æè§æä¹ä¸å¤§ï¼\n * å¤éç¾¤éç¦»ç®¡ç\n\n\n# kata vs container\n\n\n\n\n# kata vs vmï¼openstackï¼\n\n\n\n\n# kata vs kubevirt\n\n * (kata)ï¼å¨èææºåä½¿ç¨å®¹å¨ï¼å¯ä»¥åå»ºä¸ä¸ªåå«å¤ä¸ªå®¹å¨çåºç¨ï¼å¹¶ä¸é½å¨èææºåè¿è¡ï¼å¯ä»¥åæ¶å¨å¤ä¸ªèææºä¸åå»º/éæ¯å®¹å¨ï¼èèææºåå¯å¨ä½¿ç¨ç°æèææºåºç¡è®¾æ½å¨ç©çæå¡å¨ä¹é´è¿ç§»ã\n * (kubevirt)ï¼å¨å®¹å¨åä½¿ç¨èææºï¼å©ç¨èµæºç®¡çææ¯ï¼å©ç¨æå»ºåé¨ç½²å·¥å·\n * kubevirtæ¯åç¨kubernetesçæ©å±æ§æ¥ç®¡çvmï¼éè¿crdç®¡çèææºï¼ï¼ä½ ç¨å°çæ¯ä¸ä¸ªçæ­£çvmï¼\n * kubevirtæ¨å¨æä¾å°½å¯è½å¤çèææºåè½\n * kata-containeræ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æçvmçå®å¨æ§åéç¦»æ§ï¼ä»¥å®¹å¨çæ¹å¼è¿è¡ï¼æçå®¹å¨çéåº¦åç¹ç¹ï¼ä½ä¸æ¯ä¸ä¸ªçæ­£çvmï¼kataå®¹å¨åè¯å¾ä¸ºèææºæä¾ç±»ä¼¼å®¹å¨çä½éª\n * virtletæ¯ævmå½æä¸ä¸ªcriæ¥è·äºï¼æ¯æpod apiæ¥å®ä¹ä¸ä¸ªvmï¼æä»¥vmçå¾å¤åè½æ¯å¦ç­è¿ç§»ç­ï¼virtletæ¯æ²¡æ³æ»¡è¶³vmçå¨é¨ç¹æ§çï¼ç®æ¯ä¸ä¸ª70%åè½çvm\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ",frontmatter:{title:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata2/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã',meta:[{name:"twitter:title",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{name:"twitter:description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{property:"og:description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{itemprop:"description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.md",key:"v-2e5f8162",path:"/pages/kata2/",headers:[{level:2,title:"ç½ç»æµéèµ°åï¼",slug:"ç½ç»æµéèµ°å",normalizedTitle:"ç½ç»æµéèµ°åï¼",charIndex:1115},{level:2,title:"virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯",slug:"virtio-9p-å-virtio-fs-æä»¶ç³»ç»å¯¹æ¯",normalizedTitle:"virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯",charIndex:4393},{level:2,title:"virtiofs",slug:"virtiofs",normalizedTitle:"virtiofs",charIndex:4373},{level:2,title:"å­å¨è·¯å¾ï¼",slug:"å­å¨è·¯å¾",normalizedTitle:"å­å¨è·¯å¾ï¼",charIndex:8420},{level:3,title:"virtiofsd cache",slug:"virtiofsd-cache",normalizedTitle:"virtiofsd cache",charIndex:9206},{level:3,title:"DAX(ç´æ¥è®¿é®)",slug:"dax-ç´æ¥è®¿é®",normalizedTitle:"dax(ç´æ¥è®¿é®)",charIndex:9369},{level:3,title:"virtiofsdå·²ç¥é®é¢æ±æ»",slug:"virtiofsdå·²ç¥é®é¢æ±æ»",normalizedTitle:"virtiofsdå·²ç¥é®é¢æ±æ»",charIndex:9728},{level:2,title:"containerdçSnapshotter",slug:"containerdçsnapshotter",normalizedTitle:"containerdçsnapshotter",charIndex:9804}],headersStr:"ç½ç»æµéèµ°åï¼ virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯ virtiofs å­å¨è·¯å¾ï¼ virtiofsd cache DAX(ç´æ¥è®¿é®) virtiofsdå·²ç¥é®é¢æ±æ» containerdçSnapshotter",content:'# ç½ç»\n\nèææºè¿æ¥å®¹å¨ç½ç»æ¥å£çæ¹å¼ï¼\n\n * macvtapï¼æ©æé»è®¤ï¼ï¼åå»ºäºä¸ä¸ª MACVTAP è®¾å¤ä»¥ç´æ¥è¿æ¥å°eth0è®¾å¤\n * none(ä½¿ç¨èªå®ä¹ç½ç»ï¼åªåå»ºä¸ä¸ª tap è®¾å¤ï¼ä¸åå»º veth pair)\n * tcfilter(éè¿ tc filter è§åå°æä»¶æä¾çç½ç»æ¥å£æµééå®åå°è¿æ¥å° VM ç tap æ¥å£) ï¼ç°å¨é»è®¤ï¼\n * bridgeï¼ï¼å·²å¼ç¨ï¼\n\n# Internetworking model\n# Determines how the VM should be connected to the\n# the container network interface\n# Options:\n#\n#   - macvtap\n#     Used when the Container network interface can be bridged using\n#     macvtap.\n#\n#   - none\n#     Used when customize network. Only creates a tap device. No veth pair.\n#\n#   - tcfilter\n#     Uses tc filter rules to redirect traffic from the network interface\n#     provided by plugin to a tap interface connected to the VM.\n#\ninternetworking_model="tcfilter"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã\n\n * eth0å±äºveth-pairç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥å®¿ä¸»æº\n * tap0_kataå±äºtapç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥qemuåå»ºçhypervisor\n * ä½¿ç¨tcç­ç¥æéeth0ç½ç»æ¥å£åtap0_kataç½ç»æ¥å£\n\nSandboxç¯å¢ä¸­åªæeth0ç½ç»æ¥å£ï¼è¿ä¸ªæ¥å£æ¯qemuåtapæ¨¡æåºçæ¥å£ï¼macãipãæ©ç é½åå®¿ä¸»æºä¸­cniåå»ºçç½ç»å½åç©ºé´ä¸­eth0çéç½®ä¸æ ·\n\nContainerè¿è¡å¨Sandboxç¯å¢ä¸­ï¼Containeréç¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´æ¹å¼åå»ºå®¹å¨ï¼æä»¥å¨containerä¸­çå°çç½ç»éç½®åSandboxä¸æ ·\n\n\n# ç½ç»æµéèµ°åï¼\n\næµéè¿å¥å®¿ä¸»æºåé¦åç±ç©çç½ç»éè¿veth pairæ¥å¥å°net namespaceï¼net namespaceä¸­å¨ä½¿ç¨TC filter è§åæµéå°tapç½ç»æ¥å£ï¼ç¶ååéè¿tapç½ç»æ¥å£ææµééå¥èæåç¯å¢ä¸­ï¼æåèæåç¯å¢ä¸­çå®¹å¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´åå°±å¯ä»¥å¨å®¹å¨ä¸­æ¿å°ç½ç»æµé\n\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: tunl0@NONE: <NOARP> mtu 1480 qdisc noop state DOWN group default qlen 1000\n link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if113: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc noqueue state UP group default qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff link-netnsid 0\n inet 10.192.181.55/32 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n5: tap0_kata: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc mq state UNKNOWN group default qlen 1000\n link/ether ee:32:c5:ac:30:06 brd ff:ff:ff:ff:ff:ff\n inet6 fe80::ec32:c5ff:feac:3006/64 scope link\n valid_lft forever preferred_lft forever\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n Sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n Sent 936 bytes 15 pkt (dropped 0, overlimits 0 requeues 0\n backlog 0b 0p requeues 0\n[root@rqy-k8s-1 kbuser]# kubectl exec -it hostpath-kata-57477fb8f7-ls6mq sh\n/ # ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc fq qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff\n inet 10.192.181.55/32 brd 10.192.181.55 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n> calicoç½ç»æ¨¡åç½ç»æµåï¼ -å®¹å¨æµééè¿veth pairå°è¾¾å®¿ä¸»æºçç½ç»å½åç©ºé´ä¸ã -æ ¹æ®å®¹å¨è¦è®¿é®çIPæå¨çå­ç½CIDRåä¸»æºä¸çè·¯ç±è§åï¼æ¾å°ä¸ä¸è·³è¦å°è¾¾çå®¿ä¸»æºIPã -æµéå°è¾¾ä¸ä¸è·³çå®¿ä¸»æºåï¼æ ¹æ®å½åå®¿ä¸»æºä¸çè·¯ç±è§åï¼ç´æ¥å°è¾¾å¯¹ç«¯å®¹å¨çveth pairæå¨å®¿ä¸»æºçä¸ç«¯ï¼æç»è¿å¥å®¹å¨ã\n\n\n# å­å¨\n\nstorage\n\n * virtio SCSIï¼å¨åºäºåçå¾å½¢é©±å¨ç¨åºä¸ä½¿ç¨ï¼\n * virtio FSï¼é»è®¤ï¼\n * Devicemapperï¼åè®¾å¤ï¼\n\nä» Kata Containers ç 2.0 çæ¬å¼å§ï¼virtio-fsæ¯é»è®¤çæä»¶ç³»ç»å±äº«æºå¶ï¼åç«¯æ¯virtiofsdå®æ¤è¿ç¨ï¼ã\n\n\n# virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯\n\n 1. virtio-9p æ²¡æéå¯¹èæååºæ¯æä¾ä¼å\n 2. virtio-fs å©ç¨äº hypervisor åèææºå¤äºç¸åèç¹çä¼å¿\n 3. DAX ç¹æ§ï¼æä»¶åå®¹æ å°å°å®¿ä¸»æºçåå­çªå£ï¼å®¢æ·æºç´æ¥è®¿é®å®¿ä¸»æºç page cache\n    * åå°åå­å ç¨ï¼å ä¸ºå®¢æ·æº cache å·²ç»è¢«ç»è¿äº\n 4. ç¸æ¯ virtio-9pï¼virtio-fs å·ææ´å¥½ç POSIX åè§æ§\n\n\n# virtiofs\n\n * æææ°æ®é½è¦ç»è¿virtiofsï¼ä¸ç®¡æ¯éåæ°æ®è¿æ¯â½¹ç»å­å¨å·ãèææºè¦åå®¿ä¸»æºæ°æ® äº¤äºï¼å°±å¿é¡»è¦ç©¿è¿qemuï¼virtiofså°±æ¯ç©¿è¿qemuçæ¡¥æ¢ï¼æä¾å±äº«â½ä»¶æºå¶ã\n * gueståhostæ°æ®ä¼ è¾é½æ¯éè¿virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äºvirtiofsdè¿ç¨çæéã\n * æ°æ®ç¸å³çæä½æç»è¿æ¯å¨å®¿ä¸»æºä¸ï¼â½å¦éåå±çåå¹¶ï¼ä»ç¶æ¯containerdçå­å¨å±æä»¶snapshotterå®æï¼åºå±ä»ç¶æ¯è°â½¤äºoverlayfsâ½ä»¶ç³»ç»\n\n[root@localhost hff]# ps -ef | grep 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28330     1  0 10:49 ?        00:00:00 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28342 28330  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     28348     1  0 10:49 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 -name sandbox-55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774 -uuid 27f404fa-1887-4529-bbbb-df1525845c98 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/qmp.sock,server=on,wait=off -m 2048M,slots=10,maxmem=8773M -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-3099871275,guest-cid=3099871275 -chardev socket,id=char-3352582b4396a8ee,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-3352582b4396a8ee,tag=kataShared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=7e:c7:e5:c6:8c:d7,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048M,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none -pidfile /run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     28355 28342  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\n\n\n1\n2\n3\n4\n5\n\n\næ¯â¼ä¸ª virtiofsdè¿ç¨çfdåæ°é½ç­äº3ï¼å ä¸ºâ½ä»¶æè¿°ç¬¦æ¯è¿ç¨ç¬â½´çï¼STDIOå  æ®äº0ï¼1å2ï¼é£ä¹virtiofsdç¬¬â¼ä¸ªå¯â½¤çfd numå°±æ¯3äº\n\n\n# å­å¨éç½®\n\n\n# å­å¨è·¯å¾ï¼\n\n/run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/\n\n[root@localhost ~]# find / -name hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/mounts/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/shared/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/containerd/io.containerd.runtime.v2.task/k8s.io/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/199015/fs/etc/hfftest0413-etc\n\n\n1\n2\n3\n4\n5\n\n\n\n# virtiofsd cache\n\nguest çææ¶ä¼æå®åå­å¤§å°ï¼virtiofsd ä¼å±äº«ä½¿ç¨ guest çåå­ãé»è®¤ä½¿ç¨memory-backend-file åå­å¯¹è±¡ã\n\nguest å host æ°æ®ä¼ è¾é½æ¯éè¿ virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äº virtiofsd è¿ç¨çæéã\n\n\n# DAX(ç´æ¥è®¿é®)\n\nDAX windows æ¯ä¸åèæåå­åºåï¼éè¿ PCI Bar ææä»¶æ å°å° guest éé¢ï¼å¹¶ä¸çæ­£çå ç¨ä¸»æºé£ä¹å¤åå­ï¼å³ä½¿æ 100 ä¸ªèææºï¼è®¾ç½®ç DAX cache æ¯ 1Gï¼ä¹ä¸ä¼ççä½¿ç¨ 100G åå­ã\n\nå¦ææ²¡æ DAXï¼åå­ä½¿â½¤éå¯è½ä¼â¾®å¸¸â¼¤ï¼å ä¸ºæ¯ä¸ªÂ guesté½æâ¾â¼°çâ½ä»¶ç¼å²åºã\n\nKata Containers å®æ¹ä¸è½½ççæ¬é»è®¤æ²¡ææ¯æï¼éè¦ç¼è¯å®è£ gitlab æç®¡ç virtio-fs qemu é¡¹ç® qemu5.0-virtiofs-dax åæ¯ï¼éè¦åç¬ç¼è¯qemu?qemu5.0-virtiofs-dax????\n\n * configuration.toml è®¾ç½®virtio_fs_cache_size dax window â¼¤â¼©\n\n\n# virtiofsdå·²ç¥é®é¢æ±æ»\n\nhttps://github.com/kata-containers/runtime/issues/2797\n\n\n# containerdçSnapshotter\n\nSnapshotä¸ºcontainerdå®ç°äºSnapshotterç¨äºç®¡çæä»¶ç³»ç»ä¸å®¹å¨éåçå¿«ç§åå®¹å¨çrootfsæè½½åå¸è½½ç­æä½åè½ã snapshotterå¯¹æ Dockerä¸­çgraphdriverå­å¨é©±å¨çè®¾è®¡ã\n\nhttps://blog.mobyproject.org/where-are-containerds-graph-drivers-145fc9b7255\n\n\n# åèèµæ\n\nhttps://blog.csdn.net/u010827484/article/details/117488338 https://github.com/kata-containers/kata-containers/blob/main/docs/design/architecture/networking.md http://miaoyq.com/kata-containers-share/',normalizedContent:'# ç½ç»\n\nèææºè¿æ¥å®¹å¨ç½ç»æ¥å£çæ¹å¼ï¼\n\n * macvtapï¼æ©æé»è®¤ï¼ï¼åå»ºäºä¸ä¸ª macvtap è®¾å¤ä»¥ç´æ¥è¿æ¥å°eth0è®¾å¤\n * none(ä½¿ç¨èªå®ä¹ç½ç»ï¼åªåå»ºä¸ä¸ª tap è®¾å¤ï¼ä¸åå»º veth pair)\n * tcfilter(éè¿ tc filter è§åå°æä»¶æä¾çç½ç»æ¥å£æµééå®åå°è¿æ¥å° vm ç tap æ¥å£) ï¼ç°å¨é»è®¤ï¼\n * bridgeï¼ï¼å·²å¼ç¨ï¼\n\n# internetworking model\n# determines how the vm should be connected to the\n# the container network interface\n# options:\n#\n#   - macvtap\n#     used when the container network interface can be bridged using\n#     macvtap.\n#\n#   - none\n#     used when customize network. only creates a tap device. no veth pair.\n#\n#   - tcfilter\n#     uses tc filter rules to redirect traffic from the network interface\n#     provided by plugin to a tap interface connected to the vm.\n#\ninternetworking_model="tcfilter"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\ntc-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç cni æä»¶å¼å®¹æ§ä»¥åä¸ macvtap ç¸å½çæ§è½ã\n\n * eth0å±äºveth-pairç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥å®¿ä¸»æº\n * tap0_kataå±äºtapç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥qemuåå»ºçhypervisor\n * ä½¿ç¨tcç­ç¥æéeth0ç½ç»æ¥å£åtap0_kataç½ç»æ¥å£\n\nsandboxç¯å¢ä¸­åªæeth0ç½ç»æ¥å£ï¼è¿ä¸ªæ¥å£æ¯qemuåtapæ¨¡æåºçæ¥å£ï¼macãipãæ©ç é½åå®¿ä¸»æºä¸­cniåå»ºçç½ç»å½åç©ºé´ä¸­eth0çéç½®ä¸æ ·\n\ncontainerè¿è¡å¨sandboxç¯å¢ä¸­ï¼containeréç¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´æ¹å¼åå»ºå®¹å¨ï¼æä»¥å¨containerä¸­çå°çç½ç»éç½®åsandboxä¸æ ·\n\n\n# ç½ç»æµéèµ°åï¼\n\næµéè¿å¥å®¿ä¸»æºåé¦åç±ç©çç½ç»éè¿veth pairæ¥å¥å°net namespaceï¼net namespaceä¸­å¨ä½¿ç¨tc filter è§åæµéå°tapç½ç»æ¥å£ï¼ç¶ååéè¿tapç½ç»æ¥å£ææµééå¥èæåç¯å¢ä¸­ï¼æåèæåç¯å¢ä¸­çå®¹å¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´åå°±å¯ä»¥å¨å®¹å¨ä¸­æ¿å°ç½ç»æµé\n\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: tunl0@none: <noarp> mtu 1480 qdisc noop state down group default qlen 1000\n link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if113: <broadcast,multicast,up,lower_up> mtu 1440 qdisc noqueue state up group default qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff link-netnsid 0\n inet 10.192.181.55/32 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n5: tap0_kata: <broadcast,multicast,up,lower_up> mtu 1440 qdisc mq state unknown group default qlen 1000\n link/ether ee:32:c5:ac:30:06 brd ff:ff:ff:ff:ff:ff\n inet6 fe80::ec32:c5ff:feac:3006/64 scope link\n valid_lft forever preferred_lft forever\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n sent 936 bytes 15 pkt (dropped 0, overlimits 0 requeues 0\n backlog 0b 0p requeues 0\n[root@rqy-k8s-1 kbuser]# kubectl exec -it hostpath-kata-57477fb8f7-ls6mq sh\n/ # ip addr\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <broadcast,multicast,up,lower_up> mtu 1440 qdisc fq qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff\n inet 10.192.181.55/32 brd 10.192.181.55 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n> calicoç½ç»æ¨¡åç½ç»æµåï¼ -å®¹å¨æµééè¿veth pairå°è¾¾å®¿ä¸»æºçç½ç»å½åç©ºé´ä¸ã -æ ¹æ®å®¹å¨è¦è®¿é®çipæå¨çå­ç½cidråä¸»æºä¸çè·¯ç±è§åï¼æ¾å°ä¸ä¸è·³è¦å°è¾¾çå®¿ä¸»æºipã -æµéå°è¾¾ä¸ä¸è·³çå®¿ä¸»æºåï¼æ ¹æ®å½åå®¿ä¸»æºä¸çè·¯ç±è§åï¼ç´æ¥å°è¾¾å¯¹ç«¯å®¹å¨çveth pairæå¨å®¿ä¸»æºçä¸ç«¯ï¼æç»è¿å¥å®¹å¨ã\n\n\n# å­å¨\n\nstorage\n\n * virtio scsiï¼å¨åºäºåçå¾å½¢é©±å¨ç¨åºä¸ä½¿ç¨ï¼\n * virtio fsï¼é»è®¤ï¼\n * devicemapperï¼åè®¾å¤ï¼\n\nä» kata containers ç 2.0 çæ¬å¼å§ï¼virtio-fsæ¯é»è®¤çæä»¶ç³»ç»å±äº«æºå¶ï¼åç«¯æ¯virtiofsdå®æ¤è¿ç¨ï¼ã\n\n\n# virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯\n\n 1. virtio-9p æ²¡æéå¯¹èæååºæ¯æä¾ä¼å\n 2. virtio-fs å©ç¨äº hypervisor åèææºå¤äºç¸åèç¹çä¼å¿\n 3. dax ç¹æ§ï¼æä»¶åå®¹æ å°å°å®¿ä¸»æºçåå­çªå£ï¼å®¢æ·æºç´æ¥è®¿é®å®¿ä¸»æºç page cache\n    * åå°åå­å ç¨ï¼å ä¸ºå®¢æ·æº cache å·²ç»è¢«ç»è¿äº\n 4. ç¸æ¯ virtio-9pï¼virtio-fs å·ææ´å¥½ç posix åè§æ§\n\n\n# virtiofs\n\n * æææ°æ®é½è¦ç»è¿virtiofsï¼ä¸ç®¡æ¯éåæ°æ®è¿æ¯â½¹ç»å­å¨å·ãèææºè¦åå®¿ä¸»æºæ°æ® äº¤äºï¼å°±å¿é¡»è¦ç©¿è¿qemuï¼virtiofså°±æ¯ç©¿è¿qemuçæ¡¥æ¢ï¼æä¾å±äº«â½ä»¶æºå¶ã\n * gueståhostæ°æ®ä¼ è¾é½æ¯éè¿virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äºvirtiofsdè¿ç¨çæéã\n * æ°æ®ç¸å³çæä½æç»è¿æ¯å¨å®¿ä¸»æºä¸ï¼â½å¦éåå±çåå¹¶ï¼ä»ç¶æ¯containerdçå­å¨å±æä»¶snapshotterå®æï¼åºå±ä»ç¶æ¯è°â½¤äºoverlayfsâ½ä»¶ç³»ç»\n\n[root@localhost hff]# ps -ef | grep 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28330     1  0 10:49 ?        00:00:00 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28342 28330  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     28348     1  0 10:49 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 -name sandbox-55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774 -uuid 27f404fa-1887-4529-bbbb-df1525845c98 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/qmp.sock,server=on,wait=off -m 2048m,slots=10,maxmem=8773m -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-3099871275,guest-cid=3099871275 -chardev socket,id=char-3352582b4396a8ee,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-3352582b4396a8ee,tag=katashared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=7e:c7:e5:c6:8c:d7,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048m,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none -pidfile /run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     28355 28342  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\n\n\n1\n2\n3\n4\n5\n\n\næ¯â¼ä¸ª virtiofsdè¿ç¨çfdåæ°é½ç­äº3ï¼å ä¸ºâ½ä»¶æè¿°ç¬¦æ¯è¿ç¨ç¬â½´çï¼stdioå  æ®äº0ï¼1å2ï¼é£ä¹virtiofsdç¬¬â¼ä¸ªå¯â½¤çfd numå°±æ¯3äº\n\n\n# å­å¨éç½®\n\n\n# å­å¨è·¯å¾ï¼\n\n/run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/\n\n[root@localhost ~]# find / -name hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/mounts/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/shared/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/containerd/io.containerd.runtime.v2.task/k8s.io/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/199015/fs/etc/hfftest0413-etc\n\n\n1\n2\n3\n4\n5\n\n\n\n# virtiofsd cache\n\nguest çææ¶ä¼æå®åå­å¤§å°ï¼virtiofsd ä¼å±äº«ä½¿ç¨ guest çåå­ãé»è®¤ä½¿ç¨memory-backend-file åå­å¯¹è±¡ã\n\nguest å host æ°æ®ä¼ è¾é½æ¯éè¿ virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äº virtiofsd è¿ç¨çæéã\n\n\n# dax(ç´æ¥è®¿é®)\n\ndax windows æ¯ä¸åèæåå­åºåï¼éè¿ pci bar ææä»¶æ å°å° guest éé¢ï¼å¹¶ä¸çæ­£çå ç¨ä¸»æºé£ä¹å¤åå­ï¼å³ä½¿æ 100 ä¸ªèææºï¼è®¾ç½®ç dax cache æ¯ 1gï¼ä¹ä¸ä¼ççä½¿ç¨ 100g åå­ã\n\nå¦ææ²¡æ daxï¼åå­ä½¿â½¤éå¯è½ä¼â¾®å¸¸â¼¤ï¼å ä¸ºæ¯ä¸ªÂ guesté½æâ¾â¼°çâ½ä»¶ç¼å²åºã\n\nkata containers å®æ¹ä¸è½½ççæ¬é»è®¤æ²¡ææ¯æï¼éè¦ç¼è¯å®è£ gitlab æç®¡ç virtio-fs qemu é¡¹ç® qemu5.0-virtiofs-dax åæ¯ï¼éè¦åç¬ç¼è¯qemu?qemu5.0-virtiofs-dax????\n\n * configuration.toml è®¾ç½®virtio_fs_cache_size dax window â¼¤â¼©\n\n\n# virtiofsdå·²ç¥é®é¢æ±æ»\n\nhttps://github.com/kata-containers/runtime/issues/2797\n\n\n# containerdçsnapshotter\n\nsnapshotä¸ºcontainerdå®ç°äºsnapshotterç¨äºç®¡çæä»¶ç³»ç»ä¸å®¹å¨éåçå¿«ç§åå®¹å¨çrootfsæè½½åå¸è½½ç­æä½åè½ã snapshotterå¯¹æ dockerä¸­çgraphdriverå­å¨é©±å¨çè®¾è®¡ã\n\nhttps://blog.mobyproject.org/where-are-containerds-graph-drivers-145fc9b7255\n\n\n# åèèµæ\n\nhttps://blog.csdn.net/u010827484/article/details/117488338 https://github.com/kata-containers/kata-containers/blob/main/docs/design/architecture/networking.md http://miaoyq.com/kata-containers-share/',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata cgroupåèµæºéå¶",frontmatter:{title:"kata cgroupåèµæºéå¶",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata3/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kata cgroupåèµæºéå¶"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata cgroupåèµæºéå¶"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata cgroupåèµæºéå¶"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.md",key:"v-3f9afa48",path:"/pages/kata3/",headers:[{level:2,title:"éªè¯1ï¼ æ¥çcgroupå¤§å°",slug:"éªè¯1-æ¥çcgroupå¤§å°",normalizedTitle:"éªè¯1ï¼ æ¥çcgroupå¤§å°",charIndex:1106},{level:3,title:"sandboxcgrouponly=true",slug:"sandbox-cgroup-only-true",normalizedTitle:"sandboxcgrouponly=true",charIndex:null},{level:3,title:"sandboxcgrouponly=falseï¼ç»æå=trueï¼",slug:"sandbox-cgroup-only-false-ç»æå-true",normalizedTitle:"sandboxcgrouponly=falseï¼ç»æå=trueï¼",charIndex:null},{level:3,title:"æ¥çå½ä»¤ï¼",slug:"æ¥çå½ä»¤",normalizedTitle:"æ¥çå½ä»¤ï¼",charIndex:3331},{level:2,title:"éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç",slug:"éªè¯2-å¦æä¸è®¾ç½®request-limit-kubepod-cgroupçéå¶æ¯ææ ·ç",normalizedTitle:"éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç",charIndex:5356},{level:2,title:"éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",slug:"éªè¯3-éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",normalizedTitle:"éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",charIndex:6185},{level:2,title:"éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿",slug:"éªè¯4-éªè¯å¦æä¸è®¾ç½®request-limit-cpu-memçä½¿ç¨ä¸çº¿",normalizedTitle:"éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿",charIndex:6814},{level:2,title:"éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼",slug:"éªè¯5-éªè¯cpu-memå°äº1c-256miçæåµ-no-overhead",normalizedTitle:"éªè¯5ï¼ éªè¯cpu memå°äº1c 256miçæåµï¼no overheadï¼",charIndex:7526},{level:2,title:"éªè¯6ï¼ æå°èµæºå ç¨æµè¯",slug:"éªè¯6-æå°èµæºå ç¨æµè¯",normalizedTitle:"éªè¯6ï¼ æå°èµæºå ç¨æµè¯",charIndex:8677},{level:2,title:"éªè¯7ï¼ æ¥çkata vmä¸­çcgroup",slug:"éªè¯7-æ¥çkata-vmä¸­çcgroup",normalizedTitle:"éªè¯7ï¼ æ¥çkata vmä¸­çcgroup",charIndex:10477},{level:2,title:"ä¸¤ç§cgrouppath:",slug:"ä¸¤ç§cgrouppath",normalizedTitle:"ä¸¤ç§cgrouppath:",charIndex:14110},{level:2,title:"pod overhead",slug:"pod-overhead",normalizedTitle:"pod overhead",charIndex:489},{level:2,title:"sandboxcgrouponly",slug:"sandbox-cgroup-only",normalizedTitle:"sandboxcgrouponly",charIndex:null},{level:2,title:"default_vcpus/memory",slug:"default-vcpus-memory",normalizedTitle:"default_vcpus/memory",charIndex:716},{level:2,title:"kataèµæºå¼é",slug:"kataèµæºå¼é",normalizedTitle:"kataèµæºå¼é",charIndex:15028},{level:2,title:"kataç»ä»¶è¿ç¨ï¼",slug:"kataç»ä»¶è¿ç¨",normalizedTitle:"kataç»ä»¶è¿ç¨ï¼",charIndex:15107},{level:2,title:"ä¸æ¯æCgroups V2",slug:"ä¸æ¯æcgroups-v2",normalizedTitle:"ä¸æ¯æcgroups v2",charIndex:15676},{level:2,title:"éè¿æ³¨éä¿®æ¹éç½®ï¼",slug:"éè¿æ³¨éä¿®æ¹éç½®",normalizedTitle:"éè¿æ³¨éä¿®æ¹éç½®ï¼",charIndex:17610},{level:2,title:"æå¼--feature-gates PodOverhead",slug:"æå¼-feature-gates-podoverhead",normalizedTitle:"æå¼--feature-gates podoverhead",charIndex:17918},{level:3,title:"å¯ç¨RuntimeClassåå¥æ§å¶",slug:"å¯ç¨runtimeclassåå¥æ§å¶",normalizedTitle:"å¯ç¨runtimeclassåå¥æ§å¶",charIndex:18239},{level:3,title:"è®¾ç½®podOverHead",slug:"è®¾ç½®podoverhead",normalizedTitle:"è®¾ç½®podoverhead",charIndex:18437},{level:2,title:"virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼",slug:"virtio-memåå­ç­ææ-ä»æ¯æqemu",normalizedTitle:"virtio-memåå­ç­ææï¼ä»æ¯æqemuï¼",charIndex:18630}],headersStr:"éªè¯1ï¼ æ¥çcgroupå¤§å° sandboxcgrouponly=true sandboxcgrouponly=falseï¼ç»æå=trueï¼ æ¥çå½ä»¤ï¼ éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½ éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿ éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼ éªè¯6ï¼ æå°èµæºå ç¨æµè¯ éªè¯7ï¼ æ¥çkata vmä¸­çcgroup ä¸¤ç§cgrouppath: pod overhead sandboxcgrouponly default_vcpus/memory kataèµæºå¼é kataç»ä»¶è¿ç¨ï¼ ä¸æ¯æCgroups V2 éè¿æ³¨éä¿®æ¹éç½®ï¼ æå¼--feature-gates PodOverhead å¯ç¨RuntimeClassåå¥æ§å¶ è®¾ç½®podOverHead virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼",content:'# åèï¼\n\n * host-cgroups.md\n * vcpu-handling.md\n\n\n# ç»è®º\n\n * cgroupsPathçè·¯å¾æ ¹æ®Qosç±»å«ä¸å\n * kata_overheadçcpuåmemæ²¡æéå¶ï¼è½ç¨å°å®¿ä¸»æºææèµæºï¼å¦æä¸å¼å¯sandbox_cgroup_onlyä¼å¯¼è´ä¸»æºèµæºè¢«æ¢å \n * kubepod cgroupéå¶=limit+overheadï¼å®¹å¨ä¸å¡è´è½½å°±æ¯å¨è¿ä¸ªéå¶ä¹åä½¿ç¨ï¼ç¶ååºåsandbox_cgroup_onlyæ¯å¦å¼å¯å³å®kata vm(sandbox)å¼éæ¯å¦ç»è®¡å°kubepodä¸­ï¼å¦ææ¯åä¸å¡ç³è¯·cpu memèµæºå°±å¿é¡»èèkata sandboxå¼é\n * èææºå¤§å°=kata vmä¸­æèè¯´podä¸­çå°çcpu memï¼lscpu lsmemï¼=default+limitï¼è§éªè¯1ï¼\n * kubectl describe node | grep test-kataçå°çèµæºç³è¯·=limit+overheadï¼åruncï¼ï¼è§éªè¯1ï¼\n * kubectl top podçå°çæ¯ä¸å¡çæ­£çè´è½½å¼éï¼ï¼\n * pod overheadä¼å½±åè°åº¦ï¼overheadåªä½ç¨äºsandboxå¼éï¼ä¸è½ä½ç¨äºä¸å¡è´è½½ï¼è§éªè¯3ï¼\n * ä¸ºäºéå¶èµæºæ¢å é®é¢ï¼å»ºè®®å¼å¯sandbox_cgroup_only=true,overheadå»ºè®®ä¸è®¾ç½®ï¼å¾å®ï¼ï¼ä»¥ä¸è¯´æåå¨sandbox_cgroup_only=trueåæä¸è¿è¡è¯´æ\n * ä¸å¡è´è½½+sandboxå¼éæå¤§è½ä½¿ç¨çèµæºéå¶=limit+overheadï¼overheadé¨ååªè½æ¯é¢å¤å¼éç¨ï¼ï¼è§éªè¯3ï¼\n * default_vcpus/memoryï¼å½±åèææºçå¤§å°/å¯å¨æ¶é´ï¼è¿ä¸ªå¼å®æ¹ä¸å»ºè®®ä¿®æ¹\n * å¦æcontaineræªè®¾ç½®limitï¼åkubepod cgroupæ éå¶ï¼ä½æ¯ä¸å¡è´è½½åªè½ä½¿ç¨defaultè®¾ç½®ç1G2G???ææªæ¾å°å¨åªåçéå¶ï¼ï¼è§éªè¯7ï¼ï¼å¦æè®¾ç½®äºlimitï¼åè¿ä¸ªdefaultååªå½±åèææºå¤§å°ï¼ä½ä¸å½±åkubepod cgroupéå¶ï¼è§éªè¯1ï¼\n * ~ä¸ä¸ªPodçæå°è§æ ¼æ¯1C 256Mï¼å½ä½äº 256M æ¶ï¼ä¼éç½®ä¸º 2Gãï¼æ¯æçæå¤§åå­è§æ ¼æ¯256GBãå¦æç¨æ·åéçåå­è§æ ¼è¶è¿256GBï¼å¯è½ä¼åºç°æªå®ä¹çéè¯¯ï¼å®å¨å®¹å¨æä¸æ¯æè¶è¿256GBçå¤§åå­åºæ¯ã~ï¼æªæ¾å°å®æ¹åºå¤ï¼åºè¯¥åªæ¯openEuleråé¨åçéå¶ï¼ï¼è§éªè¯5ï¼\n * å¦æä¸è®¾ç½®requestï¼årequestçå¼ålimité»è®¤ç¸ç­\n\n\n# ä¸äºéªè¯\n\n\n# éªè¯1ï¼ æ¥çcgroupå¤§å°\n\ncpu.cfs_period_usæ¯CFSç®æ³çä¸ä¸ªè°åº¦å¨æï¼ä¸è¬å®çå¼æ¯100000usï¼å³100msã cpu.cfs_quota_usè¡¨ç¤ºå¨CFSç®æ³ä¸­ï¼å¨ä¸ä¸ªè°åº¦å¨æéè¯¥æ§å¶ç»è¢«åè®¸çè¿è¡æ¶é´ï¼æ¯å¦è¿ä¸ªå¼ä¸º50000æ¶ï¼å°±æ¯50msãç¨è¿ä¸ªå¼å»é¤ä»¥è°åº¦å¨æcpu.cfs_period_usï¼å³50ms/100ms=0.5ï¼å¾å°çå¼è¡¨ç¤ºè¯¥æ§å¶ç»è¢«åè®¸ä½¿ç¨çCPUæå¤§éé¢æ¯0.5ä¸ªCPUãå¨æçç³»ç»éï¼è¿ä¸ªå¼æ¯-1ï¼ä¸ºé»è®¤å¼ï¼è¡¨ç¤ºä¸éå¶ã\n\ndefault_vcpu=1 default_memory=2Gi overhead: "podFixed":{"cpu":"250m","memory":"160Mi"} pod Qos: resources: requests: memory: "500Mi" cpu: "0.5" limits: memory: "3000Mi" cpu: "4"\n\n\n# sandbox_cgroup_only=true\n\n"cgroupsPath": "/kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼ kubepods_mem: 3313500160 (~3.08G) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\nlscpu: 5 (default+limit) lsmemï¼ Memory block size: 128M Memory block size: 128M Total online memory: 5G (default+limit)\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660Mi (10%) 3160Mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1Mi kubectl top nodeï¼ 1306m 16% 5513Mi 84%\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 27.4M - - [root@localhost ~]# systemd-cgtop | grep pod287707dd-0fda-4fab-874d-e1b00e87390a /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a - - 193.4M - -\n\n\n# sandbox_cgroup_only=falseï¼ç»æå=trueï¼\n\n"cgroupsPath": "/kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44/87b5990ce61e4ff193124fc60e4a68c7061cf9299688c6c521cae29103bc3ef5",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 3313500160 (~3.08G) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 24.6M - - [root@localhost ~]# systemd-cgtop | grep pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 /kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 - - 151.7M - -\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660Mi (10%) 3160Mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1Mi kubectl top nodeï¼ 1330m 17% 5507Mi 84%\n\n\n# æ¥çå½ä»¤ï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     4.9M        -        -\n/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6       7      -   132.9M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    23.2M        -        -\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kata_overhead/memory.limit_in_bytes\n9223372036854771712\n[root@localhost ~]#  cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_quota_us\n-1\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/memory.limit_in_bytes\n1241513984\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_quota_us\n125000\n\n[root@localhost ~]#  cat /sys/fs/cgroup/memory/system.slice/kata-monitor.service/memory.limit_in_bytes\n9223372036854771712\n\n[root@localhost ~]# kubectl top pod test-kata\nNAME        CPU(cores)   MEMORY(bytes)\ntest-kata   0m           2Mi\n[root@localhost ~]# kubectl top node\nNAME                    CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%\nlocalhost.localdomain   355m         4%     5469Mi          83%\n\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184Mi (18%)     1184Mi (18%)   16d\n  kube-system                 kata-deploy-q2cnv                                        0 (0%)        0 (0%)       0 (0%)           0 (0%)         21d\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\n\n# éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç\n\n"cgroupsPath": "/kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f/367368f8f5c44bc69b277febfa5d533063f096c65cd9b6729bbc7847a582f51f",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 9223372036854771712 ~8Gï¼ä¸éï¼ kubepods_cpu cfs_period_us cfs_quota_us: 100000 -1 ä¸é kubectl top podï¼ 1000m 0Mi kubectl top nodeï¼ 1316m 16% 5517Mi 84%\n\n[root@localhost hff]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 25.1M - -\n\n[root@localhost hff]# systemd-cgtop | grep pod09a392bc-1080-4044-8015-39f392e3862f /kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f - - 95.8M - -\n\nkubectl describe node | grep test-kataï¼ 250m (3%)ï¼overheadï¼ 0 (0%) 160Mi (2%)ï¼overheadï¼ 0 (0%) 6m30s\n\nkubepodä¸éå¶ï¼ä½æ¯podç¡®å®åªè½ç¨å°limitçå¼\n\n\n# éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½\n\nè®¾ç½®overhead 2C 2Gåï¼limit 3C3G, ææ»¡cpu=6,mem=3Gi\n\n[root@localhost hff]# kubectl get pod\nNAME                              READY   STATUS        RESTARTS   AGE\ntest-kata-5687cdcb66-28lgn        0/1     OutOfmemory   0          17s\ntest-kata-5687cdcb66-2lmd5        0/1     OutOfmemory   0          11s\ntest-kata-5687cdcb66-2pbhm        0/1     OutOfmemory   0          23s\ntest-kata-5687cdcb66-575sb        0/1     OutOfmemory   0          19s\ntest-kata-5687cdcb66-5gvt2        0/1     OutOfmemory   0          5s\ntest-kata-5687cdcb66-62fbd        0/1     OutOfmemory   0          33s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿\n\nè®¾ç½®overhead 2C 2Gåï¼limitä¸è®¾ç½®ï¼ ææ»¡cpu=6,mem=1Gi\n\n[root@localhost hff]# kubectl get pod  -w\nNAME                              READY   STATUS        RESTARTS   AGE\ntest-kata-55867ffb58-26ndp        0/1     OutOfmemory   0          4s\ntest-kata-55867ffb58-2blnx        0/1     OutOfmemory   0          2s\ntest-kata-55867ffb58-2d858        0/1     OutOfmemory   0          1s\ntest-kata-55867ffb58-2qwzf        0/1     Pending       0          0s\ntest-kata-55867ffb58-4j4hl        0/1     OutOfmemory   0          1s\ntest-kata-55867ffb58-8zzbc        0/1     OutOfmemory   0          2s\ntest-kata-55867ffb58-crflb        0/1     OutOfmemory   0          4s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼\n\n    resources:\n      requests:\n        memory: "1Mi"\n        cpu: "0.1"\n      limits:\n        memory: "100Mi"\n        cpu: "550m"\n    args:\n    - -cpus\n    - "2"\n    - -mem-total\n    - 100Mi\n    - -mem-alloc-size\n    - 10Mi\n    - -mem-alloc-sleep\n    - 1s\n\n\næ²¡æOOMï¼ä½æ¯podä¸æ­éå¯ï¼ææå¹¶æ²¡æè¢«éç½®æ2G\n\n[root@localhost hff]# kubectl get pod -w\nNAME                              READY   STATUS    RESTARTS   AGE\nkubefilebrowser-896974bcc-z6scd   1/1     Running   3          31d\ntest-kata-6878f4fd9f-76c5k        1/1     Running   2          61s\ntest-runc-79d8bdc4cb-v6j28        1/1     Running   0          75m\ntest-kata-6878f4fd9f-76c5k        0/1     Error     2          72s\ntest-kata-6878f4fd9f-76c5k        0/1     CrashLoopBackOff   2          75s\n\n[root@localhost hff]# kubectl logs test-kata-6878f4fd9f-76c5k\nI0527 07:16:06.932758       1 main.go:26] Allocating "200Mi" memory, in "10Mi" chunks, with a 1s sleep between allocations\nI0527 07:16:06.933058       1 main.go:39] Spawning a thread to consume CPU\nI0527 07:16:06.933082       1 main.go:39] Spawning a thread to consume CPU\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# éªè¯6ï¼ æå°èµæºå ç¨æµè¯\n\nlimit550m/200Miï¼å2C100Miï¼podä¼ä¸æ­éå¯ï¼ä½æ¯ä¸æ¯OOMKilled\n\n        resources:\n          requests:\n            memory: "1Mi"\n            cpu: "0.1"\n          limits:\n            memory: "200Mi"\n            cpu: "550m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100Mi\n        - -mem-alloc-size\n        - 10Mi\n        - -mem-alloc-sleep\n        - 1s\nEvents:\n  Type     Reason          Age                   From                            Message\n  ----     ------          ----                  ----                            -------\n  Normal   Scheduled       <unknown>             default-scheduler               Successfully assigned default/test-kata-68b77bc9f8-zlj5p to localhost.localdomain\n  Normal   Created         36m (x4 over 38m)     kubelet, localhost.localdomain  Created container cpu-stress-kata\n  Normal   Started         36m (x4 over 38m)     kubelet, localhost.localdomain  Started container cpu-stress-kata\n  Normal   SandboxChanged  35m (x4 over 37m)     kubelet, localhost.localdomain  Pod sandbox changed, it will be killed and re-created.\n  Normal   Pulled          7m53s (x11 over 38m)  kubelet, localhost.localdomain  Container image "vish/stress" already present on machine\n  Warning  BackOff         3m5s (x159 over 37m)  kubelet, localhost.localdomain  Back-off restarting failed container\n[root@localhost hff]#\n[root@localhost hff]# kubectl logs test-kata-68b77bc9f8-zlj5p\nI0527 08:13:52.926368       1 main.go:26] Allocating "100Mi" memory, in "10Mi" chunks, with a 1s sleep between allocations\nI0527 08:13:52.926544       1 main.go:39] Spawning a thread to consume CPU\nI0527 08:13:52.926570       1 main.go:39] Spawning a thread to consume CPU\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# éªè¯7ï¼ æ¥çkata vmä¸­çcgroup\n\nä¸è®¾ç½®limitï¼overhead\n\nbash-5.1# more /sys/fs/cgroup/memory/\ncgroup.clone_children               memory.max_usage_in_bytes\ncgroup.event_control                memory.memsw.failcnt\ncgroup.procs                        memory.memsw.limit_in_bytes\ncgroup.sane_behavior                memory.memsw.max_usage_in_bytes\nkubepods/                           memory.memsw.usage_in_bytes\nmemory.failcnt                      memory.move_charge_at_immigrate\nmemory.force_empty                  memory.oom_control\nmemory.kmem.failcnt                 memory.pressure_level\nmemory.kmem.limit_in_bytes          memory.soft_limit_in_bytes\nmemory.kmem.max_usage_in_bytes      memory.stat\nmemory.kmem.slabinfo                memory.swappiness\nmemory.kmem.tcp.failcnt             memory.usage_in_bytes\nmemory.kmem.tcp.limit_in_bytes      memory.use_hierarchy\nmemory.kmem.tcp.max_usage_in_bytes  notify_on_release\nmemory.kmem.tcp.usage_in_bytes      release_agent\nmemory.kmem.usage_in_bytes          system.slice/\nmemory.limit_in_bytes               tasks\nbash-5.1# more /sys/fs/cgroup/memory/kubepods/\nbesteffort/                         memory.max_usage_in_bytes\ncgroup.clone_children               memory.memsw.failcnt\ncgroup.event_control                memory.memsw.limit_in_bytes\ncgroup.procs                        memory.memsw.max_usage_in_bytes\nmemory.failcnt                      memory.memsw.usage_in_bytes\nmemory.force_empty                  memory.move_charge_at_immigrate\nmemory.kmem.failcnt                 memory.oom_control\nmemory.kmem.limit_in_bytes          memory.pressure_level\nmemory.kmem.max_usage_in_bytes      memory.soft_limit_in_bytes\nmemory.kmem.slabinfo                memory.stat\nmemory.kmem.tcp.failcnt             memory.swappiness\nmemory.kmem.tcp.limit_in_bytes      memory.usage_in_bytes\nmemory.kmem.tcp.max_usage_in_bytes  memory.use_hierarchy\nmemory.kmem.tcp.usage_in_bytes      notify_on_release\nmemory.kmem.usage_in_bytes          tasks\nmemory.limit_in_bytes\nbash-5.1# more /sys/fs/cgroup/cpu/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/f3cffcf893000b0c5f6105f1adb94e3be7fa62ebecd801a29b9a77a472d62c86/cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/memory/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/.limit_in_bytes\n9223372036854771712\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\næªæ¾å°default_vcpu/memoryæ¯å¨åªéåçéå¶\n\n\n# kata cgroupè¯´æ\n\nKata Containers å¨ä¸¤å± cgroup ä¸è¿è¡ã\n\n * workload guest\n * VMM host ï¼Kata Containers å¨ä¸¤å± cgroup ä¸è¿è¡ãç¬¬ä¸å±å¨èææºä¸­æ¾ç½®å·¥ä½è´è½½ï¼èç¬¬äºå±å¨ä¸»æºä¸è¿è¡ VMMå å³èçº¿ç¨ãï¼\n\nä» Kubernetes è§åº¦æ¥è®²ï¼Cgroup æçæ¯ Pod Cgroupï¼ç± Kubelet åå»ºï¼éå¶çæ¯ Pod çèµæº; ä» Container è§åº¦æ¥è®²ï¼Cgroup æçæ¯ Container Cgroupï¼ç±å¯¹åºç runtime åå»ºï¼éå¶çæ¯ container çèµæºãä½æ¯ä¸ºäºå¯ä»¥è·åå°æ´åç¡®çå®¹å¨èµæºï¼Kubelet ä¼æ ¹æ® Container Cgroup å»è°æ´ Pod Cgroupã å¨ä¼ ç»ç runtime ä¸­ï¼ä¸¤èæ²¡æå¤ªå¤§çåºå«ã\n\nè Kata Containers å¼å¥ VM çæ¦å¿µï¼æä»¥éå¯¹è¿ç§æåµæä¸¤ç§å¤çæ¹å¼ï¼\n\n * å¯ç¨ SandboxCgroupOnlyï¼é»è®¤ï¼ï¼Kubelet å¨è°æ´ Pod Cgroup çå¤§å°æ¶ï¼ä¼å° sandbox çå¼éç»è®¡è¿å» ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½åkataèææºå¼éçæå¤§ä½¿ç¨éå¶ï¼å¦æä¸è®¾ç½®limitï¼é»è®¤æ¯default_vcpus/mem??ï¼\n * ç¦ç¨ SandboxCgroupOnlyï¼sandbox çå¼éå Pod Cgroup åå¼è®¡ç®ï¼ç¬ç«å­å¨ ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½èªå·±çæå¤§ä½¿ç¨éå¶ï¼kataèææºå¼éåç¬ä¸ä¸ªcgroupèä¸æ²¡æéå¶ï¼å¦æä¸è®¾ç½®limitï¼ä¸å¡ä½¿ç¨é»è®¤æ¯default_vcpus/memï¼\n\n\n# ä¸¤ç§cgrouppath:\n\n * /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f ()\n * /kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6 ()\n\n\n# pod overhead\n\n\n# sandbox_cgroup_only\n\n * å¦æå¯ç¨ï¼è¿è¡æ¶å°å¨ä¸ä¸ªä¸ç¨cgroupä¸­æ·»å æækataè¿ç¨ãæ¯ä¸ªæ²çåªåå»ºä¸ä¸ªcgroupï¼ä¸»æºä¸­çcontainer cgroupå°ä¸ä¼åå»º\n * kata runtimeè°ç¨èå¯ä»¥èªç±å°éå¶ææ¶éæ´ä¸ªKataæ²ççcgroupç»è®¡ä¿¡æ¯ã\n * sandbox cgroupè·¯å¾æ¯å·æPodSandbox annotation(???)çå®¹å¨çç¶cgroupã\n * å¦ææ²¡æcontainer type annotation(??)ï¼åsandbox cgroupå°åå°éå¶\n * æå³ç pod cgroup çå¤§å°éå½ï¼å¹¶èèäº pod å¼éï¼è®¾ç½®podoverheadèèè°åº¦ï¼\n * Kata shim å°å¨sandbox_cgroup_onlypod çä¸ç¨ cgroup ä¸ä¸ºæ¯ä¸ª pod åå»ºä¸ä¸ªå­ cgroup\n * kata shimãqemu çº¿ç¨å°ä¸æ²ç®±å¨åä¸ä¸ª cgroup ä¸­ãå¨è¿ç§æåµä¸ï¼å®ä»¬å°ä¸ vcpu çº¿ç¨å±äº«åä¸ç» cpu åæ ¸\n\n=trueå¥½å¤ï¼\n\n * ä¾¿äºPodèµæºç»è®¡\n * æ´å¥½çä¸»æºèµæºéç¦»\n\n=fasleä¼ç¹åç¼ºç¹ï¼\n\n * ä¸éå¶ä¼æ¶èå¤§éä¸»æºèµæº\n * å¨ä¸ç¨å¼écgroupä¸è¿è¡ææévcpuçº¿ç¨å¯ä»¥æä¾æå³å®éçå¼éåç¡®å¼ï¼å¯ä»¥è®¾ç½®å¼écgroupå¤§å°ï¼æå¨ä¿®æ¹ï¼æ æ¥å£ï¼\n\n\n# default_vcpus/memory\n\n\n# kataèµæºå¼é\n\n * åèæå I/O åç«¯\n * VMM å®ä¾\n * Kata shim è¿ç¨\n * kata monitorå¼éï¼å¦æå¼å¯ï¼\n\n\n# kataç»ä»¶è¿ç¨ï¼\n\n * sandbox qemu-system-x86_64è¿ç¨cgroup\n * containerd-shim-kata-v2è¿ç¨\n * ä¸¤ä¸ªvirtiofsdè¿ç¨\n\nkata podèµ·æ¥åï¼å¶ä¸­ï¼kata shimè¿ç¨åqemuè¿ç¨å ç¨äºå¤§éçåå­å¼éï¼å¶ä¸­ï¼æ²ç®±éçåæ ¸å agent æ¯ç´æ¥åäº«äºåºç¨åå­ä½å¹¶ä¸æ¯åºç¨çä¸é¨åï¼ä¹å°±æ¯è¯´ï¼è¿ä¸é¨åæ¯ç¨æ·å¯è§çå¼éãè VMM æ¬èº«å¨å®¿ä¸»æºä¸çå¼éä»¥å shim-v2 å ç¨çåå­ï¼è½ç¶ç¨æ·åºç¨ä¸å¯è§ï¼ä½åæ ·æ¯ Kata å¸¦æ¥çå¼éï¼å½±ååºç¡è®¾æ½çèµæºæçã\n\nè¿äºåå­å¼ééï¼è¿åæ¬äºå¯å±äº«å¼éåä¸å¯å±äº«å¼éãææå®¿ä¸»è¿è¾¹çä»£ç æ®µåå­ï¼åªè¯»åå­ï¼ï¼å¯ä»¥å±äº« page cacheï¼æä»¥æ¯å±äº«çï¼èå¨æ²ç®±éçä»£ç ï¼åªè¯»ï¼åå­ï¼å¨ä½¿ç¨ DAX ææ¨¡ççæåµä¸ï¼ä¹å¯ä»¥å±äº«åä¸ä»½ãæä»¥ï¼å¯ä»¥å±äº«çåå­å¼éå¨èç¹å¨å±èå´åæ¯å¯ä¸ä¸ä»½ï¼æä»¥å¨æå¤ä¸ªPodçæåµä¸ï¼è¿é¨åçå¸¸æ°å¼éç¸å¯¹èè¨æ¯ä¸å¤ªéè¦çï¼ç¸åçï¼ä¸å¯å±äº«å¼éï¼å°¤å¶æ¯å åå­å¼éï¼ä¼éç Pod çå¢é¿èå¢é¿ï¼çæ¢å¥è¯è¯´ï¼å åå­ï¼å¿åé¡µï¼æ¯æéè¦è¢«éè§çå¼éã\n\nç»¼ä¸ï¼ç¬¬ä¸ä½éè¦è¢«éå¶çå¼éæ¯æ²ç®±åçç¨æ·å¯è§çä¸å¯å±äº«å¼éï¼å°¤å¶æ¯ Agent çå¼éï¼è VMM å shim çå¿åé¡µå¼éæ¬¡ä¹ã\n\n\n# ä¸æ¯æCgroups V2\n\n\n# ä¸äºéè¦ç¥éçéç½®\n\n# Default number of vCPUs per SB/VM:\n# unspecified or 0                --\x3e will be set to 1ï¼ä¸è®¾ç½®æ0åé»è®¤æ¯1ï¼\n# < 0                             --\x3e will be set to the actual number of physical cores(å°äº0åè®¾ä¸ºå®éç©çæ ¸)\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical coresï¼å¤§äºç©çæ ¸é»è®¤ä¸ºç©çæ ¸ï¼\ndefault_vcpus = 1\n\n# Default memory size in MiB for SB/VM.\n# If unspecified then it will be set 2048 MiB.ï¼ä¸è®¾ç½®é»è®¤æ¯2Giï¼\ndefault_memory = 2048\n\n# Default maximum number of vCPUs per SB/VM:\n# unspecified or == 0             --\x3e will be set to the actual number of physical cores or to the maximum numberï¼ä¸è®¾ç½®æ0é»è®¤ä¸ºæå¤§ç©çæ ¸æ°ï¼\n#                                     of vCPUs supported by KVM if that number is exceeded\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical cores or to the maximum number\n#                                     of vCPUs supported by KVM if that number is exceeded\n# WARNING: Depending of the architecture, the maximum number of vCPUs supported by KVM is used when\n# the actual number of physical cores is greater than it.\n# WARNING: Be aware that this value impacts the virtual machine\'s memory footprint and CPU\n# the hotplug functionality. For example, `default_maxvcpus = 240` specifies that until 240 vCPUs\n# can be added to a SB/VM, but the memory footprint will be big. Another example, with\n# `default_maxvcpus = 8` the memory footprint will be small, but 8 will be the maximum number of\n# vCPUs supported by the SB/VM. In general, we recommend that you do not edit this variable,\n# unless you know what are you doing.\n# NOTICE: on arm platform with gicv2 interrupt controller, set it to 8.\ndefault_maxvcpus = 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# éè¿æ³¨éä¿®æ¹éç½®ï¼\n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n runtime_type = "io.containerd.kata.v2"\n privileged_without_host_devices = false\n shim_debug = true\n pod_annotations = ["io.katacontainers.*"] #  <-- look here\n\n\n1\n2\n3\n4\n5\n\n\n> io.katacontainers.config.hypervisor.default_vcpus = 5\n\n\n# æå¼--feature-gates PodOverhead\n\n> /etc/kubernetes/manifests/kube-apiserver.yaml\n\n1.17é»è®¤å³é­ï¼1.18é»è®¤æå¼\n\n> Environment="KUBELET_FEATURE=--feature-gates=RotateKubeletServerCertificate=true,VolumeSnapshotDataSource=true,ExpandCSIVolumes=true,VolumePVCDataSource=true,ServiceTopology=true,EndpointSlice=true,PodOverhead=true"\n\n\n# å¯ç¨RuntimeClassåå¥æ§å¶\n\n> --feature-gates=VolumeSnapshotDataSource=true,ExpandCSIVolumes=true,VolumePVCDataSource=true,TTLAfterFinished=true,ServiceTopology=true,EndpointSlice=true,PodOverhead=true\n\n\n# è®¾ç½®podOverHead\n\nkind: RuntimeClass\napiVersion: node.k8s.io/v1beta1\nmetadata:\n  name: kata-containers\nhandler: kata\noverhead:\n  podFixed:\n  memory: "100Mi"\n  cpu: "100m"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-virtio-mem-with-kata.md\n\n$ sudo sed -i -e \'s/^#enable_virtio_mem.*$/enable_virtio_mem = true/g\' /etc/kata-containers/configuration.toml\n\n\n1\n\n\n\n# éä»¶\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: test-kata\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: test-kata\n  template:\n    metadata:\n      labels:\n        app: test-kata\n    spec:\n      runtimeClassName: kata-containers\n      containers:\n      - image: vish/stress\n        imagePullPolicy: IfNotPresent\n        name: cpu-stress-kata\n        resources:\n          requests:\n            memory: "1Mi"\n            cpu: "0.1"\n          limits:\n            memory: "161Mi"\n            cpu: "350m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100Mi\n        - -mem-alloc-size\n        - 10Mi\n        - -mem-alloc-sleep\n        - 1s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n',normalizedContent:'# åèï¼\n\n * host-cgroups.md\n * vcpu-handling.md\n\n\n# ç»è®º\n\n * cgroupspathçè·¯å¾æ ¹æ®qosç±»å«ä¸å\n * kata_overheadçcpuåmemæ²¡æéå¶ï¼è½ç¨å°å®¿ä¸»æºææèµæºï¼å¦æä¸å¼å¯sandbox_cgroup_onlyä¼å¯¼è´ä¸»æºèµæºè¢«æ¢å \n * kubepod cgroupéå¶=limit+overheadï¼å®¹å¨ä¸å¡è´è½½å°±æ¯å¨è¿ä¸ªéå¶ä¹åä½¿ç¨ï¼ç¶ååºåsandbox_cgroup_onlyæ¯å¦å¼å¯å³å®kata vm(sandbox)å¼éæ¯å¦ç»è®¡å°kubepodä¸­ï¼å¦ææ¯åä¸å¡ç³è¯·cpu memèµæºå°±å¿é¡»èèkata sandboxå¼é\n * èææºå¤§å°=kata vmä¸­æèè¯´podä¸­çå°çcpu memï¼lscpu lsmemï¼=default+limitï¼è§éªè¯1ï¼\n * kubectl describe node | grep test-kataçå°çèµæºç³è¯·=limit+overheadï¼åruncï¼ï¼è§éªè¯1ï¼\n * kubectl top podçå°çæ¯ä¸å¡çæ­£çè´è½½å¼éï¼ï¼\n * pod overheadä¼å½±åè°åº¦ï¼overheadåªä½ç¨äºsandboxå¼éï¼ä¸è½ä½ç¨äºä¸å¡è´è½½ï¼è§éªè¯3ï¼\n * ä¸ºäºéå¶èµæºæ¢å é®é¢ï¼å»ºè®®å¼å¯sandbox_cgroup_only=true,overheadå»ºè®®ä¸è®¾ç½®ï¼å¾å®ï¼ï¼ä»¥ä¸è¯´æåå¨sandbox_cgroup_only=trueåæä¸è¿è¡è¯´æ\n * ä¸å¡è´è½½+sandboxå¼éæå¤§è½ä½¿ç¨çèµæºéå¶=limit+overheadï¼overheadé¨ååªè½æ¯é¢å¤å¼éç¨ï¼ï¼è§éªè¯3ï¼\n * default_vcpus/memoryï¼å½±åèææºçå¤§å°/å¯å¨æ¶é´ï¼è¿ä¸ªå¼å®æ¹ä¸å»ºè®®ä¿®æ¹\n * å¦æcontaineræªè®¾ç½®limitï¼åkubepod cgroupæ éå¶ï¼ä½æ¯ä¸å¡è´è½½åªè½ä½¿ç¨defaultè®¾ç½®ç1g2g???ææªæ¾å°å¨åªåçéå¶ï¼ï¼è§éªè¯7ï¼ï¼å¦æè®¾ç½®äºlimitï¼åè¿ä¸ªdefaultååªå½±åèææºå¤§å°ï¼ä½ä¸å½±åkubepod cgroupéå¶ï¼è§éªè¯1ï¼\n * ~ä¸ä¸ªpodçæå°è§æ ¼æ¯1c 256mï¼å½ä½äº 256m æ¶ï¼ä¼éç½®ä¸º 2gãï¼æ¯æçæå¤§åå­è§æ ¼æ¯256gbãå¦æç¨æ·åéçåå­è§æ ¼è¶è¿256gbï¼å¯è½ä¼åºç°æªå®ä¹çéè¯¯ï¼å®å¨å®¹å¨æä¸æ¯æè¶è¿256gbçå¤§åå­åºæ¯ã~ï¼æªæ¾å°å®æ¹åºå¤ï¼åºè¯¥åªæ¯openeuleråé¨åçéå¶ï¼ï¼è§éªè¯5ï¼\n * å¦æä¸è®¾ç½®requestï¼årequestçå¼ålimité»è®¤ç¸ç­\n\n\n# ä¸äºéªè¯\n\n\n# éªè¯1ï¼ æ¥çcgroupå¤§å°\n\ncpu.cfs_period_usæ¯cfsç®æ³çä¸ä¸ªè°åº¦å¨æï¼ä¸è¬å®çå¼æ¯100000usï¼å³100msã cpu.cfs_quota_usè¡¨ç¤ºå¨cfsç®æ³ä¸­ï¼å¨ä¸ä¸ªè°åº¦å¨æéè¯¥æ§å¶ç»è¢«åè®¸çè¿è¡æ¶é´ï¼æ¯å¦è¿ä¸ªå¼ä¸º50000æ¶ï¼å°±æ¯50msãç¨è¿ä¸ªå¼å»é¤ä»¥è°åº¦å¨æcpu.cfs_period_usï¼å³50ms/100ms=0.5ï¼å¾å°çå¼è¡¨ç¤ºè¯¥æ§å¶ç»è¢«åè®¸ä½¿ç¨çcpuæå¤§éé¢æ¯0.5ä¸ªcpuãå¨æçç³»ç»éï¼è¿ä¸ªå¼æ¯-1ï¼ä¸ºé»è®¤å¼ï¼è¡¨ç¤ºä¸éå¶ã\n\ndefault_vcpu=1 default_memory=2gi overhead: "podfixed":{"cpu":"250m","memory":"160mi"} pod qos: resources: requests: memory: "500mi" cpu: "0.5" limits: memory: "3000mi" cpu: "4"\n\n\n# sandbox_cgroup_only=true\n\n"cgroupspath": "/kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼ kubepods_mem: 3313500160 (~3.08g) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\nlscpu: 5 (default+limit) lsmemï¼ memory block size: 128m memory block size: 128m total online memory: 5g (default+limit)\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660mi (10%) 3160mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1mi kubectl top nodeï¼ 1306m 16% 5513mi 84%\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 27.4m - - [root@localhost ~]# systemd-cgtop | grep pod287707dd-0fda-4fab-874d-e1b00e87390a /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a - - 193.4m - -\n\n\n# sandbox_cgroup_only=falseï¼ç»æå=trueï¼\n\n"cgroupspath": "/kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44/87b5990ce61e4ff193124fc60e4a68c7061cf9299688c6c521cae29103bc3ef5",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 3313500160 (~3.08g) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 24.6m - - [root@localhost ~]# systemd-cgtop | grep pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 /kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 - - 151.7m - -\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660mi (10%) 3160mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1mi kubectl top nodeï¼ 1330m 17% 5507mi 84%\n\n\n# æ¥çå½ä»¤ï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     4.9m        -        -\n/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6       7      -   132.9m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    23.2m        -        -\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kata_overhead/memory.limit_in_bytes\n9223372036854771712\n[root@localhost ~]#  cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_quota_us\n-1\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/memory.limit_in_bytes\n1241513984\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_quota_us\n125000\n\n[root@localhost ~]#  cat /sys/fs/cgroup/memory/system.slice/kata-monitor.service/memory.limit_in_bytes\n9223372036854771712\n\n[root@localhost ~]# kubectl top pod test-kata\nname        cpu(cores)   memory(bytes)\ntest-kata   0m           2mi\n[root@localhost ~]# kubectl top node\nname                    cpu(cores)   cpu%   memory(bytes)   memory%\nlocalhost.localdomain   355m         4%     5469mi          83%\n\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184mi (18%)     1184mi (18%)   16d\n  kube-system                 kata-deploy-q2cnv                                        0 (0%)        0 (0%)       0 (0%)           0 (0%)         21d\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\n\n# éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç\n\n"cgroupspath": "/kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f/367368f8f5c44bc69b277febfa5d533063f096c65cd9b6729bbc7847a582f51f",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 9223372036854771712 ~8gï¼ä¸éï¼ kubepods_cpu cfs_period_us cfs_quota_us: 100000 -1 ä¸é kubectl top podï¼ 1000m 0mi kubectl top nodeï¼ 1316m 16% 5517mi 84%\n\n[root@localhost hff]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 25.1m - -\n\n[root@localhost hff]# systemd-cgtop | grep pod09a392bc-1080-4044-8015-39f392e3862f /kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f - - 95.8m - -\n\nkubectl describe node | grep test-kataï¼ 250m (3%)ï¼overheadï¼ 0 (0%) 160mi (2%)ï¼overheadï¼ 0 (0%) 6m30s\n\nkubepodä¸éå¶ï¼ä½æ¯podç¡®å®åªè½ç¨å°limitçå¼\n\n\n# éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½\n\nè®¾ç½®overhead 2c 2gåï¼limit 3c3g, ææ»¡cpu=6,mem=3gi\n\n[root@localhost hff]# kubectl get pod\nname                              ready   status        restarts   age\ntest-kata-5687cdcb66-28lgn        0/1     outofmemory   0          17s\ntest-kata-5687cdcb66-2lmd5        0/1     outofmemory   0          11s\ntest-kata-5687cdcb66-2pbhm        0/1     outofmemory   0          23s\ntest-kata-5687cdcb66-575sb        0/1     outofmemory   0          19s\ntest-kata-5687cdcb66-5gvt2        0/1     outofmemory   0          5s\ntest-kata-5687cdcb66-62fbd        0/1     outofmemory   0          33s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿\n\nè®¾ç½®overhead 2c 2gåï¼limitä¸è®¾ç½®ï¼ ææ»¡cpu=6,mem=1gi\n\n[root@localhost hff]# kubectl get pod  -w\nname                              ready   status        restarts   age\ntest-kata-55867ffb58-26ndp        0/1     outofmemory   0          4s\ntest-kata-55867ffb58-2blnx        0/1     outofmemory   0          2s\ntest-kata-55867ffb58-2d858        0/1     outofmemory   0          1s\ntest-kata-55867ffb58-2qwzf        0/1     pending       0          0s\ntest-kata-55867ffb58-4j4hl        0/1     outofmemory   0          1s\ntest-kata-55867ffb58-8zzbc        0/1     outofmemory   0          2s\ntest-kata-55867ffb58-crflb        0/1     outofmemory   0          4s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éªè¯5ï¼ éªè¯cpu memå°äº1c 256miçæåµï¼no overheadï¼\n\n    resources:\n      requests:\n        memory: "1mi"\n        cpu: "0.1"\n      limits:\n        memory: "100mi"\n        cpu: "550m"\n    args:\n    - -cpus\n    - "2"\n    - -mem-total\n    - 100mi\n    - -mem-alloc-size\n    - 10mi\n    - -mem-alloc-sleep\n    - 1s\n\n\næ²¡æoomï¼ä½æ¯podä¸æ­éå¯ï¼ææå¹¶æ²¡æè¢«éç½®æ2g\n\n[root@localhost hff]# kubectl get pod -w\nname                              ready   status    restarts   age\nkubefilebrowser-896974bcc-z6scd   1/1     running   3          31d\ntest-kata-6878f4fd9f-76c5k        1/1     running   2          61s\ntest-runc-79d8bdc4cb-v6j28        1/1     running   0          75m\ntest-kata-6878f4fd9f-76c5k        0/1     error     2          72s\ntest-kata-6878f4fd9f-76c5k        0/1     crashloopbackoff   2          75s\n\n[root@localhost hff]# kubectl logs test-kata-6878f4fd9f-76c5k\ni0527 07:16:06.932758       1 main.go:26] allocating "200mi" memory, in "10mi" chunks, with a 1s sleep between allocations\ni0527 07:16:06.933058       1 main.go:39] spawning a thread to consume cpu\ni0527 07:16:06.933082       1 main.go:39] spawning a thread to consume cpu\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# éªè¯6ï¼ æå°èµæºå ç¨æµè¯\n\nlimit550m/200miï¼å2c100miï¼podä¼ä¸æ­éå¯ï¼ä½æ¯ä¸æ¯oomkilled\n\n        resources:\n          requests:\n            memory: "1mi"\n            cpu: "0.1"\n          limits:\n            memory: "200mi"\n            cpu: "550m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100mi\n        - -mem-alloc-size\n        - 10mi\n        - -mem-alloc-sleep\n        - 1s\nevents:\n  type     reason          age                   from                            message\n  ----     ------          ----                  ----                            -------\n  normal   scheduled       <unknown>             default-scheduler               successfully assigned default/test-kata-68b77bc9f8-zlj5p to localhost.localdomain\n  normal   created         36m (x4 over 38m)     kubelet, localhost.localdomain  created container cpu-stress-kata\n  normal   started         36m (x4 over 38m)     kubelet, localhost.localdomain  started container cpu-stress-kata\n  normal   sandboxchanged  35m (x4 over 37m)     kubelet, localhost.localdomain  pod sandbox changed, it will be killed and re-created.\n  normal   pulled          7m53s (x11 over 38m)  kubelet, localhost.localdomain  container image "vish/stress" already present on machine\n  warning  backoff         3m5s (x159 over 37m)  kubelet, localhost.localdomain  back-off restarting failed container\n[root@localhost hff]#\n[root@localhost hff]# kubectl logs test-kata-68b77bc9f8-zlj5p\ni0527 08:13:52.926368       1 main.go:26] allocating "100mi" memory, in "10mi" chunks, with a 1s sleep between allocations\ni0527 08:13:52.926544       1 main.go:39] spawning a thread to consume cpu\ni0527 08:13:52.926570       1 main.go:39] spawning a thread to consume cpu\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# éªè¯7ï¼ æ¥çkata vmä¸­çcgroup\n\nä¸è®¾ç½®limitï¼overhead\n\nbash-5.1# more /sys/fs/cgroup/memory/\ncgroup.clone_children               memory.max_usage_in_bytes\ncgroup.event_control                memory.memsw.failcnt\ncgroup.procs                        memory.memsw.limit_in_bytes\ncgroup.sane_behavior                memory.memsw.max_usage_in_bytes\nkubepods/                           memory.memsw.usage_in_bytes\nmemory.failcnt                      memory.move_charge_at_immigrate\nmemory.force_empty                  memory.oom_control\nmemory.kmem.failcnt                 memory.pressure_level\nmemory.kmem.limit_in_bytes          memory.soft_limit_in_bytes\nmemory.kmem.max_usage_in_bytes      memory.stat\nmemory.kmem.slabinfo                memory.swappiness\nmemory.kmem.tcp.failcnt             memory.usage_in_bytes\nmemory.kmem.tcp.limit_in_bytes      memory.use_hierarchy\nmemory.kmem.tcp.max_usage_in_bytes  notify_on_release\nmemory.kmem.tcp.usage_in_bytes      release_agent\nmemory.kmem.usage_in_bytes          system.slice/\nmemory.limit_in_bytes               tasks\nbash-5.1# more /sys/fs/cgroup/memory/kubepods/\nbesteffort/                         memory.max_usage_in_bytes\ncgroup.clone_children               memory.memsw.failcnt\ncgroup.event_control                memory.memsw.limit_in_bytes\ncgroup.procs                        memory.memsw.max_usage_in_bytes\nmemory.failcnt                      memory.memsw.usage_in_bytes\nmemory.force_empty                  memory.move_charge_at_immigrate\nmemory.kmem.failcnt                 memory.oom_control\nmemory.kmem.limit_in_bytes          memory.pressure_level\nmemory.kmem.max_usage_in_bytes      memory.soft_limit_in_bytes\nmemory.kmem.slabinfo                memory.stat\nmemory.kmem.tcp.failcnt             memory.swappiness\nmemory.kmem.tcp.limit_in_bytes      memory.usage_in_bytes\nmemory.kmem.tcp.max_usage_in_bytes  memory.use_hierarchy\nmemory.kmem.tcp.usage_in_bytes      notify_on_release\nmemory.kmem.usage_in_bytes          tasks\nmemory.limit_in_bytes\nbash-5.1# more /sys/fs/cgroup/cpu/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/f3cffcf893000b0c5f6105f1adb94e3be7fa62ebecd801a29b9a77a472d62c86/cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/memory/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/.limit_in_bytes\n9223372036854771712\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\næªæ¾å°default_vcpu/memoryæ¯å¨åªéåçéå¶\n\n\n# kata cgroupè¯´æ\n\nkata containers å¨ä¸¤å± cgroup ä¸è¿è¡ã\n\n * workload guest\n * vmm host ï¼kata containers å¨ä¸¤å± cgroup ä¸è¿è¡ãç¬¬ä¸å±å¨èææºä¸­æ¾ç½®å·¥ä½è´è½½ï¼èç¬¬äºå±å¨ä¸»æºä¸è¿è¡ vmmå å³èçº¿ç¨ãï¼\n\nä» kubernetes è§åº¦æ¥è®²ï¼cgroup æçæ¯ pod cgroupï¼ç± kubelet åå»ºï¼éå¶çæ¯ pod çèµæº; ä» container è§åº¦æ¥è®²ï¼cgroup æçæ¯ container cgroupï¼ç±å¯¹åºç runtime åå»ºï¼éå¶çæ¯ container çèµæºãä½æ¯ä¸ºäºå¯ä»¥è·åå°æ´åç¡®çå®¹å¨èµæºï¼kubelet ä¼æ ¹æ® container cgroup å»è°æ´ pod cgroupã å¨ä¼ ç»ç runtime ä¸­ï¼ä¸¤èæ²¡æå¤ªå¤§çåºå«ã\n\nè kata containers å¼å¥ vm çæ¦å¿µï¼æä»¥éå¯¹è¿ç§æåµæä¸¤ç§å¤çæ¹å¼ï¼\n\n * å¯ç¨ sandboxcgrouponlyï¼é»è®¤ï¼ï¼kubelet å¨è°æ´ pod cgroup çå¤§å°æ¶ï¼ä¼å° sandbox çå¼éç»è®¡è¿å» ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½åkataèææºå¼éçæå¤§ä½¿ç¨éå¶ï¼å¦æä¸è®¾ç½®limitï¼é»è®¤æ¯default_vcpus/mem??ï¼\n * ç¦ç¨ sandboxcgrouponlyï¼sandbox çå¼éå pod cgroup åå¼è®¡ç®ï¼ç¬ç«å­å¨ ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½èªå·±çæå¤§ä½¿ç¨éå¶ï¼kataèææºå¼éåç¬ä¸ä¸ªcgroupèä¸æ²¡æéå¶ï¼å¦æä¸è®¾ç½®limitï¼ä¸å¡ä½¿ç¨é»è®¤æ¯default_vcpus/memï¼\n\n\n# ä¸¤ç§cgrouppath:\n\n * /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f ()\n * /kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6 ()\n\n\n# pod overhead\n\n\n# sandbox_cgroup_only\n\n * å¦æå¯ç¨ï¼è¿è¡æ¶å°å¨ä¸ä¸ªä¸ç¨cgroupä¸­æ·»å æækataè¿ç¨ãæ¯ä¸ªæ²çåªåå»ºä¸ä¸ªcgroupï¼ä¸»æºä¸­çcontainer cgroupå°ä¸ä¼åå»º\n * kata runtimeè°ç¨èå¯ä»¥èªç±å°éå¶ææ¶éæ´ä¸ªkataæ²ççcgroupç»è®¡ä¿¡æ¯ã\n * sandbox cgroupè·¯å¾æ¯å·æpodsandbox annotation(???)çå®¹å¨çç¶cgroupã\n * å¦ææ²¡æcontainer type annotation(??)ï¼åsandbox cgroupå°åå°éå¶\n * æå³ç pod cgroup çå¤§å°éå½ï¼å¹¶èèäº pod å¼éï¼è®¾ç½®podoverheadèèè°åº¦ï¼\n * kata shim å°å¨sandbox_cgroup_onlypod çä¸ç¨ cgroup ä¸ä¸ºæ¯ä¸ª pod åå»ºä¸ä¸ªå­ cgroup\n * kata shimãqemu çº¿ç¨å°ä¸æ²ç®±å¨åä¸ä¸ª cgroup ä¸­ãå¨è¿ç§æåµä¸ï¼å®ä»¬å°ä¸ vcpu çº¿ç¨å±äº«åä¸ç» cpu åæ ¸\n\n=trueå¥½å¤ï¼\n\n * ä¾¿äºpodèµæºç»è®¡\n * æ´å¥½çä¸»æºèµæºéç¦»\n\n=fasleä¼ç¹åç¼ºç¹ï¼\n\n * ä¸éå¶ä¼æ¶èå¤§éä¸»æºèµæº\n * å¨ä¸ç¨å¼écgroupä¸è¿è¡ææévcpuçº¿ç¨å¯ä»¥æä¾æå³å®éçå¼éåç¡®å¼ï¼å¯ä»¥è®¾ç½®å¼écgroupå¤§å°ï¼æå¨ä¿®æ¹ï¼æ æ¥å£ï¼\n\n\n# default_vcpus/memory\n\n\n# kataèµæºå¼é\n\n * åèæå i/o åç«¯\n * vmm å®ä¾\n * kata shim è¿ç¨\n * kata monitorå¼éï¼å¦æå¼å¯ï¼\n\n\n# kataç»ä»¶è¿ç¨ï¼\n\n * sandbox qemu-system-x86_64è¿ç¨cgroup\n * containerd-shim-kata-v2è¿ç¨\n * ä¸¤ä¸ªvirtiofsdè¿ç¨\n\nkata podèµ·æ¥åï¼å¶ä¸­ï¼kata shimè¿ç¨åqemuè¿ç¨å ç¨äºå¤§éçåå­å¼éï¼å¶ä¸­ï¼æ²ç®±éçåæ ¸å agent æ¯ç´æ¥åäº«äºåºç¨åå­ä½å¹¶ä¸æ¯åºç¨çä¸é¨åï¼ä¹å°±æ¯è¯´ï¼è¿ä¸é¨åæ¯ç¨æ·å¯è§çå¼éãè vmm æ¬èº«å¨å®¿ä¸»æºä¸çå¼éä»¥å shim-v2 å ç¨çåå­ï¼è½ç¶ç¨æ·åºç¨ä¸å¯è§ï¼ä½åæ ·æ¯ kata å¸¦æ¥çå¼éï¼å½±ååºç¡è®¾æ½çèµæºæçã\n\nè¿äºåå­å¼ééï¼è¿åæ¬äºå¯å±äº«å¼éåä¸å¯å±äº«å¼éãææå®¿ä¸»è¿è¾¹çä»£ç æ®µåå­ï¼åªè¯»åå­ï¼ï¼å¯ä»¥å±äº« page cacheï¼æä»¥æ¯å±äº«çï¼èå¨æ²ç®±éçä»£ç ï¼åªè¯»ï¼åå­ï¼å¨ä½¿ç¨ dax ææ¨¡ççæåµä¸ï¼ä¹å¯ä»¥å±äº«åä¸ä»½ãæä»¥ï¼å¯ä»¥å±äº«çåå­å¼éå¨èç¹å¨å±èå´åæ¯å¯ä¸ä¸ä»½ï¼æä»¥å¨æå¤ä¸ªpodçæåµä¸ï¼è¿é¨åçå¸¸æ°å¼éç¸å¯¹èè¨æ¯ä¸å¤ªéè¦çï¼ç¸åçï¼ä¸å¯å±äº«å¼éï¼å°¤å¶æ¯å åå­å¼éï¼ä¼éç pod çå¢é¿èå¢é¿ï¼çæ¢å¥è¯è¯´ï¼å åå­ï¼å¿åé¡µï¼æ¯æéè¦è¢«éè§çå¼éã\n\nç»¼ä¸ï¼ç¬¬ä¸ä½éè¦è¢«éå¶çå¼éæ¯æ²ç®±åçç¨æ·å¯è§çä¸å¯å±äº«å¼éï¼å°¤å¶æ¯ agent çå¼éï¼è vmm å shim çå¿åé¡µå¼éæ¬¡ä¹ã\n\n\n# ä¸æ¯æcgroups v2\n\n\n# ä¸äºéè¦ç¥éçéç½®\n\n# default number of vcpus per sb/vm:\n# unspecified or 0                --\x3e will be set to 1ï¼ä¸è®¾ç½®æ0åé»è®¤æ¯1ï¼\n# < 0                             --\x3e will be set to the actual number of physical cores(å°äº0åè®¾ä¸ºå®éç©çæ ¸)\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical coresï¼å¤§äºç©çæ ¸é»è®¤ä¸ºç©çæ ¸ï¼\ndefault_vcpus = 1\n\n# default memory size in mib for sb/vm.\n# if unspecified then it will be set 2048 mib.ï¼ä¸è®¾ç½®é»è®¤æ¯2giï¼\ndefault_memory = 2048\n\n# default maximum number of vcpus per sb/vm:\n# unspecified or == 0             --\x3e will be set to the actual number of physical cores or to the maximum numberï¼ä¸è®¾ç½®æ0é»è®¤ä¸ºæå¤§ç©çæ ¸æ°ï¼\n#                                     of vcpus supported by kvm if that number is exceeded\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical cores or to the maximum number\n#                                     of vcpus supported by kvm if that number is exceeded\n# warning: depending of the architecture, the maximum number of vcpus supported by kvm is used when\n# the actual number of physical cores is greater than it.\n# warning: be aware that this value impacts the virtual machine\'s memory footprint and cpu\n# the hotplug functionality. for example, `default_maxvcpus = 240` specifies that until 240 vcpus\n# can be added to a sb/vm, but the memory footprint will be big. another example, with\n# `default_maxvcpus = 8` the memory footprint will be small, but 8 will be the maximum number of\n# vcpus supported by the sb/vm. in general, we recommend that you do not edit this variable,\n# unless you know what are you doing.\n# notice: on arm platform with gicv2 interrupt controller, set it to 8.\ndefault_maxvcpus = 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# éè¿æ³¨éä¿®æ¹éç½®ï¼\n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n runtime_type = "io.containerd.kata.v2"\n privileged_without_host_devices = false\n shim_debug = true\n pod_annotations = ["io.katacontainers.*"] #  <-- look here\n\n\n1\n2\n3\n4\n5\n\n\n> io.katacontainers.config.hypervisor.default_vcpus = 5\n\n\n# æå¼--feature-gates podoverhead\n\n> /etc/kubernetes/manifests/kube-apiserver.yaml\n\n1.17é»è®¤å³é­ï¼1.18é»è®¤æå¼\n\n> environment="kubelet_feature=--feature-gates=rotatekubeletservercertificate=true,volumesnapshotdatasource=true,expandcsivolumes=true,volumepvcdatasource=true,servicetopology=true,endpointslice=true,podoverhead=true"\n\n\n# å¯ç¨runtimeclassåå¥æ§å¶\n\n> --feature-gates=volumesnapshotdatasource=true,expandcsivolumes=true,volumepvcdatasource=true,ttlafterfinished=true,servicetopology=true,endpointslice=true,podoverhead=true\n\n\n# è®¾ç½®podoverhead\n\nkind: runtimeclass\napiversion: node.k8s.io/v1beta1\nmetadata:\n  name: kata-containers\nhandler: kata\noverhead:\n  podfixed:\n  memory: "100mi"\n  cpu: "100m"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# virtio-memåå­ç­ææï¼ä»æ¯æqemuï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-virtio-mem-with-kata.md\n\n$ sudo sed -i -e \'s/^#enable_virtio_mem.*$/enable_virtio_mem = true/g\' /etc/kata-containers/configuration.toml\n\n\n1\n\n\n\n# éä»¶\n\n---\napiversion: apps/v1\nkind: deployment\nmetadata:\n  name: test-kata\nspec:\n  replicas: 1\n  selector:\n    matchlabels:\n      app: test-kata\n  template:\n    metadata:\n      labels:\n        app: test-kata\n    spec:\n      runtimeclassname: kata-containers\n      containers:\n      - image: vish/stress\n        imagepullpolicy: ifnotpresent\n        name: cpu-stress-kata\n        resources:\n          requests:\n            memory: "1mi"\n            cpu: "0.1"\n          limits:\n            memory: "161mi"\n            cpu: "350m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100mi\n        - -mem-alloc-size\n        - 10mi\n        - -mem-alloc-sleep\n        - 1s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"guest kernelåguestos",frontmatter:{title:"guest kernelåguestos",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata4/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã",meta:[{name:"twitter:title",content:"guest kernelåguestos"},{name:"twitter:description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html"},{property:"og:type",content:"article"},{property:"og:title",content:"guest kernelåguestos"},{property:"og:description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"guest kernelåguestos"},{itemprop:"description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/04.guest kernelåguestos.md",key:"v-e15ee02a",path:"/pages/kata4/",headers:[{level:2,title:"image type(rootfs)",slug:"image-type-rootfs",normalizedTitle:"image type(rootfs)",charIndex:821},{level:2,title:"initrd type",slug:"initrd-type",normalizedTitle:"initrd type",charIndex:943},{level:2,title:"ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼",slug:"ä½¿ç¨-kata-éç½®æä»¶configuration-toml-å¨å±",normalizedTitle:"ä½¿ç¨ kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼",charIndex:2209},{level:2,title:"ä½¿ç¨æ³¨é",slug:"ä½¿ç¨æ³¨é",normalizedTitle:"ä½¿ç¨æ³¨é",charIndex:2338}],headersStr:"image type(rootfs) initrd type ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼ ä½¿ç¨æ³¨é",content:'ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã\n\n\n# éç½®\n\n[hypervisor.qemu]\npath = "/opt/kata/bin/qemu-system-x86_64"\nkernel = "/opt/kata/share/kata-containers/vmlinux.container"\nimage = "/opt/kata/share/kata-containers/kata-containers.img"\nmachine_type = "q35"\n[Kernel]\n Path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n Parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n [Image]\n Path = "/opt/kata/share/kata-containers/kata-clearlinux-latest.image"\n [Initrd]\n Path = ""\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# Guest kernel\n\nç¨äºå¯å¨VMãKata-containeré«åº¦ä¼åäºåæ ¸å¯å¨æ¶é´åæå°çåå­å ç¨ï¼åªç¨äºä¸ä¸ªå®¹å¨çè¿è¡ã\n\n\n# Guest image\n\næ¯æåºäºinitrdårootfs(image)çæå°éåï¼é»è®¤åä¸­æä¾ä¸ä¸ªéååä¸ä¸ªinitrdï¼ä»ä»¬é½æ¯éè¿osbuilderçæçã\n\n\n# image type(rootfs)\n\né»è®¤ç root filesystem image (ææ¶ç§°ä¸ºmini O/S)æ¯ä¸ä¸ªåºäº Clear Linux çé«åº¦ä¼åçå®¹å¨å¼å¯¼ç³»ç»ãå®æä¾äºä¸ä¸ªæå°çç¯å¢ï¼å¹¶æä¸ä¸ªé«åº¦ä¼åçå¼å¯¼è·¯å¾ã\n\n\n# initrd type\n\nåç¼©ç cpio(1) æä»¶ï¼ä» rootfs ï¼è¢«è½½å¥åå­å¹¶ä½ä¸º linux å¯å¨è¿ç¨çä¸é¨åè¢«ä½¿ç¨ï¼åå»ºã\n\nKata è¿è¡æ¶éç½®æä»¶ä¸­çinitrdåimageéé¡¹ä¹ä¸å¿é¡»è®¾ç½®ï¼ä½ä¸è½åæ¶è®¾ç½®ãéé¡¹ä¹é´çä¸»è¦åºå«å¨äºinitrd(10MB+) çå¤§å°ææ¾å°äº rootfs image(100MB+)ã\n\néè¿initrd=åimage=éç½®å³å®ä½¿ç¨åªä¸ä¸ªç±»å\n\n\n# æå°éåæåº¦ç®å\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n\n# åæ ¸æå»ºbuild-kernel.sh\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/packaging/kernel\n\nä¾å­ï¼\n\n$ ./build-kernel.sh -v 5.10.25 -g nvidia -f -d setup\nÂ· -v 5.10.25ï¼æå®æ¥å®¾åæ ¸çæ¬ã\nÂ· -g nvidia: æå»ºä¸ä¸ªæ¯æ Nvidia GPU çæ¥å®¾åæ ¸ã\nÂ· -f:.configå³ä½¿åæ ¸ç®å½å·²ç»å­å¨ä¹å¼ºå¶çææä»¶ã\nÂ· -d: å¯ç¨ bash è°è¯æ¨¡å¼ã\n\n\n1\n2\n3\n4\n5\n\n\næ·»å è¡¥ä¸ï¼${GOPATH}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/patches/\n\nåæ ¸éç½®ï¼${GOPATH}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/configs/\n\n\n# osbuilder\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/osbuilder\n\n\n# ä¿®æ¹åæ ¸åæ°\n\n[Kernel]\n Path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n Parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n\n\n1\n2\n3\n\n\n\n# å è½½åæ ¸æ¨¡å\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-load-kernel-modules-with-kata.md\n\n\n# ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼\n\n> \n\nkernel_modules =[ â e1000e InterruptThrottleRate=3000,3000,3000 EEE=1 â , â i915 â ]\n\n\n# ä½¿ç¨æ³¨é\n\nannotations:\n  io.katacontainers.config.agent.kernel_modules: "e1000e EEE=1; i915"spec:\n\n\n1\n2\n\n\n\n# ä½¿ç¨ Kata è®¾ç½®sysctl\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-sysctls-with-kata.md\n\nsysctl ä½¿ç¨ pod ç securityContext å¨ pod ä¸è®¾ç½®ãsecurityContext éç¨äºåä¸ pod ä¸­çææå®¹å¨ã\n\napiVersion: v1kind: Podmetadata:\nname: sysctl-examplespec:\nsecurityContext:\n  sysctls:\n   - name: kernel.shm_rmid_forced\n     value: "0"\n   - name: net.ipv4.route.min_pmtu\n     value: "552"\n   - name: kernel.msgmax\n     value: "65536"\n ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nææå®å¨sysctlsé»è®¤è¢«å¼å¯\n\nä½¿ç¨ä¸å®å¨ç sysctlsï¼éç¾¤ç®¡çåéè¦åè®¸è¿äºï¼\n\n$ kubelet --allowed-unsafe-sysctls \'kernel.msg*,net.ipv4.route.min_pmtu\' ...\n\n\n1\n',normalizedContent:'ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã\n\n\n# éç½®\n\n[hypervisor.qemu]\npath = "/opt/kata/bin/qemu-system-x86_64"\nkernel = "/opt/kata/share/kata-containers/vmlinux.container"\nimage = "/opt/kata/share/kata-containers/kata-containers.img"\nmachine_type = "q35"\n[kernel]\n path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n [image]\n path = "/opt/kata/share/kata-containers/kata-clearlinux-latest.image"\n [initrd]\n path = ""\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# guest kernel\n\nç¨äºå¯å¨vmãkata-containeré«åº¦ä¼åäºåæ ¸å¯å¨æ¶é´åæå°çåå­å ç¨ï¼åªç¨äºä¸ä¸ªå®¹å¨çè¿è¡ã\n\n\n# guest image\n\næ¯æåºäºinitrdårootfs(image)çæå°éåï¼é»è®¤åä¸­æä¾ä¸ä¸ªéååä¸ä¸ªinitrdï¼ä»ä»¬é½æ¯éè¿osbuilderçæçã\n\n\n# image type(rootfs)\n\né»è®¤ç root filesystem image (ææ¶ç§°ä¸ºmini o/s)æ¯ä¸ä¸ªåºäº clear linux çé«åº¦ä¼åçå®¹å¨å¼å¯¼ç³»ç»ãå®æä¾äºä¸ä¸ªæå°çç¯å¢ï¼å¹¶æä¸ä¸ªé«åº¦ä¼åçå¼å¯¼è·¯å¾ã\n\n\n# initrd type\n\nåç¼©ç cpio(1) æä»¶ï¼ä» rootfs ï¼è¢«è½½å¥åå­å¹¶ä½ä¸º linux å¯å¨è¿ç¨çä¸é¨åè¢«ä½¿ç¨ï¼åå»ºã\n\nkata è¿è¡æ¶éç½®æä»¶ä¸­çinitrdåimageéé¡¹ä¹ä¸å¿é¡»è®¾ç½®ï¼ä½ä¸è½åæ¶è®¾ç½®ãéé¡¹ä¹é´çä¸»è¦åºå«å¨äºinitrd(10mb+) çå¤§å°ææ¾å°äº rootfs image(100mb+)ã\n\néè¿initrd=åimage=éç½®å³å®ä½¿ç¨åªä¸ä¸ªç±»å\n\n\n# æå°éåæåº¦ç®å\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n\n# åæ ¸æå»ºbuild-kernel.sh\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/packaging/kernel\n\nä¾å­ï¼\n\n$ ./build-kernel.sh -v 5.10.25 -g nvidia -f -d setup\nÂ· -v 5.10.25ï¼æå®æ¥å®¾åæ ¸çæ¬ã\nÂ· -g nvidia: æå»ºä¸ä¸ªæ¯æ nvidia gpu çæ¥å®¾åæ ¸ã\nÂ· -f:.configå³ä½¿åæ ¸ç®å½å·²ç»å­å¨ä¹å¼ºå¶çææä»¶ã\nÂ· -d: å¯ç¨ bash è°è¯æ¨¡å¼ã\n\n\n1\n2\n3\n4\n5\n\n\næ·»å è¡¥ä¸ï¼${gopath}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/patches/\n\nåæ ¸éç½®ï¼${gopath}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/configs/\n\n\n# osbuilder\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/osbuilder\n\n\n# ä¿®æ¹åæ ¸åæ°\n\n[kernel]\n path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n\n\n1\n2\n3\n\n\n\n# å è½½åæ ¸æ¨¡å\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-load-kernel-modules-with-kata.md\n\n\n# ä½¿ç¨ kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼\n\n> \n\nkernel_modules =[ â e1000e interruptthrottlerate=3000,3000,3000 eee=1 â , â i915 â ]\n\n\n# ä½¿ç¨æ³¨é\n\nannotations:\n  io.katacontainers.config.agent.kernel_modules: "e1000e eee=1; i915"spec:\n\n\n1\n2\n\n\n\n# ä½¿ç¨ kata è®¾ç½®sysctl\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-sysctls-with-kata.md\n\nsysctl ä½¿ç¨ pod ç securitycontext å¨ pod ä¸è®¾ç½®ãsecuritycontext éç¨äºåä¸ pod ä¸­çææå®¹å¨ã\n\napiversion: v1kind: podmetadata:\nname: sysctl-examplespec:\nsecuritycontext:\n  sysctls:\n   - name: kernel.shm_rmid_forced\n     value: "0"\n   - name: net.ipv4.route.min_pmtu\n     value: "552"\n   - name: kernel.msgmax\n     value: "65536"\n ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nææå®å¨sysctlsé»è®¤è¢«å¼å¯\n\nä½¿ç¨ä¸å®å¨ç sysctlsï¼éç¾¤ç®¡çåéè¦åè®¸è¿äºï¼\n\n$ kubelet --allowed-unsafe-sysctls \'kernel.msg*,net.ipv4.route.min_pmtu\' ...\n\n\n1\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kataä½¿ç¨éå¶",frontmatter:{title:"kataä½¿ç¨éå¶",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata6/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kataä½¿ç¨éå¶"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataä½¿ç¨éå¶"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataä½¿ç¨éå¶"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.md",key:"v-3a4f35cc",path:"/pages/kata6/",headers:[{level:2,title:"CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman",slug:"cliå½ä»¤-ä¸æ¯ædockeråpodman",normalizedTitle:"cliå½ä»¤ï¼ä¸æ¯ædockeråpodman",charIndex:358},{level:2,title:"runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate",slug:"runtimeå½ä»¤-ä¸æ¯æcheckpointãrestoreãevents-ãupdate",normalizedTitle:"runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate",charIndex:415},{level:2,title:"ç½ç»ï¼æªååº",slug:"ç½ç»-æªååº",normalizedTitle:"ç½ç»ï¼æªååº",charIndex:466},{level:2,title:"èµæºç®¡ç",slug:"èµæºç®¡ç",normalizedTitle:"èµæºç®¡ç",charIndex:477},{level:3,title:"docker ç--cpu",slug:"docker-ç-cpu",normalizedTitle:"docker ç--cpu",charIndex:539},{level:3,title:"vcpus",slug:"vcpus",normalizedTitle:"vcpus",charIndex:557},{level:2,title:"æ¶æéå¶",slug:"æ¶æéå¶",normalizedTitle:"æ¶æéå¶",charIndex:567},{level:3,title:"å­å¨éå¶subPaths",slug:"å­å¨éå¶subpaths",normalizedTitle:"å­å¨éå¶subpaths",charIndex:576},{level:3,title:"ä¸»æºèµæºå±äº«:securityContext privileged",slug:"ä¸»æºèµæºå±äº«-securitycontext-privileged",normalizedTitle:"ä¸»æºèµæºå±äº«:securitycontext privileged",charIndex:593},{level:2,title:"éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­",slug:"éè¿guest-kernelåæ°è®¾ç½®éå¶kata-vm-å¦sysctlåæ°ç­",normalizedTitle:"éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­",charIndex:734},{level:2,title:"éå¶kata container",slug:"éå¶kata-container",normalizedTitle:"éå¶kata container",charIndex:777},{level:2,title:"éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",slug:"éè¿ä¸»æºçº§çº¦æéå¶hypervisor-è®¾ç½®hypervisoråæ°",normalizedTitle:"éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",charIndex:798}],headersStr:"CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate ç½ç»ï¼æªååº èµæºç®¡ç docker ç--cpu vcpus æ¶æéå¶ å­å¨éå¶subPaths ä¸»æºèµæºå±äº«:securityContext privileged éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­ éå¶kata container éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md\n\nkataå¨ç¡¬ä»¶éç¦»çèææºä¸­è¿è¡å®¹å¨ï¼æ¯ä¸ªvmé½æç¬ç«çåæ ¸ï¼ç±äºè¿ç§é«ç¨åº¦çéç¦»ï¼æäºå®¹å¨åè½æ æ³å¯ç¨ï¼æèéè¿vméå¼å¯ç¨ã\n\nOCI è§èå®ä¹äºè¿è¡æ¶å¿é¡»æ¯æçæä½è§èï¼ä»¥ä¾¿ä¸ Docker ç­å®¹å¨ç®¡çå¨è¿è¡äºæä½ãå¦æè¿è¡æ¶ä¸æ¯æ OCI è§èçæäºæ¹é¢ï¼åæ ¹æ®å®ä¹å®æ¯ä¸ä¸ªéå¶ã\n\nä½æ¯ï¼runcå¹¶ä¸å®å¨ç¬¦å OCI è§èæ¬èº«ã\n\nä»¥ä¸æ¯ç¤¾åºååºçéå¶ https://github.com/pulls?q=label%3Alimitation+org%3Akata-containers+is%3Aopen\n\n\n# ä¸äºååºçéå¶\n\n\n# CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman\n\nä¸æ¯ædocker --runtimeæå®kataè¿è¡æ¶\n\n\n# runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate\n\n\n# ç½ç»ï¼æªååº\n\n\n# èµæºç®¡ç\n\nå¯¹äºåºäº VM çç³»ç»ï¼å° cgroupãCPUãåå­åå­å¨ç­èµæºçº¦æåºç¨äºå·¥ä½è´è½½å¹¶ä¸æ»æ¯é£ä¹ç®åã\n\n\n# docker ç--cpu\n\n\n# vcpus\n\n\n# æ¶æéå¶\n\n\n# å­å¨éå¶subPaths\n\n\n# ä¸»æºèµæºå±äº«:securityContext privileged\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/privileged.md\n\n\n# kataå®¹å¨éå¶çº§å«\n\n\n# éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­\n\n\n# éå¶kata container\n\n\n# éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",normalizedContent:"https://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md\n\nkataå¨ç¡¬ä»¶éç¦»çèææºä¸­è¿è¡å®¹å¨ï¼æ¯ä¸ªvmé½æç¬ç«çåæ ¸ï¼ç±äºè¿ç§é«ç¨åº¦çéç¦»ï¼æäºå®¹å¨åè½æ æ³å¯ç¨ï¼æèéè¿vméå¼å¯ç¨ã\n\noci è§èå®ä¹äºè¿è¡æ¶å¿é¡»æ¯æçæä½è§èï¼ä»¥ä¾¿ä¸ docker ç­å®¹å¨ç®¡çå¨è¿è¡äºæä½ãå¦æè¿è¡æ¶ä¸æ¯æ oci è§èçæäºæ¹é¢ï¼åæ ¹æ®å®ä¹å®æ¯ä¸ä¸ªéå¶ã\n\nä½æ¯ï¼runcå¹¶ä¸å®å¨ç¬¦å oci è§èæ¬èº«ã\n\nä»¥ä¸æ¯ç¤¾åºååºçéå¶ https://github.com/pulls?q=label%3alimitation+org%3akata-containers+is%3aopen\n\n\n# ä¸äºååºçéå¶\n\n\n# cliå½ä»¤ï¼ä¸æ¯ædockeråpodman\n\nä¸æ¯ædocker --runtimeæå®kataè¿è¡æ¶\n\n\n# runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate\n\n\n# ç½ç»ï¼æªååº\n\n\n# èµæºç®¡ç\n\nå¯¹äºåºäº vm çç³»ç»ï¼å° cgroupãcpuãåå­åå­å¨ç­èµæºçº¦æåºç¨äºå·¥ä½è´è½½å¹¶ä¸æ»æ¯é£ä¹ç®åã\n\n\n# docker ç--cpu\n\n\n# vcpus\n\n\n# æ¶æéå¶\n\n\n# å­å¨éå¶subpaths\n\n\n# ä¸»æºèµæºå±äº«:securitycontext privileged\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/privileged.md\n\n\n# kataå®¹å¨éå¶çº§å«\n\n\n# éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­\n\n\n# éå¶kata container\n\n\n# éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata-monitorçæ§",frontmatter:{title:"kata-monitorçæ§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata5/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md",meta:[{name:"twitter:title",content:"kata-monitorçæ§"},{name:"twitter:description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-monitorçæ§"},{property:"og:description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-monitorçæ§"},{itemprop:"description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/05.kata-monitorçæ§.md",key:"v-50a8e3a0",path:"/pages/kata5/",headers:[{level:2,title:"kata-monitorå¯å¨æ¹å¼",slug:"kata-monitorå¯å¨æ¹å¼",normalizedTitle:"kata-monitorå¯å¨æ¹å¼",charIndex:282},{level:2,title:"promethueså¢å scrape_configs",slug:"promethueså¢å scrape-configs",normalizedTitle:"promethueså¢å scrape_configs",charIndex:1078},{level:2,title:"å¯¼å¥ Grafana dashborad",slug:"å¯¼å¥-grafana-dashborad",normalizedTitle:"å¯¼å¥ grafana dashborad",charIndex:1193},{level:2,title:"Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼",slug:"kata-containers-ç®åééäºä¸é¢å ç§ç±»åç-metrics",normalizedTitle:"kata containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼",charIndex:1927},{level:2,title:"promethuesçæ§è´è½½ææ ",slug:"promethuesçæ§è´è½½ææ ",normalizedTitle:"promethuesçæ§è´è½½ææ ",charIndex:2725},{level:2,title:"ææ çæ§è½ä¸å¼é",slug:"ææ çæ§è½ä¸å¼é",normalizedTitle:"ææ çæ§è½ä¸å¼é",charIndex:2966}],headersStr:"kata-monitorå¯å¨æ¹å¼ promethueså¢å scrape_configs å¯¼å¥ Grafana dashborad Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼ promethuesçæ§è´è½½ææ  ææ çæ§è½ä¸å¼é",content:'https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md\n\nkata-monitor è¿ç¨è¿è¡å¨å®¿ä¸»æºä¸ï¼è´è´£ä»å Kata Containers å®¹å¨/VMä¸­è·å metricsï¼å¹¶è¿åç» Prometheusã\n\né»è®¤æåµä¸ kata-monitor ä¸éè¦æå®åæ°ï¼å®ä¼çå¬å¨æ¬å°ç 8090 ç«¯å£ï¼è¿ä¹æ¯å¨ Prometheus éç½®æä»¶ä¸­ target æå®çç«¯å£å·ãå¦æè¦ä¿®æ¹è¿ä¸ªç«¯å£å·ï¼åéè¦æ³¨æä¸¤å¤è¦ä¿æä¸è´ã\n\n\n# kata-monitorå¯å¨æ¹å¼\n\n 1. kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[Unit]\nDescription=kata monitor\n\n[Service]\nExecStart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nRestart=always\nStartLimitInterval=0\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n 2. daemonset(ï¼ï¼æ²¡æéåï¼æå¨ç¼è¯ä¸è¿)ï¼TODOï¼\n\n$ kubectl apply -f https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/kata-monitor-daemonset.yml\n\n\n1\n\n\nOnce the daemonset is running, Prometheus should discover kata-monitor as a target. You can open http://:30909/service-discovery and find kubernetes-pods under the Service Discovery list\n\n * å³äºæ²¡ækata-monitor éåé®é¢ https://github.com/kata-containers/kata-containers/issues/2421\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹IP>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ Grafana dashborad\n\n[root@localhost ~]# curl -XPOST -i <grafanaèç¹IP>:3000/api/dashboards/import \\\n>     -u admin:admin \\\n>     -H "Content-Type: application/json" \\\n> -d "{\\"dashboard\\":$(curl -sL https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\nHTTP/1.1 100 Continue\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Mon, 16 May 2022 05:16:33 GMT\nContent-Length: 253\n\n{"pluginId":"","title":"Kata containers","imported":true,"importedUri":"db/kata-containers","importedUrl":"/d/75pdqURGk/kata-containers","slug":"","dashboardId":0,"folderId":0,"importedRevision":1,"revision":1,"description":"","path":"","removed":false}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# çæ§ææ \n\n\n# Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼\n\nKata agent metricsï¼agent è¿ç¨ç metrics Kata guest OS metricsï¼VM ä¸­ç guest metrics Hypervisor metricsï¼hypervisor è¿ç¨ç metricsï¼å¦æ hypervisor æ¬èº«æä¾äº metrics æ¥å£ï¼æ¯å¦ firecrackerï¼ä¹ä¼ééå° Kata Containers ç metricsï¼ Kata monitor metricsï¼kata-monitor è¿ç¨ç metrics Kata containerd shim v2 metricsï¼shimv2 è¿ç¨ç metrics\n\nå¨kata vmä¸­/proc//io stat statusç­çæ°æ® kata_agent_io_statä»£çè¿ç¨ IO ç»è®¡ kata_agent_process_cpu_seconds_total ä»¥ç§ä¸ºåä½è±è´¹çæ»ç¨æ·åç³»ç» CPU æ¶é´ã kata_agent_total_vm\n\nå¨kata vmä¸­/proc/stat diskstats meminfoç­çæ°æ® kata_guest_cpu_time kata_guest_diskstat kata_guest_load kata_guest_meminfo kata_guest_vm_stat\n\nkata_hypervisor_io_stat å¤çIOç»è®¡ kata_hypervisor_proc_stat è¿ç¨ç»è®¡\n\nkata_shim_pod_overhead_cpu CPU èµæºç Kata Pod å¼éï¼ç¾åæ¯ï¼ kata_shim_pod_overhead_memory_in_bytes Kata Pod çåå­èµæºå¼éï¼å­èï¼\n\n\n# promethuesçæ§è´è½½ææ \n\n * container_fs_writes_bytes_total\n\n * container_cpu_usage_seconds_totalæ²¡æcontainerå­æ®µ\n\n * \n\nsum(irate(container_cpu_usage_seconds_total{namespace=~"${allNamespace}",pod=~"^${loadNames}",container!=""}[3m]))by(pod)\n\n\n1\n\n\n\n# ææ çæ§è½ä¸å¼é\n\n * ç«¯å°ç«¯ï¼ä» Prometheus æå¡å¨å°kata-monitorå¹¶kata-monitorååååºï¼ï¼20 æ¯«ç§ï¼å¹³åï¼\n\n * ä»£çï¼ä» shim å°agentçææ RPCï¼ï¼3 æ¯«ç§ï¼å¹³åï¼\n\n * Prometheus é»è®¤scrape_intervalä¸º 1 åéï¼ä½éå¸¸è®¾ç½®ä¸º 15 ç§ãè¾å°scrape_intervalä¼å¯¼è´æ´å¤å¼éï¼å æ­¤ç¨æ·åºæ ¹æ®èªå·±ççæ§éæ±è¿è¡è®¾ç½®ã\n   \n   Prometheus ååºçä¸ä¸ªææ è·åè¯·æ±çå¤§å°ãå½æ²¡æ gzip åç¼©æ¶ï¼è®¡ç®é¢æå¤§å°çå¬å¼æ¯ï¼\n   9 + (144 - 9) *number of kata sandboxes Prometheusæ¯ægzipåç¼©. å¯ç¨åï¼æ¯ä¸ªè¯·æ±çååºå¤§å°ä¼æ´å°ï¼\n   2 + (10 - 2) *number of kata sandboxes\n\n\n# endpoint\n\nkata-monitorå¬å¼äºä»¥ä¸endpointÂ·ï¼\n\n * /metrics : è·å Kata æ²ç®±ææ ã\n * /sandboxes : ååºä¸»æºä¸è¿è¡çææ Kata æ²ç®±ã\n * /agent-url : è·å Kata æ²ç®±çä»£ç URLã\n * /debug/vars : Kata è¿è¡æ¶ shim çåé¨æ°æ®ã\n * /debug/pprof/ : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼ç´¢å¼é¡µã\n * /debug/pprof/cmdline : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼cmdlineendpointã\n * /debug/pprof/profile : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼profileendpointï¼CPU åæï¼ã\n * /debug/pprof/symbol : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼symbolendpointã\n * /debug/pprof/trace : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼traceendpointã\n\n/agent-urlåææ/debug/ * é½éè¦å¨æ¥è¯¢å­ç¬¦ä¸²ä¸­æå®sandbox_id\n\ncurl 127.0.0.1:8090/sandboxes curl 127.0.0.1:8090/agent-url?sandboxes=df96b24bd49ec437c872c1a758edc084121d607ce1242ff5d2263a0e1b693343',normalizedContent:'https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md\n\nkata-monitor è¿ç¨è¿è¡å¨å®¿ä¸»æºä¸ï¼è´è´£ä»å kata containers å®¹å¨/vmä¸­è·å metricsï¼å¹¶è¿åç» prometheusã\n\né»è®¤æåµä¸ kata-monitor ä¸éè¦æå®åæ°ï¼å®ä¼çå¬å¨æ¬å°ç 8090 ç«¯å£ï¼è¿ä¹æ¯å¨ prometheus éç½®æä»¶ä¸­ target æå®çç«¯å£å·ãå¦æè¦ä¿®æ¹è¿ä¸ªç«¯å£å·ï¼åéè¦æ³¨æä¸¤å¤è¦ä¿æä¸è´ã\n\n\n# kata-monitorå¯å¨æ¹å¼\n\n 1. kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[unit]\ndescription=kata monitor\n\n[service]\nexecstart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nrestart=always\nstartlimitinterval=0\nrestartsec=10\n\n[install]\nwantedby=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n 2. daemonset(ï¼ï¼æ²¡æéåï¼æå¨ç¼è¯ä¸è¿)ï¼todoï¼\n\n$ kubectl apply -f https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/kata-monitor-daemonset.yml\n\n\n1\n\n\nonce the daemonset is running, prometheus should discover kata-monitor as a target. you can open http://:30909/service-discovery and find kubernetes-pods under the service discovery list\n\n * å³äºæ²¡ækata-monitor éåé®é¢ https://github.com/kata-containers/kata-containers/issues/2421\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹ip>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ grafana dashborad\n\n[root@localhost ~]# curl -xpost -i <grafanaèç¹ip>:3000/api/dashboards/import \\\n>     -u admin:admin \\\n>     -h "content-type: application/json" \\\n> -d "{\\"dashboard\\":$(curl -sl https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\nhttp/1.1 100 continue\n\nhttp/1.1 200 ok\ncontent-type: application/json\ndate: mon, 16 may 2022 05:16:33 gmt\ncontent-length: 253\n\n{"pluginid":"","title":"kata containers","imported":true,"importeduri":"db/kata-containers","importedurl":"/d/75pdqurgk/kata-containers","slug":"","dashboardid":0,"folderid":0,"importedrevision":1,"revision":1,"description":"","path":"","removed":false}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# çæ§ææ \n\n\n# kata containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼\n\nkata agent metricsï¼agent è¿ç¨ç metrics kata guest os metricsï¼vm ä¸­ç guest metrics hypervisor metricsï¼hypervisor è¿ç¨ç metricsï¼å¦æ hypervisor æ¬èº«æä¾äº metrics æ¥å£ï¼æ¯å¦ firecrackerï¼ä¹ä¼ééå° kata containers ç metricsï¼ kata monitor metricsï¼kata-monitor è¿ç¨ç metrics kata containerd shim v2 metricsï¼shimv2 è¿ç¨ç metrics\n\nå¨kata vmä¸­/proc//io stat statusç­çæ°æ® kata_agent_io_statä»£çè¿ç¨ io ç»è®¡ kata_agent_process_cpu_seconds_total ä»¥ç§ä¸ºåä½è±è´¹çæ»ç¨æ·åç³»ç» cpu æ¶é´ã kata_agent_total_vm\n\nå¨kata vmä¸­/proc/stat diskstats meminfoç­çæ°æ® kata_guest_cpu_time kata_guest_diskstat kata_guest_load kata_guest_meminfo kata_guest_vm_stat\n\nkata_hypervisor_io_stat å¤çioç»è®¡ kata_hypervisor_proc_stat è¿ç¨ç»è®¡\n\nkata_shim_pod_overhead_cpu cpu èµæºç kata pod å¼éï¼ç¾åæ¯ï¼ kata_shim_pod_overhead_memory_in_bytes kata pod çåå­èµæºå¼éï¼å­èï¼\n\n\n# promethuesçæ§è´è½½ææ \n\n * container_fs_writes_bytes_total\n\n * container_cpu_usage_seconds_totalæ²¡æcontainerå­æ®µ\n\n * \n\nsum(irate(container_cpu_usage_seconds_total{namespace=~"${allnamespace}",pod=~"^${loadnames}",container!=""}[3m]))by(pod)\n\n\n1\n\n\n\n# ææ çæ§è½ä¸å¼é\n\n * ç«¯å°ç«¯ï¼ä» prometheus æå¡å¨å°kata-monitorå¹¶kata-monitorååååºï¼ï¼20 æ¯«ç§ï¼å¹³åï¼\n\n * ä»£çï¼ä» shim å°agentçææ rpcï¼ï¼3 æ¯«ç§ï¼å¹³åï¼\n\n * prometheus é»è®¤scrape_intervalä¸º 1 åéï¼ä½éå¸¸è®¾ç½®ä¸º 15 ç§ãè¾å°scrape_intervalä¼å¯¼è´æ´å¤å¼éï¼å æ­¤ç¨æ·åºæ ¹æ®èªå·±ççæ§éæ±è¿è¡è®¾ç½®ã\n   \n   prometheus ååºçä¸ä¸ªææ è·åè¯·æ±çå¤§å°ãå½æ²¡æ gzip åç¼©æ¶ï¼è®¡ç®é¢æå¤§å°çå¬å¼æ¯ï¼\n   9 + (144 - 9) *number of kata sandboxes prometheusæ¯ægzipåç¼©. å¯ç¨åï¼æ¯ä¸ªè¯·æ±çååºå¤§å°ä¼æ´å°ï¼\n   2 + (10 - 2) *number of kata sandboxes\n\n\n# endpoint\n\nkata-monitorå¬å¼äºä»¥ä¸endpointÂ·ï¼\n\n * /metrics : è·å kata æ²ç®±ææ ã\n * /sandboxes : ååºä¸»æºä¸è¿è¡çææ kata æ²ç®±ã\n * /agent-url : è·å kata æ²ç®±çä»£ç urlã\n * /debug/vars : kata è¿è¡æ¶ shim çåé¨æ°æ®ã\n * /debug/pprof/ : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼ç´¢å¼é¡µã\n * /debug/pprof/cmdline : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼cmdlineendpointã\n * /debug/pprof/profile : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼profileendpointï¼cpu åæï¼ã\n * /debug/pprof/symbol : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼symbolendpointã\n * /debug/pprof/trace : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼traceendpointã\n\n/agent-urlåææ/debug/ * é½éè¦å¨æ¥è¯¢å­ç¬¦ä¸²ä¸­æå®sandbox_id\n\ncurl 127.0.0.1:8090/sandboxes curl 127.0.0.1:8090/agent-url?sandboxes=df96b24bd49ec437c872c1a758edc084121d607ce1242ff5d2263a0e1b693343',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å¶ä»ç¹æ§",frontmatter:{title:"å¶ä»ç¹æ§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata7/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å¶ä»ç¹æ§"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¶ä»ç¹æ§"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¶ä»ç¹æ§"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.md",key:"v-77a29116",path:"/pages/kata7/",headersStr:null,content:"# vm cache\n\nVMCache æå¡å¨å°åå»ºä¸äº VM å¹¶éè¿å·¥åç¼å­å¯¹å¶è¿è¡ç¼å­ãå®å° VM è½¬æ¢ä¸º gRPC æ ¼å¼ï¼å¹¶å¨æ¶å°å®¢æ·ç«¯è¯·æ±æ¶è¿è¡ä¼ è¾ã\n\nvm_cache_numberæå®VMCacheçç¼å­æ°éï¼\n- æªæå®æ == 0\n  VMCache å·²ç¦ç¨\n- \\> 0\n  å°è¢«è®¾ç½®ä¸ºæå®çæ°å­\nvm_cache_endpointæå® Unix å¥æ¥å­çå°åã\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿è°ç¨åå»ºä¸ä¸ª VM æ¨¡æ¿ä¾ä»¥åä½¿ç¨ï¼\n\n$ sudo kata-runtime factory init\n\n\n1\n\n\n\n# èææºæ¨¡æ¿\n\n\n# ç¹æå®¹å¨\n\nå·æéå¸¸ä¸æäºçéå åè½åè®¿é®æé å¦æéç½®ä¸æ­£ç¡®ï¼å®å¯è½ä¼éä½ Kata Containers çå®å¨æ§ã\n\né»è®¤æåµä¸ï¼å½ä¸ºå®¹å¨å¯ç¨ç¹ææ¶ï¼/dev/*ä¸»æºä¸­çææåè®¾å¤é½ä¼æè½½å°guestä¸­ãè¿å°åè®¸ Kata gueståé¨çç¹æå®¹å¨è·å¾ä»ä¸»æºæè½½ä»»ä½åè®¾å¤çè®¿é®æéï¼è¿æ¯éä½ Kata å®å¨æ§çæ½å¨ä¸è¯å¯ä½ç¨ã\n\néè¿privileged_without_host_devicesï¼ åè®¸å¨ containerd éç½®ä¸­ä¸ºæ¯ä¸ªè¿è¡æ¶éç½®ç¹æä¸»æºè®¾å¤è¡ä¸ºï¼å°æ­¤è®¾ç½®ä¸ºtrueå°ç¦ç¨ä¸»æºè®¾å¤ç­æå¥æ¥å®¾ï¼å³ä½¿å¯ç¨äºç¹æä¹æ¯å¦æ­¤ã\n\n\n# Serverless",normalizedContent:"# vm cache\n\nvmcache æå¡å¨å°åå»ºä¸äº vm å¹¶éè¿å·¥åç¼å­å¯¹å¶è¿è¡ç¼å­ãå®å° vm è½¬æ¢ä¸º grpc æ ¼å¼ï¼å¹¶å¨æ¶å°å®¢æ·ç«¯è¯·æ±æ¶è¿è¡ä¼ è¾ã\n\nvm_cache_numberæå®vmcacheçç¼å­æ°éï¼\n- æªæå®æ == 0\n  vmcache å·²ç¦ç¨\n- \\> 0\n  å°è¢«è®¾ç½®ä¸ºæå®çæ°å­\nvm_cache_endpointæå® unix å¥æ¥å­çå°åã\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿è°ç¨åå»ºä¸ä¸ª vm æ¨¡æ¿ä¾ä»¥åä½¿ç¨ï¼\n\n$ sudo kata-runtime factory init\n\n\n1\n\n\n\n# èææºæ¨¡æ¿\n\n\n# ç¹æå®¹å¨\n\nå·æéå¸¸ä¸æäºçéå åè½åè®¿é®æé å¦æéç½®ä¸æ­£ç¡®ï¼å®å¯è½ä¼éä½ kata containers çå®å¨æ§ã\n\né»è®¤æåµä¸ï¼å½ä¸ºå®¹å¨å¯ç¨ç¹ææ¶ï¼/dev/*ä¸»æºä¸­çææåè®¾å¤é½ä¼æè½½å°guestä¸­ãè¿å°åè®¸ kata gueståé¨çç¹æå®¹å¨è·å¾ä»ä¸»æºæè½½ä»»ä½åè®¾å¤çè®¿é®æéï¼è¿æ¯éä½ kata å®å¨æ§çæ½å¨ä¸è¯å¯ä½ç¨ã\n\néè¿privileged_without_host_devicesï¼ åè®¸å¨ containerd éç½®ä¸­ä¸ºæ¯ä¸ªè¿è¡æ¶éç½®ç¹æä¸»æºè®¾å¤è¡ä¸ºï¼å°æ­¤è®¾ç½®ä¸ºtrueå°ç¦ç¨ä¸»æºè®¾å¤ç­æå¥æ¥å®¾ï¼å³ä½¿å¯ç¨äºç¹æä¹æ¯å¦æ­¤ã\n\n\n# serverless",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾",frontmatter:{title:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata8/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0",meta:[{name:"twitter:title",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{name:"twitter:description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{property:"og:description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{itemprop:"description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.md",key:"v-58d0a1ce",path:"/pages/kata8/",headers:[{level:2,title:"crictl pods",slug:"crictl-pods",normalizedTitle:"crictl pods",charIndex:902},{level:2,title:"crictl ps",slug:"crictl-ps",normalizedTitle:"crictl ps",charIndex:1296},{level:2,title:"crictl stats",slug:"crictl-stats",normalizedTitle:"crictl stats",charIndex:1652},{level:2,title:"è·åsandboxID",slug:"è·åsandboxid",normalizedTitle:"è·åsandboxid",charIndex:1899},{level:2,title:"å®¿ä¸»æºè¿ç¨",slug:"å®¿ä¸»æºè¿ç¨",normalizedTitle:"å®¿ä¸»æºè¿ç¨",charIndex:2074},{level:2,title:"ip netns",slug:"ip-netns",normalizedTitle:"ip netns",charIndex:5851},{level:2,title:"å®¿ä¸»æºç®å½",slug:"å®¿ä¸»æºç®å½",normalizedTitle:"å®¿ä¸»æºç®å½",charIndex:8032},{level:2,title:"vm_pid",slug:"vm-pid",normalizedTitle:"vm_pid",charIndex:8218},{level:2,title:"df -h",slug:"df-h",normalizedTitle:"df -h",charIndex:9781},{level:2,title:"lsblk",slug:"lsblk",normalizedTitle:"lsblk",charIndex:10298},{level:2,title:"ip addr",slug:"ip-addr",normalizedTitle:"ip addr",charIndex:10493},{level:2,title:"mount",slug:"mount",normalizedTitle:"mount",charIndex:2853},{level:2,title:"lsblk",slug:"lsblk-2",normalizedTitle:"lsblk",charIndex:10298},{level:2,title:"ççæè½½äºä»ä¹ååº",slug:"ççæè½½äºä»ä¹ååº",normalizedTitle:"ççæè½½äºä»ä¹ååº",charIndex:14012},{level:2,title:"lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã",slug:"lsé½æ²¡æ-åªè½echo-ä»£æ¿ã",normalizedTitle:"lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã",charIndex:17558},{level:2,title:"uname -a",slug:"uname-a",normalizedTitle:"uname -a",charIndex:17705},{level:2,title:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",slug:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",normalizedTitle:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",charIndex:17718},{level:2,title:"ççé½æä»ä¹è¿ç¨",slug:"ççé½æä»ä¹è¿ç¨",normalizedTitle:"ççé½æä»ä¹è¿ç¨",charIndex:17918},{level:2,title:"ççæå¤å°åå­",slug:"ççæå¤å°åå­",normalizedTitle:"ççæå¤å°åå­",charIndex:17952},{level:2,title:"ççåæ ¸å¯å¨åæ°",slug:"ççåæ ¸å¯å¨åæ°",normalizedTitle:"ççåæ ¸å¯å¨åæ°",charIndex:17983},{level:2,title:"ççsystemctlçæå¡",slug:"ççsystemctlçæå¡",normalizedTitle:"ççsystemctlçæå¡",charIndex:18019},{level:2,title:"cpuinfo/meminfo  (2C)",slug:"cpuinfo-meminfo-2c",normalizedTitle:"cpuinfo/meminfo  (2c)",charIndex:null}],headersStr:"crictl pods crictl ps crictl stats è·åsandboxID å®¿ä¸»æºè¿ç¨ ip netns å®¿ä¸»æºç®å½ vm_pid df -h lsblk ip addr mount lsblk ççæè½½äºä»ä¹ååº lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã uname -a ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å ççé½æä»ä¹è¿ç¨ ççæå¤å°åå­ ççåæ ¸å¯å¨åæ° ççsystemctlçæå¡ cpuinfo/meminfo  (2C)",content:'# ç¯å¢\n\n> k8s: 1.17.2 containerd: 1.4.6 kata: 2.4.0\n\n\n# åå»ºä¸ä¸ªkataå®¹å¨\n\n    resources:\n      limits:\n        cpu: "1"\n        memory: 1Gi\n      requests:\n        cpu: "1"\n        memory: 1Gi\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n[root@localhost ~]# kubectl get pod -o wide\nNAME                              READY   STATUS    RESTARTS   AGE   IP               NODE                    NOMINATED NODE   READINESS GATES\ntest-runc                         1/1     Running   0          19h   10.241.102.169   localhost.localdomain   <none>           <none>\n[root@localhost ~]# kubectl top pod\nNAME                              CPU(cores)   MEMORY(bytes)\ntest-kata                         0m           2Mi\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184Mi (18%)     1184Mi (18%)   64m\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# crictl pods\n\n[root@localhost ~]# crictl pods\nPOD ID              CREATED             STATE               NAME                                                    NAMESPACE              ATTEMPT             RUNTIME\n3871d0c8108c6       About an hour ago   Ready               test-kata                                               default                0                   kata-qemu\n\n\n1\n2\n3\n\n\n\n# crictl ps\n\n[root@localhost ~]# crictl ps\nCONTAINER           IMAGE               CREATED             STATE               NAME                                   ATTEMPT             POD ID\na83ce7bc82f78       e39e5c33c2d50       About an hour ago   Running             pod1                                   0                   3871d0c8108c6\n\n\n\n1\n2\n3\n4\n\n\n\n# crictl stats\n\n[root@localhost ~]# crictl stats a83ce7bc82f78\nCONTAINER           CPU %               MEM                 DISK                INODES\na83ce7bc82f78       0.00                3.056MB             16.38kB             14\n\n\n\n1\n2\n3\n4\n\n\n\n# è·åsandboxID\n\n[root@localhost ~]# crictl inspect a83ce7bc82f78 | grep sandboxID\n    "sandboxID": "3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985",\n\n\n1\n2\n\n\n\n# å®¿ä¸»æºè¿ç¨\n\n[root@localhost ~]# ps -ef | grep 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot      2251   429  0 11:32 pts/2    00:00:00 grep --color=auto 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23520     1  0 10:24 ?        00:00:01 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23528 23520  0 10:24 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     23535     1  0 10:24 ?        00:00:09 /opt/kata/bin/qemu-system-x86_64 -name sandbox-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985 -uuid 2cfc6a6d-63ab-41aa-ac4b-18cb10377791 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/qmp.sock,server=on,wait=off -m 2048M,slots=10,maxmem=8773M -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-4001198526,guest-cid=4001198526 -chardev socket,id=char-93f9924bc919f096,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-93f9924bc919f096,tag=kataShared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=ea:e4:96:23:5e:9f,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048M,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026 -pidfile /run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     23543 23528  0 10:24 ?        00:00:01 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     27463 17898  0 10:26 pts/0    00:00:00 kata-runtime exec 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# ip netns\n\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: tunl0@NONE: <NOARP> mtu 1480 qdisc noop state DOWN group default qlen 1000\n    link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if17552: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc noqueue state UP group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 10.241.103.177/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n5: tap0_kata: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc mq state UNKNOWN group default qlen 1000\n    link/ether a2:a5:96:5b:90:23 brd ff:ff:ff:ff:ff:ff\n    inet6 fe80::a0a5:96ff:fe5b:9023/64 scope link\n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n Sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n Sent 992 bytes 16 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# å®¿ä¸»æºç®å½\n\n> /run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/ /sys/fs/cgroup/(memoryãdevicesãcpu,cpuacct...) /sys/fs/cgroup/systemd/kata_overhead/ /app/docker/containerd/\n\n\n# vm_pid\n\n[root@localhost ~]# cat /proc/23535/status\nName:   qemu-system-x86\nUmask:  0027\nState:  S (sleeping)\nTgid:   23535\nNgid:   0\nPid:    23535\nPPid:   1\nTracerPid:      0\nUid:    0       0       0       0\nGid:    0       0       0       0\nFDSize: 128\nGroups:\nVmPeak:  3659100 kB\nVmSize:  3659100 kB\nVmLck:         0 kB\nVmPin:         0 kB\nVmHWM:    152104 kB\nVmRSS:    152104 kB\nRssAnon:           14288 kB\nRssFile:           35956 kB\nRssShmem:         101860 kB\nVmData:   326316 kB\nVmStk:       132 kB\nVmExe:      8496 kB\nVmLib:         0 kB\nVmPTE:       652 kB\nVmSwap:        0 kB\nThreads:        5\nSigQ:   0/30632\nSigPnd: 0000000000000000\nShdPnd: 0000000000000000\nSigBlk: 0000000010002240\nSigIgn: 0000000000381000\nSigCgt: 0000000180004243\nCapInh: 0000000000000000\nCapPrm: 0000001fffffffff\nCapEff: 0000001fffffffff\nCapBnd: 0000001fffffffff\nCapAmb: 0000000000000000\nNoNewPrivs:     0\nSeccomp:        0\nSpeculation_Store_Bypass:       thread vulnerable\nCpus_allowed:   ff\nCpus_allowed_list:      0-7\nMems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001\nMems_allowed_list:      0\nvoluntary_ctxt_switches:        1769\nnonvoluntary_ctxt_switches:     4\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# è¿å¥kataå®¹å¨\n\n\n# df -h\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# df -h\n\nFilesystem      Size  Used Avail Use% Mounted on\n\nnone            494G   28G  466G   6% /\n\ntmpfs            64M     0   64M   0% /dev\n\ntmpfs           992M     0  992M   0% /sys/fs/cgroup\n\nnone            494G   28G  466G   6% /hff\n\nkataShared      494G   28G  466G   6% /etc/hosts\n\nshm             992M     0  992M   0% /dev/shm\n\ntmpfs           992M   12K  992M   1% /run/secrets/kubernetes.io/serviceaccount\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# lsblk\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# lsblk\n\nNAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n\npmem0     259:0    0  126M  1 disk\n\n`-pmem0p1 259:1    0  124M  1 part\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ip addr\n\n/ # ip addr\nroot@test-kata:/# ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc fq state UP group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff\n    inet 10.241.103.177/32 brd 10.241.103.177 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# mount\n\nroot@test-kata:/# mount\nnone on / type virtiofs (rw,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=666)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (ro,nosuid,nodev,noexec,relatime)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,relatime,size=1020892k,nr_inodes=255223)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (ro,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/devices type cgroup (ro,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (ro,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/pids type cgroup (ro,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (ro,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (ro,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (ro,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/blkio type cgroup (ro,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/freezer type cgroup (ro,nosuid,nodev,noexec,relatime,freezer)\nnone on /test type virtiofs (rw,relatime)\nkataShared on /etc/hosts type virtiofs (rw,relatime)\nkataShared on /dev/termination-log type virtiofs (rw,relatime)\nkataShared on /etc/hostname type virtiofs (rw,relatime)\nkataShared on /etc/resolv.conf type virtiofs (rw,relatime)\nshm on /dev/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /run/secrets/kubernetes.io/serviceaccount type tmpfs (ro,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /proc/timer_list type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\nproc on /proc/bus type proc (ro,relatime)\nproc on /proc/fs type proc (ro,relatime)\nproc on /proc/irq type proc (ro,relatime)\nproc on /proc/sys type proc (ro,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# è¿å¥kata vm\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# lsblk\n\nbash-5.1# lsblk\nNAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\npmem0     259:0    0  126M  1 disk\n`-pmem0p1 259:1    0  124M  1 part /\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n\n\n\n# ççæè½½äºä»ä¹ååº\n\nbash-5.1# mount\n/dev/pmem0p1 on / type ext4 (ro,relatime,errors=remount-ro,data=ordered,dax=always)\ndevtmpfs on /dev type devtmpfs (rw,relatime,size=1019140k,nr_inodes=254785,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,size=1020892k,nr_inodes=255223)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,size=4096k,nr_inodes=1024,mode=755)\ncgroup2 on /sys/fs/cgroup/unified type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,noexec,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ntmpfs on /etc/machine-id type tmpfs (ro,size=408360k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=29,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)\ntmpfs on /tmp type tmpfs (rw,nosuid,nodev,size=1020896k,nr_inodes=1048576)\nnsfs on /run/sandbox-ns/ipc type nsfs (rw)\nnsfs on /run/sandbox-ns/uts type nsfs (rw)\nkataShared on /run/kata-containers/shared/containers type virtiofs (rw,relatime)\nshm on /run/kata-containers/sandbox/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /etc/resolv.conf type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\nnone on /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\ntmpfs on /run/kata-containers/shared/containers/watchable type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount type virtiofs (rw,relatime)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã\n\nbash-5.1# echo *\nautofs bin boot dev etc home lib lib64 lost+found media mnt proc root run sbin srv sys tmp usr var\n\n\n1\n2\n\n\n\n# uname -a\n\n\n# ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å\n\nbash-5.1# lsmod\nlibkmod: kmod_module_new_from_loaded: could not open /proc/modules: No such file or directory\nError: could not get list of modules: No such file or directory\n\n\n1\n2\n3\n\n\n\n# ççé½æä»ä¹è¿ç¨\n\nbash-5.1# ps efx ww\n\n\n# ççæå¤å°åå­\n\nbash-5.1# free -h\n\n\n# ççåæ ¸å¯å¨åæ°\n\nbash-5.1# cat cmdline\n\n\n# ççsystemctlçæå¡\n\nbash-5.1# systemctl list-units\n  UNIT                                                                                                                                                  LOAD   ACTIVE     SUB       DESCRIPTION          \n  proc-sys-fs-binfmt_misc.automount                                                                                                                     loaded active     waiting   Arbitrary Executable File Formats File System Automount Point\n  dev-pmem0p1.device                                                                                                                                    loaded activating tentative /dev/pmem0p1         \n  -.mount                                                                                                                                               loaded active     mounted   Root Mount\n  etc-machine\\x2did.mount                                                                                                                               loaded active     mounted   /etc/machine-id\n  etc-resolv.conf.mount                                                                                                                                 loaded active     mounted   /etc/resolv.conf\n  run-kata\\x2dcontainers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-sandbox-shm.mount                                                                                                              loaded active     mounted   /run/kata-containers/sandbox/shm\n  run-kata\\x2dcontainers-shared-containers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a\\x2d172195b99cf7a9fd\\x2dserviceaccount.mount loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount\n  run-kata\\x2dcontainers-shared-containers-watchable.mount                                                                                              loaded active     mounted   /run/kata-containers/shared/containers/watchable\n  run-kata\\x2dcontainers-shared-containers.mount                                                                                                        loaded active     mounted   /run/kata-containers/shared/containers\n  run-sandbox\\x2dns-ipc.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/ipc\n  run-sandbox\\x2dns-uts.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/uts\n  tmp.mount                                                                                                                                             loaded active     mounted   Temporary Directory /tmp\n  systemd-ask-password-console.path                                                                                                                     loaded active     waiting   Dispatch Password Requests to Console Directory Watch\n  init.scope                                                                                                                                            loaded active     running   System and Service Manager\nâ chronyd.service                                                                                                                                       loaded failed     failed    NTP client/server\n  kata-agent.service                                                                                                                                    loaded active     running   Kata Containers Agent\n  systemd-remount-fs.service                                                                                                                            loaded active     exited    Remount Root and Kernel File Systems\n  systemd-sysctl.service                                                                                                                                loaded active     exited    Apply Kernel Variables\n  -.slice                                                                                                                                               loaded active     active    Root Slice\n  system.slice                                                                                                                                          loaded active     active    System Slice         \n  systemd-coredump.socket                                                                                                                               loaded active     listening Process Core Dump Socket\n  basic.target                                                                                                                                          loaded active     active    Basic System\n  cryptsetup.target                                                                                                                                     loaded active     active    Local Encrypted Volumes\n  kata-containers.target                                                                                                                                loaded active     active    Kata Containers Agent Target\n  local-fs-pre.target                                                                                                                                   loaded active     active    Preparation for Local File Systems\n  local-fs.target                                                                                                                                       loaded active     active    Local File Systems\n  paths.target                                                                                                                                          loaded active     active    Path Units\n  slices.target                                                                                                                                         loaded active     active    Slice Units\n  sockets.target                                                                                                                                        loaded active     active    Socket Units\n  swap.target                                                                                                                                           loaded active     active    Swaps\n  sysinit.target                                                                                                                                        loaded active     active    System Initialization\n  timers.target                                                                                                                                         loaded active     active    Timer Units          \n  systemd-tmpfiles-clean.timer                                                                                                                          loaded active     waiting   Daily Cleanup of Temporary Directories\n\nLOAD   = Reflects whether the unit definition was properly loaded.\nACTIVE = The high-level unit activation state, i.e. generalization of SUB.\nSUB    = The low-level unit activation state, values depend on unit type.\n37 loaded units listed. Pass --all to see loaded but inactive units, too.\nTo show all installed unit files use \'systemctl list-unit-files\'.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\nbash-5.1#   systemctl cat kata-containers.target\n# /usr/lib/systemd/system/kata-containers.target\n#\n# Copyright (c) 2018-2019 Intel Corporation\n#\n# SPDX-License-Identifier: Apache-2.0\n#\n\n[Unit]\nDescription=Kata Containers Agent Target\nRequires=basic.target\nRequires=tmp.mount\nWants=chronyd.service\nRequires=kata-agent.service\nConflicts=rescue.service rescue.target\nAfter=basic.target rescue.service rescue.target\nAllowIsolate=yes\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# cpuinfo/meminfo (2C)\n\nbash-5.1# more /proc/cpuinfo\nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 158\nmodel name      : Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz\nstepping        : 9\nmicrocode       : 0xea\ncpu MHz         : 3599.982\ncache size      : 16384 KB\nphysical id     : 0\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_ arat md_clearinvpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1--More--e_timer aes xsave avx f16c rdra--More--\niority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest pmld ept_1gb flexpr--More--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\nprocessor       : 1\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 158\nmodel name      : Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz\nstepping        : 9\nmicrocode       : 0xea\ncpu MHz         : 3599.982\ncache size      : 16384 KB\nphysical id     : 7\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nlushopt xsaveopt xsavec xgetbv1 arat md_clearinvpcid rtm mpx rdseed adx smap clf--More--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\n[root@localhost ~]# more /proc/meminfo   (??)\nMemTotal:        7935356 kB\nMemFree:          478024 kB\nMemAvailable:    1827752 kB\nBuffers:            1064 kB\nCached:          1903388 kB\nSwapCached:            0 kB\nActive:          5728076 kB\nInactive:         891144 kB\nActive(anon):    5029108 kB\nInactive(anon):   207680 kB\nActive(file):     698968 kB\nInactive(file):   683464 kB\nUnevictable:           4 kB\nMlocked:               4 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:              9584 kB\nWriteback:             0 kB\nAnonPages:       4715640 kB\nMapped:           564200 kB\nShmem:            522020 kB\nSlab:             469116 kB\nSReclaimable:     280468 kB\nSUnreclaim:       188648 kB\nKernelStack:       43248 kB\nPageTables:        39740 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:     3967676 kB\nCommitted_AS:   23822760 kB\nVmallocTotal:   34359738367 kB\nVmallocUsed:      461976 kB\nVmallocChunk:   34358937596 kB\nPercpu:            11552 kB\nHardwareCorrupted:     0 kB\nAnonHugePages:     20480 kB\nCmaTotal:              0 kB\nCmaFree:               0 kB\nHugePages_Total:       0\nHugePages_Free:        0\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:       2048 kB\nDirectMap4k:      211152 kB\nDirectMap2M:     8038400 kB\nDirectMap1G:           0 kB\n[root@localhost ~]#\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n\n\n\n# æ»ç»\n\nlimit 1C1G default:1C2G\n\nvm: cpuinfoï¼ 2CPU meminfo: MemTotal: 7935356 kB (7.5G)\n\npod: cpuinfoï¼2CPU meminfo: MemTotal: 3090364 kB (2.9G) free -h: 2.9G',normalizedContent:'# ç¯å¢\n\n> k8s: 1.17.2 containerd: 1.4.6 kata: 2.4.0\n\n\n# åå»ºä¸ä¸ªkataå®¹å¨\n\n    resources:\n      limits:\n        cpu: "1"\n        memory: 1gi\n      requests:\n        cpu: "1"\n        memory: 1gi\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n[root@localhost ~]# kubectl get pod -o wide\nname                              ready   status    restarts   age   ip               node                    nominated node   readiness gates\ntest-runc                         1/1     running   0          19h   10.241.102.169   localhost.localdomain   <none>           <none>\n[root@localhost ~]# kubectl top pod\nname                              cpu(cores)   memory(bytes)\ntest-kata                         0m           2mi\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184mi (18%)     1184mi (18%)   64m\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# crictl pods\n\n[root@localhost ~]# crictl pods\npod id              created             state               name                                                    namespace              attempt             runtime\n3871d0c8108c6       about an hour ago   ready               test-kata                                               default                0                   kata-qemu\n\n\n1\n2\n3\n\n\n\n# crictl ps\n\n[root@localhost ~]# crictl ps\ncontainer           image               created             state               name                                   attempt             pod id\na83ce7bc82f78       e39e5c33c2d50       about an hour ago   running             pod1                                   0                   3871d0c8108c6\n\n\n\n1\n2\n3\n4\n\n\n\n# crictl stats\n\n[root@localhost ~]# crictl stats a83ce7bc82f78\ncontainer           cpu %               mem                 disk                inodes\na83ce7bc82f78       0.00                3.056mb             16.38kb             14\n\n\n\n1\n2\n3\n4\n\n\n\n# è·åsandboxid\n\n[root@localhost ~]# crictl inspect a83ce7bc82f78 | grep sandboxid\n    "sandboxid": "3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985",\n\n\n1\n2\n\n\n\n# å®¿ä¸»æºè¿ç¨\n\n[root@localhost ~]# ps -ef | grep 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot      2251   429  0 11:32 pts/2    00:00:00 grep --color=auto 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23520     1  0 10:24 ?        00:00:01 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23528 23520  0 10:24 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     23535     1  0 10:24 ?        00:00:09 /opt/kata/bin/qemu-system-x86_64 -name sandbox-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985 -uuid 2cfc6a6d-63ab-41aa-ac4b-18cb10377791 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/qmp.sock,server=on,wait=off -m 2048m,slots=10,maxmem=8773m -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-4001198526,guest-cid=4001198526 -chardev socket,id=char-93f9924bc919f096,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-93f9924bc919f096,tag=katashared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=ea:e4:96:23:5e:9f,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048m,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026 -pidfile /run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     23543 23528  0 10:24 ?        00:00:01 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     27463 17898  0 10:26 pts/0    00:00:00 kata-runtime exec 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# ip netns\n\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: tunl0@none: <noarp> mtu 1480 qdisc noop state down group default qlen 1000\n    link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if17552: <broadcast,multicast,up,lower_up> mtu 1440 qdisc noqueue state up group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 10.241.103.177/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n5: tap0_kata: <broadcast,multicast,up,lower_up> mtu 1440 qdisc mq state unknown group default qlen 1000\n    link/ether a2:a5:96:5b:90:23 brd ff:ff:ff:ff:ff:ff\n    inet6 fe80::a0a5:96ff:fe5b:9023/64 scope link\n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n sent 992 bytes 16 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# å®¿ä¸»æºç®å½\n\n> /run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/ /sys/fs/cgroup/(memoryãdevicesãcpu,cpuacct...) /sys/fs/cgroup/systemd/kata_overhead/ /app/docker/containerd/\n\n\n# vm_pid\n\n[root@localhost ~]# cat /proc/23535/status\nname:   qemu-system-x86\numask:  0027\nstate:  s (sleeping)\ntgid:   23535\nngid:   0\npid:    23535\nppid:   1\ntracerpid:      0\nuid:    0       0       0       0\ngid:    0       0       0       0\nfdsize: 128\ngroups:\nvmpeak:  3659100 kb\nvmsize:  3659100 kb\nvmlck:         0 kb\nvmpin:         0 kb\nvmhwm:    152104 kb\nvmrss:    152104 kb\nrssanon:           14288 kb\nrssfile:           35956 kb\nrssshmem:         101860 kb\nvmdata:   326316 kb\nvmstk:       132 kb\nvmexe:      8496 kb\nvmlib:         0 kb\nvmpte:       652 kb\nvmswap:        0 kb\nthreads:        5\nsigq:   0/30632\nsigpnd: 0000000000000000\nshdpnd: 0000000000000000\nsigblk: 0000000010002240\nsigign: 0000000000381000\nsigcgt: 0000000180004243\ncapinh: 0000000000000000\ncapprm: 0000001fffffffff\ncapeff: 0000001fffffffff\ncapbnd: 0000001fffffffff\ncapamb: 0000000000000000\nnonewprivs:     0\nseccomp:        0\nspeculation_store_bypass:       thread vulnerable\ncpus_allowed:   ff\ncpus_allowed_list:      0-7\nmems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001\nmems_allowed_list:      0\nvoluntary_ctxt_switches:        1769\nnonvoluntary_ctxt_switches:     4\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# è¿å¥kataå®¹å¨\n\n\n# df -h\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# df -h\n\nfilesystem      size  used avail use% mounted on\n\nnone            494g   28g  466g   6% /\n\ntmpfs            64m     0   64m   0% /dev\n\ntmpfs           992m     0  992m   0% /sys/fs/cgroup\n\nnone            494g   28g  466g   6% /hff\n\nkatashared      494g   28g  466g   6% /etc/hosts\n\nshm             992m     0  992m   0% /dev/shm\n\ntmpfs           992m   12k  992m   1% /run/secrets/kubernetes.io/serviceaccount\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# lsblk\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# lsblk\n\nname      maj:min rm  size ro type mountpoint\n\npmem0     259:0    0  126m  1 disk\n\n`-pmem0p1 259:1    0  124m  1 part\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ip addr\n\n/ # ip addr\nroot@test-kata:/# ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <broadcast,multicast,up,lower_up> mtu 1440 qdisc fq state up group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff\n    inet 10.241.103.177/32 brd 10.241.103.177 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# mount\n\nroot@test-kata:/# mount\nnone on / type virtiofs (rw,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=666)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (ro,nosuid,nodev,noexec,relatime)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,relatime,size=1020892k,nr_inodes=255223)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (ro,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/devices type cgroup (ro,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (ro,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/pids type cgroup (ro,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (ro,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (ro,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (ro,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/blkio type cgroup (ro,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/freezer type cgroup (ro,nosuid,nodev,noexec,relatime,freezer)\nnone on /test type virtiofs (rw,relatime)\nkatashared on /etc/hosts type virtiofs (rw,relatime)\nkatashared on /dev/termination-log type virtiofs (rw,relatime)\nkatashared on /etc/hostname type virtiofs (rw,relatime)\nkatashared on /etc/resolv.conf type virtiofs (rw,relatime)\nshm on /dev/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /run/secrets/kubernetes.io/serviceaccount type tmpfs (ro,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /proc/timer_list type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\nproc on /proc/bus type proc (ro,relatime)\nproc on /proc/fs type proc (ro,relatime)\nproc on /proc/irq type proc (ro,relatime)\nproc on /proc/sys type proc (ro,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# è¿å¥kata vm\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# lsblk\n\nbash-5.1# lsblk\nname      maj:min rm  size ro type mountpoints\npmem0     259:0    0  126m  1 disk\n`-pmem0p1 259:1    0  124m  1 part /\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n\n\n\n# ççæè½½äºä»ä¹ååº\n\nbash-5.1# mount\n/dev/pmem0p1 on / type ext4 (ro,relatime,errors=remount-ro,data=ordered,dax=always)\ndevtmpfs on /dev type devtmpfs (rw,relatime,size=1019140k,nr_inodes=254785,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,size=1020892k,nr_inodes=255223)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,size=4096k,nr_inodes=1024,mode=755)\ncgroup2 on /sys/fs/cgroup/unified type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,noexec,relatime,pagesize=2m)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ntmpfs on /etc/machine-id type tmpfs (ro,size=408360k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=29,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)\ntmpfs on /tmp type tmpfs (rw,nosuid,nodev,size=1020896k,nr_inodes=1048576)\nnsfs on /run/sandbox-ns/ipc type nsfs (rw)\nnsfs on /run/sandbox-ns/uts type nsfs (rw)\nkatashared on /run/kata-containers/shared/containers type virtiofs (rw,relatime)\nshm on /run/kata-containers/sandbox/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /etc/resolv.conf type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\nnone on /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\ntmpfs on /run/kata-containers/shared/containers/watchable type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount type virtiofs (rw,relatime)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã\n\nbash-5.1# echo *\nautofs bin boot dev etc home lib lib64 lost+found media mnt proc root run sbin srv sys tmp usr var\n\n\n1\n2\n\n\n\n# uname -a\n\n\n# ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å\n\nbash-5.1# lsmod\nlibkmod: kmod_module_new_from_loaded: could not open /proc/modules: no such file or directory\nerror: could not get list of modules: no such file or directory\n\n\n1\n2\n3\n\n\n\n# ççé½æä»ä¹è¿ç¨\n\nbash-5.1# ps efx ww\n\n\n# ççæå¤å°åå­\n\nbash-5.1# free -h\n\n\n# ççåæ ¸å¯å¨åæ°\n\nbash-5.1# cat cmdline\n\n\n# ççsystemctlçæå¡\n\nbash-5.1# systemctl list-units\n  unit                                                                                                                                                  load   active     sub       description          \n  proc-sys-fs-binfmt_misc.automount                                                                                                                     loaded active     waiting   arbitrary executable file formats file system automount point\n  dev-pmem0p1.device                                                                                                                                    loaded activating tentative /dev/pmem0p1         \n  -.mount                                                                                                                                               loaded active     mounted   root mount\n  etc-machine\\x2did.mount                                                                                                                               loaded active     mounted   /etc/machine-id\n  etc-resolv.conf.mount                                                                                                                                 loaded active     mounted   /etc/resolv.conf\n  run-kata\\x2dcontainers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-sandbox-shm.mount                                                                                                              loaded active     mounted   /run/kata-containers/sandbox/shm\n  run-kata\\x2dcontainers-shared-containers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a\\x2d172195b99cf7a9fd\\x2dserviceaccount.mount loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount\n  run-kata\\x2dcontainers-shared-containers-watchable.mount                                                                                              loaded active     mounted   /run/kata-containers/shared/containers/watchable\n  run-kata\\x2dcontainers-shared-containers.mount                                                                                                        loaded active     mounted   /run/kata-containers/shared/containers\n  run-sandbox\\x2dns-ipc.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/ipc\n  run-sandbox\\x2dns-uts.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/uts\n  tmp.mount                                                                                                                                             loaded active     mounted   temporary directory /tmp\n  systemd-ask-password-console.path                                                                                                                     loaded active     waiting   dispatch password requests to console directory watch\n  init.scope                                                                                                                                            loaded active     running   system and service manager\nâ chronyd.service                                                                                                                                       loaded failed     failed    ntp client/server\n  kata-agent.service                                                                                                                                    loaded active     running   kata containers agent\n  systemd-remount-fs.service                                                                                                                            loaded active     exited    remount root and kernel file systems\n  systemd-sysctl.service                                                                                                                                loaded active     exited    apply kernel variables\n  -.slice                                                                                                                                               loaded active     active    root slice\n  system.slice                                                                                                                                          loaded active     active    system slice         \n  systemd-coredump.socket                                                                                                                               loaded active     listening process core dump socket\n  basic.target                                                                                                                                          loaded active     active    basic system\n  cryptsetup.target                                                                                                                                     loaded active     active    local encrypted volumes\n  kata-containers.target                                                                                                                                loaded active     active    kata containers agent target\n  local-fs-pre.target                                                                                                                                   loaded active     active    preparation for local file systems\n  local-fs.target                                                                                                                                       loaded active     active    local file systems\n  paths.target                                                                                                                                          loaded active     active    path units\n  slices.target                                                                                                                                         loaded active     active    slice units\n  sockets.target                                                                                                                                        loaded active     active    socket units\n  swap.target                                                                                                                                           loaded active     active    swaps\n  sysinit.target                                                                                                                                        loaded active     active    system initialization\n  timers.target                                                                                                                                         loaded active     active    timer units          \n  systemd-tmpfiles-clean.timer                                                                                                                          loaded active     waiting   daily cleanup of temporary directories\n\nload   = reflects whether the unit definition was properly loaded.\nactive = the high-level unit activation state, i.e. generalization of sub.\nsub    = the low-level unit activation state, values depend on unit type.\n37 loaded units listed. pass --all to see loaded but inactive units, too.\nto show all installed unit files use \'systemctl list-unit-files\'.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\nbash-5.1#   systemctl cat kata-containers.target\n# /usr/lib/systemd/system/kata-containers.target\n#\n# copyright (c) 2018-2019 intel corporation\n#\n# spdx-license-identifier: apache-2.0\n#\n\n[unit]\ndescription=kata containers agent target\nrequires=basic.target\nrequires=tmp.mount\nwants=chronyd.service\nrequires=kata-agent.service\nconflicts=rescue.service rescue.target\nafter=basic.target rescue.service rescue.target\nallowisolate=yes\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# cpuinfo/meminfo (2c)\n\nbash-5.1# more /proc/cpuinfo\nprocessor       : 0\nvendor_id       : genuineintel\ncpu family      : 6\nmodel           : 158\nmodel name      : intel(r) core(tm) i7-7700 cpu @ 3.60ghz\nstepping        : 9\nmicrocode       : 0xea\ncpu mhz         : 3599.982\ncache size      : 16384 kb\nphysical id     : 0\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_ arat md_clearinvpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1--more--e_timer aes xsave avx f16c rdra--more--\niority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest pmld ept_1gb flexpr--more--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --more--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\nprocessor       : 1\nvendor_id       : genuineintel\ncpu family      : 6\nmodel           : 158\nmodel name      : intel(r) core(tm) i7-7700 cpu @ 3.60ghz\nstepping        : 9\nmicrocode       : 0xea\ncpu mhz         : 3599.982\ncache size      : 16384 kb\nphysical id     : 7\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nlushopt xsaveopt xsavec xgetbv1 arat md_clearinvpcid rtm mpx rdseed adx smap clf--more--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --more--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\n[root@localhost ~]# more /proc/meminfo   (??)\nmemtotal:        7935356 kb\nmemfree:          478024 kb\nmemavailable:    1827752 kb\nbuffers:            1064 kb\ncached:          1903388 kb\nswapcached:            0 kb\nactive:          5728076 kb\ninactive:         891144 kb\nactive(anon):    5029108 kb\ninactive(anon):   207680 kb\nactive(file):     698968 kb\ninactive(file):   683464 kb\nunevictable:           4 kb\nmlocked:               4 kb\nswaptotal:             0 kb\nswapfree:              0 kb\ndirty:              9584 kb\nwriteback:             0 kb\nanonpages:       4715640 kb\nmapped:           564200 kb\nshmem:            522020 kb\nslab:             469116 kb\nsreclaimable:     280468 kb\nsunreclaim:       188648 kb\nkernelstack:       43248 kb\npagetables:        39740 kb\nnfs_unstable:          0 kb\nbounce:                0 kb\nwritebacktmp:          0 kb\ncommitlimit:     3967676 kb\ncommitted_as:   23822760 kb\nvmalloctotal:   34359738367 kb\nvmallocused:      461976 kb\nvmallocchunk:   34358937596 kb\npercpu:            11552 kb\nhardwarecorrupted:     0 kb\nanonhugepages:     20480 kb\ncmatotal:              0 kb\ncmafree:               0 kb\nhugepages_total:       0\nhugepages_free:        0\nhugepages_rsvd:        0\nhugepages_surp:        0\nhugepagesize:       2048 kb\ndirectmap4k:      211152 kb\ndirectmap2m:     8038400 kb\ndirectmap1g:           0 kb\n[root@localhost ~]#\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n\n\n\n# æ»ç»\n\nlimit 1c1g default:1c2g\n\nvm: cpuinfoï¼ 2cpu meminfo: memtotal: 7935356 kb (7.5g)\n\npod: cpuinfoï¼2cpu meminfo: memtotal: 3090364 kb (2.9g) free -h: 2.9g',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§",frontmatter:{title:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0201/",categories:["ææ¯æè°","kata-containers","kataé¨ç½²"],tags:[null],titleTag:"åå",readingShow:"top",description:"$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml",meta:[{name:"twitter:title",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{name:"twitter:description",content:"$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{property:"og:description",content:"$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{itemprop:"description",content:"$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.md",key:"v-d7e2a582",path:"/pages/kata0201/",headers:[{level:2,title:"é¨ç½²kata-monitor",slug:"é¨ç½²kata-monitor",normalizedTitle:"é¨ç½²kata-monitor",charIndex:916},{level:3,title:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",slug:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",normalizedTitle:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",charIndex:958},{level:3,title:"promethueså¢å scrape_configs",slug:"promethueså¢å scrape-configs",normalizedTitle:"promethueså¢å scrape_configs",charIndex:1280},{level:3,title:"å¯¼å¥ Grafana dashborad",slug:"å¯¼å¥-grafana-dashborad",normalizedTitle:"å¯¼å¥ grafana dashborad",charIndex:1395},{level:2,title:"æ£æ¥ï¼",slug:"æ£æ¥",normalizedTitle:"æ£æ¥ï¼",charIndex:1693}],headersStr:"é¨ç½²kata-monitor kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨ promethueså¢å scrape_configs å¯¼å¥ Grafana dashborad æ£æ¥ï¼",content:'# åæ\n\n * ç©çæºå·²å¼å¯ç¡¬ä»¶èæå\n * k8så®¹å¨è¿è¡æ¶ä½¿ç¨containerdï¼æ¨èï¼\n\n\n# é¨ç½²\n\n * ç»kataèç¹æä¸label: kata-worker=trueï¼å¦æä¸éè¦åºåkataèç¹ï¼å¯ä»¥ækata-deployä¸­çèç¹äº²åæ§å»æï¼\n * çæconfiguration.tomlååå°åä¸ªkataèç¹ï¼ææèç¹ï¼/etc/kata-containers/configuration.toml\n * åå»ºkataèµæºï¼kata-rbac.yamlãkata-deploy.yamlï¼åå»ºruntimeClassï¼ runtimeClass.yaml\n\n$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=condition=Ready -l name=kata-deploy pod\n\n$ kubectl apply -f kata-runtimeClasses.yaml\n\n\n1\n2\n3\n4\n5\n6\n\n * åä¸ªkataèç¹ï¼ææèç¹ï¼åå»ºè½¯é¾æ¥ï¼\n\nln -s /opt/kata/bin/kata-runtime /usr/bin/kata-runtime\nln -s /opt/kata/bin/kata-monitor /usr/bin/kata-monitor\n\n\n1\n2\n\n\næ³¨ï¼\n\n * éè¦æ³¨æçæ¯kata-deployéå¯å¯è½ä¼å¯¼è´é»è®¤çconfiguration.tomlæä»¶æ¢å¤é»è®¤éç½®ï¼å æ­¤ä½¿ç¨çæ¯ä¼åçº§æ´é«ç/etc/kata-containers/configuration.toml\n * ä½¿ç¨ctr runåå»ºçå®¹å¨é»è®¤ä½¿ç¨çæ¯-qemuéç½®ï¼/opt/kata/share/defaults/kata-containers/configuration-qemu.tomlï¼ï¼å¦æéè¦ä½¿ç¨ctr runæµè¯ï¼è¯·åæ­¥éç½®å°-qemuéç½®ï¼æéå®åshimé¾æ¥å°æ°çæä»¶ä¸\n\n\n# é¨ç½²kata-monitor\n\nè¯¦æè§[[kata-monitorçæ§]]\n\n\n# kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[Unit]\nDescription=kata monitor\n\n[Service]\nExecStart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nRestart=always\nStartLimitInterval=0\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹IP>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ Grafana dashborad\n\n$ curl -XPOST -i <grafanaèç¹IP>:3000/api/dashboards/import \\\n    -u admin:admin \\\n    -H "Content-Type: application/json" \\\n\t-d "{\\"dashboard\\":$(curl -sL https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\n\n1\n2\n3\n4\n\n\n\n# æ£æ¥ï¼\n\n[root@rqy-k8s-1 ~]# kata-runtime check\n  WARN[0000] Not running network checks as super user      arch=amd64 name=kata-runtime pid=48176 source=runtime\n  System is capable of running Kata Containers\n  System can currently create Kata Containers\n\n\n1\n2\n3\n4\n\n\n\n# å¸è½½\n\n * å é¤æækataå®¹å¨\n * å é¤kataèç¹è½¯è¿æ¥\n * å é¤kataèµæºï¼kata-rbac.yamlãkata-deploy.yamlãruntimeClass.yaml\n * å é¤kataèç¹configuration.tomlæä»¶\n\n$ kubectl delete -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=delete -l name=kata-deploy pod\n\n$ kubectl apply -f kata-cleanup.yaml\n# The cleanup daemon-set will run a single time, cleaning up the node-label, which makes it difficult to check in an automated fashion. This process should take, at most, 5 minutes.\n# kubectl get pod -n kube-system | grep kubelet-kata-cleanup\n\n$ kubectl delete -f kata-cleanup.yaml\n$ kubectl delete -f kata-rbac.yaml\n$ kubectl delete -f kata-runtimeClasses.yaml\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åçº§(TODO)',normalizedContent:'# åæ\n\n * ç©çæºå·²å¼å¯ç¡¬ä»¶èæå\n * k8så®¹å¨è¿è¡æ¶ä½¿ç¨containerdï¼æ¨èï¼\n\n\n# é¨ç½²\n\n * ç»kataèç¹æä¸label: kata-worker=trueï¼å¦æä¸éè¦åºåkataèç¹ï¼å¯ä»¥ækata-deployä¸­çèç¹äº²åæ§å»æï¼\n * çæconfiguration.tomlååå°åä¸ªkataèç¹ï¼ææèç¹ï¼/etc/kata-containers/configuration.toml\n * åå»ºkataèµæºï¼kata-rbac.yamlãkata-deploy.yamlï¼åå»ºruntimeclassï¼ runtimeclass.yaml\n\n$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=condition=ready -l name=kata-deploy pod\n\n$ kubectl apply -f kata-runtimeclasses.yaml\n\n\n1\n2\n3\n4\n5\n6\n\n * åä¸ªkataèç¹ï¼ææèç¹ï¼åå»ºè½¯é¾æ¥ï¼\n\nln -s /opt/kata/bin/kata-runtime /usr/bin/kata-runtime\nln -s /opt/kata/bin/kata-monitor /usr/bin/kata-monitor\n\n\n1\n2\n\n\næ³¨ï¼\n\n * éè¦æ³¨æçæ¯kata-deployéå¯å¯è½ä¼å¯¼è´é»è®¤çconfiguration.tomlæä»¶æ¢å¤é»è®¤éç½®ï¼å æ­¤ä½¿ç¨çæ¯ä¼åçº§æ´é«ç/etc/kata-containers/configuration.toml\n * ä½¿ç¨ctr runåå»ºçå®¹å¨é»è®¤ä½¿ç¨çæ¯-qemuéç½®ï¼/opt/kata/share/defaults/kata-containers/configuration-qemu.tomlï¼ï¼å¦æéè¦ä½¿ç¨ctr runæµè¯ï¼è¯·åæ­¥éç½®å°-qemuéç½®ï¼æéå®åshimé¾æ¥å°æ°çæä»¶ä¸\n\n\n# é¨ç½²kata-monitor\n\nè¯¦æè§[[kata-monitorçæ§]]\n\n\n# kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[unit]\ndescription=kata monitor\n\n[service]\nexecstart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nrestart=always\nstartlimitinterval=0\nrestartsec=10\n\n[install]\nwantedby=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹ip>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ grafana dashborad\n\n$ curl -xpost -i <grafanaèç¹ip>:3000/api/dashboards/import \\\n    -u admin:admin \\\n    -h "content-type: application/json" \\\n\t-d "{\\"dashboard\\":$(curl -sl https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\n\n1\n2\n3\n4\n\n\n\n# æ£æ¥ï¼\n\n[root@rqy-k8s-1 ~]# kata-runtime check\n  warn[0000] not running network checks as super user      arch=amd64 name=kata-runtime pid=48176 source=runtime\n  system is capable of running kata containers\n  system can currently create kata containers\n\n\n1\n2\n3\n4\n\n\n\n# å¸è½½\n\n * å é¤æækataå®¹å¨\n * å é¤kataèç¹è½¯è¿æ¥\n * å é¤kataèµæºï¼kata-rbac.yamlãkata-deploy.yamlãruntimeclass.yaml\n * å é¤kataèç¹configuration.tomlæä»¶\n\n$ kubectl delete -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=delete -l name=kata-deploy pod\n\n$ kubectl apply -f kata-cleanup.yaml\n# the cleanup daemon-set will run a single time, cleaning up the node-label, which makes it difficult to check in an automated fashion. this process should take, at most, 5 minutes.\n# kubectl get pod -n kube-system | grep kubelet-kata-cleanup\n\n$ kubectl delete -f kata-cleanup.yaml\n$ kubectl delete -f kata-rbac.yaml\n$ kubectl delete -f kata-runtimeclasses.yaml\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åçº§(todo)',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata-deployåæ",frontmatter:{title:"kata-deployåæ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0202/",categories:["ææ¯æè°","kata-containers","kataé¨ç½²"],tags:[null],titleTag:"åå",readingShow:"top",description:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.",meta:[{name:"twitter:title",content:"kata-deployåæ"},{name:"twitter:description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-deployåæ"},{property:"og:description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-deployåæ"},{itemprop:"description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.md",key:"v-7ebc8c8b",path:"/pages/kata0202/",headers:[{level:2,title:"Host artifacts:",slug:"host-artifacts",normalizedTitle:"host artifacts:",charIndex:291},{level:2,title:"Virtual Machine artifacts:",slug:"virtual-machine-artifacts",normalizedTitle:"virtual machine artifacts:",charIndex:431},{level:2,title:"kata-deployåé¨",slug:"kata-deployåé¨",normalizedTitle:"kata-deployåé¨",charIndex:1405}],headersStr:"Host artifacts: Virtual Machine artifacts: kata-deployåé¨",content:'å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.\n\n\n# Host artifacts:\n\ncloud-hypervisor, firecracker, qemu, and supporting binaries containerd-shim-kata-v2 kata-collect-data.sh kata-runtime\n\n\n# Virtual Machine artifacts:\n\nkata-containers.img and kata-containers-initrd.img vmlinuz.container and vmlinuz-virtiofs.container\n\n\n# é¨ç½²kata-deployä¹å\n\n[root@localhost ~]# ps -ef | grep kata\nroot     16533 16031  0 14:26 pts/1    00:00:00 grep --color=auto kata\nroot     24526 20728  0 11:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\n[root@localhost ~]# ps -ef | grep qemu\nroot     18834 16031  0 14:27 pts/1    00:00:00 grep --color=auto qemu\n[root@localhost ~]#\n[root@localhost ~]#\n[root@localhost ~]# ps -ef | grep kvm\nroot       756     2  0 Mar25 ?        00:00:00 [kvm-irqfd-clean]\nroot     18975 16031  0 14:27 pts/1    00:00:00 grep --color=auto kvm\n[root@localhost ~]# ls /opt/kata/\nbin  libexec  share\n[root@localhost ~]# ls /opt/kata/bin/\ncloud-hypervisor         firecracker  kata-collect-data.sh  kata-runtime\ncontainerd-shim-kata-v2  jailer       kata-monitor          qemu-system-x86_64\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# kata-deployåé¨\n\n[root@kata-deploy-6r86s /]# ps -ef \nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 03:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\nroot        80     1  0 03:09 ?        00:00:00 sleep infinity\nroot        81     0  0 06:41 pts/0    00:00:00 bash\nroot        96    81  0 06:42 pts/0    00:00:00 ps -ef\næè½½/run/systemåå¯ä»¥æ§å¶å®¿ä¸»æºæå¡\n[root@kata-deploy-6r86s /]# systemctl status containerd\nâ containerd.service - containerd container runtime\n   Loaded: loaded (/usr/lib/systemd/system/containerd.service; enabled; vendor preset: disabled)\n   Active: active (running) since Thu 2022-04-07 06:47:47 UTC; 6min ago\n     Docs: https://containerd.io\n  Process: 3033 ExecStartPre=/sbin/modprobe overlay (code=exited, status=0/SUCCESS)\n Main PID: 3035\n    Tasks: 585\n   Memory: 535.9M\n   CGroup: /system.slice/containerd.service\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# é¨ç½²åcontainerdéç½®è¿½å \n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# é¨ç½²æ¥å¿ï¼\n\ncopying kata artifacts onto host\nwarning: containerd-shim-kata-fc-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-fc.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nwarning: containerd-shim-kata-qemu-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nCreating the default shim-v2 binary\nwarning: containerd-shim-kata-clh-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-clh.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nAdd Kata Containers as a supported runtime for containerd\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\nnode/localhost.localdomain unlabeled\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',normalizedContent:'å¨èç¹ä¸å®è£å¿è¦ç kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼daemonset æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® cri-o æ containerd ä»¥æ³¨åä¸ä¸ªruntimeclassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼daemonset éæ°å¯å¨ cri-o æ containerdãå é¤åï¼daemonset ä¼å é¤ kata äºè¿å¶æä»¶å vm å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.\n\n\n# host artifacts:\n\ncloud-hypervisor, firecracker, qemu, and supporting binaries containerd-shim-kata-v2 kata-collect-data.sh kata-runtime\n\n\n# virtual machine artifacts:\n\nkata-containers.img and kata-containers-initrd.img vmlinuz.container and vmlinuz-virtiofs.container\n\n\n# é¨ç½²kata-deployä¹å\n\n[root@localhost ~]# ps -ef | grep kata\nroot     16533 16031  0 14:26 pts/1    00:00:00 grep --color=auto kata\nroot     24526 20728  0 11:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\n[root@localhost ~]# ps -ef | grep qemu\nroot     18834 16031  0 14:27 pts/1    00:00:00 grep --color=auto qemu\n[root@localhost ~]#\n[root@localhost ~]#\n[root@localhost ~]# ps -ef | grep kvm\nroot       756     2  0 mar25 ?        00:00:00 [kvm-irqfd-clean]\nroot     18975 16031  0 14:27 pts/1    00:00:00 grep --color=auto kvm\n[root@localhost ~]# ls /opt/kata/\nbin  libexec  share\n[root@localhost ~]# ls /opt/kata/bin/\ncloud-hypervisor         firecracker  kata-collect-data.sh  kata-runtime\ncontainerd-shim-kata-v2  jailer       kata-monitor          qemu-system-x86_64\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# kata-deployåé¨\n\n[root@kata-deploy-6r86s /]# ps -ef \nuid        pid  ppid  c stime tty          time cmd\nroot         1     0  0 03:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\nroot        80     1  0 03:09 ?        00:00:00 sleep infinity\nroot        81     0  0 06:41 pts/0    00:00:00 bash\nroot        96    81  0 06:42 pts/0    00:00:00 ps -ef\næè½½/run/systemåå¯ä»¥æ§å¶å®¿ä¸»æºæå¡\n[root@kata-deploy-6r86s /]# systemctl status containerd\nâ containerd.service - containerd container runtime\n   loaded: loaded (/usr/lib/systemd/system/containerd.service; enabled; vendor preset: disabled)\n   active: active (running) since thu 2022-04-07 06:47:47 utc; 6min ago\n     docs: https://containerd.io\n  process: 3033 execstartpre=/sbin/modprobe overlay (code=exited, status=0/success)\n main pid: 3035\n    tasks: 585\n   memory: 535.9m\n   cgroup: /system.slice/containerd.service\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# é¨ç½²åcontainerdéç½®è¿½å \n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# é¨ç½²æ¥å¿ï¼\n\ncopying kata artifacts onto host\nwarning: containerd-shim-kata-fc-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-fc.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nwarning: containerd-shim-kata-qemu-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\ncreating the default shim-v2 binary\nwarning: containerd-shim-kata-clh-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-clh.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nadd kata containers as a supported runtime for containerd\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\nnode/localhost.localdomain unlabeled\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å¸¸ç¨å½ä»¤",frontmatter:{title:"å¸¸ç¨å½ä»¤",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0401/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n>\n> System is capable of running Kata Containers\n>\n> System can currently create Kata Containers",meta:[{name:"twitter:title",content:"å¸¸ç¨å½ä»¤"},{name:"twitter:description",content:"WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n>\n> System is capable of running Kata Containers\n>\n> System can currently create Kata Containers"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¸¸ç¨å½ä»¤"},{property:"og:description",content:"WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n>\n> System is capable of running Kata Containers\n>\n> System can currently create Kata Containers"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¸¸ç¨å½ä»¤"},{itemprop:"description",content:"WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n>\n> System is capable of running Kata Containers\n>\n> System can currently create Kata Containers"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.md",key:"v-33dd887e",path:"/pages/kata0401/",headers:[{level:2,title:"è¿å¥kataèææº  kata-runtime  exec",slug:"è¿å¥kataèææº-kata-runtime-exec",normalizedTitle:"è¿å¥kataèææº  kata-runtime  exec",charIndex:null}],headersStr:"è¿å¥kataèææº  kata-runtime  exec",content:'# kata-rumtime\n\n * kata-runtime check\n\n> WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n> \n> System is capable of running Kata Containers\n> \n> System can currently create Kata Containers\n\n * kata-runtime env\n\n * kata-runtime metrics fd77dc25ad3e958ded82cc5449c521a00b8300b71981370ba43a757e14ce7b19\n\n\n# è¿å¥kataèææº kata-runtime exec\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#connect-to-debug-console\n\nkata v2ç¯å¢ä¸­èèå°å®å¨æ§é®é¢ä¸è½ç´æ¥ä½¿ç¨kata-runtime execè¿å¥sandboxèææºï¼å¹¶ä¸kata releaseçæ¬çéåæ²¡æåå«ç»å½ç»ä»¶ï¼å¦æè¦ç»å½éè¦éæ°å¶ä½sandboxæä»¶ç³»ç»ï¼ç»å½sandboxéè¦éè¿kata-monitorå¹¶ä¸sandboxéè¦å¨kata-monitorå¯å¨ä¹ååå¯å¨æè½è¿è¡è°è¯å·¥ä½\n\n * ä¿®æ¹éç½® debug_console_enabled\n\n> [agent.kata] debug_console_enabled = true\n\n * å¯å¨kata-monitor\n\n[root@rqy-k8s-1 kbuser]# /opt/kata/bin/kata-monitor\nINFO[0000] announce                    app=kata-monitor arch=amd64 git-commit=8d545f7438fc8b1189c1dcc8c414dcc50f7e5587 go-version=go1.17.3 listen-address="127.0.0.1:8090" log-level=info os=linux runtime-endpoint=/run/containerd/containerd.sock version=0.3.0\n\n\n\n# èææºéé¢ï¼æ¯ä¸ªè¶çº§ç®åçç³»ç»ï¼å½ä»¤å¥ç¼º\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\nbash-5.1# df -h\nbash: df: command not found\nbash-5.1# lsblk\nNAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\npmem0   259:0   0  126M  1 disk\n`-pmem0p1 259:1   0  124M  1 part /\nbash-5.1# ip addr\nbash: ip: command not found\nbash-5.1# ifconfig\nbash: ifconfig: command not found\n# è¯¦æè§[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# crictl\n\nctræ¯containerdçä¸ä¸ªå®¢æ·ç«¯å·¥å·\n\ncrictl æ¯ CRI å¼å®¹çå®¹å¨è¿è¡æ¶å½ä»¤è¡æ¥å£ï¼å¯ä»¥ä½¿ç¨å®æ¥æ£æ¥åè°è¯ Kubernetes èç¹ä¸çå®¹å¨è¿è¡æ¶ååºç¨ç¨åº\n\ncrictl ä½¿ç¨å½åç©ºé´ k8s.ioï¼å³crictl image list = ctr -n=k8s.io image list\n\ncrictl config runtime-endpoint unix:///run/containerd/containerd.sock crictl ps #ådocker ps crictl inspect crictl exec crictl pods # å¯ä»¥æ¥çåªäºæ¯kataå®¹å¨ crictl images # ådocker images crictl logs\n\ncrictl ps | grep stress\n86a94ad5059a4  14701355bb465   12 minutes ago   Running    stress   0    7247eaccec1b6\ncrictl inspect  86a94ad5059a4\ncrictl exec -it  86a94ad5059a4 bash\nrictl stats 86a94ad5059a4\nCONTAINER    CPU %     MEM        DISK         INODES\n86a94ad5059a4  99.88     1.628GB       0B          13\ncrictl pods | grep stress\nbcfeedf0c17bf   3 minutes ago    Ready   stress-b4fdd868-s8d7n     default     0      kata\ncrictl images | grep vish/stress\ndocker.io/vish/stress      latest          14701355bb465    1.56MB\n[root@localhost kata]# POD_ID="$(sudo crictl pods --name test -q)"\n[root@localhost kata]# echo $POD_ID\n2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb\n[root@localhost kata]# crictl inspectp -o=json $POD_ID | grep cgroupsPath\n "cgroupsPath": "/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb",\n [root@localhost kata]# cat /sys/fs/cgroup/memory/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/memory.limit_in_bytes\n524288000\n[root@rqy-k8s-1 kbuser]# ls /run/vc/vm/\n685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894  6d46a824dae01c4675da741ca2aff98b1e7eb005103d10cf0c3af6f758c97afe [root@rqy-k8s-1 kbuser]# kata-runtime exec 685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894 rpc error: code = DeadlineExceeded desc = timed out connecting to vsock 621008089:1026\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# ctr\n\nctr -n k8s.io image list\n\nctr -n k8s.io i export img.tar imgname\n\nctr -n k8s.io i import img.tar\n\nctr run -d imgname hfftest\n\n// æµè¯å¢å --rmåæ°éåºåå é¤ï¼å¦åéåºåè¿ç¨ä¸ä¼å é¤ ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\nctr -n k8s.io t kill -s SIGKILL hfftest ctr -n k8s.io t rm hfftest\n\nctr -n k8s.io snapshot rm hfftest ctr -n k8s.io container rm hfftest\n\nctr -n k8s.io tasks list\n\nctr -n k8s.io task ps hfftest ctr -n k8s.io t exec --exec-id $RANDOM -t hfftest sh\n\n\n# éåç®¡çå½ä»¤\n\ndockers images ctr -n k8s.io images list crictl images\n\ndocker inspect pause:3.1 crictl inspecti docker.io/vish/stress:latest ctræ inspecå½ä»¤\n\ndocker pull vish/stress ctr -n k8s.io pull vish/stress\n\n\n# éä»¶',normalizedContent:'# kata-rumtime\n\n * kata-runtime check\n\n> warn[0000] not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n> \n> system is capable of running kata containers\n> \n> system can currently create kata containers\n\n * kata-runtime env\n\n * kata-runtime metrics fd77dc25ad3e958ded82cc5449c521a00b8300b71981370ba43a757e14ce7b19\n\n\n# è¿å¥kataèææº kata-runtime exec\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#connect-to-debug-console\n\nkata v2ç¯å¢ä¸­èèå°å®å¨æ§é®é¢ä¸è½ç´æ¥ä½¿ç¨kata-runtime execè¿å¥sandboxèææºï¼å¹¶ä¸kata releaseçæ¬çéåæ²¡æåå«ç»å½ç»ä»¶ï¼å¦æè¦ç»å½éè¦éæ°å¶ä½sandboxæä»¶ç³»ç»ï¼ç»å½sandboxéè¦éè¿kata-monitorå¹¶ä¸sandboxéè¦å¨kata-monitorå¯å¨ä¹ååå¯å¨æè½è¿è¡è°è¯å·¥ä½\n\n * ä¿®æ¹éç½® debug_console_enabled\n\n> [agent.kata] debug_console_enabled = true\n\n * å¯å¨kata-monitor\n\n[root@rqy-k8s-1 kbuser]# /opt/kata/bin/kata-monitor\ninfo[0000] announce                    app=kata-monitor arch=amd64 git-commit=8d545f7438fc8b1189c1dcc8c414dcc50f7e5587 go-version=go1.17.3 listen-address="127.0.0.1:8090" log-level=info os=linux runtime-endpoint=/run/containerd/containerd.sock version=0.3.0\n\n\n\n# èææºéé¢ï¼æ¯ä¸ªè¶çº§ç®åçç³»ç»ï¼å½ä»¤å¥ç¼º\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\nbash-5.1# df -h\nbash: df: command not found\nbash-5.1# lsblk\nname    maj:min rm  size ro type mountpoints\npmem0   259:0   0  126m  1 disk\n`-pmem0p1 259:1   0  124m  1 part /\nbash-5.1# ip addr\nbash: ip: command not found\nbash-5.1# ifconfig\nbash: ifconfig: command not found\n# è¯¦æè§[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# crictl\n\nctræ¯containerdçä¸ä¸ªå®¢æ·ç«¯å·¥å·\n\ncrictl æ¯ cri å¼å®¹çå®¹å¨è¿è¡æ¶å½ä»¤è¡æ¥å£ï¼å¯ä»¥ä½¿ç¨å®æ¥æ£æ¥åè°è¯ kubernetes èç¹ä¸çå®¹å¨è¿è¡æ¶ååºç¨ç¨åº\n\ncrictl ä½¿ç¨å½åç©ºé´ k8s.ioï¼å³crictl image list = ctr -n=k8s.io image list\n\ncrictl config runtime-endpoint unix:///run/containerd/containerd.sock crictl ps #ådocker ps crictl inspect crictl exec crictl pods # å¯ä»¥æ¥çåªäºæ¯kataå®¹å¨ crictl images # ådocker images crictl logs\n\ncrictl ps | grep stress\n86a94ad5059a4  14701355bb465   12 minutes ago   running    stress   0    7247eaccec1b6\ncrictl inspect  86a94ad5059a4\ncrictl exec -it  86a94ad5059a4 bash\nrictl stats 86a94ad5059a4\ncontainer    cpu %     mem        disk         inodes\n86a94ad5059a4  99.88     1.628gb       0b          13\ncrictl pods | grep stress\nbcfeedf0c17bf   3 minutes ago    ready   stress-b4fdd868-s8d7n     default     0      kata\ncrictl images | grep vish/stress\ndocker.io/vish/stress      latest          14701355bb465    1.56mb\n[root@localhost kata]# pod_id="$(sudo crictl pods --name test -q)"\n[root@localhost kata]# echo $pod_id\n2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb\n[root@localhost kata]# crictl inspectp -o=json $pod_id | grep cgroupspath\n "cgroupspath": "/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb",\n [root@localhost kata]# cat /sys/fs/cgroup/memory/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/memory.limit_in_bytes\n524288000\n[root@rqy-k8s-1 kbuser]# ls /run/vc/vm/\n685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894  6d46a824dae01c4675da741ca2aff98b1e7eb005103d10cf0c3af6f758c97afe [root@rqy-k8s-1 kbuser]# kata-runtime exec 685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894 rpc error: code = deadlineexceeded desc = timed out connecting to vsock 621008089:1026\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# ctr\n\nctr -n k8s.io image list\n\nctr -n k8s.io i export img.tar imgname\n\nctr -n k8s.io i import img.tar\n\nctr run -d imgname hfftest\n\n// æµè¯å¢å --rmåæ°éåºåå é¤ï¼å¦åéåºåè¿ç¨ä¸ä¼å é¤ ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\nctr -n k8s.io t kill -s sigkill hfftest ctr -n k8s.io t rm hfftest\n\nctr -n k8s.io snapshot rm hfftest ctr -n k8s.io container rm hfftest\n\nctr -n k8s.io tasks list\n\nctr -n k8s.io task ps hfftest ctr -n k8s.io t exec --exec-id $random -t hfftest sh\n\n\n# éåç®¡çå½ä»¤\n\ndockers images ctr -n k8s.io images list crictl images\n\ndocker inspect pause:3.1 crictl inspecti docker.io/vish/stress:latest ctræ inspecå½ä»¤\n\ndocker pull vish/stress ctr -n k8s.io pull vish/stress\n\n\n# éä»¶',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kataä½¿ç¨é®é¢æ±æ»",frontmatter:{title:"kataä½¿ç¨é®é¢æ±æ»",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0402/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã",meta:[{name:"twitter:title",content:"kataä½¿ç¨é®é¢æ±æ»"},{name:"twitter:description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataä½¿ç¨é®é¢æ±æ»"},{property:"og:description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataä½¿ç¨é®é¢æ±æ»"},{itemprop:"description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».md",key:"v-03d01b37",path:"/pages/kata0402/",headers:[{level:2,title:"ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨",slug:"ä¸æ¯æsubpaths-emptydir-ä½¿ç¨",normalizedTitle:"ä¸æ¯æsubpaths(emptydir )ä½¿ç¨",charIndex:75},{level:2,title:"kataä¸æ¯æhostç½ç»",slug:"kataä¸æ¯æhostç½ç»",normalizedTitle:"kataä¸æ¯æhostç½ç»",charIndex:104},{level:2,title:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",slug:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",normalizedTitle:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",charIndex:212},{level:2,title:"ä¸æ¯æcpuset-cpus",slug:"ä¸æ¯æcpuset-cpus",normalizedTitle:"ä¸æ¯æcpuset-cpus",charIndex:433},{level:2,title:"å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢",slug:"å®¹å¨åfioæµè¯-ååå­-ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oom-æèç¹å¡æ­»-èç¹å¼å¸¸é®é¢",normalizedTitle:"å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢",charIndex:1995},{level:2,title:"OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼",slug:"overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢",normalizedTitle:"overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼",charIndex:2267},{level:2,title:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼",slug:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨release",normalizedTitle:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼",charIndex:2301},{level:2,title:"æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼",slug:"æªenable-dax-fioæµè¯ç»æè¾å·®",normalizedTitle:"æªenable dax, fioæµè¯ç»æè¾å·®ï¼ï¼",charIndex:2336},{level:2,title:"qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",slug:"qemu-ä¸è½ç´æ¥ä½¿ç¨-veth-pair-å¯¼è´vm-containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢-kubevirtåæ ·çé®é¢",normalizedTitle:"qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",charIndex:2374}],headersStr:"ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨ kataä¸æ¯æhostç½ç» ä¸æ¯æç½ç»å½åç©ºé´å±äº« ä¸æ¯æcpuset-cpus å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢ OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼ å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼ æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼ qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",content:'# docker å¼å®¹é®é¢\n\n * kataå·²å»ædocker cliæ¯æï¼è¯·ä½¿ç¨crictlå½ä»¤\n\n * DinDé®é¢\n\n\n# ä½¿ç¨éå¶ï¼\n\n\n# ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨\n\n\n# kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n\n# ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\nDocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãKata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° Kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° VMãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# ä¸æ¯æcpuset-cpus\n\nhttps://github.com/kata-containers/runtime/issues/1079 docker run -d --cpuset-cpus= â 0-1 â ubuntu sleep 30000\n\n\n# cträ¾èµ/configuration-qemu.tomlè·¯å¾é®é¢\n\n/etc/kata-containers/configuration.tomlå·²å­å¨ï¼ä¸ºæµè¯å é¤äºé»è®¤éç½®æä»¶ï¼ä½æ¯containerdéç½®ä¿ç\n\n[root@localhost ~]# cat  /etc/containerd/config.toml \n      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n        runtime_type = "io.containerd.kata.v2"\n        privileged_without_host_devices = true\n        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n           ConfigPath = "/etc/kata-containers/configuration.toml"\n\n[root@localhost ~]# kubectl get runtimeclasses.node.k8s.io kata-containers -o yaml | grep handler\nhandler: kata\n\n[root@localhost ~]# ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/library/busybox:latest hfftest dmesg \nctr: Cannot find usable config file (file /opt/kata/share/defaults/kata-containers/configuration-qemu.toml does not exist): not found\n\n\n[root@rqy-k8s-1 kbuser]# ll /usr/local/bin/containerd-shim-kata-v2\nlrwxrwxrwx. 1 root root 43 Mar 18 11:31 /usr/local/bin/containerd-shim-kata-v2 -> /usr/local/bin/containerd-shim-kata-qemu-v2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# kata deployéå¯/èç¹éå¯ä¼å¯¼è´éç½®è¿åé®é¢ï¼å¿ç°ï¼\n\ncat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=true\n\n## éå¯å\n[root@localhost ~]# cat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=false\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# èµæºå¼éé®é¢\n\n\n# å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢\n\né®é¢1ï¼ pod sanbox changeï¼execéåºï¼podéå¯æ¬¡æ°å 1 é®é¢2ï¼ èç¹å¡æ­»ï¼èç¹notradyï¼ç¸åéç½®runcæµè¯æ è¯¥é®é¢\n\næçï¼ æªå¼å¯SandboxCgroupOnlyï¼å¯¼è´sanbox overheadæ éå¶å ç¨ä¸»æºèµæºï¼å¯¼è´èç¹å¼å¸¸ï¼è¿æ ·çè¯å°±è¯´ækataçèµæºå¼éè¿æ¯å¾å¤§çã\n\nå¼å¯SandboxCgroupOnlyåæµè¯å¡æ­»ï¼ä½æ¯pod/èç¹æªå¼å¸¸,è¿ç¨ç»æããã æä»¥ï¼é®é¢æ¯ï¼ä¸ºä»ä¹æ²¡æéè¯¯ä¿¡æ¯\n\n\n# OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼\n\n\n# å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼\n\n\n# å­å¨æ§è½é®é¢\n\n\n# æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼\n\n\n# ç½ç»é®é¢\n\n\n# qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md https://github.com/pulls?q=label%3Alimitation+org%3Akata-containers+is%3Aclosed https://github.com/chestack/k8s-blog/blob/master/kata-container/kata-container.md',normalizedContent:'# docker å¼å®¹é®é¢\n\n * kataå·²å»ædocker cliæ¯æï¼è¯·ä½¿ç¨crictlå½ä»¤\n\n * dindé®é¢\n\n\n# ä½¿ç¨éå¶ï¼\n\n\n# ä¸æ¯æsubpaths(emptydir )ä½¿ç¨\n\n\n# kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n\n# ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\ndocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãkata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° vmãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# ä¸æ¯æcpuset-cpus\n\nhttps://github.com/kata-containers/runtime/issues/1079 docker run -d --cpuset-cpus= â 0-1 â ubuntu sleep 30000\n\n\n# cträ¾èµ/configuration-qemu.tomlè·¯å¾é®é¢\n\n/etc/kata-containers/configuration.tomlå·²å­å¨ï¼ä¸ºæµè¯å é¤äºé»è®¤éç½®æä»¶ï¼ä½æ¯containerdéç½®ä¿ç\n\n[root@localhost ~]# cat  /etc/containerd/config.toml \n      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n        runtime_type = "io.containerd.kata.v2"\n        privileged_without_host_devices = true\n        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n           configpath = "/etc/kata-containers/configuration.toml"\n\n[root@localhost ~]# kubectl get runtimeclasses.node.k8s.io kata-containers -o yaml | grep handler\nhandler: kata\n\n[root@localhost ~]# ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/library/busybox:latest hfftest dmesg \nctr: cannot find usable config file (file /opt/kata/share/defaults/kata-containers/configuration-qemu.toml does not exist): not found\n\n\n[root@rqy-k8s-1 kbuser]# ll /usr/local/bin/containerd-shim-kata-v2\nlrwxrwxrwx. 1 root root 43 mar 18 11:31 /usr/local/bin/containerd-shim-kata-v2 -> /usr/local/bin/containerd-shim-kata-qemu-v2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# kata deployéå¯/èç¹éå¯ä¼å¯¼è´éç½®è¿åé®é¢ï¼å¿ç°ï¼\n\ncat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=true\n\n## éå¯å\n[root@localhost ~]# cat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=false\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# èµæºå¼éé®é¢\n\n\n# å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢\n\né®é¢1ï¼ pod sanbox changeï¼execéåºï¼podéå¯æ¬¡æ°å 1 é®é¢2ï¼ èç¹å¡æ­»ï¼èç¹notradyï¼ç¸åéç½®runcæµè¯æ è¯¥é®é¢\n\næçï¼ æªå¼å¯sandboxcgrouponlyï¼å¯¼è´sanbox overheadæ éå¶å ç¨ä¸»æºèµæºï¼å¯¼è´èç¹å¼å¸¸ï¼è¿æ ·çè¯å°±è¯´ækataçèµæºå¼éè¿æ¯å¾å¤§çã\n\nå¼å¯sandboxcgrouponlyåæµè¯å¡æ­»ï¼ä½æ¯pod/èç¹æªå¼å¸¸,è¿ç¨ç»æããã æä»¥ï¼é®é¢æ¯ï¼ä¸ºä»ä¹æ²¡æéè¯¯ä¿¡æ¯\n\n\n# overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼\n\n\n# å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼\n\n\n# å­å¨æ§è½é®é¢\n\n\n# æªenable dax, fioæµè¯ç»æè¾å·®ï¼ï¼\n\n\n# ç½ç»é®é¢\n\n\n# qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md https://github.com/pulls?q=label%3alimitation+org%3akata-containers+is%3aclosed https://github.com/chestack/k8s-blog/blob/master/kata-container/kata-container.md',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata debugä¸æ¥å¿",frontmatter:{title:"kata debugä¸æ¥å¿",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0404/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"Kata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã",meta:[{name:"twitter:title",content:"kata debugä¸æ¥å¿"},{name:"twitter:description",content:"Kata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata debugä¸æ¥å¿"},{property:"og:description",content:"Kata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata debugä¸æ¥å¿"},{itemprop:"description",content:"Kata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.md",key:"v-6e85c154",path:"/pages/kata0404/",headers:[{level:2,title:"journalctl -t kata",slug:"journalctl-t-kata",normalizedTitle:"journalctl -t kata",charIndex:2},{level:2,title:"journalctl -t containerd",slug:"journalctl-t-containerd",normalizedTitle:"journalctl -t containerd",charIndex:141}],headersStr:"journalctl -t kata journalctl -t containerd",content:'# journalctl -t kata\n\nKata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã\n\næ¥çshimv2è¿è¡æ¶æ¥å¿ï¼\n\n> $ sudo journalctl -t kata\n\n\n# journalctl -t containerd\n\n\n# å¼å¯ debug log\n\nå¼å¯ debug log å¯ä»¥å¸®å©æä»¬è·å¾æ´è¯¦ç»ç logï¼é¤äº runtime ç logï¼èä¸è¿è½çå° agent ç logï¼ä»¥å guest OS ä¸­ kernel ç logï¼dmesgå½ä»¤çè¾åºï¼ã\n\nå¼å¯ debug logï¼éè¦ä¿®æ¹ä¸¤ä¸ªéç½®æä»¶ï¼\n\n * containerd éç½®æä»¶æå¦ä¸ä¿®æ¹å³å¯ï¼ [debug] level = "debug"\n\n * Kata Containerséè¦å¼å¯ runtime å agent ç debug log\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\n#enable_debug = true\n#enable_debug = true\n#enable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = ""\n\n\n$ sudo sed -i -e \'s/^# *\\(enable_debug\\).*=.*$/\\1 = true/g\' /etc/kata-containers/configuration.toml\n$ sudo sed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.log=debug"/g\' /etc/kata-containers/configuration.toml\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\nenable_debug = true\nenable_debug = true\nenable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = " agent.log=debug"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#troubleshoot-kata-containers\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#connect-to-debug-console ï¼è¿å¥èææºéè¦æå¼debug_console_enabledï¼\n\n\n# tracing\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/tracing.md\n\n\n# kata-log-parser\n\nhttps://github.com/kata-containers/tests/tree/main/cmd/log-parser\n\n\n# kata-collect-data.sh\n\nåç¤¾åºæissueéè¦æ·»å ééä¿¡æ¯\n\n\n# å¼å¯debugçå¼é\n\nå¼å¯åï¼å·²å¼å¯äºdebug_console_enabledï¼å¥½åå¹¶ä¸ä¼å ä¸ºpodå¢å èå¢å ï¼\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4M        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   167.8M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    22.2M        -        -\n\n\n1\n2\n3\n4\n\n\næä¸è¿°å¼å¯ debug logè®¾ç½®å\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4M        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   166.6M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    21.8M        -        -\n\n\n1\n2\n3\n4\n\n\ndmesgæ¥å¿\n\n[root@localhost hff]# dmesg | grep kata\n[2056734.849647] containerd-shim cpuset=kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a mems_allowed=0\n[2056734.849679] Task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n[2056734.849690] Memory cgroup stats for /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a: cache:188900KB rss:15900KB rss_huge:0KB mapped_file:188876KB swap:0KB inactive_anon:188372KB active_anon:16428KB inactive_file:0KB active_file:0KB unevictable:0KB\n[2056751.353176] pool cpuset=kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 mems_allowed=0\n[2056751.353223] Task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n\n\n\n1\n2\n3\n4\n5\n6\n7\n',normalizedContent:'# journalctl -t kata\n\nkata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã\n\næ¥çshimv2è¿è¡æ¶æ¥å¿ï¼\n\n> $ sudo journalctl -t kata\n\n\n# journalctl -t containerd\n\n\n# å¼å¯ debug log\n\nå¼å¯ debug log å¯ä»¥å¸®å©æä»¬è·å¾æ´è¯¦ç»ç logï¼é¤äº runtime ç logï¼èä¸è¿è½çå° agent ç logï¼ä»¥å guest os ä¸­ kernel ç logï¼dmesgå½ä»¤çè¾åºï¼ã\n\nå¼å¯ debug logï¼éè¦ä¿®æ¹ä¸¤ä¸ªéç½®æä»¶ï¼\n\n * containerd éç½®æä»¶æå¦ä¸ä¿®æ¹å³å¯ï¼ [debug] level = "debug"\n\n * kata containerséè¦å¼å¯ runtime å agent ç debug log\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\n#enable_debug = true\n#enable_debug = true\n#enable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = ""\n\n\n$ sudo sed -i -e \'s/^# *\\(enable_debug\\).*=.*$/\\1 = true/g\' /etc/kata-containers/configuration.toml\n$ sudo sed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.log=debug"/g\' /etc/kata-containers/configuration.toml\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\nenable_debug = true\nenable_debug = true\nenable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = " agent.log=debug"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#troubleshoot-kata-containers\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#connect-to-debug-console ï¼è¿å¥èææºéè¦æå¼debug_console_enabledï¼\n\n\n# tracing\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/tracing.md\n\n\n# kata-log-parser\n\nhttps://github.com/kata-containers/tests/tree/main/cmd/log-parser\n\n\n# kata-collect-data.sh\n\nåç¤¾åºæissueéè¦æ·»å ééä¿¡æ¯\n\n\n# å¼å¯debugçå¼é\n\nå¼å¯åï¼å·²å¼å¯äºdebug_console_enabledï¼å¥½åå¹¶ä¸ä¼å ä¸ºpodå¢å èå¢å ï¼\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4m        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   167.8m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    22.2m        -        -\n\n\n1\n2\n3\n4\n\n\næä¸è¿°å¼å¯ debug logè®¾ç½®å\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4m        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   166.6m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    21.8m        -        -\n\n\n1\n2\n3\n4\n\n\ndmesgæ¥å¿\n\n[root@localhost hff]# dmesg | grep kata\n[2056734.849647] containerd-shim cpuset=kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a mems_allowed=0\n[2056734.849679] task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n[2056734.849690] memory cgroup stats for /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a: cache:188900kb rss:15900kb rss_huge:0kb mapped_file:188876kb swap:0kb inactive_anon:188372kb active_anon:16428kb inactive_file:0kb active_file:0kb unevictable:0kb\n[2056751.353176] pool cpuset=kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 mems_allowed=0\n[2056751.353223] task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n\n\n\n1\n2\n3\n4\n5\n6\n7\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kataç¸å³éç½®åè·¯å¾",frontmatter:{title:"kataç¸å³éç½®åè·¯å¾",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0403/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf",meta:[{name:"twitter:title",content:"kataç¸å³éç½®åè·¯å¾"},{name:"twitter:description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataç¸å³éç½®åè·¯å¾"},{property:"og:description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataç¸å³éç½®åè·¯å¾"},{itemprop:"description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.md",key:"v-68efef1e",path:"/pages/kata0403/",headers:[{level:2,title:"containerdæ°æ®è·¯å¾",slug:"containerdæ°æ®è·¯å¾",normalizedTitle:"containerdæ°æ®è·¯å¾",charIndex:106},{level:2,title:"containerdæä»¶æ°æ®",slug:"containerdæä»¶æ°æ®",normalizedTitle:"containerdæä»¶æ°æ®",charIndex:197},{level:2,title:"æ³¨æéç½®æä»¶é®é¢",slug:"æ³¨æéç½®æä»¶é®é¢",normalizedTitle:"æ³¨æéç½®æä»¶é®é¢",charIndex:900},{level:2,title:"1. [hypervisor.qemu]",slug:"_1-hypervisor-qemu",normalizedTitle:"1. [hypervisor.qemu]",charIndex:1006},{level:2,title:"containerdéç½®ï¼",slug:"containerdéç½®-2",normalizedTitle:"containerdéç½®ï¼",charIndex:3626},{level:2,title:"åéæ³¨éï¼",slug:"åéæ³¨é",normalizedTitle:"åéæ³¨éï¼",charIndex:3859}],headersStr:"containerdæ°æ®è·¯å¾ containerdæä»¶æ°æ® æ³¨æéç½®æä»¶é®é¢ 1. [hypervisor.qemu] containerdéç½®ï¼ åéæ³¨éï¼",content:'# containerdéç½®\n\n> /etc/containerd/config.toml /etc/systemd/system/kubelet.service.d/0-containerd.conf\n\n\n# containerdæ°æ®è·¯å¾\n\n> root = "/app/docker/containerd" state = "/app/docker/run/containerd"\n\n\n# containerdæä»¶æ°æ®\n\n> ctr plugin ls\n\n\n# kataéç½®configuration.toml\n\né»è®¤çéç½®æä»¶ä½äº/opt/kata/share/defaults/kata-containers/configuration.tomlï¼å¦æ/etc/kata-containers/configuration.tomlçéç½®æä»¶å­å¨ï¼åä¼æ¿ä»£é»è®¤çéç½®æä»¶ã\n\n[root@rqy-k8s-1 hff]# kata-runtime --kata-show-default-config-paths\n/etc/kata-containers/configuration.toml\n/opt/kata/share/defaults/kata-containers/configuration.toml\n\n\n1\n2\n3\n\n\n[hypervisor.qemu]\nuse_vsock ï¼ä½¿ç¨vsocksä¸agentç´æ¥éä¿¡ï¼åææ¯ævsocksï¼ï¼é»è®¤false \n[runtime]\nenable_cpu_memory_hotplug ï¼ä½¿è½cpuååå­ç­ææï¼é»è®¤false\n[agent.kata]\ndebug_console_enabled = true\n[hypervisor.qemu]\nsed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.debug_console"/g\' "${kata_configuration_file}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¿®æ¹åæ°å®¹å¨çæ\n\n\n# æ³¨æéç½®æä»¶é®é¢\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/containerd-kata.md\n\n\n# 1. [hypervisor.qemu]\n\npath = "/usr/bin/qemu-system-x86_64" æå® qemu çè·¯å¾\nkernel = "/usr/share/kata-containers/vmlinuz.container" æå®å¯å¨åæ ¸è·¯å¾\ninitrd = "/usr/share/kata-containers/kata-containers-initrd.img" æå® initrd\nimage = "/usr/share/kata-containers/kata-containers-centos.img" æå®ç³»ç»çï¼initrd å image ä¸å¯ä»¥åæ¶éç½®ï¼å¦åä¼åºé\nkernel_params = "" éç½®-append åæ°ï¼å®å¶èææºåæ ¸å¯å¨åæ°\nfirmware = "" æå®åºä»¶ï¼å½±å qemu ç-bios åæ°\nmachine_accelerators="" virtcontainers/qemu.go ç getQemuMachine() è¿è¡å¤çï¼å å° machine.Options ä¸­ï¼æç»æ¯å å°-machine åæ°ä¸­\ndefault_vcpus = 1 é»è®¤ vcpu ä¸ªæ°\ndefault_maxvcpus = 0  é»è®¤æå¤§ vcpu ä¸ªæ°ï¼è®¾ç½®ä¸º 0 æ¶å®éä¸æ¶ 240\ndefault_bridges = 1 é»è®¤ PCI æ¡¥ä¸ªæ°\ndefault_memory = 2048  VM é»è®¤åå­å¤§å°\nmemory_slots = 10 åå­ææ§½ä¸ªæ°\ndisable_block_device_use = false æ¯å¦ç¦ç¨åè®¾å¤\nblock_device_driver = "virtio-scsi" åè®¾å¤é©±å¨ï¼å¯ä»¥æ¯ virtio-scsiãvirtio-blk æ nvdimm\n#block_device_cache_set = true\n#block_device_cache_direct = true\n#block_device_cache_noflush = true  åè®¾å¤æ¯å¦è®¾ç½® cache\nenable_iothreads = false  //enable_iothreas å½åä»éå¯¹ virtio-scsi åè®¾å¤çæ\n#enable_mem_prealloc = true\n#enable_hugepages = true\n#file_mem_backend = ""  //è¿å ä¸ªéç½®ç»ä¸ç¨äº kata-runtime qemu æä»¶å¯å¨èææºæ¶çåå­éç½®\n#enable_swap=true  //æ¯å¦åè®¸èææºåå­ swapï¼ä»¥æ¯ææ´å¤§çèææºå¯åº¦\n#enable_debug=false  //å½±å guest kernel åæ ¸å¯å¨ï¼å¨ enable_debug åï¼guest kernel å¯å¨é¡¹ä¼å ä¸ systemd.show_status true systemd.log_level debug\n#disable_nesting_checks = true èææºæ å¿æ¯å¦ nestedRunï¼å³èæååµå¥\nmsize=8192 9p fs msize éé¡¹\n#use_vsock = true æ¯å¦ä½¿ç¨ vsock\n#hotplug_vfio_on_root_bus = true å¯¹äº vfio è®¾å¤ï¼ä¼æå¨å° root bus ä¸ï¼å¦åæè½½å° PCI bridge ä¸, é»è®¤æ¯ false\n#disable_vhost_net = true ç¦ç¨ vhost_net\n#entropy_source= "/dev/urandom" æå®éæºæ°åçå¨ï¼é»è®¤ä¸º/dev/urandom,kata å¯å¨èææºæ¶ä¼ç»èææºéå ä¸ä¸ªéæºæ°åçå¨\n#guest_hook_path = "/usr/share/oci/hooks" guest é©å­å½æ°æ§è¡è·¯å¾,ç¨äº OCI\n#enable_template = true é»è®¤ä¸º falseï¼enable åæ°çèææºä»æ¨¡æ¿éè¿èææºåéæ¹å¼å¯å¨ï¼ææ VM å±äº«ç¸åçåå§å kernelãinitramfs å agent åå­\n#enable_debug = true é»è®¤ä¸º falseï¼enable åï¼shim å°æ¶æ¯åå¾ system log\n#enable_tracing = true é»è®¤ä¸º falseï¼ç¨äºè·è¸ª\n#diable_new_netns=true é»è®¤ä¸º falseï¼enable åï¼runtime ä¸ä¼åä¸º shim å hypervisor è¿ç¨åå»ºä¸ä¸ªç½ç» namespaceï¼å¨ enable_netmonãç½ç»æ¨¡å¼éç¨ bridged æè macvtap åä¸è½ enable è¯¥éé¡¹\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\n\n# crictl\n\ncrictl é»è®¤è¿æ¥å° unix:///var/run/dockershim.sock\n\n[root@rqy-k8s-3 fio-iperf]# cat /etc/crictl.yaml\nruntime-endpoint: unix:///run/containerd/containerd.sock\ntimeout: 0\ndebug: false\n\n\n1\n2\n3\n4\n\n\n\n# éåéç½®ï¼\n\n> [plugins."io.containerd.grpc.v1.cri".registry]\n\néåå­å¨è·¯å¾ï¼\n\n> /var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/ ådocker: /app/docker/overlay2\n\n\n# ä¿®æ¹sanbox(èææº)éç½®\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-set-sandbox-config-kata.md\n\n\n# containerdéç½®ï¼\n\nâ [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\nâ  runtime_type = "io.containerd.kata.v2"\nâ  pod_annotations = ["io.katacontainers.*"]\nâ  container_annotations = ["io.katacontainers.*"]\n\n\n1\n2\n3\n4\n\n\n\n# åéæ³¨éï¼\n\nä¸äºæ³¨éæ¯åéçï¼è¿æå³çéç½®æä»¶æå®äºå¯æ¥åçå¼ãç®åï¼åºäºå®å¨åå ï¼ä»ç®¡çç¨åºæ³¨éåå°éå¶ï¼ç®çæ¯æ§å¶ Kata Containers è¿è¡æ¶å°ä»£è¡¨æ¨å¯å¨åªäºäºè¿å¶æä»¶ã\n\n> configuration.tomlï¼ enable_annotations = []\n\n\n# å³äºruntime åå­æä¹åï¼\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\nå¨ K8s å containerd ä¸­ï¼æä»¬ä¼çå°å¾å¤ç¨äºè®¾ç½® runtime çå°æ¹ï¼æ¯å¦ RuntimeClass ãPod ç runtimeClassName å®ä¹ï¼ä»¥å ctr run --runtime io.containerd.run.kata.v2 å crictl runp -r kata ï¼éé¢é½æåæ°æå®è¿è¡æ¶çåå­ã\n\nPod ç runtimeClassName å±æ§ä¼æ¥æ¾ååç RuntimeClass èµæº æ ¹æ® è¯¥èµæºç handler ï¼å¨ containerd çéç½®æä»¶æ¥æ¾ç¸åºçè¿è¡æ¶ï¼ [plugins.cri.containerd.runtimes.${HANDLER_NAME}] ï¼ã ä¸è¬æåµä¸ containerd éç½®ä¼åè¿æ ·ï¼\n\n> [plugins.cri.containerd.runtimes.kata] runtime_type = "io.containerd.kata.v2"\n\n * ctr å½ä»¤ä½¿ç¨çæ¯ containerd éç½®æä»¶ä¸­ç runtime_type å±æ§ï¼ containerd ç¨ï¼ã\n * crictl å K8sï¼å®éä¹æ¯ CRI æ¥å£ï¼ ä½¿ç¨çæ¯ containerd éç½®ä¸­ç HANDLER_NAMEï¼ CRI ç¨ï¼ã\n\né»è®¤æåµä¸ï¼containerd ä¼æ ¹æ® runtime_type æè§åå¯¹åºå°å·ä½çè¿è¡æ¶çå¯æ§è¡æä»¶åãæ¯å¦ Kata Containers(io.containerd.kata.v2) è¿è¡æ¶æç»ä¼è½¬æ¢ä¸º containerd-shim-kata-v2 å½ä»¤ï¼è¯¥å½ä»¤é»è®¤å®è£å¨ /usr/local/bin/containerd-shim-kata-v2ã\n\n[root@localhost ~]# cat /usr/local/bin/containerd-shim-kata-v2\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\n\n\n1\n2\n3\n',normalizedContent:'# containerdéç½®\n\n> /etc/containerd/config.toml /etc/systemd/system/kubelet.service.d/0-containerd.conf\n\n\n# containerdæ°æ®è·¯å¾\n\n> root = "/app/docker/containerd" state = "/app/docker/run/containerd"\n\n\n# containerdæä»¶æ°æ®\n\n> ctr plugin ls\n\n\n# kataéç½®configuration.toml\n\né»è®¤çéç½®æä»¶ä½äº/opt/kata/share/defaults/kata-containers/configuration.tomlï¼å¦æ/etc/kata-containers/configuration.tomlçéç½®æä»¶å­å¨ï¼åä¼æ¿ä»£é»è®¤çéç½®æä»¶ã\n\n[root@rqy-k8s-1 hff]# kata-runtime --kata-show-default-config-paths\n/etc/kata-containers/configuration.toml\n/opt/kata/share/defaults/kata-containers/configuration.toml\n\n\n1\n2\n3\n\n\n[hypervisor.qemu]\nuse_vsock ï¼ä½¿ç¨vsocksä¸agentç´æ¥éä¿¡ï¼åææ¯ævsocksï¼ï¼é»è®¤false \n[runtime]\nenable_cpu_memory_hotplug ï¼ä½¿è½cpuååå­ç­ææï¼é»è®¤false\n[agent.kata]\ndebug_console_enabled = true\n[hypervisor.qemu]\nsed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.debug_console"/g\' "${kata_configuration_file}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¿®æ¹åæ°å®¹å¨çæ\n\n\n# æ³¨æéç½®æä»¶é®é¢\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/containerd-kata.md\n\n\n# 1. [hypervisor.qemu]\n\npath = "/usr/bin/qemu-system-x86_64" æå® qemu çè·¯å¾\nkernel = "/usr/share/kata-containers/vmlinuz.container" æå®å¯å¨åæ ¸è·¯å¾\ninitrd = "/usr/share/kata-containers/kata-containers-initrd.img" æå® initrd\nimage = "/usr/share/kata-containers/kata-containers-centos.img" æå®ç³»ç»çï¼initrd å image ä¸å¯ä»¥åæ¶éç½®ï¼å¦åä¼åºé\nkernel_params = "" éç½®-append åæ°ï¼å®å¶èææºåæ ¸å¯å¨åæ°\nfirmware = "" æå®åºä»¶ï¼å½±å qemu ç-bios åæ°\nmachine_accelerators="" virtcontainers/qemu.go ç getqemumachine() è¿è¡å¤çï¼å å° machine.options ä¸­ï¼æç»æ¯å å°-machine åæ°ä¸­\ndefault_vcpus = 1 é»è®¤ vcpu ä¸ªæ°\ndefault_maxvcpus = 0  é»è®¤æå¤§ vcpu ä¸ªæ°ï¼è®¾ç½®ä¸º 0 æ¶å®éä¸æ¶ 240\ndefault_bridges = 1 é»è®¤ pci æ¡¥ä¸ªæ°\ndefault_memory = 2048  vm é»è®¤åå­å¤§å°\nmemory_slots = 10 åå­ææ§½ä¸ªæ°\ndisable_block_device_use = false æ¯å¦ç¦ç¨åè®¾å¤\nblock_device_driver = "virtio-scsi" åè®¾å¤é©±å¨ï¼å¯ä»¥æ¯ virtio-scsiãvirtio-blk æ nvdimm\n#block_device_cache_set = true\n#block_device_cache_direct = true\n#block_device_cache_noflush = true  åè®¾å¤æ¯å¦è®¾ç½® cache\nenable_iothreads = false  //enable_iothreas å½åä»éå¯¹ virtio-scsi åè®¾å¤çæ\n#enable_mem_prealloc = true\n#enable_hugepages = true\n#file_mem_backend = ""  //è¿å ä¸ªéç½®ç»ä¸ç¨äº kata-runtime qemu æä»¶å¯å¨èææºæ¶çåå­éç½®\n#enable_swap=true  //æ¯å¦åè®¸èææºåå­ swapï¼ä»¥æ¯ææ´å¤§çèææºå¯åº¦\n#enable_debug=false  //å½±å guest kernel åæ ¸å¯å¨ï¼å¨ enable_debug åï¼guest kernel å¯å¨é¡¹ä¼å ä¸ systemd.show_status true systemd.log_level debug\n#disable_nesting_checks = true èææºæ å¿æ¯å¦ nestedrunï¼å³èæååµå¥\nmsize=8192 9p fs msize éé¡¹\n#use_vsock = true æ¯å¦ä½¿ç¨ vsock\n#hotplug_vfio_on_root_bus = true å¯¹äº vfio è®¾å¤ï¼ä¼æå¨å° root bus ä¸ï¼å¦åæè½½å° pci bridge ä¸, é»è®¤æ¯ false\n#disable_vhost_net = true ç¦ç¨ vhost_net\n#entropy_source= "/dev/urandom" æå®éæºæ°åçå¨ï¼é»è®¤ä¸º/dev/urandom,kata å¯å¨èææºæ¶ä¼ç»èææºéå ä¸ä¸ªéæºæ°åçå¨\n#guest_hook_path = "/usr/share/oci/hooks" guest é©å­å½æ°æ§è¡è·¯å¾,ç¨äº oci\n#enable_template = true é»è®¤ä¸º falseï¼enable åæ°çèææºä»æ¨¡æ¿éè¿èææºåéæ¹å¼å¯å¨ï¼ææ vm å±äº«ç¸åçåå§å kernelãinitramfs å agent åå­\n#enable_debug = true é»è®¤ä¸º falseï¼enable åï¼shim å°æ¶æ¯åå¾ system log\n#enable_tracing = true é»è®¤ä¸º falseï¼ç¨äºè·è¸ª\n#diable_new_netns=true é»è®¤ä¸º falseï¼enable åï¼runtime ä¸ä¼åä¸º shim å hypervisor è¿ç¨åå»ºä¸ä¸ªç½ç» namespaceï¼å¨ enable_netmonãç½ç»æ¨¡å¼éç¨ bridged æè macvtap åä¸è½ enable è¯¥éé¡¹\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\n\n# crictl\n\ncrictl é»è®¤è¿æ¥å° unix:///var/run/dockershim.sock\n\n[root@rqy-k8s-3 fio-iperf]# cat /etc/crictl.yaml\nruntime-endpoint: unix:///run/containerd/containerd.sock\ntimeout: 0\ndebug: false\n\n\n1\n2\n3\n4\n\n\n\n# éåéç½®ï¼\n\n> [plugins."io.containerd.grpc.v1.cri".registry]\n\néåå­å¨è·¯å¾ï¼\n\n> /var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/ ådocker: /app/docker/overlay2\n\n\n# ä¿®æ¹sanbox(èææº)éç½®\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-set-sandbox-config-kata.md\n\n\n# containerdéç½®ï¼\n\nâ [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\nâ  runtime_type = "io.containerd.kata.v2"\nâ  pod_annotations = ["io.katacontainers.*"]\nâ  container_annotations = ["io.katacontainers.*"]\n\n\n1\n2\n3\n4\n\n\n\n# åéæ³¨éï¼\n\nä¸äºæ³¨éæ¯åéçï¼è¿æå³çéç½®æä»¶æå®äºå¯æ¥åçå¼ãç®åï¼åºäºå®å¨åå ï¼ä»ç®¡çç¨åºæ³¨éåå°éå¶ï¼ç®çæ¯æ§å¶ kata containers è¿è¡æ¶å°ä»£è¡¨æ¨å¯å¨åªäºäºè¿å¶æä»¶ã\n\n> configuration.tomlï¼ enable_annotations = []\n\n\n# å³äºruntime åå­æä¹åï¼\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\nå¨ k8s å containerd ä¸­ï¼æä»¬ä¼çå°å¾å¤ç¨äºè®¾ç½® runtime çå°æ¹ï¼æ¯å¦ runtimeclass ãpod ç runtimeclassname å®ä¹ï¼ä»¥å ctr run --runtime io.containerd.run.kata.v2 å crictl runp -r kata ï¼éé¢é½æåæ°æå®è¿è¡æ¶çåå­ã\n\npod ç runtimeclassname å±æ§ä¼æ¥æ¾ååç runtimeclass èµæº æ ¹æ® è¯¥èµæºç handler ï¼å¨ containerd çéç½®æä»¶æ¥æ¾ç¸åºçè¿è¡æ¶ï¼ [plugins.cri.containerd.runtimes.${handler_name}] ï¼ã ä¸è¬æåµä¸ containerd éç½®ä¼åè¿æ ·ï¼\n\n> [plugins.cri.containerd.runtimes.kata] runtime_type = "io.containerd.kata.v2"\n\n * ctr å½ä»¤ä½¿ç¨çæ¯ containerd éç½®æä»¶ä¸­ç runtime_type å±æ§ï¼ containerd ç¨ï¼ã\n * crictl å k8sï¼å®éä¹æ¯ cri æ¥å£ï¼ ä½¿ç¨çæ¯ containerd éç½®ä¸­ç handler_nameï¼ cri ç¨ï¼ã\n\né»è®¤æåµä¸ï¼containerd ä¼æ ¹æ® runtime_type æè§åå¯¹åºå°å·ä½çè¿è¡æ¶çå¯æ§è¡æä»¶åãæ¯å¦ kata containers(io.containerd.kata.v2) è¿è¡æ¶æç»ä¼è½¬æ¢ä¸º containerd-shim-kata-v2 å½ä»¤ï¼è¯¥å½ä»¤é»è®¤å®è£å¨ /usr/local/bin/containerd-shim-kata-v2ã\n\n[root@localhost ~]# cat /usr/local/bin/containerd-shim-kata-v2\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\n\n\n1\n2\n3\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"kata3.0",frontmatter:{title:"kata3.0",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/kata0501/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kata3.0"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/05.kataV3.0/01.kata%20v3.0.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata3.0"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/05.kataV3.0/01.kata%20v3.0.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata3.0"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/05.kataV3.0/01.kata%20v3.0.html",relativePath:"01.ææ¯æè°/03.kubernetes/303.kata-containers/05.kataV3.0/01.kata v3.0.md",key:"v-5b19c60a",path:"/pages/kata0501/",headers:[{level:2,title:"Kataçåå±åé¡¾",slug:"kataçåå±åé¡¾",normalizedTitle:"kataçåå±åé¡¾",charIndex:2},{level:2,title:"Kata3.0æ°å¢è®¾è®¡",slug:"kata3-0æ°å¢è®¾è®¡",normalizedTitle:"kata3.0æ°å¢è®¾è®¡",charIndex:327},{level:3,title:"Dragonballæ²ç®±",slug:"dragonballæ²ç®±",normalizedTitle:"dragonballæ²ç®±",charIndex:343},{level:3,title:"Async Rust Runtime",slug:"async-rust-runtime",normalizedTitle:"async rust runtime",charIndex:360},{level:2,title:"Kata 3.0å¼åè·¯çº¿",slug:"kata-3-0å¼åè·¯çº¿",normalizedTitle:"kata 3.0å¼åè·¯çº¿",charIndex:383}],headersStr:"Kataçåå±åé¡¾ Kata3.0æ°å¢è®¾è®¡ Dragonballæ²ç®± Async Rust Runtime Kata 3.0å¼åè·¯çº¿",content:"# Kataçåå±åé¡¾\n\n * 2018å¹´5æï¼Kata 1.xé¶æ®µï¼ Kataåcontainerdç¤¾åºå±åå¶å®äºshimv2æ¥å£è§èï¼å¹¶çåå¨Kata Containersæ¯æäºè¯¥è§è\n * 18å¹´11æï¼éè¿containerd-shim-v2åvsockææ¯ï¼Kataç²¾ç®äºå¤§éçç»ä»¶ï¼éåè½»éçº§hypervisoråç²¾ç®åæ ¸ï¼kataå¯ä»¥å¤§å¹éä½åå­å¼éåå®¹å¨å¯å¨æ¶é´ãæ´å³é®çæ¯ï¼éä½ç³»ç»é¨ç½²å¤æåº¦è¿å¤§å¹æé«äºç¨³å®æ§ï¼ç¹å«æ¯å¨ç³»ç»éè½½æåµä¸çç¨³å®æ§ã\n * 2019 å¹´çæ¶åï¼Kata ä» 1.x åçº§å°äº 2.x , æäºéå¸¸éè¦çææ¯è¿æ­¥ãKata-agent ä½¿ç¨ Rust è¿è¡äºéæï¼æå¤§ç¨åº¦åå°äºåå­å¼éä»¥åæ´ä½æ»å»é¢\n\n\n# Kata3.0æ°å¢è®¾è®¡\n\n\n# Dragonballæ²ç®±\n\n\n# Async Rust Runtime\n\n\n# Kata 3.0å¼åè·¯çº¿\n\n * 2022-07-25 å¨mainåæ¯æå¯ç¨çalphaçæ¬\n * 2022.10.10 3.0.0-release",normalizedContent:"# kataçåå±åé¡¾\n\n * 2018å¹´5æï¼kata 1.xé¶æ®µï¼ kataåcontainerdç¤¾åºå±åå¶å®äºshimv2æ¥å£è§èï¼å¹¶çåå¨kata containersæ¯æäºè¯¥è§è\n * 18å¹´11æï¼éè¿containerd-shim-v2åvsockææ¯ï¼kataç²¾ç®äºå¤§éçç»ä»¶ï¼éåè½»éçº§hypervisoråç²¾ç®åæ ¸ï¼kataå¯ä»¥å¤§å¹éä½åå­å¼éåå®¹å¨å¯å¨æ¶é´ãæ´å³é®çæ¯ï¼éä½ç³»ç»é¨ç½²å¤æåº¦è¿å¤§å¹æé«äºç¨³å®æ§ï¼ç¹å«æ¯å¨ç³»ç»éè½½æåµä¸çç¨³å®æ§ã\n * 2019 å¹´çæ¶åï¼kata ä» 1.x åçº§å°äº 2.x , æäºéå¸¸éè¦çææ¯è¿æ­¥ãkata-agent ä½¿ç¨ rust è¿è¡äºéæï¼æå¤§ç¨åº¦åå°äºåå­å¼éä»¥åæ´ä½æ»å»é¢\n\n\n# kata3.0æ°å¢è®¾è®¡\n\n\n# dragonballæ²ç®±\n\n\n# async rust runtime\n\n\n# kata 3.0å¼åè·¯çº¿\n\n * 2022-07-25 å¨mainåæ¯æå¯ç¨çalphaçæ¬\n * 2022.10.10 3.0.0-release",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"dockeréå",frontmatter:{title:"dockeréå",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/docker03/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"ctr -n k8s.io run  -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run",meta:[{name:"twitter:title",content:"dockeréå"},{name:"twitter:description",content:"ctr -n k8s.io run  -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/03.docker%E9%95%9C%E5%83%8F.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeréå"},{property:"og:description",content:"ctr -n k8s.io run  -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/03.docker%E9%95%9C%E5%83%8F.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeréå"},{itemprop:"description",content:"ctr -n k8s.io run  -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/03.docker%E9%95%9C%E5%83%8F.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/03.dockeréå.md",key:"v-e1ca0762",path:"/pages/docker03/",headers:[{level:2,title:"sysbench",slug:"sysbench",normalizedTitle:"sysbench",charIndex:2},{level:2,title:"fio",slug:"fio",normalizedTitle:"fio",charIndex:195},{level:2,title:"iperf3",slug:"iperf3",normalizedTitle:"iperf3",charIndex:301}],headersStr:"sysbench fio iperf3",content:"# sysbench\n\nctr -n k8s.io run -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/dotnetdr/sysbench:0.5 hfftest sh\n\n\n# fio\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\n\n# iperf3\n\nctr -n k8s.io run -t --rm sirot/netperf-latest netperf sh",normalizedContent:"# sysbench\n\nctr -n k8s.io run -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/dotnetdr/sysbench:0.5 hfftest sh\n\n\n# fio\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\n\n# iperf3\n\nctr -n k8s.io run -t --rm sirot/netperf-latest netperf sh",charsets:{},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"dockerfileæ¹æº",frontmatter:{title:"dockerfileæ¹æº",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/docker02/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"dockerfileæ¹æº"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/02.dockerfile%E6%94%B9%E6%BA%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockerfileæ¹æº"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/02.dockerfile%E6%94%B9%E6%BA%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockerfileæ¹æº"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/02.dockerfile%E6%94%B9%E6%BA%90.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/02.dockerfileæ¹æº.md",key:"v-32d723b6",path:"/pages/docker02/",headers:[{level:2,title:"apkæº",slug:"apkæº",normalizedTitle:"apkæº",charIndex:2},{level:2,title:"aptæº",slug:"aptæº",normalizedTitle:"aptæº",charIndex:369}],headersStr:"apkæº aptæº",content:'# apkæº\n\nFROM alpine:3.14\n\nRUN sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories\n\nRUN apk update\n\n\n1\n2\n3\n4\n5\n\n\nFROM golang:${GO_VER}-alpine${ALPINE_VER} as golang\nRUN sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories    #æ°å ç\nRUN apk add --no-cache \\\n\tbash \\\n\tgcc \\\n\tgit \\\n\tmake \\\n\tmusl-dev\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# aptæº\n\nFROM debian\n\nRUN mv /etc/apt/sources.list /etc/apt/sources.list.bak && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    apt-get update && \\\n    apt-get install procps -y --allow-unauthenticated && \\\n    apt-get install telnetd -y --allow-unauthenticated && \\\n    apt-get install telnet -y --allow-unauthenticated && \\\n    apt-get install wget -y --allow-unauthenticated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nsed -i "s@http://deb.debian.org@http://mirrors.163.com@g" /etc/apt/sources.list\n\nsed -i "s@http://security.debian.org@http://mirrors.163.com@g" /etc/apt/sources.list',normalizedContent:'# apkæº\n\nfrom alpine:3.14\n\nrun sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories\n\nrun apk update\n\n\n1\n2\n3\n4\n5\n\n\nfrom golang:${go_ver}-alpine${alpine_ver} as golang\nrun sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories    #æ°å ç\nrun apk add --no-cache \\\n\tbash \\\n\tgcc \\\n\tgit \\\n\tmake \\\n\tmusl-dev\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# aptæº\n\nfrom debian\n\nrun mv /etc/apt/sources.list /etc/apt/sources.list.bak && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    apt-get update && \\\n    apt-get install procps -y --allow-unauthenticated && \\\n    apt-get install telnetd -y --allow-unauthenticated && \\\n    apt-get install telnet -y --allow-unauthenticated && \\\n    apt-get install wget -y --allow-unauthenticated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\nsed -i "s@http://deb.debian.org@http://mirrors.163.com@g" /etc/apt/sources.list\n\nsed -i "s@http://security.debian.org@http://mirrors.163.com@g" /etc/apt/sources.list',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"dockeréåä¼å",frontmatter:{title:"dockeréåä¼å",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/docker04/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",meta:[{name:"twitter:title",content:"dockeréåä¼å"},{name:"twitter:description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeréåä¼å"},{property:"og:description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeréåä¼å"},{itemprop:"description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/04.dockeréåä¼å.md",key:"v-5d2403be",path:"/pages/docker04/",headersStr:null,content:"1ã apk âno-cache 2ã rm ârf /var/lib/apk/* 3ã pip install âno-cache-dir 4ã run rm ârf find / -name â*.pycâ 5ã ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile 6ã éålayerä¸å¾è¶è¿6å± 7ã &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª 8ã åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",normalizedContent:"1ã apk âno-cache 2ã rm ârf /var/lib/apk/* 3ã pip install âno-cache-dir 4ã run rm ârf find / -name â*.pycâ 5ã ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile 6ã éålayerä¸å¾è¶è¿6å± 7ã &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª 8ã åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"buildxå¤å¹³å°æå»º",frontmatter:{title:"buildxå¤å¹³å°æå»º",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/docker01/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ",meta:[{name:"twitter:title",content:"buildxå¤å¹³å°æå»º"},{name:"twitter:description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"buildxå¤å¹³å°æå»º"},{property:"og:description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"buildxå¤å¹³å°æå»º"},{itemprop:"description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/01.buildxå¤å¹³å°æå»º.md",key:"v-43971d6a",path:"/pages/docker01/",headers:[{level:2,title:"è·¨ CPU æ¶æç¼è¯ç¨åºçæ¹æ³",slug:"è·¨-cpu-æ¶æç¼è¯ç¨åºçæ¹æ³",normalizedTitle:"è·¨ cpu æ¶æç¼è¯ç¨åºçæ¹æ³",charIndex:40},{level:2,title:"buildx",slug:"buildx",normalizedTitle:"buildx",charIndex:134},{level:3,title:"ç¯å¢è¦æ±",slug:"ç¯å¢è¦æ±",normalizedTitle:"ç¯å¢è¦æ±",charIndex:286},{level:3,title:"æå»ºéå",slug:"æå»ºéå",normalizedTitle:"æå»ºéå",charIndex:827}],headersStr:"è·¨ CPU æ¶æç¼è¯ç¨åºçæ¹æ³ buildx ç¯å¢è¦æ± æå»ºéå",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ\n\n\n# è·¨ CPU æ¶æç¼è¯ç¨åºçæ¹æ³\n\n 1. ç´æ¥å¨ç®æ ç¡¬ä»¶ä¸ç¼è¯ï¼å¸¸ç¨ï¼\n 2. æ¨¡æç®æ ç¡¬ä»¶\n 3. éè¿ binfmt_misc æ¨¡æç®æ ç¡¬ä»¶çç¨æ·ç©ºé´\n 4. ä½¿ç¨äº¤åç¼è¯å¨\n\n\n# buildx\n\nDocker 19.03 å¼å¥çæä»¶ buildx buildx ä¼éè¿ QEMU å binfmt_misc åå«ä¸ºä¸åç CPU æ¶æï¼armï¼arm64 å amd64ç­ï¼æå»ºä¸åçéåãæå»ºå®æåï¼å°±ä¼åå»ºä¸ä¸ª manifest listï¼å¶ä¸­åå«äºæåè¿äºéåçæéã\n\n\n# ç¯å¢è¦æ±\n\n * è¦ç¡®ä¿ Docker çæ¬ä¸ä½äº 19.03ï¼åæ¶è¿è¦éè¿è®¾ç½®ç¯å¢åé DOCKER_CLI_EXPERIMENTAL æ¥å¯ç¨\n\n * å¦æä½ ä½¿ç¨çæ¯ Linuxï¼éè¦æå¨å¯ç¨ binfmt_misc å¤§å¤æ° Linux åè¡çé½å¾å®¹æå¯ç¨ï¼ä¸è¿è¿æä¸ä¸ªæ´å®¹æçåæ³ï¼ç´æ¥è¿è¡ä¸ä¸ªç¹æå®¹å¨ï¼å®¹å¨éé¢åå¥½äºè®¾ç½®èæ¬ï¼ ð³ â docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d å»ºè®®å° Linux åæ ¸çæ¬åçº§å° 4.x ä»¥ä¸ï¼ç¹å«æ¯ CentOS ç¨æ·ï¼ä½ å¯è½ä¼éå°éè¯¯ã cat /proc/sys/fs/binfmt_misc/qemu-aarch64\n\n * Docker é»è®¤ä¼ä½¿ç¨ä¸æ¯æå¤ CPU æ¶æçæå»ºå¨ï¼æä»¬éè¦æå¨åæ¢ã ååå»ºä¸ä¸ªæ°çæå»ºå¨ï¼docker buildx create --use --name mybuilder å¯å¨æå»ºå¨ï¼ docker buildx inspect mybuilder --bootstrap æ¥çå½åä½¿ç¨çæå»ºå¨åæå»ºå¨æ¯æç CPU æ¶æï¼docker buildx ls\n\n\n# æå»ºéå\n\ndocker buildx build -t yangchuansheng/hello-arch --platform=linux/arm,linux/arm64,linux/amd64 . --push\n\nå¦ææ³å°æå»ºå¥½çéåä¿å­å¨æ¬å°ï¼å¯ä»¥å° type æå®ä¸º dockerï¼ä½å¿é¡»åå«ä¸ºä¸åç CPU æ¶ææå»ºä¸åçéåï¼ä¸è½åå¹¶æä¸ä¸ªéå ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm64 -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/amd64 -o type=docker .",normalizedContent:"dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ\n\n\n# è·¨ cpu æ¶æç¼è¯ç¨åºçæ¹æ³\n\n 1. ç´æ¥å¨ç®æ ç¡¬ä»¶ä¸ç¼è¯ï¼å¸¸ç¨ï¼\n 2. æ¨¡æç®æ ç¡¬ä»¶\n 3. éè¿ binfmt_misc æ¨¡æç®æ ç¡¬ä»¶çç¨æ·ç©ºé´\n 4. ä½¿ç¨äº¤åç¼è¯å¨\n\n\n# buildx\n\ndocker 19.03 å¼å¥çæä»¶ buildx buildx ä¼éè¿ qemu å binfmt_misc åå«ä¸ºä¸åç cpu æ¶æï¼armï¼arm64 å amd64ç­ï¼æå»ºä¸åçéåãæå»ºå®æåï¼å°±ä¼åå»ºä¸ä¸ª manifest listï¼å¶ä¸­åå«äºæåè¿äºéåçæéã\n\n\n# ç¯å¢è¦æ±\n\n * è¦ç¡®ä¿ docker çæ¬ä¸ä½äº 19.03ï¼åæ¶è¿è¦éè¿è®¾ç½®ç¯å¢åé docker_cli_experimental æ¥å¯ç¨\n\n * å¦æä½ ä½¿ç¨çæ¯ linuxï¼éè¦æå¨å¯ç¨ binfmt_misc å¤§å¤æ° linux åè¡çé½å¾å®¹æå¯ç¨ï¼ä¸è¿è¿æä¸ä¸ªæ´å®¹æçåæ³ï¼ç´æ¥è¿è¡ä¸ä¸ªç¹æå®¹å¨ï¼å®¹å¨éé¢åå¥½äºè®¾ç½®èæ¬ï¼ ð³ â docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d å»ºè®®å° linux åæ ¸çæ¬åçº§å° 4.x ä»¥ä¸ï¼ç¹å«æ¯ centos ç¨æ·ï¼ä½ å¯è½ä¼éå°éè¯¯ã cat /proc/sys/fs/binfmt_misc/qemu-aarch64\n\n * docker é»è®¤ä¼ä½¿ç¨ä¸æ¯æå¤ cpu æ¶æçæå»ºå¨ï¼æä»¬éè¦æå¨åæ¢ã ååå»ºä¸ä¸ªæ°çæå»ºå¨ï¼docker buildx create --use --name mybuilder å¯å¨æå»ºå¨ï¼ docker buildx inspect mybuilder --bootstrap æ¥çå½åä½¿ç¨çæå»ºå¨åæå»ºå¨æ¯æç cpu æ¶æï¼docker buildx ls\n\n\n# æå»ºéå\n\ndocker buildx build -t yangchuansheng/hello-arch --platform=linux/arm,linux/arm64,linux/amd64 . --push\n\nå¦ææ³å°æå»ºå¥½çéåä¿å­å¨æ¬å°ï¼å¯ä»¥å° type æå®ä¸º dockerï¼ä½å¿é¡»åå«ä¸ºä¸åç cpu æ¶ææå»ºä¸åçéåï¼ä¸è½åå¹¶æä¸ä¸ªéå ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm64 -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/amd64 -o type=docker .",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"å¨Dockerä¸­è®¾ç½®æ¶åº",frontmatter:{title:"å¨Dockerä¸­è®¾ç½®æ¶åº",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/docker05/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch",meta:[{name:"twitter:title",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{name:"twitter:description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{property:"og:description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{itemprop:"description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.md",key:"v-11c4c310",path:"/pages/docker05/",headers:[{level:2,title:"åºäº Debian éå",slug:"åºäº-debian-éå",normalizedTitle:"åºäº debian éå",charIndex:2},{level:2,title:"åºäº Alpine éå",slug:"åºäº-alpine-éå",normalizedTitle:"åºäº alpine éå",charIndex:125},{level:2,title:"åºäº Ubuntu éå",slug:"åºäº-ubuntu-éå",normalizedTitle:"åºäº ubuntu éå",charIndex:366}],headersStr:"åºäº Debian éå åºäº Alpine éå åºäº Ubuntu éå",content:'# åºäº Debian éå\n\nç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\n\nFROM debian:stretch\n\nENV TZ=Asia/Shanghai\n\n\n1\n2\n3\n\n\n\n# åºäº Alpine éå\n\nFROM alpine:3.9\n\nENV TZ=Asia/Shanghai\n\nRUN apk update \\\n    && apk add tzdata \\\n    && echo "${TZ}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    && rm /var/cache/apk/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åºäº Ubuntu éå\n\nFROM ubuntu:bionic\n\nENV TZ=Asia/Shanghai\n\nRUN echo "${TZ}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    && apt update \\\n    && apt install -y tzdata \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n',normalizedContent:'# åºäº debian éå\n\nç±äº debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åétzå³å¯ã\n\nfrom debian:stretch\n\nenv tz=asia/shanghai\n\n\n1\n2\n3\n\n\n\n# åºäº alpine éå\n\nfrom alpine:3.9\n\nenv tz=asia/shanghai\n\nrun apk update \\\n    && apk add tzdata \\\n    && echo "${tz}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${tz} /etc/localtime \\\n    && rm /var/cache/apk/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åºäº ubuntu éå\n\nfrom ubuntu:bionic\n\nenv tz=asia/shanghai\n\nrun echo "${tz}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${tz} /etc/localtime \\\n    && apt update \\\n    && apt install -y tzdata \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"dockeråºç¡",frontmatter:{title:"dockeråºç¡",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/docker06/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"dockeråºç¡"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/06.docker%E5%9F%BA%E7%A1%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeråºç¡"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/06.docker%E5%9F%BA%E7%A1%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeråºç¡"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/304.docker/06.docker%E5%9F%BA%E7%A1%80.html",relativePath:"01.ææ¯æè°/03.kubernetes/304.docker/06.dockeråºç¡.md",key:"v-3b906eab",path:"/pages/docker06/",headers:[{level:2,title:"èæ¬éå",slug:"èæ¬éå",normalizedTitle:"èæ¬éå",charIndex:2},{level:2,title:"ä¸­é´å±éå",slug:"ä¸­é´å±éå",normalizedTitle:"ä¸­é´å±éå",charIndex:638},{level:2,title:"ä¸äºå½ä»¤æå·§",slug:"ä¸äºå½ä»¤æå·§",normalizedTitle:"ä¸äºå½ä»¤æå·§",charIndex:740},{level:2,title:"éå¯dockerä¸å½±åpod",slug:"éå¯dockerä¸å½±åpod",normalizedTitle:"éå¯dockerä¸å½±åpod",charIndex:1071}],headersStr:"èæ¬éå ä¸­é´å±éå ä¸äºå½ä»¤æå·§ éå¯dockerä¸å½±åpod",content:'# èæ¬éå\n\néååè¡¨ä¸­ï¼å¯è½ä¼çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º\n\n<none>               <none>              00285df0df87        5 days ago          342 MB\n\n\n1\n\n\nåå æå¯è½æ¯å®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼åéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº docker pull å¯è½å¯¼è´è¿ç§æåµï¼docker build ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n<none>              <none>              00285df0df87        5 days ago          342 MB\n\n\n1\n2\n3\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n1\n\n\n??å®æµæ æ³å¨é¨å å®\n\n\n# ä¸­é´å±éå\n\né»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\n1\n\n\n\n# ä¸äºå½ä»¤æå·§\n\n * åªè¾åºéåIDåä»åºåï¼\n\n$ docker image ls --format "{{.ID}}:{{.Repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\n329ed837d508: ubuntu\n329ed837d508: ubuntu\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * åªè¾åºidå\n\ndocker image ls -q\n\n\n1\n\n * å é¤ææä»åºåä¸º redis çéå\n\n$ docker image rm $(docker image ls -q redis)\n\n\n1\n\n\n\n# éå¯dockerä¸å½±åpod\n\n/etc/docker/daemon.jsonéç½®æä»¶ä¸­è®¾ç½® { "live-restore": true }',normalizedContent:'# èæ¬éå\n\néååè¡¨ä¸­ï¼å¯è½ä¼çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º\n\n<none>               <none>              00285df0df87        5 days ago          342 mb\n\n\n1\n\n\nåå æå¯è½æ¯å®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼åéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº docker pull å¯è½å¯¼è´è¿ç§æåµï¼docker build ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nrepository          tag                 image id            created             size\n<none>              <none>              00285df0df87        5 days ago          342 mb\n\n\n1\n2\n3\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n1\n\n\n??å®æµæ æ³å¨é¨å å®\n\n\n# ä¸­é´å±éå\n\né»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\n1\n\n\n\n# ä¸äºå½ä»¤æå·§\n\n * åªè¾åºéåidåä»åºåï¼\n\n$ docker image ls --format "{{.id}}:{{.repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\n329ed837d508: ubuntu\n329ed837d508: ubuntu\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * åªè¾åºidå\n\ndocker image ls -q\n\n\n1\n\n * å é¤ææä»åºåä¸º redis çéå\n\n$ docker image rm $(docker image ls -q redis)\n\n\n1\n\n\n\n# éå¯dockerä¸å½±åpod\n\n/etc/docker/daemon.jsonéç½®æä»¶ä¸­è®¾ç½® { "live-restore": true }',charsets:{cjk:!0}},{title:"æ¥å¿ééæ¹æ¡",frontmatter:{title:"æ¥å¿ééæ¹æ¡",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/rzcjfa/",categories:["ææ¯æè°","kubernetes","æ¥å¿éé"],tags:["fluentd","loki"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"æ¥å¿ééæ¹æ¡"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/01.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E6%96%B9%E6%A1%88.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æ¥å¿ééæ¹æ¡"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/01.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E6%96%B9%E6%A1%88.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:"fluentd"},{property:"article:tag",content:"loki"},{itemprop:"name",content:"æ¥å¿ééæ¹æ¡"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/01.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86%E6%96%B9%E6%A1%88.html",relativePath:"01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/01.æ¥å¿ééæ¹æ¡.md",key:"v-0523fe6a",path:"/pages/rzcjfa/",headers:[{level:2,title:"EFK",slug:"efk",normalizedTitle:"efk",charIndex:2},{level:2,title:"loki",slug:"loki",normalizedTitle:"loki",charIndex:188}],headersStr:"EFK loki",content:"# EFK\n\nEFK(Elasticsearch + Fluentd + Kibana)æ¯kuberneteså®æ¹æ¨èçæ¥å¿æ¶éæ¹æ¡ï¼ä¸fluentdå·²ä»CNCF æ¯ä¸ ä¼ç¼ºç¹ï¼\n\n * ææ¯æ¯è¾æçï¼ç¨æ·è¾å¤\n * æ´å¤æçæ¥è¯¢åæ°æ®åæå»ºè®®ä½¿ç¨EFK\n * fluentdæ§è½ä¸å¥½ï¼ä¸çæé¨åå·²æ·æ±°fluentd\n * ESæ¥è¯¢åè½è¾å¤æï¼å¯¹æä»¬æ¥è¯´æç¹å¤§æå°ç¨\n\n\n# loki\n\nPromtail + Loki + Grafanaï¼éè¦ Grafana v6.0+ï¼\n\n * Loki æ¯ä¸»æå¡å¨ï¼è´è´£å­å¨æ¥å¿åå¤çæ¥è¯¢ã Loki æå ä¸ªå®¢æ·ç«¯éé¡¹ï¼Promtailï¼å®è¿æ¯æ systemd æ¥å¿æåååºäº TCP ç syslog æåï¼ãFluentdãFluent BitãDocker æä»¶ç­ç­ï¼\n * promtail æ¯ä»£çï¼è´è´£æ¶éæ¥å¿å¹¶å°å¶åéç» loki ã\n * Grafana ç¨äº UI å±ç¤ºã ä¼ç¼ºç¹ï¼\n * ä½¿ç¨äºåPrometheusä¸æ ·çæ ç­¾æ¥ä½ä¸ºç´¢å¼ï¼ä¹å°±æ¯è¯´ï¼ä½ éè¿è¿äºæ ç­¾æ¢å¯ä»¥æ¥è¯¢æ¥å¿çåå®¹ä¹å¯ä»¥æ¥è¯¢å°çæ§çæ°æ®ï¼ä¸ä½åå°äºä¸¤ç§æ¥è¯¢ä¹é´çåæ¢ææ¬ï¼ä¹æå¤§å°éä½äºæ¥å¿ç´¢å¼çå­å¨ã\n * ç¹å«éåå¨å­ Kubernetes Podæ¥å¿; è¯¸å¦Podæ ç­¾ä¹ç±»çåæ°æ®ä¼è¢«èªå¨å é¤åç¼å¥ç´¢å¼;\n * åGrafanaåçæ¯æ,é¿åkibanaågrafanaæ¥ååæ¢;",normalizedContent:"# efk\n\nefk(elasticsearch + fluentd + kibana)æ¯kuberneteså®æ¹æ¨èçæ¥å¿æ¶éæ¹æ¡ï¼ä¸fluentdå·²ä»cncf æ¯ä¸ ä¼ç¼ºç¹ï¼\n\n * ææ¯æ¯è¾æçï¼ç¨æ·è¾å¤\n * æ´å¤æçæ¥è¯¢åæ°æ®åæå»ºè®®ä½¿ç¨efk\n * fluentdæ§è½ä¸å¥½ï¼ä¸çæé¨åå·²æ·æ±°fluentd\n * esæ¥è¯¢åè½è¾å¤æï¼å¯¹æä»¬æ¥è¯´æç¹å¤§æå°ç¨\n\n\n# loki\n\npromtail + loki + grafanaï¼éè¦ grafana v6.0+ï¼\n\n * loki æ¯ä¸»æå¡å¨ï¼è´è´£å­å¨æ¥å¿åå¤çæ¥è¯¢ã loki æå ä¸ªå®¢æ·ç«¯éé¡¹ï¼promtailï¼å®è¿æ¯æ systemd æ¥å¿æåååºäº tcp ç syslog æåï¼ãfluentdãfluent bitãdocker æä»¶ç­ç­ï¼\n * promtail æ¯ä»£çï¼è´è´£æ¶éæ¥å¿å¹¶å°å¶åéç» loki ã\n * grafana ç¨äº ui å±ç¤ºã ä¼ç¼ºç¹ï¼\n * ä½¿ç¨äºåprometheusä¸æ ·çæ ç­¾æ¥ä½ä¸ºç´¢å¼ï¼ä¹å°±æ¯è¯´ï¼ä½ éè¿è¿äºæ ç­¾æ¢å¯ä»¥æ¥è¯¢æ¥å¿çåå®¹ä¹å¯ä»¥æ¥è¯¢å°çæ§çæ°æ®ï¼ä¸ä½åå°äºä¸¤ç§æ¥è¯¢ä¹é´çåæ¢ææ¬ï¼ä¹æå¤§å°éä½äºæ¥å¿ç´¢å¼çå­å¨ã\n * ç¹å«éåå¨å­ kubernetes podæ¥å¿; è¯¸å¦podæ ç­¾ä¹ç±»çåæ°æ®ä¼è¢«èªå¨å é¤åç¼å¥ç´¢å¼;\n * ågrafanaåçæ¯æ,é¿åkibanaågrafanaæ¥ååæ¢;",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"loki",frontmatter:{title:"loki",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/loki/",categories:["ææ¯æè°","kubernetes","æ¥å¿éé"],tags:["loki"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"loki"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/05.loki.html"},{property:"og:type",content:"article"},{property:"og:title",content:"loki"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/05.loki.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:"loki"},{itemprop:"name",content:"loki"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/05.loki.html",relativePath:"01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/05.loki.md",key:"v-31339544",path:"/pages/loki/",headers:[{level:2,title:"é¨ç½²ä¸éç½®ï¼",slug:"é¨ç½²ä¸éç½®",normalizedTitle:"é¨ç½²ä¸éç½®ï¼",charIndex:2},{level:2,title:"fluetnd+loki",slug:"fluetnd-loki",normalizedTitle:"fluetnd+loki",charIndex:1567}],headersStr:"é¨ç½²ä¸éç½®ï¼ fluetnd+loki",content:"# é¨ç½²ä¸éç½®ï¼\n\nå®æ¹æä½³ç¤ºä¾ï¼ https://grafana.com/docs/loki/latest/best-practices/\n\n * å·²é¨ç½²grafana\n\n * é¨ç½²é¨ç½²LokiåPromtail helm charté¨ç½²\n\n * éç½®LokiåPromtaiï¼\n   \n   > å­å¨ä½ç½®ï¼pvc(æ¬å°æceph) éç½®grafanaæ·»å Lokiæ°æ®æºï¼journalãevent-exporter\n\n * é¿åä½¿ç¨å¨ææ ç­¾å»å¹éå·æè¾å¤§èå´çå¯è½å¼ï¼æ¯å¦ipå¼ãè¿æ ·ä¼å¯¼è´Lokiå»ºç«ä¸ä¸ªå·¨å¤§çç´¢å¼ï¼æ§è½éå¸¸å·®ã promtail éè¦è¿è¡å¨ææè¿è¡åºç¨å®¹å¨çèç¹, æä»¥ä¼æ¯ DaemonSet, loki ä½ä¸ºæ ¸å¿æå¡, å¸¦ææä¹åå­å¨èä¸æ¯ææ¨ªåæ©å±, æä»¥åºè¯¥æ¯ StatefulSet, Grafana æ¯æ¯è¾åºæ¬çç¬ç«åºç¨, å¯ä»¥å¤ç¨å·²é¨ç½²ç. https://grafana.com/docs/loki/latest/installation/microservices-helm/????????? https://grafana.github.io/loki/charts/\n\n$ helm repo add loki https://grafana.github.io/loki/charts\n$ helm repo update\n$ helm fetch loki/loki-stack --untar --untardir .\n$ cd loki-stack\n# ä¿®æ¹éç½®...\n$ helm install -n loki --namespace loki -f values.yaml ../loki-stack\n$ kubectl get svc -n loki \n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næ³¨ï¼\n\n * å¯ä»¥ä¿®æ¹values.yamlæä»¶ï¼æå®æ¯å¦å¼å¯GrafanaãPrometheusç­æå¡ï¼é»è®¤ä¸å¼å¯çï¼\n\n * promtailæå¡å¨æå»ºæ¶ä¼èªå¨æè½½ï¼cat charts/promtail/values.yaml å®¿ä¸»æºdockerä¸»ç®å½ä¸çcontainersç®å½ï¼ä¸è¬é»è®¤é½ä¸º/var/lib/docker/containersï¼æ¹ä¸º/app/docker/containersï¼ podçæ¥å¿ç®å½ï¼ä¸è¬é»è®¤ä¸º/var/log/podsï¼æªæ¹ï¼ å¦ææ¯ä¿®æ¹è¿dockeré»è®¤çå­å¨è·¯å¾çï¼éè¦å°mountçè·¯å¾è¿è¡ä¿®æ¹ï¼promtailæ¾ä¸å°å¯¹åºçå®¹å¨æ¥å¿ å·ä½docker å­å¨è·¯å¾ï¼å¯ä»¥ä½¿ç¨docker info å½ä»¤æ¥è¯¢\n\n * å¦ææ¯å®è£Lokiæ¶å¼å¯äºGrafanaï¼é£ç³»ç»ä¼èªå¨éç½®å¥½Data sourcesãä½æ¯ï¼å¦ææ¯æå¨æ­å»ºçGrafanaï¼éè¦æå¨æ·»å Data Sourcesæ¶ï¼ä¸å®æ³¨æï¼æ°æ®æºåç§°ä¸­çLokiï¼Lä¸å®è¦æ¯å¤§åï¼ï¼ï¼\n\n * grafanaåçº§ wget https://dl.grafana.com/oss/release/grafana-9.1.2-1.x86_64.rpm yum localinstall grafana-9.1.2-1.x86_64.rpm service grafana-server restart\n\n * loki svc è¦æ´é²nodeportï¼å¦ågrafanaè¿æ¥ä¸å°\n\n * æ·»å å®¿ä¸»æºjournalæ¥å¿ï¼/run/log/journal åèï¼https://grafana.com/docs/loki/latest/installation/microservices-helm/ Run Promtail with systemd-journal support\n\n\n# fluetnd+loki\n\n * Lokiä¸ºfluetndæä¾äºä¸ä¸ªè¾åºæä»¶fluent-plugin-grafana-lokiï¼å®å¯ä»¥å°ééå°çæ¥å¿ä¼ éå°Lokiå®ä¾å½ä¸­ã\n\ngem install fluent-plugin-grafana-loki",normalizedContent:"# é¨ç½²ä¸éç½®ï¼\n\nå®æ¹æä½³ç¤ºä¾ï¼ https://grafana.com/docs/loki/latest/best-practices/\n\n * å·²é¨ç½²grafana\n\n * é¨ç½²é¨ç½²lokiåpromtail helm charté¨ç½²\n\n * éç½®lokiåpromtaiï¼\n   \n   > å­å¨ä½ç½®ï¼pvc(æ¬å°æceph) éç½®grafanaæ·»å lokiæ°æ®æºï¼journalãevent-exporter\n\n * é¿åä½¿ç¨å¨ææ ç­¾å»å¹éå·æè¾å¤§èå´çå¯è½å¼ï¼æ¯å¦ipå¼ãè¿æ ·ä¼å¯¼è´lokiå»ºç«ä¸ä¸ªå·¨å¤§çç´¢å¼ï¼æ§è½éå¸¸å·®ã promtail éè¦è¿è¡å¨ææè¿è¡åºç¨å®¹å¨çèç¹, æä»¥ä¼æ¯ daemonset, loki ä½ä¸ºæ ¸å¿æå¡, å¸¦ææä¹åå­å¨èä¸æ¯ææ¨ªåæ©å±, æä»¥åºè¯¥æ¯ statefulset, grafana æ¯æ¯è¾åºæ¬çç¬ç«åºç¨, å¯ä»¥å¤ç¨å·²é¨ç½²ç. https://grafana.com/docs/loki/latest/installation/microservices-helm/????????? https://grafana.github.io/loki/charts/\n\n$ helm repo add loki https://grafana.github.io/loki/charts\n$ helm repo update\n$ helm fetch loki/loki-stack --untar --untardir .\n$ cd loki-stack\n# ä¿®æ¹éç½®...\n$ helm install -n loki --namespace loki -f values.yaml ../loki-stack\n$ kubectl get svc -n loki \n\n\n1\n2\n3\n4\n5\n6\n7\n\n\næ³¨ï¼\n\n * å¯ä»¥ä¿®æ¹values.yamlæä»¶ï¼æå®æ¯å¦å¼å¯grafanaãprometheusç­æå¡ï¼é»è®¤ä¸å¼å¯çï¼\n\n * promtailæå¡å¨æå»ºæ¶ä¼èªå¨æè½½ï¼cat charts/promtail/values.yaml å®¿ä¸»æºdockerä¸»ç®å½ä¸çcontainersç®å½ï¼ä¸è¬é»è®¤é½ä¸º/var/lib/docker/containersï¼æ¹ä¸º/app/docker/containersï¼ podçæ¥å¿ç®å½ï¼ä¸è¬é»è®¤ä¸º/var/log/podsï¼æªæ¹ï¼ å¦ææ¯ä¿®æ¹è¿dockeré»è®¤çå­å¨è·¯å¾çï¼éè¦å°mountçè·¯å¾è¿è¡ä¿®æ¹ï¼promtailæ¾ä¸å°å¯¹åºçå®¹å¨æ¥å¿ å·ä½docker å­å¨è·¯å¾ï¼å¯ä»¥ä½¿ç¨docker info å½ä»¤æ¥è¯¢\n\n * å¦ææ¯å®è£lokiæ¶å¼å¯äºgrafanaï¼é£ç³»ç»ä¼èªå¨éç½®å¥½data sourcesãä½æ¯ï¼å¦ææ¯æå¨æ­å»ºçgrafanaï¼éè¦æå¨æ·»å data sourcesæ¶ï¼ä¸å®æ³¨æï¼æ°æ®æºåç§°ä¸­çlokiï¼lä¸å®è¦æ¯å¤§åï¼ï¼ï¼\n\n * grafanaåçº§ wget https://dl.grafana.com/oss/release/grafana-9.1.2-1.x86_64.rpm yum localinstall grafana-9.1.2-1.x86_64.rpm service grafana-server restart\n\n * loki svc è¦æ´é²nodeportï¼å¦ågrafanaè¿æ¥ä¸å°\n\n * æ·»å å®¿ä¸»æºjournalæ¥å¿ï¼/run/log/journal åèï¼https://grafana.com/docs/loki/latest/installation/microservices-helm/ run promtail with systemd-journal support\n\n\n# fluetnd+loki\n\n * lokiä¸ºfluetndæä¾äºä¸ä¸ªè¾åºæä»¶fluent-plugin-grafana-lokiï¼å®å¯ä»¥å°ééå°çæ¥å¿ä¼ éå°lokiå®ä¾å½ä¸­ã\n\ngem install fluent-plugin-grafana-loki",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"nvidia-device-plugin",frontmatter:{title:"nvidia-device-plugin",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/gpu01/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"nvidia-device-plugin"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/01.nvidia-device-plugins.html"},{property:"og:type",content:"article"},{property:"og:title",content:"nvidia-device-plugin"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/01.nvidia-device-plugins.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"nvidia-device-plugin"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/01.nvidia-device-plugins.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/01.nvidia-device-plugins.md",key:"v-7e4b3a46",path:"/pages/gpu01/",headers:[{level:2,title:"k8sè±ä¼è¾¾GPUæä»¶ï¼nvidia-device-pluginï¼",slug:"k8sè±ä¼è¾¾gpuæä»¶-nvidia-device-plugin",normalizedTitle:"k8sè±ä¼è¾¾gpuæä»¶ï¼nvidia-device-pluginï¼",charIndex:2},{level:3,title:"å®è£æ¹æ³",slug:"å®è£æ¹æ³",normalizedTitle:"å®è£æ¹æ³",charIndex:40},{level:3,title:"ä½¿ç¨æ¹æ³",slug:"ä½¿ç¨æ¹æ³",normalizedTitle:"ä½¿ç¨æ¹æ³",charIndex:3405},{level:4,title:"docker",slug:"docker",normalizedTitle:"docker",charIndex:1844},{level:4,title:"k8s",slug:"k8s",normalizedTitle:"k8s",charIndex:2},{level:2,title:"åè",slug:"åè",normalizedTitle:"åè",charIndex:5569}],headersStr:"k8sè±ä¼è¾¾GPUæä»¶ï¼nvidia-device-pluginï¼ å®è£æ¹æ³ ä½¿ç¨æ¹æ³ docker k8s åè",content:'# k8sè±ä¼è¾¾GPUæä»¶ï¼nvidia-device-pluginï¼\n\n\n# å®è£æ¹æ³\n\nhttps://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n\n 1. æ¬å°èç¹æ·»å  NVIDIA é©±å¨ç¨åº è¦æ±ï¼NVIDIA drivers ~= 384.81 åç¡®ä¿ä½ çä¸»æºä¸ç NVIDIA é©±å¨ç¨åºæ­£å¸¸å·¥ä½ï¼ä½ åºè¯¥è½å¤æåè¿è¡ nvidia-smi å¹¶æ¥çä½ ç GPU åç§°ãé©±å¨ç¨åºçæ¬å CUDA çæ¬\n\n$ nvidia-smi\nThu Jul 14 11:49:33 2022\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.57       Driver Version: 515.57       CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:02:00.0 Off |                  N/A |\n|  0%   48C    P8    11W / 200W |      0MiB /  8192MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\néè¦æ³¨æçæ¯ï¼ç¬¬ä¸æ¬¡å®è£æ¾å¡é©±å¨çè¯ï¼æ¯ä¸ç¨éå¯æå¡å¨ç\n\n 2. æ¬å°èç¹å®è£nvidia-dockerænvidia-container-toolkit\n\nnvidia-docker >= 2.0 || nvidia-container-toolkit >= 1.7.0\n\nè¿è¡NVIDIA Container Toolkitçæ¡ä»¶ï¼\n\n * åæ ¸çæ¬ > 3.10 ç GNU/Linux x86_64\n * Docker >= 19.03ï¼æ¨èï¼ä½æäºåè¡çå¯è½åå«æ§çæ¬ç Dockerãæ¯æçæä½çæ¬ä¸º 1.12ï¼\n * æ¶æ >= Keplerï¼æè®¡ç®è½å 3.0ï¼ç NVIDIA GPU\n * NVIDIA Linux é©±å¨ç¨åº>= 418.81.07ï¼è¯·æ³¨æï¼ä¸æ¯æè¾æ§çé©±å¨ç¨åºçæ¬æåæ¯ãï¼\n\nå¦ï¼centos, nvidia-container-toolkit\n\n$ curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.repo | sudo tee /etc/yum.repos.d/nvidia-docker.repo\n$ yum install -y nvidia-container-toolkit\n$ rpm -qa | grep nvidia\nlibnvidia-container-tools-1.10.0-1.x86_64\nlibnvidia-container1-1.10.0-1.x86_64\nnvidia-container-toolkit-1.10.0-1.x86_64\n\n\n1\n2\n3\n4\n5\n6\n\n 3. æ¯ä¸ªèç¹Dockerçé»è®¤è¿è¡æ¶è®¾ç½®ä¸º nvidia-container-runtime\n\n$ cat /etc/docker/daemon.json\n{\n    "default-runtime":"nvidia",\n    "runtimes": {\n        "nvidia": {\n            "path":"/usr/bin/nvidia-container-runtime",\n            "runtimeArgs": []\n        }\n    }\n}\n\n$ systemctl daemon-reload\n$ systemctl restart docker\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n 4. é¨ç½² NVIDIA è®¾å¤æä»¶: kubectl create -f nvidia-device-plugin.yml\n\n#1.0.0-beta4\n$ docker pull nvidia/k8s-device-plugin:1.0.0-beta4\n$ kubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/1.0.0-beta4/nvidia-device-plugin.yml\n# æ1.12\n$ docker pull nvidia/k8s-device-plugin:1.11\n$ kubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.12/nvidia-device-plugin.yml\n\n\n1\n2\n3\n4\n5\n6\n\n 5. æ£æ¥ï¼ Kuberneteså°æ´é² amd.com/gpuænvidia.com/gpuä¸ºå¯è°åº¦çèµæº\n\n$ kubectl describe node | grep nvidia.com/gpu\n\n\n1\n\n\n\n# ä½¿ç¨æ¹æ³\n\n# docker\n\n$ docker run --name hfftest --rm -it --gpus all nvidia/cuda:10.0-base nvidia-smi\nThu Jul 14 04:54:04 2022\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.57       Driver Version: 515.57       CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:02:00.0 Off |                  N/A |\n| 21%   49C    P8    16W / 200W |      0MiB /  8192MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n# k8s\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-gpu\nspec:\n  restartPolicy: OnFailure\n  containers:\n    - name: test-gpu\n      image: "k8s.gcr.io/cuda-vector-add:v0.1"\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¸äºéå¶çï¼\n\n * GPUs åªè½è®¾ç½®å¨ limits é¨åï¼è¿æå³çï¼\n\n> ä½ å¯ä»¥æå® GPU ç limits èä¸æå®å¶ requestsï¼Kubernetes å°ä½¿ç¨éå¶ å¼ä½ä¸ºé»è®¤çè¯·æ±å¼ï¼ ä½ å¯ä»¥åæ¶æå® limits å requestsï¼ä¸è¿è¿ä¸¤ä¸ªå¼å¿é¡»ç¸ç­ã ä½ ä¸å¯ä»¥ä»æå® requests èä¸æå® limitsã\n\n * å®¹å¨ï¼ä»¥å Podï¼ä¹é´æ¯ä¸å±äº« GPU çãGPU ä¹ä¸å¯ä»¥è¿éåéï¼Overcommittingï¼ã\n * æ¯ä¸ªå®¹å¨å¯ä»¥è¯·æ±ä¸ä¸ªæèå¤ä¸ª GPUï¼ä½æ¯ç¨å°æ°å¼æ¥è¯·æ±é¨å GPU æ¯ä¸åè®¸çã\n\n\n# åè\n\n * https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n * https://kubernetes.io/zh-cn/docs/tasks/manage-gpus/scheduling-gpus/#deploying-nvidia-gpu-device-plugin\n * https://github.com/NVIDIA/k8s-device-plugin',normalizedContent:'# k8sè±ä¼è¾¾gpuæä»¶ï¼nvidia-device-pluginï¼\n\n\n# å®è£æ¹æ³\n\nhttps://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n\n 1. æ¬å°èç¹æ·»å  nvidia é©±å¨ç¨åº è¦æ±ï¼nvidia drivers ~= 384.81 åç¡®ä¿ä½ çä¸»æºä¸ç nvidia é©±å¨ç¨åºæ­£å¸¸å·¥ä½ï¼ä½ åºè¯¥è½å¤æåè¿è¡ nvidia-smi å¹¶æ¥çä½ ç gpu åç§°ãé©±å¨ç¨åºçæ¬å cuda çæ¬\n\n$ nvidia-smi\nthu jul 14 11:49:33 2022\n+-----------------------------------------------------------------------------+\n| nvidia-smi 515.57       driver version: 515.57       cuda version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n| fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n|                               |                      |               mig m. |\n|===============================+======================+======================|\n|   0  nvidia geforce ...  off  | 00000000:02:00.0 off |                  n/a |\n|  0%   48c    p8    11w / 200w |      0mib /  8192mib |      0%      default |\n|                               |                      |                  n/a |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| processes:                                                                  |\n|  gpu   gi   ci        pid   type   process name                  gpu memory |\n|        id   id                                                   usage      |\n|=============================================================================|\n|  no running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\néè¦æ³¨æçæ¯ï¼ç¬¬ä¸æ¬¡å®è£æ¾å¡é©±å¨çè¯ï¼æ¯ä¸ç¨éå¯æå¡å¨ç\n\n 2. æ¬å°èç¹å®è£nvidia-dockerænvidia-container-toolkit\n\nnvidia-docker >= 2.0 || nvidia-container-toolkit >= 1.7.0\n\nè¿è¡nvidia container toolkitçæ¡ä»¶ï¼\n\n * åæ ¸çæ¬ > 3.10 ç gnu/linux x86_64\n * docker >= 19.03ï¼æ¨èï¼ä½æäºåè¡çå¯è½åå«æ§çæ¬ç dockerãæ¯æçæä½çæ¬ä¸º 1.12ï¼\n * æ¶æ >= keplerï¼æè®¡ç®è½å 3.0ï¼ç nvidia gpu\n * nvidia linux é©±å¨ç¨åº>= 418.81.07ï¼è¯·æ³¨æï¼ä¸æ¯æè¾æ§çé©±å¨ç¨åºçæ¬æåæ¯ãï¼\n\nå¦ï¼centos, nvidia-container-toolkit\n\n$ curl -s -l https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.repo | sudo tee /etc/yum.repos.d/nvidia-docker.repo\n$ yum install -y nvidia-container-toolkit\n$ rpm -qa | grep nvidia\nlibnvidia-container-tools-1.10.0-1.x86_64\nlibnvidia-container1-1.10.0-1.x86_64\nnvidia-container-toolkit-1.10.0-1.x86_64\n\n\n1\n2\n3\n4\n5\n6\n\n 3. æ¯ä¸ªèç¹dockerçé»è®¤è¿è¡æ¶è®¾ç½®ä¸º nvidia-container-runtime\n\n$ cat /etc/docker/daemon.json\n{\n    "default-runtime":"nvidia",\n    "runtimes": {\n        "nvidia": {\n            "path":"/usr/bin/nvidia-container-runtime",\n            "runtimeargs": []\n        }\n    }\n}\n\n$ systemctl daemon-reload\n$ systemctl restart docker\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n 4. é¨ç½² nvidia è®¾å¤æä»¶: kubectl create -f nvidia-device-plugin.yml\n\n#1.0.0-beta4\n$ docker pull nvidia/k8s-device-plugin:1.0.0-beta4\n$ kubectl create -f https://raw.githubusercontent.com/nvidia/k8s-device-plugin/1.0.0-beta4/nvidia-device-plugin.yml\n# æ1.12\n$ docker pull nvidia/k8s-device-plugin:1.11\n$ kubectl create -f https://raw.githubusercontent.com/nvidia/k8s-device-plugin/v1.12/nvidia-device-plugin.yml\n\n\n1\n2\n3\n4\n5\n6\n\n 5. æ£æ¥ï¼ kuberneteså°æ´é² amd.com/gpuænvidia.com/gpuä¸ºå¯è°åº¦çèµæº\n\n$ kubectl describe node | grep nvidia.com/gpu\n\n\n1\n\n\n\n# ä½¿ç¨æ¹æ³\n\n# docker\n\n$ docker run --name hfftest --rm -it --gpus all nvidia/cuda:10.0-base nvidia-smi\nthu jul 14 04:54:04 2022\n+-----------------------------------------------------------------------------+\n| nvidia-smi 515.57       driver version: 515.57       cuda version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n| fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n|                               |                      |               mig m. |\n|===============================+======================+======================|\n|   0  nvidia geforce ...  off  | 00000000:02:00.0 off |                  n/a |\n| 21%   49c    p8    16w / 200w |      0mib /  8192mib |      0%      default |\n|                               |                      |                  n/a |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| processes:                                                                  |\n|  gpu   gi   ci        pid   type   process name                  gpu memory |\n|        id   id                                                   usage      |\n|=============================================================================|\n|  no running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n# k8s\n\napiversion: v1\nkind: pod\nmetadata:\n  name: test-gpu\nspec:\n  restartpolicy: onfailure\n  containers:\n    - name: test-gpu\n      image: "k8s.gcr.io/cuda-vector-add:v0.1"\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¸äºéå¶çï¼\n\n * gpus åªè½è®¾ç½®å¨ limits é¨åï¼è¿æå³çï¼\n\n> ä½ å¯ä»¥æå® gpu ç limits èä¸æå®å¶ requestsï¼kubernetes å°ä½¿ç¨éå¶ å¼ä½ä¸ºé»è®¤çè¯·æ±å¼ï¼ ä½ å¯ä»¥åæ¶æå® limits å requestsï¼ä¸è¿è¿ä¸¤ä¸ªå¼å¿é¡»ç¸ç­ã ä½ ä¸å¯ä»¥ä»æå® requests èä¸æå® limitsã\n\n * å®¹å¨ï¼ä»¥å podï¼ä¹é´æ¯ä¸å±äº« gpu çãgpu ä¹ä¸å¯ä»¥è¿éåéï¼overcommittingï¼ã\n * æ¯ä¸ªå®¹å¨å¯ä»¥è¯·æ±ä¸ä¸ªæèå¤ä¸ª gpuï¼ä½æ¯ç¨å°æ°å¼æ¥è¯·æ±é¨å gpu æ¯ä¸åè®¸çã\n\n\n# åè\n\n * https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n * https://kubernetes.io/zh-cn/docs/tasks/manage-gpus/scheduling-gpus/#deploying-nvidia-gpu-device-plugin\n * https://github.com/nvidia/k8s-device-plugin',charsets:{cjk:!0}},{title:"ç¬¬åèå¼vgpu",frontmatter:{title:"ç¬¬åèå¼vgpu",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/4paradigm/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ç¬¬åèå¼vgpu"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/02.%E7%AC%AC%E5%9B%9B%E8%8C%83%E5%BC%8FvGPU.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ç¬¬åèå¼vgpu"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/02.%E7%AC%AC%E5%9B%9B%E8%8C%83%E5%BC%8FvGPU.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"ç¬¬åèå¼vgpu"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/02.%E7%AC%AC%E5%9B%9B%E8%8C%83%E5%BC%8FvGPU.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/02.ç¬¬åèå¼vGPU.md",key:"v-be31a184",path:"/pages/4paradigm/",headers:[{level:2,title:"é¨ç½²",slug:"é¨ç½²",normalizedTitle:"é¨ç½²",charIndex:497},{level:2,title:"åæ°",slug:"åæ°",normalizedTitle:"åæ°",charIndex:619},{level:2,title:"éªè¯",slug:"éªè¯",normalizedTitle:"éªè¯",charIndex:566}],headersStr:"é¨ç½² åæ° éªè¯",content:"githubå°åï¼https://github.com/4paradigm/k8s-device-plugin/blob/master/README_cn.md\n\nvGPU device plugin åºäºNVIDIAå®æ¹æä»¶(NVIDIA/k8s-device-plugin)ï¼å¨ä¿çå®æ¹åè½çåºç¡ä¸ï¼å®ç°äºå¯¹ç©çGPUè¿è¡ååï¼å¹¶å¯¹æ¾å­åè®¡ç®ååè¿è¡éå¶ï¼ä»èæ¨¡æåºå¤å¼ å°çvGPUå¡ã\n\nç¬¬åèå¼çGPUå±äº«æ¹æ¡è¿å«vGPUï¼ä¹æ¯CUDAå«ææ¹æ¡ãç±äºæ²¡æå¼æºèµæºéç¦»é¨åçä»£ç ï¼ä»ææ¡£ä¸­æ¨æµï¼å¶å®ç°åGaiaGPUçvcudaè¾ä¸ºç±»ä¼¼ï¼æ¾å­éç¦»ä½¿ç¨çæ¯ç»å¸CUDAå«ææ¹æ³ï¼éè¿é¢ä¼°è·å¾contextå¤§å°ï¼ä½¿ç¨çæ§éç¦»çæ¹æ¡éç¦»ç®åãåæ ·å°ï¼æ¹æ¡çä¼ç¼ºç¹ä¹åvCUDAç±»ä¼¼ãè¾ä¸ºç¹å«çä¸ç¹æ¯ï¼åé¿éAntmanç¸åå°ï¼ç¬¬åèå¼vGPUéè¿Nvidia UVMå®ç°äºèææ¾å­ãä¸è¿UVMå®è´¨ä¸æ¯ä½¿ç¨åå­æ¥èææ¾å­ï¼å æ­¤ä¼æ¶èè¾å¤§çåå­ï¼ä¸æ§è½ä¼æè¾å¤§ä¸éãè¥è¦ä½¿ç¨èææ¾å­åè½ï¼è¿éæèç¨åºæ¬èº«å ç¨çåå­åèææ¾å­çtrade offã\n\nåæ¶ï¼éç¨è¿ç§æ¹æ¡ä¸ééæ°è®¾è®¡è°åº¦å¨ã\n\n\n# é¨ç½²\n\ndocker pull 4pdosc/k8s-device-plugin:latest (æ³¨æv1.8éåä½¿ç¨æé®é¢ï¼æææ°çéåéªè¯æ²¡é®é¢) kubectl apply -f nvidia-device-plugin.yml\n\n\n# åæ°\n\n--device-split-count=3 æ´æ°ç±»åï¼é¢è®¾å¼æ¯2ãNVIDIAè£ç½®çåå²æ°ãå¯¹äºä¸ä¸ªæ»å±åå«Nå¼ NVIDIA GPUçKuberneteséç¾¤ï¼å¦ææä»¬å°device-split-countåæ°éç½®ä¸ºKï¼è¿ä¸ªKuberneteséç¾¤å°æK * Nä¸ªå¯åéçvGPUèµæº --device-memory-scaling=3 æµ®ç¹æ°ç±»åï¼é¢è®¾å¼æ¯1ãNVIDIAè£ç½®æ¾å­ä½¿ç¨æ¯ä¾ï¼å¯ä»¥å¤§äº1ï¼å¯ç¨èææ¾å­ï¼å®éªåè½ï¼ãå¯¹äºæM æ¾å­å¤§å°çNVIDIA GPUï¼å¦ææä»¬éç½®device-memory-scalingåæ°ä¸ºSï¼å¨é¨ç½²äºæä»¬è£ç½®æä»¶çKubeneteséç¾¤ä¸­ï¼è¿å¼ GPUååºçvGPUå°æ»å±åå« S * Mæ¾å­ãå¼ vGPUçæ¾å­å¤§å°ä¹ådevice-split-countåæ°å½±åãå¨ååçä¾å­ä¸­ï¼å¦ædevice-split-countåæ°éç½®ä¸ºKï¼é£æ¯ä¸å¼ vGPUæåä¼åå¾ S * M / K å¤§å°çæ¾å­ã\n\n\n# éªè¯\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-gpu-4paradigm\nspec:\n  restartPolicy: OnFailure\n  containers:\n    - name: cuda\n      image: nvidia/cuda:10.0-base\n      imagePullPolicy: IfNotPresent\n      tty: true\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n  nodeName: node01\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n[root@master02 4paradigm]# kubectl describe node node01 | grep gpu\n  nvidia.com/gpu:     3\n  nvidia.com/gpu:     3\n  nvidia.com/gpu     0            0\n\n\n1\n2\n3\n4\n",normalizedContent:"githubå°åï¼https://github.com/4paradigm/k8s-device-plugin/blob/master/readme_cn.md\n\nvgpu device plugin åºäºnvidiaå®æ¹æä»¶(nvidia/k8s-device-plugin)ï¼å¨ä¿çå®æ¹åè½çåºç¡ä¸ï¼å®ç°äºå¯¹ç©çgpuè¿è¡ååï¼å¹¶å¯¹æ¾å­åè®¡ç®ååè¿è¡éå¶ï¼ä»èæ¨¡æåºå¤å¼ å°çvgpuå¡ã\n\nç¬¬åèå¼çgpuå±äº«æ¹æ¡è¿å«vgpuï¼ä¹æ¯cudaå«ææ¹æ¡ãç±äºæ²¡æå¼æºèµæºéç¦»é¨åçä»£ç ï¼ä»ææ¡£ä¸­æ¨æµï¼å¶å®ç°ågaiagpuçvcudaè¾ä¸ºç±»ä¼¼ï¼æ¾å­éç¦»ä½¿ç¨çæ¯ç»å¸cudaå«ææ¹æ³ï¼éè¿é¢ä¼°è·å¾contextå¤§å°ï¼ä½¿ç¨çæ§éç¦»çæ¹æ¡éç¦»ç®åãåæ ·å°ï¼æ¹æ¡çä¼ç¼ºç¹ä¹åvcudaç±»ä¼¼ãè¾ä¸ºç¹å«çä¸ç¹æ¯ï¼åé¿éantmanç¸åå°ï¼ç¬¬åèå¼vgpuéè¿nvidia uvmå®ç°äºèææ¾å­ãä¸è¿uvmå®è´¨ä¸æ¯ä½¿ç¨åå­æ¥èææ¾å­ï¼å æ­¤ä¼æ¶èè¾å¤§çåå­ï¼ä¸æ§è½ä¼æè¾å¤§ä¸éãè¥è¦ä½¿ç¨èææ¾å­åè½ï¼è¿éæèç¨åºæ¬èº«å ç¨çåå­åèææ¾å­çtrade offã\n\nåæ¶ï¼éç¨è¿ç§æ¹æ¡ä¸ééæ°è®¾è®¡è°åº¦å¨ã\n\n\n# é¨ç½²\n\ndocker pull 4pdosc/k8s-device-plugin:latest (æ³¨æv1.8éåä½¿ç¨æé®é¢ï¼æææ°çéåéªè¯æ²¡é®é¢) kubectl apply -f nvidia-device-plugin.yml\n\n\n# åæ°\n\n--device-split-count=3 æ´æ°ç±»åï¼é¢è®¾å¼æ¯2ãnvidiaè£ç½®çåå²æ°ãå¯¹äºä¸ä¸ªæ»å±åå«nå¼ nvidia gpuçkuberneteséç¾¤ï¼å¦ææä»¬å°device-split-countåæ°éç½®ä¸ºkï¼è¿ä¸ªkuberneteséç¾¤å°æk * nä¸ªå¯åéçvgpuèµæº --device-memory-scaling=3 æµ®ç¹æ°ç±»åï¼é¢è®¾å¼æ¯1ãnvidiaè£ç½®æ¾å­ä½¿ç¨æ¯ä¾ï¼å¯ä»¥å¤§äº1ï¼å¯ç¨èææ¾å­ï¼å®éªåè½ï¼ãå¯¹äºæm æ¾å­å¤§å°çnvidia gpuï¼å¦ææä»¬éç½®device-memory-scalingåæ°ä¸ºsï¼å¨é¨ç½²äºæä»¬è£ç½®æä»¶çkubeneteséç¾¤ä¸­ï¼è¿å¼ gpuååºçvgpuå°æ»å±åå« s * mæ¾å­ãå¼ vgpuçæ¾å­å¤§å°ä¹ådevice-split-countåæ°å½±åãå¨ååçä¾å­ä¸­ï¼å¦ædevice-split-countåæ°éç½®ä¸ºkï¼é£æ¯ä¸å¼ vgpuæåä¼åå¾ s * m / k å¤§å°çæ¾å­ã\n\n\n# éªè¯\n\napiversion: v1\nkind: pod\nmetadata:\n  name: test-gpu-4paradigm\nspec:\n  restartpolicy: onfailure\n  containers:\n    - name: cuda\n      image: nvidia/cuda:10.0-base\n      imagepullpolicy: ifnotpresent\n      tty: true\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n  nodename: node01\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n[root@master02 4paradigm]# kubectl describe node node01 | grep gpu\n  nvidia.com/gpu:     3\n  nvidia.com/gpu:     3\n  nvidia.com/gpu     0            0\n\n\n1\n2\n3\n4\n",charsets:{cjk:!0}},{title:"æ¥å¿ééæ¹æ¡",frontmatter:{title:"æ¥å¿ééæ¹æ¡",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/fluentd-log/",categories:["ææ¯æè°","kubernetes","æ¥å¿éé"],tags:["fluentd"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"æ¥å¿ééæ¹æ¡"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/02.fluentd%E9%85%8D%E7%BD%AE.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æ¥å¿ééæ¹æ¡"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/02.fluentd%E9%85%8D%E7%BD%AE.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:"fluentd"},{itemprop:"name",content:"æ¥å¿ééæ¹æ¡"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/02.fluentd%E9%85%8D%E7%BD%AE.html",relativePath:"01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/02.fluentdéç½®.md",key:"v-338caad2",path:"/pages/fluentd-log/",headers:[{level:2,title:"éék8så®¹å¨æ åè¾åºæ¥å¿",slug:"éék8så®¹å¨æ åè¾åºæ¥å¿",normalizedTitle:"éék8så®¹å¨æ åè¾åºæ¥å¿",charIndex:2},{level:2,title:"æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿",slug:"æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿",normalizedTitle:"æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿",charIndex:2058},{level:2,title:"journalæ¥å¿",slug:"journalæ¥å¿",normalizedTitle:"journalæ¥å¿",charIndex:3050},{level:2,title:"è¾åº",slug:"è¾åº",normalizedTitle:"è¾åº",charIndex:11}],headersStr:"éék8så®¹å¨æ åè¾åºæ¥å¿ æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿ journalæ¥å¿ è¾åº",content:'# éék8så®¹å¨æ åè¾åºæ¥å¿\n\n <source>\n      @type tail\n      path /var/log/containers/kube-*.log,/var/log/containers/myapp-*.log  # éå·åé\n      exclude_path ["/var/log/containers/kubectl-*.log"]    # æé¤çæ¥å¿\n      pos_file /var/log/pos/containers.log.pos              # ä¿å­å·²è¯»æ¥å¿æä»¶çä½ç½®\n      tag raw.*\n      read_from_head true\n      <parse>\n        @type multi_format\n        # å¹édockerå®¹å¨æ¥å¿æ ¼å¼json\n        <pattern>\n          format json\n          time_key time\n          time_format %Y-%m-%dT%H:%M:%S.%NZ\n        </pattern>\n        #è¿é¨åç¨æ¥æ­£åå¹éCRIå®¹å¨æ¥å¿æ ¼å¼text\n        <pattern>\n          format /^(?<time>.+) (?<stream>stdout|stderr) [^ ]* (?<log>.*)$/\n          time_format %Y-%m-%dT%H:%M:%S.%N%:z\n        </pattern>\n      </parse>\n    </source>\n\n\n    <filter raw.**>\n        @type kubernetes_metadata\n        @id kubernetes_metadata_container_out\n        skip_container_metadata true\n        skip_master_url true\n        cache_size 3000\n        cache_ttl 1800   \n    </filter>\n\n    <match raw.**>\n      @type record_modifier\n      @id label.container.out\n      tag k8s-containers-${record.dig("k8s_container_name")}\n      # tag ${record.dig(\'log-collect\') ? k8s-containers-${record.dig("k8s_container_name")} : \'dropped.raw\'}\n      <record>\n        k8s_container_id ${record.dig("docker", "container_id")}\n        k8s_cloud_cluster "#{ENV[\'CLOUD_CLUSTER\'] || \'default\'}"\n        k8s_node ${record.dig(\'kubernetes\', \'host\')}\n        k8s_container_name ${record.dig(\'kubernetes\', \'container_name\')}\n        k8s_pod_name ${record.dig(\'kubernetes\', \'pod_name\')}\n        k8s_namespace_name ${record.dig(\'kubernetes\', \'namespace_name\')}\n        # log-collect ${record.dig("kubernetes", "labels", "log-collect") or false}\n        formated_time "${Time.at(time).to_datetime.iso8601(9)}"\n        fluentd_worker "#{worker_id}"\n      </record>\n      remove_keys docker,kubernetes                            # å é¤åçmetadataå­æ®µ\n    </match>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n\n\n\n# æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿\n\n    <source>\n        @type tail\n        read_from_head false\n        path /var/log/operation/*.log                       # å®¿ä¸»æºæä½æ¥å¿\n        follow_inodes true                                  # å¦ææ²¡æè¿ä¸ªåæ°ï¼æä»¶è½®è½¬ä¼å¯¼è´æ¥å¿éå¤\n        path_key file_name                                  # æå®äºä»¶ä¸­pathçkeyåç§°\n        pos_file /var/log/pos/operation.log.pos             # ä¿å­å·²è¯»æ¥å¿æä»¶çä½ç½®\n        tag host-operation\n        limit_recently_modified 7d                          # åªçæ§æå®ä¿®æ¹æ¶é´èå´åçæä»¶\n        multiline_flush_interval 1s                         # å¤è¡å¤çæ¨¡å¼ä¸çç¼å­è¾åºé´é\n        <parse>\n          @type json\n          time_key time                                     # ä»äºä»¶çä»ä¹å­æ®µä¸­è·åæ¶é´ï¼å¦æè¯¥å­æ®µä¸å­å¨ï¼ååå½åæ¶é´\n          time_type string                                  # å¯éå¼:float:UNIXæ¶é´.çº³ç§ãunixtime: UNIXæ¶é´(ç§)ãstring:æ ¹æ®åé¢å ä¸ªåæ°å³å®å·ä½æ ¼å¼\n          time_format %Y-%m-%d %H:%M:%S                     # æ¶é´æ ¼å¼\n          timezone +08:00\n        </parse>\n    </source>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# journalæ¥å¿\n\n    <source>                  \n      @type systemd\n      path /run/log/journal\n      matches [{ "_SYSTEMD_UNIT": ["kubelet.service", "etcd.service"] }]      # æå®journaldæ¥å¿,å±è½æ­¤è¡åééææjournalæ¥å¿\n      <storage>\n        @type local\n        persistent true\n        path /var/log/pos/journal.pos\n      </storage>\n      read_from_head true\n      tag journald\n    </source>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# è¾åº\n\n    # <match dropped.**>\n    #   @type null                                             # éè¦å¿½ç¥çæ¥å¿\n    # </match>\n    <filter k8s-*>\n      @type record_transformer\n      <record>\n        nodename "#{ENV[\'K8S_NODE_NAME\']}"                     # ä¸ºæ¯æ¡è®°å½éå èç¹å­æ®µ\n        dc "#{ENV[\'CLUSTER_NAME\']}"                            # ä¸ºæ¯æ¡è®°å½éå éç¾¤å\n      </record>\n    </filter>\n\n    <match k8s-*>                                             # å­å¨å°eså°å\n    @type forward\n    <server>\n        host "#{ENV[\'FLUENT_ELASTICSEARCH_HOST\']}"     \n        port "#{ENV[\'FLUENT_ELASTICSEARCH_PORT\']}"\n    </server>\n    <buffer tag,time>\n        @type file\n        path /var/log/td-agent/buffer/docker-k8s\n        timekey 3600\n        timekey_wait 0s\n        timekey_use_utc false\n        flush_mode interval\n        flush_interval 10s\n        chunk_limit_size 20M\n    </buffer>\n    </match>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n',normalizedContent:'# éék8så®¹å¨æ åè¾åºæ¥å¿\n\n <source>\n      @type tail\n      path /var/log/containers/kube-*.log,/var/log/containers/myapp-*.log  # éå·åé\n      exclude_path ["/var/log/containers/kubectl-*.log"]    # æé¤çæ¥å¿\n      pos_file /var/log/pos/containers.log.pos              # ä¿å­å·²è¯»æ¥å¿æä»¶çä½ç½®\n      tag raw.*\n      read_from_head true\n      <parse>\n        @type multi_format\n        # å¹édockerå®¹å¨æ¥å¿æ ¼å¼json\n        <pattern>\n          format json\n          time_key time\n          time_format %y-%m-%dt%h:%m:%s.%nz\n        </pattern>\n        #è¿é¨åç¨æ¥æ­£åå¹écriå®¹å¨æ¥å¿æ ¼å¼text\n        <pattern>\n          format /^(?<time>.+) (?<stream>stdout|stderr) [^ ]* (?<log>.*)$/\n          time_format %y-%m-%dt%h:%m:%s.%n%:z\n        </pattern>\n      </parse>\n    </source>\n\n\n    <filter raw.**>\n        @type kubernetes_metadata\n        @id kubernetes_metadata_container_out\n        skip_container_metadata true\n        skip_master_url true\n        cache_size 3000\n        cache_ttl 1800   \n    </filter>\n\n    <match raw.**>\n      @type record_modifier\n      @id label.container.out\n      tag k8s-containers-${record.dig("k8s_container_name")}\n      # tag ${record.dig(\'log-collect\') ? k8s-containers-${record.dig("k8s_container_name")} : \'dropped.raw\'}\n      <record>\n        k8s_container_id ${record.dig("docker", "container_id")}\n        k8s_cloud_cluster "#{env[\'cloud_cluster\'] || \'default\'}"\n        k8s_node ${record.dig(\'kubernetes\', \'host\')}\n        k8s_container_name ${record.dig(\'kubernetes\', \'container_name\')}\n        k8s_pod_name ${record.dig(\'kubernetes\', \'pod_name\')}\n        k8s_namespace_name ${record.dig(\'kubernetes\', \'namespace_name\')}\n        # log-collect ${record.dig("kubernetes", "labels", "log-collect") or false}\n        formated_time "${time.at(time).to_datetime.iso8601(9)}"\n        fluentd_worker "#{worker_id}"\n      </record>\n      remove_keys docker,kubernetes                            # å é¤åçmetadataå­æ®µ\n    </match>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n\n\n\n# æ¬å°æ¥å¿æä»¶-ä¸»æºå®¡è®¡æ¥å¿\n\n    <source>\n        @type tail\n        read_from_head false\n        path /var/log/operation/*.log                       # å®¿ä¸»æºæä½æ¥å¿\n        follow_inodes true                                  # å¦ææ²¡æè¿ä¸ªåæ°ï¼æä»¶è½®è½¬ä¼å¯¼è´æ¥å¿éå¤\n        path_key file_name                                  # æå®äºä»¶ä¸­pathçkeyåç§°\n        pos_file /var/log/pos/operation.log.pos             # ä¿å­å·²è¯»æ¥å¿æä»¶çä½ç½®\n        tag host-operation\n        limit_recently_modified 7d                          # åªçæ§æå®ä¿®æ¹æ¶é´èå´åçæä»¶\n        multiline_flush_interval 1s                         # å¤è¡å¤çæ¨¡å¼ä¸çç¼å­è¾åºé´é\n        <parse>\n          @type json\n          time_key time                                     # ä»äºä»¶çä»ä¹å­æ®µä¸­è·åæ¶é´ï¼å¦æè¯¥å­æ®µä¸å­å¨ï¼ååå½åæ¶é´\n          time_type string                                  # å¯éå¼:float:unixæ¶é´.çº³ç§ãunixtime: unixæ¶é´(ç§)ãstring:æ ¹æ®åé¢å ä¸ªåæ°å³å®å·ä½æ ¼å¼\n          time_format %y-%m-%d %h:%m:%s                     # æ¶é´æ ¼å¼\n          timezone +08:00\n        </parse>\n    </source>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# journalæ¥å¿\n\n    <source>                  \n      @type systemd\n      path /run/log/journal\n      matches [{ "_systemd_unit": ["kubelet.service", "etcd.service"] }]      # æå®journaldæ¥å¿,å±è½æ­¤è¡åééææjournalæ¥å¿\n      <storage>\n        @type local\n        persistent true\n        path /var/log/pos/journal.pos\n      </storage>\n      read_from_head true\n      tag journald\n    </source>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# è¾åº\n\n    # <match dropped.**>\n    #   @type null                                             # éè¦å¿½ç¥çæ¥å¿\n    # </match>\n    <filter k8s-*>\n      @type record_transformer\n      <record>\n        nodename "#{env[\'k8s_node_name\']}"                     # ä¸ºæ¯æ¡è®°å½éå èç¹å­æ®µ\n        dc "#{env[\'cluster_name\']}"                            # ä¸ºæ¯æ¡è®°å½éå éç¾¤å\n      </record>\n    </filter>\n\n    <match k8s-*>                                             # å­å¨å°eså°å\n    @type forward\n    <server>\n        host "#{env[\'fluent_elasticsearch_host\']}"     \n        port "#{env[\'fluent_elasticsearch_port\']}"\n    </server>\n    <buffer tag,time>\n        @type file\n        path /var/log/td-agent/buffer/docker-k8s\n        timekey 3600\n        timekey_wait 0s\n        timekey_use_utc false\n        flush_mode interval\n        flush_interval 10s\n        chunk_limit_size 20m\n    </buffer>\n    </match>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"è¾è®¯gpu-manager",frontmatter:{title:"è¾è®¯gpu-manager",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/tencnt-cpu-manager/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"è¾è®¯gpu-manager"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/03.%E8%85%BE%E8%AE%AFgpu-manager.html"},{property:"og:type",content:"article"},{property:"og:title",content:"è¾è®¯gpu-manager"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/03.%E8%85%BE%E8%AE%AFgpu-manager.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"è¾è®¯gpu-manager"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/03.%E8%85%BE%E8%AE%AFgpu-manager.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/03.è¾è®¯gpu-manager.md",key:"v-572ce303",path:"/pages/tencnt-cpu-manager/",headers:[{level:2,title:"å³äºå«æ³",slug:"å³äºå«æ³",normalizedTitle:"å³äºå«æ³",charIndex:2},{level:2,title:"åºæ¬åç",slug:"åºæ¬åç",normalizedTitle:"åºæ¬åç",charIndex:44},{level:2,title:"ç¼ºé·",slug:"ç¼ºé·",normalizedTitle:"ç¼ºé·",charIndex:417},{level:2,title:"ä¼ç¹",slug:"ä¼ç¹",normalizedTitle:"ä¼ç¹",charIndex:495},{level:2,title:"åæ°",slug:"åæ°",normalizedTitle:"åæ°",charIndex:563},{level:2,title:"é¨ç½²",slug:"é¨ç½²",normalizedTitle:"é¨ç½²",charIndex:841},{level:2,title:"éªè¯",slug:"éªè¯",normalizedTitle:"éªè¯",charIndex:1243},{level:3,title:"é®é¢ï¼ Unable to set Type=notify in systemd service file(TODO) ; Function Not Found  (TODO);",slug:"é®é¢-unable-to-set-type-notify-in-systemd-service-file-todo-function-not-found-todo",normalizedTitle:"é®é¢ï¼ unable to set type=notify in systemd service file(todo) ; function not found  (todo);",charIndex:null}],headersStr:"å³äºå«æ³ åºæ¬åç ç¼ºé· ä¼ç¹ åæ° é¨ç½² éªè¯ é®é¢ï¼ Unable to set Type=notify in systemd service file(TODO) ; Function Not Found  (TODO);",content:'# å³äºå«æ³\n\ngpu-managerï¼ï¼ vCUDAï¼ï¼ GaiaGPUï¼ï¼\n\n\n# åºæ¬åç\n\nvCUDAéè¿å«æCUDAçæ¾å­ç³è¯·åéæ¾è¯·æ±ï¼ä¸ºæ¯ä¸ªå®¹å¨ç®¡çå®çæ¾å­ä½¿ç¨éï¼è¿èå®ç°äºæ¾å­éç¦»ãå¯ä¸éè¦æ³¨æçæ¯ç³è¯·contextå¹¶ä¸éè¿mallocå½æ°ï¼å æ­¤æ æ³ç¥éè¿ç¨å¨contextä½¿ç¨äºå¤å°æ¾å­ãå æ­¤vcudaæ¯æ¬¡é½å»åGPUæ¥è¯¢å½åçæ¾å­ä½¿ç¨éãå¨ç®åéç¦»æ¹é¢ï¼ä½¿ç¨èå¯ä»¥æå®å®¹å¨çGPUå©ç¨çãvCUDAå°ä¼çæ§å©ç¨çï¼å¹¶å¨è¶åºéå¶å©ç¨çæ¶åä¸äºå¤çãæ­¤å¤å¯ä»¥æ¯æç¡¬éç¦»åè½¯éç¦»ãä¸¤èçä¸åç¹æ¯ï¼å¦ææèµæºç©ºé²ï¼è½¯éç¦»åè®¸ä»»å¡è¶è¿è®¾ç½®ï¼èç¡¬éç¦»ä¸åè®¸ã\n\nç±äºä½¿ç¨çæ¯çæ§è°èçæ¹æ¡ï¼å æ­¤æ æ³å¨ç­æ¶é´åéå¶ç®åï¼åªè½ä¿è¯é¿æ¶é´çæçå¬å¹³ãæä»¥ä¸éåæ¨çç­ä»»å¡æ¶é´æç­çåºæ¯ã\n\næ¾å­éç¦»æ¯å±äºç¡¬éç¦»ï¼å®¹å¨å®éä½¿ç¨éä¸è½è¶åºéå¶å¼ï¼ç®åéç¦»å±äºè½¯éç¦»ï¼å¶å®éä½¿ç¨éä¼å¨éå¶å¼ä¸ä¸æ³¢å¨ï¼ä½æ¯å¹³åå¼åºæ¬æ»¡è¶³éå¶æ¡ä»¶ã\n\n\n# ç¼ºé·\n\nä¸éåæ¨çç­ä»»å¡æ¶é´æç­çåºæ¯ ç±äºè¯¥æ¹æ¡æ¯ä¾èµcudaåºå½æ°ï¼å¯¹å°é¨åcudaçæ¬æ¯æä¸è¶³\n\nä¼¼ä¹ä¸æä¹ç»´æ¤äºï¼issueè¾å¤æ²¡ä»ä¹ååº\n\n\n# ä¼ç¹\n\nä¸éè¦ä¿®æ¹é»è®¤runcè¿è¡æ¶ åæ¶æ¯æç¢çåæ´å¡è°åº¦ï¼æé«GPUèµæºå©ç¨ç æ¯æåä¸å¼ å¡ä¸å®¹å¨é´GPUåæ¾å­çä½¿ç¨éç¦»\n\n\n# åæ°\n\n * tencent.com/vcuda-core åtencent.com/vcuda-memory æ¯æ°å¢çéå¯¹åå¡å±äº«çä¸ä¸ªèµæºæ è®°ï¼coreå¯¹åºçæ¯ä½¿ç¨çï¼åå¼ å¡æ100ä¸ªcoreï¼memoryæ¯æ¾å­ï¼æ¯ä¸ªåä½æ¯256MBçæ¾å­ã\n * å¦æç³è¯·çèµæºä¸º50%å©ç¨çï¼7680MBæ¾å­ãtencent.com/vcuda-core å¡«å50ï¼tencent.com/vcuda-memory å¡«åæ30ã\n * å½ç¶æä»¬ä¹åæ ·æ¯æåæ¥çç¬å å¡çæ¹å¼ï¼åªéè¦å¨coreçå°æ¹å¡«å100çæ´æ°åï¼memoryå¼å¡«åå¤§äº0çä»»æå¼å³å¯ã\n\n\n# é¨ç½²\n\nkubectl label node master01 nvidia-device-enable=enable\n\nkubectl apply -f gpu-manager-svc.yaml gpu-manager.yaml\n\n# kubectl describe node master01 | grep tencent\n  tencent.com/vcuda-core:    100\n  tencent.com/vcuda-memory:  32\n  tencent.com/vcuda-core:    100\n  tencent.com/vcuda-memory:  32\n  tencent.com/vcuda-core    0            0\n  tencent.com/vcuda-memory  0            0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# éªè¯\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-gpu\n  annotations:\n    tencent.com/vcuda-core-limit: "50"\nspec:\n  restartPolicy: OnFailure\n  containers:\n    - name: cuda\n      image: nvidia/cuda:10.0-base\n      imagePullPolicy: IfNotPresent\n      tty: true\n      resources:\n        requests:\n          tencent.com/vcuda-core: 30\n          tencent.com/vcuda-memory: 10\n        limits:\n          tencent.com/vcuda-core: 30\n          tencent.com/vcuda-memory: 10\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# é®é¢ï¼ Unable to set Type=notify in systemd service file(TODO) ; Function Not Found (TODO);\n\nrebuild ldcache\n65\nlaunch gpu manager\n66\nE0729 10:17:58.085641   14167 server.go:131] Unable to set Type=notify in systemd service file?\n67\nE0729 10:17:59.109882   14167 tree.go:333] No topology level found at 0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nhttps://github.com/tkestack/gpu-manager/issues/7\n\nroot@test-gpu:/# nvidia-smi \nFri Jul 29 04:40:47 2022       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.57       Driver Version: 515.57       CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0 Off |                  N/A |\n|  0%   38C    P8    13W / 200W | Function Not Found   |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\næçè·cudaçæ¬æå³',normalizedContent:'# å³äºå«æ³\n\ngpu-managerï¼ï¼ vcudaï¼ï¼ gaiagpuï¼ï¼\n\n\n# åºæ¬åç\n\nvcudaéè¿å«æcudaçæ¾å­ç³è¯·åéæ¾è¯·æ±ï¼ä¸ºæ¯ä¸ªå®¹å¨ç®¡çå®çæ¾å­ä½¿ç¨éï¼è¿èå®ç°äºæ¾å­éç¦»ãå¯ä¸éè¦æ³¨æçæ¯ç³è¯·contextå¹¶ä¸éè¿mallocå½æ°ï¼å æ­¤æ æ³ç¥éè¿ç¨å¨contextä½¿ç¨äºå¤å°æ¾å­ãå æ­¤vcudaæ¯æ¬¡é½å»ågpuæ¥è¯¢å½åçæ¾å­ä½¿ç¨éãå¨ç®åéç¦»æ¹é¢ï¼ä½¿ç¨èå¯ä»¥æå®å®¹å¨çgpuå©ç¨çãvcudaå°ä¼çæ§å©ç¨çï¼å¹¶å¨è¶åºéå¶å©ç¨çæ¶åä¸äºå¤çãæ­¤å¤å¯ä»¥æ¯æç¡¬éç¦»åè½¯éç¦»ãä¸¤èçä¸åç¹æ¯ï¼å¦ææèµæºç©ºé²ï¼è½¯éç¦»åè®¸ä»»å¡è¶è¿è®¾ç½®ï¼èç¡¬éç¦»ä¸åè®¸ã\n\nç±äºä½¿ç¨çæ¯çæ§è°èçæ¹æ¡ï¼å æ­¤æ æ³å¨ç­æ¶é´åéå¶ç®åï¼åªè½ä¿è¯é¿æ¶é´çæçå¬å¹³ãæä»¥ä¸éåæ¨çç­ä»»å¡æ¶é´æç­çåºæ¯ã\n\næ¾å­éç¦»æ¯å±äºç¡¬éç¦»ï¼å®¹å¨å®éä½¿ç¨éä¸è½è¶åºéå¶å¼ï¼ç®åéç¦»å±äºè½¯éç¦»ï¼å¶å®éä½¿ç¨éä¼å¨éå¶å¼ä¸ä¸æ³¢å¨ï¼ä½æ¯å¹³åå¼åºæ¬æ»¡è¶³éå¶æ¡ä»¶ã\n\n\n# ç¼ºé·\n\nä¸éåæ¨çç­ä»»å¡æ¶é´æç­çåºæ¯ ç±äºè¯¥æ¹æ¡æ¯ä¾èµcudaåºå½æ°ï¼å¯¹å°é¨åcudaçæ¬æ¯æä¸è¶³\n\nä¼¼ä¹ä¸æä¹ç»´æ¤äºï¼issueè¾å¤æ²¡ä»ä¹ååº\n\n\n# ä¼ç¹\n\nä¸éè¦ä¿®æ¹é»è®¤runcè¿è¡æ¶ åæ¶æ¯æç¢çåæ´å¡è°åº¦ï¼æé«gpuèµæºå©ç¨ç æ¯æåä¸å¼ å¡ä¸å®¹å¨é´gpuåæ¾å­çä½¿ç¨éç¦»\n\n\n# åæ°\n\n * tencent.com/vcuda-core åtencent.com/vcuda-memory æ¯æ°å¢çéå¯¹åå¡å±äº«çä¸ä¸ªèµæºæ è®°ï¼coreå¯¹åºçæ¯ä½¿ç¨çï¼åå¼ å¡æ100ä¸ªcoreï¼memoryæ¯æ¾å­ï¼æ¯ä¸ªåä½æ¯256mbçæ¾å­ã\n * å¦æç³è¯·çèµæºä¸º50%å©ç¨çï¼7680mbæ¾å­ãtencent.com/vcuda-core å¡«å50ï¼tencent.com/vcuda-memory å¡«åæ30ã\n * å½ç¶æä»¬ä¹åæ ·æ¯æåæ¥çç¬å å¡çæ¹å¼ï¼åªéè¦å¨coreçå°æ¹å¡«å100çæ´æ°åï¼memoryå¼å¡«åå¤§äº0çä»»æå¼å³å¯ã\n\n\n# é¨ç½²\n\nkubectl label node master01 nvidia-device-enable=enable\n\nkubectl apply -f gpu-manager-svc.yaml gpu-manager.yaml\n\n# kubectl describe node master01 | grep tencent\n  tencent.com/vcuda-core:    100\n  tencent.com/vcuda-memory:  32\n  tencent.com/vcuda-core:    100\n  tencent.com/vcuda-memory:  32\n  tencent.com/vcuda-core    0            0\n  tencent.com/vcuda-memory  0            0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# éªè¯\n\napiversion: v1\nkind: pod\nmetadata:\n  name: test-gpu\n  annotations:\n    tencent.com/vcuda-core-limit: "50"\nspec:\n  restartpolicy: onfailure\n  containers:\n    - name: cuda\n      image: nvidia/cuda:10.0-base\n      imagepullpolicy: ifnotpresent\n      tty: true\n      resources:\n        requests:\n          tencent.com/vcuda-core: 30\n          tencent.com/vcuda-memory: 10\n        limits:\n          tencent.com/vcuda-core: 30\n          tencent.com/vcuda-memory: 10\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# é®é¢ï¼ unable to set type=notify in systemd service file(todo) ; function not found (todo);\n\nrebuild ldcache\n65\nlaunch gpu manager\n66\ne0729 10:17:58.085641   14167 server.go:131] unable to set type=notify in systemd service file?\n67\ne0729 10:17:59.109882   14167 tree.go:333] no topology level found at 0\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\nhttps://github.com/tkestack/gpu-manager/issues/7\n\nroot@test-gpu:/# nvidia-smi \nfri jul 29 04:40:47 2022       \n+-----------------------------------------------------------------------------+\n| nvidia-smi 515.57       driver version: 515.57       cuda version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n| fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n|                               |                      |               mig m. |\n|===============================+======================+======================|\n|   0  nvidia geforce ...  off  | 00000000:01:00.0 off |                  n/a |\n|  0%   38c    p8    13w / 200w | function not found   |      0%      default |\n|                               |                      |                  n/a |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| processes:                                                                  |\n|  gpu   gi   ci        pid   type   process name                  gpu memory |\n|        id   id                                                   usage      |\n|=============================================================================|\n|  no running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\næçè·cudaçæ¬æå³',charsets:{cjk:!0}},{title:"é¿égpu-share",frontmatter:{title:"é¿égpu-share",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/ali-gpushare/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"é¿égpu-share"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/04.%E9%98%BF%E9%87%8Cgpu-share.html"},{property:"og:type",content:"article"},{property:"og:title",content:"é¿égpu-share"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/04.%E9%98%BF%E9%87%8Cgpu-share.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"é¿égpu-share"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/04.%E9%98%BF%E9%87%8Cgpu-share.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/04.é¿égpu-share.md",key:"v-131bc9a5",path:"/pages/ali-gpushare/",headersStr:null,content:"gitHubå°åï¼https://github.com/AliyunContainerService/gpushare-device-plugin\n\n\n# ç¼ºé·ï¼\n\n * æ²¡ææ´é²æ¯ä¸ªå®¹å¨GPUèµæºå©ç¨ççææ ï¼\n * åªæ¯å¨è°åº¦ä¸å®ç°äºGPUæ¾å­ç²åº¦çèæåï¼æ²¡æå®ç°èµæºéç¦»ã\n * ææ¾å­(GPU Memory)åæå¡(GPU count)è°åº¦çæ¹å¼å¯ä»¥å¨éç¾¤åå¹¶å­ï¼ä½æ¯åä¸ä¸ªèç¹åæ¯äºæ¥çã\n * ä¸æ¯æå±äº«GPUæ¾å­èµæºçéç¦»ï¼éè¦åºç¨å¨ä»£ç ä¸­éç½®è¯¥ä»»å¡å¯ä½¿ç¨çGPUæ¾å­å¤§å°ã",normalizedContent:"githubå°åï¼https://github.com/aliyuncontainerservice/gpushare-device-plugin\n\n\n# ç¼ºé·ï¼\n\n * æ²¡ææ´é²æ¯ä¸ªå®¹å¨gpuèµæºå©ç¨ççææ ï¼\n * åªæ¯å¨è°åº¦ä¸å®ç°äºgpuæ¾å­ç²åº¦çèæåï¼æ²¡æå®ç°èµæºéç¦»ã\n * ææ¾å­(gpu memory)åæå¡(gpu count)è°åº¦çæ¹å¼å¯ä»¥å¨éç¾¤åå¹¶å­ï¼ä½æ¯åä¸ä¸ªèç¹åæ¯äºæ¥çã\n * ä¸æ¯æå±äº«gpuæ¾å­èµæºçéç¦»ï¼éè¦åºç¨å¨ä»£ç ä¸­éç½®è¯¥ä»»å¡å¯ä½¿ç¨çgpuæ¾å­å¤§å°ã",charsets:{cjk:!0}},{title:"eventsæä¹å",frontmatter:{title:"eventsæä¹å",date:"2022-10-09T18:31:35.000Z",permalink:"/pages/fadb16/",categories:["ææ¯æè°","kubernetes","æ¥å¿éé"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"eventsæä¹å"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/03.events%E6%8C%81%E4%B9%85%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"eventsæä¹å"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/03.events%E6%8C%81%E4%B9%85%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T18:31:35.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"eventsæä¹å"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/03.events%E6%8C%81%E4%B9%85%E5%8C%96.html",relativePath:"01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/03.eventsæä¹å.md",key:"v-582a5ac3",path:"/pages/fadb16/",headers:[{level:2,title:"titleTag: åå",slug:"titletag-åå",normalizedTitle:"titletag: åå",charIndex:171},{level:2,title:"å¼æºæ¹æ¡",slug:"å¼æºæ¹æ¡",normalizedTitle:"å¼æºæ¹æ¡",charIndex:700},{level:3,title:"kubernetes-event-exporter",slug:"kubernetes-event-exporter",normalizedTitle:"kubernetes-event-exporter",charIndex:781},{level:4,title:"kubernetes-event-exporter + Loki",slug:"kubernetes-event-exporter-loki",normalizedTitle:"kubernetes-event-exporter + loki",charIndex:1241},{level:4,title:"kubernetes-event-exporter + fluentd:",slug:"kubernetes-event-exporter-fluentd",normalizedTitle:"kubernetes-event-exporter + fluentd:",charIndex:1609}],headersStr:"titleTag: åå å¼æºæ¹æ¡ kubernetes-event-exporter kubernetes-event-exporter + Loki kubernetes-event-exporter + fluentd:",content:'----------------------------------------\n\ntitle: eventsæä¹å date: 2022-10-9 17:56:54 permalink: /pages/events-log/ categories:\n\n * ææ¯æè°\n * kubernetes\n * æ¥å¿éé tags:\n * \n\n\n# titleTag: åå\n\nKubernetesçäºä»¶ï¼Eventï¼æ¯ä¸ç§èµæºå¯¹è±¡ï¼Resource Objectï¼ï¼ç¨äºå±ç¤ºéç¾¤ååççæåµï¼Kubernetesç³»ç»ä¸­çåä¸ªç»ä»¶ä¼å°è¿è¡æ¶åççåç§äºä»¶ä¸æ¥ç»Kubernetes API Serverãä¾å¦ï¼è°åº¦å¨åäºä»ä¹å³å®ï¼æäºPodä¸ºä»ä¹è¢«ä»èç¹ä¸­é©±éãå¯ä»¥éè¿kubectl get eventækubectl describe pod å½ä»¤æ¾ç¤ºäºä»¶ï¼æ¥çKuberneteséç¾¤ä¸­åçäºåªäºäºä»¶ã\n\næ§è¡è¿äºå½ä»¤åï¼é»è®¤æåµä¸åªä¼æ¾ç¤ºæè¿ï¼1å°æ¶åï¼åççäºä»¶ã\n\nç±äºKubernetesçäºä»¶æ¯ä¸ç§èµæºå¯¹è±¡ï¼å æ­¤å®ä»¬å­å¨å¨Kubernetes API ServerçEtcdéç¾¤ä¸­ãä¸ºé¿åç£çç©ºé´è¢«å¡«æ»¡ï¼æå¼ºå¶æ§è¡ä¿çç­ç¥ï¼å¨æåä¸æ¬¡çäºä»¶åçåï¼å é¤1å°æ¶ä¹ååççäºä»¶ã\n\né»è®¤æåµä¸ kubectl get events å¹¶æ²¡ææç§ events åççé¡ºåºè¿è¡æåï¼æä»¥æä»¬å¾å¾éè¦ä¸ºå¶å¢å  --sort-by=\'{.metadata.creationTimestamp}\' åæ°æ¥è®©å¶è¾åºå¯ä»¥ææ¶é´è¿è¡æåã\n\nKubernetes ä¼èªå¨å°éå¤ç events è¿è¡åå¹¶\n\n\n# å¼æºæ¹æ¡\n\n * eventrouter https://github.com/heptiolabs/eventrouter\n\n * KubeWatch\n\n * kubernetes-event-exporterï¼æ¨èï¼ https://github.com/opsgenie/kubernetes-event-exporter https://qiankunli.github.io/2020/04/27/kubernetes_event.html\n\n\n# kubernetes-event-exporter\n\nä½¿ç¨kubernetes-event-exporterå°k8sçäºä»¶å¯¼åºå°elasticsearchæ¥å¿ç³»ç»ä¸­\n\n00-roles.yaml 01-config.yamléç½®æ¥æ¶èï¼é»è®¤æ¯è¾åºå°æ¬å°è·¯å¾ 02-deployment.yaml\n\nkubectl apply -f 00-roles.yaml\nkubectl apply -f 01-config.yaml\nkubectl apply -f 02-deployment.yaml\n\n\n1\n2\n3\n\n\né®é¢ï¼\n\n * 1.0çæ¬åä¼åºç°è¶æ¶é®é¢\n\n * ééå°ESéç½®æªéªè¯éè¿ï¼ç®åéè¿æ åè¾åºéé\n\n# kubernetes-event-exporter + Loki\n\nPromtail éç½®ï¼\n\nscrapeConfigs:\n- job_name: kubernetes-events\n  pipeline_stages:\n    - cri: {}\n    - match:\n        selector: \'{app="event-exporter"}\'\n        stages:\n        - json:\n            expressions:\n              namespace: involvedObject.namespace\n        - labels:\n            namespace: ""  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n# kubernetes-event-exporter + fluentd:\n\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: event-exporter-cfg\n  namespace: monitoring\ndata:\n  config.yaml: |\n    logLevel: error\n    logFormat: json\n    route:\n      routes:\n        - match:\n            - receiver: "dump"\t\t# ä¸ä¸é¢çnameå¯¹åº\n    receivers:\n      - name: "dump"\n        # stdout: {}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n',normalizedContent:'----------------------------------------\n\ntitle: eventsæä¹å date: 2022-10-9 17:56:54 permalink: /pages/events-log/ categories:\n\n * ææ¯æè°\n * kubernetes\n * æ¥å¿éé tags:\n * \n\n\n# titletag: åå\n\nkubernetesçäºä»¶ï¼eventï¼æ¯ä¸ç§èµæºå¯¹è±¡ï¼resource objectï¼ï¼ç¨äºå±ç¤ºéç¾¤ååççæåµï¼kubernetesç³»ç»ä¸­çåä¸ªç»ä»¶ä¼å°è¿è¡æ¶åççåç§äºä»¶ä¸æ¥ç»kubernetes api serverãä¾å¦ï¼è°åº¦å¨åäºä»ä¹å³å®ï¼æäºpodä¸ºä»ä¹è¢«ä»èç¹ä¸­é©±éãå¯ä»¥éè¿kubectl get eventækubectl describe pod å½ä»¤æ¾ç¤ºäºä»¶ï¼æ¥çkuberneteséç¾¤ä¸­åçäºåªäºäºä»¶ã\n\næ§è¡è¿äºå½ä»¤åï¼é»è®¤æåµä¸åªä¼æ¾ç¤ºæè¿ï¼1å°æ¶åï¼åççäºä»¶ã\n\nç±äºkubernetesçäºä»¶æ¯ä¸ç§èµæºå¯¹è±¡ï¼å æ­¤å®ä»¬å­å¨å¨kubernetes api serverçetcdéç¾¤ä¸­ãä¸ºé¿åç£çç©ºé´è¢«å¡«æ»¡ï¼æå¼ºå¶æ§è¡ä¿çç­ç¥ï¼å¨æåä¸æ¬¡çäºä»¶åçåï¼å é¤1å°æ¶ä¹ååççäºä»¶ã\n\né»è®¤æåµä¸ kubectl get events å¹¶æ²¡ææç§ events åççé¡ºåºè¿è¡æåï¼æä»¥æä»¬å¾å¾éè¦ä¸ºå¶å¢å  --sort-by=\'{.metadata.creationtimestamp}\' åæ°æ¥è®©å¶è¾åºå¯ä»¥ææ¶é´è¿è¡æåã\n\nkubernetes ä¼èªå¨å°éå¤ç events è¿è¡åå¹¶\n\n\n# å¼æºæ¹æ¡\n\n * eventrouter https://github.com/heptiolabs/eventrouter\n\n * kubewatch\n\n * kubernetes-event-exporterï¼æ¨èï¼ https://github.com/opsgenie/kubernetes-event-exporter https://qiankunli.github.io/2020/04/27/kubernetes_event.html\n\n\n# kubernetes-event-exporter\n\nä½¿ç¨kubernetes-event-exporterå°k8sçäºä»¶å¯¼åºå°elasticsearchæ¥å¿ç³»ç»ä¸­\n\n00-roles.yaml 01-config.yamléç½®æ¥æ¶èï¼é»è®¤æ¯è¾åºå°æ¬å°è·¯å¾ 02-deployment.yaml\n\nkubectl apply -f 00-roles.yaml\nkubectl apply -f 01-config.yaml\nkubectl apply -f 02-deployment.yaml\n\n\n1\n2\n3\n\n\né®é¢ï¼\n\n * 1.0çæ¬åä¼åºç°è¶æ¶é®é¢\n\n * ééå°eséç½®æªéªè¯éè¿ï¼ç®åéè¿æ åè¾åºéé\n\n# kubernetes-event-exporter + loki\n\npromtail éç½®ï¼\n\nscrapeconfigs:\n- job_name: kubernetes-events\n  pipeline_stages:\n    - cri: {}\n    - match:\n        selector: \'{app="event-exporter"}\'\n        stages:\n        - json:\n            expressions:\n              namespace: involvedobject.namespace\n        - labels:\n            namespace: ""  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n# kubernetes-event-exporter + fluentd:\n\napiversion: v1\nkind: configmap\nmetadata:\n  name: event-exporter-cfg\n  namespace: monitoring\ndata:\n  config.yaml: |\n    loglevel: error\n    logformat: json\n    route:\n      routes:\n        - match:\n            - receiver: "dump"\t\t# ä¸ä¸é¢çnameå¯¹åº\n    receivers:\n      - name: "dump"\n        # stdout: {}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n',charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"è±ä¼è¾¾é©±å¨å®è£",frontmatter:{title:"è±ä¼è¾¾é©±å¨å®è£",date:"2022-08-24T18:56:55.000Z",permalink:"/pages/nvidiadevice/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"è±ä¼è¾¾é©±å¨å®è£"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/05.%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85.html"},{property:"og:type",content:"article"},{property:"og:title",content:"è±ä¼è¾¾é©±å¨å®è£"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/05.%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T18:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"è±ä¼è¾¾é©±å¨å®è£"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/05.%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/05.è±ä¼è¾¾é©±å¨å®è£.md",key:"v-6a155cef",path:"/pages/nvidiadevice/",headers:[{level:2,title:"centoså®è£nvidia GPUé©±å¨",slug:"centoså®è£nvidia-gpué©±å¨",normalizedTitle:"centoså®è£nvidia gpué©±å¨",charIndex:2}],headersStr:"centoså®è£nvidia GPUé©±å¨",content:"# centoså®è£nvidia GPUé©±å¨\n\nä¸è½½å¥½æ¾å¡é©±å¨åï¼å¨å®ç½ä¸http://www.geforce.cn/driversæç´¢å°å¯¹åºåå·çæ¾å¡é©±å¨å¹¶ä¸è½½ï¼ä¸è½½å°çé©±å¨æä»¶æ¯ä¸ä¸ªåç¼åä¸º.runçæä»¶\né¾æ¥ï¼https://www.nvidia.cn/Download/index.aspx?lang=cn\n\n1ãæ§è¡ä»¥ä¸4ä¸ªå½ä»¤æä½å®è£ç¯å¢å·¥å·å\nyum install kernel.x86* -y yum install kernel-devel-* -y yum install kernel-headers* -y yum install kernel-tools-libs* -y yum install kernel-tools-3* -y\n\n2ãæ§è¡å½ä»¤ yum list | grep kernel //æ¥ç4ä¸ªç¯å¢å·¥å·åçæ¬è¦ä¸è´ï¼å¦ï¼3.10.0-1062.1.1.el7ï¼\n\n3ãæ§è¡å½ä»¤ yum install -y gcc* glibc* glibc-* / /æååå®è£ç¼è¯ç¯å¢\n\n4ãç¦ç¨ç³»ç»é»è®¤å®è£ç nouveau é©±å¨ï¼\n\nlsmod | grep nouveau      //# æ¥çnouveauæ¯å¦å¯å¨ï¼å¦æç»æä¸ºç©ºå³ä¸ºç¦ç¨æå\n\n\n1\n\n\næ³¨æï¼ ç¦ç¨åéè¦éå¯æè½çæï¼å¦æå·²ç»ç¦ç¨ï¼åä¸éè¦éå¯\n\n5ã ä½¿ç¨WinSCPå·¥å·æèå¶ä»å·¥å·å°æ¾å¡é©±å¨åä¸ä¼ è³æ¬å°æå¡å¨ï¼å¦ä¸ä¼ è³/11ç®å½ï¼\n\n6ãæ§è¡å½ä»¤cd /11/åæ¢å°æ¾å¡é©±å¨åè·¯å¾\n\n7ãæ§è¡å½ä»¤ chmod u+x NVIDIA-Linux-x86_64-415.13.run // ä¿®æ¹.runæä»¶æå¯æ§è¡æéï¼\n\n8ãæ§è¡å½ä»¤ sh NVIDIA-Linux-x86_64-390.116-201902.run //å®è£æ¾å¡é©±å¨åï¼ç¶åæ ¹æ®æç¤ºé»è®¤å®è£å³å¯\n\n9ãæ§è¡å½ä»¤ nvidia-smi æ¥çå®è£æåä¸å¦ï¼è³æ­¤å®æå®è£ã",normalizedContent:"# centoså®è£nvidia gpué©±å¨\n\nä¸è½½å¥½æ¾å¡é©±å¨åï¼å¨å®ç½ä¸http://www.geforce.cn/driversæç´¢å°å¯¹åºåå·çæ¾å¡é©±å¨å¹¶ä¸è½½ï¼ä¸è½½å°çé©±å¨æä»¶æ¯ä¸ä¸ªåç¼åä¸º.runçæä»¶\né¾æ¥ï¼https://www.nvidia.cn/download/index.aspx?lang=cn\n\n1ãæ§è¡ä»¥ä¸4ä¸ªå½ä»¤æä½å®è£ç¯å¢å·¥å·å\nyum install kernel.x86* -y yum install kernel-devel-* -y yum install kernel-headers* -y yum install kernel-tools-libs* -y yum install kernel-tools-3* -y\n\n2ãæ§è¡å½ä»¤ yum list | grep kernel //æ¥ç4ä¸ªç¯å¢å·¥å·åçæ¬è¦ä¸è´ï¼å¦ï¼3.10.0-1062.1.1.el7ï¼\n\n3ãæ§è¡å½ä»¤ yum install -y gcc* glibc* glibc-* / /æååå®è£ç¼è¯ç¯å¢\n\n4ãç¦ç¨ç³»ç»é»è®¤å®è£ç nouveau é©±å¨ï¼\n\nlsmod | grep nouveau      //# æ¥çnouveauæ¯å¦å¯å¨ï¼å¦æç»æä¸ºç©ºå³ä¸ºç¦ç¨æå\n\n\n1\n\n\næ³¨æï¼ ç¦ç¨åéè¦éå¯æè½çæï¼å¦æå·²ç»ç¦ç¨ï¼åä¸éè¦éå¯\n\n5ã ä½¿ç¨winscpå·¥å·æèå¶ä»å·¥å·å°æ¾å¡é©±å¨åä¸ä¼ è³æ¬å°æå¡å¨ï¼å¦ä¸ä¼ è³/11ç®å½ï¼\n\n6ãæ§è¡å½ä»¤cd /11/åæ¢å°æ¾å¡é©±å¨åè·¯å¾\n\n7ãæ§è¡å½ä»¤ chmod u+x nvidia-linux-x86_64-415.13.run // ä¿®æ¹.runæä»¶æå¯æ§è¡æéï¼\n\n8ãæ§è¡å½ä»¤ sh nvidia-linux-x86_64-390.116-201902.run //å®è£æ¾å¡é©±å¨åï¼ç¶åæ ¹æ®æç¤ºé»è®¤å®è£å³å¯\n\n9ãæ§è¡å½ä»¤ nvidia-smi æ¥çå®è£æåä¸å¦ï¼è³æ­¤å®æå®è£ã",charsets:{cjk:!0}},{title:"å¸¸ç¨è®¡ç®",frontmatter:{title:"å¸¸ç¨è®¡ç®",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang01/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å¸¸ç¨è®¡ç®"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¸¸ç¨è®¡ç®"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¸¸ç¨è®¡ç®"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html",relativePath:"01.ææ¯æè°/04.golang/01.å¸¸ç¨è®¡ç®.md",key:"v-fa04c054",path:"/pages/golang01/",headers:[{level:2,title:"æ°ç»å»é",slug:"æ°ç»å»é",normalizedTitle:"æ°ç»å»é",charIndex:2}],headersStr:"æ°ç»å»é",content:"# æ°ç»å»é\n\nfunc RemoveRepeatedElement(arr []string) (newArr []string) {\n\tnewArr = make([]string, 0)\n\tfor i := 0; i < len(arr); i++ {\n\t\trepeat := false\n\t\tfor j := i + 1; j < len(arr); j++ {\n\t\t\tif arr[i] == arr[j] {\n\t\t\t\trepeat = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif !repeat {\n\t\t\tnewArr = append(newArr, arr[i])\n\t\t}\n\t}\n\treturn\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",normalizedContent:"# æ°ç»å»é\n\nfunc removerepeatedelement(arr []string) (newarr []string) {\n\tnewarr = make([]string, 0)\n\tfor i := 0; i < len(arr); i++ {\n\t\trepeat := false\n\t\tfor j := i + 1; j < len(arr); j++ {\n\t\t\tif arr[i] == arr[j] {\n\t\t\t\trepeat = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif !repeat {\n\t\t\tnewarr = append(newarr, arr[i])\n\t\t}\n\t}\n\treturn\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"è¾è®¯äºqGPU",frontmatter:{title:"è¾è®¯äºqGPU",date:"2022-08-24T18:56:55.000Z",permalink:"/pages/qgpu/",categories:["ææ¯æè°","kubernetes"],tags:["gpu"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"è¾è®¯äºqGPU"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/06.%E8%85%BE%E8%AE%AF%E4%BA%91qGPU.html"},{property:"og:type",content:"article"},{property:"og:title",content:"è¾è®¯äºqGPU"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/06.%E8%85%BE%E8%AE%AF%E4%BA%91qGPU.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-24T18:56:55.000Z"},{property:"article:tag",content:"gpu"},{itemprop:"name",content:"è¾è®¯äºqGPU"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/306.GPU/06.%E8%85%BE%E8%AE%AF%E4%BA%91qGPU.html",relativePath:"01.ææ¯æè°/03.kubernetes/306.GPU/06.è¾è®¯äºqGPU.md",key:"v-394a82c1",path:"/pages/qgpu/",headersStr:null,content:"https://mp.weixin.qq.com/s/W-Ntu2xdjypFgs5EPMVjkg",normalizedContent:"https://mp.weixin.qq.com/s/w-ntu2xdjypfgs5epmvjkg",charsets:{}},{title:"golangé¢è¯é®é¢",frontmatter:{title:"golangé¢è¯é®é¢",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang02/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"golangé¢è¯é®é¢"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html"},{property:"og:type",content:"article"},{property:"og:title",content:"golangé¢è¯é®é¢"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"golangé¢è¯é®é¢"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html",relativePath:"01.ææ¯æè°/04.golang/02.golangé¢è¯é®é¢.md",key:"v-6c7b2800",path:"/pages/golang02/",headers:[{level:3,title:"Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼",slug:"golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åé",normalizedTitle:"golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼",charIndex:2},{level:3,title:"Golang ä¸­çå¹¶åæ¨¡å",slug:"golang-ä¸­çå¹¶åæ¨¡å",normalizedTitle:"golang ä¸­çå¹¶åæ¨¡å",charIndex:103},{level:3,title:"Goçº¿ç¨å®ç°æ¨¡åMPG",slug:"goçº¿ç¨å®ç°æ¨¡åmpg",normalizedTitle:"goçº¿ç¨å®ç°æ¨¡åmpg",charIndex:623},{level:3,title:"ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼",slug:"ä»ä¹æ¯channel-å®æ¯çº¿ç¨å®å¨çå",normalizedTitle:"ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼",charIndex:927},{level:3,title:"goroutineä¸­çè°åº¦åç",slug:"goroutineä¸­çè°åº¦åç",normalizedTitle:"goroutineä¸­çè°åº¦åç",charIndex:952},{level:3,title:"çº¿ç¨/åç¨/è¿ç¨çåºå«",slug:"çº¿ç¨-åç¨-è¿ç¨çåºå«",normalizedTitle:"çº¿ç¨/åç¨/è¿ç¨çåºå«",charIndex:972},{level:3,title:"golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹",slug:"golangåé¾è¡¨çå®ç°-æä¹å®ä¹-åå§å-æ·»å -å é¤èç¹",normalizedTitle:"golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹",charIndex:1275},{level:3,title:"makeånewå·®å«",slug:"makeånewå·®å«",normalizedTitle:"makeånewå·®å«",charIndex:1309},{level:3,title:"nilåçåç©ºåççåºå«",slug:"nilåçåç©ºåççåºå«",normalizedTitle:"nilåçåç©ºåççåºå«",charIndex:1769},{level:3,title:"å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼",slug:"å¯¹å·²ç»å³é­çç-chan-è¿è¡è¯»å-ä¼æä¹æ ·-ä¸ºä»ä¹",normalizedTitle:"å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼",charIndex:1873},{level:3,title:"ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼",slug:"ç¨è¿-fallthrough-å³é®å­å-è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹",normalizedTitle:"ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼",charIndex:2141},{level:3,title:"restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼",slug:"restfulçæå-é½æåªäºè¯·æ±æ¹æ³-åå«ä»£è¡¨ä»ä¹ææ",normalizedTitle:"restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼",charIndex:2388},{level:3,title:"Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå«",slug:"golangå¯¼å¥åæ¶-ä½¿ç¨-å¯¼å¥æä»ä¹åºå«",normalizedTitle:"golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå«",charIndex:2422},{level:3,title:"Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å",slug:"goæ¯æç±»åç»§æ¿å-go-æ¯é¢åå¯¹è±¡çè¯­è¨å",normalizedTitle:"goæ¯æç±»åç»§æ¿åï¼go æ¯é¢åå¯¹è±¡çè¯­è¨å",charIndex:2454},{level:3,title:"å¦ä½å¤æ­é¾è¡¨æç¯",slug:"å¦ä½å¤æ­é¾è¡¨æç¯",normalizedTitle:"å¦ä½å¤æ­é¾è¡¨æç¯",charIndex:2760}],headersStr:"Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼ Golang ä¸­çå¹¶åæ¨¡å Goçº¿ç¨å®ç°æ¨¡åMPG ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼ goroutineä¸­çè°åº¦åç çº¿ç¨/åç¨/è¿ç¨çåºå« golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹ makeånewå·®å« nilåçåç©ºåççåºå« å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼ ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼ restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼ Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå« Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å å¦ä½å¤æ­é¾è¡¨æç¯",content:'# Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼\n\nmutexé Golangä¸­Goroutine å¯ä»¥éè¿ Channel è¿è¡å®å¨è¯»åå±äº«åé\n\næç¼å²channelåæ ç¼åchannelçåºå«\n\n\n# Golang ä¸­çå¹¶åæ¨¡å\n\nè¯·è°ä¸è° go è¯­è¨çå¹¶åæºå¶ä»¥åå®æä½¿ç¨çCSPå¹¶åæ¨¡å\n\nGoå®ç°äºä¸¤ç§å¹¶åå½¢å¼ãç¬¬ä¸ç§æ¯å¤§å®¶æ®éè®¤ç¥çï¼å¤çº¿ç¨å±äº«åå­ãå¶å®å°±æ¯JavaæèC++ç­è¯­è¨ä¸­çå¤çº¿ç¨å¼åãå¦å¤ä¸ç§æ¯Goè¯­è¨ç¹æçï¼ä¹æ¯Goè¯­è¨æ¨èçï¼CSPï¼communicating sequential processesï¼å¹¶åæ¨¡åã\n\néè¿channeléç¥å®ç°å¹¶åæ§å¶ éè¿syncåä¸­çWaitGroupå®ç°å¹¶åæ§å¶ å½ä¸» goroutine è¿è¡å° <-ch æ¥å channel çå¼çæ¶åï¼å¦æè¯¥ channel ä¸­æ²¡ææ°æ®ï¼å°±ä¼ä¸ç´é»å¡ç­å¾ï¼ç´å°æå¼ãè¿æ ·å°±å¯ä»¥ç®åå®ç°å¹¶åæ§å¶\n\nå¨Go 1.7 ä»¥åå¼è¿çå¼ºå¤§çContextä¸ä¸æï¼å®ç°å¹¶åæ§å¶\n\nGoçCSPå¹¶åæ¨¡åï¼æ¯éè¿goroutineåchannelæ¥å®ç°çã ï·goroutineÂ æ¯Goè¯­è¨ä¸­å¹¶åçæ§è¡åä½ãæç¹æ½è±¡ï¼å¶å®å°±æ¯åä¼ ç»æ¦å¿µä¸çâçº¿ç¨âç±»ä¼¼ï¼å¯ä»¥çè§£ä¸ºâçº¿ç¨âã ï·channelæ¯Goè¯­è¨ä¸­åä¸ªå¹¶åç»æä½(goroutine)ä¹åçéä¿¡æºå¶ã éä¿çè®²ï¼å°±æ¯åä¸ªgoroutineä¹é´éä¿¡çâç®¡éâï¼æç¹ç±»ä¼¼äºLinuxä¸­çç®¡éã\n\n\n# Goçº¿ç¨å®ç°æ¨¡åMPG\n\nMæçæ¯Machineï¼ä¸ä¸ªMç´æ¥å³èäºä¸ä¸ªåæ ¸çº¿ç¨ãç±æä½ç³»ç»ç®¡çã Pæçæ¯âprocessorâï¼ä»£è¡¨äºMæéçä¸ä¸æç¯å¢ï¼ä¹æ¯å¤çç¨æ·çº§ä»£ç é»è¾çå¤çå¨ãå®è´è´£è¡æ¥MåGçè°åº¦ä¸ä¸æï¼å°ç­å¾æ§è¡çGä¸Må¯¹æ¥ã Gæçæ¯Goroutineï¼å¶å®æ¬è´¨ä¸ä¹æ¯ä¸ç§è½»éçº§ççº¿ç¨ãåæ¬äºè°ç¨æ ï¼éè¦çè°åº¦ä¿¡æ¯ï¼ä¾å¦channelç­ã Pçæ°éç±ç¯å¢åéä¸­çGOMAXPROCSå³å®ï¼éå¸¸æ¥è¯´å®æ¯åæ ¸å¿æ°å¯¹åºï¼ä¾å¦å¨4Coreçæå¡å¨ä¸åå¯å¨4ä¸ªçº¿ç¨ãGä¼æå¾å¤ä¸ªï¼æ¯ä¸ªPä¼å°Goroutineä»ä¸ä¸ªå°±ç»ªçéåä¸­åPopæä½ï¼ä¸ºäºåå°éçç«äºï¼éå¸¸æåµä¸æ¯ä¸ªPä¼è´è´£ä¸ä¸ªéåã\n\n\n# ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼\n\n\n# goroutineä¸­çè°åº¦åç\n\n\n# çº¿ç¨/åç¨/è¿ç¨çåºå«\n\nçº¿ç¨æ¥æèªå·±ç¬ç«çæ åå±äº«çå ï¼å±äº«å ï¼ä¸å±äº«æ ï¼çº¿ç¨çåæ¢ä¸è¬ä¹ç±æä½ç³»ç»è°åº¦ã åçº¿ç¨ç±»ä¼¼ï¼å±äº«å ï¼ä¸å±äº«æ ï¼åç¨çåæ¢ä¸è¬ç±ç¨åºåå¨ä»£ç ä¸­æ¾å¼æ§å¶ãå®é¿åäºä¸ä¸æåæ¢çé¢å¤èè´¹ï¼å¼é¡¾äºå¤çº¿ç¨çä¼ç¹ï¼ç®åäºé«å¹¶åç¨åºçå¤æã\n\nGoroutineåå¶ä»è¯­è¨çåç¨ï¼coroutineï¼å¨ä½¿ç¨æ¹å¼ä¸ç±»ä¼¼ï¼ä½ä»å­é¢æä¹ä¸æ¥çä¸åï¼ä¸ä¸ªæ¯Goroutineï¼ä¸ä¸ªæ¯coroutineï¼ï¼åå°±æ¯åç¨æ¯ä¸ç§åä½ä»»å¡æ§å¶æºå¶ï¼å¨æç®åçæä¹ä¸ï¼åç¨ä¸æ¯å¹¶åçï¼èGoroutineæ¯æå¹¶åçãå æ­¤Goroutineå¯ä»¥çè§£ä¸ºä¸ç§Goè¯­è¨çåç¨ãåæ¶å®å¯ä»¥è¿è¡å¨ä¸ä¸ªæå¤ä¸ªçº¿ç¨ä¸ã\n\n\n# golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹\n\n\n# makeånewå·®å«\n\nnew ()æ¯åå»ºå½æ°ï¼å½æ°ååä¸º: func new(Type) *Type ï·1 make ä¹æ¯åå»ºå½æ°ï¼å®çå½æ°åå æ¯ new å¤äºä¸ä¸ªï¼é¿åº¦ï¼åæ°ï¼è¿åå¼ä¹ä¸å: //ç¬¬ä¸ä¸ªåæ°æ¯ä¸ä¸ªç±»åï¼ç¬¬äºä¸ªåæ°æ¯é¿åº¦ //è¿åå¼æ¯ä¸ä¸ªæåè¯¥ç±»åçä¸ä¸ªå¼ç¨ func make(Type, size IntegerType) Type makeånewé½æ¯golangç¨æ¥åéåå­çå§å»ºå½æ°ï¼ä¸å¨å ä¸åéåå­ï¼å¹¶ä¸ºè¯¥åéæ§è¡äºåå§åæä½make ç¨äºä¸ºå¼ç¨ç±»ååéåå­ç©ºé´ï¼å¶å¨åéåå­çåæ¶ï¼ä¹åå§åäºä¸äºç¸å³å±æ§(è¿éåå§åè¿äºç¸å³å±æ§æ¶ä¸åæ¯ç®åçç¨é»è®¤é¶å¼æ¥åå§åäºï¼ï¼ï¼)ãnewåªæ¯åéé»è®¤é¶å¼åå­å¹¶è¿åæåè¯¥é¶å¼åå­çä¸ä¸ªæéä¹å°±æ¯æ§è¡äºä¸ä¸ªé»è®¤åå§åï¼å¨é¨ç¨é»è®¤é¶å¼æ¥è¿è¡åå§åï¼ã makeè¿åçæ¯ä¸ä¸ªå¼ç¨ç±»åï¼ènewè¿åçæ¯ä¸ä¸ªæåé¶å¼åå­ç©ºé´çæéã makeåªè½ç¨æ¥åéååå§åå¼ç¨ç±»åï¼sliceï¼mapï¼channelçæ°æ®ï¼ newå¯ä»¥åéä»»æç±»åçæ°æ®ã\n\n\n# nilåçåç©ºåççåºå«\n\nnilåçåç©ºåçæåçå°åä¸ä¸æ ·ãnilç©ºåçå¼ç¨æ°ç»æéå°åä¸º0ï¼æ æåä»»ä½å®éå°åï¼ ç©ºåççå¼ç¨æ°ç»æéå°åæ¯æçï¼ä¸åºå®ä¸ºä¸ä¸ªå¼ è½å¦éè¿forå¾ªç¯éåå é¤åç´ \n\n\n# å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼\n\nè¯»å·²ç»å³é­ç chan è½ä¸ç´è¯»å°ä¸è¥¿ï¼ä½æ¯è¯»å°çåå®¹æ ¹æ®ééåå³é­åæ¯å¦æåç´ èä¸åã å¦æ chan å³é­åï¼buffer åæåç´ è¿æªè¯» , ä¼æ­£ç¡®è¯»å° chan åçå¼ï¼ä¸è¿åçç¬¬äºä¸ª bool å¼ï¼æ¯å¦è¯»æåï¼ä¸º trueã å¦æ chan å³é­åï¼buffer åæåç´ å·²ç»è¢«è¯»å®ï¼chan åæ å¼ï¼æ¥ä¸æ¥æææ¥æ¶çå¼é½ä¼éé»å¡ç´æ¥æåï¼è¿å channel åç´ çé¶å¼ï¼ä½æ¯ç¬¬äºä¸ª bool å¼ä¸ç´ä¸º falseã åå·²ç»å³é­ç chan ä¼ panic\n\n\n# ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼\n\nå¶ä»è¯­è¨ä¸­ï¼switch-case ç»æä¸­ä¸è¬é½éè¦å¨æ¯ä¸ª case åæ¯ç»æå¤æ¾å¼çè°ç¨ break è¯­å¥ä»¥é²æ­¢ åä¸ä¸ª case åæ¯è¢«è´¯ç©¿åè°ç¨ä¸ä¸ä¸ª case åæ¯çé»è¾ï¼go ç¼è¯å¨ä»è¯­æ³å±é¢ä¸æ¶é¤äºè¿ç§éå¤çå·¥ä½ï¼è®©å¼åèæ´è½»æ¾ï¼ä½ææ¶åæä»¬çåºæ¯å°±æ¯éè¦è´¯ç©¿å¤ä¸ª caseï¼ä½æ¯ç¼è¯å¨é»è®¤æ¯ä¸è´¯ç©¿çï¼è¿ä¸ªæ¶å fallthrough å°±èµ·ä½ç¨äºï¼è®©æä¸ª case åæ¯åæ¬¡è´¯ç©¿å°ä¸ä¸ä¸ª case åæ¯ã\n\n\n# restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼\n\n\n# Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.\'å¯¼å¥æä»ä¹åºå«\n\n\n# Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å\n\næ²¡æä¼ ç»çç±»ï¼ä¹æ²¡æç»§æ¿ã\n\nåèä»£ä¹çæ¯ç»æåç»åçæ¹å¼\n\nGo æç±»ååæ¹æ³ï¼å¹¶ä¸åè®¸é¢åå¯¹è±¡çç¼ç¨é£æ ¼ï¼ä½æ²¡æç±»åå±æ¬¡ã\n\nGo ä¸­ç "æ¥å£ "æ¦å¿µæä¾äºä¸ç§ä¸åçæ¹æ³ï¼æä»¬è®¤ä¸ºè¿ç§æ¹æ³æäºä½¿ç¨ï¼èä¸å¨æäºæ¹é¢æ´å éç¨ãè¿æä¸äºæ¹æ³å¯ä»¥å°ç±»ååµå¥å°å¶ä»ç±»åä¸­ï¼ä»¥æä¾ç±»ä¼¼çä¸è¥¿ï¼ä½ä¸ç­åäºå­ç±»ã\n\nGo ä¸­çæ¹æ³æ¯ C++ æ Java ä¸­çæ¹æ³æ´éç¨ï¼å®ä»¬å¯ä»¥ä¸ºä»»ä½ç±»åçæ°æ®å®ä¹ï¼çè³æ¯åç½®ç±»åï¼å¦æ®éçã"æªè£ç®±ç "æ´æ°ãå®ä»¬å¹¶ä¸å±éäºç»æï¼ç±»ï¼ã\n\nGo ç±äºç¼ºä¹ç±»åå±æ¬¡ï¼Go ä¸­ç "å¯¹è±¡ "æ¯ C++ æ Java ç­è¯­è¨æ´è½»å·§ã\n\n\n# å¦ä½å¤æ­é¾è¡¨æç¯\n\nä¸åè®¸ä¿®æ¹é¾è¡¨ç»æã æ¶é´å¤æåº¦O(n)ï¼ç©ºé´å¤æåº¦O(1)ã\n\nhttps://blog.csdn.net/u010983881/article/details/78896293 å¿«æ¢æéï¼ä¸ä¸ªè·³1ï¼ä¸ä¸ªè·³2\n\næ¹æ³ä¸ãç©·ä¸¾éå æ¹æ³ä¸ï¼é¦åä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ä»å¤´èç¹éæ°éåæ°èç¹ä¹åçææèç¹ï¼ç¨æ°èç¹IDåæ­¤èç¹ä¹åææèç¹IDä¾æ¬¡ä½æ¯è¾ãå¦æåç°æ°èç¹ä¹åçææèç¹å½ä¸­å­å¨ç¸åèç¹IDï¼åè¯´æè¯¥èç¹è¢«éåè¿ä¸¤æ¬¡ï¼é¾è¡¨æç¯ï¼å¦æä¹åçææèç¹å½ä¸­ä¸å­å¨ç¸åçèç¹ï¼å°±ç»§ç»­éåä¸ä¸ä¸ªæ°èç¹ï¼ç»§ç»­éå¤åæçæä½ã ç®æ³çæ¶é´å¤æåº¦æ¯0+1+2+3+â¦+(D+S-1) = (D+S-1)(D+S)/2 ï¼ å¯ä»¥ç®åå°çè§£æ O(NN)ãèæ­¤ç®æ³æ²¡æåå»ºé¢å¤å­å¨ç©ºé´ï¼ç©ºé´å¤æåº¦å¯ä»¥ç®åå°çè§£æä¸ºO(1) æ¹æ³äºãåå¸è¡¨ç¼å­ é¦ååå»ºä¸ä¸ªä»¥èç¹IDä¸ºé®çHashSetéåï¼ç¨æ¥å­å¨æ¾ç»éåè¿çèç¹ãç¶ååæ ·æ¯ä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ç¨æ°èç¹åHashSetéåå½ä¸­å­å¨çèç¹ä½æ¯è¾ï¼å¦æåç°HashSetå½ä¸­å­å¨ç¸åèç¹IDï¼åè¯´æé¾è¡¨æç¯ï¼å¦æHashSetå½ä¸­ä¸å­å¨ç¸åçèç¹IDï¼å°±æè¿ä¸ªæ°èç¹IDå­å¥HashSetï¼ä¹åè¿å¥ä¸ä¸èç¹ï¼ç»§ç»­éå¤åæçæä½ã\n\næ¹æ³ä¸ãå¿«æ¢æé é¦ååå»ºä¸¤ä¸ªæé1å2ï¼å¨javaéå°±æ¯ä¸¤ä¸ªå¯¹è±¡å¼ç¨ï¼ï¼åæ¶æåè¿ä¸ªé¾è¡¨çå¤´èç¹ãç¶åå¼å§ä¸ä¸ªå¤§å¾ªç¯ï¼å¨å¾ªç¯ä½ä¸­ï¼è®©æé1æ¯æ¬¡åä¸ç§»å¨ä¸ä¸ªèç¹ï¼è®©æé2æ¯æ¬¡åä¸ç§»å¨ä¸¤ä¸ªèç¹ï¼ç¶åæ¯è¾ä¸¤ä¸ªæéæåçèç¹æ¯å¦ç¸åãå¦æç¸åï¼åå¤æ­åºé¾è¡¨æç¯ï¼å¦æä¸åï¼åç»§ç»­ä¸ä¸æ¬¡å¾ªç¯ã æ¹æ³åãSetéåå¤§å°åå æèç¹æ¾å¥setéï¼æ¯æ¬¡è®¿é®ä¸ä¸ªèç¹æ¶ï¼å¦æseté¿åº¦ä¸åï¼åè·³åºï¼è¯´ææç¯ãå¦åseté¿åº¦+1ï¼ç»§ç»­éåã è¯¥æ¹æ³æ¶é´å¤æåº¦æ¯Oï¼Nï¼ï¼ç©ºé´å¤æåº¦ä¸å ä¸ºéè¦é¢å¤ç­æ°éçå­å¨ç©ºé´ï¼æä»¥ç©ºé´å¤æåº¦æ¯Oï¼nï¼ã å¦ä½å¤æ­ä¸¤ä¸ªåé¾è¡¨æ¯å¦ç¸äº¤ï¼ä»¥åç¸äº¤ç¹ æ¹æ³ä¸ãç´æ¥æ³ ç´æ¥å¤æ­ç¬¬ä¸ä¸ªé¾è¡¨çæ¯ä¸ªç»ç¹æ¯å¦å¨ç¬¬äºä¸ªé¾è¡¨ä¸­ï¼æ¶é´å¤æåº¦ä¸ºO(len1*len2)ï¼èæ¶å¾å¤§',normalizedContent:'# golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼\n\nmutexé golangä¸­goroutine å¯ä»¥éè¿ channel è¿è¡å®å¨è¯»åå±äº«åé\n\næç¼å²channelåæ ç¼åchannelçåºå«\n\n\n# golang ä¸­çå¹¶åæ¨¡å\n\nè¯·è°ä¸è° go è¯­è¨çå¹¶åæºå¶ä»¥åå®æä½¿ç¨çcspå¹¶åæ¨¡å\n\ngoå®ç°äºä¸¤ç§å¹¶åå½¢å¼ãç¬¬ä¸ç§æ¯å¤§å®¶æ®éè®¤ç¥çï¼å¤çº¿ç¨å±äº«åå­ãå¶å®å°±æ¯javaæèc++ç­è¯­è¨ä¸­çå¤çº¿ç¨å¼åãå¦å¤ä¸ç§æ¯goè¯­è¨ç¹æçï¼ä¹æ¯goè¯­è¨æ¨èçï¼cspï¼communicating sequential processesï¼å¹¶åæ¨¡åã\n\néè¿channeléç¥å®ç°å¹¶åæ§å¶ éè¿syncåä¸­çwaitgroupå®ç°å¹¶åæ§å¶ å½ä¸» goroutine è¿è¡å° <-ch æ¥å channel çå¼çæ¶åï¼å¦æè¯¥ channel ä¸­æ²¡ææ°æ®ï¼å°±ä¼ä¸ç´é»å¡ç­å¾ï¼ç´å°æå¼ãè¿æ ·å°±å¯ä»¥ç®åå®ç°å¹¶åæ§å¶\n\nå¨go 1.7 ä»¥åå¼è¿çå¼ºå¤§çcontextä¸ä¸æï¼å®ç°å¹¶åæ§å¶\n\ngoçcspå¹¶åæ¨¡åï¼æ¯éè¿goroutineåchannelæ¥å®ç°çã ï·goroutineÂ æ¯goè¯­è¨ä¸­å¹¶åçæ§è¡åä½ãæç¹æ½è±¡ï¼å¶å®å°±æ¯åä¼ ç»æ¦å¿µä¸çâçº¿ç¨âç±»ä¼¼ï¼å¯ä»¥çè§£ä¸ºâçº¿ç¨âã ï·channelæ¯goè¯­è¨ä¸­åä¸ªå¹¶åç»æä½(goroutine)ä¹åçéä¿¡æºå¶ã éä¿çè®²ï¼å°±æ¯åä¸ªgoroutineä¹é´éä¿¡çâç®¡éâï¼æç¹ç±»ä¼¼äºlinuxä¸­çç®¡éã\n\n\n# goçº¿ç¨å®ç°æ¨¡åmpg\n\nmæçæ¯machineï¼ä¸ä¸ªmç´æ¥å³èäºä¸ä¸ªåæ ¸çº¿ç¨ãç±æä½ç³»ç»ç®¡çã pæçæ¯âprocessorâï¼ä»£è¡¨äºmæéçä¸ä¸æç¯å¢ï¼ä¹æ¯å¤çç¨æ·çº§ä»£ç é»è¾çå¤çå¨ãå®è´è´£è¡æ¥mågçè°åº¦ä¸ä¸æï¼å°ç­å¾æ§è¡çgä¸må¯¹æ¥ã gæçæ¯goroutineï¼å¶å®æ¬è´¨ä¸ä¹æ¯ä¸ç§è½»éçº§ççº¿ç¨ãåæ¬äºè°ç¨æ ï¼éè¦çè°åº¦ä¿¡æ¯ï¼ä¾å¦channelç­ã pçæ°éç±ç¯å¢åéä¸­çgomaxprocså³å®ï¼éå¸¸æ¥è¯´å®æ¯åæ ¸å¿æ°å¯¹åºï¼ä¾å¦å¨4coreçæå¡å¨ä¸åå¯å¨4ä¸ªçº¿ç¨ãgä¼æå¾å¤ä¸ªï¼æ¯ä¸ªpä¼å°goroutineä»ä¸ä¸ªå°±ç»ªçéåä¸­åpopæä½ï¼ä¸ºäºåå°éçç«äºï¼éå¸¸æåµä¸æ¯ä¸ªpä¼è´è´£ä¸ä¸ªéåã\n\n\n# ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼\n\n\n# goroutineä¸­çè°åº¦åç\n\n\n# çº¿ç¨/åç¨/è¿ç¨çåºå«\n\nçº¿ç¨æ¥æèªå·±ç¬ç«çæ åå±äº«çå ï¼å±äº«å ï¼ä¸å±äº«æ ï¼çº¿ç¨çåæ¢ä¸è¬ä¹ç±æä½ç³»ç»è°åº¦ã åçº¿ç¨ç±»ä¼¼ï¼å±äº«å ï¼ä¸å±äº«æ ï¼åç¨çåæ¢ä¸è¬ç±ç¨åºåå¨ä»£ç ä¸­æ¾å¼æ§å¶ãå®é¿åäºä¸ä¸æåæ¢çé¢å¤èè´¹ï¼å¼é¡¾äºå¤çº¿ç¨çä¼ç¹ï¼ç®åäºé«å¹¶åç¨åºçå¤æã\n\ngoroutineåå¶ä»è¯­è¨çåç¨ï¼coroutineï¼å¨ä½¿ç¨æ¹å¼ä¸ç±»ä¼¼ï¼ä½ä»å­é¢æä¹ä¸æ¥çä¸åï¼ä¸ä¸ªæ¯goroutineï¼ä¸ä¸ªæ¯coroutineï¼ï¼åå°±æ¯åç¨æ¯ä¸ç§åä½ä»»å¡æ§å¶æºå¶ï¼å¨æç®åçæä¹ä¸ï¼åç¨ä¸æ¯å¹¶åçï¼ègoroutineæ¯æå¹¶åçãå æ­¤goroutineå¯ä»¥çè§£ä¸ºä¸ç§goè¯­è¨çåç¨ãåæ¶å®å¯ä»¥è¿è¡å¨ä¸ä¸ªæå¤ä¸ªçº¿ç¨ä¸ã\n\n\n# golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹\n\n\n# makeånewå·®å«\n\nnew ()æ¯åå»ºå½æ°ï¼å½æ°ååä¸º: func new(type) *type ï·1 make ä¹æ¯åå»ºå½æ°ï¼å®çå½æ°åå æ¯ new å¤äºä¸ä¸ªï¼é¿åº¦ï¼åæ°ï¼è¿åå¼ä¹ä¸å: //ç¬¬ä¸ä¸ªåæ°æ¯ä¸ä¸ªç±»åï¼ç¬¬äºä¸ªåæ°æ¯é¿åº¦ //è¿åå¼æ¯ä¸ä¸ªæåè¯¥ç±»åçä¸ä¸ªå¼ç¨ func make(type, size integertype) type makeånewé½æ¯golangç¨æ¥åéåå­çå§å»ºå½æ°ï¼ä¸å¨å ä¸åéåå­ï¼å¹¶ä¸ºè¯¥åéæ§è¡äºåå§åæä½make ç¨äºä¸ºå¼ç¨ç±»ååéåå­ç©ºé´ï¼å¶å¨åéåå­çåæ¶ï¼ä¹åå§åäºä¸äºç¸å³å±æ§(è¿éåå§åè¿äºç¸å³å±æ§æ¶ä¸åæ¯ç®åçç¨é»è®¤é¶å¼æ¥åå§åäºï¼ï¼ï¼)ãnewåªæ¯åéé»è®¤é¶å¼åå­å¹¶è¿åæåè¯¥é¶å¼åå­çä¸ä¸ªæéä¹å°±æ¯æ§è¡äºä¸ä¸ªé»è®¤åå§åï¼å¨é¨ç¨é»è®¤é¶å¼æ¥è¿è¡åå§åï¼ã makeè¿åçæ¯ä¸ä¸ªå¼ç¨ç±»åï¼ènewè¿åçæ¯ä¸ä¸ªæåé¶å¼åå­ç©ºé´çæéã makeåªè½ç¨æ¥åéååå§åå¼ç¨ç±»åï¼sliceï¼mapï¼channelçæ°æ®ï¼ newå¯ä»¥åéä»»æç±»åçæ°æ®ã\n\n\n# nilåçåç©ºåççåºå«\n\nnilåçåç©ºåçæåçå°åä¸ä¸æ ·ãnilç©ºåçå¼ç¨æ°ç»æéå°åä¸º0ï¼æ æåä»»ä½å®éå°åï¼ ç©ºåççå¼ç¨æ°ç»æéå°åæ¯æçï¼ä¸åºå®ä¸ºä¸ä¸ªå¼ è½å¦éè¿forå¾ªç¯éåå é¤åç´ \n\n\n# å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼\n\nè¯»å·²ç»å³é­ç chan è½ä¸ç´è¯»å°ä¸è¥¿ï¼ä½æ¯è¯»å°çåå®¹æ ¹æ®ééåå³é­åæ¯å¦æåç´ èä¸åã å¦æ chan å³é­åï¼buffer åæåç´ è¿æªè¯» , ä¼æ­£ç¡®è¯»å° chan åçå¼ï¼ä¸è¿åçç¬¬äºä¸ª bool å¼ï¼æ¯å¦è¯»æåï¼ä¸º trueã å¦æ chan å³é­åï¼buffer åæåç´ å·²ç»è¢«è¯»å®ï¼chan åæ å¼ï¼æ¥ä¸æ¥æææ¥æ¶çå¼é½ä¼éé»å¡ç´æ¥æåï¼è¿å channel åç´ çé¶å¼ï¼ä½æ¯ç¬¬äºä¸ª bool å¼ä¸ç´ä¸º falseã åå·²ç»å³é­ç chan ä¼ panic\n\n\n# ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼\n\nå¶ä»è¯­è¨ä¸­ï¼switch-case ç»æä¸­ä¸è¬é½éè¦å¨æ¯ä¸ª case åæ¯ç»æå¤æ¾å¼çè°ç¨ break è¯­å¥ä»¥é²æ­¢ åä¸ä¸ª case åæ¯è¢«è´¯ç©¿åè°ç¨ä¸ä¸ä¸ª case åæ¯çé»è¾ï¼go ç¼è¯å¨ä»è¯­æ³å±é¢ä¸æ¶é¤äºè¿ç§éå¤çå·¥ä½ï¼è®©å¼åèæ´è½»æ¾ï¼ä½ææ¶åæä»¬çåºæ¯å°±æ¯éè¦è´¯ç©¿å¤ä¸ª caseï¼ä½æ¯ç¼è¯å¨é»è®¤æ¯ä¸è´¯ç©¿çï¼è¿ä¸ªæ¶å fallthrough å°±èµ·ä½ç¨äºï¼è®©æä¸ª case åæ¯åæ¬¡è´¯ç©¿å°ä¸ä¸ä¸ª case åæ¯ã\n\n\n# restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼\n\n\n# golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.\'å¯¼å¥æä»ä¹åºå«\n\n\n# goæ¯æç±»åç»§æ¿åï¼go æ¯é¢åå¯¹è±¡çè¯­è¨å\n\næ²¡æä¼ ç»çç±»ï¼ä¹æ²¡æç»§æ¿ã\n\nåèä»£ä¹çæ¯ç»æåç»åçæ¹å¼\n\ngo æç±»ååæ¹æ³ï¼å¹¶ä¸åè®¸é¢åå¯¹è±¡çç¼ç¨é£æ ¼ï¼ä½æ²¡æç±»åå±æ¬¡ã\n\ngo ä¸­ç "æ¥å£ "æ¦å¿µæä¾äºä¸ç§ä¸åçæ¹æ³ï¼æä»¬è®¤ä¸ºè¿ç§æ¹æ³æäºä½¿ç¨ï¼èä¸å¨æäºæ¹é¢æ´å éç¨ãè¿æä¸äºæ¹æ³å¯ä»¥å°ç±»ååµå¥å°å¶ä»ç±»åä¸­ï¼ä»¥æä¾ç±»ä¼¼çä¸è¥¿ï¼ä½ä¸ç­åäºå­ç±»ã\n\ngo ä¸­çæ¹æ³æ¯ c++ æ java ä¸­çæ¹æ³æ´éç¨ï¼å®ä»¬å¯ä»¥ä¸ºä»»ä½ç±»åçæ°æ®å®ä¹ï¼çè³æ¯åç½®ç±»åï¼å¦æ®éçã"æªè£ç®±ç "æ´æ°ãå®ä»¬å¹¶ä¸å±éäºç»æï¼ç±»ï¼ã\n\ngo ç±äºç¼ºä¹ç±»åå±æ¬¡ï¼go ä¸­ç "å¯¹è±¡ "æ¯ c++ æ java ç­è¯­è¨æ´è½»å·§ã\n\n\n# å¦ä½å¤æ­é¾è¡¨æç¯\n\nä¸åè®¸ä¿®æ¹é¾è¡¨ç»æã æ¶é´å¤æåº¦o(n)ï¼ç©ºé´å¤æåº¦o(1)ã\n\nhttps://blog.csdn.net/u010983881/article/details/78896293 å¿«æ¢æéï¼ä¸ä¸ªè·³1ï¼ä¸ä¸ªè·³2\n\næ¹æ³ä¸ãç©·ä¸¾éå æ¹æ³ä¸ï¼é¦åä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ä»å¤´èç¹éæ°éåæ°èç¹ä¹åçææèç¹ï¼ç¨æ°èç¹idåæ­¤èç¹ä¹åææèç¹idä¾æ¬¡ä½æ¯è¾ãå¦æåç°æ°èç¹ä¹åçææèç¹å½ä¸­å­å¨ç¸åèç¹idï¼åè¯´æè¯¥èç¹è¢«éåè¿ä¸¤æ¬¡ï¼é¾è¡¨æç¯ï¼å¦æä¹åçææèç¹å½ä¸­ä¸å­å¨ç¸åçèç¹ï¼å°±ç»§ç»­éåä¸ä¸ä¸ªæ°èç¹ï¼ç»§ç»­éå¤åæçæä½ã ç®æ³çæ¶é´å¤æåº¦æ¯0+1+2+3+â¦+(d+s-1) = (d+s-1)(d+s)/2 ï¼ å¯ä»¥ç®åå°çè§£æ o(nn)ãèæ­¤ç®æ³æ²¡æåå»ºé¢å¤å­å¨ç©ºé´ï¼ç©ºé´å¤æåº¦å¯ä»¥ç®åå°çè§£æä¸ºo(1) æ¹æ³äºãåå¸è¡¨ç¼å­ é¦ååå»ºä¸ä¸ªä»¥èç¹idä¸ºé®çhashsetéåï¼ç¨æ¥å­å¨æ¾ç»éåè¿çèç¹ãç¶ååæ ·æ¯ä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ç¨æ°èç¹åhashsetéåå½ä¸­å­å¨çèç¹ä½æ¯è¾ï¼å¦æåç°hashsetå½ä¸­å­å¨ç¸åèç¹idï¼åè¯´æé¾è¡¨æç¯ï¼å¦æhashsetå½ä¸­ä¸å­å¨ç¸åçèç¹idï¼å°±æè¿ä¸ªæ°èç¹idå­å¥hashsetï¼ä¹åè¿å¥ä¸ä¸èç¹ï¼ç»§ç»­éå¤åæçæä½ã\n\næ¹æ³ä¸ãå¿«æ¢æé é¦ååå»ºä¸¤ä¸ªæé1å2ï¼å¨javaéå°±æ¯ä¸¤ä¸ªå¯¹è±¡å¼ç¨ï¼ï¼åæ¶æåè¿ä¸ªé¾è¡¨çå¤´èç¹ãç¶åå¼å§ä¸ä¸ªå¤§å¾ªç¯ï¼å¨å¾ªç¯ä½ä¸­ï¼è®©æé1æ¯æ¬¡åä¸ç§»å¨ä¸ä¸ªèç¹ï¼è®©æé2æ¯æ¬¡åä¸ç§»å¨ä¸¤ä¸ªèç¹ï¼ç¶åæ¯è¾ä¸¤ä¸ªæéæåçèç¹æ¯å¦ç¸åãå¦æç¸åï¼åå¤æ­åºé¾è¡¨æç¯ï¼å¦æä¸åï¼åç»§ç»­ä¸ä¸æ¬¡å¾ªç¯ã æ¹æ³åãsetéåå¤§å°åå æèç¹æ¾å¥setéï¼æ¯æ¬¡è®¿é®ä¸ä¸ªèç¹æ¶ï¼å¦æseté¿åº¦ä¸åï¼åè·³åºï¼è¯´ææç¯ãå¦åseté¿åº¦+1ï¼ç»§ç»­éåã è¯¥æ¹æ³æ¶é´å¤æåº¦æ¯oï¼nï¼ï¼ç©ºé´å¤æåº¦ä¸å ä¸ºéè¦é¢å¤ç­æ°éçå­å¨ç©ºé´ï¼æä»¥ç©ºé´å¤æåº¦æ¯oï¼nï¼ã å¦ä½å¤æ­ä¸¤ä¸ªåé¾è¡¨æ¯å¦ç¸äº¤ï¼ä»¥åç¸äº¤ç¹ æ¹æ³ä¸ãç´æ¥æ³ ç´æ¥å¤æ­ç¬¬ä¸ä¸ªé¾è¡¨çæ¯ä¸ªç»ç¹æ¯å¦å¨ç¬¬äºä¸ªé¾è¡¨ä¸­ï¼æ¶é´å¤æåº¦ä¸ºo(len1*len2)ï¼èæ¶å¾å¤§',charsets:{cjk:!0},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"alertmanageræä¹å",frontmatter:{title:"alertmanageræä¹å",date:"2022-10-09T17:56:54.000Z",permalink:"/pages/alert-log/",categories:["ææ¯æè°","kubernetes","æ¥å¿éé"],tags:["alertmanager"],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"alertmanageræä¹å"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/04.alertmanager%E6%8C%81%E4%B9%85%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"alertmanageræä¹å"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/04.alertmanager%E6%8C%81%E4%B9%85%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:56:54.000Z"},{property:"article:tag",content:"alertmanager"},{itemprop:"name",content:"alertmanageræä¹å"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/305.%E6%97%A5%E5%BF%97%E9%87%87%E9%9B%86/04.alertmanager%E6%8C%81%E4%B9%85%E5%8C%96.html",relativePath:"01.ææ¯æè°/03.kubernetes/305.æ¥å¿éé/04.alertmanageræä¹å.md",key:"v-306f5d23",path:"/pages/alert-log/",headers:[{level:2,title:"åè¨",slug:"åè¨",normalizedTitle:"åè¨",charIndex:2},{level:2,title:"alertsnitch + mysql + grafana",slug:"alertsnitch-mysql-grafana",normalizedTitle:"alertsnitch + mysql + grafana",charIndex:280},{level:3,title:"alertsnitch",slug:"alertsnitch",normalizedTitle:"alertsnitch",charIndex:280},{level:3,title:"grafana dashboard",slug:"grafana-dashboard",normalizedTitle:"grafana dashboard",charIndex:807},{level:2,title:"alertmanager2es + ES + kibana",slug:"alertmanager2es-es-kibana",normalizedTitle:"alertmanager2es + es + kibana",charIndex:911},{level:2,title:"alertmanager-webhook-logger",slug:"alertmanager-webhook-logger",normalizedTitle:"alertmanager-webhook-logger",charIndex:1136},{level:3,title:"é¨ç½²",slug:"é¨ç½²",normalizedTitle:"é¨ç½²",charIndex:528},{level:3,title:"alertmanageréç½®",slug:"alertmanageréç½®",normalizedTitle:"alertmanageréç½®",charIndex:2301}],headersStr:"åè¨ alertsnitch + mysql + grafana alertsnitch grafana dashboard alertmanager2es + ES + kibana alertmanager-webhook-logger é¨ç½² alertmanageréç½®",content:"# åè¨\n\nprometheuséè¿æåçæ§æ°æ®ï¼å°è§¦åè§åçåè­¦ï¼æ¨éå°Alertmangerï¼Alertmangerå¯¹åè­¦è¿è¡åç»ãèåç­å¤çåï¼å¯ä»¥éè¿é®ä»¶ãSlackãwebhookç­æ¹å¼å¯¹ç¨æ·è¿è¡åéåè­¦ä¿¡æ¯ãalertmanageråè­¦çè®°å½ä¸æ¯ææä¹åè®°å½ï¼åéçåè­¦ä¿¡æ¯ä¸ä¼å­å¨å¨æ°æ®åºä¸­ï¼prometheuså°æææ°æ®å­å¨ä¸ºæ¶é´åºåï¼å´ä¸ä¼å°alertmanageråéçåè­¦ä¿¡æ¯åä¸ºä¸æ¡è®°å½å­å¨ä¸æ¥ã\n\nè§£å³çæè·¯å°±æ¯éè¿webhookåéåè­¦ä¿¡æ¯å°æå®æå¡ï¼å¹¶å°è®°å½è¾åºå°stdoutï¼åéè¿fluentdééå®¹å¨æ¥å¿æ¨éå°ES\n\n\n# alertsnitch + mysql + grafana\n\nalertsnitchæ¯æå°alertmanagerçåè­¦æ°æ®åå¥mysqlåpgï¼ å¹¶ç»ågrafnaé¢æ¿ï¼å°æ°æ®è¿è¡å±ç¤ºã\n\n\n# alertsnitch\n\nhttps://gitlab.com/yakshaving.art/alertsnitch\n\n * éç½®åéï¼ ç¯å¢åéæ°æ®åºéç½®æ ¼å¼ALERTSNITCH_DSN=\"${MYSQL_USER}ð{MYSQL_PASSWORD}@/${MYSQL_DATABASE}\" é¨ç½²å®æåéç½®ingressï¼æ å°ååå¯¹å¤æä¾æå¡ï¼è¿ç¨ç¥ï¼éç½®åååè°ç¨æ¹å¼ä¸ºï¼ https://alertsnitch.test.com/webhook\n\n * éç½®alertmanagerï¼\n\n# éç½®æ¥æ¶è\n- name: default\n  webhook_configs:\n  - send_resolved: true\n    http_config:\n      follow_redirects: true\n    url: https://alertsnitch.test.cn/webhook\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# grafana dashboard\n\nID: 15833 https://grafana.com/grafana/dashboards/15833-prometheus-alert-history/\n\n\n# alertmanager2es + ES + kibana\n\nhttps://github.com/cloudflare/alertmanager2es\n\nhttps://github.com/webdevops/alertmanager2es\n\ndocker pull webdevops/alertmanager2es:20.11.0\n\ndocker pull webdevops/alertmanager2es:development\n\n\n# alertmanager-webhook-logger\n\nhttps://github.com/tomtom-international/alertmanager-webhook-logger docker pull ghcr.io/tomtom-international/alertmanager-webhook-logger:1.0\n\nhttps://github.com/grafana/alertmanager-webhook-logger docker pull grafana/alertmanager-webhook-logger:0.3\n\néeventsæä¹åï¼éè¿fluentd+å®¹å¨æ åè¾åºééå°ES\n\n\n# é¨ç½²\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: alertmanager-webhook-logger\n  namespace: monitoring\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: alertmanager-webhook-logger\n    spec:\n      containers:\n        - name: alertmanager-webhook-logger\n          image: ghcr.io/tomtom-international/alertmanager-webhook-logger:1.0\n          imagePullPolicy: IfNotPresent\n\n  selector:\n    matchLabels:\n      app: alertmanager-webhook-logger\n---\nkind: Service\napiVersion: v1\nmetadata:\n  name: alertmanager-webhook-logger\n  namespace: monitoring\nspec:\n  ports:\n    - name: '6725'\n      protocol: TCP\n      port: 6725\n      targetPort: 6725\n  selector:\n    app: alertmanager-webhook-logger\n  type: ClusterIP\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n\n\n\n# alertmanageréç½®\n\nglobal:\n  route:\n    receiver: default-receiver\n\nreceivers:\n- name: default-receiver\n  webhook_configs: \n  - url: http://alertmanager-webhook-logger.monitoring:6725\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n",normalizedContent:"# åè¨\n\nprometheuséè¿æåçæ§æ°æ®ï¼å°è§¦åè§åçåè­¦ï¼æ¨éå°alertmangerï¼alertmangerå¯¹åè­¦è¿è¡åç»ãèåç­å¤çåï¼å¯ä»¥éè¿é®ä»¶ãslackãwebhookç­æ¹å¼å¯¹ç¨æ·è¿è¡åéåè­¦ä¿¡æ¯ãalertmanageråè­¦çè®°å½ä¸æ¯ææä¹åè®°å½ï¼åéçåè­¦ä¿¡æ¯ä¸ä¼å­å¨å¨æ°æ®åºä¸­ï¼prometheuså°æææ°æ®å­å¨ä¸ºæ¶é´åºåï¼å´ä¸ä¼å°alertmanageråéçåè­¦ä¿¡æ¯åä¸ºä¸æ¡è®°å½å­å¨ä¸æ¥ã\n\nè§£å³çæè·¯å°±æ¯éè¿webhookåéåè­¦ä¿¡æ¯å°æå®æå¡ï¼å¹¶å°è®°å½è¾åºå°stdoutï¼åéè¿fluentdééå®¹å¨æ¥å¿æ¨éå°es\n\n\n# alertsnitch + mysql + grafana\n\nalertsnitchæ¯æå°alertmanagerçåè­¦æ°æ®åå¥mysqlåpgï¼ å¹¶ç»ågrafnaé¢æ¿ï¼å°æ°æ®è¿è¡å±ç¤ºã\n\n\n# alertsnitch\n\nhttps://gitlab.com/yakshaving.art/alertsnitch\n\n * éç½®åéï¼ ç¯å¢åéæ°æ®åºéç½®æ ¼å¼alertsnitch_dsn=\"${mysql_user}ð{mysql_password}@/${mysql_database}\" é¨ç½²å®æåéç½®ingressï¼æ å°ååå¯¹å¤æä¾æå¡ï¼è¿ç¨ç¥ï¼éç½®åååè°ç¨æ¹å¼ä¸ºï¼ https://alertsnitch.test.com/webhook\n\n * éç½®alertmanagerï¼\n\n# éç½®æ¥æ¶è\n- name: default\n  webhook_configs:\n  - send_resolved: true\n    http_config:\n      follow_redirects: true\n    url: https://alertsnitch.test.cn/webhook\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# grafana dashboard\n\nid: 15833 https://grafana.com/grafana/dashboards/15833-prometheus-alert-history/\n\n\n# alertmanager2es + es + kibana\n\nhttps://github.com/cloudflare/alertmanager2es\n\nhttps://github.com/webdevops/alertmanager2es\n\ndocker pull webdevops/alertmanager2es:20.11.0\n\ndocker pull webdevops/alertmanager2es:development\n\n\n# alertmanager-webhook-logger\n\nhttps://github.com/tomtom-international/alertmanager-webhook-logger docker pull ghcr.io/tomtom-international/alertmanager-webhook-logger:1.0\n\nhttps://github.com/grafana/alertmanager-webhook-logger docker pull grafana/alertmanager-webhook-logger:0.3\n\néeventsæä¹åï¼éè¿fluentd+å®¹å¨æ åè¾åºééå°es\n\n\n# é¨ç½²\n\n---\napiversion: apps/v1\nkind: deployment\nmetadata:\n  name: alertmanager-webhook-logger\n  namespace: monitoring\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: alertmanager-webhook-logger\n    spec:\n      containers:\n        - name: alertmanager-webhook-logger\n          image: ghcr.io/tomtom-international/alertmanager-webhook-logger:1.0\n          imagepullpolicy: ifnotpresent\n\n  selector:\n    matchlabels:\n      app: alertmanager-webhook-logger\n---\nkind: service\napiversion: v1\nmetadata:\n  name: alertmanager-webhook-logger\n  namespace: monitoring\nspec:\n  ports:\n    - name: '6725'\n      protocol: tcp\n      port: 6725\n      targetport: 6725\n  selector:\n    app: alertmanager-webhook-logger\n  type: clusterip\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n\n\n\n# alertmanageréç½®\n\nglobal:\n  route:\n    receiver: default-receiver\n\nreceivers:\n- name: default-receiver\n  webhook_configs: \n  - url: http://alertmanager-webhook-logger.monitoring:6725\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"go-å°è£ç»§æ¿åå¤æ",frontmatter:{title:"go-å°è£ç»§æ¿åå¤æ",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang05/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ",meta:[{name:"twitter:title",content:"go-å°è£ç»§æ¿åå¤æ"},{name:"twitter:description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-å°è£ç»§æ¿åå¤æ"},{property:"og:description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-å°è£ç»§æ¿åå¤æ"},{itemprop:"description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html",relativePath:"01.ææ¯æè°/04.golang/05.go-å°è£ç»§æ¿åå¤æ.md",key:"v-0169ea0d",path:"/pages/golang05/",headers:[{level:2,title:"ç»§æ¿",slug:"ç»§æ¿",normalizedTitle:"ç»§æ¿",charIndex:23},{level:2,title:"å°è£",slug:"å°è£",normalizedTitle:"å°è£",charIndex:20},{level:2,title:"å¤æ",slug:"å¤æ",normalizedTitle:"å¤æ",charIndex:26}],headersStr:"ç»§æ¿ å°è£ å¤æ",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ\n\nå°è£ï¼éè¿ç»æä½ä¸­çå¿åå­æ®µæ¥å®ç° ç»§æ¿å¯ä»¥ä½¿ç¨æ¥å£ååµå¥ç»æä½ go ä¸­ï¼å°½ç®¡æ²¡æå¤æï¼ä½æ¯è½å®ç°å¤æç¸åçç¨æ³\n\n\n# ç»§æ¿\n\ntype BaseNum struct {\n     num1 int\n     num2 int\n} // BaseNum å³ä¸ºç¶ç±»ååç§°\n\ntype Add struct {\n    BaseNum\n} //å æ³å­ç±», å®ä¹å æ³å­ç±»çä¸»è¦ç®ç, æ¯ä¸ºäºå®ä¹å¯¹åºå­ç±»çæ¹æ³\n\ntype Sub struct {\n    BaseNum\n} //åæ³å­ç±»\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n//Add åSub å°±æ¯BaseNumçå­ç±»\n\n\n# å°è£\n\nfunc (a *Add)Opt()(value int) {\n    return a.num1 + a.num2\n}//å æ³çæ¹æ³å®ç°\n\nfunc (s *Sub)Opt()(value int) {\n    return s.num1 + s.num2\n}//åæ³çæ¹æ³å®ç°\ntype Opter interface { //æ¥å£å®ä¹\n    Opt()int      //å°è£, å½çº³å­ç±»æ¹æ³, æ³¨ææ­¤å¤éè¦å ä¸è¿åå¼, ä¸ç¶æ²¡æåæ³è¾åºè¿åå¼(å ä¸ºæ¹æ³ä¸­ä½¿ç¨äºè¿åå¼)\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å¤æ\n\nfunc MultiState(o *Opter)(value int) { //å¤æå®ä¹, å¯ä»¥ç®åçè§£ä¸ºä»¥æ¥å£ä½ä¸ºå½¢åçå½æ°, æ¹ä¾¿å­¦ä¹ \n    value = o.Opt()\n    return\n}\n\n// ç»§æ¿\ndata:= BaseNum{2,3}\nvar a Add = Add{data}\nvar b Sub= Sub{data}\n   \n//ä½¿ç¨æ¥å£\nvar i Opter\ni = &a\nvalue := i.Opt()\ni = &b\nvalue := i.Opt()\n\n//ä½¿ç¨å¤æ\nvalue := MultiState(&a)\nvalue := MultiState(&b)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",normalizedContent:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ\n\nå°è£ï¼éè¿ç»æä½ä¸­çå¿åå­æ®µæ¥å®ç° ç»§æ¿å¯ä»¥ä½¿ç¨æ¥å£ååµå¥ç»æä½ go ä¸­ï¼å°½ç®¡æ²¡æå¤æï¼ä½æ¯è½å®ç°å¤æç¸åçç¨æ³\n\n\n# ç»§æ¿\n\ntype basenum struct {\n     num1 int\n     num2 int\n} // basenum å³ä¸ºç¶ç±»ååç§°\n\ntype add struct {\n    basenum\n} //å æ³å­ç±», å®ä¹å æ³å­ç±»çä¸»è¦ç®ç, æ¯ä¸ºäºå®ä¹å¯¹åºå­ç±»çæ¹æ³\n\ntype sub struct {\n    basenum\n} //åæ³å­ç±»\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n//add åsub å°±æ¯basenumçå­ç±»\n\n\n# å°è£\n\nfunc (a *add)opt()(value int) {\n    return a.num1 + a.num2\n}//å æ³çæ¹æ³å®ç°\n\nfunc (s *sub)opt()(value int) {\n    return s.num1 + s.num2\n}//åæ³çæ¹æ³å®ç°\ntype opter interface { //æ¥å£å®ä¹\n    opt()int      //å°è£, å½çº³å­ç±»æ¹æ³, æ³¨ææ­¤å¤éè¦å ä¸è¿åå¼, ä¸ç¶æ²¡æåæ³è¾åºè¿åå¼(å ä¸ºæ¹æ³ä¸­ä½¿ç¨äºè¿åå¼)\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å¤æ\n\nfunc multistate(o *opter)(value int) { //å¤æå®ä¹, å¯ä»¥ç®åçè§£ä¸ºä»¥æ¥å£ä½ä¸ºå½¢åçå½æ°, æ¹ä¾¿å­¦ä¹ \n    value = o.opt()\n    return\n}\n\n// ç»§æ¿\ndata:= basenum{2,3}\nvar a add = add{data}\nvar b sub= sub{data}\n   \n//ä½¿ç¨æ¥å£\nvar i opter\ni = &a\nvalue := i.opt()\ni = &b\nvalue := i.opt()\n\n//ä½¿ç¨å¤æ\nvalue := multistate(&a)\nvalue := multistate(&b)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"go embed",frontmatter:{title:"go embed",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang04/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã",meta:[{name:"twitter:title",content:"go embed"},{name:"twitter:description",content:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go embed"},{property:"og:description",content:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go embed"},{itemprop:"description",content:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html",relativePath:"01.ææ¯æè°/04.golang/04.go embed.md",key:"v-51cd8504",path:"/pages/golang04/",headers:[{level:2,title:"embedçåºæ¬è¯­æ³",slug:"embedçåºæ¬è¯­æ³",normalizedTitle:"embedçåºæ¬è¯­æ³",charIndex:78}],headersStr:"embedçåºæ¬è¯­æ³",content:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã\n\n\n# embedçåºæ¬è¯­æ³\n\nåºæ¬è¯­æ³éå¸¸ç®åï¼é¦åå¯¼å¥embedåï¼ç¶åä½¿ç¨æä»¤//go:embed æä»¶å å°å¯¹åºçæä»¶æç®å½ç»æå¯¼å¥å°å¯¹åºçåéä¸ã",normalizedContent:"embedæ¯å¨go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã\n\n\n# embedçåºæ¬è¯­æ³\n\nåºæ¬è¯­æ³éå¸¸ç®åï¼é¦åå¯¼å¥embedåï¼ç¶åä½¿ç¨æä»¤//go:embed æä»¶å å°å¯¹åºçæä»¶æç®å½ç»æå¯¼å¥å°å¯¹åºçåéä¸ã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"go-æé",frontmatter:{title:"go-æé",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang03/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®",meta:[{name:"twitter:title",content:"go-æé"},{name:"twitter:description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-æé"},{property:"og:description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-æé"},{itemprop:"description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html",relativePath:"01.ææ¯æè°/04.golang/03.go-æé.md",key:"v-783e73dc",path:"/pages/golang03/",headers:[{level:2,title:"Go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢",slug:"go-çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢",normalizedTitle:"go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢",charIndex:2},{level:2,title:"unsafe.Pointerä¸å®å¨æé",slug:"unsafe-pointerä¸å®å¨æé",normalizedTitle:"unsafe.pointerä¸å®å¨æé",charIndex:139}],headersStr:"Go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢ unsafe.Pointerä¸å®å¨æé",content:"# Go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢\n\nGo æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½ æéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å åæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®\n\n\n# unsafe.Pointerä¸å®å¨æé\n\nå®è¡¨ç¤ºä»»æç±»åä¸å¯å¯»åçæéå¼,å¯ä»¥å¨ä¸åçæéç±»åä¹é´è¿è¡è½¬æ¢ï¼ç±»ä¼¼ C è¯­è¨ç void * çç¨éï¼ å¶åå«åç§æ ¸å¿æä½ï¼\n\n * ä»»ä½ç±»åçæéå¼é½å¯ä»¥è½¬æ¢ä¸º Pointer\n * Pointer å¯ä»¥è½¬æ¢ä¸ºä»»ä½ç±»åçæéå¼\n * uintptr å¯ä»¥è½¬æ¢ä¸º Pointer\n * Pointer å¯ä»¥è½¬æ¢ä¸º uintptr\n\nunsafe.Pointer å¯ä»¥è®©æ¨çåéå¨ä¸åçæéç±»åè½¬æ¥è½¬å»,ä¹å°±æ¯è¡¨ç¤ºä¸ºä»»æå¯å¯»åçæéç±»å uintptr å¸¸ç¨äºä¸ unsafe.Pointer æéå,ç¨äºåæéè¿ç®",normalizedContent:"# go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢\n\ngo æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½ æéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ compile çéæç±»åæ£æ¥çèå´å åæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®\n\n\n# unsafe.pointerä¸å®å¨æé\n\nå®è¡¨ç¤ºä»»æç±»åä¸å¯å¯»åçæéå¼,å¯ä»¥å¨ä¸åçæéç±»åä¹é´è¿è¡è½¬æ¢ï¼ç±»ä¼¼ c è¯­è¨ç void * çç¨éï¼ å¶åå«åç§æ ¸å¿æä½ï¼\n\n * ä»»ä½ç±»åçæéå¼é½å¯ä»¥è½¬æ¢ä¸º pointer\n * pointer å¯ä»¥è½¬æ¢ä¸ºä»»ä½ç±»åçæéå¼\n * uintptr å¯ä»¥è½¬æ¢ä¸º pointer\n * pointer å¯ä»¥è½¬æ¢ä¸º uintptr\n\nunsafe.pointer å¯ä»¥è®©æ¨çåéå¨ä¸åçæéç±»åè½¬æ¥è½¬å»,ä¹å°±æ¯è¡¨ç¤ºä¸ºä»»æå¯å¯»åçæéç±»å uintptr å¸¸ç¨äºä¸ unsafe.pointer æéå,ç¨äºåæéè¿ç®",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"go-æä»¶æä½",frontmatter:{title:"go-æä»¶æä½",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang06/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")',meta:[{name:"twitter:title",content:"go-æä»¶æä½"},{name:"twitter:description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-æä»¶æä½"},{property:"og:description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-æä»¶æä½"},{itemprop:"description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html",relativePath:"01.ææ¯æè°/04.golang/06.go-æä»¶æä½.md",key:"v-5b58f46b",path:"/pages/golang06/",headers:[{level:2,title:"å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶",slug:"å¤æ­æä»¶æ¯å¦å­å¨-åå»ºç©ºæä»¶",normalizedTitle:"å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶",charIndex:2},{level:2,title:"éå½åæä»¶: os.Rename",slug:"éå½åæä»¶-os-rename",normalizedTitle:"éå½åæä»¶: os.rename",charIndex:263},{level:2,title:"ç§»å¨æä»¶: os.Rename",slug:"ç§»å¨æä»¶-os-rename",normalizedTitle:"ç§»å¨æä»¶: os.rename",charIndex:376},{level:2,title:"å¤å¶æä»¶: io.Copy",slug:"å¤å¶æä»¶-io-copy",normalizedTitle:"å¤å¶æä»¶: io.copy",charIndex:533},{level:2,title:"è·åæä»¶çmetadataä¿¡æ¯: os.Stat()",slug:"è·åæä»¶çmetadataä¿¡æ¯-os-stat",normalizedTitle:"è·åæä»¶çmetadataä¿¡æ¯: os.stat()",charIndex:770},{level:2,title:"å é¤æä»¶: os.Remove()",slug:"å é¤æä»¶-os-remove",normalizedTitle:"å é¤æä»¶: os.remove()",charIndex:1245},{level:2,title:"è¯»åæä»¶å­ç¬¦: bufio.NewScanner()",slug:"è¯»åæä»¶å­ç¬¦-bufio-newscanner",normalizedTitle:"è¯»åæä»¶å­ç¬¦: bufio.newscanner()",charIndex:1267},{level:2,title:"æ¸é¤æä»¶: os.Truncate()",slug:"æ¸é¤æä»¶-os-truncate",normalizedTitle:"æ¸é¤æä»¶: os.truncate()",charIndex:1523},{level:2,title:"åæä»¶æ·»å åå®¹",slug:"åæä»¶æ·»å åå®¹",normalizedTitle:"åæä»¶æ·»å åå®¹",charIndex:1668},{level:2,title:"ä¿®æ¹æä»¶æé,æ¶é´æ³",slug:"ä¿®æ¹æä»¶æé-æ¶é´æ³",normalizedTitle:"ä¿®æ¹æä»¶æé,æ¶é´æ³",charIndex:1793},{level:2,title:'zipæä½ "archive/zip"',slug:"zipæä½-archive-zip",normalizedTitle:"zipæä½ &quot;archive/zip&quot;",charIndex:null}],headersStr:'å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶ éå½åæä»¶: os.Rename ç§»å¨æä»¶: os.Rename å¤å¶æä»¶: io.Copy è·åæä»¶çmetadataä¿¡æ¯: os.Stat() å é¤æä»¶: os.Remove() è¯»åæä»¶å­ç¬¦: bufio.NewScanner() æ¸é¤æä»¶: os.Truncate() åæä»¶æ·»å åå®¹ ä¿®æ¹æä»¶æé,æ¶é´æ³ zipæä½ "archive/zip"',content:'# å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶\n\nemptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n\n\n1\n2\n\n\n_, err := os.Stat("test")\n \nif os.IsNotExist(err) {\n    errDir := os.MkdirAll("test", 0755)\n    if errDir != nil {\n        log.Fatal(err)\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éå½åæä»¶: os.Rename\n\noldName := "test.txt"\nnewName := "testing.txt"\nerr := os.Rename(oldName, newName)\n\n\n1\n2\n3\n\n\n\n# ç§»å¨æä»¶: os.Rename\n\noldLocation := "/var/www/html/test.txt"\nnewLocation := "/var/www/html/src/test.txt"\nerr := os.Rename(oldLocation, newLocation)\n\n\n1\n2\n3\n\n\n\n# å¤å¶æä»¶: io.Copy\n\nsourceFile, err := os.Open("/var/www/html/src/test.txt")\ndefer sourceFile.Close()\nnewFile, err := os.Create("/var/www/html/test.txt")\ndefer newFile.Close()\nbytesCopied, err := io.Copy(newFile, sourceFile)\n\n\n1\n2\n3\n4\n5\n\n\n\n# è·åæä»¶çmetadataä¿¡æ¯: os.Stat()\n\nfileStat, err := os.Stat("test.txt")\nfmt.Println("File Name:", fileStat.Name())        // Base name of the file\nfmt.Println("Size:", fileStat.Size())             // Length in bytes for regular files\nfmt.Println("Permissions:", fileStat.Mode())      // File mode bits\nfmt.Println("Last Modified:", fileStat.ModTime()) // Last modification time\nfmt.Println("Is Directory: ", fileStat.IsDir())   // Abbreviation for Mode().IsDir()\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å é¤æä»¶: os.Remove()\n\n\n# è¯»åæä»¶å­ç¬¦: bufio.NewScanner()\n\nfilebuffer, err := ioutil.ReadFile(filename)\ninputdata := string(filebuffer)\ndata := bufio.NewScanner(strings.NewReader(inputdata))\ndata.Split(bufio.ScanRunes)\nfor data.Scan() {\n    fmt.Print(data.Text())\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# æ¸é¤æä»¶: os.Truncate()\n\nè£åªä¸ä¸ªæä»¶å°100ä¸ªå­è. å¦ææä»¶æ¬æ¥å°±å°äº100ä¸ªå­è,åæä»¶ä¸­åå§åå®¹å¾ä»¥ä¿ç,å©ä½çå­èä»¥nullå­èå¡«å. å¦ææä»¶æ¬æ¥è¶è¿100ä¸ªå­è,åè¶è¿çå­èä¼è¢«æå¼. è¿æ ·æä»¬æ»æ¯å¾å°ç²¾ç¡®ç100ä¸ªå­èçæä»¶. ä¼ å¥0åä¼æ¸ç©ºæä»¶.\n\n\n# åæä»¶æ·»å åå®¹\n\nf, err := os.OpenFile(filename, os.O_RDWR|os.O_APPEND|os.O_CREATE, 0660)\nfmt.Fprintf(f, "%s\\n", message)\n\n\n1\n2\n\n\n\n# ä¿®æ¹æä»¶æé,æ¶é´æ³\n\nerr = os.Chmod("test.txt", 0777)\nerr = os.Chown("test.txt", os.Getuid(), os.Getgid())\nerr = os.Chtimes("test.txt", lastAccessTime, lastModifyTime)\n\n\n1\n2\n3\n\n\n\n# zipæä½ "archive/zip"\n\n * åç¼©æä»¶å°ZIPæ ¼å¼\n * è¯»åZIPæä»¶éé¢çæä»¶\n * è§£åZIPæä»¶',normalizedContent:'# å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶\n\nemptyfile, err := os.create("empty.txt")\ndefer emptyfile.close()\n\n\n1\n2\n\n\n_, err := os.stat("test")\n \nif os.isnotexist(err) {\n    errdir := os.mkdirall("test", 0755)\n    if errdir != nil {\n        log.fatal(err)\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éå½åæä»¶: os.rename\n\noldname := "test.txt"\nnewname := "testing.txt"\nerr := os.rename(oldname, newname)\n\n\n1\n2\n3\n\n\n\n# ç§»å¨æä»¶: os.rename\n\noldlocation := "/var/www/html/test.txt"\nnewlocation := "/var/www/html/src/test.txt"\nerr := os.rename(oldlocation, newlocation)\n\n\n1\n2\n3\n\n\n\n# å¤å¶æä»¶: io.copy\n\nsourcefile, err := os.open("/var/www/html/src/test.txt")\ndefer sourcefile.close()\nnewfile, err := os.create("/var/www/html/test.txt")\ndefer newfile.close()\nbytescopied, err := io.copy(newfile, sourcefile)\n\n\n1\n2\n3\n4\n5\n\n\n\n# è·åæä»¶çmetadataä¿¡æ¯: os.stat()\n\nfilestat, err := os.stat("test.txt")\nfmt.println("file name:", filestat.name())        // base name of the file\nfmt.println("size:", filestat.size())             // length in bytes for regular files\nfmt.println("permissions:", filestat.mode())      // file mode bits\nfmt.println("last modified:", filestat.modtime()) // last modification time\nfmt.println("is directory: ", filestat.isdir())   // abbreviation for mode().isdir()\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å é¤æä»¶: os.remove()\n\n\n# è¯»åæä»¶å­ç¬¦: bufio.newscanner()\n\nfilebuffer, err := ioutil.readfile(filename)\ninputdata := string(filebuffer)\ndata := bufio.newscanner(strings.newreader(inputdata))\ndata.split(bufio.scanrunes)\nfor data.scan() {\n    fmt.print(data.text())\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# æ¸é¤æä»¶: os.truncate()\n\nè£åªä¸ä¸ªæä»¶å°100ä¸ªå­è. å¦ææä»¶æ¬æ¥å°±å°äº100ä¸ªå­è,åæä»¶ä¸­åå§åå®¹å¾ä»¥ä¿ç,å©ä½çå­èä»¥nullå­èå¡«å. å¦ææä»¶æ¬æ¥è¶è¿100ä¸ªå­è,åè¶è¿çå­èä¼è¢«æå¼. è¿æ ·æä»¬æ»æ¯å¾å°ç²¾ç¡®ç100ä¸ªå­èçæä»¶. ä¼ å¥0åä¼æ¸ç©ºæä»¶.\n\n\n# åæä»¶æ·»å åå®¹\n\nf, err := os.openfile(filename, os.o_rdwr|os.o_append|os.o_create, 0660)\nfmt.fprintf(f, "%s\\n", message)\n\n\n1\n2\n\n\n\n# ä¿®æ¹æä»¶æé,æ¶é´æ³\n\nerr = os.chmod("test.txt", 0777)\nerr = os.chown("test.txt", os.getuid(), os.getgid())\nerr = os.chtimes("test.txt", lastaccesstime, lastmodifytime)\n\n\n1\n2\n3\n\n\n\n# zipæä½ "archive/zip"\n\n * åç¼©æä»¶å°zipæ ¼å¼\n * è¯»åzipæä»¶éé¢çæä»¶\n * è§£åzipæä»¶',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"go-sliceåç",frontmatter:{title:"go-sliceåç",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang08/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å",meta:[{name:"twitter:title",content:"go-sliceåç"},{name:"twitter:description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-sliceåç"},{property:"og:description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-sliceåç"},{itemprop:"description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html",relativePath:"01.ææ¯æè°/04.golang/08.go-sliceåç.md",key:"v-d695f1cc",path:"/pages/golang08/",headers:[{level:2,title:"Arrayæ°ç»",slug:"arrayæ°ç»",normalizedTitle:"arrayæ°ç»",charIndex:42},{level:2,title:"Sliceåç",slug:"sliceåç",normalizedTitle:"sliceåç",charIndex:76},{level:3,title:"Slice çåå»ºæ¹å¼ï¼",slug:"slice-çåå»ºæ¹å¼",normalizedTitle:"slice çåå»ºæ¹å¼ï¼",charIndex:522}],headersStr:"Arrayæ°ç» Sliceåç Slice çåå»ºæ¹å¼ï¼",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å\n\n\n# Arrayæ°ç»\n\n[3]int{} è¡¨ç¤º 3 ä¸ªæ´æ°çæ°ç»\n\n\n# Sliceåç\n\ntype slice struct {\n\tarray unsafe.Pointer\n\tlen   int\n\tcap   int\n}\n\n\n1\n2\n3\n4\n5\n\n\nSlice çåºå±æ°æ®ç»æå±åä¸ºä¸é¨å,å¦ä¸ï¼\n\n * arrayï¼æåæå¼ç¨çæ°ç»æéï¼unsafe.Pointer å¯ä»¥è¡¨ç¤ºä»»ä½å¯å¯»åçå¼çæéï¼\n * lenï¼é¿åº¦,å½åå¼ç¨åççåç´ ä¸ªæ°\n * capï¼å®¹é,å½åå¼ç¨åççå®¹éï¼åºå±æ°ç»çåç´ æ»æ°ï¼ å¨å®éä½¿ç¨ä¸­,cap ä¸å®æ¯å¤§äºæç­äº len ç.å¦åä¼å¯¼è´ panic\n\nnums := [3]int{}\nnums[0] = 1\ndnums := nums[0:2]\n# nums: [1 0 0] \n# dnums: [1 0], len: 2, cap: 3\n\n\n1\n2\n3\n4\n5\n\n\nSlice æ¯å¯¹ Array çæ½è±¡,ç±»åä¸º []T dnums åééè¿ nums[:] è¿è¡èµå¼ dnums åééè¿ nums[:] è¿è¡èµå¼\n\n\n# Slice çåå»ºæ¹å¼ï¼\n\n * test := []int{2,3}\n * test := make([]int, 5, 5) // åå»ºä¸ä¸ªç±»åä¸º intï¼é¿åº¦ä¸º 5ï¼å®¹éä¸º 5 çåç\n * test1 := make([]int, 3) //å¦æä¸æå®å®¹éï¼é»è®¤å®¹éç­äºåå§æ¶çé¿åº¦\n * test := make([]int,0) // åå»ºä¸ä¸ªé¿åº¦ä¸º0ï¼å®¹éä¸º0 çæ°ç» test = append(test, 1) //å½æ°ç»çå®¹éä¸å¤æ¶ï¼ä¼éæ°ç³è¯·ä¸ä¸ªä¸¤åäºå½åé¿åº¦ç sliceï¼æä»¥å¨ä½¿ç¨è¿ç¨ä¸­ï¼å°¤å¶æ¯é¢ç¹å»å¾ä¸ä¸ª slice ä¸­ append æ°æ®ï¼éè¦å°½å¯è½ç»ä¸ä¸ªç¸å¯¹åç¡®çå®¹éï¼ åå°åéè¿ç¨çæèã",normalizedContent:"å¨ go ä¸­,sliceï¼åçï¼æ¯æ½è±¡å¨ arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å\n\n\n# arrayæ°ç»\n\n[3]int{} è¡¨ç¤º 3 ä¸ªæ´æ°çæ°ç»\n\n\n# sliceåç\n\ntype slice struct {\n\tarray unsafe.pointer\n\tlen   int\n\tcap   int\n}\n\n\n1\n2\n3\n4\n5\n\n\nslice çåºå±æ°æ®ç»æå±åä¸ºä¸é¨å,å¦ä¸ï¼\n\n * arrayï¼æåæå¼ç¨çæ°ç»æéï¼unsafe.pointer å¯ä»¥è¡¨ç¤ºä»»ä½å¯å¯»åçå¼çæéï¼\n * lenï¼é¿åº¦,å½åå¼ç¨åççåç´ ä¸ªæ°\n * capï¼å®¹é,å½åå¼ç¨åççå®¹éï¼åºå±æ°ç»çåç´ æ»æ°ï¼ å¨å®éä½¿ç¨ä¸­,cap ä¸å®æ¯å¤§äºæç­äº len ç.å¦åä¼å¯¼è´ panic\n\nnums := [3]int{}\nnums[0] = 1\ndnums := nums[0:2]\n# nums: [1 0 0] \n# dnums: [1 0], len: 2, cap: 3\n\n\n1\n2\n3\n4\n5\n\n\nslice æ¯å¯¹ array çæ½è±¡,ç±»åä¸º []t dnums åééè¿ nums[:] è¿è¡èµå¼ dnums åééè¿ nums[:] è¿è¡èµå¼\n\n\n# slice çåå»ºæ¹å¼ï¼\n\n * test := []int{2,3}\n * test := make([]int, 5, 5) // åå»ºä¸ä¸ªç±»åä¸º intï¼é¿åº¦ä¸º 5ï¼å®¹éä¸º 5 çåç\n * test1 := make([]int, 3) //å¦æä¸æå®å®¹éï¼é»è®¤å®¹éç­äºåå§æ¶çé¿åº¦\n * test := make([]int,0) // åå»ºä¸ä¸ªé¿åº¦ä¸º0ï¼å®¹éä¸º0 çæ°ç» test = append(test, 1) //å½æ°ç»çå®¹éä¸å¤æ¶ï¼ä¼éæ°ç³è¯·ä¸ä¸ªä¸¤åäºå½åé¿åº¦ç sliceï¼æä»¥å¨ä½¿ç¨è¿ç¨ä¸­ï¼å°¤å¶æ¯é¢ç¹å»å¾ä¸ä¸ª slice ä¸­ append æ°æ®ï¼éè¦å°½å¯è½ç»ä¸ä¸ªç¸å¯¹åç¡®çå®¹éï¼ åå°åéè¿ç¨çæèã",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"go-json",frontmatter:{title:"go-json",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang07/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"go-json"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-json"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-json"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html",relativePath:"01.ææ¯æè°/04.golang/07.go-json.md",key:"v-92ed690a",path:"/pages/golang07/",headers:[{level:2,title:"å®å¶JSONåºåå",slug:"å®å¶jsonåºåå",normalizedTitle:"å®å¶jsonåºåå",charIndex:96},{level:3,title:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty",slug:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µ-omitempty",normalizedTitle:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty",charIndex:366},{level:3,title:"å¿½ç¥ä¸äºå­æ®µ: -",slug:"å¿½ç¥ä¸äºå­æ®µ",normalizedTitle:"å¿½ç¥ä¸äºå­æ®µ: -",charIndex:532},{level:3,title:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ:",slug:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ",normalizedTitle:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ:",charIndex:645},{level:3,title:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",slug:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",normalizedTitle:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",charIndex:858},{level:3,title:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo",slug:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct-todo",normalizedTitle:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo",charIndex:1163},{level:3,title:'ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"',slug:"ç¨å­ç¬¦ä¸²ä¼ éæ°å­-json-string",normalizedTitle:"ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:&quot;,string&quot;",charIndex:null}],headersStr:'å®å¶JSONåºåå ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty å¿½ç¥ä¸äºå­æ®µ: - ä¸´æ¶æ·»å é¢å¤çå­æ®µ: ä¸´æ¶ç²åä¸¤ä¸ªstruct ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"',content:'Json(Javascript Object Nanotation)æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼å¸¸ç¨äºååç«¯æ°æ®ä¼ è¾ã goè¯­è¨æ¬èº«ä¸ºæä»¬æä¾äºjsonçå·¥å·åâencoding/jsonâ\n\n\n# å®å¶JSONåºåå\n\nJson Marshalï¼å°æ°æ®ç¼ç æjsonå­ç¬¦ä¸²\n\n    jsonStu, err := json.Marshal(stu)\n\n\n1\n\n\njson.Unmarshal: ååºåçå½æ°ï¼å°jsonå­ç¬¦ä¸²è§£ç å°ç¸åºçæ°æ®ç»æï¼\n\n    jsonstr := `{"a":"aaa","b":"bbb"}`\n    map1 := make(map[string]interface{})\n    err := json.Unmarshal([]byte(jsonstr), &map1)\n\n\n1\n2\n3\n\n\n\n# ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty\n\njson.Marshal(struct {\n    *User\n    Password bool `json:"password,omitempty"`  //å¿½ç¥è¯¥å­æ®µ\n    }{\n        User: user,\n    })\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å¿½ç¥ä¸äºå­æ®µ: -\n\njson.Marshal(struct {\n    *User\n    Password bool `json:"-"`\n}{\n    User: user,\n})\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# ä¸´æ¶æ·»å é¢å¤çå­æ®µ:\n\njson.Marshal(struct {\n    *User\n    Token    string `json:"token"`  //æ·»å è¯¥å­æ®µ\n    Password bool `json:"password,omitempty"`\n    }{\n        User: user,\n        Token: token,\n    })\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä¸´æ¶ç²åä¸¤ä¸ªstruct\n\ntype BlogPost struct {\n    URL   string `json:"url"`\n    Title string `json:"title"`\n}\ntype Analytics struct {\n    Visitors  int `json:"visitors"`\n    PageViews int `json:"page_views"`\n}\njson.Marshal(struct{\n    *BlogPost\n    *Analytics\n}{post, analytics})\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo\n\n\n# ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"\n\ntype TestObject struct {\n    Field1 int    `json:",string"`\n}\n\n\n1\n2\n3\n',normalizedContent:'json(javascript object nanotation)æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼å¸¸ç¨äºååç«¯æ°æ®ä¼ è¾ã goè¯­è¨æ¬èº«ä¸ºæä»¬æä¾äºjsonçå·¥å·åâencoding/jsonâ\n\n\n# å®å¶jsonåºåå\n\njson marshalï¼å°æ°æ®ç¼ç æjsonå­ç¬¦ä¸²\n\n    jsonstu, err := json.marshal(stu)\n\n\n1\n\n\njson.unmarshal: ååºåçå½æ°ï¼å°jsonå­ç¬¦ä¸²è§£ç å°ç¸åºçæ°æ®ç»æï¼\n\n    jsonstr := `{"a":"aaa","b":"bbb"}`\n    map1 := make(map[string]interface{})\n    err := json.unmarshal([]byte(jsonstr), &map1)\n\n\n1\n2\n3\n\n\n\n# ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty\n\njson.marshal(struct {\n    *user\n    password bool `json:"password,omitempty"`  //å¿½ç¥è¯¥å­æ®µ\n    }{\n        user: user,\n    })\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å¿½ç¥ä¸äºå­æ®µ: -\n\njson.marshal(struct {\n    *user\n    password bool `json:"-"`\n}{\n    user: user,\n})\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# ä¸´æ¶æ·»å é¢å¤çå­æ®µ:\n\njson.marshal(struct {\n    *user\n    token    string `json:"token"`  //æ·»å è¯¥å­æ®µ\n    password bool `json:"password,omitempty"`\n    }{\n        user: user,\n        token: token,\n    })\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä¸´æ¶ç²åä¸¤ä¸ªstruct\n\ntype blogpost struct {\n    url   string `json:"url"`\n    title string `json:"title"`\n}\ntype analytics struct {\n    visitors  int `json:"visitors"`\n    pageviews int `json:"page_views"`\n}\njson.marshal(struct{\n    *blogpost\n    *analytics\n}{post, analytics})\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo\n\n\n# ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"\n\ntype testobject struct {\n    field1 int    `json:",string"`\n}\n\n\n1\n2\n3\n',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ginæ¡æ¶ä½¿ç¨sockjs-go",frontmatter:{title:"ginæ¡æ¶ä½¿ç¨sockjs-go",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/golang09/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ginæ¡æ¶ä½¿ç¨sockjs-go"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/09.gin%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8sockjs-go.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ginæ¡æ¶ä½¿ç¨sockjs-go"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/09.gin%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8sockjs-go.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ginæ¡æ¶ä½¿ç¨sockjs-go"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/09.gin%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8sockjs-go.html",relativePath:"01.ææ¯æè°/04.golang/09.ginæ¡æ¶ä½¿ç¨sockjs-go.md",key:"v-018b12ce",path:"/pages/golang09/",headers:[{level:2,title:"sockjs-go",slug:"sockjs-go",normalizedTitle:"sockjs-go",charIndex:2},{level:2,title:"å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go",slug:"å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go",normalizedTitle:"å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go",charIndex:295},{level:3,title:"é®é¢æè¿°",slug:"é®é¢æè¿°",normalizedTitle:"é®é¢æè¿°",charIndex:362},{level:3,title:"è§£å³åæ³",slug:"è§£å³åæ³",normalizedTitle:"è§£å³åæ³",charIndex:445}],headersStr:"sockjs-go å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go é®é¢æè¿° è§£å³åæ³",content:'# sockjs-go\n\nhttps://github.com/igm/sockjs-go å®æ¹ç¤ºä¾ï¼\n\nimport (\n\t"log"\n\t"net/http"\n\n\t"github.com/igm/sockjs-go/v3/sockjs"\n)\n\nfunc main() {\n\thandler := sockjs.NewHandler("/echo", sockjs.DefaultOptions, echoHandler)\n\tlog.Fatal(http.ListenAndServe(":8081", handler))\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go\n\nhttps://github.com/igm/sockjs-go/issues/85\n\n\n# é®é¢æè¿°\n\nGET http://localhost:8000/echo/info?t=1486141708375 404 (Not Found)\n\n\n1\n\n\n\n# è§£å³åæ³\n\nhttps://github.com/gin-gonic/gin/issues/799\n\nr.Any("/echo/*info", gin.WrapH(k8spod.CreateAttachHandler("/echo")))\n\næ³¨æï¼ æåç/echoä¸è½å¢å /ç»å°¾',normalizedContent:'# sockjs-go\n\nhttps://github.com/igm/sockjs-go å®æ¹ç¤ºä¾ï¼\n\nimport (\n\t"log"\n\t"net/http"\n\n\t"github.com/igm/sockjs-go/v3/sockjs"\n)\n\nfunc main() {\n\thandler := sockjs.newhandler("/echo", sockjs.defaultoptions, echohandler)\n\tlog.fatal(http.listenandserve(":8081", handler))\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# å¨ginæ¡æ¶ä¸­ä½¿ç¨sockjs-go\n\nhttps://github.com/igm/sockjs-go/issues/85\n\n\n# é®é¢æè¿°\n\nget http://localhost:8000/echo/info?t=1486141708375 404 (not found)\n\n\n1\n\n\n\n# è§£å³åæ³\n\nhttps://github.com/gin-gonic/gin/issues/799\n\nr.any("/echo/*info", gin.wraph(k8spod.createattachhandler("/echo")))\n\næ³¨æï¼ æåç/echoä¸è½å¢å /ç»å°¾',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å³äºcgroup",frontmatter:{title:"å³äºcgroup",date:"2022-10-09T18:31:35.000Z",permalink:"/pages/b5149c/",categories:["ææ¯æè°","è®¡ç®æºç½ç»åºç¡"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å³äºcgroup"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/01.%E5%85%B3%E4%BA%8Ecgroup.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å³äºcgroup"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/01.%E5%85%B3%E4%BA%8Ecgroup.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T18:31:35.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å³äºcgroup"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/01.%E5%85%B3%E4%BA%8Ecgroup.html",relativePath:"01.ææ¯æè°/06.è®¡ç®æºç½ç»åºç¡/01.å³äºcgroup.md",key:"v-3f6d3b4e",path:"/pages/b5149c/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"å³äºcpuåå­",frontmatter:{title:"å³äºcpuåå­",date:"2022-10-09T18:31:35.000Z",permalink:"/pages/95ef75/",categories:["ææ¯æè°","è®¡ç®æºç½ç»åºç¡"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å³äºcpuåå­"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/02.%E5%85%B3%E4%BA%8Ecpu%E5%86%85%E5%AD%98.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å³äºcpuåå­"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/02.%E5%85%B3%E4%BA%8Ecpu%E5%86%85%E5%AD%98.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T18:31:35.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å³äºcpuåå­"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/02.%E5%85%B3%E4%BA%8Ecpu%E5%86%85%E5%AD%98.html",relativePath:"01.ææ¯æè°/06.è®¡ç®æºç½ç»åºç¡/02.å³äºcpuåå­.md",key:"v-13d7c644",path:"/pages/95ef75/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"centosä½¿ç¨kvmåå»ºèææº",frontmatter:{title:"centosä½¿ç¨kvmåå»ºèææº",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/33705b/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"centosä½¿ç¨kvmåå»ºèææº"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"centosä½¿ç¨kvmåå»ºèææº"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"centosä½¿ç¨kvmåå»ºèææº"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html",relativePath:"01.ææ¯æè°/07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.md",key:"v-080925d0",path:"/pages/33705b/",headers:[{level:2,title:"å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼",slug:"å®è£å®kvmä¹å-éè¦éç½®ä¸ä¸ç½å¡-å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡",normalizedTitle:"å®è£å®kvmä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼",charIndex:60},{level:2,title:"åå»ºå·",slug:"åå»ºå·",normalizedTitle:"åå»ºå·",charIndex:939},{level:2,title:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",slug:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",normalizedTitle:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",charIndex:1254},{level:2,title:"èææºæä½",slug:"èææºæä½",normalizedTitle:"èææºæä½",charIndex:2044},{level:2,title:"å®è£å®æï¼éç½®åºå®IP",slug:"å®è£å®æ-éç½®åºå®ip",normalizedTitle:"å®è£å®æï¼éç½®åºå®ip",charIndex:2602}],headersStr:"å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ åå»ºå· åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶ èææºæä½ å®è£å®æï¼éç½®åºå®IP",content:"https://blog.csdn.net/dhRainer/article/details/83411555\n\n\n# å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼\n\ncd /etc/sysconfig/network-scripts/\ncp ifcfg-eno16777728 ifcfg-br0  # æ·è´å½åçç½å¡æä»¶\nvim ifcfg-eno16777728  # ä¿®æ¹æä»¶åå®¹å¦ä¸\nTYPE=Ethernet\nBOOTPROTO=dhcp\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=eno16777728\nDEVICE=eno16777728\nONBOOT=yes\nBRIDGE=br0\n\nvim ifcfg-br0  # ä¿®æ¹æä»¶åå®¹å¦ä¸\nTYPE=Bridge\nBOOTPROTO=dhcp\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=br0\nDEVICE=br0\nONBOOT=yes\n\nsystemctl restart network  # éå¯æå¡\n\nsystemctl start libvirtd  # å¯å¨libvirtdæå¡\n\nbrctl show  # å¯ä»¥çå°ä¸¤ä¸ªç½å¡\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# åå»ºå·\n\ncd /root/hff/kvm\nqemu-img create -f qcow2    hfftest.qcow2  10G\nqemu-img info  hfftest.qcow2 \nimage: hfftest.qcow2\nfile format: qcow2\nvirtual size: 10G (10737418240 bytes)\ndisk size: 196K\ncluster_size: 65536\nFormat specific information:\n    compat: 1.1\n    lazy refcounts: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶\n\na)å½ä»¤è¡å®è£èææº\n\nvirt-install \\\n--virt-type=kvm \\\n--name=hfftest \\\n--vcpus=2 \\\n--memory=2048 \\\n--location=/hff/kvm/iso/CentOS-7-x86_64-Minimal-2009.iso \\\n--disk path=/hff/kvm/images/hfftest.qcow2,size=15,format=qcow2 \\\n--network bridge=virbr0 \\\n--graphics none \\\n--extra-args='console=ttyS0' \\\n--force\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> å½ä»¤è¯´æï¼ --name æå®èææºçåç§° --memory æå®åéç»èææºçåå­èµæºå¤§å° maxmemory æå®å¯è°èçæå¤§åå­èµæºå¤§å°ï¼å ä¸ºKVMæ¯æç­è°æ´èææºçèµæº --vcpus æå®åéç»èææºçCPUæ ¸å¿æ°é maxvcpus æå®å¯è°èçæå¤§CPUæ ¸å¿æ°é --os-type æå®èææºå®è£çæä½ç³»ç»ç±»å --os-variant æå®ç³»ç»çåè¡çæ¬ --location æå®ISOéåæä»¶æå¨çè·¯å¾ï¼æ¯æä½¿ç¨ç½ç»èµæºè·¯å¾ï¼ä¹å°±æ¯è¯´å¯ä»¥ä½¿ç¨URL --disk path æå®èæç¡¬çæå­æ¾çè·¯å¾ååç§°ï¼size åæ¯æå®è¯¥ç¡¬ççå¯ç¨å¤§å°ï¼åä½æ¯G --bridge æå®ä½¿ç¨åªä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ä¹å°±æ¯è¯´ä½¿ç¨æ¡¥æ¥çç½ç»æ¨¡å¼ --graphics æå®æ¯å¦å¼å¯å¾å½¢ --console å®ä¹ç»ç«¯çå±æ§ï¼target_type åæ¯å®ä¹ç»ç«¯çç±»å --extra-args å®ä¹ç»ç«¯é¢å¤çåæ°\n\næ¥è¯¢èææºæä½¿ç¨çvncç«¯å£virsh vncdisplay centos\n\n\n# èææºæä½\n\n[root@localhost ~]# virsh console study01  # è¿å¥æå®çèææºï¼è¿å¥çæ¶åè¿éè¦æä¸ä¸åè½¦\n[root@localhost ~]# virsh start study01  # å¯å¨èææº\n[root@localhost ~]# virsh shutdown study01  # å³é­èææº\n[root@localhost ~]# virsh destroy study01  # å¼ºå¶åæ­¢èææº\n[root@localhost ~]# virsh undefine study01  # å½»åºéæ¯èææºï¼ä¼å é¤èææºéç½®æä»¶ï¼ä½ä¸ä¼å é¤èæç£ç\n[root@localhost ~]# virsh autostart study01  # è®¾ç½®å®¿ä¸»æºå¼æºæ¶è¯¥èææºä¹å¼æº\n[root@localhost ~]# virsh autostart --disable study01  # è§£é¤å¼æºå¯å¨\n[root@localhost ~]# virsh suspend study01 # æèµ·èææº\n[root@localhost ~]# virsh resume study01 # æ¢å¤æèµ·çèææº\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®è£å®æï¼éç½®åºå®IP\n\n[root@localhost network-scripts]# ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: ens3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n    link/ether 52:54:00:40:a4:ef brd ff:ff:ff:ff:ff:ff\n    inet 192.168.122.151/24 brd 192.168.122.255 scope global noprefixroute dynamic ens3\n       valid_lft 3598sec preferred_lft 3598sec\n    inet6 fe80::f5ed:53d0:e383:59e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\n[root@localhost network-scripts]#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",normalizedContent:"https://blog.csdn.net/dhrainer/article/details/83411555\n\n\n# å®è£å®kvmä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼\n\ncd /etc/sysconfig/network-scripts/\ncp ifcfg-eno16777728 ifcfg-br0  # æ·è´å½åçç½å¡æä»¶\nvim ifcfg-eno16777728  # ä¿®æ¹æä»¶åå®¹å¦ä¸\ntype=ethernet\nbootproto=dhcp\ndefroute=yes\npeerdns=yes\npeerroutes=yes\nipv4_failure_fatal=no\nipv6init=yes\nipv6_autoconf=yes\nipv6_defroute=yes\nipv6_peerdns=yes\nipv6_peerroutes=yes\nipv6_failure_fatal=no\nname=eno16777728\ndevice=eno16777728\nonboot=yes\nbridge=br0\n\nvim ifcfg-br0  # ä¿®æ¹æä»¶åå®¹å¦ä¸\ntype=bridge\nbootproto=dhcp\ndefroute=yes\npeerdns=yes\npeerroutes=yes\nipv4_failure_fatal=no\nipv6init=yes\nipv6_autoconf=yes\nipv6_defroute=yes\nipv6_peerdns=yes\nipv6_peerroutes=yes\nipv6_failure_fatal=no\nname=br0\ndevice=br0\nonboot=yes\n\nsystemctl restart network  # éå¯æå¡\n\nsystemctl start libvirtd  # å¯å¨libvirtdæå¡\n\nbrctl show  # å¯ä»¥çå°ä¸¤ä¸ªç½å¡\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# åå»ºå·\n\ncd /root/hff/kvm\nqemu-img create -f qcow2    hfftest.qcow2  10g\nqemu-img info  hfftest.qcow2 \nimage: hfftest.qcow2\nfile format: qcow2\nvirtual size: 10g (10737418240 bytes)\ndisk size: 196k\ncluster_size: 65536\nformat specific information:\n    compat: 1.1\n    lazy refcounts: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶\n\na)å½ä»¤è¡å®è£èææº\n\nvirt-install \\\n--virt-type=kvm \\\n--name=hfftest \\\n--vcpus=2 \\\n--memory=2048 \\\n--location=/hff/kvm/iso/centos-7-x86_64-minimal-2009.iso \\\n--disk path=/hff/kvm/images/hfftest.qcow2,size=15,format=qcow2 \\\n--network bridge=virbr0 \\\n--graphics none \\\n--extra-args='console=ttys0' \\\n--force\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> å½ä»¤è¯´æï¼ --name æå®èææºçåç§° --memory æå®åéç»èææºçåå­èµæºå¤§å° maxmemory æå®å¯è°èçæå¤§åå­èµæºå¤§å°ï¼å ä¸ºkvmæ¯æç­è°æ´èææºçèµæº --vcpus æå®åéç»èææºçcpuæ ¸å¿æ°é maxvcpus æå®å¯è°èçæå¤§cpuæ ¸å¿æ°é --os-type æå®èææºå®è£çæä½ç³»ç»ç±»å --os-variant æå®ç³»ç»çåè¡çæ¬ --location æå®isoéåæä»¶æå¨çè·¯å¾ï¼æ¯æä½¿ç¨ç½ç»èµæºè·¯å¾ï¼ä¹å°±æ¯è¯´å¯ä»¥ä½¿ç¨url --disk path æå®èæç¡¬çæå­æ¾çè·¯å¾ååç§°ï¼size åæ¯æå®è¯¥ç¡¬ççå¯ç¨å¤§å°ï¼åä½æ¯g --bridge æå®ä½¿ç¨åªä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ä¹å°±æ¯è¯´ä½¿ç¨æ¡¥æ¥çç½ç»æ¨¡å¼ --graphics æå®æ¯å¦å¼å¯å¾å½¢ --console å®ä¹ç»ç«¯çå±æ§ï¼target_type åæ¯å®ä¹ç»ç«¯çç±»å --extra-args å®ä¹ç»ç«¯é¢å¤çåæ°\n\næ¥è¯¢èææºæä½¿ç¨çvncç«¯å£virsh vncdisplay centos\n\n\n# èææºæä½\n\n[root@localhost ~]# virsh console study01  # è¿å¥æå®çèææºï¼è¿å¥çæ¶åè¿éè¦æä¸ä¸åè½¦\n[root@localhost ~]# virsh start study01  # å¯å¨èææº\n[root@localhost ~]# virsh shutdown study01  # å³é­èææº\n[root@localhost ~]# virsh destroy study01  # å¼ºå¶åæ­¢èææº\n[root@localhost ~]# virsh undefine study01  # å½»åºéæ¯èææºï¼ä¼å é¤èææºéç½®æä»¶ï¼ä½ä¸ä¼å é¤èæç£ç\n[root@localhost ~]# virsh autostart study01  # è®¾ç½®å®¿ä¸»æºå¼æºæ¶è¯¥èææºä¹å¼æº\n[root@localhost ~]# virsh autostart --disable study01  # è§£é¤å¼æºå¯å¨\n[root@localhost ~]# virsh suspend study01 # æèµ·èææº\n[root@localhost ~]# virsh resume study01 # æ¢å¤æèµ·çèææº\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®è£å®æï¼éç½®åºå®ip\n\n[root@localhost network-scripts]# ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: ens3: <broadcast,multicast,up,lower_up> mtu 1500 qdisc pfifo_fast state up group default qlen 1000\n    link/ether 52:54:00:40:a4:ef brd ff:ff:ff:ff:ff:ff\n    inet 192.168.122.151/24 brd 192.168.122.255 scope global noprefixroute dynamic ens3\n       valid_lft 3598sec preferred_lft 3598sec\n    inet6 fe80::f5ed:53d0:e383:59e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\n[root@localhost network-scripts]#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",charsets:{cjk:!0},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"èæååºç¡æ¦å¿µ",frontmatter:{title:"èæååºç¡æ¦å¿µ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/697e48/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"èæååºç¡æ¦å¿µ"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"},{property:"og:type",content:"article"},{property:"og:title",content:"èæååºç¡æ¦å¿µ"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"èæååºç¡æ¦å¿µ"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html",relativePath:"01.ææ¯æè°/07.èæå/02.èæååºç¡æ¦å¿µ.md",key:"v-2e18135a",path:"/pages/697e48/",headers:[{level:2,title:"æ¦å¿µ",slug:"æ¦å¿µ",normalizedTitle:"æ¦å¿µ",charIndex:2},{level:2,title:"èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:",slug:"èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº",normalizedTitle:"èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:",charIndex:936}],headersStr:"æ¦å¿µ èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:",content:'# æ¦å¿µ\n\n * KVMï¼Kernel-Based Virtual Machine åºäºåæ ¸çèææºï¼åªè´è´£CPUååå­çèæå\n\n * qemu-kvmï¼kvmç¨æ·ç©ºé´ç®¡çå·¥å·ï¼\n\n * libvirtï¼ç®¡çkvmèææºçè½¯ä»¶ï¼\n\n * QEMUï¼ QEMUæ¯ä¸ä¸ªç¬ç«çèæåè§£å³æ¹æ¡ï¼å¹¶ä¸ä¾èµKVMï¼å®æ¬èº«èªå·±å¯ä»¥åCPUååå­çæ¨¡æï¼åªä¸è¿æçè¾ä½ï¼ï¼èKVMæ¯å¦ä¸å¥èæåè§£å³æ¹æ¡ï¼å¯¹CPUè¿è¡èææçè¾é«ï¼éç¨äºç¡¬ä»¶è¾å©èæåï¼ï¼ä½æ¬èº«ä¸æä¾å¶ä»è®¾å¤çèæåï¼åç¨äºQEMUçä»£ç è¿è¡äºå®å¶ï¼æä»¥KVMæ¹æ¡ä¸å®è¦ä¾èµQEMU\n\n * QEMU-KVMï¼\n   \n   1.æä¾å¯¹cpuï¼åå­ï¼KVMè´è´£ï¼ï¼IOè®¾å¤ï¼QEMUè´è´£ï¼çèæ\n   \n   2.å¯¹åç§èæè®¾å¤çåå»ºï¼è°ç¨è¿è¡ç®¡çï¼QEMUè´è´£ï¼\n\n * libvirtï¼ åªè½ç®åçè®¤ä¸ºæ¯ä¸ªèææºç®¡çå·¥å·ï¼ä»ç¶éè¦éè¿ç¨æ·ç©ºé´QEMUæ¥ä¸KVMè¿è¡äº¤äºã ä¸äºå¸¸ç¨çèææºç®¡çå·¥å·å¦virshï¼ç±»ä¼¼vimç¼è¾å¨ï¼ï¼virt-installï¼virt-managerç­åäºè®¡ç®æ¡æ¶å¹³å°ï¼å¦OpenStackï¼OpenNebulaï¼Eucalyptusç­ï¼é½å¨åºå±ä½¿ç¨libvirtæä¾çåºç¨ç¨åºæ¥å£ã\n\n * Hyper-Vï¼\n\n * xen:\n\n * VSOCKï¼è½¯ä»¶åvsockæä¾äºå¯¹Linux VMå¥æ¥å­ï¼ AF_VSOCK ï¼çè®¿é®ï¼ä»¥å¨èææºç®¡çç¨åºä¸å¶èææºä¹é´è¿è¡éä¿¡ã\n\n * Hypervisor: åå©èæåææ¯ï¼ç¨æ·è½ä»¥åä¸ªç©çç¡¬ä»¶ç³»ç»ä¸ºåºç¡åå»ºå¤ä¸ªæ¨¡æç¯å¢æä¸ç¨èµæºãç§°ä¸º"Hypervisor" ï¼èææºçæ§ç¨åºï¼\n\n * å¤§é¡µåå­ï¼å¢å åå­ä¸é¡µçå¤§å°ï¼é»è®¤æ¯å¼å¯ç,æé«èææºåå­çioæ§è½ cat /sys/kernel/mm/transparent_hugepage/enabled\n\n * KSM KSMåå­åå¹¶,ç¸åçé¡µåå¹¶ï¼ps -aux | grep ksm | grep -v grep\n\n * noopï¼ ç³»ç»åæ ¸ioçè°åº¦ç®æ³ï¼å¦ææ¯ssdç¡¬çéè¦ä½¿ç¨çæ¯noopåæ ¸è°åº¦ï¼ cat /sys/block/sda/queue/scheduler\n\n\n# èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:\n\nï¼1ï¼. è¿è¡ä¸ç©çæºä¹ä¸ï¼ç©çæº --\x3e hypervisor ä¾å¦ï¼kvmãMicrosoft Hyper-V å VMware vSphere ï¼2ï¼. è¿è¡ä¸æä½ç³»ç»ä¹ä¸ï¼ç©çæº --\x3e OS --\x3e Hypervisor ä¾å¦ï¼VMware Workstation å Oracle VirtualBox',normalizedContent:'# æ¦å¿µ\n\n * kvmï¼kernel-based virtual machine åºäºåæ ¸çèææºï¼åªè´è´£cpuååå­çèæå\n\n * qemu-kvmï¼kvmç¨æ·ç©ºé´ç®¡çå·¥å·ï¼\n\n * libvirtï¼ç®¡çkvmèææºçè½¯ä»¶ï¼\n\n * qemuï¼ qemuæ¯ä¸ä¸ªç¬ç«çèæåè§£å³æ¹æ¡ï¼å¹¶ä¸ä¾èµkvmï¼å®æ¬èº«èªå·±å¯ä»¥åcpuååå­çæ¨¡æï¼åªä¸è¿æçè¾ä½ï¼ï¼èkvmæ¯å¦ä¸å¥èæåè§£å³æ¹æ¡ï¼å¯¹cpuè¿è¡èææçè¾é«ï¼éç¨äºç¡¬ä»¶è¾å©èæåï¼ï¼ä½æ¬èº«ä¸æä¾å¶ä»è®¾å¤çèæåï¼åç¨äºqemuçä»£ç è¿è¡äºå®å¶ï¼æä»¥kvmæ¹æ¡ä¸å®è¦ä¾èµqemu\n\n * qemu-kvmï¼\n   \n   1.æä¾å¯¹cpuï¼åå­ï¼kvmè´è´£ï¼ï¼ioè®¾å¤ï¼qemuè´è´£ï¼çèæ\n   \n   2.å¯¹åç§èæè®¾å¤çåå»ºï¼è°ç¨è¿è¡ç®¡çï¼qemuè´è´£ï¼\n\n * libvirtï¼ åªè½ç®åçè®¤ä¸ºæ¯ä¸ªèææºç®¡çå·¥å·ï¼ä»ç¶éè¦éè¿ç¨æ·ç©ºé´qemuæ¥ä¸kvmè¿è¡äº¤äºã ä¸äºå¸¸ç¨çèææºç®¡çå·¥å·å¦virshï¼ç±»ä¼¼vimç¼è¾å¨ï¼ï¼virt-installï¼virt-managerç­åäºè®¡ç®æ¡æ¶å¹³å°ï¼å¦openstackï¼opennebulaï¼eucalyptusç­ï¼é½å¨åºå±ä½¿ç¨libvirtæä¾çåºç¨ç¨åºæ¥å£ã\n\n * hyper-vï¼\n\n * xen:\n\n * vsockï¼è½¯ä»¶åvsockæä¾äºå¯¹linux vmå¥æ¥å­ï¼ af_vsock ï¼çè®¿é®ï¼ä»¥å¨èææºç®¡çç¨åºä¸å¶èææºä¹é´è¿è¡éä¿¡ã\n\n * hypervisor: åå©èæåææ¯ï¼ç¨æ·è½ä»¥åä¸ªç©çç¡¬ä»¶ç³»ç»ä¸ºåºç¡åå»ºå¤ä¸ªæ¨¡æç¯å¢æä¸ç¨èµæºãç§°ä¸º"hypervisor" ï¼èææºçæ§ç¨åºï¼\n\n * å¤§é¡µåå­ï¼å¢å åå­ä¸é¡µçå¤§å°ï¼é»è®¤æ¯å¼å¯ç,æé«èææºåå­çioæ§è½ cat /sys/kernel/mm/transparent_hugepage/enabled\n\n * ksm ksmåå­åå¹¶,ç¸åçé¡µåå¹¶ï¼ps -aux | grep ksm | grep -v grep\n\n * noopï¼ ç³»ç»åæ ¸ioçè°åº¦ç®æ³ï¼å¦ææ¯ssdç¡¬çéè¦ä½¿ç¨çæ¯noopåæ ¸è°åº¦ï¼ cat /sys/block/sda/queue/scheduler\n\n\n# èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:\n\nï¼1ï¼. è¿è¡ä¸ç©çæºä¹ä¸ï¼ç©çæº --\x3e hypervisor ä¾å¦ï¼kvmãmicrosoft hyper-v å vmware vsphere ï¼2ï¼. è¿è¡ä¸æä½ç³»ç»ä¹ä¸ï¼ç©çæº --\x3e os --\x3e hypervisor ä¾å¦ï¼vmware workstation å oracle virtualbox',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³",frontmatter:{title:"Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³",date:"2022-08-02T11:51:37.000Z",permalink:"/pages/yhsjff/",categories:["ææ¯æè°","è¿ç»´èæ¬"],tags:["èæ¬"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/08.%E8%BF%90%E7%BB%B4%E8%84%9A%E6%9C%AC/01.Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E7%94%A8%E6%88%B7%E5%AE%A1%E8%AE%A1%E6%96%B9%E6%B3%95.html"},{property:"og:type",content:"article"},{property:"og:title",content:"Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/08.%E8%BF%90%E7%BB%B4%E8%84%9A%E6%9C%AC/01.Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E7%94%A8%E6%88%B7%E5%AE%A1%E8%AE%A1%E6%96%B9%E6%B3%95.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-08-02T11:51:37.000Z"},{property:"article:tag",content:"èæ¬"},{itemprop:"name",content:"Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/08.%E8%BF%90%E7%BB%B4%E8%84%9A%E6%9C%AC/01.Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E7%94%A8%E6%88%B7%E5%AE%A1%E8%AE%A1%E6%96%B9%E6%B3%95.html",relativePath:"01.ææ¯æè°/08.è¿ç»´èæ¬/01.Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³.md",key:"v-a2c6b924",path:"/pages/yhsjff/",headers:[{level:2,title:"json",slug:"json",normalizedTitle:"json",charIndex:57},{level:2,title:"text",slug:"text",normalizedTitle:"text",charIndex:1136}],headersStr:"json text",content:"éè¿å©ç¨ç¯å¢åéPROMPT_COMMANDï¼å¯ä»¥åå°å°ææç¨æ·æ§è¡å½ä»¤çè®°å½ï¼éä¸­è®°å½å¨ä¸ä¸ªæ¥å¿æä»¶ã\n\n\n# json\n\næ·»å ä¸é¢åå®¹å°~/.bashrc\n\nHISTDIR='/var/log/operation'\nif [ ! -d $HISTDIR ]\nthen\n  mkdir -p $HISTDIR\n  chmod -R 777 $HISTDIR\nfi\n\nexport HISTTIMEFORMAT=\"{\\\"time\\\":\\\"%FT%T\\\",\\\"ip\\\":\\\"$(who -u am i 2>/dev/null| awk '{print $NF}'|sed -e 's/[()]//g')\\\",\\\"Luser\\\":\\\"$(who am i|awk '{print $1}')\\\",\\\"Ouser\\\":\\\"$(whoami)\\\",\\\"cmd\\\":\\\"\"\n\n# export PROMPT_COMMAND='history 1|tail -1|sed \"s/^[ ]\\+[0-9]\\+ //\"|sed \"s/$/\\\"}/\">>  $HISTDIR/operation-`date '+%Y-%m-%d'`.log'  è¿æ ·åä¼å¯¼è´ç©ºè¡ä¼éå¤è®°å½ä¸ä¸ä¸ªè®°å½\n\nexport PROMPT_COMMAND=\"HistID0=\\$(history 1|awk '{print \\$1}'); \\\nlastcommand=\\$(history 1|awk '{\\$1=\\\"\\\" ;print}');\\\nlogin_pid=\\$(who -u am i | awk '{print \\$(NF-1)}')\nlogin_ip=\\$(who -u am i | awk -F '\\\\\\(|\\\\\\)' '{print \\$2}'); \\\nif [ \\${HistID0}x != \\${HistID1}x ];then \\\nhistory 1|tail -1|sed 's/^[ ]\\+[0-9]\\+ //'|sed 's/$/\\\"}/'>>  $HISTDIR/operation-`date '+%Y-%m-%d'`.log; \\\nHistID1=\\${HistID0}; \\\nfi;\"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nsource ~/.bashrc\n\nexport PROMPT_COMMAND='history 1|tail -1|sed \"s/^[ ]+[0-9]+ //\"|sed \"s/$/\"}/\">> $HISTDIR/operation-date'+%Y-%m-%d'.log'\n\n\n# text\n\nvi /etc/profile.d/prompt-command.sh\n\nif [ ! -d /var/log/operation ]\nthen\n  mkdir -p /var/log/operation\n  chmod -R 777 /var/log/operation\nfi\n \nexport PROMPT_COMMAND=\"HistID0=\\$(history 1|awk '{print \\$1}'); \\\nlastcommand=\\$(history 1|awk '{\\$1=\\\"\\\" ;print}');\\\nlogin_pid=\\$(who -u am i | awk '{print \\$(NF-1)}')\nlogin_ip=\\$(who -u am i | awk -F '\\\\\\(|\\\\\\)' '{print \\$2}'); \\\nif [ \\${HistID0}x != \\${HistID1}x ];then \\\necho -E [\\$(date \\\"+%Y/%m/%d %H:%M:%S\\\")] [sshpid:\\${login_pid}] [fromip:\\${login_ip}] [\\$(id -un)@\\$(hostname) \\$(pwd)]  \\${lastcommand} >> /var/log/operation/operation-`date '+%Y-%m-%d'`.log; \\\nHistID1=\\${HistID0}; \\\nfi;\"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",normalizedContent:"éè¿å©ç¨ç¯å¢åéprompt_commandï¼å¯ä»¥åå°å°ææç¨æ·æ§è¡å½ä»¤çè®°å½ï¼éä¸­è®°å½å¨ä¸ä¸ªæ¥å¿æä»¶ã\n\n\n# json\n\næ·»å ä¸é¢åå®¹å°~/.bashrc\n\nhistdir='/var/log/operation'\nif [ ! -d $histdir ]\nthen\n  mkdir -p $histdir\n  chmod -r 777 $histdir\nfi\n\nexport histtimeformat=\"{\\\"time\\\":\\\"%ft%t\\\",\\\"ip\\\":\\\"$(who -u am i 2>/dev/null| awk '{print $nf}'|sed -e 's/[()]//g')\\\",\\\"luser\\\":\\\"$(who am i|awk '{print $1}')\\\",\\\"ouser\\\":\\\"$(whoami)\\\",\\\"cmd\\\":\\\"\"\n\n# export prompt_command='history 1|tail -1|sed \"s/^[ ]\\+[0-9]\\+ //\"|sed \"s/$/\\\"}/\">>  $histdir/operation-`date '+%y-%m-%d'`.log'  è¿æ ·åä¼å¯¼è´ç©ºè¡ä¼éå¤è®°å½ä¸ä¸ä¸ªè®°å½\n\nexport prompt_command=\"histid0=\\$(history 1|awk '{print \\$1}'); \\\nlastcommand=\\$(history 1|awk '{\\$1=\\\"\\\" ;print}');\\\nlogin_pid=\\$(who -u am i | awk '{print \\$(nf-1)}')\nlogin_ip=\\$(who -u am i | awk -f '\\\\\\(|\\\\\\)' '{print \\$2}'); \\\nif [ \\${histid0}x != \\${histid1}x ];then \\\nhistory 1|tail -1|sed 's/^[ ]\\+[0-9]\\+ //'|sed 's/$/\\\"}/'>>  $histdir/operation-`date '+%y-%m-%d'`.log; \\\nhistid1=\\${histid0}; \\\nfi;\"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\nsource ~/.bashrc\n\nexport prompt_command='history 1|tail -1|sed \"s/^[ ]+[0-9]+ //\"|sed \"s/$/\"}/\">> $histdir/operation-date'+%y-%m-%d'.log'\n\n\n# text\n\nvi /etc/profile.d/prompt-command.sh\n\nif [ ! -d /var/log/operation ]\nthen\n  mkdir -p /var/log/operation\n  chmod -r 777 /var/log/operation\nfi\n \nexport prompt_command=\"histid0=\\$(history 1|awk '{print \\$1}'); \\\nlastcommand=\\$(history 1|awk '{\\$1=\\\"\\\" ;print}');\\\nlogin_pid=\\$(who -u am i | awk '{print \\$(nf-1)}')\nlogin_ip=\\$(who -u am i | awk -f '\\\\\\(|\\\\\\)' '{print \\$2}'); \\\nif [ \\${histid0}x != \\${histid1}x ];then \\\necho -e [\\$(date \\\"+%y/%m/%d %h:%m:%s\\\")] [sshpid:\\${login_pid}] [fromip:\\${login_ip}] [\\$(id -un)@\\$(hostname) \\$(pwd)]  \\${lastcommand} >> /var/log/operation/operation-`date '+%y-%m-%d'`.log; \\\nhistid1=\\${histid0}; \\\nfi;\"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"å¼å¯ç¡¬ä»¶èæå",frontmatter:{title:"å¼å¯ç¡¬ä»¶èæå",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/6f3d25/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å¼å¯ç¡¬ä»¶èæå"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¼å¯ç¡¬ä»¶èæå"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¼å¯ç¡¬ä»¶èæå"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html",relativePath:"01.ææ¯æè°/07.èæå/01.å¼å¯ç¡¬ä»¶èæå.md",key:"v-4a20ad90",path:"/pages/6f3d25/",headers:[{level:2,title:"å¼å¯ç¡¬ä»¶èæå",slug:"å¼å¯ç¡¬ä»¶èæå",normalizedTitle:"å¼å¯ç¡¬ä»¶èæå",charIndex:2},{level:3,title:"1.BIOS å¯ç¨èæå",slug:"_1-bios-å¯ç¨èæå",normalizedTitle:"1.bios å¯ç¨èæå",charIndex:14},{level:3,title:"2.å è½½åæ ¸æ¨¡å",slug:"_2-å è½½åæ ¸æ¨¡å",normalizedTitle:"2.å è½½åæ ¸æ¨¡å",charIndex:61},{level:3,title:"3.IOMMUå¼å¯ï¼",slug:"_3-iommuå¼å¯",normalizedTitle:"3.iommuå¼å¯ï¼",charIndex:115},{level:3,title:'4.egrep --color -i "svm|vmx" /proc/cpuinfo',slug:"_4-egrep-color-i-svm-vmx-proc-cpuinfo",normalizedTitle:"4.egrep --color -i &quot;svm|vmx&quot; /proc/cpuinfo",charIndex:null},{level:2,title:"æ£æ¥èæå",slug:"æ£æ¥èæå",normalizedTitle:"æ£æ¥èæå",charIndex:663}],headersStr:'å¼å¯ç¡¬ä»¶èæå 1.BIOS å¯ç¨èæå 2.å è½½åæ ¸æ¨¡å 3.IOMMUå¼å¯ï¼ 4.egrep --color -i "svm|vmx" /proc/cpuinfo æ£æ¥èæå',content:'# å¼å¯ç¡¬ä»¶èæå\n\n\n# 1.BIOS å¯ç¨èæå\n\nè®¾ç½®biosä¸­çç¡¬ä»¶æ¯æVT-xï¼å³CPUæ¯æçèæåï¼\n\n\n# 2.å è½½åæ ¸æ¨¡å\n\nmodprobe kvm-intel modprobe vhost-vsock\n\n\n# 3.IOMMUå¼å¯ï¼\n\nå¤æ­æ¯å¦amd/intel: ls /sys/firmware/ | grep efi\n\n1 ä¿®æ¹/etc/default/grub, è°æ´GRUB_CMDLINE_LINUXåå®¹\n\n * amd_iommuï¼\n\n> GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet amd_iommu=on iommu=pt"\n\n * intel_iommuï¼\n\n> GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet intel_iommu=on iommu=pt"\n\n2 éæ°åå»ºå¼å¯¼\n\n * å¦ææå¡å¨æ¯UEFIå¯å¨\n\n> grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg\n\n * æ®éLEGACYæ¨¡å¼å¯å¨\n\n> grub2-mkconfig -o /boot/grub2/grub.cfg\n\n3 reboot\n\nIOMMUå³é­ï¼\n\n1 ä¿®æ¹/etc/default/grubï¼å é¤iommuéç½®\n\n2 éæ°åå»ºå¼å¯¼åä¸\n\n3 reboot\n\n\n# 4.egrep --color -i "svm|vmx" /proc/cpuinfo\n\n\n# æ£æ¥èæå\n\næ£æ¥æ¯å¦èææºï¼\n\n> systemd-detect-virt egrep --color -i "svm|vmx" /proc/cpuinfo\n\nå¤æ­å½åç¯å¢æä½¿ç¨çèæææ¯ï¼\n\n> virt-what\n\næ£æµ Linux åºå±çèæåç±»å:\n\n> dmidecode -s system-manufacturer virsh vcpuinfo --domain hfftest',normalizedContent:'# å¼å¯ç¡¬ä»¶èæå\n\n\n# 1.bios å¯ç¨èæå\n\nè®¾ç½®biosä¸­çç¡¬ä»¶æ¯ævt-xï¼å³cpuæ¯æçèæåï¼\n\n\n# 2.å è½½åæ ¸æ¨¡å\n\nmodprobe kvm-intel modprobe vhost-vsock\n\n\n# 3.iommuå¼å¯ï¼\n\nå¤æ­æ¯å¦amd/intel: ls /sys/firmware/ | grep efi\n\n1 ä¿®æ¹/etc/default/grub, è°æ´grub_cmdline_linuxåå®¹\n\n * amd_iommuï¼\n\n> grub_cmdline_linux="crashkernel=auto rhgb quiet amd_iommu=on iommu=pt"\n\n * intel_iommuï¼\n\n> grub_cmdline_linux="crashkernel=auto rhgb quiet intel_iommu=on iommu=pt"\n\n2 éæ°åå»ºå¼å¯¼\n\n * å¦ææå¡å¨æ¯uefiå¯å¨\n\n> grub2-mkconfig -o /boot/efi/efi/centos/grub.cfg\n\n * æ®élegacyæ¨¡å¼å¯å¨\n\n> grub2-mkconfig -o /boot/grub2/grub.cfg\n\n3 reboot\n\niommuå³é­ï¼\n\n1 ä¿®æ¹/etc/default/grubï¼å é¤iommuéç½®\n\n2 éæ°åå»ºå¼å¯¼åä¸\n\n3 reboot\n\n\n# 4.egrep --color -i "svm|vmx" /proc/cpuinfo\n\n\n# æ£æ¥èæå\n\næ£æ¥æ¯å¦èææºï¼\n\n> systemd-detect-virt egrep --color -i "svm|vmx" /proc/cpuinfo\n\nå¤æ­å½åç¯å¢æä½¿ç¨çèæææ¯ï¼\n\n> virt-what\n\næ£æµ linux åºå±çèæåç±»å:\n\n> dmidecode -s system-manufacturer virsh vcpuinfo --domain hfftest',charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å»æ¡è±é",frontmatter:{title:"å»æ¡è±é",date:"2022-12-25T14:27:01.000Z",permalink:"/pages/ythx",categories:["çæ´»éå","å»æ¡æ¥è®°"],tags:["æ¡å­"],author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700",meta:[{name:"twitter:title",content:"å»æ¡è±é"},{name:"twitter:description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å»æ¡è±é"},{property:"og:description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"},{property:"og:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-12-25T14:27:01.000Z"},{property:"article:tag",content:"æ¡å­"},{itemprop:"name",content:"å»æ¡è±é"},{itemprop:"description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"}]},regularPath:"/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html",relativePath:"02.çæ´»éå/01.å»æ¡æ¥è®°/01.å»æ¡è±é.md",key:"v-51e55098",path:"/pages/ythx/",headers:[{level:2,title:"å»æ¡è±é",slug:"å»æ¡è±é",normalizedTitle:"å»æ¡è±é",charIndex:2},{level:2,title:"ç«ç²®æç»",slug:"ç«ç²®æç»",normalizedTitle:"ç«ç²®æç»",charIndex:62}],headersStr:"å»æ¡è±é ç«ç²®æç»",content:"# å»æ¡è±é\n\næ¥æ         ç©å   æ»ä»·     å¤æ³¨\n2019/7/5   æ¡å­   1700   \n\n\n# ç«ç²®æç»\n\næ¥æ     ç©å   æ»ä»·   å¤æ³¨\n2019   ç«ç²®        \n2020   ç«ç²®        \n2021   ç«ç²®        ",normalizedContent:"# å»æ¡è±é\n\næ¥æ         ç©å   æ»ä»·     å¤æ³¨\n2019/7/5   æ¡å­   1700   \n\n\n# ç«ç²®æç»\n\næ¥æ     ç©å   æ»ä»·   å¤æ³¨\n2019   ç«ç²®        \n2020   ç«ç²®        \n2021   ç«ç²®        ",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"æ¬è¯·ç­å¾",frontmatter:{title:"æ¬è¯·ç­å¾",date:"2022-10-09T17:51:37.000Z",permalink:"/pages/jqdd/",categories:["ææ¯æè°","è½¯èé«é¡¹"],tags:["è½¯è","é¡¹ç®ç®¡ç"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"æ¬è¯·ç­å¾"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/09.%E8%BD%AF%E8%80%83%E9%AB%98%E9%A1%B9/01.%E6%95%AC%E8%AF%B7%E7%AD%89%E5%BE%85.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æ¬è¯·ç­å¾"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/09.%E8%BD%AF%E8%80%83%E9%AB%98%E9%A1%B9/01.%E6%95%AC%E8%AF%B7%E7%AD%89%E5%BE%85.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T17:51:37.000Z"},{property:"article:tag",content:"è½¯è"},{property:"article:tag",content:"é¡¹ç®ç®¡ç"},{itemprop:"name",content:"æ¬è¯·ç­å¾"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/09.%E8%BD%AF%E8%80%83%E9%AB%98%E9%A1%B9/01.%E6%95%AC%E8%AF%B7%E7%AD%89%E5%BE%85.html",relativePath:"01.ææ¯æè°/09.è½¯èé«é¡¹/01.æ¬è¯·ç­å¾.md",key:"v-20df4130",path:"/pages/jqdd/",headers:[{level:2,title:"ç­æèè¿åè¯´",slug:"ç­æèè¿åè¯´",normalizedTitle:"ç­æèè¿åè¯´",charIndex:2}],headersStr:"ç­æèè¿åè¯´",content:"# ç­æèè¿åè¯´",normalizedContent:"# ç­æèè¿åè¯´",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"å»ç«åé",frontmatter:{title:"å»ç«åé",date:"2022-10-09T18:28:02.000Z",permalink:"/pages/2bb179/",categories:["çæ´»éå","å»æ¡æ¥è®°"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å»ç«åé"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/02.%E5%85%BB%E7%8C%AB%E5%8A%9D%E9%80%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å»ç«åé"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/02.%E5%85%BB%E7%8C%AB%E5%8A%9D%E9%80%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T18:28:02.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å»ç«åé"},{itemprop:"description",content:""}]},regularPath:"/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/02.%E5%85%BB%E7%8C%AB%E5%8A%9D%E9%80%80.html",relativePath:"02.çæ´»éå/01.å»æ¡æ¥è®°/02.å»ç«åé.md",key:"v-1efcbbda",path:"/pages/2bb179/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å»æ¡ç¬è®°",frontmatter:{title:"å»æ¡ç¬è®°",date:"2022-10-09T18:28:02.000Z",permalink:"/pages/b5e483/",categories:["çæ´»éå","å»æ¡æ¥è®°"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å»æ¡ç¬è®°"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/03.%E5%85%BB%E6%A1%83%E7%AC%94%E8%AE%B0.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å»æ¡ç¬è®°"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/03.%E5%85%BB%E6%A1%83%E7%AC%94%E8%AE%B0.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-10-09T18:28:02.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å»æ¡ç¬è®°"},{itemprop:"description",content:""}]},regularPath:"/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/03.%E5%85%BB%E6%A1%83%E7%AC%94%E8%AE%B0.html",relativePath:"02.çæ´»éå/01.å»æ¡æ¥è®°/03.å»æ¡ç¬è®°.md",key:"v-09ac84c7",path:"/pages/b5e483/",headers:[{level:2,title:"ç«èè®°å½",slug:"ç«èè®°å½",normalizedTitle:"ç«èè®°å½",charIndex:2},{level:2,title:"é©±è«è®°å½",slug:"é©±è«è®°å½",normalizedTitle:"é©±è«è®°å½",charIndex:11},{level:2,title:"",slug:"",normalizedTitle:"",charIndex:0}],headersStr:"ç«èè®°å½ é©±è«è®°å½ ",content:"# ç«èè®°å½\n\n\n# é©±è«è®°å½\n\n\n#",normalizedContent:"# ç«èè®°å½\n\n\n# é©±è«è®°å½\n\n\n#",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ä¹¦å",frontmatter:{title:"ä¹¦å",permalink:"/books/",date:"2022-04-19T11:33:04.000Z",article:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¹¦å"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/01.%E4%B9%A6%E5%8D%95.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¹¦å"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/01.%E4%B9%A6%E5%8D%95.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-04-19T11:33:04.000Z"},{itemprop:"name",content:"ä¹¦å"},{itemprop:"description",content:""}]},regularPath:"/04.%E9%98%85%E8%AF%BB/01.%E4%B9%A6%E5%8D%95.html",relativePath:"04.éè¯»/01.ä¹¦å.md",key:"v-7d5d8b2d",path:"/books/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"å³äº",frontmatter:{title:"å³äº",date:"2022-12-25T14:27:01.000Z",permalink:"/about/",sidebar:!1,article:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"å½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages",meta:[{name:"twitter:title",content:"å³äº"},{name:"twitter:description",content:"å½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å³äº"},{property:"og:description",content:"å½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages"},{property:"og:url",content:"https://fangfenghuang.github.io/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-12-25T14:27:01.000Z"},{itemprop:"name",content:"å³äº"},{itemprop:"description",content:"å½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages"}]},regularPath:"/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html",relativePath:"03.å³äº/01.å³äº.md",key:"v-4ed9e4ca",path:"/about/",headers:[{level:2,title:"å³äºæ¬ç«",slug:"å³äºæ¬ç«",normalizedTitle:"å³äºæ¬ç«",charIndex:2},{level:2,title:"å³äºæ",slug:"å³äºæ",normalizedTitle:"å³äºæ",charIndex:129}],headersStr:"å³äºæ¬ç« å³äºæ",content:"# å³äºæ¬ç«\n\nä¸ä¸ªåºäºvuepress-theme-vdoing + github page + markdownçæçä¸ªäººç½ç«\n\nå½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages\n\ngithubå°å\n\n\n# å³äºæ\n\næçç®å",normalizedContent:"# å³äºæ¬ç«\n\nä¸ä¸ªåºäºvuepress-theme-vdoing + github page + markdownçæçä¸ªäººç½ç«\n\nå½åä»£ç ä¸ºåå®¢æºç ï¼åå®¢ç½é¡µä¸ºéæé¨ç½²ï¼åå¸åæ¯ï¼pages sourceï¼ä¸ºgh-pages\n\ngithubå°å\n\n\n# å³äºæ\n\næçç®å",charsets:{cjk:!0},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3},{title:"ä¼è´¨åå®¢",frontmatter:{title:"ä¼è´¨åå®¢",date:"2022-07-27T15:12:21.000Z",permalink:"/pages/yzbook/",categories:["éè¯»"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¼è´¨åå®¢"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/02.%E4%BC%98%E8%B4%A8%E5%8D%9A%E5%AE%A2.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¼è´¨åå®¢"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/02.%E4%BC%98%E8%B4%A8%E5%8D%9A%E5%AE%A2.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T15:12:21.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ä¼è´¨åå®¢"},{itemprop:"description",content:""}]},regularPath:"/04.%E9%98%85%E8%AF%BB/02.%E4%BC%98%E8%B4%A8%E5%8D%9A%E5%AE%A2.html",relativePath:"04.éè¯»/02.ä¼è´¨åå®¢.md",key:"v-6202dee6",path:"/pages/yzbook/",headers:[{level:2,title:"go",slug:"go",normalizedTitle:"go",charIndex:121},{level:2,title:"k8s",slug:"k8s",normalizedTitle:"k8s",charIndex:139},{level:2,title:"leetcode",slug:"leetcode",normalizedTitle:"leetcode",charIndex:248}],headersStr:"go k8s leetcode",content:"https://learn.lianglianglee.com/%E4%B8%93%E6%A0%8F/\n\nhttps://github1s.com/xmapst/kubefilebrowser/blob/HEAD/README.md\n\n\n# go\n\nè®²éå³Goè¯­è¨-å®\n\n\n# k8s\n\nhttps://cloudnative.to/blog/ äºåçç¤¾åº https://jimmysong.io/blog/ https://lib.jimmysong.io/blog/ äºåçèµæåº\n\n\n# leetcode\n\nhttps://github.com/honglei24/leetcode\n\nhttps://mojotv.cn/golang/golang-html5-websocket-remote-desktop golang python\n\näºä¸«è®²æ¢µ è¿ç»´ ææ¯\n\nhttps://houmin.cc/\n\nhttps://qiankunli.github.io/ æä¹¾å¤çåå®¢",normalizedContent:"https://learn.lianglianglee.com/%e4%b8%93%e6%a0%8f/\n\nhttps://github1s.com/xmapst/kubefilebrowser/blob/head/readme.md\n\n\n# go\n\nè®²éå³goè¯­è¨-å®\n\n\n# k8s\n\nhttps://cloudnative.to/blog/ äºåçç¤¾åº https://jimmysong.io/blog/ https://lib.jimmysong.io/blog/ äºåçèµæåº\n\n\n# leetcode\n\nhttps://github.com/honglei24/leetcode\n\nhttps://mojotv.cn/golang/golang-html5-websocket-remote-desktop golang python\n\näºä¸«è®²æ¢µ è¿ç»´ ææ¯\n\nhttps://houmin.cc/\n\nhttps://qiankunli.github.io/ æä¹¾å¤çåå®¢",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"ä¼è´¨å¼æºé¡¹ç®",frontmatter:{title:"ä¼è´¨å¼æºé¡¹ç®",date:"2022-07-27T15:12:21.000Z",permalink:"/pages/yzgihub/",categories:["éè¯»"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¼è´¨å¼æºé¡¹ç®"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/03.%E4%BC%98%E8%B4%A8%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¼è´¨å¼æºé¡¹ç®"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/04.%E9%98%85%E8%AF%BB/03.%E4%BC%98%E8%B4%A8%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T15:12:21.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ä¼è´¨å¼æºé¡¹ç®"},{itemprop:"description",content:""}]},regularPath:"/04.%E9%98%85%E8%AF%BB/03.%E4%BC%98%E8%B4%A8%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE.html",relativePath:"04.éè¯»/03.ä¼è´¨å¼æºé¡¹ç®.md",key:"v-18dfbaf2",path:"/pages/yzgihub/",headers:[{level:2,title:"é¢ç»",slug:"é¢ç»",normalizedTitle:"é¢ç»",charIndex:2},{level:2,title:"è½¯è",slug:"è½¯è",normalizedTitle:"è½¯è",charIndex:85}],headersStr:"é¢ç» è½¯è",content:"# é¢ç»\n\nhttps://github.com/CyC2018/CS-Notes ææ¯é¢è¯å¿å¤åºç¡ç¥è¯ãLeetcodeãè®¡ç®æºæä½ç³»ç»ãè®¡ç®æºç½ç»ãç³»ç»è®¾è®¡\n\n\n# è½¯è\n\nhttps://github.com/xxlllq/system_architect ç³»ç»æ¶æè®¾è®¡å¸å¤ä¹ èµæ",normalizedContent:"# é¢ç»\n\nhttps://github.com/cyc2018/cs-notes ææ¯é¢è¯å¿å¤åºç¡ç¥è¯ãleetcodeãè®¡ç®æºæä½ç³»ç»ãè®¡ç®æºç½ç»ãç³»ç»è®¾è®¡\n\n\n# è½¯è\n\nhttps://github.com/xxlllq/system_architect ç³»ç»æ¶æè®¾è®¡å¸å¤ä¹ èµæ",charsets:{cjk:!0},lastUpdated:"2022/10/09, 17:42:01",lastUpdatedTimestamp:1665308521e3},{title:"å½æ¡£",frontmatter:{archivesPage:!0,title:"å½æ¡£",permalink:"/archives/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å½æ¡£"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/archivesPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å½æ¡£"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/archivesPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"å½æ¡£"},{itemprop:"description",content:""}]},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-994f98d2",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"åç±»",frontmatter:{categoriesPage:!0,title:"åç±»",permalink:"/categories/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"åç±»"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/categoriesPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"åç±»"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/categoriesPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"åç±»"},{itemprop:"description",content:""}]},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-ea545412",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"æ ç­¾",frontmatter:{tagsPage:!0,title:"æ ç­¾",permalink:"/tags/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"æ ç­¾"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/tagsPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æ ç­¾"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/tagsPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"æ ç­¾"},{itemprop:"description",content:""}]},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-1d3069d2",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/27, 18:59:09",lastUpdatedTimestamp:1658919549e3},{title:"Home",frontmatter:{home:!0,heroText:"hff's blog",tagline:"å¤©éé¬å¤",bannerBg:"/img/bg.jpg",features:[{title:"ææ¯æè°",details:"å·¥ä½ãå­¦ä¹ ",link:"/tech/"},{title:"çæ´»éå",details:"ä¸ªäººãçæ´»",link:"/life/"}],readingShow:"top",description:"https://fangfenghuang.github.io/",meta:[{name:"twitter:title",content:"hff"},{name:"twitter:description",content:"https://fangfenghuang.github.io/"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/"},{property:"og:type",content:"website"},{property:"og:title",content:"hff"},{property:"og:description",content:"https://fangfenghuang.github.io/"},{property:"og:url",content:"https://fangfenghuang.github.io/"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"hff"},{itemprop:"description",content:"https://fangfenghuang.github.io/"}]},regularPath:"/",relativePath:"index.md",key:"v-0c8b6730",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/08/24, 18:07:47",lastUpdatedTimestamp:1661335667e3}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"å­¦ä¹ ",link:"/tech/"},{text:"çæ´»",link:"/life/",items:[{text:"å»æ¡æ¥è®°",link:"/pages/ythx/"}]},{text:"å³äº",link:"/about/"},{text:"ç´¢å¼",link:"/categories/",items:[{text:"åç±»",link:"/categories/"},{text:"æ ç­¾",link:"/tags/"},{text:"å½æ¡£",link:"/archives/"},{items:[{text:"github",link:"https://github.com/fangfenghuang"},{text:"scdn",link:"https://blog.csdn.net/qq_26572567"},{text:"ç¥ä¹",link:"https://www.zhihu.com/people/huangfangfeng-20"},{text:"linkin",link:"https://www.linkedin.com/"}]}]},{text:"éè¯»",link:"/books/",items:[{items:[{text:"ä¹¦å",link:"/books/"},{text:"çµå­ä¹¦",link:"/pages/dianzishu/"},{text:"ä¼è´¨åå®¢",link:"/pages/yzbook/"}]}]}],sidebarDepth:2,logo:"/img/logo.png",repo:"https://github.com/fangfenghuang/fangfenghuang.github.io",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",editLinks:!1,sidebarHoverTriggerOpen:!0,searchPlaceholder:"æä¸ ðº æç´¢",extendFrontmatter:{titleTag:"åå"},pageButton:!1,sidebar:{"/00.ç®å½é¡µ/":[["01.ææ¯æè°.md","ææ¯æè°","/tech/","åå"],["02.çæ´»éå.md","çæ´»éå","/life/","åå"]],catalogue:{"ææ¯æè°":"/tech/","çæ´»éå":"/life/"},"/01.ææ¯æè°/":[{title:"å¸¸ç¨æ»ç»",collapsable:!0,children:[["01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.md","ä¸äºå¸¸ç¨éç½®","/pages/yxcypz/","åå"],["01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.md","ä¸äºå·¥å·ç½ç«","/pages/yxgjwz/","åå"],["01.å¸¸ç¨æ»ç»/03.ä¸äºå·¥å·å®è£.md","ä¸äºå·¥å·å®è£","/pages/yxgjaz/","åå"],["01.å¸¸ç¨æ»ç»/04.markdownå¸¸ç¨è¯­æ³ç»ä»¶.md","markdownå¸¸ç¨è¯­æ³ç»ä»¶","/pages/markdown/","åå"]]},{title:"è¸©åè®°å½",collapsable:!0,children:[["02.è¸©åè®°å½/01.2022è¸©åè®°å½.md","2022è¸©åè®°å½","/pages/2022ckjl/","åå"]]},{title:"kubernetes",collapsable:!0,children:[["03.kubernetes/01.k8såºç¡.md","k8såºç¡","/pages/k8s01/","åå"],["03.kubernetes/02.k8så­å¨.md","k8så­å¨","/pages/k8s02/","åå"],["03.kubernetes/03.k8sç½ç».md","k8sç½ç»","/pages/k8s03/","åå"],["03.kubernetes/04.pod cgroupåèµæºéå¶.md","pod cgroupåèµæºéå¶","/pages/k8s04/","åå"],["03.kubernetes/05.æµééå¶.md","æµééå¶","/pages/k8s05/","åå"],["03.kubernetes/06.ç½ç»ç­ç¥calico.md","ç½ç»ç­ç¥calico","/pages/k8s06/","åå"],["03.kubernetes/07.grafanaåpromuthues.md","grafanaåpromuthues","/pages/k8s07/","åå"],["03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.md","etcdèç¹downæºæ°æ®æ¢å¤","/pages/k8s08/","åå"],["03.kubernetes/09.ceph.md","ceph","/pages/k8s09/","åå"],["03.kubernetes/10.chrony.md","chrony","/pages/k8s10/","åå"],["03.kubernetes/11.crd operator.md","crd operator","/pages/k8s11/","åå"],["03.kubernetes/12.criä¹containerd shimv2.md","criä¹containerd shimv2","/pages/k8s12/","åå"],["03.kubernetes/13.harbor.md","harbor","/pages/k8s13/","åå"],["03.kubernetes/14.helm chart.md","helm chart","/pages/k8s14/","åå"],["03.kubernetes/15.Loongnix mips64.md","Loongnix mips64","/pages/k8s15/","åå"],["03.kubernetes/16.openebs-lvm-localpv.md","openebs-lvm-localpv","/pages/k8s16/","åå"],["03.kubernetes/17.traefik-ingressroute.md","traefik-IngressRoute","/pages/ingressroute/","åå"],["03.kubernetes/18.DevOps.md","DevOps","/pages/devops/","åå"],["03.kubernetes/19.serverless.md","Serverless","/pages/serverless/","åå"],["03.kubernetes/20.k8så®¹å¨æéå¤ç.md","k8så®¹å¨æéå¤ç","/pages/k8s20/","åå"],{title:"k8sé¢è¯",collapsable:!0,children:[["03.kubernetes/301.k8sé¢è¯/01.1.md",1,"/pages/k8smianshi1/","åå"]]},{title:"kubevirt",collapsable:!0,children:[["03.kubernetes/302.kubevirt/01.kubevirtåç.md","kubevirtåç","/pages/kubevirtyuanli/","åå"],["03.kubernetes/302.kubevirt/02.kubevirté¨ç½².md","kubevirté¨ç½²","/pages/kubevirtdeploy/","åå"]]},{title:"kata-containers",collapsable:!0,children:[{title:"kataåè¯",collapsable:!0,children:[["03.kubernetes/303.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.md","kataåºæ¬åçä¸æ¶æ","/pages/kata1/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.md","kataç½ç»åå­å¨æä»¶ç³»ç»åæ","/pages/kata2/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.md","kata cgroupåèµæºéå¶","/pages/kata3/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/04.guest kernelåguestos.md","guest kernelåguestos","/pages/kata4/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/05.kata-monitorçæ§.md","kata-monitorçæ§","/pages/kata5/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.md","kataä½¿ç¨éå¶","/pages/kata6/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.md","å¶ä»ç¹æ§","/pages/kata7/","åå"],["03.kubernetes/303.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.md","ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾","/pages/kata8/","åå"]]},{title:"kataé¨ç½²",collapsable:!0,children:[["03.kubernetes/303.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.md","kata-deployé¨ç½²ãå¸è½½ä¸åçº§","/pages/kata0201/","åå"],["03.kubernetes/303.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.md","kata-deployåæ","/pages/kata0202/","åå"]]},{title:"kataåºç¨",collapsable:!0,children:[["03.kubernetes/303.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.md","å¸¸ç¨å½ä»¤","/pages/kata0401/","åå"],["03.kubernetes/303.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».md","kataä½¿ç¨é®é¢æ±æ»","/pages/kata0402/","åå"],["03.kubernetes/303.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.md","kataç¸å³éç½®åè·¯å¾","/pages/kata0403/","åå"],["03.kubernetes/303.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.md","kata debugä¸æ¥å¿","/pages/kata0404/","åå"]]},{title:"kataV3.0",collapsable:!0,children:[["03.kubernetes/303.kata-containers/05.kataV3.0/01.kata v3.0.md","kata3.0","/pages/kata0501/","åå"]]}]},{title:"docker",collapsable:!0,children:[["03.kubernetes/304.docker/01.buildxå¤å¹³å°æå»º.md","buildxå¤å¹³å°æå»º","/pages/docker01/","åå"],["03.kubernetes/304.docker/02.dockerfileæ¹æº.md","dockerfileæ¹æº","/pages/docker02/","åå"],["03.kubernetes/304.docker/03.dockeréå.md","dockeréå","/pages/docker03/","åå"],["03.kubernetes/304.docker/04.dockeréåä¼å.md","dockeréåä¼å","/pages/docker04/","åå"],["03.kubernetes/304.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.md","å¨Dockerä¸­è®¾ç½®æ¶åº","/pages/docker05/","åå"],["03.kubernetes/304.docker/06.dockeråºç¡.md","dockeråºç¡","/pages/docker06/","åå"]]},{title:"æ¥å¿éé",collapsable:!0,children:[["03.kubernetes/305.æ¥å¿éé/01.æ¥å¿ééæ¹æ¡.md","æ¥å¿ééæ¹æ¡","/pages/rzcjfa/","åå"],["03.kubernetes/305.æ¥å¿éé/02.fluentdéç½®.md","æ¥å¿ééæ¹æ¡","/pages/fluentd-log/","åå"],["03.kubernetes/305.æ¥å¿éé/03.eventsæä¹å.md","eventsæä¹å","/pages/fadb16/","åå"],["03.kubernetes/305.æ¥å¿éé/04.alertmanageræä¹å.md","alertmanageræä¹å","/pages/alert-log/","åå"],["03.kubernetes/305.æ¥å¿éé/05.loki.md","loki","/pages/loki/","åå"]]},{title:"GPU",collapsable:!0,children:[["03.kubernetes/306.GPU/01.nvidia-device-plugins.md","nvidia-device-plugin","/pages/gpu01/","åå"],["03.kubernetes/306.GPU/02.ç¬¬åèå¼vGPU.md","ç¬¬åèå¼vgpu","/pages/4paradigm/","åå"],["03.kubernetes/306.GPU/03.è¾è®¯gpu-manager.md","è¾è®¯gpu-manager","/pages/tencnt-cpu-manager/","åå"],["03.kubernetes/306.GPU/04.é¿égpu-share.md","é¿égpu-share","/pages/ali-gpushare/","åå"],["03.kubernetes/306.GPU/05.è±ä¼è¾¾é©±å¨å®è£.md","è±ä¼è¾¾é©±å¨å®è£","/pages/nvidiadevice/","åå"],["03.kubernetes/306.GPU/06.è¾è®¯äºqGPU.md","è¾è®¯äºqGPU","/pages/qgpu/","åå"]]}]},{title:"golang",collapsable:!0,children:[["04.golang/01.å¸¸ç¨è®¡ç®.md","å¸¸ç¨è®¡ç®","/pages/golang01/","åå"],["04.golang/02.golangé¢è¯é®é¢.md","golangé¢è¯é®é¢","/pages/golang02/","åå"],["04.golang/03.go-æé.md","go-æé","/pages/golang03/","åå"],["04.golang/04.go embed.md","go embed","/pages/golang04/","åå"],["04.golang/05.go-å°è£ç»§æ¿åå¤æ.md","go-å°è£ç»§æ¿åå¤æ","/pages/golang05/","åå"],["04.golang/06.go-æä»¶æä½.md","go-æä»¶æä½","/pages/golang06/","åå"],["04.golang/07.go-json.md","go-json","/pages/golang07/","åå"],["04.golang/08.go-sliceåç.md","go-sliceåç","/pages/golang08/","åå"],["04.golang/09.ginæ¡æ¶ä½¿ç¨sockjs-go.md","ginæ¡æ¶ä½¿ç¨sockjs-go","/pages/golang09/","åå"]]},{title:"python",collapsable:!0,children:[]},{title:"è®¡ç®æºç½ç»åºç¡",collapsable:!0,children:[["06.è®¡ç®æºç½ç»åºç¡/01.å³äºcgroup.md","å³äºcgroup","/pages/b5149c/","åå"],["06.è®¡ç®æºç½ç»åºç¡/02.å³äºcpuåå­.md","å³äºcpuåå­","/pages/95ef75/","åå"]]},{title:"èæå",collapsable:!0,children:[["07.èæå/01.å¼å¯ç¡¬ä»¶èæå.md","å¼å¯ç¡¬ä»¶èæå","/pages/6f3d25/","åå"],["07.èæå/02.èæååºç¡æ¦å¿µ.md","èæååºç¡æ¦å¿µ","/pages/697e48/","åå"],["07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.md","centosä½¿ç¨kvmåå»ºèææº","/pages/33705b/","åå"]]},{title:"è¿ç»´èæ¬",collapsable:!0,children:[["08.è¿ç»´èæ¬/01.Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³.md","Linuxç³»ç»ä¸çç¨æ·å®¡è®¡æ¹æ³","/pages/yhsjff/","åå"]]},{title:"è½¯èé«é¡¹",collapsable:!0,children:[["09.è½¯èé«é¡¹/01.æ¬è¯·ç­å¾.md","æ¬è¯·ç­å¾","/pages/jqdd/","åå"]]}],"/02.çæ´»éå/":[{title:"å»æ¡æ¥è®°",collapsable:!0,children:[["01.å»æ¡æ¥è®°/01.å»æ¡è±é.md","å»æ¡è±é","/pages/ythx","åå"],["01.å»æ¡æ¥è®°/02.å»ç«åé.md","å»ç«åé","/pages/2bb179/","åå"],["01.å»æ¡æ¥è®°/03.å»æ¡ç¬è®°.md","å»æ¡ç¬è®°","/pages/b5e483/","åå"]]},{title:"èè°±",collapsable:!0,children:[]}],"/03.å³äº/":[["01.å³äº.md","å³äº","/about/","åå"]],"/04.éè¯»/":[["01.ä¹¦å.md","ä¹¦å","/books/","åå"],["02.ä¼è´¨åå®¢.md","ä¼è´¨åå®¢","/pages/yzbook/","åå"],["03.ä¼è´¨å¼æºé¡¹ç®.md","ä¼è´¨å¼æºé¡¹ç®","/pages/yzgihub/","åå"]]},author:{name:"hff",link:"https://github.com/fangfenghuang"},blogger:{avatar:"/img/bg.jpeg",name:"hff",slogan:"ä¸ä¸ªæææ³çç¨åºç¿"},social:{icons:[{iconClass:"icon-github",title:"GitHub",link:"https://github.com/fangfenghuang"},{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:15068704759@163.com"},{iconClass:"icon-rss",title:"linkedin",link:"https://www.linkedin.com/in/huang-fangfeng-60887981/"}]},htmlModules:{homeSidebarB:'<div style="padding: 0.95rem">\n        <p style="\n          color: var(--textColor);\n          opacity: 0.9;\n          font-size: 20px;\n          font-weight: bold;\n          margin: 0 0 8px 0;\n        ">å¾®ä¿¡</p>\n        <img src="/img/weixin.jpg"  style="width:100%;" />\n        <p>\n        èç³»æ¹å¼:fangfeng_huang\n        </p>\n        </div>'},footer:{createYear:2022,copyrightInfo:'| <a rel="nofollow " target="_blank" href="https://github.com/fangfenghuang/fangfenghuang.GitHub.io">@fangfenghuang</a>'}}};var yc=t(94),Ec=t(95),_c=t(11);var xc={computed:{$filterPosts(){return this.$site.pages.filter(n=>{const{frontmatter:{pageComponent:e,article:t,home:r}}=n;return!(e||!1===t||!0===r)})},$sortPosts(){return(n=this.$filterPosts).sort((n,e)=>{const t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(_c.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(_c.a)(n,e)}),n;var n},$sortPostsByDate(){return(n=this.$filterPosts).sort((n,e)=>Object(_c.a)(n,e)),n;var n},$groupPosts(){return function(n){const e={},t={};for(let r=0,a=n.length;r<a;r++){const{frontmatter:{categories:a,tags:o}}=n[r];"array"===Object(_c.n)(a)&&a.forEach(t=>{t&&(e[t]||(e[t]=[]),e[t].push(n[r]))}),"array"===Object(_c.n)(o)&&o.forEach(e=>{e&&(t[e]||(t[e]=[]),t[e].push(n[r]))})}return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags(){return function(n){const e=[],t=[];for(let t in n.categories)e.push({key:t,length:n.categories[t].length});for(let e in n.tags)t.push({key:e,length:n.tags[e].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Kt.component(yc.default),Kt.component(Ec.default);function wc(n){return n.toString().padStart(2,"0")}t(237);Kt.component("Badge",()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,421))),Kt.component("CodeBlock",()=>Promise.resolve().then(t.bind(null,94))),Kt.component("CodeGroup",()=>Promise.resolve().then(t.bind(null,95)));t(238);var Ac,Cc,Bc,Tc,Pc=Object.defineProperty,Ic=Object.getOwnPropertySymbols,Sc=Object.prototype.hasOwnProperty,zc=Object.prototype.propertyIsEnumerable,Dc=(n,e,t)=>e in n?Pc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Oc=(n,e)=>{for(var t in e||(e={}))Sc.call(e,t)&&Dc(n,t,e[t]);if(Ic)for(var t of Ic(e))zc.call(e,t)&&Dc(n,t,e[t]);return n},jc=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},qc=(n,e,t)=>(jc(n,e,"read from private field"),t?t.call(n):e.get(n)),$c=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Mc=(n,e,t,r)=>(jc(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);const Fc=class{constructor(n,e,t,r=!0){$c(this,Ac,void 0),$c(this,Cc,void 0),Mc(this,Ac,{width:0,height:0});const{el:a,ctx:o}=Fc.initCanvas(n);this.el=a,this.ctx=o,Mc(this,Cc,r),this.size={width:e||window.innerWidth,height:t||window.innerHeight}}get size(){return Oc({},qc(this,Ac))}set size({width:n,height:e}){var t;if(qc(this,Ac).width===n&&qc(this,Ac).height===e)return;qc(this,Ac).width=n,qc(this,Ac).height=e;const r=null!=(t=qc(this,Cc)?window.devicePixelRatio:1)?t:1;this.el.width=Math.round(qc(this,Ac).width*r),this.el.height=Math.round(qc(this,Ac).height*r),this.el.style.width=qc(this,Ac).width+"px",this.el.style.height=qc(this,Ac).height+"px",qc(this,Cc)&&this.ctx.scale(r,r)}clear(){Fc.clearCanvas(this.ctx,Oc({},qc(this,Ac)))}to(n){n.ctx.drawImage(this.el,0,0,qc(this,Ac).width,qc(this,Ac).height)}handleResize(n){this.size={width:window.innerWidth,height:window.innerHeight}}static setCanvasStyle(n,e,t){const r=n.style,{zIndex:a=0,opacity:o=1}=e;r.position="fixed",r.top="0",r.left="0",r.zIndex=a.toString(),r.width=(t?t.width:n.width).toString()+"px",r.height=(t?t.height:n.height).toString()+"px",1!==o&&(r.opacity=o.toString()),r.pointerEvents="none"}static initCanvas(n){n||(n=document.createElement("canvas"));const e=n.getContext("2d");return{el:n,ctx:e}}static createOffscreenCanvas(){return new Fc}static clearCanvas(n,e){const{width:t,height:r}=e;n.clearRect(0,0,t,r)}};let Uc=Fc;Ac=new WeakMap,Cc=new WeakMap;class Rc{constructor(n,e,t,r=!0,a=!0,o={zIndex:0,opacity:1}){$c(this,Bc,void 0),$c(this,Tc,void 0),Mc(this,Bc,new Uc(n,e,t,r)),Uc.setCanvasStyle(qc(this,Bc).el,o,{width:e,height:t}),Mc(this,Tc,a?new Uc(void 0,e,t,r):null)}get size(){return qc(this,Bc).size}draw(n){var e;const t=null!=(e=qc(this,Tc))?e:qc(this,Bc);t.clear(),n(t.ctx,Oc({},t.size))}render(){qc(this,Tc)&&(qc(this,Bc).clear(),qc(this,Tc).to(qc(this,Bc)))}handleResize(n){qc(this,Bc).handleResize(n),qc(this,Tc)&&qc(this,Tc).handleResize(n)}clear(){qc(this,Bc).clear(),qc(this,Tc)&&qc(this,Tc).clear()}}Bc=new WeakMap,Tc=new WeakMap;var Lc,Nc=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Gc=(n,e,t)=>(Nc(n,e,"read from private field"),t?t.call(n):e.get(n));class Kc{constructor(){var n,e,t,r;((n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)})(this,Lc,void 0),n=this,e=Lc,t=new Map,Nc(n,e,"write to private field"),r?r.call(n,t):e.set(n,t)}add(n,e){var t;Gc(this,Lc).has(n)||Gc(this,Lc).set(n,new Set),null==(t=Gc(this,Lc).get(n))||t.add(e)}start(n){if(Gc(this,Lc).has(n))for(const e of Gc(this,Lc).get(n))window.addEventListener(n,e)}stop(n){if(Gc(this,Lc).has(n))for(const e of Gc(this,Lc).get(n))window.removeEventListener(n,e)}startAll(){for(const n of Gc(this,Lc).keys())this.start(n)}stopAll(){for(const n of Gc(this,Lc).keys())this.stop(n)}clear(){Gc(this,Lc).clear()}}function Vc(n){return!!n.touches}Lc=new WeakMap;class Hc{static randomFloat(n,e){return Math.random()*(e-n)+n}static randomInt(n,e){return Math.floor(Hc.randomFloat(n,e))}static choice(n){const e=n.length;return n[Math.floor(e*Math.random())]}static color(n="0123456789ABCDEF"){return"#"+Hc.choice(n)+Hc.choice(n)+Hc.choice(n)+Hc.choice(n)+Hc.choice(n)+Hc.choice(n)}}var Zc,Wc,Xc,Yc,Qc,Jc,nl,el,tl,rl,al,ol,il,sl,cl,ll,pl,dl,ul,ml,hl,gl,fl,vl,bl,kl=Object.defineProperty,yl=Object.getOwnPropertySymbols,El=Object.prototype.hasOwnProperty,_l=Object.prototype.propertyIsEnumerable,xl=(n,e,t)=>e in n?kl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wl=(n,e)=>{for(var t in e||(e={}))El.call(e,t)&&xl(n,t,e[t]);if(yl)for(var t of yl(e))_l.call(e,t)&&xl(n,t,e[t]);return n},Al=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Cl=(n,e,t)=>(Al(n,e,"read from private field"),t?t.call(n):e.get(n)),Bl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Tl=(n,e,t,r)=>(Al(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Pl=(n,e,t)=>(Al(n,e,"access private method"),t);class Il{constructor(n,e,t,r,a){Bl(this,Zc,void 0),Bl(this,Wc,void 0),Bl(this,Xc,void 0),this.size=t,this.color=r,Tl(this,Xc,0),Tl(this,Zc,a),Tl(this,Wc,e),this.position=wl({},n)}move(){var n,e,t,r;this.position.x=Math.sin(Cl(this,Zc))*Cl(this,Wc)+this.position.x,this.position.y=Math.cos(Cl(this,Zc))*Cl(this,Wc)+this.position.y+.3*Cl(this,Xc),(n=this,e=Xc,{set _(r){Tl(n,e,r,t)},get _(){return Cl(n,e,r)}})._++}shouleRemove(n){return this.position.x<0||this.position.x>n.width||this.position.y>n.height}}Zc=new WeakMap,Wc=new WeakMap,Xc=new WeakMap;Yc=new WeakMap;class Sl{static create(n,e,t,r,a,o){return new(this.shapeMap.get(n))(e,t,r,a,o)}}Sl.shapeMap=new Map([["star",class extends Il{constructor(n,e,t,r,a){super(n,e,t,r,a),Bl(this,Yc,0)}draw(n,e){n.fillStyle=this.color,n.beginPath();const t=2*this.size,r=this.size;for(let e=0;e<5;e++)n.lineTo(Math.cos((18+72*e-Cl(this,Yc))/180*Math.PI)*t+this.position.x,-Math.sin((18+72*e-Cl(this,Yc))/180*Math.PI)*t+this.position.y),n.lineTo(Math.cos((54+72*e-Cl(this,Yc))/180*Math.PI)*r+this.position.x,-Math.sin((54+72*e-Cl(this,Yc))/180*Math.PI)*r+this.position.y);n.fill(),Tl(this,Yc,Cl(this,Yc)+5)}}],["circle",class extends Il{draw(n,e){n.fillStyle=this.color,n.beginPath(),n.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),n.fill()}}]]);class zl{constructor(n,e,t,r){Bl(this,Qc,void 0),this.stopped=!1,Tl(this,Qc,new Set);for(let a=0;a<r;a++){const r=Sl.create(n,e,Hc.randomFloat(1,6),t,Hc.color("89ABCDEF"),Hc.randomFloat(Math.PI-1,Math.PI+1));Cl(this,Qc).add(r)}}move(n){for(const e of Cl(this,Qc))e.shouleRemove(n)?Cl(this,Qc).delete(e):e.move();0===Cl(this,Qc).size&&(this.stopped=!0)}draw(n,e){for(const t of Cl(this,Qc))t.draw(n,e)}}Qc=new WeakMap;class Dl{constructor({shape:n="star",size:e=2,numParticles:t=10}={},r={}){Bl(this,sl),Bl(this,ll),Bl(this,dl),Bl(this,ml),Bl(this,gl),Bl(this,vl),Bl(this,Jc,void 0),Bl(this,nl,void 0),Bl(this,el,void 0),Bl(this,tl,null),Bl(this,rl,new Set),Bl(this,al,!1),Bl(this,ol,void 0),Bl(this,il,new Kc),Tl(this,Jc,n),Tl(this,nl,e),Tl(this,el,t),Tl(this,ol,r),this.animate=this.animate.bind(this)}mount(n){Tl(this,tl,new Rc(n,window.innerWidth,window.innerHeight,!0,!0,Cl(this,ol))),Pl(this,sl,cl).call(this),function(n,{leftColor:e="#fff",rightColor:t="#444",leftBgColor:r="#35495e",rightBgColor:a="#00ffc0"}={}){console.log(`%c ${n} %c v0.3.3 a117dec %c`,`background: ${r}; padding: 2px; color: ${e}; font-weight: bold; text-transform: uppercase;`,`background: ${a}; padding: 2px; color: ${t}; font-weight: bold; text-transform: uppercase;`,"background: transparent")}("Theme Popper ð",{leftBgColor:"#ffb366"})}unmount(){Pl(this,ll,pl).call(this),Tl(this,al,!1)}animate(){if(Tl(this,al,!0),0===Cl(this,rl).size)return Tl(this,al,!1),void Cl(this,tl).clear();requestAnimationFrame(this.animate);for(const n of Cl(this,rl)){if(n.stopped)return void Cl(this,rl).delete(n);n.move(Cl(this,tl).size)}Cl(this,tl).draw((n,e)=>{for(const t of Cl(this,rl))t.draw(n,e)}),Cl(this,tl).render()}}Jc=new WeakMap,nl=new WeakMap,el=new WeakMap,tl=new WeakMap,rl=new WeakMap,al=new WeakMap,ol=new WeakMap,il=new WeakMap,sl=new WeakSet,cl=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?Cl(this,il).add("touchstart",Pl(this,dl,ul).bind(this)):Cl(this,il).add("mousedown",Pl(this,dl,ul).bind(this)),Cl(this,il).add("visibilitychange",Pl(this,gl,fl).bind(this)),Cl(this,il).add("resize",function(n,e,t){var r,a,o;void 0===e&&(e=50),void 0===t&&(t={});var i=null!=(r=t.isImmediate)&&r,s=null!=(a=t.callback)&&a,c=t.maxWait,l=Date.now(),p=[];function d(){if(void 0!==c){var n=Date.now()-l;if(n+e>=c)return c-n}return e}var u=function(){var e=[].slice.call(arguments),t=this;return new Promise((function(r,a){var c=i&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,l=Date.now(),!i){var r=n.apply(t,e);s&&s(r),p.forEach((function(n){return(0,n.resolve)(r)})),p=[]}}),d()),c){var u=n.apply(t,e);return s&&s(u),r(u)}p.push({resolve:r,reject:a})}))};return u.cancel=function(n){void 0!==o&&clearTimeout(o),p.forEach((function(e){return(0,e.reject)(n)})),p=[]},u}(Pl(this,ml,hl).bind(this),500)),Cl(this,il).startAll()},ll=new WeakSet,pl=function(){Cl(this,il).stopAll(),Cl(this,il).clear()},dl=new WeakSet,ul=function(n){const e={x:Vc(n)?n.touches[0].clientX:n.clientX,y:Vc(n)?n.touches[0].clientY:n.clientY},t=new zl(Cl(this,Jc),wl({},e),Cl(this,nl),Cl(this,el));Cl(this,rl).add(t),Cl(this,al)||Pl(this,vl,bl).call(this)},ml=new WeakSet,hl=function(n){Cl(this,tl).handleResize(n)},gl=new WeakSet,fl=function(n){Cl(this,rl).clear(),Tl(this,al,!1)},vl=new WeakSet,bl=function(){requestAnimationFrame(this.animate)};var Ol={name:"CursorEffects",data:()=>({popper:new Dl({shape:"star",size:2},{opacity:1,zIndex:999999999})}),mounted(){this.popper.mount(this.$el)},beforeDestroy(){this.popper.unmount()}},jl=Object(fc.a)(Ol,(function(){return(0,this._self._c)("canvas",{attrs:{id:"vuepress-canvas-cursor"}})}),[],!1,null,null,null).exports,ql={name:"ReadingProgress",data:()=>({readingTop:0,readingHeight:1,progressStyle:null,transform:void 0,running:!1}),watch:{$readingShow(){this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)}},mounted(){this.transform=this.getTransform(),this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)},beforeDestroy(){this.$readingShow&&window.removeEventListener("scroll",this.base)},methods:{base(){this.running||(this.running=!0,requestAnimationFrame(this.getReadingBase))},getReadingBase(){this.readingHeight=this.getReadingHeight()-this.getScreenHeight(),this.readingTop=this.getReadingTop(),this.progressStyle=this.getProgressStyle(),this.running=!1},getReadingHeight:()=>Math.max(document.body.scrollHeight,document.body.offsetHeight,0),getScreenHeight:()=>Math.max(window.innerHeight,document.documentElement.clientHeight,0),getReadingTop:()=>Math.max(window.pageYOffset,document.documentElement.scrollTop,0),getTransform(){const n=document.createElement("div");return["transform","-webkit-transform","-moz-transform","-o-transform","-ms-transform"].find(e=>e in n.style)||void 0},getProgressStyle(){const n=this.readingTop/this.readingHeight;switch(this.$readingShow){case"top":case"bottom":return this.transform?`${this.transform}: scaleX(${n})`:`width: ${100*n}%`;case"left":case"right":return this.transform?`${this.transform}: scaleY(${n})`:`height: ${100*n}%`;default:return null}}}},$l=(t(239),Object(fc.a)(ql,(function(){var n=this._self._c;return n("ClientOnly",[this.$readingShow?n("div",{staticClass:"reading-progress",class:this.$readingShow},[n("div",{staticClass:"progress",style:this.progressStyle})]):this._e()])}),[],!1,null,"3640397f",null).exports),Ml={props:{color:{required:!1,default:"rgb(66, 185, 131)"}}},Fl=(t(240),Object(fc.a)(Ml,(function(){return(0,this._self._c)("div",{staticClass:"spinner",style:{background:this.color}})}),[],!1,null,"1bbcb91a",null).exports);const Ul={name:"Mermaid",props:{id:{type:String,required:!1,default:()=>"diagram_"+Date.now()},graph:{type:String,required:!1}},data:()=>({svg:void 0}),computed:{graphData(){return this.graph?this.graph:this.$slots.default[0].text}},render(n){return void 0===this.svg?n("Loading"):n("div",{class:["mermaid-diagram"],domProps:{innerHTML:this.svg,style:"width: 100%"}})},mounted(){t.e(94).then(t.t.bind(null,329,7)).then(n=>{n.initialize({startOnLoad:!0}),n.render(this.id,this.graphData,n=>{this.svg=n})})},components:{Loading:Fl}};var Rl=[({Vue:n,options:e,router:t,siteData:r})=>{},({Vue:n,options:e,router:t,siteData:r})=>{r.pages.map(n=>{const{frontmatter:{date:e,author:t}}=n;"string"==typeof e&&"Z"===e.charAt(e.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return`${n.getUTCFullYear()}-${wc(n.getUTCMonth()+1)}-${wc(n.getUTCDate())} ${wc(n.getUTCHours())}:${wc(n.getUTCMinutes())}:${wc(n.getUTCSeconds())}`}(e)),t?n.author=t:r.themeConfig.author&&(n.author=r.themeConfig.author)}),n.mixin(xc)},{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{},({router:n})=>{"undefined"!=typeof window&&function(){var n=document.createElement("script"),e=window.location.protocol.split(":")[0];n.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()},({Vue:n})=>{n.component("CursorEffects",jl)},({Vue:n})=>{n.component($l.name,$l),n.mixin({computed:{$readingShow(){return this.$page.frontmatter.readingShow}}})},({router:n})=>{"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?f8fd5c4e21ca384b4785396a87bcc468";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),n.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))},({Vue:n})=>{n.component(Ul.name,Ul)}],Ll=["CursorEffects","ReadingProgress","PageInfo","BlockToggle"];class Nl extends class{constructor(){this.store=new Kt({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Kt.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Nl.prototype,{getPageAsyncComponent:os,getLayoutAsyncComponent:is,getAsyncComponent:ss,getVueComponent:cs});var Gl={install(n){const e=new Nl;n.$vuepress=e,n.prototype.$vuepress=e}};function Kl(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var Vl={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return ps("pageKey",e),Kt.component(e)||Kt.component(e,os(e)),Kt.component(e)?n(e):n("")}},Hl={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},Zl={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Wl=(t(241),t(242),Object(fc.a)(Zl,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Xl={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Kt.config.productionTip=!1,Kt.use(Gi),Kt.use(Gl),Kt.mixin(function(n,e,t=Kt){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const r=new(n(t.$vuepress.$get("siteData"))),a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(r)),o={};return Object.keys(a).reduce((n,e)=>(e.startsWith("$")&&(n[e]=a[e].get),n),o),{computed:o}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const r in n)"/"===r?t=n[r]:0===this.$page.path.indexOf(r)&&(e=n[r]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},kc)),Kt.component("Content",Vl),Kt.component("ContentSlotsDistributor",Hl),Kt.component("OutboundLink",Wl),Kt.component("ClientOnly",Xl),Kt.component("Layout",is("Layout")),Kt.component("NotFound",is("NotFound")),Kt.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.5",hash:"e539265"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:kc.routerBase||kc.base,t=new Gi({base:e,mode:"history",fallback:!1,routes:bc,scrollBehavior:(n,e,t)=>t||(n.hash?!Kt.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,r)=>{if(Kl(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";Kl(n,t)?r(t):r()}else r();else{const t=e.path+"/",a=e.path+".html";Kl(n,a)?r(a):Kl(n,t)?r(t):r()}})}(t);const r={};try{await Promise.all(Rl.filter(n=>"function"==typeof n).map(e=>e({Vue:Kt,options:r,router:t,siteData:kc,isServer:n})))}catch(n){console.error(n)}return{app:new Kt(Object.assign(r,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Ll.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);