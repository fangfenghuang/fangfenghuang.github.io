(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(n[o]=c[o]);for(p&&p(e);u.length;)u.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var n,e=0;e<a.length;e++){for(var t=a[e],o=!0,s=1;s<t.length;s++){var c=t[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),n=i(i.s=t[0]))}return n}var o={},r={1:0},a=[];function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(n){var e=[],t=r[n];if(0!==t)if(t)e.push(t[2]);else{var o=new Promise((function(e,o){t=r[n]=[e,o]}));e.push(t[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(n){return i.p+"assets/js/"+({}[n]||n)+"."+{2:"22dca872",3:"a92a42d1",4:"4db3c7ae",5:"3ff92d1d",6:"a40fb25e",7:"ad948ccb",8:"f50e1521",9:"5120c794",10:"5a582304",11:"858db8bd",12:"0a04da78",13:"8ce751fb",14:"3adaa259",15:"88752f46",16:"e0461061",17:"55ace30a",18:"36d25c9a",19:"da9cf193",20:"8238e31d",21:"888995f7",22:"dbf6d53d",23:"95572180",24:"dcbd09a8",25:"05f410fc",26:"c5f26a87",27:"830a605b",28:"6e0ee242",29:"975f55a2",30:"04a41aac",31:"17bb6b87",32:"c705e85f",33:"96da5912",34:"35b2b5b4",35:"4eaa7f07",36:"9bf2af9b",37:"d31bac04",38:"996c3388",39:"87ce54a2",40:"3b981353",41:"c78e7acb",42:"f950105e",43:"38e4f4bc",44:"a3a789d4",45:"0d4ca851",46:"d80ffa99",47:"7cd5f796",48:"6dc4dd5f",49:"785d2362",50:"521816c1",51:"14c44011",52:"517f26b3",53:"a565d056",54:"2547830f",55:"9a803376",56:"436894d8",57:"a634a9d5",58:"ceb51a75",59:"e8b9d79d",60:"36522f68",61:"72debe50",62:"faf8c816",63:"a258529f",64:"63031223",65:"66c44bf9",66:"e2e9e2f6",67:"235bfe68",68:"7f71a83e"}[n]+".js"}(n);var c=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=r[n];if(0!==t){if(t){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,t[1](c)}r[n]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=n,i.c=o,i.d=function(n,e,t){i.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},i.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,e){if(1&e&&(n=i(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)i.d(t,o,function(e){return n[e]}.bind(null,o));return t},i.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(e,"a",e),e},i.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},i.p="/",i.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;a.push([102,0]),t()}([function(n,e,t){"use strict";function o(n,e,t,o,r,a,i,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),o&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),i?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),r&&r.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(i)},l._ssrRegister=c):r&&(c=s?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(n,e){return c.call(e),p(n,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return o}))},function(n,e){n.exports=function(n){return"function"==typeof n}},function(n,e,t){var o=t(25),r=Function.prototype,a=r.bind,i=r.call,s=o&&a.bind(i,i);n.exports=o?function(n){return n&&s(n)}:function(n){return n&&function(){return i.apply(n,arguments)}}},function(n,e){var t=function(n){return n&&n.Math==Math&&n};n.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){var o=t(67),r="object"==typeof self&&self&&self.Object===Object&&self,a=o||r||Function("return this")();n.exports=a},function(n,e,t){var o=t(4);n.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e,t){var o=t(2),r=t(45),a=o({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return a(r(n),e)}},function(n,e,t){var o=t(1);n.exports=function(n){return"object"==typeof n?null!==n:o(n)}},function(n,e,t){var o=t(157),r=t(160);n.exports=function(n,e){var t=r(n,e);return o(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return o})),t.d(e,"b",(function(){return a})),t.d(e,"j",(function(){return i})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return p})),t.d(e,"c",(function(){return d})),t.d(e,"f",(function(){return u})),t.d(e,"l",(function(){return m})),t.d(e,"m",(function(){return f})),t.d(e,"d",(function(){return g})),t.d(e,"k",(function(){return v})),t.d(e,"n",(function(){return b})),t.d(e,"a",(function(){return y}));const o=/#.*$/,r=/\.(md|html)$/,a=/\/$/,i=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(o,"").replace(r,"")}function c(n){return i.test(n)}function l(n){return/^mailto:/.test(n)}function p(n){return/^tel:/.test(n)}function d(n){if(c(n))return n;if(!n)return"404";const e=n.match(o),t=e?e[0]:"",r=s(n);return a.test(r)?n:r+".html"+t}function u(n,e){const t=n.hash,r=function(n){const e=n&&n.match(o);if(e)return e[0]}(e);if(r&&t!==r)return!1;return s(n.path)===s(e)}function m(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){const o=n.charAt(0);if("/"===o)return n;if("?"===o||"#"===o)return e+n;const r=e.split("/");t&&r[r.length-1]||r.pop();const a=n.replace(/^\//,"").split("/");for(let n=0;n<a.length;n++){const e=a[n];".."===e?r.pop():"."!==e&&r.push(e)}""!==r[0]&&r.unshift("");return r.join("/")}(e,t));const o=s(e);for(let e=0;e<n.length;e++)if(s(n[e].regularPath)===o)return Object.assign({},n[e],{type:"page",path:d(n[e].path)});return console.error(`[vuepress] No matching page found for sidebar item "${e}"`),{}}function f(n,e,t,o){const{pages:r,themeConfig:a}=t,i=o&&a.locales&&a.locales[o]||a;if("auto"===(n.frontmatter.sidebar||i.sidebar||a.sidebar))return h(n);const s=i.sidebar||a.sidebar;if(s){const{base:t,config:o}=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(const o in e)if(0===(t=n,/(\.html|\/)$/.test(t)?t:t+"/").indexOf(encodeURI(o)))return{base:o,config:e[o]};var t;return{}}(e,s);return"auto"===o?h(n):o?o.map(n=>function n(e,t,o,r=1){if("string"==typeof e)return m(t,e,o);if(Array.isArray(e))return Object.assign(m(t,e[0],o),{title:e[1]});{r>3&&console.error("[vuepress] detected a too deep nested sidebar group.");const a=e.children||[];return 0===a.length&&e.path?Object.assign(m(t,e.path,o),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:a.map(e=>n(e,t,o,r+1)),collapsable:!1!==e.collapsable}}}(n,r,t)):[]}return[]}function h(n){const e=g(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map(e=>({type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}))}]}function g(n){let e;return(n=n.map(n=>Object.assign({},n))).forEach(n=>{2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)}),n.filter(n=>2===n.level)}function v(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function b(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function k(n){let e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function y(n,e){return k(e)-k(n)}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var o=t(14),r=t(142),a=t(143),i=o?o.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":i&&i in Object(n)?r(n):a(n)}},function(n,e,t){var o=t(6).Symbol;n.exports=o},function(n,e,t){var o=t(7),r=t(61),a=t(98),i=t(24),s=t(52),c=TypeError,l=Object.defineProperty,p=Object.getOwnPropertyDescriptor;e.f=o?a?function(n,e,t){if(i(n),e=s(e),i(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var o=p(n,e);o&&o.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:o.configurable,enumerable:"enumerable"in t?t.enumerable:o.enumerable,writable:!1})}return l(n,e,t)}:l:function(n,e,t){if(i(n),e=s(e),i(t),r)try{return l(n,e,t)}catch(n){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var o=t(3),r=t(1),a=function(n){return r(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?a(o[n]):o[n]&&o[n][e]}},function(n,e,t){var o=t(7),r=t(15),a=t(29);n.exports=o?function(n,e,t){return r.f(n,e,a(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var o=t(147),r=t(148),a=t(149),i=t(150),s=t(151);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var o=t(69);n.exports=function(n,e){for(var t=n.length;t--;)if(o(n[t][0],e))return t;return-1}},function(n,e,t){var o=t(10)(Object,"create");n.exports=o},function(n,e,t){var o=t(169);n.exports=function(n,e){var t=n.__data__;return o(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var o=t(40);n.exports=function(n){if("string"==typeof n||o(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var o,r;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(r="function"==typeof(o=function(){var n,e,t={version:"0.2.0"},o=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function r(n,e,t){return n<e?e:n>t?t:n}function a(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(o[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=r(n,o.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(o.barSelector),p=o.speed,d=o.easing;return c.offsetWidth,i((function(e){""===o.positionUsing&&(o.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var r;return(r="translate3d"===o.positionUsing?{transform:"translate3d("+a(n)+"%,0,0)"}:"translate"===o.positionUsing?{transform:"translate("+a(n)+"%,0)"}:{"margin-left":a(n)+"%"}).transition="all "+e+"ms "+t,r}(n,p,d)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+p+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),p)}),p)):setTimeout(e,p)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),o.trickleSpeed)};return o.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*r(Math.random()*e,.1,.95)),e=r(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*o.trickleRate)},n=0,e=0,t.promise=function(o){return o&&"resolved"!==o.state()?(0===e&&t.start(),n++,e++,o.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=o.template;var r,i=e.querySelector(o.barSelector),c=n?"-100":a(t.status||0),p=document.querySelector(o.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),o.showSpinner||(r=e.querySelector(o.spinnerSelector))&&u(r),p!=document.body&&l(p,"nprogress-custom-parent"),p.appendChild(e),e},t.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(o.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&u(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var i=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var o,r=n.length,a=e.charAt(0).toUpperCase()+e.slice(1);r--;)if((o=n[r]+a)in t)return o;return e}(t))}function o(n,e,o){e=t(e),n.style[e]=o}return function(n,e){var t,r,a=arguments;if(2==a.length)for(t in e)void 0!==(r=e[t])&&e.hasOwnProperty(t)&&o(n,t,r);else o(n,a[1],a[2])}}();function c(n,e){return("string"==typeof n?n:d(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=d(n),o=t+e;c(t,e)||(n.className=o.substring(1))}function p(n,e){var t,o=d(n);c(n,e)&&(t=o.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function d(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function u(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?o.call(e,t,e,n):o)||(n.exports=r)},function(n,e,t){var o=t(9),r=String,a=TypeError;n.exports=function(n){if(o(n))return n;throw a(r(n)+" is not an object")}},function(n,e,t){var o=t(4);n.exports=!o((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e,t){var o=t(43),r=t(51);n.exports=function(n){return o(r(n))}},function(n,e,t){var o=t(3),r=t(58),a=t(8),i=t(60),s=t(56),c=t(55),l=r("wks"),p=o.Symbol,d=p&&p.for,u=c?p:p&&p.withoutSetter||i;n.exports=function(n){if(!a(l,n)||!s&&"string"!=typeof l[n]){var e="Symbol."+n;s&&a(p,n)?l[n]=p[n]:l[n]=c&&d?d(e):u(e)}return l[n]}},function(n,e,t){var o=t(25),r=Function.prototype.call;n.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){var o=t(2),r=o({}.toString),a=o("".slice);n.exports=function(n){return a(r(n),8,-1)}},function(n,e,t){var o=t(3),r=t(32),a=o["__core-js_shared__"]||r("__core-js_shared__",{});n.exports=a},function(n,e,t){var o=t(3),r=Object.defineProperty;n.exports=function(n,e){try{r(o,n,{value:e,configurable:!0,writable:!0})}catch(t){o[n]=e}return e}},function(n,e,t){var o=t(141),r=t(12),a=Object.prototype,i=a.hasOwnProperty,s=a.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(n){return r(n)&&i.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var o=t(10)(t(6),"Map");n.exports=o},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var o=t(161),r=t(168),a=t(170),i=t(171),s=t(172);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var o=t(5),r=t(40),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(n,e){if(o(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!r(n))||(i.test(n)||!a.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var o=t(13),r=t(12);n.exports=function(n){return"symbol"==typeof n||r(n)&&"[object Symbol]"==o(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){var o=t(3),r=t(50).f,a=t(17),i=t(110),s=t(32),c=t(63),l=t(122);n.exports=function(n,e){var t,p,d,u,m,f=n.target,h=n.global,g=n.stat;if(t=h?o:g?o[f]||s(f,{}):(o[f]||{}).prototype)for(p in e){if(u=e[p],d=n.dontCallGetSet?(m=r(t,p))&&m.value:t[p],!l(h?p:f+(g?".":"#")+p,n.forced)&&void 0!==d){if(typeof u==typeof d)continue;c(u,d)}(n.sham||d&&d.sham)&&a(u,"sham",!0),i(t,p,u,n)}}},function(n,e,t){var o=t(2),r=t(4),a=t(30),i=Object,s=o("".split);n.exports=r((function(){return!i("z").propertyIsEnumerable(0)}))?function(n){return"String"==a(n)?s(n,""):i(n)}:i},function(n,e,t){var o=t(1),r=t(108),a=TypeError;n.exports=function(n){if(o(n))return n;throw a(r(n)+" is not a function")}},function(n,e,t){var o=t(51),r=Object;n.exports=function(n){return r(o(n))}},function(n,e){n.exports={}},function(n,e,t){var o=t(120);n.exports=function(n){return o(n.length)}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,i=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),p=Object.prototype.toString,d=Math.max,u=Math.min,m=function(){return l.Date.now()};function f(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function h(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==p.call(n)}(n))return NaN;if(f(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=f(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=r.test(n);return s||a.test(n)?i(n.slice(2),s?2:8):o.test(n)?NaN:+n}n.exports=function(n,e,t){var o,r,a,i,s,c,l=0,p=!1,g=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function b(e){var t=o,a=r;return o=r=void 0,l=e,i=n.apply(a,t)}function k(n){return l=n,s=setTimeout(_,e),p?b(n):i}function y(n){var t=n-c;return void 0===c||t>=e||t<0||g&&n-l>=a}function _(){var n=m();if(y(n))return E(n);s=setTimeout(_,function(n){var t=e-(n-c);return g?u(t,a-(n-l)):t}(n))}function E(n){return s=void 0,v&&o?b(n):(o=r=void 0,i)}function x(){var n=m(),t=y(n);if(o=arguments,r=this,c=n,t){if(void 0===s)return k(c);if(g)return s=setTimeout(_,e),b(c)}return void 0===s&&(s=setTimeout(_,e)),i}return e=h(e)||0,f(t)&&(p=!!t.leading,a=(g="maxWait"in t)?d(h(t.maxWait)||0,e):a,v="trailing"in t?!!t.trailing:v),x.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=r=s=void 0},x.flush=function(){return void 0===s?i:E(m())},x}},function(n,e,t){var o=t(7),r=t(28),a=t(104),i=t(29),s=t(26),c=t(52),l=t(8),p=t(61),d=Object.getOwnPropertyDescriptor;e.f=o?d:function(n,e){if(n=s(n),e=c(e),p)try{return d(n,e)}catch(n){}if(l(n,e))return i(!r(a.f,n,e),n[e])}},function(n,e){var t=TypeError;n.exports=function(n){if(null==n)throw t("Can't call method on "+n);return n}},function(n,e,t){var o=t(105),r=t(53);n.exports=function(n){var e=o(n,"string");return r(e)?e:e+""}},function(n,e,t){var o=t(16),r=t(1),a=t(54),i=t(55),s=Object;n.exports=i?function(n){return"symbol"==typeof n}:function(n){var e=o("Symbol");return r(e)&&a(e.prototype,s(n))}},function(n,e,t){var o=t(2);n.exports=o({}.isPrototypeOf)},function(n,e,t){var o=t(56);n.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){var o=t(57),r=t(4);n.exports=!!Object.getOwnPropertySymbols&&!r((function(){var n=Symbol();return!String(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},function(n,e,t){var o,r,a=t(3),i=t(106),s=a.process,c=a.Deno,l=s&&s.versions||c&&c.version,p=l&&l.v8;p&&(r=(o=p.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&i&&(!(o=i.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=i.match(/Chrome\/(\d+)/))&&(r=+o[1]),n.exports=r},function(n,e,t){var o=t(59),r=t(31);(n.exports=function(n,e){return r[n]||(r[n]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.0",mode:o?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e){n.exports=!1},function(n,e,t){var o=t(2),r=0,a=Math.random(),i=o(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+i(++r+a,36)}},function(n,e,t){var o=t(7),r=t(4),a=t(97);n.exports=!o&&!r((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){var o=t(2),r=t(1),a=t(31),i=o(Function.toString);r(a.inspectSource)||(a.inspectSource=function(n){return i(n)}),n.exports=a.inspectSource},function(n,e,t){var o=t(8),r=t(115),a=t(50),i=t(15);n.exports=function(n,e,t){for(var s=r(e),c=i.f,l=a.f,p=0;p<s.length;p++){var d=s[p];o(n,d)||t&&o(t,d)||c(n,d,l(e,d))}}},function(n,e,t){var o=t(119);n.exports=function(n){var e=+n;return e!=e||0===e?0:o(e)}},function(n,e,t){var o=t(2),r=t(24),a=t(129);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(n){}return function(t,o){return r(t),a(o),e?n(t,o):t.__proto__=o,t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,o=e.length,r=n.length;++t<o;)n[r+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var o=t(18),r=t(152),a=t(153),i=t(154),s=t(155),c=t(156);function l(n){var e=this.__data__=new o(n);this.size=e.size}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var o=t(13),r=t(35);n.exports=function(n){if(!r(n))return!1;var e=o(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var o=t(173),r=t(12);n.exports=function n(e,t,a,i,s){return e===t||(null==e||null==t||!r(e)&&!r(t)?e!=e&&t!=t:o(e,t,a,i,n,s))}},function(n,e,t){var o=t(74),r=t(176),a=t(75);n.exports=function(n,e,t,i,s,c){var l=1&t,p=n.length,d=e.length;if(p!=d&&!(l&&d>p))return!1;var u=c.get(n),m=c.get(e);if(u&&m)return u==e&&m==n;var f=-1,h=!0,g=2&t?new o:void 0;for(c.set(n,e),c.set(e,n);++f<p;){var v=n[f],b=e[f];if(i)var k=l?i(b,v,f,e,n,c):i(v,b,f,n,e,c);if(void 0!==k){if(k)continue;h=!1;break}if(g){if(!r(e,(function(n,e){if(!a(g,e)&&(v===n||s(v,n,t,i,c)))return g.push(e)}))){h=!1;break}}else if(v!==b&&!s(v,b,t,i,c)){h=!1;break}}return c.delete(n),c.delete(e),h}},function(n,e,t){var o=t(36),r=t(174),a=t(175);function i(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new o;++e<t;)this.add(n[e])}i.prototype.add=i.prototype.push=r,i.prototype.has=a,n.exports=i},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var o=t(186),r=t(192),a=t(80);n.exports=function(n){return a(n)?o(n):r(n)}},function(n,e,t){(function(n){var o=t(6),r=t(188),a=e&&!e.nodeType&&e,i=a&&"object"==typeof n&&n&&!n.nodeType&&n,s=i&&i.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||r;n.exports=c}).call(this,t(48)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var o=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var o=t(189),r=t(190),a=t(191),i=a&&a.isTypedArray,s=i?r(i):o;n.exports=s},function(n,e,t){var o=t(70),r=t(38);n.exports=function(n){return null!=n&&r(n.length)&&!o(n)}},function(n,e,t){var o=t(10)(t(6),"Set");n.exports=o},function(n,e,t){var o=t(35);n.exports=function(n){return n==n&&!o(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var o=t(85),r=t(22);n.exports=function(n,e){for(var t=0,a=(e=o(e,n)).length;null!=n&&t<a;)n=n[r(e[t++])];return t&&t==a?n:void 0}},function(n,e,t){var o=t(5),r=t(39),a=t(203),i=t(206);n.exports=function(n,e){return o(n)?n:r(n,e)?[n]:a(i(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var o=t(139),r=t(144),a=t(215),i=t(223),s=t(232),c=t(101),l=a((function(n){var e=c(n);return s(e)&&(e=void 0),i(o(n,1,s,!0),r(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var o=/["'&<>]/;n.exports=function(n){var e,t=""+n,r=o.exec(t);if(!r)return t;var a="",i=0,s=0;for(i=r.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==i&&(a+=t.substring(s,i)),s=i+1,a+=e}return s!==i?a+t.substring(s,i):a}},function(n,e,t){"use strict";t.r(e);var o={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},r=(t(235),t(0)),a=Object(r.a)(o,(function(){return(0,this._self._c)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=a.exports},function(n,e,t){"use strict";t.r(e);var o={name:"CodeGroup",data:()=>({codeTabs:[],activeCodeTabIndex:-1}),watch:{activeCodeTabIndex(n){this.codeTabs.forEach(n=>{n.elm.classList.remove("theme-code-block__active")}),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted(){this.codeTabs=(this.$slots.default||[]).filter(n=>Boolean(n.componentOptions)).map((n,e)=>(""===n.componentOptions.propsData.active&&(this.activeCodeTabIndex=e),{title:n.componentOptions.propsData.title,elm:n.elm})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab(n){this.activeCodeTabIndex=n}}},r=(t(236),t(0)),a=Object(r.a)(o,(function(){var n=this,e=n._self._c;return e("div",{staticClass:"theme-code-group"},[e("div",{staticClass:"theme-code-group__nav"},[e("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(t,o){return e("li",{key:t.title,staticClass:"theme-code-group__li"},[e("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":o===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(o)}}},[n._v("\n            "+n._s(t.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?e("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=a.exports},function(n,e){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){var o=t(3),r=t(9),a=o.document,i=r(a)&&r(a.createElement);n.exports=function(n){return i?a.createElement(n):{}}},function(n,e,t){var o=t(7),r=t(4);n.exports=o&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){var o=t(58),r=t(60),a=o("keys");n.exports=function(n){return a[n]||(a[n]=r(n))}},function(n,e,t){var o=t(2),r=t(8),a=t(26),i=t(117).indexOf,s=t(46),c=o([].push);n.exports=function(n,e){var t,o=a(n),l=0,p=[];for(t in o)!r(s,t)&&r(o,t)&&c(p,t);for(;e.length>l;)r(o,t=e[l++])&&(~i(p,t)||c(p,t));return p}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){n.exports=t(243)},function(n,e,t){"use strict";var o=t(42),r=t(123).left,a=t(124),i=t(57),s=t(125);o({target:"Array",proto:!0,forced:!a("reduce")||!s&&i>79&&i<83},{reduce:function(n){var e=arguments.length;return r(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!o.call({1:2},1);e.f=a?function(n){var e=r(this,n);return!!e&&e.enumerable}:o},function(n,e,t){var o=t(28),r=t(9),a=t(53),i=t(107),s=t(109),c=t(27),l=TypeError,p=c("toPrimitive");n.exports=function(n,e){if(!r(n)||a(n))return n;var t,c=i(n,p);if(c){if(void 0===e&&(e="default"),t=o(c,n,e),!r(t)||a(t))return t;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(n,e)}},function(n,e,t){var o=t(16);n.exports=o("navigator","userAgent")||""},function(n,e,t){var o=t(44);n.exports=function(n,e){var t=n[e];return null==t?void 0:o(t)}},function(n,e){var t=String;n.exports=function(n){try{return t(n)}catch(n){return"Object"}}},function(n,e,t){var o=t(28),r=t(1),a=t(9),i=TypeError;n.exports=function(n,e){var t,s;if("string"===e&&r(t=n.toString)&&!a(s=o(t,n)))return s;if(r(t=n.valueOf)&&!a(s=o(t,n)))return s;if("string"!==e&&r(t=n.toString)&&!a(s=o(t,n)))return s;throw i("Can't convert object to primitive value")}},function(n,e,t){var o=t(1),r=t(15),a=t(111),i=t(32);n.exports=function(n,e,t,s){s||(s={});var c=s.enumerable,l=void 0!==s.name?s.name:e;if(o(t)&&a(t,l,s),s.global)c?n[e]=t:i(e,t);else{try{s.unsafe?n[e]&&(c=!0):delete n[e]}catch(n){}c?n[e]=t:r.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n}},function(n,e,t){var o=t(4),r=t(1),a=t(8),i=t(7),s=t(112).CONFIGURABLE,c=t(62),l=t(113),p=l.enforce,d=l.get,u=Object.defineProperty,m=i&&!o((function(){return 8!==u((function(){}),"length",{value:8}).length})),f=String(String).split("String"),h=n.exports=function(n,e,t){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!a(n,"name")||s&&n.name!==e)&&(i?u(n,"name",{value:e,configurable:!0}):n.name=e),m&&t&&a(t,"arity")&&n.length!==t.arity&&u(n,"length",{value:t.arity});try{t&&a(t,"constructor")&&t.constructor?i&&u(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var o=p(n);return a(o,"source")||(o.source=f.join("string"==typeof e?e:"")),n};Function.prototype.toString=h((function(){return r(this)&&d(this).source||c(this)}),"toString")},function(n,e,t){var o=t(7),r=t(8),a=Function.prototype,i=o&&Object.getOwnPropertyDescriptor,s=r(a,"name"),c=s&&"something"===function(){}.name,l=s&&(!o||o&&i(a,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){var o,r,a,i=t(114),s=t(3),c=t(2),l=t(9),p=t(17),d=t(8),u=t(31),m=t(99),f=t(46),h=s.TypeError,g=s.WeakMap;if(i||u.state){var v=u.state||(u.state=new g),b=c(v.get),k=c(v.has),y=c(v.set);o=function(n,e){if(k(v,n))throw new h("Object already initialized");return e.facade=n,y(v,n,e),e},r=function(n){return b(v,n)||{}},a=function(n){return k(v,n)}}else{var _=m("state");f[_]=!0,o=function(n,e){if(d(n,_))throw new h("Object already initialized");return e.facade=n,p(n,_,e),e},r=function(n){return d(n,_)?n[_]:{}},a=function(n){return d(n,_)}}n.exports={set:o,get:r,has:a,enforce:function(n){return a(n)?r(n):o(n,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=r(e)).type!==n)throw h("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){var o=t(3),r=t(1),a=t(62),i=o.WeakMap;n.exports=r(i)&&/native code/.test(a(i))},function(n,e,t){var o=t(16),r=t(2),a=t(116),i=t(121),s=t(24),c=r([].concat);n.exports=o("Reflect","ownKeys")||function(n){var e=a.f(s(n)),t=i.f;return t?c(e,t(n)):e}},function(n,e,t){var o=t(100),r=t(96).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return o(n,r)}},function(n,e,t){var o=t(26),r=t(118),a=t(47),i=function(n){return function(e,t,i){var s,c=o(e),l=a(c),p=r(i,l);if(n&&t!=t){for(;l>p;)if((s=c[p++])!=s)return!0}else for(;l>p;p++)if((n||p in c)&&c[p]===t)return n||p||0;return!n&&-1}};n.exports={includes:i(!0),indexOf:i(!1)}},function(n,e,t){var o=t(64),r=Math.max,a=Math.min;n.exports=function(n,e){var t=o(n);return t<0?r(t+e,0):a(t,e)}},function(n,e){var t=Math.ceil,o=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?o:t)(e)}},function(n,e,t){var o=t(64),r=Math.min;n.exports=function(n){return n>0?r(o(n),9007199254740991):0}},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e,t){var o=t(4),r=t(1),a=/#|\.prototype\./,i=function(n,e){var t=c[s(n)];return t==p||t!=l&&(r(e)?o(e):!!e)},s=i.normalize=function(n){return String(n).replace(a,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",p=i.POLYFILL="P";n.exports=i},function(n,e,t){var o=t(44),r=t(45),a=t(43),i=t(47),s=TypeError,c=function(n){return function(e,t,c,l){o(t);var p=r(e),d=a(p),u=i(p),m=n?u-1:0,f=n?-1:1;if(c<2)for(;;){if(m in d){l=d[m],m+=f;break}if(m+=f,n?m<0:u<=m)throw s("Reduce of empty array with no initial value")}for(;n?m>=0:u>m;m+=f)m in d&&(l=t(l,d[m],m,p));return l}};n.exports={left:c(!1),right:c(!0)}},function(n,e,t){"use strict";var o=t(4);n.exports=function(n,e){var t=[][n];return!!t&&o((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){var o=t(30),r=t(3);n.exports="process"==o(r.process)},function(n,e,t){var o=t(42),r=t(3),a=t(127),i=t(128),s=r.WebAssembly,c=7!==Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=i(n,e,c),o({global:!0,constructor:!0,arity:1,forced:c},t)},p=function(n,e){if(s&&s[n]){var t={};t[n]=i("WebAssembly."+n,e,c),o({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:c},t)}};l("Error",(function(n){return function(e){return a(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return a(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return a(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return a(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return a(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return a(n,this,arguments)}})),l("URIError",(function(n){return function(e){return a(n,this,arguments)}})),p("CompileError",(function(n){return function(e){return a(n,this,arguments)}})),p("LinkError",(function(n){return function(e){return a(n,this,arguments)}})),p("RuntimeError",(function(n){return function(e){return a(n,this,arguments)}}))},function(n,e,t){var o=t(25),r=Function.prototype,a=r.apply,i=r.call;n.exports="object"==typeof Reflect&&Reflect.apply||(o?i.bind(a):function(){return i.apply(a,arguments)})},function(n,e,t){"use strict";var o=t(16),r=t(8),a=t(17),i=t(54),s=t(65),c=t(63),l=t(130),p=t(131),d=t(132),u=t(136),m=t(137),f=t(138),h=t(7),g=t(59);n.exports=function(n,e,t,v){var b=v?2:1,k=n.split("."),y=k[k.length-1],_=o.apply(null,k);if(_){var E=_.prototype;if(!g&&r(E,"cause")&&delete E.cause,!t)return _;var x=o("Error"),w=e((function(n,e){var t=d(v?e:n,void 0),o=v?new _(n):new _;return void 0!==t&&a(o,"message",t),f&&a(o,"stack",m(o.stack,2)),this&&i(E,this)&&p(o,this,w),arguments.length>b&&u(o,arguments[b]),o}));if(w.prototype=E,"Error"!==y?s?s(w,x):c(w,x,{name:!0}):h&&"stackTraceLimit"in _&&(l(w,_,"stackTraceLimit"),l(w,_,"prepareStackTrace")),c(w,_),!g)try{E.name!==y&&a(E,"name",y),E.constructor=w}catch(n){}return w}}},function(n,e,t){var o=t(1),r=String,a=TypeError;n.exports=function(n){if("object"==typeof n||o(n))return n;throw a("Can't set "+r(n)+" as a prototype")}},function(n,e,t){var o=t(15).f;n.exports=function(n,e,t){t in n||o(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){var o=t(1),r=t(9),a=t(65);n.exports=function(n,e,t){var i,s;return a&&o(i=e.constructor)&&i!==t&&r(s=i.prototype)&&s!==t.prototype&&a(n,s),n}},function(n,e,t){var o=t(133);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:o(n)}},function(n,e,t){var o=t(134),r=String;n.exports=function(n){if("Symbol"===o(n))throw TypeError("Cannot convert a Symbol value to a string");return r(n)}},function(n,e,t){var o=t(135),r=t(1),a=t(30),i=t(27)("toStringTag"),s=Object,c="Arguments"==a(function(){return arguments}());n.exports=o?a:function(n){var e,t,o;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=s(n),i))?t:c?a(e):"Object"==(o=a(e))&&r(e.callee)?"Arguments":o}},function(n,e,t){var o={};o[t(27)("toStringTag")]="z",n.exports="[object z]"===String(o)},function(n,e,t){var o=t(9),r=t(17);n.exports=function(n,e){o(e)&&"cause"in e&&r(n,"cause",e.cause)}},function(n,e,t){var o=t(2),r=Error,a=o("".replace),i=String(r("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(i);n.exports=function(n,e){if(c&&"string"==typeof n&&!r.prepareStackTrace)for(;e--;)n=a(n,s,"");return n}},function(n,e,t){var o=t(4),r=t(29);n.exports=!o((function(){var n=Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",r(1,7)),7!==n.stack)}))},function(n,e,t){var o=t(66),r=t(140);n.exports=function n(e,t,a,i,s){var c=-1,l=e.length;for(a||(a=r),s||(s=[]);++c<l;){var p=e[c];t>0&&a(p)?t>1?n(p,t-1,a,i,s):o(s,p):i||(s[s.length]=p)}return s}},function(n,e,t){var o=t(14),r=t(33),a=t(5),i=o?o.isConcatSpreadable:void 0;n.exports=function(n){return a(n)||r(n)||!!(i&&n&&n[i])}},function(n,e,t){var o=t(13),r=t(12);n.exports=function(n){return r(n)&&"[object Arguments]"==o(n)}},function(n,e,t){var o=t(14),r=Object.prototype,a=r.hasOwnProperty,i=r.toString,s=o?o.toStringTag:void 0;n.exports=function(n){var e=a.call(n,s),t=n[s];try{n[s]=void 0;var o=!0}catch(n){}var r=i.call(n);return o&&(e?n[s]=t:delete n[s]),r}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var o=t(145),r=t(201),a=t(41),i=t(5),s=t(212);n.exports=function(n){return"function"==typeof n?n:null==n?a:"object"==typeof n?i(n)?r(n[0],n[1]):o(n):s(n)}},function(n,e,t){var o=t(146),r=t(200),a=t(83);n.exports=function(n){var e=r(n);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(t){return t===n||o(t,n,e)}}},function(n,e,t){var o=t(68),r=t(72);n.exports=function(n,e,t,a){var i=t.length,s=i,c=!a;if(null==n)return!s;for(n=Object(n);i--;){var l=t[i];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++i<s;){var p=(l=t[i])[0],d=n[p],u=l[1];if(c&&l[2]){if(void 0===d&&!(p in n))return!1}else{var m=new o;if(a)var f=a(d,u,p,n,e,m);if(!(void 0===f?r(u,d,3,a,m):f))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var o=t(19),r=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=o(e,n);return!(t<0)&&(t==e.length-1?e.pop():r.call(e,t,1),--this.size,!0)}},function(n,e,t){var o=t(19);n.exports=function(n){var e=this.__data__,t=o(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var o=t(19);n.exports=function(n){return o(this.__data__,n)>-1}},function(n,e,t){var o=t(19);n.exports=function(n,e){var t=this.__data__,r=o(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}},function(n,e,t){var o=t(18);n.exports=function(){this.__data__=new o,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var o=t(18),r=t(34),a=t(36);n.exports=function(n,e){var t=this.__data__;if(t instanceof o){var i=t.__data__;if(!r||i.length<199)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new a(i)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var o=t(70),r=t(158),a=t(35),i=t(71),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,d=l.hasOwnProperty,u=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!a(n)||r(n))&&(o(n)?u:s).test(i(n))}},function(n,e,t){var o,r=t(159),a=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";n.exports=function(n){return!!a&&a in n}},function(n,e,t){var o=t(6)["__core-js_shared__"];n.exports=o},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var o=t(162),r=t(18),a=t(34);n.exports=function(){this.size=0,this.__data__={hash:new o,map:new(a||r),string:new o}}},function(n,e,t){var o=t(163),r=t(164),a=t(165),i=t(166),s=t(167);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var o=n[e];this.set(o[0],o[1])}}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=i,c.prototype.set=s,n.exports=c},function(n,e,t){var o=t(20);n.exports=function(){this.__data__=o?o(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var o=t(20),r=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(o){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return r.call(e,n)?e[n]:void 0}},function(n,e,t){var o=t(20),r=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return o?void 0!==e[n]:r.call(e,n)}},function(n,e,t){var o=t(20);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=o&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var o=t(21);n.exports=function(n){var e=o(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var o=t(21);n.exports=function(n){return o(this,n).get(n)}},function(n,e,t){var o=t(21);n.exports=function(n){return o(this,n).has(n)}},function(n,e,t){var o=t(21);n.exports=function(n,e){var t=o(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}},function(n,e,t){var o=t(68),r=t(73),a=t(177),i=t(180),s=t(196),c=t(5),l=t(77),p=t(79),d="[object Object]",u=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,f,h){var g=c(n),v=c(e),b=g?"[object Array]":s(n),k=v?"[object Array]":s(e),y=(b="[object Arguments]"==b?d:b)==d,_=(k="[object Arguments]"==k?d:k)==d,E=b==k;if(E&&l(n)){if(!l(e))return!1;g=!0,y=!1}if(E&&!y)return h||(h=new o),g||p(n)?r(n,e,t,m,f,h):a(n,e,b,t,m,f,h);if(!(1&t)){var x=y&&u.call(n,"__wrapped__"),w=_&&u.call(e,"__wrapped__");if(x||w){var C=x?n.value():n,A=w?e.value():e;return h||(h=new o),f(C,A,t,m,h)}}return!!E&&(h||(h=new o),i(n,e,t,m,f,h))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length;++t<o;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var o=t(14),r=t(178),a=t(69),i=t(73),s=t(179),c=t(37),l=o?o.prototype:void 0,p=l?l.valueOf:void 0;n.exports=function(n,e,t,o,l,d,u){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!d(new r(n),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var m=s;case"[object Set]":var f=1&o;if(m||(m=c),n.size!=e.size&&!f)return!1;var h=u.get(n);if(h)return h==e;o|=2,u.set(n,e);var g=i(m(n),m(e),o,l,d,u);return u.delete(n),g;case"[object Symbol]":if(p)return p.call(n)==p.call(e)}return!1}},function(n,e,t){var o=t(6).Uint8Array;n.exports=o},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,o){t[++e]=[o,n]})),t}},function(n,e,t){var o=t(181),r=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,a,i,s){var c=1&t,l=o(n),p=l.length;if(p!=o(e).length&&!c)return!1;for(var d=p;d--;){var u=l[d];if(!(c?u in e:r.call(e,u)))return!1}var m=s.get(n),f=s.get(e);if(m&&f)return m==e&&f==n;var h=!0;s.set(n,e),s.set(e,n);for(var g=c;++d<p;){var v=n[u=l[d]],b=e[u];if(a)var k=c?a(b,v,u,e,n,s):a(v,b,u,n,e,s);if(!(void 0===k?v===b||i(v,b,t,a,s):k)){h=!1;break}g||(g="constructor"==u)}if(h&&!g){var y=n.constructor,_=e.constructor;y==_||!("constructor"in n)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(h=!1)}return s.delete(n),s.delete(e),h}},function(n,e,t){var o=t(182),r=t(183),a=t(76);n.exports=function(n){return o(n,a,r)}},function(n,e,t){var o=t(66),r=t(5);n.exports=function(n,e,t){var a=e(n);return r(n)?a:o(a,t(n))}},function(n,e,t){var o=t(184),r=t(185),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(n){return null==n?[]:(n=Object(n),o(i(n),(function(e){return a.call(n,e)})))}:r;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length,r=0,a=[];++t<o;){var i=n[t];e(i,t,n)&&(a[r++]=i)}return a}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var o=t(187),r=t(33),a=t(5),i=t(77),s=t(78),c=t(79),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=a(n),p=!t&&r(n),d=!t&&!p&&i(n),u=!t&&!p&&!d&&c(n),m=t||p||d||u,f=m?o(n.length,String):[],h=f.length;for(var g in n)!e&&!l.call(n,g)||m&&("length"==g||d&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,h))||f.push(g);return f}},function(n,e){n.exports=function(n,e){for(var t=-1,o=Array(n);++t<n;)o[t]=e(t);return o}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var o=t(13),r=t(38),a=t(12),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(n){return a(n)&&r(n.length)&&!!i[o(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var o=t(67),r=e&&!e.nodeType&&e,a=r&&"object"==typeof n&&n&&!n.nodeType&&n,i=a&&a.exports===r&&o.process,s=function(){try{var n=a&&a.require&&a.require("util").types;return n||i&&i.binding&&i.binding("util")}catch(n){}}();n.exports=s}).call(this,t(48)(n))},function(n,e,t){var o=t(193),r=t(194),a=Object.prototype.hasOwnProperty;n.exports=function(n){if(!o(n))return r(n);var e=[];for(var t in Object(n))a.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var o=t(195)(Object.keys,Object);n.exports=o},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var o=t(197),r=t(34),a=t(198),i=t(81),s=t(199),c=t(13),l=t(71),p=l(o),d=l(r),u=l(a),m=l(i),f=l(s),h=c;(o&&"[object DataView]"!=h(new o(new ArrayBuffer(1)))||r&&"[object Map]"!=h(new r)||a&&"[object Promise]"!=h(a.resolve())||i&&"[object Set]"!=h(new i)||s&&"[object WeakMap]"!=h(new s))&&(h=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,o=t?l(t):"";if(o)switch(o){case p:return"[object DataView]";case d:return"[object Map]";case u:return"[object Promise]";case m:return"[object Set]";case f:return"[object WeakMap]"}return e}),n.exports=h},function(n,e,t){var o=t(10)(t(6),"DataView");n.exports=o},function(n,e,t){var o=t(10)(t(6),"Promise");n.exports=o},function(n,e,t){var o=t(10)(t(6),"WeakMap");n.exports=o},function(n,e,t){var o=t(82),r=t(76);n.exports=function(n){for(var e=r(n),t=e.length;t--;){var a=e[t],i=n[a];e[t]=[a,i,o(i)]}return e}},function(n,e,t){var o=t(72),r=t(202),a=t(209),i=t(39),s=t(82),c=t(83),l=t(22);n.exports=function(n,e){return i(n)&&s(e)?c(l(n),e):function(t){var i=r(t,n);return void 0===i&&i===e?a(t,n):o(e,i,3)}}},function(n,e,t){var o=t(84);n.exports=function(n,e,t){var r=null==n?void 0:o(n,e);return void 0===r?t:r}},function(n,e,t){var o=t(204),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=o((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(r,(function(n,t,o,r){e.push(o?r.replace(a,"$1"):t||n)})),e}));n.exports=i},function(n,e,t){var o=t(205);n.exports=function(n){var e=o(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var o=t(36);function r(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var o=arguments,r=e?e.apply(this,o):o[0],a=t.cache;if(a.has(r))return a.get(r);var i=n.apply(this,o);return t.cache=a.set(r,i)||a,i};return t.cache=new(r.Cache||o),t}r.Cache=o,n.exports=r},function(n,e,t){var o=t(207);n.exports=function(n){return null==n?"":o(n)}},function(n,e,t){var o=t(14),r=t(208),a=t(5),i=t(40),s=o?o.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(a(e))return r(e,n)+"";if(i(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,o=null==n?0:n.length,r=Array(o);++t<o;)r[t]=e(n[t],t,n);return r}},function(n,e,t){var o=t(210),r=t(211);n.exports=function(n,e){return null!=n&&r(n,e,o)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var o=t(85),r=t(33),a=t(5),i=t(78),s=t(38),c=t(22);n.exports=function(n,e,t){for(var l=-1,p=(e=o(e,n)).length,d=!1;++l<p;){var u=c(e[l]);if(!(d=null!=n&&t(n,u)))break;n=n[u]}return d||++l!=p?d:!!(p=null==n?0:n.length)&&s(p)&&i(u,p)&&(a(n)||r(n))}},function(n,e,t){var o=t(213),r=t(214),a=t(39),i=t(22);n.exports=function(n){return a(n)?o(i(n)):r(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var o=t(84);n.exports=function(n){return function(e){return o(e,n)}}},function(n,e,t){var o=t(41),r=t(216),a=t(218);n.exports=function(n,e){return a(r(n,e,o),n+"")}},function(n,e,t){var o=t(217),r=Math.max;n.exports=function(n,e,t){return e=r(void 0===e?n.length-1:e,0),function(){for(var a=arguments,i=-1,s=r(a.length-e,0),c=Array(s);++i<s;)c[i]=a[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=a[i];return l[e]=t(c),o(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var o=t(219),r=t(222)(o);n.exports=r},function(n,e,t){var o=t(220),r=t(221),a=t(41),i=r?function(n,e){return r(n,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:a;n.exports=i},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var o=t(10),r=function(){try{var n=o(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=r},function(n,e){var t=Date.now;n.exports=function(n){var e=0,o=0;return function(){var r=t(),a=16-(r-o);if(o=r,a>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var o=t(74),r=t(224),a=t(229),i=t(75),s=t(230),c=t(37);n.exports=function(n,e,t){var l=-1,p=r,d=n.length,u=!0,m=[],f=m;if(t)u=!1,p=a;else if(d>=200){var h=e?null:s(n);if(h)return c(h);u=!1,p=i,f=new o}else f=e?[]:m;n:for(;++l<d;){var g=n[l],v=e?e(g):g;if(g=t||0!==g?g:0,u&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue n;e&&f.push(v),m.push(g)}else p(f,v,t)||(f!==m&&f.push(v),m.push(g))}return m}},function(n,e,t){var o=t(225);n.exports=function(n,e){return!!(null==n?0:n.length)&&o(n,e,0)>-1}},function(n,e,t){var o=t(226),r=t(227),a=t(228);n.exports=function(n,e,t){return e==e?a(n,e,t):o(n,r,t)}},function(n,e){n.exports=function(n,e,t,o){for(var r=n.length,a=t+(o?1:-1);o?a--:++a<r;)if(e(n[a],a,n))return a;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var o=t-1,r=n.length;++o<r;)if(n[o]===e)return o;return-1}},function(n,e){n.exports=function(n,e,t){for(var o=-1,r=null==n?0:n.length;++o<r;)if(t(e,n[o]))return!0;return!1}},function(n,e,t){var o=t(81),r=t(231),a=t(37),i=o&&1/a(new o([,-0]))[1]==1/0?function(n){return new o(n)}:r;n.exports=i},function(n,e){n.exports=function(){}},function(n,e,t){var o=t(80),r=t(12);n.exports=function(n){return r(n)&&o(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(86)},function(n,e,t){"use strict";t(87)},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(88)},function(n,e,t){"use strict";t(89)},function(n,e,t){"use strict";t(90)},function(n,e,t){"use strict";t(91)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.8
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var o=Object.freeze({}),r=Array.isArray;function a(n){return null==n}function i(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return"function"==typeof n}function p(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function u(n){return"[object Object]"===d.call(n)}function m(n){return"[object RegExp]"===d.call(n)}function f(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function h(n){return i(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function g(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===d?JSON.stringify(n,null,2):String(n)}function v(n){var e=parseFloat(n);return isNaN(e)?n:e}function b(n,e){for(var t=Object.create(null),o=n.split(","),r=0;r<o.length;r++)t[o[r]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}b("slot,component",!0);var k=b("key,ref,slot,slot-scope,is");function y(n,e){if(n.length){var t=n.indexOf(e);if(t>-1)return n.splice(t,1)}}var _=Object.prototype.hasOwnProperty;function E(n,e){return _.call(n,e)}function x(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var w=/-(\w)/g,C=x((function(n){return n.replace(w,(function(n,e){return e?e.toUpperCase():""}))})),A=x((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),B=/\B([A-Z])/g,T=x((function(n){return n.replace(B,"-$1").toLowerCase()}));var P=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var o=arguments.length;return o?o>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function S(n,e){e=e||0;for(var t=n.length-e,o=new Array(t);t--;)o[t]=n[t+e];return o}function O(n,e){for(var t in e)n[t]=e[t];return n}function I(n){for(var e={},t=0;t<n.length;t++)n[t]&&O(e,n[t]);return e}function D(n,e,t){}var z=function(n,e,t){return!1},j=function(n){return n};function q(n,e){if(n===e)return!0;var t=p(n),o=p(e);if(!t||!o)return!t&&!o&&String(n)===String(e);try{var r=Array.isArray(n),a=Array.isArray(e);if(r&&a)return n.length===e.length&&n.every((function(n,t){return q(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(r||a)return!1;var i=Object.keys(n),s=Object.keys(e);return i.length===s.length&&i.every((function(t){return q(n[t],e[t])}))}catch(n){return!1}}function M(n,e){for(var t=0;t<n.length;t++)if(q(n[t],e))return t;return-1}function $(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function F(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var R=["component","directive","filter"],L=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:z,isReservedAttr:z,isUnknownElement:z,getTagNamespace:D,parsePlatformTagName:j,mustUseProp:z,async:!0,_lifecycleHooks:L},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function V(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function K(n,e,t,o){Object.defineProperty(n,e,{value:t,enumerable:!!o,writable:!0,configurable:!0})}var G=new RegExp("[^".concat(U.source,".$_\\d]"));var Z="__proto__"in{},H="undefined"!=typeof window,W=H&&window.navigator.userAgent.toLowerCase(),X=W&&/msie|trident/.test(W),Y=W&&W.indexOf("msie 9.0")>0,Q=W&&W.indexOf("edge/")>0;W&&W.indexOf("android");var J=W&&/iphone|ipad|ipod|ios/.test(W);W&&/chrome\/\d+/.test(W),W&&/phantomjs/.test(W);var nn,en=W&&W.match(/firefox\/(\d+)/),tn={}.watch,on=!1;if(H)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){on=!0}}),window.addEventListener("test-passive",null,rn)}catch(n){}var an=function(){return void 0===nn&&(nn=!H&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),nn},sn=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function cn(n){return"function"==typeof n&&/native code/.test(n.toString())}var ln,pn="undefined"!=typeof Symbol&&cn(Symbol)&&"undefined"!=typeof Reflect&&cn(Reflect.ownKeys);ln="undefined"!=typeof Set&&cn(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var dn=null;function un(n){void 0===n&&(n=null),n||dn&&dn._scope.off(),dn=n,n&&n._scope.on()}var mn=function(){function n(n,e,t,o,r,a,i,s){this.tag=n,this.data=e,this.children=t,this.text=o,this.elm=r,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=i,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),fn=function(n){void 0===n&&(n="");var e=new mn;return e.text=n,e.isComment=!0,e};function hn(n){return new mn(void 0,void 0,void 0,String(n))}function gn(n){var e=new mn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}var vn=0,bn=function(){function n(){this.id=vn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){y(this.subs,n)},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.slice();for(var t=0,o=e.length;t<o;t++){e[t].update()}},n}();bn.target=null;var kn=[];function yn(n){kn.push(n),bn.target=n}function _n(){kn.pop(),bn.target=kn[kn.length-1]}var En=Array.prototype,xn=Object.create(En);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=En[n];K(xn,n,(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var r,a=e.apply(this,t),i=this.__ob__;switch(n){case"push":case"unshift":r=t;break;case"splice":r=t.slice(2)}return r&&i.observeArray(r),i.dep.notify(),a}))}));var wn=Object.getOwnPropertyNames(xn),Cn={},An=!0;function Bn(n){An=n}var Tn={notify:D,depend:D,addSub:D,removeSub:D},Pn=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?Tn:new bn,this.vmCount=0,K(n,"__ob__",this),r(n)){if(!t)if(Z)n.__proto__=xn;else for(var o=0,a=wn.length;o<a;o++){K(n,s=wn[o],xn[s])}e||this.observeArray(n)}else{var i=Object.keys(n);for(o=0;o<i.length;o++){var s;On(n,s=i[o],Cn,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)Sn(n[e],!1,this.mock)},n}();function Sn(n,e,t){var o;if(!(!p(n)||$n(n)||n instanceof mn))return E(n,"__ob__")&&n.__ob__ instanceof Pn?o=n.__ob__:!An||!t&&an()||!r(n)&&!u(n)||!Object.isExtensible(n)||n.__v_skip||(o=new Pn(n,e,t)),o}function On(n,e,t,o,a,i){var s=new bn,c=Object.getOwnPropertyDescriptor(n,e);if(!c||!1!==c.configurable){var l=c&&c.get,p=c&&c.set;l&&!p||t!==Cn&&2!==arguments.length||(t=n[e]);var d=!a&&Sn(t,!1,i);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=l?l.call(n):t;return bn.target&&(s.depend(),d&&(d.dep.depend(),r(e)&&zn(e))),$n(e)&&!a?e.value:e},set:function(e){var o=l?l.call(n):t;if(F(o,e)){if(p)p.call(n,e);else{if(l)return;if(!a&&$n(o)&&!$n(e))return void(o.value=e);t=e}d=!a&&Sn(e,!1,i),s.notify()}}}),s}}function In(n,e,t){if(!Mn(n)){var o=n.__ob__;return r(n)&&f(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),o&&!o.shallow&&o.mock&&Sn(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||o&&o.vmCount?t:o?(On(o.value,e,t,void 0,o.shallow,o.mock),o.dep.notify(),t):(n[e]=t,t)}}function Dn(n,e){if(r(n)&&f(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||Mn(n)||E(n,e)&&(delete n[e],t&&t.dep.notify())}}function zn(n){for(var e=void 0,t=0,o=n.length;t<o;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),r(e)&&zn(e)}function jn(n){return qn(n,!0),K(n,"__v_isShallow",!0),n}function qn(n,e){if(!Mn(n)){Sn(n,e,an());0}}function Mn(n){return!(!n||!n.__v_isReadonly)}function $n(n){return!(!n||!0!==n.__v_isRef)}function Fn(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if($n(n))return n.value;var o=n&&n.__ob__;return o&&o.dep.depend(),n},set:function(n){var o=e[t];$n(o)&&!$n(n)?o.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Rn;var Ln=function(){function n(n){void 0===n&&(n=!1),this.active=!0,this.effects=[],this.cleanups=[],!n&&Rn&&(this.parent=Rn,this.index=(Rn.scopes||(Rn.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Rn;try{return Rn=this,n()}finally{Rn=e}}else 0},n.prototype.on=function(){Rn=this},n.prototype.off=function(){Rn=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(this.parent&&!n){var o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}},n}();function Nn(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Un=x((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),o="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=o?n.slice(1):n,once:t,capture:o,passive:e}}));function Vn(n,e){function t(){var n=t.fns;if(!r(n))return Ae(n,null,arguments,e,"v-on handler");for(var o=n.slice(),a=0;a<o.length;a++)Ae(o[a],null,arguments,e,"v-on handler")}return t.fns=n,t}function Kn(n,e,t,o,r,i){var c,l,p,d;for(c in n)l=n[c],p=e[c],d=Un(c),a(l)||(a(p)?(a(l.fns)&&(l=n[c]=Vn(l,i)),s(d.once)&&(l=n[c]=r(d.name,l,d.capture)),t(d.name,l,d.capture,d.passive,d.params)):l!==p&&(p.fns=l,n[c]=p));for(c in e)a(n[c])&&o((d=Un(c)).name,e[c],d.capture)}function Gn(n,e,t){var o;n instanceof mn&&(n=n.data.hook||(n.data.hook={}));var r=n[e];function c(){t.apply(this,arguments),y(o.fns,c)}a(r)?o=Vn([c]):i(r.fns)&&s(r.merged)?(o=r).fns.push(c):o=Vn([r,c]),o.merged=!0,n[e]=o}function Zn(n,e,t,o,r){if(i(e)){if(E(e,t))return n[t]=e[t],r||delete e[t],!0;if(E(e,o))return n[t]=e[o],r||delete e[o],!0}return!1}function Hn(n){return c(n)?[hn(n)]:r(n)?function n(e,t){var o,l,p,d,u=[];for(o=0;o<e.length;o++)a(l=e[o])||"boolean"==typeof l||(p=u.length-1,d=u[p],r(l)?l.length>0&&(Wn((l=n(l,"".concat(t||"","_").concat(o)))[0])&&Wn(d)&&(u[p]=hn(d.text+l[0].text),l.shift()),u.push.apply(u,l)):c(l)?Wn(d)?u[p]=hn(d.text+l):""!==l&&u.push(hn(l)):Wn(l)&&Wn(d)?u[p]=hn(d.text+l.text):(s(e._isVList)&&i(l.tag)&&a(l.key)&&i(t)&&(l.key="__vlist".concat(t,"_").concat(o,"__")),u.push(l)));return u}(n):void 0}function Wn(n){return i(n)&&i(n.text)&&!1===n.isComment}function Xn(n,e){var t,o,a,s,c=null;if(r(n)||"string"==typeof n)for(c=new Array(n.length),t=0,o=n.length;t<o;t++)c[t]=e(n[t],t);else if("number"==typeof n)for(c=new Array(n),t=0;t<n;t++)c[t]=e(t+1,t);else if(p(n))if(pn&&n[Symbol.iterator]){c=[];for(var l=n[Symbol.iterator](),d=l.next();!d.done;)c.push(e(d.value,c.length)),d=l.next()}else for(a=Object.keys(n),c=new Array(a.length),t=0,o=a.length;t<o;t++)s=a[t],c[t]=e(n[s],s,t);return i(c)||(c=[]),c._isVList=!0,c}function Yn(n,e,t,o){var r,a=this.$scopedSlots[n];a?(t=t||{},o&&(t=O(O({},o),t)),r=a(t)||(l(e)?e():e)):r=this.$slots[n]||(l(e)?e():e);var i=t&&t.slot;return i?this.$createElement("template",{slot:i},r):r}function Qn(n){return Pt(this.$options,"filters",n,!0)||j}function Jn(n,e){return r(n)?-1===n.indexOf(e):n!==e}function ne(n,e,t,o,r){var a=N.keyCodes[e]||t;return r&&o&&!N.keyCodes[e]?Jn(r,o):a?Jn(a,n):o?T(o)!==e:void 0===n}function ee(n,e,t,o,a){if(t)if(p(t)){r(t)&&(t=I(t));var i=void 0,s=function(r){if("class"===r||"style"===r||k(r))i=n;else{var s=n.attrs&&n.attrs.type;i=o||N.mustUseProp(e,s,r)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=C(r),l=T(r);c in i||l in i||(i[r]=t[r],a&&((n.on||(n.on={}))["update:".concat(r)]=function(n){t[r]=n}))};for(var c in t)s(c)}else;return n}function te(n,e){var t=this._staticTrees||(this._staticTrees=[]),o=t[n];return o&&!e||re(o=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),o}function oe(n,e,t){return re(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function re(n,e,t){if(r(n))for(var o=0;o<n.length;o++)n[o]&&"string"!=typeof n[o]&&ae(n[o],"".concat(e,"_").concat(o),t);else ae(n,e,t)}function ae(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function ie(n,e){if(e)if(u(e)){var t=n.on=n.on?O({},n.on):{};for(var o in e){var r=t[o],a=e[o];t[o]=r?[].concat(r,a):a}}else;return n}function se(n,e,t,o){e=e||{$stable:!t};for(var a=0;a<n.length;a++){var i=n[a];r(i)?se(i,e,t):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return o&&(e.$key=o),e}function ce(n,e){for(var t=0;t<e.length;t+=2){var o=e[t];"string"==typeof o&&o&&(n[e[t]]=e[t+1])}return n}function le(n,e){return"string"==typeof n?e+n:n}function pe(n){n._o=oe,n._n=v,n._s=g,n._l=Xn,n._t=Yn,n._q=q,n._i=M,n._m=te,n._f=Qn,n._k=ne,n._b=ee,n._v=hn,n._e=fn,n._u=se,n._g=ie,n._d=ce,n._p=le}function de(n,e){if(!n||!n.length)return{};for(var t={},o=0,r=n.length;o<r;o++){var a=n[o],i=a.data;if(i&&i.attrs&&i.attrs.slot&&delete i.attrs.slot,a.context!==e&&a.fnContext!==e||!i||null==i.slot)(t.default||(t.default=[])).push(a);else{var s=i.slot,c=t[s]||(t[s]=[]);"template"===a.tag?c.push.apply(c,a.children||[]):c.push(a)}}for(var l in t)t[l].every(ue)&&delete t[l];return t}function ue(n){return n.isComment&&!n.asyncFactory||" "===n.text}function me(n){return n.isComment&&n.asyncFactory}function fe(n,e,t,r){var a,i=Object.keys(t).length>0,s=e?!!e.$stable:!i,c=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==o&&c===r.$key&&!i&&!r.$hasNormal)return r;for(var l in a={},e)e[l]&&"$"!==l[0]&&(a[l]=he(n,t,l,e[l]))}else a={};for(var p in t)p in a||(a[p]=ge(t,p));return e&&Object.isExtensible(e)&&(e._normalized=a),K(a,"$stable",s),K(a,"$key",c),K(a,"$hasNormal",i),a}function he(n,e,t,o){var a=function(){var e=dn;un(n);var t=arguments.length?o.apply(null,arguments):o({}),a=(t=t&&"object"==typeof t&&!r(t)?[t]:Hn(t))&&t[0];return un(e),t&&(!a||1===t.length&&a.isComment&&!me(a))?void 0:t};return o.proxy&&Object.defineProperty(e,t,{get:a,enumerable:!0,configurable:!0}),a}function ge(n,e){return function(){return n[e]}}function ve(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};K(e,"_v_attr_proxy",!0),be(e,n.$attrs,o,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||be(n._listenersProxy={},n.$listeners,o,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||ye(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:P(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return Fn(n,e,t)}))}}}function be(n,e,t,o,r){var a=!1;for(var i in e)i in n?e[i]!==t[i]&&(a=!0):(a=!0,ke(n,i,o,r));for(var i in n)i in e||(a=!0,delete n[i]);return a}function ke(n,e,t,o){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[o][e]}})}function ye(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var _e=null;function Ee(n,e){return(n.__esModule||pn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),p(n)?e.extend(n):n}function xe(n){if(r(n))for(var e=0;e<n.length;e++){var t=n[e];if(i(t)&&(i(t.componentOptions)||me(t)))return t}}function we(n,e,t,o,d,u){return(r(t)||c(t))&&(d=o,o=t,t=void 0),s(u)&&(d=2),function(n,e,t,o,c){if(i(t)&&i(t.__ob__))return fn();i(t)&&i(t.is)&&(e=t.is);if(!e)return fn();0;r(o)&&l(o[0])&&((t=t||{}).scopedSlots={default:o[0]},o.length=0);2===c?o=Hn(o):1===c&&(o=function(n){for(var e=0;e<n.length;e++)if(r(n[e]))return Array.prototype.concat.apply([],n);return n}(o));var d,u;if("string"==typeof e){var m=void 0;u=n.$vnode&&n.$vnode.ns||N.getTagNamespace(e),d=N.isReservedTag(e)?new mn(N.parsePlatformTagName(e),t,o,void 0,void 0,n):t&&t.pre||!i(m=Pt(n.$options,"components",e))?new mn(e,t,o,void 0,void 0,n):kt(m,t,n,o,e)}else d=kt(e,t,n,o);return r(d)?d:i(d)?(i(u)&&function n(e,t,o){e.ns=t,"foreignObject"===e.tag&&(t=void 0,o=!0);if(i(e.children))for(var r=0,c=e.children.length;r<c;r++){var l=e.children[r];i(l.tag)&&(a(l.ns)||s(o)&&"svg"!==l.tag)&&n(l,t,o)}}(d,u),i(t)&&function(n){p(n.style)&&Le(n.style);p(n.class)&&Le(n.class)}(t),d):fn()}(n,e,t,o,d)}function Ce(n,e,t){yn();try{if(e)for(var o=e;o=o.$parent;){var r=o.$options.errorCaptured;if(r)for(var a=0;a<r.length;a++)try{if(!1===r[a].call(o,n,e,t))return}catch(n){Be(n,o,"errorCaptured hook")}}Be(n,e,t)}finally{_n()}}function Ae(n,e,t,o,r){var a;try{(a=t?n.apply(e,t):n.call(e))&&!a._isVue&&h(a)&&!a._handled&&(a.catch((function(n){return Ce(n,o,r+" (Promise/async)")})),a._handled=!0)}catch(n){Ce(n,o,r)}return a}function Be(n,e,t){if(N.errorHandler)try{return N.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Te(e,null,"config.errorHandler")}Te(n,e,t)}function Te(n,e,t){if(!H||"undefined"==typeof console)throw n;console.error(n)}var Pe,Se=!1,Oe=[],Ie=!1;function De(){Ie=!1;var n=Oe.slice(0);Oe.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&cn(Promise)){var ze=Promise.resolve();Pe=function(){ze.then(De),J&&setTimeout(D)},Se=!0}else if(X||"undefined"==typeof MutationObserver||!cn(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Pe="undefined"!=typeof setImmediate&&cn(setImmediate)?function(){setImmediate(De)}:function(){setTimeout(De,0)};else{var je=1,qe=new MutationObserver(De),Me=document.createTextNode(String(je));qe.observe(Me,{characterData:!0}),Pe=function(){je=(je+1)%2,Me.data=String(je)},Se=!0}function $e(n,e){var t;if(Oe.push((function(){if(n)try{n.call(e)}catch(n){Ce(n,e,"nextTick")}else t&&t(e)})),Ie||(Ie=!0,Pe()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function Fe(n){return function(e,t){if(void 0===t&&(t=dn),t)return function(n,e,t){var o=n.$options;o[e]=Ct(o[e],t)}(t,n,e)}}Fe("beforeMount"),Fe("mounted"),Fe("beforeUpdate"),Fe("updated"),Fe("beforeDestroy"),Fe("destroyed"),Fe("errorCaptured"),Fe("activated"),Fe("deactivated"),Fe("serverPrefetch"),Fe("renderTracked"),Fe("renderTriggered");var Re=new ln;function Le(n){return function n(e,t){var o,a,i=r(e);if(!i&&!p(e)||Object.isFrozen(e)||e instanceof mn)return;if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(i)for(o=e.length;o--;)n(e[o],t);else if($n(e))n(e.value,t);else for(a=Object.keys(e),o=a.length;o--;)n(e[a[o]],t)}(n,Re),Re.clear(),n}var Ne,Ue=0,Ve=function(){function n(n,e,t,o,r){var a,i;a=this,void 0===(i=Rn||(n?n._scope:void 0))&&(i=Rn),i&&i.active&&i.effects.push(a),(this.vm=n)&&r&&(n._watcher=this),o?(this.deep=!!o.deep,this.user=!!o.user,this.lazy=!!o.lazy,this.sync=!!o.sync,this.before=o.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++Ue,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ln,this.newDepIds=new ln,this.expression="",l(e)?this.getter=e:(this.getter=function(n){if(!G.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=D)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;yn(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Ce(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Le(n),_n(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():dt(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||p(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');Ae(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&y(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function Ke(n,e){Ne.$on(n,e)}function Ge(n,e){Ne.$off(n,e)}function Ze(n,e){var t=Ne;return function o(){var r=e.apply(null,arguments);null!==r&&t.$off(n,o)}}function He(n,e,t){Ne=n,Kn(e,t||{},Ke,Ge,Ze,n),Ne=void 0}var We=null;function Xe(n){var e=We;return We=n,function(){We=e}}function Ye(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function Qe(n,e){if(e){if(n._directInactive=!1,Ye(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)Qe(n.$children[t]);Je(n,"activated")}}function Je(n,e,t,o){void 0===o&&(o=!0),yn();var r=dn;o&&un(n);var a=n.$options[e],i="".concat(e," hook");if(a)for(var s=0,c=a.length;s<c;s++)Ae(a[s],n,t||null,n,i);n._hasHookEvent&&n.$emit("hook:"+e),o&&un(r),_n()}var nt=[],et=[],tt={},ot=!1,rt=!1,at=0;var it=0,st=Date.now;if(H&&!X){var ct=window.performance;ct&&"function"==typeof ct.now&&st()>document.createEvent("Event").timeStamp&&(st=function(){return ct.now()})}var lt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function pt(){var n,e;for(it=st(),rt=!0,nt.sort(lt),at=0;at<nt.length;at++)(n=nt[at]).before&&n.before(),e=n.id,tt[e]=null,n.run();var t=et.slice(),o=nt.slice();at=nt.length=et.length=0,tt={},ot=rt=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,Qe(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],o=t.vm;o&&o._watcher===t&&o._isMounted&&!o._isDestroyed&&Je(o,"updated")}}(o),sn&&N.devtools&&sn.emit("flush")}function dt(n){var e=n.id;if(null==tt[e]&&(n!==bn.target||!n.noRecurse)){if(tt[e]=!0,rt){for(var t=nt.length-1;t>at&&nt[t].id>n.id;)t--;nt.splice(t+1,0,n)}else nt.push(n);ot||(ot=!0,$e(pt))}}function ut(n,e){if(n){for(var t=Object.create(null),o=pn?Reflect.ownKeys(n):Object.keys(n),r=0;r<o.length;r++){var a=o[r];if("__ob__"!==a){var i=n[a].from;if(i in e._provided)t[a]=e._provided[i];else if("default"in n[a]){var s=n[a].default;t[a]=l(s)?s.call(e):s}else 0}}return t}}function mt(n,e,t,a,i){var c,l=this,p=i.options;E(a,"_uid")?(c=Object.create(a))._original=a:(c=a,a=a._original);var d=s(p._compiled),u=!d;this.data=n,this.props=e,this.children=t,this.parent=a,this.listeners=n.on||o,this.injections=ut(p.inject,a),this.slots=function(){return l.$slots||fe(a,n.scopedSlots,l.$slots=de(t,a)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return fe(a,n.scopedSlots,this.slots())}}),d&&(this.$options=p,this.$slots=this.slots(),this.$scopedSlots=fe(a,n.scopedSlots,this.$slots)),p._scopeId?this._c=function(n,e,t,o){var i=we(c,n,e,t,o,u);return i&&!r(i)&&(i.fnScopeId=p._scopeId,i.fnContext=a),i}:this._c=function(n,e,t,o){return we(c,n,e,t,o,u)}}function ft(n,e,t,o,r){var a=gn(n);return a.fnContext=t,a.fnOptions=o,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function ht(n,e){for(var t in e)n[C(t)]=e[t]}function gt(n){return n.name||n.__name||n._componentTag}pe(mt.prototype);var vt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;vt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},o=n.data.inlineTemplate;i(o)&&(t.render=o.render,t.staticRenderFns=o.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,We)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,r,a){var i=r.data.scopedSlots,s=n.$scopedSlots,c=!!(i&&!i.$stable||s!==o&&!s.$stable||i&&n.$scopedSlots.$key!==i.$key||!i&&n.$scopedSlots.$key),l=!!(a||n.$options._renderChildren||c),p=n.$vnode;n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r),n.$options._renderChildren=a;var d=r.data.attrs||o;n._attrsProxy&&be(n._attrsProxy,d,p.data&&p.data.attrs||o,n,"$attrs")&&(l=!0),n.$attrs=d,t=t||o;var u=n.$options._parentListeners;if(n._listenersProxy&&be(n._listenersProxy,t,u||o,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,He(n,t,u),e&&n.$options.props){Bn(!1);for(var m=n._props,f=n.$options._propKeys||[],h=0;h<f.length;h++){var g=f[h],v=n.$options.props;m[g]=St(g,v,e,n)}Bn(!0),n.$options.propsData=e}l&&(n.$slots=de(a,r.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,o=n.componentInstance;o._isMounted||(o._isMounted=!0,Je(o,"mounted")),n.data.keepAlive&&(t._isMounted?((e=o)._inactive=!1,et.push(e)):Qe(o,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Ye(e))||e._inactive)){e._inactive=!0;for(var o=0;o<e.$children.length;o++)n(e.$children[o]);Je(e,"deactivated")}}(e,!0):e.$destroy())}},bt=Object.keys(vt);function kt(n,e,t,c,l){if(!a(n)){var d=t.$options._base;if(p(n)&&(n=d.extend(n)),"function"==typeof n){var u;if(a(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&i(n.errorComp))return n.errorComp;if(i(n.resolved))return n.resolved;var t=_e;if(t&&i(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),s(n.loading)&&i(n.loadingComp))return n.loadingComp;if(t&&!i(n.owners)){var o=n.owners=[t],r=!0,c=null,l=null;t.$on("hook:destroyed",(function(){return y(o,t)}));var d=function(n){for(var e=0,t=o.length;e<t;e++)o[e].$forceUpdate();n&&(o.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},u=$((function(t){n.resolved=Ee(t,e),r?o.length=0:d(!0)})),m=$((function(e){i(n.errorComp)&&(n.error=!0,d(!0))})),f=n(u,m);return p(f)&&(h(f)?a(n.resolved)&&f.then(u,m):h(f.component)&&(f.component.then(u,m),i(f.error)&&(n.errorComp=Ee(f.error,e)),i(f.loading)&&(n.loadingComp=Ee(f.loading,e),0===f.delay?n.loading=!0:c=setTimeout((function(){c=null,a(n.resolved)&&a(n.error)&&(n.loading=!0,d(!1))}),f.delay||200)),i(f.timeout)&&(l=setTimeout((function(){l=null,a(n.resolved)&&m(null)}),f.timeout)))),r=!1,n.loading?n.loadingComp:n.resolved}}(u=n,d)))return function(n,e,t,o,r){var a=fn();return a.asyncFactory=n,a.asyncMeta={data:e,context:t,children:o,tag:r},a}(u,e,t,c,l);e=e||{},Vt(n),i(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",o=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var a=e.on||(e.on={}),s=a[o],c=e.model.callback;i(s)?(r(s)?-1===s.indexOf(c):s!==c)&&(a[o]=[c].concat(s)):a[o]=c}(n.options,e);var m=function(n,e,t){var o=e.options.props;if(!a(o)){var r={},s=n.attrs,c=n.props;if(i(s)||i(c))for(var l in o){var p=T(l);Zn(r,c,l,p,!0)||Zn(r,s,l,p,!1)}return r}}(e,n);if(s(n.options.functional))return function(n,e,t,a,s){var c=n.options,l={},p=c.props;if(i(p))for(var d in p)l[d]=St(d,p,e||o);else i(t.attrs)&&ht(l,t.attrs),i(t.props)&&ht(l,t.props);var u=new mt(t,l,s,a,n),m=c.render.call(null,u._c,u);if(m instanceof mn)return ft(m,t,u.parent,c,u);if(r(m)){for(var f=Hn(m)||[],h=new Array(f.length),g=0;g<f.length;g++)h[g]=ft(f[g],t,u.parent,c,u);return h}}(n,m,e,t,c);var f=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var g=e.slot;e={},g&&(e.slot=g)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<bt.length;t++){var o=bt[t],r=e[o],a=vt[o];r===a||r&&r._merged||(e[o]=r?yt(a,r):a)}}(e);var v=gt(n.options)||l;return new mn("vue-component-".concat(n.cid).concat(v?"-".concat(v):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:m,listeners:f,tag:l,children:c},u)}}}function yt(n,e){var t=function(t,o){n(t,o),e(t,o)};return t._merged=!0,t}var _t=D,Et=N.optionMergeStrategies;function xt(n,e){if(!e)return n;for(var t,o,r,a=pn?Reflect.ownKeys(e):Object.keys(e),i=0;i<a.length;i++)"__ob__"!==(t=a[i])&&(o=n[t],r=e[t],E(n,t)?o!==r&&u(o)&&u(r)&&xt(o,r):In(n,t,r));return n}function wt(n,e,t){return t?function(){var o=l(e)?e.call(t,t):e,r=l(n)?n.call(t,t):n;return o?xt(o,r):r}:e?n?function(){return xt(l(e)?e.call(this,this):e,l(n)?n.call(this,this):n)}:e:n}function Ct(n,e){var t=e?n?n.concat(e):r(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function At(n,e,t,o){var r=Object.create(n||null);return e?O(r,e):r}Et.data=function(n,e,t){return t?wt(n,e,t):e&&"function"!=typeof e?n:wt(n,e)},L.forEach((function(n){Et[n]=Ct})),R.forEach((function(n){Et[n+"s"]=At})),Et.watch=function(n,e,t,o){if(n===tn&&(n=void 0),e===tn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var a={};for(var i in O(a,n),e){var s=a[i],c=e[i];s&&!r(s)&&(s=[s]),a[i]=s?s.concat(c):r(c)?c:[c]}return a},Et.props=Et.methods=Et.inject=Et.computed=function(n,e,t,o){if(!n)return e;var r=Object.create(null);return O(r,n),e&&O(r,e),r},Et.provide=wt;var Bt=function(n,e){return void 0===e?n:e};function Tt(n,e,t){if(l(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var o,a,i={};if(r(t))for(o=t.length;o--;)"string"==typeof(a=t[o])&&(i[C(a)]={type:null});else if(u(t))for(var s in t)a=t[s],i[C(s)]=u(a)?a:{type:a};else 0;n.props=i}}(e),function(n,e){var t=n.inject;if(t){var o=n.inject={};if(r(t))for(var a=0;a<t.length;a++)o[t[a]]={from:t[a]};else if(u(t))for(var i in t){var s=t[i];o[i]=u(s)?O({from:i},s):{from:s}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var o=e[t];l(o)&&(e[t]={bind:o,update:o})}}(e),!e._base&&(e.extends&&(n=Tt(n,e.extends,t)),e.mixins))for(var o=0,a=e.mixins.length;o<a;o++)n=Tt(n,e.mixins[o],t);var i,s={};for(i in n)c(i);for(i in e)E(n,i)||c(i);function c(o){var r=Et[o]||Bt;s[o]=r(n[o],e[o],t,o)}return s}function Pt(n,e,t,o){if("string"==typeof t){var r=n[e];if(E(r,t))return r[t];var a=C(t);if(E(r,a))return r[a];var i=A(a);return E(r,i)?r[i]:r[t]||r[a]||r[i]}}function St(n,e,t,o){var r=e[n],a=!E(t,n),i=t[n],s=zt(Boolean,r.type);if(s>-1)if(a&&!E(r,"default"))i=!1;else if(""===i||i===T(n)){var c=zt(String,r.type);(c<0||s<c)&&(i=!0)}if(void 0===i){i=function(n,e,t){if(!E(e,"default"))return;var o=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return l(o)&&"Function"!==It(e.type)?o.call(n):o}(o,r,n);var p=An;Bn(!0),Sn(i),Bn(p)}return i}var Ot=/^\s*function (\w+)/;function It(n){var e=n&&n.toString().match(Ot);return e?e[1]:""}function Dt(n,e){return It(n)===It(e)}function zt(n,e){if(!r(e))return Dt(e,n)?0:-1;for(var t=0,o=e.length;t<o;t++)if(Dt(e[t],n))return t;return-1}var jt={enumerable:!0,configurable:!0,get:D,set:D};function qt(n,e,t){jt.get=function(){return this[e][t]},jt.set=function(n){this[e][t]=n},Object.defineProperty(n,t,jt)}function Mt(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},o=n._props=jn({}),r=n.$options._propKeys=[];n.$parent&&Bn(!1);var a=function(a){r.push(a);var i=St(a,e,t,n);On(o,a,i),a in n||qt(n,"_props",a)};for(var i in e)a(i);Bn(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var o=n._setupContext=ve(n);un(n),yn();var r=Ae(t,null,[n._props||jn({}),o],n,"setup");if(_n(),un(),l(r))e.render=r;else if(p(r))if(n._setupState=r,r.__sfc){var a=n._setupProxy={};for(var i in r)"__sfc"!==i&&Fn(a,r,i)}else for(var i in r)V(i)||Fn(n,r,i);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?D:P(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;u(e=n._data=l(e)?function(n,e){yn();try{return n.call(e,e)}catch(n){return Ce(n,e,"data()"),{}}finally{_n()}}(e,n):e||{})||(e={});var t=Object.keys(e),o=n.$options.props,r=(n.$options.methods,t.length);for(;r--;){var a=t[r];0,o&&E(o,a)||V(a)||qt(n,"_data",a)}var i=Sn(e);i&&i.vmCount++}(n);else{var t=Sn(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),o=an();for(var r in e){var a=e[r],i=l(a)?a:a.get;0,o||(t[r]=new Ve(n,i||D,D,$t)),r in n||Ft(n,r,a)}}(n,e.computed),e.watch&&e.watch!==tn&&function(n,e){for(var t in e){var o=e[t];if(r(o))for(var a=0;a<o.length;a++)Nt(n,t,o[a]);else Nt(n,t,o)}}(n,e.watch)}var $t={lazy:!0};function Ft(n,e,t){var o=!an();l(t)?(jt.get=o?Rt(e):Lt(t),jt.set=D):(jt.get=t.get?o&&!1!==t.cache?Rt(e):Lt(t.get):D,jt.set=t.set||D),Object.defineProperty(n,e,jt)}function Rt(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),bn.target&&e.depend(),e.value}}function Lt(n){return function(){return n.call(this,this)}}function Nt(n,e,t,o){return u(t)&&(o=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,o)}var Ut=0;function Vt(n){var e=n.options;if(n.super){var t=Vt(n.super);if(t!==n.superOptions){n.superOptions=t;var o=function(n){var e,t=n.options,o=n.sealedOptions;for(var r in t)t[r]!==o[r]&&(e||(e={}),e[r]=t[r]);return e}(n);o&&O(n.extendOptions,o),(e=n.options=Tt(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Kt(n){this._init(n)}function Gt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,o=t.cid,r=n._Ctor||(n._Ctor={});if(r[o])return r[o];var a=gt(n)||gt(t.options);var i=function(n){this._init(n)};return(i.prototype=Object.create(t.prototype)).constructor=i,i.cid=e++,i.options=Tt(t.options,n),i.super=t,i.options.props&&function(n){var e=n.options.props;for(var t in e)qt(n.prototype,"_props",t)}(i),i.options.computed&&function(n){var e=n.options.computed;for(var t in e)Ft(n.prototype,t,e[t])}(i),i.extend=t.extend,i.mixin=t.mixin,i.use=t.use,R.forEach((function(n){i[n]=t[n]})),a&&(i.options.components[a]=i),i.superOptions=t.options,i.extendOptions=n,i.sealedOptions=O({},i.options),r[o]=i,i}}function Zt(n){return n&&(gt(n.Ctor.options)||n.tag)}function Ht(n,e){return r(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!m(n)&&n.test(e)}function Wt(n,e){var t=n.cache,o=n.keys,r=n._vnode;for(var a in t){var i=t[a];if(i){var s=i.name;s&&!e(s)&&Xt(t,a,o,r)}}}function Xt(n,e,t,o){var r=n[e];!r||o&&r.tag===o.tag||r.componentInstance.$destroy(),n[e]=null,y(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=Ut++,e._isVue=!0,e.__v_skip=!0,e._scope=new Ln(!0),n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),o=e._parentVnode;t.parent=e.parent,t._parentVnode=o;var r=o.componentOptions;t.propsData=r.propsData,t._parentListeners=r.listeners,t._renderChildren=r.children,t._componentTag=r.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=Tt(Vt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&He(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,r=t&&t.context;n.$slots=de(e._renderChildren,r),n.$scopedSlots=t?fe(n.$parent,t.data.scopedSlots,n.$slots):o,n._c=function(e,t,o,r){return we(n,e,t,o,r,!1)},n.$createElement=function(e,t,o,r){return we(n,e,t,o,r,!0)};var a=t&&t.data;On(n,"$attrs",a&&a.attrs||o,null,!0),On(n,"$listeners",e._parentListeners||o,null,!0)}(e),Je(e,"beforeCreate",void 0,!1),function(n){var e=ut(n.$options.inject,n);e&&(Bn(!1),Object.keys(e).forEach((function(t){On(n,t,e[t])})),Bn(!0))}(e),Mt(e),function(n){var e=n.$options.provide;if(e){var t=l(e)?e.call(n):e;if(!p(t))return;for(var o=Nn(n),r=pn?Reflect.ownKeys(t):Object.keys(t),a=0;a<r.length;a++){var i=r[a];Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(t,i))}}}(e),Je(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Kt),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=In,n.prototype.$delete=Dn,n.prototype.$watch=function(n,e,t){if(u(e))return Nt(this,n,e,t);(t=t||{}).user=!0;var o=new Ve(this,n,e,t);if(t.immediate){var r='callback for immediate watcher "'.concat(o.expression,'"');yn(),Ae(e,this,[o.value],this,r),_n()}return function(){o.teardown()}}}(Kt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var o=this;if(r(n))for(var a=0,i=n.length;a<i;a++)o.$on(n[a],t);else(o._events[n]||(o._events[n]=[])).push(t),e.test(n)&&(o._hasHookEvent=!0);return o},n.prototype.$once=function(n,e){var t=this;function o(){t.$off(n,o),e.apply(t,arguments)}return o.fn=e,t.$on(n,o),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(r(n)){for(var o=0,a=n.length;o<a;o++)t.$off(n[o],e);return t}var i,s=t._events[n];if(!s)return t;if(!e)return t._events[n]=null,t;for(var c=s.length;c--;)if((i=s[c])===e||i.fn===e){s.splice(c,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?S(t):t;for(var o=S(arguments,1),r='event handler for "'.concat(n,'"'),a=0,i=t.length;a<i;a++)Ae(t[a],e,o,e,r)}return e}}(Kt),function(n){n.prototype._update=function(n,e){var t=this,o=t.$el,r=t._vnode,a=Xe(t);t._vnode=n,t.$el=r?t.__patch__(r,n):t.__patch__(t.$el,n,e,!1),a(),o&&(o.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){Je(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||y(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),Je(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Kt),function(n){pe(n.prototype),n.prototype.$nextTick=function(n){return $e(n,this)},n.prototype._render=function(){var n,e=this,t=e.$options,o=t.render,a=t._parentVnode;a&&e._isMounted&&(e.$scopedSlots=fe(e.$parent,a.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&ye(e._slotsProxy,e.$scopedSlots)),e.$vnode=a;try{un(e),_e=e,n=o.call(e._renderProxy,e.$createElement)}catch(t){Ce(t,e,"render"),n=e._vnode}finally{_e=null,un()}return r(n)&&1===n.length&&(n=n[0]),n instanceof mn||(n=fn()),n.parent=a,n}}(Kt);var Yt=[String,RegExp,Array],Qt={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Yt,exclude:Yt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,o=this.keyToCache;if(t){var r=t.tag,a=t.componentInstance,i=t.componentOptions;n[o]={name:Zt(i),tag:r,componentInstance:a},e.push(o),this.max&&e.length>parseInt(this.max)&&Xt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Xt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Wt(n,(function(n){return Ht(e,n)}))})),this.$watch("exclude",(function(e){Wt(n,(function(n){return!Ht(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=xe(n),t=e&&e.componentOptions;if(t){var o=Zt(t),r=this.include,a=this.exclude;if(r&&(!o||!Ht(r,o))||a&&o&&Ht(a,o))return e;var i=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;i[c]?(e.componentInstance=i[c].componentInstance,y(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return N}};Object.defineProperty(n,"config",e),n.util={warn:_t,extend:O,mergeOptions:Tt,defineReactive:On},n.set=In,n.delete=Dn,n.nextTick=$e,n.observable=function(n){return Sn(n),n},n.options=Object.create(null),R.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,O(n.options.components,Qt),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=S(arguments,1);return t.unshift(this),l(n.install)?n.install.apply(n,t):l(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=Tt(this.options,n),this}}(n),Gt(n),function(n){R.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&l(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Kt),Object.defineProperty(Kt.prototype,"$isServer",{get:an}),Object.defineProperty(Kt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Kt,"FunctionalRenderContext",{value:mt}),Kt.version="2.7.8";var Jt=b("style,class"),no=b("input,textarea,option,select,progress"),eo=b("contenteditable,draggable,spellcheck"),to=b("events,caret,typing,plaintext-only"),oo=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ro="http://www.w3.org/1999/xlink",ao=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},io=function(n){return ao(n)?n.slice(6,n.length):""},so=function(n){return null==n||!1===n};function co(n){for(var e=n.data,t=n,o=n;i(o.componentInstance);)(o=o.componentInstance._vnode)&&o.data&&(e=lo(o.data,e));for(;i(t=t.parent);)t&&t.data&&(e=lo(e,t.data));return function(n,e){if(i(n)||i(e))return po(n,uo(e));return""}(e.staticClass,e.class)}function lo(n,e){return{staticClass:po(n.staticClass,e.staticClass),class:i(n.class)?[n.class,e.class]:e.class}}function po(n,e){return n?e?n+" "+e:n:e||""}function uo(n){return Array.isArray(n)?function(n){for(var e,t="",o=0,r=n.length;o<r;o++)i(e=uo(n[o]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):p(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var mo={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},fo=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ho=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),go=function(n){return fo(n)||ho(n)};var vo=Object.create(null);var bo=b("text,number,password,search,email,tel,url");var ko=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(mo[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),yo={create:function(n,e){_o(e)},update:function(n,e){n.data.ref!==e.data.ref&&(_o(n,!0),_o(e))},destroy:function(n){_o(n,!0)}};function _o(n,e){var t=n.data.ref;if(i(t)){var o=n.context,a=n.componentInstance||n.elm,s=e?null:a,c=e?void 0:a;if(l(t))Ae(t,o,[s],o,"template ref function");else{var p=n.data.refInFor,d="string"==typeof t||"number"==typeof t,u=$n(t),m=o.$refs;if(d||u)if(p){var f=d?m[t]:t.value;e?r(f)&&y(f,a):r(f)?f.includes(a)||f.push(a):d?(m[t]=[a],Eo(o,t,m[t])):t.value=[a]}else if(d){if(e&&m[t]!==a)return;m[t]=c,Eo(o,t,s)}else if(u){if(e&&t.value!==a)return;t.value=s}else 0}}}function Eo(n,e,t){var o=n._setupState;o&&E(o,e)&&($n(o[e])?o[e].value=t:o[e]=t)}var xo=new mn("",{},[]),wo=["create","activate","update","remove","destroy"];function Co(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&i(n.data)===i(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,o=i(t=n.data)&&i(t=t.attrs)&&t.type,r=i(t=e.data)&&i(t=t.attrs)&&t.type;return o===r||bo(o)&&bo(r)}(n,e)||s(n.isAsyncPlaceholder)&&a(e.asyncFactory.error))}function Ao(n,e,t){var o,r,a={};for(o=e;o<=t;++o)i(r=n[o].key)&&(a[r]=o);return a}var Bo={create:To,update:To,destroy:function(n){To(n,xo)}};function To(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,o,r,a=n===xo,i=e===xo,s=So(n.data.directives,n.context),c=So(e.data.directives,e.context),l=[],p=[];for(t in c)o=s[t],r=c[t],o?(r.oldValue=o.value,r.oldArg=o.arg,Io(r,"update",e,n),r.def&&r.def.componentUpdated&&p.push(r)):(Io(r,"bind",e,n),r.def&&r.def.inserted&&l.push(r));if(l.length){var d=function(){for(var t=0;t<l.length;t++)Io(l[t],"inserted",e,n)};a?Gn(e,"insert",d):d()}p.length&&Gn(e,"postpatch",(function(){for(var t=0;t<p.length;t++)Io(p[t],"componentUpdated",e,n)}));if(!a)for(t in s)c[t]||Io(s[t],"unbind",n,n,i)}(n,e)}var Po=Object.create(null);function So(n,e){var t,o,r=Object.create(null);if(!n)return r;for(t=0;t<n.length;t++)(o=n[t]).modifiers||(o.modifiers=Po),r[Oo(o)]=o,e._setupState&&e._setupState.__sfc&&(o.def=o.def||Pt(e,"_setupState","v-"+o.name)),o.def=o.def||Pt(e.$options,"directives",o.name);return r}function Oo(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function Io(n,e,t,o,r){var a=n.def&&n.def[e];if(a)try{a(t.elm,n,t,o,r)}catch(o){Ce(o,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var Do=[yo,Bo];function zo(n,e){var t=e.componentOptions;if(!(i(t)&&!1===t.Ctor.options.inheritAttrs||a(n.data.attrs)&&a(e.data.attrs))){var o,r,c=e.elm,l=n.data.attrs||{},p=e.data.attrs||{};for(o in(i(p.__ob__)||s(p._v_attr_proxy))&&(p=e.data.attrs=O({},p)),p)r=p[o],l[o]!==r&&jo(c,o,r,e.data.pre);for(o in(X||Q)&&p.value!==l.value&&jo(c,"value",p.value),l)a(p[o])&&(ao(o)?c.removeAttributeNS(ro,io(o)):eo(o)||c.removeAttribute(o))}}function jo(n,e,t,o){o||n.tagName.indexOf("-")>-1?qo(n,e,t):oo(e)?so(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):eo(e)?n.setAttribute(e,function(n,e){return so(e)||"false"===e?"false":"contenteditable"===n&&to(e)?e:"true"}(e,t)):ao(e)?so(t)?n.removeAttributeNS(ro,io(e)):n.setAttributeNS(ro,e,t):qo(n,e,t)}function qo(n,e,t){if(so(t))n.removeAttribute(e);else{if(X&&!Y&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var o=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",o)};n.addEventListener("input",o),n.__ieph=!0}n.setAttribute(e,t)}}var Mo={create:zo,update:zo};function $o(n,e){var t=e.elm,o=e.data,r=n.data;if(!(a(o.staticClass)&&a(o.class)&&(a(r)||a(r.staticClass)&&a(r.class)))){var s=co(e),c=t._transitionClasses;i(c)&&(s=po(s,uo(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var Fo,Ro={create:$o,update:$o};function Lo(n,e,t){var o=Fo;return function r(){var a=e.apply(null,arguments);null!==a&&Vo(n,r,t,o)}}var No=Se&&!(en&&Number(en[1])<=53);function Uo(n,e,t,o){if(No){var r=it,a=e;e=a._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=r||n.timeStamp<=0||n.target.ownerDocument!==document)return a.apply(this,arguments)}}Fo.addEventListener(n,e,on?{capture:t,passive:o}:t)}function Vo(n,e,t,o){(o||Fo).removeEventListener(n,e._wrapper||e,t)}function Ko(n,e){if(!a(n.data.on)||!a(e.data.on)){var t=e.data.on||{},o=n.data.on||{};Fo=e.elm||n.elm,function(n){if(i(n.__r)){var e=X?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}i(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Kn(t,o,Uo,Vo,Lo,e.context),Fo=void 0}}var Go,Zo={create:Ko,update:Ko,destroy:function(n){return Ko(n,xo)}};function Ho(n,e){if(!a(n.data.domProps)||!a(e.data.domProps)){var t,o,r=e.elm,c=n.data.domProps||{},l=e.data.domProps||{};for(t in(i(l.__ob__)||s(l._v_attr_proxy))&&(l=e.data.domProps=O({},l)),c)t in l||(r[t]="");for(t in l){if(o=l[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),o===c[t])continue;1===r.childNodes.length&&r.removeChild(r.childNodes[0])}if("value"===t&&"PROGRESS"!==r.tagName){r._value=o;var p=a(o)?"":String(o);Wo(r,p)&&(r.value=p)}else if("innerHTML"===t&&ho(r.tagName)&&a(r.innerHTML)){(Go=Go||document.createElement("div")).innerHTML="<svg>".concat(o,"</svg>");for(var d=Go.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;d.firstChild;)r.appendChild(d.firstChild)}else if(o!==c[t])try{r[t]=o}catch(n){}}}}function Wo(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,o=n._vModifiers;if(i(o)){if(o.number)return v(t)!==v(e);if(o.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Xo={create:Ho,update:Ho},Yo=x((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var o=n.split(t);o.length>1&&(e[o[0].trim()]=o[1].trim())}})),e}));function Qo(n){var e=Jo(n.style);return n.staticStyle?O(n.staticStyle,e):e}function Jo(n){return Array.isArray(n)?I(n):"string"==typeof n?Yo(n):n}var nr,er=/^--/,tr=/\s*!important$/,or=function(n,e,t){if(er.test(e))n.style.setProperty(e,t);else if(tr.test(t))n.style.setProperty(T(e),t.replace(tr,""),"important");else{var o=ar(e);if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)n.style[o]=t[r];else n.style[o]=t}},rr=["Webkit","Moz","ms"],ar=x((function(n){if(nr=nr||document.createElement("div").style,"filter"!==(n=C(n))&&n in nr)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<rr.length;t++){var o=rr[t]+e;if(o in nr)return o}}));function ir(n,e){var t=e.data,o=n.data;if(!(a(t.staticStyle)&&a(t.style)&&a(o.staticStyle)&&a(o.style))){var r,s,c=e.elm,l=o.staticStyle,p=o.normalizedStyle||o.style||{},d=l||p,u=Jo(e.data.style)||{};e.data.normalizedStyle=i(u.__ob__)?O({},u):u;var m=function(n,e){var t,o={};if(e)for(var r=n;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(t=Qo(r.data))&&O(o,t);(t=Qo(n.data))&&O(o,t);for(var a=n;a=a.parent;)a.data&&(t=Qo(a.data))&&O(o,t);return o}(e,!0);for(s in d)a(m[s])&&or(c,s,"");for(s in m)(r=m[s])!==d[s]&&or(c,s,null==r?"":r)}}var sr={create:ir,update:ir},cr=/\s+/;function lr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(cr).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function pr(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(cr).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),o=" "+e+" ";t.indexOf(o)>=0;)t=t.replace(o," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function dr(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&O(e,ur(n.name||"v")),O(e,n),e}return"string"==typeof n?ur(n):void 0}}var ur=x((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),mr=H&&!Y,fr="transition",hr="transitionend",gr="animation",vr="animationend";mr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(fr="WebkitTransition",hr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(gr="WebkitAnimation",vr="webkitAnimationEnd"));var br=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function kr(n){br((function(){br(n)}))}function yr(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),lr(n,e))}function _r(n,e){n._transitionClasses&&y(n._transitionClasses,e),pr(n,e)}function Er(n,e,t){var o=wr(n,e),r=o.type,a=o.timeout,i=o.propCount;if(!r)return t();var s="transition"===r?hr:vr,c=0,l=function(){n.removeEventListener(s,p),t()},p=function(e){e.target===n&&++c>=i&&l()};setTimeout((function(){c<i&&l()}),a+1),n.addEventListener(s,p)}var xr=/\b(transform|all)(,|$)/;function wr(n,e){var t,o=window.getComputedStyle(n),r=(o[fr+"Delay"]||"").split(", "),a=(o[fr+"Duration"]||"").split(", "),i=Cr(r,a),s=(o[gr+"Delay"]||"").split(", "),c=(o[gr+"Duration"]||"").split(", "),l=Cr(s,c),p=0,d=0;return"transition"===e?i>0&&(t="transition",p=i,d=a.length):"animation"===e?l>0&&(t="animation",p=l,d=c.length):d=(t=(p=Math.max(i,l))>0?i>l?"transition":"animation":null)?"transition"===t?a.length:c.length:0,{type:t,timeout:p,propCount:d,hasTransform:"transition"===t&&xr.test(o[fr+"Property"])}}function Cr(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Ar(e)+Ar(n[t])})))}function Ar(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function Br(n,e){var t=n.elm;i(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var o=dr(n.data.transition);if(!a(o)&&!i(t._enterCb)&&1===t.nodeType){for(var r=o.css,s=o.type,c=o.enterClass,d=o.enterToClass,u=o.enterActiveClass,m=o.appearClass,f=o.appearToClass,h=o.appearActiveClass,g=o.beforeEnter,b=o.enter,k=o.afterEnter,y=o.enterCancelled,_=o.beforeAppear,E=o.appear,x=o.afterAppear,w=o.appearCancelled,C=o.duration,A=We,B=We.$vnode;B&&B.parent;)A=B.context,B=B.parent;var T=!A._isMounted||!n.isRootInsert;if(!T||E||""===E){var P=T&&m?m:c,S=T&&h?h:u,O=T&&f?f:d,I=T&&_||g,D=T&&l(E)?E:b,z=T&&x||k,j=T&&w||y,q=v(p(C)?C.enter:C);0;var M=!1!==r&&!Y,F=Sr(D),R=t._enterCb=$((function(){M&&(_r(t,O),_r(t,S)),R.cancelled?(M&&_r(t,P),j&&j(t)):z&&z(t),t._enterCb=null}));n.data.show||Gn(n,"insert",(function(){var e=t.parentNode,o=e&&e._pending&&e._pending[n.key];o&&o.tag===n.tag&&o.elm._leaveCb&&o.elm._leaveCb(),D&&D(t,R)})),I&&I(t),M&&(yr(t,P),yr(t,S),kr((function(){_r(t,P),R.cancelled||(yr(t,O),F||(Pr(q)?setTimeout(R,q):Er(t,s,R)))}))),n.data.show&&(e&&e(),D&&D(t,R)),M||F||R()}}}function Tr(n,e){var t=n.elm;i(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var o=dr(n.data.transition);if(a(o)||1!==t.nodeType)return e();if(!i(t._leaveCb)){var r=o.css,s=o.type,c=o.leaveClass,l=o.leaveToClass,d=o.leaveActiveClass,u=o.beforeLeave,m=o.leave,f=o.afterLeave,h=o.leaveCancelled,g=o.delayLeave,b=o.duration,k=!1!==r&&!Y,y=Sr(m),_=v(p(b)?b.leave:b);0;var E=t._leaveCb=$((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),k&&(_r(t,l),_r(t,d)),E.cancelled?(k&&_r(t,c),h&&h(t)):(e(),f&&f(t)),t._leaveCb=null}));g?g(x):x()}function x(){E.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),k&&(yr(t,c),yr(t,d),kr((function(){_r(t,c),E.cancelled||(yr(t,l),y||(Pr(_)?setTimeout(E,_):Er(t,s,E)))}))),m&&m(t,E),k||y||E())}}function Pr(n){return"number"==typeof n&&!isNaN(n)}function Sr(n){if(a(n))return!1;var e=n.fns;return i(e)?Sr(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function Or(n,e){!0!==e.data.show&&Br(e)}var Ir=function(n){var e,t,o={},l=n.modules,p=n.nodeOps;for(e=0;e<wo.length;++e)for(o[wo[e]]=[],t=0;t<l.length;++t)i(l[t][wo[e]])&&o[wo[e]].push(l[t][wo[e]]);function d(n){var e=p.parentNode(n);i(e)&&p.removeChild(e,n)}function u(n,e,t,r,a,c,l){if(i(n.elm)&&i(c)&&(n=c[l]=gn(n)),n.isRootInsert=!a,!function(n,e,t,r){var a=n.data;if(i(a)){var c=i(n.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(n,!1),i(n.componentInstance))return m(n,e),f(t,n.elm,r),s(c)&&function(n,e,t,r){var a,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,i(a=s.data)&&i(a=a.transition)){for(a=0;a<o.activate.length;++a)o.activate[a](xo,s);e.push(s);break}f(t,n.elm,r)}(n,e,t,r),!0}}(n,e,t,r)){var d=n.data,u=n.children,g=n.tag;i(g)?(n.elm=n.ns?p.createElementNS(n.ns,g):p.createElement(g,n),k(n),h(n,u,e),i(d)&&v(n,e),f(t,n.elm,r)):s(n.isComment)?(n.elm=p.createComment(n.text),f(t,n.elm,r)):(n.elm=p.createTextNode(n.text),f(t,n.elm,r))}}function m(n,e){i(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,g(n)?(v(n,e),k(n)):(_o(n),e.push(n))}function f(n,e,t){i(n)&&(i(t)?p.parentNode(t)===n&&p.insertBefore(n,e,t):p.appendChild(n,e))}function h(n,e,t){if(r(e)){0;for(var o=0;o<e.length;++o)u(e[o],t,n.elm,null,!0,e,o)}else c(n.text)&&p.appendChild(n.elm,p.createTextNode(String(n.text)))}function g(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return i(n.tag)}function v(n,t){for(var r=0;r<o.create.length;++r)o.create[r](xo,n);i(e=n.data.hook)&&(i(e.create)&&e.create(xo,n),i(e.insert)&&t.push(n))}function k(n){var e;if(i(e=n.fnScopeId))p.setStyleScope(n.elm,e);else for(var t=n;t;)i(e=t.context)&&i(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e),t=t.parent;i(e=We)&&e!==n.context&&e!==n.fnContext&&i(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e)}function y(n,e,t,o,r,a){for(;o<=r;++o)u(t[o],a,n,e,!1,t,o)}function _(n){var e,t,r=n.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(n),e=0;e<o.destroy.length;++e)o.destroy[e](n);if(i(e=n.children))for(t=0;t<n.children.length;++t)_(n.children[t])}function E(n,e,t){for(;e<=t;++e){var o=n[e];i(o)&&(i(o.tag)?(x(o),_(o)):d(o.elm))}}function x(n,e){if(i(e)||i(n.data)){var t,r=o.remove.length+1;for(i(e)?e.listeners+=r:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,r),i(t=n.componentInstance)&&i(t=t._vnode)&&i(t.data)&&x(t,e),t=0;t<o.remove.length;++t)o.remove[t](n,e);i(t=n.data.hook)&&i(t=t.remove)?t(n,e):e()}else d(n.elm)}function w(n,e,t,o){for(var r=t;r<o;r++){var a=e[r];if(i(a)&&Co(n,a))return r}}function C(n,e,t,r,c,l){if(n!==e){i(e.elm)&&i(r)&&(e=r[c]=gn(e));var d=e.elm=n.elm;if(s(n.isAsyncPlaceholder))i(e.asyncFactory.resolved)?T(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var m,f=e.data;i(f)&&i(m=f.hook)&&i(m=m.prepatch)&&m(n,e);var h=n.children,v=e.children;if(i(f)&&g(e)){for(m=0;m<o.update.length;++m)o.update[m](n,e);i(m=f.hook)&&i(m=m.update)&&m(n,e)}a(e.text)?i(h)&&i(v)?h!==v&&function(n,e,t,o,r){var s,c,l,d=0,m=0,f=e.length-1,h=e[0],g=e[f],v=t.length-1,b=t[0],k=t[v],_=!r;for(0;d<=f&&m<=v;)a(h)?h=e[++d]:a(g)?g=e[--f]:Co(h,b)?(C(h,b,o,t,m),h=e[++d],b=t[++m]):Co(g,k)?(C(g,k,o,t,v),g=e[--f],k=t[--v]):Co(h,k)?(C(h,k,o,t,v),_&&p.insertBefore(n,h.elm,p.nextSibling(g.elm)),h=e[++d],k=t[--v]):Co(g,b)?(C(g,b,o,t,m),_&&p.insertBefore(n,g.elm,h.elm),g=e[--f],b=t[++m]):(a(s)&&(s=Ao(e,d,f)),a(c=i(b.key)?s[b.key]:w(b,e,d,f))?u(b,o,n,h.elm,!1,t,m):Co(l=e[c],b)?(C(l,b,o,t,m),e[c]=void 0,_&&p.insertBefore(n,l.elm,h.elm)):u(b,o,n,h.elm,!1,t,m),b=t[++m]);d>f?y(n,a(t[v+1])?null:t[v+1].elm,t,m,v,o):m>v&&E(e,d,f)}(d,h,v,t,l):i(v)?(i(n.text)&&p.setTextContent(d,""),y(d,null,v,0,v.length-1,t)):i(h)?E(h,0,h.length-1):i(n.text)&&p.setTextContent(d,""):n.text!==e.text&&p.setTextContent(d,e.text),i(f)&&i(m=f.hook)&&i(m=m.postpatch)&&m(n,e)}}}function A(n,e,t){if(s(t)&&i(n.parent))n.parent.data.pendingInsert=e;else for(var o=0;o<e.length;++o)e[o].data.hook.insert(e[o])}var B=b("attrs,class,staticClass,staticStyle,key");function T(n,e,t,o){var r,a=e.tag,c=e.data,l=e.children;if(o=o||c&&c.pre,e.elm=n,s(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(c)&&(i(r=c.hook)&&i(r=r.init)&&r(e,!0),i(r=e.componentInstance)))return m(e,t),!0;if(i(a)){if(i(l))if(n.hasChildNodes())if(i(r=c)&&i(r=r.domProps)&&i(r=r.innerHTML)){if(r!==n.innerHTML)return!1}else{for(var p=!0,d=n.firstChild,u=0;u<l.length;u++){if(!d||!T(d,l[u],t,o)){p=!1;break}d=d.nextSibling}if(!p||d)return!1}else h(e,l,t);if(i(c)){var f=!1;for(var g in c)if(!B(g)){f=!0,v(e,t);break}!f&&c.class&&Le(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,r){if(!a(e)){var c,l=!1,d=[];if(a(n))l=!0,u(e,d);else{var m=i(n.nodeType);if(!m&&Co(n,e))C(n,e,d,null,null,r);else{if(m){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&T(n,e,d))return A(e,d,!0),n;c=n,n=new mn(p.tagName(c).toLowerCase(),{},[],void 0,c)}var f=n.elm,h=p.parentNode(f);if(u(e,d,f._leaveCb?null:h,p.nextSibling(f)),i(e.parent))for(var v=e.parent,b=g(e);v;){for(var k=0;k<o.destroy.length;++k)o.destroy[k](v);if(v.elm=e.elm,b){for(var y=0;y<o.create.length;++y)o.create[y](xo,v);var x=v.data.hook.insert;if(x.merged)for(var w=1;w<x.fns.length;w++)x.fns[w]()}else _o(v);v=v.parent}i(h)?E([n],0,0):i(n.tag)&&_(n)}}return A(e,d,l),e.elm}i(n)&&_(n)}}({nodeOps:ko,modules:[Mo,Ro,Zo,Xo,sr,H?{create:Or,activate:Or,remove:function(n,e){!0!==n.data.show?Tr(n,e):e()}}:{}].concat(Do)});Y&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&Rr(n,"input")}));var Dr={inserted:function(n,e,t,o){"select"===t.tag?(o.elm&&!o.elm._vOptions?Gn(t,"postpatch",(function(){Dr.componentUpdated(n,e,t)})):zr(n,e,t.context),n._vOptions=[].map.call(n.options,Mr)):("textarea"===t.tag||bo(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",$r),n.addEventListener("compositionend",Fr),n.addEventListener("change",Fr),Y&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){zr(n,e,t.context);var o=n._vOptions,r=n._vOptions=[].map.call(n.options,Mr);if(r.some((function(n,e){return!q(n,o[e])})))(n.multiple?e.value.some((function(n){return qr(n,r)})):e.value!==e.oldValue&&qr(e.value,r))&&Rr(n,"change")}}};function zr(n,e,t){jr(n,e,t),(X||Q)&&setTimeout((function(){jr(n,e,t)}),0)}function jr(n,e,t){var o=e.value,r=n.multiple;if(!r||Array.isArray(o)){for(var a,i,s=0,c=n.options.length;s<c;s++)if(i=n.options[s],r)a=M(o,Mr(i))>-1,i.selected!==a&&(i.selected=a);else if(q(Mr(i),o))return void(n.selectedIndex!==s&&(n.selectedIndex=s));r||(n.selectedIndex=-1)}}function qr(n,e){return e.every((function(e){return!q(e,n)}))}function Mr(n){return"_value"in n?n._value:n.value}function $r(n){n.target.composing=!0}function Fr(n){n.target.composing&&(n.target.composing=!1,Rr(n.target,"input"))}function Rr(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Lr(n){return!n.componentInstance||n.data&&n.data.transition?n:Lr(n.componentInstance._vnode)}var Nr={model:Dr,show:{bind:function(n,e,t){var o=e.value,r=(t=Lr(t)).data&&t.data.transition,a=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;o&&r?(t.data.show=!0,Br(t,(function(){n.style.display=a}))):n.style.display=o?a:"none"},update:function(n,e,t){var o=e.value;!o!=!e.oldValue&&((t=Lr(t)).data&&t.data.transition?(t.data.show=!0,o?Br(t,(function(){n.style.display=n.__vOriginalDisplay})):Tr(t,(function(){n.style.display="none"}))):n.style.display=o?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,o,r){r||(n.style.display=n.__vOriginalDisplay)}}},Ur={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Vr(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Vr(xe(e.children)):n}function Kr(n){var e={},t=n.$options;for(var o in t.propsData)e[o]=n[o];var r=t._parentListeners;for(var o in r)e[C(o)]=r[o];return e}function Gr(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Zr=function(n){return n.tag||me(n)},Hr=function(n){return"show"===n.name},Wr={name:"transition",props:Ur,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Zr)).length){0;var o=this.mode;0;var r=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return r;var a=Vr(r);if(!a)return r;if(this._leaving)return Gr(n,r);var i="__transition-".concat(this._uid,"-");a.key=null==a.key?a.isComment?i+"comment":i+a.tag:c(a.key)?0===String(a.key).indexOf(i)?a.key:i+a.key:a.key;var s=(a.data||(a.data={})).transition=Kr(this),l=this._vnode,p=Vr(l);if(a.data.directives&&a.data.directives.some(Hr)&&(a.data.show=!0),p&&p.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(a,p)&&!me(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var d=p.data.transition=O({},s);if("out-in"===o)return this._leaving=!0,Gn(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Gr(n,r);if("in-out"===o){if(me(a))return l;var u,m=function(){u()};Gn(s,"afterEnter",m),Gn(s,"enterCancelled",m),Gn(d,"delayLeave",(function(n){u=n}))}}return r}}},Xr=O({tag:String,moveClass:String},Ur);function Yr(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Qr(n){n.data.newPos=n.elm.getBoundingClientRect()}function Jr(n){var e=n.data.pos,t=n.data.newPos,o=e.left-t.left,r=e.top-t.top;if(o||r){n.data.moved=!0;var a=n.elm.style;a.transform=a.WebkitTransform="translate(".concat(o,"px,").concat(r,"px)"),a.transitionDuration="0s"}}delete Xr.mode;var na={Transition:Wr,TransitionGroup:{props:Xr,beforeMount:function(){var n=this,e=this._update;this._update=function(t,o){var r=Xe(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,r(),e.call(n,t,o)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),o=this.prevChildren=this.children,r=this.$slots.default||[],a=this.children=[],i=Kr(this),s=0;s<r.length;s++){if((p=r[s]).tag)if(null!=p.key&&0!==String(p.key).indexOf("__vlist"))a.push(p),t[p.key]=p,(p.data||(p.data={})).transition=i;else;}if(o){var c=[],l=[];for(s=0;s<o.length;s++){var p;(p=o[s]).data.transition=i,p.data.pos=p.elm.getBoundingClientRect(),t[p.key]?c.push(p):l.push(p)}this.kept=n(e,null,c),this.removed=l}return n(e,null,a)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Yr),n.forEach(Qr),n.forEach(Jr),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,o=t.style;yr(t,e),o.transform=o.WebkitTransform=o.transitionDuration="",t.addEventListener(hr,t._moveCb=function n(o){o&&o.target!==t||o&&!/transform$/.test(o.propertyName)||(t.removeEventListener(hr,n),t._moveCb=null,_r(t,e))})}})))},methods:{hasMove:function(n,e){if(!mr)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){pr(t,n)})),lr(t,e),t.style.display="none",this.$el.appendChild(t);var o=wr(t);return this.$el.removeChild(t),this._hasMove=o.hasTransform}}}};function ea(n,e){for(var t in e)n[t]=e[t];return n}Kt.config.mustUseProp=function(n,e,t){return"value"===t&&no(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Kt.config.isReservedTag=go,Kt.config.isReservedAttr=Jt,Kt.config.getTagNamespace=function(n){return ho(n)?"svg":"math"===n?"math":void 0},Kt.config.isUnknownElement=function(n){if(!H)return!0;if(go(n))return!1;if(n=n.toLowerCase(),null!=vo[n])return vo[n];var e=document.createElement(n);return n.indexOf("-")>-1?vo[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:vo[n]=/HTMLUnknownElement/.test(e.toString())},O(Kt.options.directives,Nr),O(Kt.options.components,na),Kt.prototype.__patch__=H?Ir:D,Kt.prototype.$mount=function(n,e){return function(n,e,t){var o;n.$el=e,n.$options.render||(n.$options.render=fn),Je(n,"beforeMount"),o=function(){n._update(n._render(),t)},new Ve(n,o,D,{before:function(){n._isMounted&&!n._isDestroyed&&Je(n,"beforeUpdate")}},!0),t=!1;var r=n._preWatchers;if(r)for(var a=0;a<r.length;a++)r[a].run();return null==n.$vnode&&(n._isMounted=!0,Je(n,"mounted")),n}(this,n=n&&H?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},H&&setTimeout((function(){N.devtools&&sn&&sn.emit("init",Kt)}),0);var ta=/[!'()*]/g,oa=function(n){return"%"+n.charCodeAt(0).toString(16)},ra=/%2C/g,aa=function(n){return encodeURIComponent(n).replace(ta,oa).replace(ra,",")};function ia(n){try{return decodeURIComponent(n)}catch(n){0}return n}var sa=function(n){return null==n||"object"==typeof n?n:String(n)};function ca(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),o=ia(t.shift()),r=t.length>0?ia(t.join("=")):null;void 0===e[o]?e[o]=r:Array.isArray(e[o])?e[o].push(r):e[o]=[e[o],r]})),e):e}function la(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return aa(e);if(Array.isArray(t)){var o=[];return t.forEach((function(n){void 0!==n&&(null===n?o.push(aa(e)):o.push(aa(e)+"="+aa(n)))})),o.join("&")}return aa(e)+"="+aa(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var pa=/\/?$/;function da(n,e,t,o){var r=o&&o.options.stringifyQuery,a=e.query||{};try{a=ua(a)}catch(n){}var i={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:a,params:e.params||{},fullPath:ha(e,r),matched:n?fa(n):[]};return t&&(i.redirectedFrom=ha(t,r)),Object.freeze(i)}function ua(n){if(Array.isArray(n))return n.map(ua);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=ua(n[t]);return e}return n}var ma=da(null,{path:"/"});function fa(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function ha(n,e){var t=n.path,o=n.query;void 0===o&&(o={});var r=n.hash;return void 0===r&&(r=""),(t||"/")+(e||la)(o)+r}function ga(n,e,t){return e===ma?n===e:!!e&&(n.path&&e.path?n.path.replace(pa,"")===e.path.replace(pa,"")&&(t||n.hash===e.hash&&va(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&va(n.query,e.query)&&va(n.params,e.params))))}function va(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),o=Object.keys(e).sort();return t.length===o.length&&t.every((function(t,r){var a=n[t];if(o[r]!==t)return!1;var i=e[t];return null==a||null==i?a===i:"object"==typeof a&&"object"==typeof i?va(a,i):String(a)===String(i)}))}function ba(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var o in t.instances){var r=t.instances[o],a=t.enteredCbs[o];if(r&&a){delete t.enteredCbs[o];for(var i=0;i<a.length;i++)r._isBeingDestroyed||a[i](r)}}}}var ka={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,o=e.children,r=e.parent,a=e.data;a.routerView=!0;for(var i=r.$createElement,s=t.name,c=r.$route,l=r._routerViewCache||(r._routerViewCache={}),p=0,d=!1;r&&r._routerRoot!==r;){var u=r.$vnode?r.$vnode.data:{};u.routerView&&p++,u.keepAlive&&r._directInactive&&r._inactive&&(d=!0),r=r.$parent}if(a.routerViewDepth=p,d){var m=l[s],f=m&&m.component;return f?(m.configProps&&ya(f,a,m.route,m.configProps),i(f,a,o)):i()}var h=c.matched[p],g=h&&h.components[s];if(!h||!g)return l[s]=null,i();l[s]={component:g},a.registerRouteInstance=function(n,e){var t=h.instances[s];(e&&t!==n||!e&&t===n)&&(h.instances[s]=e)},(a.hook||(a.hook={})).prepatch=function(n,e){h.instances[s]=e.componentInstance},a.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==h.instances[s]&&(h.instances[s]=n.componentInstance),ba(c)};var v=h.props&&h.props[s];return v&&(ea(l[s],{route:c,configProps:v}),ya(g,a,c,v)),i(g,a,o)}};function ya(n,e,t,o){var r=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,o);if(r){r=e.props=ea({},r);var a=e.attrs=e.attrs||{};for(var i in r)n.props&&i in n.props||(a[i]=r[i],delete r[i])}}function _a(n,e,t){var o=n.charAt(0);if("/"===o)return n;if("?"===o||"#"===o)return e+n;var r=e.split("/");t&&r[r.length-1]||r.pop();for(var a=n.replace(/^\//,"").split("/"),i=0;i<a.length;i++){var s=a[i];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function Ea(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var xa=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},wa=$a,Ca=Sa,Aa=function(n,e){return Ia(Sa(n,e),e)},Ba=Ia,Ta=Ma,Pa=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Sa(n,e){for(var t,o=[],r=0,a=0,i="",s=e&&e.delimiter||"/";null!=(t=Pa.exec(n));){var c=t[0],l=t[1],p=t.index;if(i+=n.slice(a,p),a=p+c.length,l)i+=l[1];else{var d=n[a],u=t[2],m=t[3],f=t[4],h=t[5],g=t[6],v=t[7];i&&(o.push(i),i="");var b=null!=u&&null!=d&&d!==u,k="+"===g||"*"===g,y="?"===g||"*"===g,_=t[2]||s,E=f||h;o.push({name:m||r++,prefix:u||"",delimiter:_,optional:y,repeat:k,partial:b,asterisk:!!v,pattern:E?za(E):v?".*":"[^"+Da(_)+"]+?"})}}return a<n.length&&(i+=n.substr(a)),i&&o.push(i),o}function Oa(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function Ia(n,e){for(var t=new Array(n.length),o=0;o<n.length;o++)"object"==typeof n[o]&&(t[o]=new RegExp("^(?:"+n[o].pattern+")$",qa(e)));return function(e,o){for(var r="",a=e||{},i=(o||{}).pretty?Oa:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,p=a[c.name];if(null==p){if(c.optional){c.partial&&(r+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(xa(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(l=i(p[d]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");r+=(0===d?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):i(p),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');r+=c.prefix+l}}else r+=c}return r}}function Da(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function za(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function ja(n,e){return n.keys=e,n}function qa(n){return n&&n.sensitive?"":"i"}function Ma(n,e,t){xa(e)||(t=e||t,e=[]);for(var o=(t=t||{}).strict,r=!1!==t.end,a="",i=0;i<n.length;i++){var s=n[i];if("string"==typeof s)a+=Da(s);else{var c=Da(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),a+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var p=Da(t.delimiter||"/"),d=a.slice(-p.length)===p;return o||(a=(d?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=r?"$":o&&d?"":"(?="+p+"|$)",ja(new RegExp("^"+a,qa(t)),e)}function $a(n,e,t){return xa(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var o=0;o<t.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ja(n,e)}(n,e):xa(n)?function(n,e,t){for(var o=[],r=0;r<n.length;r++)o.push($a(n[r],e,t).source);return ja(new RegExp("(?:"+o.join("|")+")",qa(t)),e)}(n,e,t):function(n,e,t){return Ma(Sa(n,t),e,t)}(n,e,t)}wa.parse=Ca,wa.compile=Aa,wa.tokensToFunction=Ba,wa.tokensToRegExp=Ta;var Fa=Object.create(null);function Ra(n,e,t){e=e||{};try{var o=Fa[n]||(Fa[n]=wa.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),o(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function La(n,e,t,o){var r="string"==typeof n?{path:n}:n;if(r._normalized)return r;if(r.name){var a=(r=ea({},n)).params;return a&&"object"==typeof a&&(r.params=ea({},a)),r}if(!r.path&&r.params&&e){(r=ea({},r))._normalized=!0;var i=ea(ea({},e.params),r.params);if(e.name)r.name=e.name,r.params=i;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;r.path=Ra(s,i,e.path)}else 0;return r}var c=function(n){var e="",t="",o=n.indexOf("#");o>=0&&(e=n.slice(o),n=n.slice(0,o));var r=n.indexOf("?");return r>=0&&(t=n.slice(r+1),n=n.slice(0,r)),{path:n,query:t,hash:e}}(r.path||""),l=e&&e.path||"/",p=c.path?_a(c.path,l,t||r.append):l,d=function(n,e,t){void 0===e&&(e={});var o,r=t||ca;try{o=r(n||"")}catch(n){o={}}for(var a in e){var i=e[a];o[a]=Array.isArray(i)?i.map(sa):sa(i)}return o}(c.query,r.query,o&&o.options.parseQuery),u=r.hash||c.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:p,query:d,hash:u}}var Na,Ua=function(){},Va={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,o=this.$route,r=t.resolve(this.to,o,this.append),a=r.location,i=r.route,s=r.href,c={},l=t.options.linkActiveClass,p=t.options.linkExactActiveClass,d=null==l?"router-link-active":l,u=null==p?"router-link-exact-active":p,m=null==this.activeClass?d:this.activeClass,f=null==this.exactActiveClass?u:this.exactActiveClass,h=i.redirectedFrom?da(null,La(i.redirectedFrom),null,t):i;c[f]=ga(o,h,this.exactPath),c[m]=this.exact||this.exactPath?c[f]:function(n,e){return 0===n.path.replace(pa,"/").indexOf(e.path.replace(pa,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(o,h);var g=c[f]?this.ariaCurrentValue:null,v=function(n){Ka(n)&&(e.replace?t.replace(a,Ua):t.push(a,Ua))},b={click:Ka};Array.isArray(this.event)?this.event.forEach((function(n){b[n]=v})):b[this.event]=v;var k={class:c},y=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:i,navigate:v,isActive:c[m],isExactActive:c[f]});if(y){if(1===y.length)return y[0];if(y.length>1||!y.length)return 0===y.length?n():n("span",{},y)}if("a"===this.tag)k.on=b,k.attrs={href:s,"aria-current":g};else{var _=function n(e){var t;if(e)for(var o=0;o<e.length;o++){if("a"===(t=e[o]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(_){_.isStatic=!1;var E=_.data=ea({},_.data);for(var x in E.on=E.on||{},E.on){var w=E.on[x];x in b&&(E.on[x]=Array.isArray(w)?w:[w])}for(var C in b)C in E.on?E.on[C].push(b[C]):E.on[C]=v;var A=_.data.attrs=ea({},_.data.attrs);A.href=s,A["aria-current"]=g}else k.on=b}return n(this.tag,k,this.$slots.default)}};function Ka(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Ga="undefined"!=typeof window;function Za(n,e,t,o,r){var a=e||[],i=t||Object.create(null),s=o||Object.create(null);n.forEach((function(n){!function n(e,t,o,r,a,i){var s=r.path,c=r.name;0;var l=r.pathToRegexpOptions||{},p=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return Ea(e.path+"/"+n)}(s,a,l.strict);"boolean"==typeof r.caseSensitive&&(l.sensitive=r.caseSensitive);var d={path:p,regex:Ha(p,l),components:r.components||{default:r.component},alias:r.alias?"string"==typeof r.alias?[r.alias]:r.alias:[],instances:{},enteredCbs:{},name:c,parent:a,matchAs:i,redirect:r.redirect,beforeEnter:r.beforeEnter,meta:r.meta||{},props:null==r.props?{}:r.components?r.props:{default:r.props}};r.children&&r.children.forEach((function(r){var a=i?Ea(i+"/"+r.path):void 0;n(e,t,o,r,d,a)}));t[d.path]||(e.push(d.path),t[d.path]=d);if(void 0!==r.alias)for(var u=Array.isArray(r.alias)?r.alias:[r.alias],m=0;m<u.length;++m){0;var f={path:u[m],children:r.children};n(e,t,o,f,a,d.path||"/")}c&&(o[c]||(o[c]=d))}(a,i,s,n,r)}));for(var c=0,l=a.length;c<l;c++)"*"===a[c]&&(a.push(a.splice(c,1)[0]),l--,c--);return{pathList:a,pathMap:i,nameMap:s}}function Ha(n,e){return wa(n,[],e)}function Wa(n,e){var t=Za(n),o=t.pathList,r=t.pathMap,a=t.nameMap;function i(n,t,i){var s=La(n,t,!1,e),l=s.name;if(l){var p=a[l];if(!p)return c(null,s);var d=p.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var u in t.params)!(u in s.params)&&d.indexOf(u)>-1&&(s.params[u]=t.params[u]);return s.path=Ra(p.path,s.params),c(p,s,i)}if(s.path){s.params={};for(var m=0;m<o.length;m++){var f=o[m],h=r[f];if(Xa(h.regex,s.path,s.params))return c(h,s,i)}}return c(null,s)}function s(n,t){var o=n.redirect,r="function"==typeof o?o(da(n,t,null,e)):o;if("string"==typeof r&&(r={path:r}),!r||"object"!=typeof r)return c(null,t);var s=r,l=s.name,p=s.path,d=t.query,u=t.hash,m=t.params;if(d=s.hasOwnProperty("query")?s.query:d,u=s.hasOwnProperty("hash")?s.hash:u,m=s.hasOwnProperty("params")?s.params:m,l){a[l];return i({_normalized:!0,name:l,query:d,hash:u,params:m},void 0,t)}if(p){var f=function(n,e){return _a(n,e.parent?e.parent.path:"/",!0)}(p,n);return i({_normalized:!0,path:Ra(f,m),query:d,hash:u},void 0,t)}return c(null,t)}function c(n,t,o){return n&&n.redirect?s(n,o||t):n&&n.matchAs?function(n,e,t){var o=i({_normalized:!0,path:Ra(t,e.params)});if(o){var r=o.matched,a=r[r.length-1];return e.params=o.params,c(a,e)}return c(null,e)}(0,t,n.matchAs):da(n,t,o,e)}return{match:i,addRoute:function(n,e){var t="object"!=typeof n?a[n]:void 0;Za([e||n],o,r,a,t),t&&t.alias.length&&Za(t.alias.map((function(n){return{path:n,children:[e]}})),o,r,a,t)},getRoutes:function(){return o.map((function(n){return r[n]}))},addRoutes:function(n){Za(n,o,r,a)}}}function Xa(n,e,t){var o=e.match(n);if(!o)return!1;if(!t)return!0;for(var r=1,a=o.length;r<a;++r){var i=n.keys[r-1];i&&(t[i.name||"pathMatch"]="string"==typeof o[r]?ia(o[r]):o[r])}return!0}var Ya=Ga&&window.performance&&window.performance.now?window.performance:Date;function Qa(){return Ya.now().toFixed(3)}var Ja=Qa();function ni(){return Ja}function ei(n){return Ja=n}var ti=Object.create(null);function oi(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=ea({},window.history.state);return t.key=ni(),window.history.replaceState(t,"",e),window.addEventListener("popstate",ii),function(){window.removeEventListener("popstate",ii)}}function ri(n,e,t,o){if(n.app){var r=n.options.scrollBehavior;r&&n.app.$nextTick((function(){var a=function(){var n=ni();if(n)return ti[n]}(),i=r.call(n,e,t,o?a:null);i&&("function"==typeof i.then?i.then((function(n){di(n,a)})).catch((function(n){0})):di(i,a))}))}}function ai(){var n=ni();n&&(ti[n]={x:window.pageXOffset,y:window.pageYOffset})}function ii(n){ai(),n.state&&n.state.key&&ei(n.state.key)}function si(n){return li(n.x)||li(n.y)}function ci(n){return{x:li(n.x)?n.x:window.pageXOffset,y:li(n.y)?n.y:window.pageYOffset}}function li(n){return"number"==typeof n}var pi=/^#\d/;function di(n,e){var t,o="object"==typeof n;if(o&&"string"==typeof n.selector){var r=pi.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(r){var a=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),o=n.getBoundingClientRect();return{x:o.left-t.left-e.x,y:o.top-t.top-e.y}}(r,a={x:li((t=a).x)?t.x:0,y:li(t.y)?t.y:0})}else si(n)&&(e=ci(n))}else o&&si(n)&&(e=ci(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var ui,mi=Ga&&((-1===(ui=window.navigator.userAgent).indexOf("Android 2.")&&-1===ui.indexOf("Android 4.0")||-1===ui.indexOf("Mobile Safari")||-1!==ui.indexOf("Chrome")||-1!==ui.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function fi(n,e){ai();var t=window.history;try{if(e){var o=ea({},t.state);o.key=ni(),t.replaceState(o,"",n)}else t.pushState({key:ei(Qa())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function hi(n){fi(n,!0)}function gi(n,e,t){var o=function(r){r>=n.length?t():n[r]?e(n[r],(function(){o(r+1)})):o(r+1)};o(0)}var vi={redirected:2,aborted:4,cancelled:8,duplicated:16};function bi(n,e){return yi(n,e,vi.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return _i.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function ki(n,e){return yi(n,e,vi.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function yi(n,e,t,o){var r=new Error(o);return r._isRouter=!0,r.from=n,r.to=e,r.type=t,r}var _i=["params","query","hash"];function Ei(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function xi(n,e){return Ei(n)&&n._isRouter&&(null==e||n.type===e)}function wi(n){return function(e,t,o){var r=!1,a=0,i=null;Ci(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){r=!0,a++;var c,l=Ti((function(e){var r;((r=e).__esModule||Bi&&"Module"===r[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Na.extend(e),t.components[s]=e,--a<=0&&o()})),p=Ti((function(n){var e="Failed to resolve async component "+s+": "+n;i||(i=Ei(n)?n:new Error(e),o(i))}));try{c=n(l,p)}catch(n){p(n)}if(c)if("function"==typeof c.then)c.then(l,p);else{var d=c.component;d&&"function"==typeof d.then&&d.then(l,p)}}})),r||o()}}function Ci(n,e){return Ai(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function Ai(n){return Array.prototype.concat.apply([],n)}var Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Ti(n){var e=!1;return function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];if(!e)return e=!0,n.apply(this,t)}}var Pi=function(n,e){this.router=n,this.base=function(n){if(!n)if(Ga){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=ma,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Si(n,e,t,o){var r=Ci(n,(function(n,o,r,a){var i=function(n,e){"function"!=typeof n&&(n=Na.extend(n));return n.options[e]}(n,e);if(i)return Array.isArray(i)?i.map((function(n){return t(n,o,r,a)})):t(i,o,r,a)}));return Ai(o?r.reverse():r)}function Oi(n,e){if(e)return function(){return n.apply(e,arguments)}}Pi.prototype.listen=function(n){this.cb=n},Pi.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},Pi.prototype.onError=function(n){this.errorCbs.push(n)},Pi.prototype.transitionTo=function(n,e,t){var o,r=this;try{o=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var a=this.current;this.confirmTransition(o,(function(){r.updateRoute(o),e&&e(o),r.ensureURL(),r.router.afterHooks.forEach((function(n){n&&n(o,a)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(n){n(o)})))}),(function(n){t&&t(n),n&&!r.ready&&(xi(n,vi.redirected)&&a===ma||(r.ready=!0,r.readyErrorCbs.forEach((function(e){e(n)}))))}))},Pi.prototype.confirmTransition=function(n,e,t){var o=this,r=this.current;this.pending=n;var a,i,s=function(n){!xi(n)&&Ei(n)&&(o.errorCbs.length?o.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=r.matched.length-1;if(ga(n,r)&&c===l&&n.matched[c]===r.matched[l])return this.ensureURL(),n.hash&&ri(this.router,r,n,!1),s(((i=yi(a=r,n,vi.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",i));var p=function(n,e){var t,o=Math.max(n.length,e.length);for(t=0;t<o&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),d=p.updated,u=p.deactivated,m=p.activated,f=[].concat(function(n){return Si(n,"beforeRouteLeave",Oi,!0)}(u),this.router.beforeHooks,function(n){return Si(n,"beforeRouteUpdate",Oi)}(d),m.map((function(n){return n.beforeEnter})),wi(m)),h=function(e,t){if(o.pending!==n)return s(ki(r,n));try{e(n,r,(function(e){!1===e?(o.ensureURL(!0),s(function(n,e){return yi(n,e,vi.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(r,n))):Ei(e)?(o.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(bi(r,n)),"object"==typeof e&&e.replace?o.replace(e):o.push(e)):t(e)}))}catch(n){s(n)}};gi(f,h,(function(){gi(function(n){return Si(n,"beforeRouteEnter",(function(n,e,t,o){return function(n,e,t){return function(o,r,a){return n(o,r,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),a(n)}))}}(n,t,o)}))}(m).concat(o.router.resolveHooks),h,(function(){if(o.pending!==n)return s(ki(r,n));o.pending=null,e(n),o.router.app&&o.router.app.$nextTick((function(){ba(n)}))}))}))},Pi.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},Pi.prototype.setupListeners=function(){},Pi.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=ma,this.pending=null};var Ii=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Di(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,o=mi&&t;o&&this.listeners.push(oi());var r=function(){var t=n.current,r=Di(n.base);n.current===ma&&r===n._startLocation||n.transitionTo(r,(function(n){o&&ri(e,n,t,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var o=this,r=this.current;this.transitionTo(n,(function(n){fi(Ea(o.base+n.fullPath)),ri(o.router,n,r,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this,r=this.current;this.transitionTo(n,(function(n){hi(Ea(o.base+n.fullPath)),ri(o.router,n,r,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Di(this.base)!==this.current.fullPath){var e=Ea(this.base+this.current.fullPath);n?fi(e):hi(e)}},e.prototype.getCurrentLocation=function(){return Di(this.base)},e}(Pi);function Di(n){var e=window.location.pathname,t=e.toLowerCase(),o=n.toLowerCase();return!n||t!==o&&0!==t.indexOf(Ea(o+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var zi=function(n){function e(e,t,o){n.call(this,e,t),o&&function(n){var e=Di(n);if(!/^\/#/.test(e))return window.location.replace(Ea(n+"/#"+e)),!0}(this.base)||ji()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=mi&&e;t&&this.listeners.push(oi());var o=function(){var e=n.current;ji()&&n.transitionTo(qi(),(function(o){t&&ri(n.router,o,e,!0),mi||Fi(o.fullPath)}))},r=mi?"popstate":"hashchange";window.addEventListener(r,o),this.listeners.push((function(){window.removeEventListener(r,o)}))}},e.prototype.push=function(n,e,t){var o=this,r=this.current;this.transitionTo(n,(function(n){$i(n.fullPath),ri(o.router,n,r,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this,r=this.current;this.transitionTo(n,(function(n){Fi(n.fullPath),ri(o.router,n,r,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;qi()!==e&&(n?$i(e):Fi(e))},e.prototype.getCurrentLocation=function(){return qi()},e}(Pi);function ji(){var n=qi();return"/"===n.charAt(0)||(Fi("/"+n),!1)}function qi(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function Mi(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function $i(n){mi?fi(Mi(n)):window.location.hash=n}function Fi(n){mi?hi(Mi(n)):window.location.replace(Mi(n))}var Ri=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var o=this;this.transitionTo(n,(function(n){o.stack=o.stack.slice(0,o.index+1).concat(n),o.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var o=this;this.transitionTo(n,(function(n){o.stack=o.stack.slice(0,o.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var o=this.stack[t];this.confirmTransition(o,(function(){var n=e.current;e.index=t,e.updateRoute(o),e.router.afterHooks.forEach((function(e){e&&e(o,n)}))}),(function(n){xi(n,vi.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(Pi),Li=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Wa(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!mi&&!1!==n.fallback,this.fallback&&(e="hash"),Ga||(e="abstract"),this.mode=e,e){case"history":this.history=new Ii(this,n.base);break;case"hash":this.history=new zi(this,n.base,this.fallback);break;case"abstract":this.history=new Ri(this,n.base);break;default:0}},Ni={currentRoute:{configurable:!0}};function Ui(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}Li.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Ni.currentRoute.get=function(){return this.history&&this.history.current},Li.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof Ii||t instanceof zi){var o=function(n){t.setupListeners(),function(n){var o=t.current,r=e.options.scrollBehavior;mi&&r&&"fullPath"in n&&ri(e,n,o,!1)}(n)};t.transitionTo(t.getCurrentLocation(),o,o)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},Li.prototype.beforeEach=function(n){return Ui(this.beforeHooks,n)},Li.prototype.beforeResolve=function(n){return Ui(this.resolveHooks,n)},Li.prototype.afterEach=function(n){return Ui(this.afterHooks,n)},Li.prototype.onReady=function(n,e){this.history.onReady(n,e)},Li.prototype.onError=function(n){this.history.onError(n)},Li.prototype.push=function(n,e,t){var o=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){o.history.push(n,e,t)}));this.history.push(n,e,t)},Li.prototype.replace=function(n,e,t){var o=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){o.history.replace(n,e,t)}));this.history.replace(n,e,t)},Li.prototype.go=function(n){this.history.go(n)},Li.prototype.back=function(){this.go(-1)},Li.prototype.forward=function(){this.go(1)},Li.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},Li.prototype.resolve=function(n,e,t){var o=La(n,e=e||this.history.current,t,this),r=this.match(o,e),a=r.redirectedFrom||r.fullPath;return{location:o,route:r,href:function(n,e,t){var o="hash"===t?"#"+e:e;return n?Ea(n+"/"+o):o}(this.history.base,a,this.mode),normalizedTo:o,resolved:r}},Li.prototype.getRoutes=function(){return this.matcher.getRoutes()},Li.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==ma&&this.history.transitionTo(this.history.getCurrentLocation())},Li.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==ma&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Li.prototype,Ni),Li.install=function n(e){if(!n.installed||Na!==e){n.installed=!0,Na=e;var t=function(n){return void 0!==n},o=function(n,e){var o=n.$options._parentVnode;t(o)&&t(o=o.data)&&t(o=o.registerRouteInstance)&&o(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,o(this,this)},destroyed:function(){o(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",ka),e.component("RouterLink",Va);var r=e.config.optionMergeStrategies;r.beforeRouteEnter=r.beforeRouteLeave=r.beforeRouteUpdate=r.created}},Li.version="3.5.4",Li.isNavigationFailure=xi,Li.NavigationFailureType=vi,Li.START_LOCATION=ma,Ga&&window.Vue&&window.Vue.use(Li);var Vi=Li;t(103);t(126);var Ki={NotFound:()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,331)),Layout:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,330))},Gi={"v-6ee71fe0":()=>t.e(6).then(t.bind(null,332)),"v-fc698e82":()=>t.e(7).then(t.bind(null,333)),"v-06a3e7f2":()=>t.e(8).then(t.bind(null,334)),"v-3a9d6f9d":()=>t.e(9).then(t.bind(null,335)),"v-85c7ffce":()=>t.e(10).then(t.bind(null,336)),"v-392d8aae":()=>t.e(11).then(t.bind(null,337)),"v-169b12eb":()=>t.e(12).then(t.bind(null,338)),"v-132121e4":()=>t.e(14).then(t.bind(null,339)),"v-4b9555d9":()=>t.e(13).then(t.bind(null,340)),"v-be755618":()=>t.e(15).then(t.bind(null,341)),"v-26c04c03":()=>t.e(16).then(t.bind(null,342)),"v-4d3d3bec":()=>t.e(17).then(t.bind(null,343)),"v-59c6ef63":()=>t.e(18).then(t.bind(null,344)),"v-0b248a60":()=>t.e(19).then(t.bind(null,345)),"v-2f3eb2e7":()=>t.e(20).then(t.bind(null,346)),"v-1247b65b":()=>t.e(21).then(t.bind(null,347)),"v-cbe0d60a":()=>t.e(22).then(t.bind(null,348)),"v-81d98e10":()=>t.e(23).then(t.bind(null,349)),"v-16eeeecc":()=>t.e(24).then(t.bind(null,350)),"v-c5d8330a":()=>t.e(25).then(t.bind(null,351)),"v-6da5591e":()=>t.e(26).then(t.bind(null,352)),"v-211c03e0":()=>t.e(27).then(t.bind(null,353)),"v-3a9f53ca":()=>t.e(28).then(t.bind(null,354)),"v-6e77716d":()=>t.e(29).then(t.bind(null,355)),"v-77ff5797":()=>t.e(30).then(t.bind(null,356)),"v-256d06ea":()=>t.e(31).then(t.bind(null,357)),"v-395859ae":()=>t.e(32).then(t.bind(null,358)),"v-226c4c47":()=>t.e(33).then(t.bind(null,359)),"v-2ce4f6b6":()=>t.e(34).then(t.bind(null,360)),"v-67301908":()=>t.e(35).then(t.bind(null,361)),"v-fa04c054":()=>t.e(36).then(t.bind(null,362)),"v-6c7b2800":()=>t.e(37).then(t.bind(null,363)),"v-783e73dc":()=>t.e(38).then(t.bind(null,364)),"v-51cd8504":()=>t.e(39).then(t.bind(null,365)),"v-0169ea0d":()=>t.e(40).then(t.bind(null,366)),"v-5b58f46b":()=>t.e(41).then(t.bind(null,367)),"v-92ed690a":()=>t.e(42).then(t.bind(null,368)),"v-d695f1cc":()=>t.e(43).then(t.bind(null,369)),"v-54d78b23":()=>t.e(3).then(t.bind(null,370)),"v-5167d661":()=>t.e(44).then(t.bind(null,371)),"v-240a9dec":()=>t.e(45).then(t.bind(null,372)),"v-397f9139":()=>t.e(46).then(t.bind(null,373)),"v-02ffbd9e":()=>t.e(47).then(t.bind(null,374)),"v-5ee541f8":()=>t.e(48).then(t.bind(null,375)),"v-093891d7":()=>t.e(49).then(t.bind(null,376)),"v-b4021342":()=>t.e(51).then(t.bind(null,377)),"v-1b6d1231":()=>t.e(50).then(t.bind(null,378)),"v-de20ac86":()=>t.e(52).then(t.bind(null,379)),"v-21013b52":()=>t.e(53).then(t.bind(null,380)),"v-6d806f67":()=>t.e(54).then(t.bind(null,381)),"v-d84e5c68":()=>t.e(55).then(t.bind(null,382)),"v-ea1be710":()=>t.e(56).then(t.bind(null,383)),"v-4a20ad90":()=>t.e(57).then(t.bind(null,384)),"v-2e18135a":()=>t.e(58).then(t.bind(null,385)),"v-080925d0":()=>t.e(59).then(t.bind(null,386)),"v-51e55098":()=>t.e(60).then(t.bind(null,387)),"v-4ed9e4ca":()=>t.e(61).then(t.bind(null,388)),"v-50e59150":()=>t.e(62).then(t.bind(null,389)),"v-4c375d97":()=>t.e(63).then(t.bind(null,390)),"v-994f98d2":()=>t.e(64).then(t.bind(null,391)),"v-ea545412":()=>t.e(65).then(t.bind(null,392)),"v-1d3069d2":()=>t.e(66).then(t.bind(null,393)),"v-0c8b6730":()=>t.e(67).then(t.bind(null,394))};function Zi(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Hi=/-(\w)/g,Wi=Zi(n=>n.replace(Hi,(n,e)=>e?e.toUpperCase():"")),Xi=/\B([A-Z])/g,Yi=Zi(n=>n.replace(Xi,"-$1").toLowerCase()),Qi=Zi(n=>n.charAt(0).toUpperCase()+n.slice(1));function Ji(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(Qi(Wi(e))):n(Qi(e))||n(Yi(e))}const ns=Object.assign({},Ki,Gi),es=n=>ns[n],ts=n=>Gi[n],os=n=>Ki[n],rs=n=>Kt.component(n);function as(n){return Ji(ts,n)}function is(n){return Ji(os,n)}function ss(n){return Ji(es,n)}function cs(n){return Ji(rs,n)}function ls(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!cs(n)&&ss(n)){const e=await ss(n)();Kt.component(n,e.default)}}))}function ps(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var ds=t(92),us=t.n(ds),ms=t(93),fs=t.n(ms),hs={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${fs()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=vs(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=bs(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return us()([{name:"description",content:this.$description}],n,this.siteMeta,ks)},updateCanonicalLink(){gs(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",vs(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){bs(null,this.currentMetaTags),gs()}};function gs(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function vs(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function bs(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function ks(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var ys=t(49),_s={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(ys)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),r=window.innerHeight+t;for(let n=0;n<e.length;n++){const a=e[n],i=e[n+1],s=0===n&&0===t||t>=a.parentElement.offsetTop+10&&(!i||t<i.parentElement.offsetTop-10),c=decodeURIComponent(this.$route.hash);if(s&&c!==decodeURIComponent(a.hash)){const t=a;if(r===o)for(let t=n+1;t<e.length;t++)if(c===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},Es=t(23),xs=t.n(Es),ws={mounted(){xs.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Kt.component(n.name)||xs.a.start(),t()}),this.$router.afterEach(()=>{xs.a.done(),this.isSidebarOpen=!1})}};t(233),t(234);class Cs{constructor(){this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}show({text:n="",duration:e=3e3}){let t=document.createElement("div");t.className="message move-in",t.innerHTML=`\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">${n}</div>\n    `,this.containerEl.appendChild(t),e>0&&setTimeout(()=>{this.close(t)},e)}close(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",()=>{n.remove()})}}var As={mounted(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy(){setTimeout(()=>{(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach(n=>{document.querySelectorAll(n).forEach(this.generateCopyButton)})},1e3)},generateCopyButton(n){if(n.classList.contains("codecopy-enabled"))return;const e=document.createElement("i");e.className="code-copy",e.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',e.title="Copy to clipboard",e.addEventListener("click",()=>{this.copyToClipboard(n.innerText)}),n.appendChild(e),n.classList.add("codecopy-enabled")},copyToClipboard(n){const e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy");(new Cs).show({text:"å¤å¶æå ð",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var Bs={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},Ts={},Ps=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},Ss=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:Bs[n]},Os=function n(e,t,o){var r=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))r[n]=t[n];else{var e=n.replace("data","");r.dataset[e]=t[n]}})),o&&o.forEach((function(e){var t=e.tag,o=e.attrs,a=e.children;r.appendChild(n(t,o,a))})),r},Is=function(n,e,t){var o,r=(o=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(o));return 1!==r.length||t?r:r[0]},Ds=function(n,e){var t,o,r=n.match(/<style>([\s\S]+)<\/style>/),a=n.match(/<template>([\s\S]+)<\/template>/),i=n.match(/<script>([\s\S]+)<\/script>/),s={css:r&&r[1].replace(/^\n|\n$/g,""),html:a&&a[1].replace(/^\n|\n$/g,""),js:i&&i[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=Ps(s.html),s.jsTpl=(t=s.js,o=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(o,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),o="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),r=window.Babel?window.Babel.transform(o,{presets:["es2015"]}).code:o,a=[eval][0](r);return a.template=e,a}(s.js,s.html);var c=Ss("vue");return s.jsLib.unshift(c),s},zs=function(n,e){var t,o=n.match(/<style>([\s\S]+)<\/style>/),r=n.match(/<html>([\s\S]+)<\/html>/),a=n.match(/<script>([\s\S]+)<\/script>/),i={css:o&&o[1].replace(/^\n|\n$/g,""),html:r&&r[1].replace(/^\n|\n$/g,""),js:a&&a[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return i.htmlTpl=i.html,i.jsTpl=i.js,i.script=(t=i.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),i},js=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function qs(){var n=Is(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=Is(n,"vuepress-plugin-demo-block__code"),t=Is(n,"vuepress-plugin-demo-block__display"),o=Is(n,"vuepress-plugin-demo-block__footer"),r=Is(t,"vuepress-plugin-demo-block__app"),a=decodeURIComponent(n.dataset.code),i=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);i=i?JSON.parse(i):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,o="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),r=new Function("return ".concat(o))(),a={js:r,css:r.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:js(n),htmlTpl:Ps("")},i=Ss("react"),s=Ss("reactDOM");return a.jsLib.unshift(i,s),a}(a,i):"vanilla"===s?zs(a,i):Ds(a,i),p=Os("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(o.appendChild(p),p.addEventListener("click",Ms.bind(null,p,c,e,o)),Ss("jsfiddle")&&o.appendChild(function(n){var e=n.css,t=n.htmlTpl,o=n.jsTpl,r=n.jsLib,a=n.cssLib,i=r.concat(a).concat(Ss("cssLib")).concat(Ss("jsLib")).join(",");return Os("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:o}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:i}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),Ss("codepen")&&o.appendChild(function(n){var e=n.css,t=n.htmlTpl,o=n.jsTpl,r=n.jsLib,a=n.cssLib,i=JSON.stringify({css:e,html:t,js:o,js_external:r.concat(Ss("jsLib")).join(";"),css_external:a.concat(Ss("cssLib")).join(";"),layout:Ss("codepenLayout"),js_pre_processor:Ss("codepenJsProcessor"),editors:Ss("codepenEditors")});return Os("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:i}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==i.horizontal?i.horizontal:Ss("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var d=e.firstChild.cloneNode(!0);d.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(d)}if(l.css&&function(n){if(!Ts[n]){var e=Os("style",{innerHTML:n});document.body.appendChild(e),Ts[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),r);else if("vue"===s){var u=(new(Vue.extend(l.script))).$mount();r.appendChild(u.$el)}else"vanilla"===s&&(r.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){qs()}),300)}function Ms(n,e,t,o){var r="1"!==n.dataset.isExpand;t.style.height=r?"".concat(e,"px"):0,r?o.classList.add("vuepress-plugin-demo-block__show-link"):o.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=r?"1":"0"}var $s={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},qs()},updated:function(){qs()}},Fs="auto",Rs="zoom-in",Ls="zoom-out",Ns="grab",Us="move";function Vs(n,e,t){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r={passive:!1};o?n.addEventListener(e,t,r):n.removeEventListener(e,t,r)}function Ks(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Gs(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Zs(n,e,t){!function(n){var e=Hs,t=Ws;if(n.transition){var o=n.transition;delete n.transition,n[e]=o}if(n.transform){var r=n.transform;delete n.transform,n[t]=r}}(e);var o=n.style,r={};for(var a in e)t&&(r[a]=o[a]||""),o[a]=e[a];return r}var Hs="transition",Ws="transform",Xs="transform",Ys="transitionend";var Qs=function(){},Js={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:Qs,onClose:Qs,onGrab:Qs,onMove:Qs,onRelease:Qs,onBeforeOpen:Qs,onBeforeClose:Qs,onBeforeGrab:Qs,onBeforeRelease:Qs,onImageLoading:Qs,onImageLoaded:Qs},nc={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),tc(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var o=this.lastScrollPosition.x-e,r=this.lastScrollPosition.y-t,a=this.options.scrollThreshold;(Math.abs(r)>=a||Math.abs(o)>=a)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(ec(n)&&!tc(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){ec(n)&&!tc(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,o=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,o)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,o=e.clientY;this.move(t,o)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function ec(n){return 0===n.button}function tc(n){return n.metaKey||n.ctrlKey}var oc={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Zs(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Vs(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Zs(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ac=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),ic=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},sc={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Gs(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,o=n.transitionDuration,r=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Ns:Ls,transition:Xs+"\n        "+o+"s\n        "+r,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Zs(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Zs(this.el,{transform:"none"})},grab:function(n,e,t){var o=cc(),r=o.x-n,a=o.y-e;Zs(this.el,{cursor:Us,transform:"translate3d(\n        "+(this.translate.x+r)+"px, "+(this.translate.y+a)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var o=cc(),r=o.x-n,a=o.y-e;Zs(this.el,{transition:Xs,transform:"translate3d(\n        "+(this.translate.x+r)+"px, "+(this.translate.y+a)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Zs(this.el,this.styleClose)},restoreOpenStyle:function(){Zs(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=cc(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,o=this.instance.options,r=o.customSize,a=o.scaleBase;if(!r&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(r&&"object"===(void 0===r?"undefined":rc(r)))return{x:r.width/this.rect.width,y:r.height/this.rect.height};var i=this.rect.width/2,s=this.rect.height/2,c=cc(),l={x:c.x-i,y:c.y-s},p=l.x/i,d=l.y/s,u=a+Math.min(p,d);if(r&&"string"==typeof r){var m=t||this.el.naturalWidth,f=e||this.el.naturalHeight,h=parseFloat(r)*m/(100*this.rect.width),g=parseFloat(r)*f/(100*this.rect.height);if(u>h||u>g)return{x:h,y:g}}return{x:u,y:u}}};function cc(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function lc(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(o){Vs(n,o,e[o],t)}))}var pc=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(sc),this.overlay=Object.create(oc),this.handler=Object.create(nc),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=ic({},Js,e),this.overlay.init(this),this.handler.init(this)}return ac(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Rs,Vs(n,"click",this.handler.click),this.options.preloadImage&&Ks(Gs(n)));return this}},{key:"config",value:function(n){return n?(ic(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var o="string"==typeof n?document.querySelector(n):n;if("IMG"===o.tagName){if(this.options.onBeforeOpen(o),this.target.init(o,this),!this.options.preloadImage){var r=this.target.srcOriginal;null!=r&&(this.options.onImageLoading(o),Ks(r,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Vs(document,"scroll",this.handler.scroll),Vs(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Vs(window,"resize",this.handler.resizeWindow);var a=function n(){Vs(o,Ys,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&lc(document,e.handler,!0),t(o)};return Vs(o,Ys,a),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=Fs,this.overlay.fadeOut(),this.target.zoomOut(),Vs(document,"scroll",this.handler.scroll,!1),Vs(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Vs(window,"resize",this.handler.resizeWindow,!1);var o=function o(){Vs(t,Ys,o,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&lc(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Vs(t,Ys,o),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var r=this.target.el;this.options.onBeforeGrab(r),this.released=!1,this.target.grab(n,e,t);var a=function n(){Vs(r,Ys,n,!1),o(r)};return Vs(r,Ys,a),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Us,this.target.move(n,e,t);var r=this.target.el,a=function n(){Vs(r,Ys,n,!1),o(r)};return Vs(r,Ys,a),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=Fs,this.target.restoreOpenStyle();var o=function o(){Vs(t,Ys,o,!1),n.lock=!1,n.released=!0,e(t)};return Vs(t,Ys,o),this}}}]),n}();const dc=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),uc=Number("500");class mc{constructor(){this.instance=new pc(dc)}update(n=".theme-vdoing-content img:not(.no-zoom)"){"undefined"!=typeof window&&this.instance.listen(n)}updateDelay(n=".theme-vdoing-content img:not(.no-zoom)",e=uc){setTimeout(()=>this.update(n),e)}}var fc=[hs,_s,ws,As,$s,{watch:{"$page.path"(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted(){this.$vuepress.zooming=new mc,this.$vuepress.zooming.updateDelay()}}],hc={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return ps("layout",n),Kt.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},gc=t(0),vc=Object(gc.a)(hc,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(vc,"mixins",fc);const bc=[{name:"v-6ee71fe0",path:"/tech/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6ee71fe0").then(t)}},{path:"/tech/index.html",redirect:"/tech/"},{path:"/00.ç®å½é¡µ/01.ææ¯æè°.html",redirect:"/tech/"},{name:"v-fc698e82",path:"/life/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-fc698e82").then(t)}},{path:"/life/index.html",redirect:"/life/"},{path:"/00.ç®å½é¡µ/02.çæ´»éå.html",redirect:"/life/"},{name:"v-06a3e7f2",path:"/pages/yxcypz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-06a3e7f2").then(t)}},{path:"/pages/yxcypz/index.html",redirect:"/pages/yxcypz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.html",redirect:"/pages/yxcypz/"},{name:"v-3a9d6f9d",path:"/pages/yxgjwz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3a9d6f9d").then(t)}},{path:"/pages/yxgjwz/index.html",redirect:"/pages/yxgjwz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.html",redirect:"/pages/yxgjwz/"},{name:"v-85c7ffce",path:"/pages/yxxxwz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-85c7ffce").then(t)}},{path:"/pages/yxxxwz/index.html",redirect:"/pages/yxxxwz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/03.ä¸äºå­¦ä¹ ç½ç«.html",redirect:"/pages/yxxxwz/"},{name:"v-392d8aae",path:"/pages/yxgjaz/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-392d8aae").then(t)}},{path:"/pages/yxgjaz/index.html",redirect:"/pages/yxgjaz/"},{path:"/01.ææ¯æè°/01.å¸¸ç¨æ»ç»/04.ä¸äºå·¥å·å®è£.html",redirect:"/pages/yxgjaz/"},{name:"v-169b12eb",path:"/pages/2022ckjl/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-169b12eb").then(t)}},{path:"/pages/2022ckjl/index.html",redirect:"/pages/2022ckjl/"},{path:"/01.ææ¯æè°/02.è¸©åè®°å½/01.2022è¸©åè®°å½.html",redirect:"/pages/2022ckjl/"},{name:"v-132121e4",path:"/pages/92d322/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-132121e4").then(t)}},{path:"/pages/92d322/index.html",redirect:"/pages/92d322/"},{path:"/01.ææ¯æè°/03.kubernetes/02.k8så­å¨.html",redirect:"/pages/92d322/"},{name:"v-4b9555d9",path:"/pages/k8sjichu/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4b9555d9").then(t)}},{path:"/pages/k8sjichu/index.html",redirect:"/pages/k8sjichu/"},{path:"/01.ææ¯æè°/03.kubernetes/01.k8såºç¡.html",redirect:"/pages/k8sjichu/"},{name:"v-be755618",path:"/pages/9e8904/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-be755618").then(t)}},{path:"/pages/9e8904/index.html",redirect:"/pages/9e8904/"},{path:"/01.ææ¯æè°/03.kubernetes/03.k8sç½ç».html",redirect:"/pages/9e8904/"},{name:"v-26c04c03",path:"/pages/1408c2/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-26c04c03").then(t)}},{path:"/pages/1408c2/index.html",redirect:"/pages/1408c2/"},{path:"/01.ææ¯æè°/03.kubernetes/04.pod cgroupåèµæºéå¶.html",redirect:"/pages/1408c2/"},{name:"v-4d3d3bec",path:"/pages/d395da/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4d3d3bec").then(t)}},{path:"/pages/d395da/index.html",redirect:"/pages/d395da/"},{path:"/01.ææ¯æè°/03.kubernetes/05.æµééå¶.html",redirect:"/pages/d395da/"},{name:"v-59c6ef63",path:"/pages/9594e3/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-59c6ef63").then(t)}},{path:"/pages/9594e3/index.html",redirect:"/pages/9594e3/"},{path:"/01.ææ¯æè°/03.kubernetes/06.ç½ç»ç­ç¥calico.html",redirect:"/pages/9594e3/"},{name:"v-0b248a60",path:"/pages/f1f52d/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0b248a60").then(t)}},{path:"/pages/f1f52d/index.html",redirect:"/pages/f1f52d/"},{path:"/01.ææ¯æè°/03.kubernetes/07.grafanaåpromuthues.html",redirect:"/pages/f1f52d/"},{name:"v-2f3eb2e7",path:"/pages/43f072/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2f3eb2e7").then(t)}},{path:"/pages/43f072/index.html",redirect:"/pages/43f072/"},{path:"/01.ææ¯æè°/03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.html",redirect:"/pages/43f072/"},{name:"v-1247b65b",path:"/pages/070d33/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1247b65b").then(t)}},{path:"/pages/070d33/index.html",redirect:"/pages/070d33/"},{path:"/01.ææ¯æè°/03.kubernetes/09.ceph.html",redirect:"/pages/070d33/"},{name:"v-cbe0d60a",path:"/pages/bfddf3/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-cbe0d60a").then(t)}},{path:"/pages/bfddf3/index.html",redirect:"/pages/bfddf3/"},{path:"/01.ææ¯æè°/03.kubernetes/10.chrony.html",redirect:"/pages/bfddf3/"},{name:"v-81d98e10",path:"/pages/5d5fcc/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-81d98e10").then(t)}},{path:"/pages/5d5fcc/index.html",redirect:"/pages/5d5fcc/"},{path:"/01.ææ¯æè°/03.kubernetes/11.crd operator.html",redirect:"/pages/5d5fcc/"},{name:"v-16eeeecc",path:"/pages/fe3b2b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-16eeeecc").then(t)}},{path:"/pages/fe3b2b/index.html",redirect:"/pages/fe3b2b/"},{path:"/01.ææ¯æè°/03.kubernetes/12.criä¹containerd shimv2.html",redirect:"/pages/fe3b2b/"},{name:"v-c5d8330a",path:"/pages/c3cbc2/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-c5d8330a").then(t)}},{path:"/pages/c3cbc2/index.html",redirect:"/pages/c3cbc2/"},{path:"/01.ææ¯æè°/03.kubernetes/13.harbor.html",redirect:"/pages/c3cbc2/"},{name:"v-6da5591e",path:"/pages/b685a0/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6da5591e").then(t)}},{path:"/pages/b685a0/index.html",redirect:"/pages/b685a0/"},{path:"/01.ææ¯æè°/03.kubernetes/14.helm chart.html",redirect:"/pages/b685a0/"},{name:"v-211c03e0",path:"/pages/1bc186/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-211c03e0").then(t)}},{path:"/pages/1bc186/index.html",redirect:"/pages/1bc186/"},{path:"/01.ææ¯æè°/03.kubernetes/15.Loongnix mips64.html",redirect:"/pages/1bc186/"},{name:"v-3a9f53ca",path:"/pages/717c4b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-3a9f53ca").then(t)}},{path:"/pages/717c4b/index.html",redirect:"/pages/717c4b/"},{path:"/01.ææ¯æè°/03.kubernetes/16.nvidia-device-plugin.html",redirect:"/pages/717c4b/"},{name:"v-6e77716d",path:"/pages/4be786/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6e77716d").then(t)}},{path:"/pages/4be786/index.html",redirect:"/pages/4be786/"},{path:"/01.ææ¯æè°/03.kubernetes/17.openebs-lvm-localpv.html",redirect:"/pages/4be786/"},{name:"v-77ff5797",path:"/pages/f23c30/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-77ff5797").then(t)}},{path:"/pages/f23c30/index.html",redirect:"/pages/f23c30/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/00.dockeråºç¡.html",redirect:"/pages/f23c30/"},{name:"v-256d06ea",path:"/pages/f7bcff/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-256d06ea").then(t)}},{path:"/pages/f7bcff/index.html",redirect:"/pages/f7bcff/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/01.buildxå¤å¹³å°æå»º.html",redirect:"/pages/f7bcff/"},{name:"v-395859ae",path:"/pages/4b6bd5/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-395859ae").then(t)}},{path:"/pages/4b6bd5/index.html",redirect:"/pages/4b6bd5/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/02.dockerfileæ¹æº.html",redirect:"/pages/4b6bd5/"},{name:"v-226c4c47",path:"/pages/74eaf6/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-226c4c47").then(t)}},{path:"/pages/74eaf6/index.html",redirect:"/pages/74eaf6/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/03.dockeréå.html",redirect:"/pages/74eaf6/"},{name:"v-2ce4f6b6",path:"/pages/be8ffb/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2ce4f6b6").then(t)}},{path:"/pages/be8ffb/index.html",redirect:"/pages/be8ffb/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/04.dockeréåä¼å.html",redirect:"/pages/be8ffb/"},{name:"v-67301908",path:"/pages/e29999/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-67301908").then(t)}},{path:"/pages/e29999/index.html",redirect:"/pages/e29999/"},{path:"/01.ææ¯æè°/03.kubernetes/300.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.html",redirect:"/pages/e29999/"},{name:"v-fa04c054",path:"/pages/7a288b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-fa04c054").then(t)}},{path:"/pages/7a288b/index.html",redirect:"/pages/7a288b/"},{path:"/01.ææ¯æè°/04.golang/01.å¸¸ç¨è®¡ç®.html",redirect:"/pages/7a288b/"},{name:"v-6c7b2800",path:"/pages/b587ce/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6c7b2800").then(t)}},{path:"/pages/b587ce/index.html",redirect:"/pages/b587ce/"},{path:"/01.ææ¯æè°/04.golang/02.golangé¢è¯é®é¢.html",redirect:"/pages/b587ce/"},{name:"v-783e73dc",path:"/pages/88c22b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-783e73dc").then(t)}},{path:"/pages/88c22b/index.html",redirect:"/pages/88c22b/"},{path:"/01.ææ¯æè°/04.golang/03.go-æé.html",redirect:"/pages/88c22b/"},{name:"v-51cd8504",path:"/pages/ebb478/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-51cd8504").then(t)}},{path:"/pages/ebb478/index.html",redirect:"/pages/ebb478/"},{path:"/01.ææ¯æè°/04.golang/04.go embed.html",redirect:"/pages/ebb478/"},{name:"v-0169ea0d",path:"/pages/5848e9/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0169ea0d").then(t)}},{path:"/pages/5848e9/index.html",redirect:"/pages/5848e9/"},{path:"/01.ææ¯æè°/04.golang/05.go-å°è£ç»§æ¿åå¤æ.html",redirect:"/pages/5848e9/"},{name:"v-5b58f46b",path:"/pages/b270a4/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5b58f46b").then(t)}},{path:"/pages/b270a4/index.html",redirect:"/pages/b270a4/"},{path:"/01.ææ¯æè°/04.golang/06.go-æä»¶æä½.html",redirect:"/pages/b270a4/"},{name:"v-92ed690a",path:"/pages/417389/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-92ed690a").then(t)}},{path:"/pages/417389/index.html",redirect:"/pages/417389/"},{path:"/01.ææ¯æè°/04.golang/07.go-json.html",redirect:"/pages/417389/"},{name:"v-d695f1cc",path:"/pages/1d629a/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-d695f1cc").then(t)}},{path:"/pages/1d629a/index.html",redirect:"/pages/1d629a/"},{path:"/01.ææ¯æè°/04.golang/08.go-sliceåç.html",redirect:"/pages/1d629a/"},{name:"v-54d78b23",path:"/pages/276ee1/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-54d78b23").then(t)}},{path:"/pages/276ee1/index.html",redirect:"/pages/276ee1/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.html",redirect:"/pages/276ee1/"},{name:"v-5167d661",path:"/pages/25c61d/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5167d661").then(t)}},{path:"/pages/25c61d/index.html",redirect:"/pages/25c61d/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.html",redirect:"/pages/25c61d/"},{name:"v-240a9dec",path:"/pages/d4921b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-240a9dec").then(t)}},{path:"/pages/d4921b/index.html",redirect:"/pages/d4921b/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.html",redirect:"/pages/d4921b/"},{name:"v-397f9139",path:"/pages/e5081b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-397f9139").then(t)}},{path:"/pages/e5081b/index.html",redirect:"/pages/e5081b/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/04.guest kernelåguestos.html",redirect:"/pages/e5081b/"},{name:"v-02ffbd9e",path:"/pages/4df25b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-02ffbd9e").then(t)}},{path:"/pages/4df25b/index.html",redirect:"/pages/4df25b/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/05.kata-monitorçæ§.html",redirect:"/pages/4df25b/"},{name:"v-5ee541f8",path:"/pages/f1a570/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-5ee541f8").then(t)}},{path:"/pages/f1a570/index.html",redirect:"/pages/f1a570/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.html",redirect:"/pages/f1a570/"},{name:"v-093891d7",path:"/pages/2dc340/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-093891d7").then(t)}},{path:"/pages/2dc340/index.html",redirect:"/pages/2dc340/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.html",redirect:"/pages/2dc340/"},{name:"v-b4021342",path:"/pages/84f980/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-b4021342").then(t)}},{path:"/pages/84f980/index.html",redirect:"/pages/84f980/"},{path:"/01.ææ¯æè°/06.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.html",redirect:"/pages/84f980/"},{name:"v-1b6d1231",path:"/pages/cda215/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1b6d1231").then(t)}},{path:"/pages/cda215/index.html",redirect:"/pages/cda215/"},{path:"/01.ææ¯æè°/06.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.html",redirect:"/pages/cda215/"},{name:"v-de20ac86",path:"/pages/69d5c3/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-de20ac86").then(t)}},{path:"/pages/69d5c3/index.html",redirect:"/pages/69d5c3/"},{path:"/01.ææ¯æè°/06.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.html",redirect:"/pages/69d5c3/"},{name:"v-21013b52",path:"/pages/3cb03e/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-21013b52").then(t)}},{path:"/pages/3cb03e/index.html",redirect:"/pages/3cb03e/"},{path:"/01.ææ¯æè°/06.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.html",redirect:"/pages/3cb03e/"},{name:"v-6d806f67",path:"/pages/37753f/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-6d806f67").then(t)}},{path:"/pages/37753f/index.html",redirect:"/pages/37753f/"},{path:"/01.ææ¯æè°/06.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».html",redirect:"/pages/37753f/"},{name:"v-d84e5c68",path:"/pages/821097/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-d84e5c68").then(t)}},{path:"/pages/821097/index.html",redirect:"/pages/821097/"},{path:"/01.ææ¯æè°/06.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.html",redirect:"/pages/821097/"},{name:"v-ea1be710",path:"/pages/7393ee/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-ea1be710").then(t)}},{path:"/pages/7393ee/index.html",redirect:"/pages/7393ee/"},{path:"/01.ææ¯æè°/06.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.html",redirect:"/pages/7393ee/"},{name:"v-4a20ad90",path:"/pages/6f3d25/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4a20ad90").then(t)}},{path:"/pages/6f3d25/index.html",redirect:"/pages/6f3d25/"},{path:"/01.ææ¯æè°/07.èæå/01.å¼å¯ç¡¬ä»¶èæå.html",redirect:"/pages/6f3d25/"},{name:"v-2e18135a",path:"/pages/697e48/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-2e18135a").then(t)}},{path:"/pages/697e48/index.html",redirect:"/pages/697e48/"},{path:"/01.ææ¯æè°/07.èæå/02.èæååºç¡æ¦å¿µ.html",redirect:"/pages/697e48/"},{name:"v-080925d0",path:"/pages/33705b/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-080925d0").then(t)}},{path:"/pages/33705b/index.html",redirect:"/pages/33705b/"},{path:"/01.ææ¯æè°/07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.html",redirect:"/pages/33705b/"},{name:"v-51e55098",path:"/pages/ythx/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-51e55098").then(t)}},{path:"/pages/ythx/index.html",redirect:"/pages/ythx/"},{path:"/02.çæ´»éå/01.å»æ¡æ¥è®°/01.å»æ¡è±é.html",redirect:"/pages/ythx/"},{name:"v-4ed9e4ca",path:"/about/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4ed9e4ca").then(t)}},{path:"/about/index.html",redirect:"/about/"},{path:"/03.å³äº/01.å³äº.html",redirect:"/about/"},{name:"v-50e59150",path:"/books/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-50e59150").then(t)}},{path:"/books/index.html",redirect:"/books/"},{path:"/04.ä¹¦ç±/01.ä¹¦å.html",redirect:"/books/"},{name:"v-4c375d97",path:"/pages/dianzishu/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-4c375d97").then(t)}},{path:"/pages/dianzishu/index.html",redirect:"/pages/dianzishu/"},{path:"/04.ä¹¦ç±/02.çµå­ä¹¦.html",redirect:"/pages/dianzishu/"},{name:"v-994f98d2",path:"/archives/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-994f98d2").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-ea545412",path:"/categories/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-ea545412").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-1d3069d2",path:"/tags/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-1d3069d2").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-0c8b6730",path:"/",component:vc,beforeEnter:(n,e,t)=>{ls("Layout","v-0c8b6730").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:vc}],kc={title:"hff",description:"https://fangfenghuang.github.io/",base:"/",headTags:[["link",{rel:"icon",href:"/img/logo.ico"}],["meta",{name:"keywords",content:"golang,python,c,c++,vue,shell,php"}],["meta",{name:"baidu-site-verification",content:"code-LTKHwOecxI"}],["meta",{name:"theme-color",content:"#11a8cd"}],["meta",{name:"referrer",content:"no-referrer-when-downgrade"}],["link",{rel:"stylesheet",href:"https://at.alicdn.com/t/font_3114978_qe0b39no76.css"}],["script",{language:"javascript",type:"text/javascript",src:"/js/pgmanor-self.js"}]],pages:[{title:"ææ¯æè°",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"01.ææ¯æè°",imgUrl:"/img/tech.png",description:"å­¦ä¹ ãå·¥ä½"}},title:"ææ¯æè°",date:"2020-03-11T21:50:53.000Z",permalink:"/tech/",sidebar:!1,article:!1,comment:!1,editLink:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ææ¯æè°"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ææ¯æè°"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2020-03-11T21:50:53.000Z"},{itemprop:"name",content:"ææ¯æè°"},{itemprop:"description",content:""}]},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88.html",relativePath:"00.ç®å½é¡µ/01.ææ¯æè°.md",key:"v-6ee71fe0",path:"/tech/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/26, 10:59:19",lastUpdatedTimestamp:1658804359e3},{title:"çæ´»éå",frontmatter:{pageComponent:{name:"Catalogue",data:{path:"02.çæ´»éå",imgUrl:"/img/life.png",description:"ä¸ªäººãéç¬"}},title:"çæ´»éå",date:"2020-03-11T21:50:54.000Z",permalink:"/life/",sidebar:!1,article:!1,comment:!1,editLink:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"çæ´»éå"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html"},{property:"og:type",content:"article"},{property:"og:title",content:"çæ´»éå"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2020-03-11T21:50:54.000Z"},{itemprop:"name",content:"çæ´»éå"},{itemprop:"description",content:""}]},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99.html",relativePath:"00.ç®å½é¡µ/02.çæ´»éå.md",key:"v-fc698e82",path:"/life/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/26, 10:59:19",lastUpdatedTimestamp:1658804359e3},{title:"ä¸äºå¸¸ç¨éç½®",frontmatter:{title:"ä¸äºå¸¸ç¨éç½®",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxcypz/",categories:["éç½®"],tags:["å¸¸ç¨"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå¸¸ç¨éç½®"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå¸¸ç¨éç½®"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{itemprop:"name",content:"ä¸äºå¸¸ç¨éç½®"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/01.%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.md",key:"v-06a3e7f2",path:"/pages/yxcypz/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/26, 11:45:15",lastUpdatedTimestamp:1658807115e3},{title:"ä¸äºå·¥å·ç½ç«",frontmatter:{title:"ä¸äºå·¥å·ç½ç«",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxgjwz/",categories:["å·¥å·"],tags:["å¸¸ç¨"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå·¥å·ç½ç«"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå·¥å·ç½ç«"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{itemprop:"name",content:"ä¸äºå·¥å·ç½ç«"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/02.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E7%BD%91%E7%AB%99.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.md",key:"v-3a9d6f9d",path:"/pages/yxgjwz/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"ä¸äºå·¥å·ç½ç«",frontmatter:{title:"ä¸äºå·¥å·ç½ç«",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxxxwz/",categories:["å­¦ä¹ ç½ç«"],tags:["å¸¸ç¨"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå·¥å·ç½ç«"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå·¥å·ç½ç«"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{itemprop:"name",content:"ä¸äºå·¥å·ç½ç«"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/03.%E4%B8%80%E4%BA%9B%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/03.ä¸äºå­¦ä¹ ç½ç«.md",key:"v-85c7ffce",path:"/pages/yxxxwz/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"ä¸äºå·¥å·å®è£",frontmatter:{title:"ä¸äºå·¥å·å®è£",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/yxgjaz/",categories:["å·¥å·"],tags:["å¸¸ç¨"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¸äºå·¥å·å®è£"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸äºå·¥å·å®è£"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{itemprop:"name",content:"ä¸äºå·¥å·å®è£"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/01.%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/04.%E4%B8%80%E4%BA%9B%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85.html",relativePath:"01.ææ¯æè°/01.å¸¸ç¨æ»ç»/04.ä¸äºå·¥å·å®è£.md",key:"v-392d8aae",path:"/pages/yxgjaz/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"2022è¸©åè®°å½",frontmatter:{title:"2022è¸©åè®°å½",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/2022ckjl/",categories:["è¸©åè®°å½"],tags:["å¸¸ç¨"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"2022è¸©åè®°å½"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"},{property:"og:type",content:"article"},{property:"og:title",content:"2022è¸©åè®°å½"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"å¸¸ç¨"},{itemprop:"name",content:"2022è¸©åè®°å½"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/02.%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/01.2022%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html",relativePath:"01.ææ¯æè°/02.è¸©åè®°å½/01.2022è¸©åè®°å½.md",key:"v-169b12eb",path:"/pages/2022ckjl/",headersStr:null,content:"# cordnsååè§£æalpineéåä¸å¼å®¹é®é¢\n\n> 20220622\n\nalpineçæ¬å¼å®¹æ§é®é¢ä¼å¯¼è´backend podécordnsè§£æå¤±è´¥ dockeréåæ¯ä½¿ç¨alpineä½ä¸ºåºåï¼å¦æçæ¬ä¸å¹éä¼å¯¼è´ååè§£æé®é¢ https://stackoverflow.com/questions/65181012/does-alpine-have-known-dns-issue-within-kubernetes https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/dns-debugging-resolution/ https://github.com/kubernetes-sigs/kind/issues/2418\n\n\n# kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å\n\néå¯æå¡å¨ä¼å¯¼è´kata-deployèµ·ä¸æ¥\n\n\n# containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥\n\n\n# éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢\n\nhttps://github.com/containerd/containerd/issues/5597\n\n\n# golang mkdir 777 æéé®é¢\n\nhttps://github.com/golang/go/issues/15210 https://zhuanlan.zhihu.com/p/33692995",normalizedContent:"# cordnsååè§£æalpineéåä¸å¼å®¹é®é¢\n\n> 20220622\n\nalpineçæ¬å¼å®¹æ§é®é¢ä¼å¯¼è´backend podécordnsè§£æå¤±è´¥ dockeréåæ¯ä½¿ç¨alpineä½ä¸ºåºåï¼å¦æçæ¬ä¸å¹éä¼å¯¼è´ååè§£æé®é¢ https://stackoverflow.com/questions/65181012/does-alpine-have-known-dns-issue-within-kubernetes https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/dns-debugging-resolution/ https://github.com/kubernetes-sigs/kind/issues/2418\n\n\n# kata-monitorå®¿ä¸»æºæå¡å¯¹kata-deployçå½±å\n\néå¯æå¡å¨ä¼å¯¼è´kata-deployèµ·ä¸æ¥\n\n\n# containerdéå¯ä¸å½±åå®¹å¨è¿ç¨ï¼dockerä¹å¯ä»¥\n\n\n# éå¯æå¡å¨containerdå¯å¨è¶æ¶é®é¢\n\nhttps://github.com/containerd/containerd/issues/5597\n\n\n# golang mkdir 777 æéé®é¢\n\nhttps://github.com/golang/go/issues/15210 https://zhuanlan.zhihu.com/p/33692995",charsets:{cjk:!0}},{title:"k8så­å¨",frontmatter:{title:"k8så­å¨",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/92d322/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"k8så­å¨"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8så­å¨"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"k8så­å¨"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/02.k8s%E5%AD%98%E5%82%A8.html",relativePath:"01.ææ¯æè°/03.kubernetes/02.k8så­å¨.md",key:"v-132121e4",path:"/pages/92d322/",headers:[{level:2,title:"overlay2",slug:"overlay2",normalizedTitle:"overlay2",charIndex:74},{level:3,title:"æ°å¢ä¸ä¸ªéå",slug:"æ°å¢ä¸ä¸ªéå",normalizedTitle:"æ°å¢ä¸ä¸ªéå",charIndex:1485},{level:3,title:"åæ¶å¤å¶",slug:"åæ¶å¤å¶",normalizedTitle:"åæ¶å¤å¶",charIndex:4167},{level:2,title:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",slug:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",normalizedTitle:"æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",charIndex:4396}],headersStr:"overlay2 æ°å¢ä¸ä¸ªéå åæ¶å¤å¶ æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´",content:'[TOC]\n\n\n# Docker éåå­å¨åç\n\ndockeræ¯æå¤ç§graphDriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­\n\n\n# overlay2\n\nLinux åæ ¸å¨ 4.0 çæ¬å¯¹overlayåäºå¾å¤å¿è¦çæ¹è¿ï¼æ­¤æ¶ç OverlayFS è¢«ç§°ä¹ä¸ºoverlay2\n\n * è¦æ³ä½¿ç¨overlay2ï¼Docker çæ¬å¿é¡»é«äº 17.06.02ã\n * å¦æä½ çæä½ç³»ç»æ¯ RHEL æ CentOSï¼Linux åæ ¸çæ¬å¿é¡»ä½¿ç¨ 3.10.0-514 æèæ´é«çæ¬ï¼å¶ä» Linux åè¡ççåæ ¸çæ¬å¿é¡»é«äº 4.0ï¼ä¾å¦ Ubuntu æ Debianï¼\n * overlay2æå¥½æ­é xfs æä»¶ç³»ç»ä½¿ç¨ï¼å¹¶ä¸ä½¿ç¨ xfs ä½ä¸ºåºå±æä»¶ç³»ç»æ¶ï¼d_typeå¿é¡»å¼å¯ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤éªè¯ d_type æ¯å¦å¼å¯ï¼\n\n$ xfs_info /var/lib/docker | grep ftype\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\n\n\n1\n2\n\n\nverlay2 æ¯è¿æ ·å¨å­æä»¶çï¼ overlay2å°éåå±åå®¹å¨å±é½æ¾å¨åç¬çç®å½ï¼å¹¶ä¸æå¯ä¸ IDï¼æ¯ä¸å±ä»å­å¨åçååçæä»¶ï¼æç»ä½¿ç¨èåæè½½ææ¯å°å®¹å¨å±åéåå±çæææä»¶ç»ä¸æè½½å°å®¹å¨ä¸­ï¼ä½¿å¾å®¹å¨ä¸­çå°å®æ´çç³»ç»æä»¶ã\n\n[root@localhost ~]# docker info | grep Storage\n Storage Driver: overlay2\n\n\n1\n2\n\n\nOverlayé©±å¨çéååªæä¸¤å±ï¼ä¸ä¸ªupperæä»¶ç³»ç»åä¸ä¸ªloweræä»¶ç³»ç»ï¼åå«ä»£è¡¨Dockerçéåå±åå®¹å¨å±\n\nmergedå±æ¯lowerå±åupperå±çç»ä¸è§å¾\n\nå½éè¦ä¿®æ¹ä¸ä¸ªæä»¶æ¶ï¼ä½¿ç¨CoWå°æä»¶ä»åªè¯»çlowerå¤å¶å°å¯åçupperè¿è¡ä¿®æ¹ï¼ç»æä¹ä¿å­å¨upperå±ã\n\nå¨Dockerä¸­ï¼åºä¸çåªè¯»å±å°±æ¯imageï¼å¯åå±å°±æ¯Containerãvoerlay2é©±å¨å­å¨ä½ç½®ä¸º/var/lib/docker/ï¼/app/dockerï¼\n\n[root@tztest kbuser]# ls /app/docker/\nbuilder  buildkit  containerd  containers  image  kubelet  network  overlay2  plugins  runtimes  swarm  tmp  trust  volumes\n[root@tztest kbuser]# ls /app/docker/overlay2/7e32a486c4dc7a52d0685b7fb3e4f6fb4eb7b9ae963f0820285c3659e3f361ca\ncommitted  diff  link  lower  work\n[root@tztest kbuser]# ls /app/docker/image/overlay2\ndistribution  imagedb  layerdb  repositories.json\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n * overlay2ç®å½ï¼å­å¨éååå®¹å¨çå±ä¿¡æ¯\n\n * imageç®å½ï¼å­å¨éååç¸å³ä¿¡æ¯\n\n * repositories.jsonå°±æ¯å­å¨éåä¿¡æ¯ï¼ä¸»è¦æ¯nameåimage idçå¯¹åºï¼digeståimage idçå¯¹åº\n\n\n# æ°å¢ä¸ä¸ªéå\n\n[root@tztest kbuser]# docker images | grep web-demo\nweb-demo_c7cac94                    dev-1648826415118                          df2b573855e0        12 days ago         17.7MB\n[root@tztest kbuser]# ls /app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\ncommitted  diff  link  lower  work\n\nï¼å¯è½æ°å¢å¤ä¸ªéåå±ç®å½æä»¶ï¼\n\n\n//åè®¸ä¸ä¸ªå®¹å¨\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n[root@tztest kbuser]#  docker ps | grep hfftest\n1e73601f56d9        df2b573855e0                                          "sh"                     34 seconds ago      Up 32 seconds       80/tcp, 8080/tcp         hfftest\n\n\n[root@tztest kbuser]# ls /app/docker/overlay2/ -tl\næ»ç¨é 3900\ndrwx------ 5 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0\ndrwx------ 4 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0-init\ndrwx------ 2 root root 69632 4æ  14 16:42 l\ndrwx------ 4 root root  4096 4æ   1 23:22 d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\n//å¤äºä¸¤ä¸ªç®å½ï¼4695d98...108d41eb0ï¼åä¸ä¸ªlç®å½\n\nlç®å½æ¯ä¸å è½¯è¿æ¥ï¼æä¸äºè¾ç­çéæºä¸²è½¯è¿å°éåå±ç diff æä»¶å¤¹ä¸ï¼è¿æ ·åæ¯ä¸ºäºé¿åè¾¾å°mountå½ä»¤åæ°çé¿åº¦éå¶ã\n\n\n[root@tztest kbuser]# docker inspect df2b573855e0 | grep Dir\n\n"LowerDir": "/app/docker/overlay2/d90eefdee868034a568195793cd1c269664a8e459f773cef20cefe5fc81f9e1b/diff:/app/docker/overlay2/b1789038611adaa88789bc8600ff21ebf28d0f4437ae720bfea03b34d50cc689/diff:/app/docker/overlay2/9c3ce321c132b4e638a2187c58d6af6dff58f74c3f49780df8ee4eb80b0dc5f2/diff:/app/docker/overlay2/198313ba0d321e9efa1205820408780b4edb07027456cfcd89cc660bbfa92953/diff",\n"MergedDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/merged",\n"UpperDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/diff",\n"WorkDir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/work"\n\nLowerDirï¼å¯¹åºçæ¯å®¹å¨çåªè¯»éåå±ï¼å¨æ°çæç®å½2c...74-initä¸ï¼\nUpperDirï¼ä¸ºå®¹å¨çå¯è¯»åå±ï¼å¨æ°çæç®å½2c...74ä¸ï¼\nMergedDirï¼ä¸ºåºå±åªè¯»éåå±åä¸å±å¯è¯»åå®¹å¨å±çç»ä¸è§å¾\n\n//åå¥ä¸ä¸ªæä»¶ï¼\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n/app # touch hfftest0414\n/app # echo 111 > hfftest0414\n\n[root@tztest kbuser]# find / -name  hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/diff/app/hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/merged/app/hfftest0414\n//åå¥æä»¶å¨UpperDiråMergedDirä¸­\n\n//åæ­¢å®¹å¨åï¼åå»ºçæä»¶ä»ç¶å­å¨ï¼diff,mergeä¸å¨äºï¼ãå½å®¹å¨è¢«å é¤åï¼ä¸¤ä¸ªæ°å¢ç®å½åå¶ç¸å³æä»¶è¢«å é¤\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n\n\n\n# åæ¶å¤å¶\n\noverlay2 å¯¹æä»¶çä¿®æ¹éç¨çæ¯åæ¶å¤å¶çå·¥ä½æºå¶ï¼\n\n * ç¬¬ä¸æ¬¡ä¿®æ¹æä»¶ï¼å½æä»¬ç¬¬ä¸æ¬¡å¨å®¹å¨ä¸­ä¿®æ¹æä¸ªæä»¶æ¶ï¼overlay2 ä¼è§¦ååæ¶å¤å¶æä½ï¼overlay2 é¦åä»éåå±å¤å¶æä»¶å°å®¹å¨å±ï¼ç¶åå¨å®¹å¨å±æ§è¡å¯¹åºçæä»¶ä¿®æ¹æä½ã\n * å é¤æä»¶æç®å½ï¼å½æä»¶æç®å½è¢«å é¤æ¶ï¼overlay2 å¹¶ä¸ä¼çæ­£ä»éåä¸­å é¤å®ï¼å ä¸ºéåå±æ¯åªè¯»çï¼overlay2 ä¼åå»ºä¸ä¸ªç¹æ®çæä»¶æç®å½ï¼è¿ç§ç¹æ®çæä»¶æç®å½ä¼é»æ­¢å®¹å¨çè®¿é®ã\n\n\n# æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´\n\n[root@tztest kbuser]# docker system df\nTYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE\nImages              117                 51                  18.52GB             11.19GB (60%)\nContainers          203                 100                 2.842GB             1.446GB (50%)\nLocal Volumes       13                  12                  30.42MB             0B (0%)\nBuild Cache         0                   0                   0B                  0B\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# åèèµæ\n\nhttps://www.modb.pro/db/127388',normalizedContent:'[toc]\n\n\n# docker éåå­å¨åç\n\ndockeræ¯æå¤ç§graphdriverï¼åæ¬vfsãdevicemapperãoverlayãoverlay2ãaufsç­ç­\n\n\n# overlay2\n\nlinux åæ ¸å¨ 4.0 çæ¬å¯¹overlayåäºå¾å¤å¿è¦çæ¹è¿ï¼æ­¤æ¶ç overlayfs è¢«ç§°ä¹ä¸ºoverlay2\n\n * è¦æ³ä½¿ç¨overlay2ï¼docker çæ¬å¿é¡»é«äº 17.06.02ã\n * å¦æä½ çæä½ç³»ç»æ¯ rhel æ centosï¼linux åæ ¸çæ¬å¿é¡»ä½¿ç¨ 3.10.0-514 æèæ´é«çæ¬ï¼å¶ä» linux åè¡ççåæ ¸çæ¬å¿é¡»é«äº 4.0ï¼ä¾å¦ ubuntu æ debianï¼\n * overlay2æå¥½æ­é xfs æä»¶ç³»ç»ä½¿ç¨ï¼å¹¶ä¸ä½¿ç¨ xfs ä½ä¸ºåºå±æä»¶ç³»ç»æ¶ï¼d_typeå¿é¡»å¼å¯ï¼å¯ä»¥ä½¿ç¨ä»¥ä¸å½ä»¤éªè¯ d_type æ¯å¦å¼å¯ï¼\n\n$ xfs_info /var/lib/docker | grep ftype\nnaming   =version 2              bsize=4096   ascii-ci=0 ftype=1\n\n\n1\n2\n\n\nverlay2 æ¯è¿æ ·å¨å­æä»¶çï¼ overlay2å°éåå±åå®¹å¨å±é½æ¾å¨åç¬çç®å½ï¼å¹¶ä¸æå¯ä¸ idï¼æ¯ä¸å±ä»å­å¨åçååçæä»¶ï¼æç»ä½¿ç¨èåæè½½ææ¯å°å®¹å¨å±åéåå±çæææä»¶ç»ä¸æè½½å°å®¹å¨ä¸­ï¼ä½¿å¾å®¹å¨ä¸­çå°å®æ´çç³»ç»æä»¶ã\n\n[root@localhost ~]# docker info | grep storage\n storage driver: overlay2\n\n\n1\n2\n\n\noverlayé©±å¨çéååªæä¸¤å±ï¼ä¸ä¸ªupperæä»¶ç³»ç»åä¸ä¸ªloweræä»¶ç³»ç»ï¼åå«ä»£è¡¨dockerçéåå±åå®¹å¨å±\n\nmergedå±æ¯lowerå±åupperå±çç»ä¸è§å¾\n\nå½éè¦ä¿®æ¹ä¸ä¸ªæä»¶æ¶ï¼ä½¿ç¨cowå°æä»¶ä»åªè¯»çlowerå¤å¶å°å¯åçupperè¿è¡ä¿®æ¹ï¼ç»æä¹ä¿å­å¨upperå±ã\n\nå¨dockerä¸­ï¼åºä¸çåªè¯»å±å°±æ¯imageï¼å¯åå±å°±æ¯containerãvoerlay2é©±å¨å­å¨ä½ç½®ä¸º/var/lib/docker/ï¼/app/dockerï¼\n\n[root@tztest kbuser]# ls /app/docker/\nbuilder  buildkit  containerd  containers  image  kubelet  network  overlay2  plugins  runtimes  swarm  tmp  trust  volumes\n[root@tztest kbuser]# ls /app/docker/overlay2/7e32a486c4dc7a52d0685b7fb3e4f6fb4eb7b9ae963f0820285c3659e3f361ca\ncommitted  diff  link  lower  work\n[root@tztest kbuser]# ls /app/docker/image/overlay2\ndistribution  imagedb  layerdb  repositories.json\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n * overlay2ç®å½ï¼å­å¨éååå®¹å¨çå±ä¿¡æ¯\n\n * imageç®å½ï¼å­å¨éååç¸å³ä¿¡æ¯\n\n * repositories.jsonå°±æ¯å­å¨éåä¿¡æ¯ï¼ä¸»è¦æ¯nameåimage idçå¯¹åºï¼digeståimage idçå¯¹åº\n\n\n# æ°å¢ä¸ä¸ªéå\n\n[root@tztest kbuser]# docker images | grep web-demo\nweb-demo_c7cac94                    dev-1648826415118                          df2b573855e0        12 days ago         17.7mb\n[root@tztest kbuser]# ls /app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\ncommitted  diff  link  lower  work\n\nï¼å¯è½æ°å¢å¤ä¸ªéåå±ç®å½æä»¶ï¼\n\n\n//åè®¸ä¸ä¸ªå®¹å¨\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n[root@tztest kbuser]#  docker ps | grep hfftest\n1e73601f56d9        df2b573855e0                                          "sh"                     34 seconds ago      up 32 seconds       80/tcp, 8080/tcp         hfftest\n\n\n[root@tztest kbuser]# ls /app/docker/overlay2/ -tl\næ»ç¨é 3900\ndrwx------ 5 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0\ndrwx------ 4 root root  4096 4æ  14 16:42 4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0-init\ndrwx------ 2 root root 69632 4æ  14 16:42 l\ndrwx------ 4 root root  4096 4æ   1 23:22 d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0\n//å¤äºä¸¤ä¸ªç®å½ï¼4695d98...108d41eb0ï¼åä¸ä¸ªlç®å½\n\nlç®å½æ¯ä¸å è½¯è¿æ¥ï¼æä¸äºè¾ç­çéæºä¸²è½¯è¿å°éåå±ç diff æä»¶å¤¹ä¸ï¼è¿æ ·åæ¯ä¸ºäºé¿åè¾¾å°mountå½ä»¤åæ°çé¿åº¦éå¶ã\n\n\n[root@tztest kbuser]# docker inspect df2b573855e0 | grep dir\n\n"lowerdir": "/app/docker/overlay2/d90eefdee868034a568195793cd1c269664a8e459f773cef20cefe5fc81f9e1b/diff:/app/docker/overlay2/b1789038611adaa88789bc8600ff21ebf28d0f4437ae720bfea03b34d50cc689/diff:/app/docker/overlay2/9c3ce321c132b4e638a2187c58d6af6dff58f74c3f49780df8ee4eb80b0dc5f2/diff:/app/docker/overlay2/198313ba0d321e9efa1205820408780b4edb07027456cfcd89cc660bbfa92953/diff",\n"mergeddir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/merged",\n"upperdir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/diff",\n"workdir": "/app/docker/overlay2/d1142002c8d33580ab1213fff5746027a174d763e37885039df98b7108d41eb0/work"\n\nlowerdirï¼å¯¹åºçæ¯å®¹å¨çåªè¯»éåå±ï¼å¨æ°çæç®å½2c...74-initä¸ï¼\nupperdirï¼ä¸ºå®¹å¨çå¯è¯»åå±ï¼å¨æ°çæç®å½2c...74ä¸ï¼\nmergeddirï¼ä¸ºåºå±åªè¯»éåå±åä¸å±å¯è¯»åå®¹å¨å±çç»ä¸è§å¾\n\n//åå¥ä¸ä¸ªæä»¶ï¼\n[root@tztest kbuser]# docker run --name hfftest -it  df2b573855e0 sh\n/app # touch hfftest0414\n/app # echo 111 > hfftest0414\n\n[root@tztest kbuser]# find / -name  hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/diff/app/hfftest0414\n/app/docker/overlay2/4695d98d682387009f6ab5c84d86599fe35460dae36aea7d00e1561042d630e0/merged/app/hfftest0414\n//åå¥æä»¶å¨upperdiråmergeddirä¸­\n\n//åæ­¢å®¹å¨åï¼åå»ºçæä»¶ä»ç¶å­å¨ï¼diff,mergeä¸å¨äºï¼ãå½å®¹å¨è¢«å é¤åï¼ä¸¤ä¸ªæ°å¢ç®å½åå¶ç¸å³æä»¶è¢«å é¤\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n\n\n\n# åæ¶å¤å¶\n\noverlay2 å¯¹æä»¶çä¿®æ¹éç¨çæ¯åæ¶å¤å¶çå·¥ä½æºå¶ï¼\n\n * ç¬¬ä¸æ¬¡ä¿®æ¹æä»¶ï¼å½æä»¬ç¬¬ä¸æ¬¡å¨å®¹å¨ä¸­ä¿®æ¹æä¸ªæä»¶æ¶ï¼overlay2 ä¼è§¦ååæ¶å¤å¶æä½ï¼overlay2 é¦åä»éåå±å¤å¶æä»¶å°å®¹å¨å±ï¼ç¶åå¨å®¹å¨å±æ§è¡å¯¹åºçæä»¶ä¿®æ¹æä½ã\n * å é¤æä»¶æç®å½ï¼å½æä»¶æç®å½è¢«å é¤æ¶ï¼overlay2 å¹¶ä¸ä¼çæ­£ä»éåä¸­å é¤å®ï¼å ä¸ºéåå±æ¯åªè¯»çï¼overlay2 ä¼åå»ºä¸ä¸ªç¹æ®çæä»¶æç®å½ï¼è¿ç§ç¹æ®çæä»¶æç®å½ä¼é»æ­¢å®¹å¨çè®¿é®ã\n\n\n# æ¥çdockeréåãå®¹å¨ãæ°æ®å·æå ç¨çç©ºé´\n\n[root@tztest kbuser]# docker system df\ntype                total               active              size                reclaimable\nimages              117                 51                  18.52gb             11.19gb (60%)\ncontainers          203                 100                 2.842gb             1.446gb (50%)\nlocal volumes       13                  12                  30.42mb             0b (0%)\nbuild cache         0                   0                   0b                  0b\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# åèèµæ\n\nhttps://www.modb.pro/db/127388',charsets:{cjk:!0}},{title:"k8såºç¡",frontmatter:{title:"k8såºç¡",date:"2021-11-02T09:51:37.000Z",permalink:"/pages/k8sjichu/",categories:["k8s"],tags:["k8s"],author:"fangfenghuang",titleTag:"åå",readingShow:"top",description:"kubectl api-versions\n`",meta:[{name:"twitter:title",content:"k8såºç¡"},{name:"twitter:description",content:"kubectl api-versions\n`"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8såºç¡"},{property:"og:description",content:"kubectl api-versions\n`"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2021-11-02T09:51:37.000Z"},{property:"article:tag",content:"k8s"},{itemprop:"name",content:"k8såºç¡"},{itemprop:"description",content:"kubectl api-versions\n`"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/01.k8s%E5%9F%BA%E7%A1%80.html",relativePath:"01.ææ¯æè°/03.kubernetes/01.k8såºç¡.md",key:"v-4b9555d9",path:"/pages/k8sjichu/",headers:[{level:2,title:"ä½¿ç¨éå¶ï¼",slug:"ä½¿ç¨éå¶",normalizedTitle:"ä½¿ç¨éå¶ï¼",charIndex:2394},{level:2,title:"ææ",slug:"ææ",normalizedTitle:"ææ",charIndex:2549}],headersStr:"ä½¿ç¨éå¶ï¼ ææ",content:"# apiVersion\n\nkubectl api-versions\n\n\n1\n\n\n * alpha åç§°ä¸­å¸¦æalphaçAPIçæ¬æ¯è¿å¥Kubernetesçæ°åè½çæ©æåéçæ¬ãè¿äºå¯è½åå«éè¯¯ï¼å¹¶ä¸ä¸ä¿è¯å°æ¥å¯ä»¥ä½¿ç¨ã\n\n * beta APIçæ¬åç§°ä¸­çbetaè¡¨ç¤ºæµè¯å·²ç»è¶è¿äºalphaçº§å«ï¼å¹¶ä¸è¯¥åè½æç»å°åå«å¨Kubernetesä¸­ã è½ç¶å®çå·¥ä½æ¹å¼å¯è½ä¼æ¹åï¼å¹¶ä¸å¯¹è±¡çå®ä¹æ¹å¼å¯è½ä¼å®å¨æ¹åï¼ä½è¯¥ç¹å¾æ¬èº«å¾å¯è½ä»¥æç§å½¢å¼å°å¶åä¸ºKubernetesã\n\n * stable ç¨³å®çapiVersionè¿äºåç§°ä¸­ä¸åå«alphaæbetaã å®ä»¬å¯ä»¥å®å¨ä½¿ç¨ã\n\n * v1 è¿æ¯Kubernetes APIçç¬¬ä¸ä¸ªç¨³å®çæ¬ã å®åå«è®¸å¤æ ¸å¿å¯¹è±¡ã\n\n * apps/v1 appsæ¯Kubernetesä¸­æå¸¸è§çAPIç»ï¼å¶ä¸­åå«è®¸å¤æ ¸å¿å¯¹è±¡åv1ã å®åæ¬ä¸å¨Kubernetesä¸è¿è¡åºç¨ç¨åºç¸å³çåè½ï¼å¦Deploymentsï¼RollingUpdatesåReplicaSetsã\n\n * autoscaling/v1 æ­¤APIçæ¬åè®¸æ ¹æ®ä¸åçèµæºä½¿ç¨ææ èªå¨è°æ´å®¹å¨ãæ­¤ç¨³å®çæ¬ä»æ¯æCPUæ©å±ï¼ä½æªæ¥çalphaåbetaçæ¬å°åè®¸æ¨æ ¹æ®åå­ä½¿ç¨æåµåèªå®ä¹ææ è¿è¡æ©å±ã\n\n * batch/v1 batchAPIç»åå«ä¸æ¹å¤çåç±»ä¼¼ä½ä¸çä»»å¡ç¸å³çå¯¹è±¡ï¼èä¸æ¯ååºç¨ç¨åºä¸æ ·çä»»å¡ï¼å¦æ éæå°è¿è¡Webæå¡å¨ï¼ã è¿ä¸ªapiVersionæ¯è¿äºAPIå¯¹è±¡çç¬¬ä¸ä¸ªç¨³å®çæ¬ã\n\n * batch/v1beta1 Kubernetesä¸­æ¹å¤çå¯¹è±¡çæ°åè½æµè¯çï¼ç¹å«æ¯åæ¬åè®¸æ¨å¨ç¹å®æ¶é´æå¨æè¿è¡ä½ä¸çCronJobsã\n\n * certificates.k8s.io/v1beta1 æ­¤APIçæ¬æ·»å äºéªè¯ç½ç»è¯ä¹¦çåè½ï¼ä»¥ä¾¿å¨ç¾¤éä¸­è¿è¡å®å¨éä¿¡ã æ¨å¯ä»¥å¨å®æ¹ææ¡£ä¸éè¯»æ´å¤åå®¹ã\n\n * extensions/v1beta1 æ­¤çæ¬çAPIåå«è®¸å¤æ°çå¸¸ç¨Kubernetesåè½ã é¨ç½²ï¼DaemonSetsï¼ReplicaSetåIngressesé½å¨æ­¤çæ¬ä¸­æ¶å°äºéå¤§æ´æ¹ã\n\n * policy/v1beta1 æ­¤apiVersionå¢å äºè®¾ç½®podä¸­æ­é¢ç®åpodå®å¨æ§æ°è§åçåè½\n\n * rbac.authorization.k8s.io/v1 æ­¤apiVersionåå«Kubernetesåºäºè§è²çè®¿é®æ§å¶çé¢å¤åè½ãè¿æå©äºæ¨ä¿æ¤ç¾¤é\n\n\n# resourceVersion\n\nè¿ä¸ªçæ¬å·æ¯ä¸ä¸ª K8s çåé¨æºå¶ï¼ç¨æ·ä¸åºè¯¥åè®¾å®æ¯ä¸ä¸ªæ°å­æèéè¿æ¯è¾ä¸¤ä¸ªçæ¬å·å¤§å°æ¥ç¡®å®èµæºå¯¹è±¡çæ°æ§ï¼å¯ä¸è½åçå°±æ¯éè¿æ¯è¾çæ¬å·ç¸ç­æ¥ç¡®å®å¯¹è±¡æ¯å¦æ¯åä¸ä¸ªçæ¬ï¼å³æ¯å¦åçäºååï¼ãè resourceVersion ä¸ä¸ªéè¦çç¨å¤ï¼å°±æ¯æ¥å update è¯·æ±ççæ¬æ§å¶ã kube-apiserver ä¼æ ¡éªç¨æ· update è¯·æ±æäº¤å¯¹è±¡ä¸­ç resourceVersion ä¸å®è¦åå½å K8s ä¸­è¿ä¸ªå¯¹è±¡ææ°ç resourceVersion ä¸è´ï¼æè½æ¥åæ¬æ¬¡ updateãå¦åï¼K8s ä¼æç»è¯·æ±ï¼å¹¶åè¯ç¨æ·åçäºçæ¬å²çªï¼Conflictï¼ã\n\n\n# Patch æºå¶\n\n * json patch å¨ json patch ä¸­æä»¬è¦æå®æä½ç±»åï¼æ¯å¦ add æ°å¢è¿æ¯ replace æ¿æ¢ï¼å¦å¤å¨ä¿®æ¹ containers åè¡¨æ¶è¦éè¿åç´ åºå·æ¥æå®å®¹å¨ã\n\n * merge patchï¼é»è®¤ï¼ merge patch æ æ³åç¬æ´æ°ä¸ä¸ªåè¡¨ä¸­çæä¸ªåç´ ï¼å æ­¤ä¸ç®¡æä»¬æ¯è¦å¨ containers éæ°å¢å®¹å¨ãè¿æ¯ä¿®æ¹å·²æå®¹å¨ç imageãenv ç­å­æ®µï¼é½è¦ç¨æ´ä¸ª containers åè¡¨æ¥æäº¤ patchï¼\n\n * strategic merge patch å¨æä»¬ patch æ´æ° containers ä¸åéè¦æå®ä¸æ åºå·äºï¼èæ¯æå® name æ¥ä¿®æ¹ï¼K8s ä¼æ name ä½ä¸º key æ¥è®¡ç® mergeã ç®å strategic ç­ç¥åªè½ç¨äºåç K8s èµæºä»¥å Aggregated API æ¹å¼çèªå®ä¹èµæºï¼å¯¹äº CRD å®ä¹çèµæºå¯¹è±¡ï¼æ¯æ æ³ä½¿ç¨çã\n\n\n# externalTrafficPolicyï¼è·³è¿SNAT\n\nå¯¹äºService, å¦ææå®ç±»åä¸º NodePort, é£ä¹è¿ä¸ªç«¯å£ä¼å¨éç¾¤çææ Node ä¸æå¼ï¼å³ä½¿è¿ä¸ªNode ä¸é¢æ²¡æè¿ä¸ªpod\n\nKube-proxyè½¬åæ¶ä¼ä¿çæºIPãå³ï¼å®¹å¨æ¶å°çæ¥æï¼çå°æºIPå°åè¿æ¯ç¨æ·çã\n\nç¼ºç¹æ¯è´è½½åè¡¡å¯è½ä¸æ¯å¾å¥½ï¼å ä¸ºä¸æ¦å®¹å¨å®ä¾åå¸å¨å¤ä¸ªèç¹ä¸ï¼å®åªè½¬åç»æ¬æºï¼ä¸è·¨èç¹è½¬åæµéãå½ç¶ï¼å°äºä¸æ¬¡è½¬åï¼æ§è½ä¼ç¸å¯¹å¥½ä¸ä¸¢ä¸¢ã\n\næ³¨ï¼è¿ç§æ¨¡å¼ä¸çServiceç±»ååªè½ä¸ºå¤é¨æµéï¼å³ï¼LoadBalancer æè NodePort ä¸¤ç§ï¼å¦åä¼æ¥é\n\n\n# å­å¨ç©ºé´èµæºéå¶ephemeral-storage\n\nå¨æ¯ä¸ªKubernetesçèç¹ä¸ï¼kubeletçæ ¹ç®å½(é»è®¤æ¯/var/lib/kubelet)åæ¥å¿ç®å½(/var/log)ä¿å­å¨èç¹çä¸»ååºä¸ï¼è¿ä¸ªååºåæ¶ä¹ä¼è¢«PodçEmptyDirç±»åçvolumeãå®¹å¨æ¥å¿ãéåçå±ãå®¹å¨çå¯åå±æå ç¨ã\n\nresources:\n  requests:\n    cpu: 1\n    memory: 2048Mi\n    ephemeral-storage: 2Gi\n  limits:\n    cpu: 2\n    memory: 2048Mi\n    ephemeral-storage: 5Gi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# ä½¿ç¨éå¶ï¼\n\n * åªè¦Root Diråkubelet --root-dirå¨ä¸ä¸ªååºï¼å°±è½èµ·ä½ç¨\n * å¦æè¿è¡æ¶æå®äºå«çç¬ç«çååºï¼æ¯å¦ä¿®æ¹äºdockerçéåå±åå®¹å¨å¯åå±çå­å¨ä½ç½®(é»è®¤æ¯/var/lib/docker)æå¨çååºï¼å°ä¸åå°å¶è®¡å¥ephemeral-storageçæ¶èã\n\n\n# ææ\n\nå¨å®¹å¨åå¥è¶è¿å­å¨éå¶æ¶å°±ä¼è¢«é©±éæ teststorage 0/1 Evicted 0 1m",normalizedContent:"# apiversion\n\nkubectl api-versions\n\n\n1\n\n\n * alpha åç§°ä¸­å¸¦æalphaçapiçæ¬æ¯è¿å¥kubernetesçæ°åè½çæ©æåéçæ¬ãè¿äºå¯è½åå«éè¯¯ï¼å¹¶ä¸ä¸ä¿è¯å°æ¥å¯ä»¥ä½¿ç¨ã\n\n * beta apiçæ¬åç§°ä¸­çbetaè¡¨ç¤ºæµè¯å·²ç»è¶è¿äºalphaçº§å«ï¼å¹¶ä¸è¯¥åè½æç»å°åå«å¨kubernetesä¸­ã è½ç¶å®çå·¥ä½æ¹å¼å¯è½ä¼æ¹åï¼å¹¶ä¸å¯¹è±¡çå®ä¹æ¹å¼å¯è½ä¼å®å¨æ¹åï¼ä½è¯¥ç¹å¾æ¬èº«å¾å¯è½ä»¥æç§å½¢å¼å°å¶åä¸ºkubernetesã\n\n * stable ç¨³å®çapiversionè¿äºåç§°ä¸­ä¸åå«alphaæbetaã å®ä»¬å¯ä»¥å®å¨ä½¿ç¨ã\n\n * v1 è¿æ¯kubernetes apiçç¬¬ä¸ä¸ªç¨³å®çæ¬ã å®åå«è®¸å¤æ ¸å¿å¯¹è±¡ã\n\n * apps/v1 appsæ¯kubernetesä¸­æå¸¸è§çapiç»ï¼å¶ä¸­åå«è®¸å¤æ ¸å¿å¯¹è±¡åv1ã å®åæ¬ä¸å¨kubernetesä¸è¿è¡åºç¨ç¨åºç¸å³çåè½ï¼å¦deploymentsï¼rollingupdatesåreplicasetsã\n\n * autoscaling/v1 æ­¤apiçæ¬åè®¸æ ¹æ®ä¸åçèµæºä½¿ç¨ææ èªå¨è°æ´å®¹å¨ãæ­¤ç¨³å®çæ¬ä»æ¯æcpuæ©å±ï¼ä½æªæ¥çalphaåbetaçæ¬å°åè®¸æ¨æ ¹æ®åå­ä½¿ç¨æåµåèªå®ä¹ææ è¿è¡æ©å±ã\n\n * batch/v1 batchapiç»åå«ä¸æ¹å¤çåç±»ä¼¼ä½ä¸çä»»å¡ç¸å³çå¯¹è±¡ï¼èä¸æ¯ååºç¨ç¨åºä¸æ ·çä»»å¡ï¼å¦æ éæå°è¿è¡webæå¡å¨ï¼ã è¿ä¸ªapiversionæ¯è¿äºapiå¯¹è±¡çç¬¬ä¸ä¸ªç¨³å®çæ¬ã\n\n * batch/v1beta1 kubernetesä¸­æ¹å¤çå¯¹è±¡çæ°åè½æµè¯çï¼ç¹å«æ¯åæ¬åè®¸æ¨å¨ç¹å®æ¶é´æå¨æè¿è¡ä½ä¸çcronjobsã\n\n * certificates.k8s.io/v1beta1 æ­¤apiçæ¬æ·»å äºéªè¯ç½ç»è¯ä¹¦çåè½ï¼ä»¥ä¾¿å¨ç¾¤éä¸­è¿è¡å®å¨éä¿¡ã æ¨å¯ä»¥å¨å®æ¹ææ¡£ä¸éè¯»æ´å¤åå®¹ã\n\n * extensions/v1beta1 æ­¤çæ¬çapiåå«è®¸å¤æ°çå¸¸ç¨kubernetesåè½ã é¨ç½²ï¼daemonsetsï¼replicasetåingressesé½å¨æ­¤çæ¬ä¸­æ¶å°äºéå¤§æ´æ¹ã\n\n * policy/v1beta1 æ­¤apiversionå¢å äºè®¾ç½®podä¸­æ­é¢ç®åpodå®å¨æ§æ°è§åçåè½\n\n * rbac.authorization.k8s.io/v1 æ­¤apiversionåå«kubernetesåºäºè§è²çè®¿é®æ§å¶çé¢å¤åè½ãè¿æå©äºæ¨ä¿æ¤ç¾¤é\n\n\n# resourceversion\n\nè¿ä¸ªçæ¬å·æ¯ä¸ä¸ª k8s çåé¨æºå¶ï¼ç¨æ·ä¸åºè¯¥åè®¾å®æ¯ä¸ä¸ªæ°å­æèéè¿æ¯è¾ä¸¤ä¸ªçæ¬å·å¤§å°æ¥ç¡®å®èµæºå¯¹è±¡çæ°æ§ï¼å¯ä¸è½åçå°±æ¯éè¿æ¯è¾çæ¬å·ç¸ç­æ¥ç¡®å®å¯¹è±¡æ¯å¦æ¯åä¸ä¸ªçæ¬ï¼å³æ¯å¦åçäºååï¼ãè resourceversion ä¸ä¸ªéè¦çç¨å¤ï¼å°±æ¯æ¥å update è¯·æ±ççæ¬æ§å¶ã kube-apiserver ä¼æ ¡éªç¨æ· update è¯·æ±æäº¤å¯¹è±¡ä¸­ç resourceversion ä¸å®è¦åå½å k8s ä¸­è¿ä¸ªå¯¹è±¡ææ°ç resourceversion ä¸è´ï¼æè½æ¥åæ¬æ¬¡ updateãå¦åï¼k8s ä¼æç»è¯·æ±ï¼å¹¶åè¯ç¨æ·åçäºçæ¬å²çªï¼conflictï¼ã\n\n\n# patch æºå¶\n\n * json patch å¨ json patch ä¸­æä»¬è¦æå®æä½ç±»åï¼æ¯å¦ add æ°å¢è¿æ¯ replace æ¿æ¢ï¼å¦å¤å¨ä¿®æ¹ containers åè¡¨æ¶è¦éè¿åç´ åºå·æ¥æå®å®¹å¨ã\n\n * merge patchï¼é»è®¤ï¼ merge patch æ æ³åç¬æ´æ°ä¸ä¸ªåè¡¨ä¸­çæä¸ªåç´ ï¼å æ­¤ä¸ç®¡æä»¬æ¯è¦å¨ containers éæ°å¢å®¹å¨ãè¿æ¯ä¿®æ¹å·²æå®¹å¨ç imageãenv ç­å­æ®µï¼é½è¦ç¨æ´ä¸ª containers åè¡¨æ¥æäº¤ patchï¼\n\n * strategic merge patch å¨æä»¬ patch æ´æ° containers ä¸åéè¦æå®ä¸æ åºå·äºï¼èæ¯æå® name æ¥ä¿®æ¹ï¼k8s ä¼æ name ä½ä¸º key æ¥è®¡ç® mergeã ç®å strategic ç­ç¥åªè½ç¨äºåç k8s èµæºä»¥å aggregated api æ¹å¼çèªå®ä¹èµæºï¼å¯¹äº crd å®ä¹çèµæºå¯¹è±¡ï¼æ¯æ æ³ä½¿ç¨çã\n\n\n# externaltrafficpolicyï¼è·³è¿snat\n\nå¯¹äºservice, å¦ææå®ç±»åä¸º nodeport, é£ä¹è¿ä¸ªç«¯å£ä¼å¨éç¾¤çææ node ä¸æå¼ï¼å³ä½¿è¿ä¸ªnode ä¸é¢æ²¡æè¿ä¸ªpod\n\nkube-proxyè½¬åæ¶ä¼ä¿çæºipãå³ï¼å®¹å¨æ¶å°çæ¥æï¼çå°æºipå°åè¿æ¯ç¨æ·çã\n\nç¼ºç¹æ¯è´è½½åè¡¡å¯è½ä¸æ¯å¾å¥½ï¼å ä¸ºä¸æ¦å®¹å¨å®ä¾åå¸å¨å¤ä¸ªèç¹ä¸ï¼å®åªè½¬åç»æ¬æºï¼ä¸è·¨èç¹è½¬åæµéãå½ç¶ï¼å°äºä¸æ¬¡è½¬åï¼æ§è½ä¼ç¸å¯¹å¥½ä¸ä¸¢ä¸¢ã\n\næ³¨ï¼è¿ç§æ¨¡å¼ä¸çserviceç±»ååªè½ä¸ºå¤é¨æµéï¼å³ï¼loadbalancer æè nodeport ä¸¤ç§ï¼å¦åä¼æ¥é\n\n\n# å­å¨ç©ºé´èµæºéå¶ephemeral-storage\n\nå¨æ¯ä¸ªkubernetesçèç¹ä¸ï¼kubeletçæ ¹ç®å½(é»è®¤æ¯/var/lib/kubelet)åæ¥å¿ç®å½(/var/log)ä¿å­å¨èç¹çä¸»ååºä¸ï¼è¿ä¸ªååºåæ¶ä¹ä¼è¢«podçemptydirç±»åçvolumeãå®¹å¨æ¥å¿ãéåçå±ãå®¹å¨çå¯åå±æå ç¨ã\n\nresources:\n  requests:\n    cpu: 1\n    memory: 2048mi\n    ephemeral-storage: 2gi\n  limits:\n    cpu: 2\n    memory: 2048mi\n    ephemeral-storage: 5gi\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# ä½¿ç¨éå¶ï¼\n\n * åªè¦root diråkubelet --root-dirå¨ä¸ä¸ªååºï¼å°±è½èµ·ä½ç¨\n * å¦æè¿è¡æ¶æå®äºå«çç¬ç«çååºï¼æ¯å¦ä¿®æ¹äºdockerçéåå±åå®¹å¨å¯åå±çå­å¨ä½ç½®(é»è®¤æ¯/var/lib/docker)æå¨çååºï¼å°ä¸åå°å¶è®¡å¥ephemeral-storageçæ¶èã\n\n\n# ææ\n\nå¨å®¹å¨åå¥è¶è¿å­å¨éå¶æ¶å°±ä¼è¢«é©±éæ teststorage 0/1 evicted 0 1m",charsets:{cjk:!0}},{title:"k8sç½ç»",frontmatter:{title:"k8sç½ç»",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/9e8904/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã",meta:[{name:"twitter:title",content:"k8sç½ç»"},{name:"twitter:description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html"},{property:"og:type",content:"article"},{property:"og:title",content:"k8sç½ç»"},{property:"og:description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"k8sç½ç»"},{itemprop:"description",content:"å®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/03.k8s%E7%BD%91%E7%BB%9C.html",relativePath:"01.ææ¯æè°/03.kubernetes/03.k8sç½ç».md",key:"v-be755618",path:"/pages/9e8904/",headers:[{level:2,title:"docker0:",slug:"docker0",normalizedTitle:"docker0:",charIndex:499},{level:2,title:"calicoç½ç»",slug:"calicoç½ç»",normalizedTitle:"calicoç½ç»",charIndex:1130},{level:3,title:"Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã",slug:"calicoä¸»è¦ç±felixãorchestrator-pluginãetcdãbirdåbgp-router-reflectorç­ç»ä»¶ç»æã",normalizedTitle:"calicoä¸»è¦ç±felixãorchestrator pluginãetcdãbirdåbgp router reflectorç­ç»ä»¶ç»æã",charIndex:1143},{level:3,title:"BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",slug:"bgp-pod-1è·¨èç¹è®¿é®pod-2å¤§è´æµç¨å¦ä¸",normalizedTitle:"bgp: pod 1è·¨èç¹è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼",charIndex:1446},{level:3,title:"Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼",slug:"calico-route-reflectoræ¨¡å¼-rr-è·¯ç±å¨åå°",normalizedTitle:"calico route reflectoræ¨¡å¼ï¼rrï¼ï¼è·¯ç±å¨åå°ï¼",charIndex:1680},{level:3,title:"IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",slug:"ipip-pod-1è®¿é®pod-2å¤§è´æµç¨å¦ä¸",normalizedTitle:"ipip: pod 1è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼",charIndex:1767}],headersStr:"docker0: calicoç½ç» Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼ Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼ IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼",content:"# dockerç½ç»\n\nå®¹å¨ç½ç»åç«¯äº Docker çç½ç»ãDocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç IPã\n\ndocker0ï¼Dockeræå¡ä¼å¨å®æå¨çæºå¨ä¸åå»ºä¸ä¸ªåä¸ºdocker0çç½æ¡¥ã docker0çIPå°åä¸º172.17.0.1ï¼å­ç½æ©ç ä¸º255.255.0.0ã\n\n[root@rqy-k8s-2 kbuser]# docker network ls NETWORK ID NAME DRIVER SCOPE e29e51f3f12a bridge bridge local b70c41f7568e host host local 3a890954cce6 none null local\n\nDockerå®¹å¨å¨å¯å¨æ¶ï¼å¦ææ²¡ææ¾å¼æå®å å¥ä»»ä½ç½ç»ï¼å°±ä¼é»è®¤å å¥å°åä¸ºbridgeçç½ç»ãèè¿ä¸ªbridgeç½ç»å°±æ¯åºäºdocker0å®ç°çã å å¥hostç½ç»çå®¹å¨ï¼å¯ä»¥å®ç°åDocker daemonå®æ¤è¿ç¨ï¼ä¹å°±æ¯Dockeræå¡ï¼æå¨çå®¿ä¸»æºç½ç»ç¯å¢è¿è¡ç´æ¥éä¿¡ noneç½ç»ï¼åè¡¨ç¤ºå®¹å¨å¨å¯å¨æ¶ä¸å¸¦ä»»ä½ç½ç»è®¾å¤ã\n\n\n# k8sç½ç»\n\n\n# docker0:\n\n 1. åä¸Podåçå®¹å¨é´éä¿¡: å ä¸ºpauseå®¹å¨æä¾podåç½ç»å±äº«ï¼æä»¥å®¹å¨ç´æ¥å¯ä»¥ä½¿ç¨localhost(lo)è®¿é®å¶ä»å®¹å¨\n\n 2. åPodå½¼æ­¤ä¹é´çéä¿¡(ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢, ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸) 1)ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢: éè¿dockeré»è®¤çdockerç½æ¡¥äºè¿å®¹å¨(docker0), ifconfig æ¥äºdocker0 2)ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸: éè¿CNIæä»¶å®ç°ï¼eg: flannel,calico\n\n 3. Podä¸Serviceé´çéä¿¡ Serviceåéçipå«cluster ipæ¯ä¸ä¸ªèæipï¼ç¸å¯¹åºå®ï¼é¤éå é¤serviceï¼ï¼è¿ä¸ªipåªè½å¨k8séç¾¤åé¨ä½¿ç¨ï¼ å¦æserviceéè¦å¯¹å¤æä¾ï¼åªè½ä½¿ç¨Nodeportæ¹å¼æ å°å°ä¸»æºä¸ï¼ä½¿ç¨ä¸»æºçipåç«¯å£å¯¹å¤æä¾æå¡ã èç¹ä¸é¢æä¸ªkube-proxyè¿ç¨ï¼è¿ä¸ªè¿ç¨ä»master apiserverè·åä¿¡æ¯ï¼æç¥serviceåendpointçåå»ºï¼ç¶ååä¸¤ä¸ªäºï¼ 1.ä¸ºæ¯ä¸ªservice å¨éç¾¤ä¸­æ¯ä¸ªèç¹ä¸é¢åå»ºä¸ä¸ªéæºç«¯å£ï¼ä»»ä½è¯¥ç«¯å£ä¸é¢çè¿æ¥ä¼ä»£çå°ç¸åºçpod 2.éç¾¤ä¸­æ¯ä¸ªèç¹å®è£iptables/ipvsè§åï¼ç¨äºclusterip + portè·¯ç±å°ä¸ä¸æ­¥å®ä¹çéæºç«¯å£ä¸é¢ï¼ æä»¥éç¾¤ä¸­æ¯ä¸ªnodeä¸é¢é½æserviceçè½¬åè§å:iptables -L -n -t filter\n\n\n# calicoç½ç»\n\n\n# Calicoä¸»è¦ç±FelixãOrchestrator PluginãetcdãBIRDåBGP Router Reflectorç­ç»ä»¶ç»æã\n\n * Felixï¼Calico Agentï¼è¿è¡äºæ¯ä¸ªèç¹ã\n * Orchestrator Plugiï¼ç¼æç³»ç»ï¼å¦ Kubernetes ã OpenStack ç­ï¼ä»¥å° Calicoæ´åè¿ç³»ç»ä¸­çæä»¶ï¼ä¾å¦KubernetesçCNIã\n * etcdï¼æä¹å­å¨Calicoæ°æ®çå­å¨ç®¡çç³»ç»ã\n * BIRDï¼ç¨äºååè·¯ç±ä¿¡æ¯çBGPå®¢æ·ç«¯ã\n * BGP Route Reflectorï¼BGPè·¯ç±åå°å¨ï¼å¯éç»ä»¶ï¼ç¨äºè¾å¤§è§æ¨¡çç½ç»åºæ¯ã\n\n\n# BGP: Pod 1è·¨èç¹è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾Veth Pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. å®¿ä¸»æºæ ¹æ®è·¯ç±è§åï¼å°æ°æ®åè½¬åç»ä¸ä¸è·³ï¼ç½å³ï¼ï¼\n 3. å°è¾¾Node2ï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã è¿éææ ¸å¿çâä¸ä¸è·³âè·¯ç±è§åï¼å°±æ¯ç±CalicoçFelixè¿ç¨è´è´£ç»´æ¤çãè¿äºè·¯ç±è§åä¿¡æ¯ï¼åæ¯éè¿BGP Clientä¹å°±æ¯BIRDç»ä»¶ï¼ä½¿ç¨BGPåè®®ä¼ è¾èæ¥çã\n\n\n# Calico Route Reflectoræ¨¡å¼ï¼RRï¼ï¼è·¯ç±å¨åå°ï¼\n\nCalicoç»´æ¤çç½ç»å¨é»è®¤æ¯ï¼Node-to-Node Meshï¼å¨äºèæ¨¡å¼ï¼meshï¼\n\n\n# IPIP: Pod 1è®¿é®Pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾Veth Pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. è¿å¥IPé§éè®¾å¤ï¼tunl0ï¼ï¼ç±Linuxåæ ¸IPIPé©±å¨å°è£å¨å®¿ä¸»æºç½ç»çIPåä¸­ï¼æ°çIPåç®çå°ä¹æ¯åIPåçä¸ä¸è·³å°åï¼å³192.168.31.63ï¼ï¼è¿æ ·ï¼å°±æäºNode1å°Node2çæ°æ®åï¼\n 3. æ°æ®åç»è¿è·¯ç±å¨ä¸å±è½¬åå°Node2ï¼\n 4. Node2æ¶å°æ°æ®ååï¼ç½ç»åè®®æ ä¼ä½¿ç¨IPIPé©±å¨è¿è¡è§£åï¼ä»ä¸­æ¿å°åå§IPåï¼\n 5. ç¶åæ ¹æ®è·¯ç±è§åï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã",normalizedContent:"# dockerç½ç»\n\nå®¹å¨ç½ç»åç«¯äº docker çç½ç»ãdocker ä½¿ç¨äºä¸ä¸ªæ¯è¾ç®åçç½ç»æ¨¡åï¼å³åé¨çç½æ¡¥å åé¨çä¿ç ipã\n\ndocker0ï¼dockeræå¡ä¼å¨å®æå¨çæºå¨ä¸åå»ºä¸ä¸ªåä¸ºdocker0çç½æ¡¥ã docker0çipå°åä¸º172.17.0.1ï¼å­ç½æ©ç ä¸º255.255.0.0ã\n\n[root@rqy-k8s-2 kbuser]# docker network ls network id name driver scope e29e51f3f12a bridge bridge local b70c41f7568e host host local 3a890954cce6 none null local\n\ndockerå®¹å¨å¨å¯å¨æ¶ï¼å¦ææ²¡ææ¾å¼æå®å å¥ä»»ä½ç½ç»ï¼å°±ä¼é»è®¤å å¥å°åä¸ºbridgeçç½ç»ãèè¿ä¸ªbridgeç½ç»å°±æ¯åºäºdocker0å®ç°çã å å¥hostç½ç»çå®¹å¨ï¼å¯ä»¥å®ç°ådocker daemonå®æ¤è¿ç¨ï¼ä¹å°±æ¯dockeræå¡ï¼æå¨çå®¿ä¸»æºç½ç»ç¯å¢è¿è¡ç´æ¥éä¿¡ noneç½ç»ï¼åè¡¨ç¤ºå®¹å¨å¨å¯å¨æ¶ä¸å¸¦ä»»ä½ç½ç»è®¾å¤ã\n\n\n# k8sç½ç»\n\n\n# docker0:\n\n 1. åä¸podåçå®¹å¨é´éä¿¡: å ä¸ºpauseå®¹å¨æä¾podåç½ç»å±äº«ï¼æä»¥å®¹å¨ç´æ¥å¯ä»¥ä½¿ç¨localhost(lo)è®¿é®å¶ä»å®¹å¨\n\n 2. åpodå½¼æ­¤ä¹é´çéä¿¡(ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢, ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸) 1)ä¸¤ä¸ªpodå¨ä¸å°ä¸»æºä¸é¢: éè¿dockeré»è®¤çdockerç½æ¡¥äºè¿å®¹å¨(docker0), ifconfig æ¥äºdocker0 2)ä¸¤ä¸ªpodåå¸å¨ä¸åä¸»æºä¹ä¸: éè¿cniæä»¶å®ç°ï¼eg: flannel,calico\n\n 3. podä¸serviceé´çéä¿¡ serviceåéçipå«cluster ipæ¯ä¸ä¸ªèæipï¼ç¸å¯¹åºå®ï¼é¤éå é¤serviceï¼ï¼è¿ä¸ªipåªè½å¨k8séç¾¤åé¨ä½¿ç¨ï¼ å¦æserviceéè¦å¯¹å¤æä¾ï¼åªè½ä½¿ç¨nodeportæ¹å¼æ å°å°ä¸»æºä¸ï¼ä½¿ç¨ä¸»æºçipåç«¯å£å¯¹å¤æä¾æå¡ã èç¹ä¸é¢æä¸ªkube-proxyè¿ç¨ï¼è¿ä¸ªè¿ç¨ä»master apiserverè·åä¿¡æ¯ï¼æç¥serviceåendpointçåå»ºï¼ç¶ååä¸¤ä¸ªäºï¼ 1.ä¸ºæ¯ä¸ªservice å¨éç¾¤ä¸­æ¯ä¸ªèç¹ä¸é¢åå»ºä¸ä¸ªéæºç«¯å£ï¼ä»»ä½è¯¥ç«¯å£ä¸é¢çè¿æ¥ä¼ä»£çå°ç¸åºçpod 2.éç¾¤ä¸­æ¯ä¸ªèç¹å®è£iptables/ipvsè§åï¼ç¨äºclusterip + portè·¯ç±å°ä¸ä¸æ­¥å®ä¹çéæºç«¯å£ä¸é¢ï¼ æä»¥éç¾¤ä¸­æ¯ä¸ªnodeä¸é¢é½æserviceçè½¬åè§å:iptables -l -n -t filter\n\n\n# calicoç½ç»\n\n\n# calicoä¸»è¦ç±felixãorchestrator pluginãetcdãbirdåbgp router reflectorç­ç»ä»¶ç»æã\n\n * felixï¼calico agentï¼è¿è¡äºæ¯ä¸ªèç¹ã\n * orchestrator plugiï¼ç¼æç³»ç»ï¼å¦ kubernetes ã openstack ç­ï¼ä»¥å° calicoæ´åè¿ç³»ç»ä¸­çæä»¶ï¼ä¾å¦kubernetesçcniã\n * etcdï¼æä¹å­å¨calicoæ°æ®çå­å¨ç®¡çç³»ç»ã\n * birdï¼ç¨äºååè·¯ç±ä¿¡æ¯çbgpå®¢æ·ç«¯ã\n * bgp route reflectorï¼bgpè·¯ç±åå°å¨ï¼å¯éç»ä»¶ï¼ç¨äºè¾å¤§è§æ¨¡çç½ç»åºæ¯ã\n\n\n# bgp: pod 1è·¨èç¹è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾veth pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. å®¿ä¸»æºæ ¹æ®è·¯ç±è§åï¼å°æ°æ®åè½¬åç»ä¸ä¸è·³ï¼ç½å³ï¼ï¼\n 3. å°è¾¾node2ï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã è¿éææ ¸å¿çâä¸ä¸è·³âè·¯ç±è§åï¼å°±æ¯ç±calicoçfelixè¿ç¨è´è´£ç»´æ¤çãè¿äºè·¯ç±è§åä¿¡æ¯ï¼åæ¯éè¿bgp clientä¹å°±æ¯birdç»ä»¶ï¼ä½¿ç¨bgpåè®®ä¼ è¾èæ¥çã\n\n\n# calico route reflectoræ¨¡å¼ï¼rrï¼ï¼è·¯ç±å¨åå°ï¼\n\ncalicoç»´æ¤çç½ç»å¨é»è®¤æ¯ï¼node-to-node meshï¼å¨äºèæ¨¡å¼ï¼meshï¼\n\n\n# ipip: pod 1è®¿é®pod 2å¤§è´æµç¨å¦ä¸ï¼\n\n 1. æ°æ®åä»å®¹å¨1åºå°è¾¾veth pairå¦ä¸ç«¯ï¼å®¿ä¸»æºä¸ï¼ä»¥caliåç¼å¼å¤´ï¼ï¼\n 2. è¿å¥ipé§éè®¾å¤ï¼tunl0ï¼ï¼ç±linuxåæ ¸ipipé©±å¨å°è£å¨å®¿ä¸»æºç½ç»çipåä¸­ï¼æ°çipåç®çå°ä¹æ¯åipåçä¸ä¸è·³å°åï¼å³192.168.31.63ï¼ï¼è¿æ ·ï¼å°±æäºnode1å°node2çæ°æ®åï¼\n 3. æ°æ®åç»è¿è·¯ç±å¨ä¸å±è½¬åå°node2ï¼\n 4. node2æ¶å°æ°æ®ååï¼ç½ç»åè®®æ ä¼ä½¿ç¨ipipé©±å¨è¿è¡è§£åï¼ä»ä¸­æ¿å°åå§ipåï¼\n 5. ç¶åæ ¹æ®è·¯ç±è§åï¼æ ¹æ®è·¯ç±è§åå°æ°æ®åè½¬åç»caliè®¾å¤ï¼ä»èå°è¾¾å®¹å¨2ã",charsets:{cjk:!0}},{title:"pod cgroupåèµæºéå¶",frontmatter:{title:"pod cgroupåèµæºéå¶",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/1408c2/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã",meta:[{name:"twitter:title",content:"pod cgroupåèµæºéå¶"},{name:"twitter:description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"pod cgroupåèµæºéå¶"},{property:"og:description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"pod cgroupåèµæºéå¶"},{itemprop:"description",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/04.pod%20cgroup%E5%92%8C%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/04.pod cgroupåèµæºéå¶.md",key:"v-26c04c03",path:"/pages/1408c2/",headers:[{level:2,title:"å®¹å¨çº§å«çCgroup",slug:"å®¹å¨çº§å«çcgroup",normalizedTitle:"å®¹å¨çº§å«çcgroup",charIndex:1936},{level:2,title:"Podçº§å«çCgroup",slug:"podçº§å«çcgroup",normalizedTitle:"podçº§å«çcgroup",charIndex:2119},{level:2,title:"QoSçº§å«çCgroup",slug:"qosçº§å«çcgroup",normalizedTitle:"qosçº§å«çcgroup",charIndex:2635},{level:2,title:"èç¹Nodeçº§å«çCgroup",slug:"èç¹nodeçº§å«çcgroup",normalizedTitle:"èç¹nodeçº§å«çcgroup",charIndex:3026},{level:2,title:"Eviction",slug:"eviction",normalizedTitle:"eviction",charIndex:3723}],headersStr:"å®¹å¨çº§å«çCgroup Podçº§å«çCgroup QoSçº§å«çCgroup èç¹Nodeçº§å«çCgroup Eviction",content:"Cgroups æ¯ Control Groups çç¼©åï¼ç± Linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼CPUãåå­ãi/oï¼ã\n\n[root@localhost ~]# mount -t cgroup\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_prio,net_cls)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct,cpu)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\ncpusetãcpuã memoryå­ç³»ç»\n\ncfs_periodåcfs_quota:éå¶è¿ç¨å¨é¿åº¦ä¸ºcfs_periodçä¸æ®µæ¶é´åï¼åªè½è¢«åéå°æ»éä¸ºcfs_quotaçCPUæ¶é´,CPU quotaé»è®¤æ²¡æä»»ä½éå¶ï¼å³ï¼-1ï¼,CPU periodé»è®¤100 msï¼100000 usï¼\n\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_quota_us\n-1\n\n\n1\n2\n3\n4\n\n\næ³¨ï¼ å¯åç¼©èµæºï¼cpuç­(å½å¯åç¼©èµæºä¸è¶³æ¶ï¼Podåªä¼âé¥¥é¥¿âï¼ä½ä¸ä¼éåº) éå¯åç¼©èµæºï¼ mem(å½ä¸å¯åç¼©èµæºä¸è¶³æ¶ï¼Podå°±ä¼å ä¸ºOOMï¼Out-Of-Memoryï¼è¢«åæ ¸ææã)\n\n\n# K8sä¸­çCgroups\n\nkubeletå¯å¨æ¶ï¼å®ä¼æ ¹æ®éè¦åå»ºä¸ä¸ª4å±çcgroupæ ã\n\n * Node(root) cgroup\n * QoS cgroup\n * Pod cgroup\n * Container cgroup\n\nKubeletè¿è¡å¨Kuberneteséç¾¤çå·¥ä½èç¹ä¸ï¼ç®¡çpodççå½å¨æï¼è¿æ¥å°CRIãCNIãCSIç­è¿è¡æ¶æ¥å£ï¼éè¿cgroupæç§éç½®åpodæä¾èµæºï¼å¹¶å¨ä½¿ç¨è¶è¿æ¶å é¤æOOMKilled podã\n\nkubeletä¸­çææcgroupæä½é½æ¯ç±å¶åé¨çcontainerManageræ¨¡åå®ç°çï¼è¯¥æ¨¡åéè¿cgroup(ä»ä¸å°ä¸)å¯¹èµæºä½¿ç¨è¿è¡éå±éå¶\n\n> container-> pod-> qos -> node(root)ã\n\n\n# å®¹å¨çº§å«çCgroup\n\n * å¦æå®¹å¨è¶åºå¶åå­éå¶ï¼åå¯è½ç»æ­¢è¯¥å®¹å¨ãå¦æå®æ¯å¯éæ°å¯å¨çï¼kubeletå°éæ°å¯å¨å®ï¼å°±åå¤çä»»ä½å¶ä»ç±»åçè¿è¡æ¶æéä¸æ ·ã\n * å¦æå®¹å¨è¶åºäºå®çåå­è¯·æ±ï¼é£ä¹æ¯å½èç¹èå°½åå­æ¶ï¼å®çPodå¾å¯è½ä¼è¢«éåºã\n * å®¹å¨å¯è½è¢«åè®¸ï¼ä¹å¯è½ä¸è¢«åè®¸å¨è¾é¿æ¶é´åè¶è¿å¶CPUéå¶ãä½æ¯ï¼å®ä¸ä¼å ä¸ºCPUå ç¨è¿å¤èè¢«ææ­»ã\n\n\n# Podçº§å«çCgroup\n\næ¯ä¸ªpodé½æä¸å®çå¼éèµæºï¼æ¯å¦ç±sandboxå®¹å¨ædocker containerd-shim(å¨1.22ä¸­å é¤)ä½¿ç¨çèµæºãå¦å¤ï¼podå¨æå®åå­ç±»åçå·æ¶ä¹ä¼å ç¨åå­èµæºã\n\n * è®¡ç®ææpodå®¹å¨çCPUè¯·æ±/éå¶ååå­éå¶ï¼å¹¶å°CPUè¯·æ±/éå¶è½¬æ¢ä¸ºcpuharesåcpuQuotaã\n\n> pod/cpu.shares = sum(pod.spec.containers.resources.requests[cpu]) pod/cpu.cfs_quota_us = sum(pod.spec.containers.resources.limits[cpu]) pod/memory.limit_in_bytes = sum(pod.spec.containers.resources.limits[memory])\n\n * åªæpod cgroupçcpuãå¦æå¶ä¸­ä¸ä¸ªå®¹å¨åªæå®è¯·æ±èä¸æå®éå¶ï¼åå°è®¾ç½®å±äº«å¼ï¼èä¸è®¾ç½®å¶éå¶å¼ã\n\n * åªè®¾ç½®cpuãå½æ å®¹å¨æå®è¯·æ±å¼æéå¶å¼æ¶å±äº«ï¼å³podå¨èµæºç©ºé²æ¶ä½¿ç¨ææèç¹èµæºï¼å¨èµæºåéæ¶ä¸è·åä»»ä½èµæºï¼ç¬¦åä½ä¼åçº§åå\n\n\n# QoSçº§å«çCgroup\n\n * Guaranteed(ä¿è¯å)::ç±è¯·æ±è®¾ç½®çå¼ç­äºç±éå¶è®¾ç½®çå¼ã å½Podéçæ¯ä¸ä¸ªContaineré½åæ¶è®¾ç½®äºrequestsålimitsï¼å¹¶ä¸requestsålimitså¼ç¸ç­çæ¶åï¼è¿ä¸ªPodå°±å±äºGuaranteedç±»å«\n * Burstable(çªå¢å):è¯·æ±è®¾ç½®çå¼å°äºéå¶è®¾ç½®çå¼ï¼ä½æ¯!= 0ã èå½Podä¸æ»¡è¶³Guaranteedçæ¡ä»¶ï¼ä½è³å°æä¸ä¸ªContainerè®¾ç½®äºrequestsãé£ä¹è¿ä¸ªPodå°±ä¼è¢«ååå°Burstableç±»å«\n * BestEffort(å°½åèä¸ºå):è¯·æ±åéå¶è®¾ç½®çå¼é½æ¯0ã ä¼åçº§æ¯ èå¦æä¸ä¸ªPodæ¢æ²¡æè®¾ç½®requestsï¼ä¹æ²¡æè®¾ç½®limitsï¼é£ä¹å®çQoSç±»å«å°±æ¯BestEffort\n\n> Guaranteed > Burstable > BestEffort\n\n\n# èç¹Nodeçº§å«çCgroup\n\n * ä¸å¡æµç¨ä½¿ç¨çèµæºï¼å³podä½¿ç¨çèµæºã\n * Kubernetesç»ä»¶ä½¿ç¨çèµæºï¼å¦kubeletådockerã\n * ç³»ç»ç»ä»¶ä½¿ç¨çèµæºï¼å¦logindãjournaldåå¶ä»è¿ç¨ã\n\n\n# èµæºéå¶\n\nå¨è°åº¦çæ¶åï¼kube-scheduleråªä¼æç§requestsçå¼è¿è¡è®¡ç®ãèå¨çæ­£è®¾ç½®Cgroupséå¶çæ¶åï¼kubeletåä¼æç§limitsçå¼æ¥è¿è¡è®¾ç½®ã\n\n * å½ä½ æå®äºrequests.cpu=250mä¹åï¼ç¸å½äºå°Cgroupsçcpu.sharesçå¼è®¾ç½®ä¸º(250/1000)*1024ãèå½ä½ æ²¡æè®¾ç½®requests.cpuçæ¶åï¼cpu.sharesé»è®¤åæ¯1024\n\n * å¦æä½ æå®äºlimits.cpu=500mä¹åï¼åç¸å½äºå°Cgroupsçcpu.cfs_quota_usçå¼è®¾ç½®ä¸º(500/1000)*100msï¼ècpu.cfs_period_usçå¼å§ç»æ¯100msãè¿æ ·ï¼Kuberneteså°±ä¸ºä½ è®¾ç½®äºè¿ä¸ªå®¹å¨åªè½ç¨å°CPUç50%ã\n\n * å¯¹äºåå­æ¥è¯´ï¼å½ä½ æå®äºlimits.memory=128Miä¹åï¼ç¸å½äºå°Cgroupsçmemory.limit_in_bytesè®¾ç½®ä¸º128 * 1024 * 1024ã\n\n> Kubernetesè¿ç§å¯¹CPUååå­èµæºéé¢çè®¾è®¡ï¼å®éä¸åèäºBorgè®ºæä¸­å¯¹âå¨æèµæºè¾¹çâçå®ä¹ï¼æ¢ï¼å®¹å¨åä½ä¸å¨æäº¤æ¶æè®¾ç½®çèµæºè¾¹çï¼å¹¶ä¸ä¸å®æ¯è°åº¦ç³»ç»æå¿é¡»ä¸¥æ ¼éµå®çï¼è¿æ¯å ä¸ºå¨å®éåºæ¯ä¸­ï¼å¤§å¤æ°ä½ä¸ä½¿ç¨å°çèµæºå¶å®è¿å°äºå®æè¯·æ±çèµæºéé¢ã\n\n\n# Eviction\n\nç®åï¼Kubernetesä¸ºä½ è®¾ç½®çEvictionçé»è®¤éå¼å¦ä¸æç¤ºï¼\n\nmemory.available<100Mi nodefs.available<10% nodefs.inodesFree<5% imagefs.available<15% å½ç¶ï¼ä¸è¿°åä¸ªè§¦åæ¡ä»¶å¨kubeletéé½æ¯å¯éç½®çãæ¯å¦ä¸é¢è¿ä¸ªä¾å­ï¼\n\nkubelet --eviction-hard=imagefs.available<10%,memory.available<500Mi,nodefs.available<5%,nodefs.inodesFree<5% --eviction-soft=imagefs.available<30%,nodefs.available<10% --eviction-soft-grace-period=imagefs.available=2m,nodefs.available=2m --eviction-max-pod-grace-period=600 å¨è¿ä¸ªéç½®ä¸­ï¼ä½ å¯ä»¥çå°Evictionå¨Kuberneteséå¶å®åä¸ºSoftåHardä¸¤ç§æ¨¡å¼ã\n\n\n# å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",normalizedContent:"cgroups æ¯ control groups çç¼©åï¼ç± linuxåæ ¸æä¾ãç¨äºéå¶ãè®°å½åéç¦»è¿ç¨ç»ä½¿ç¨çç©çèµæºï¼cpuãåå­ãi/oï¼ã\n\n[root@localhost ~]# mount -t cgroup\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_prio,net_cls)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct,cpu)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\ncpusetãcpuã memoryå­ç³»ç»\n\ncfs_periodåcfs_quota:éå¶è¿ç¨å¨é¿åº¦ä¸ºcfs_periodçä¸æ®µæ¶é´åï¼åªè½è¢«åéå°æ»éä¸ºcfs_quotaçcpuæ¶é´,cpu quotaé»è®¤æ²¡æä»»ä½éå¶ï¼å³ï¼-1ï¼,cpu periodé»è®¤100 msï¼100000 usï¼\n\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/docker/cpu.cfs_quota_us\n-1\n\n\n1\n2\n3\n4\n\n\næ³¨ï¼ å¯åç¼©èµæºï¼cpuç­(å½å¯åç¼©èµæºä¸è¶³æ¶ï¼podåªä¼âé¥¥é¥¿âï¼ä½ä¸ä¼éåº) éå¯åç¼©èµæºï¼ mem(å½ä¸å¯åç¼©èµæºä¸è¶³æ¶ï¼podå°±ä¼å ä¸ºoomï¼out-of-memoryï¼è¢«åæ ¸ææã)\n\n\n# k8sä¸­çcgroups\n\nkubeletå¯å¨æ¶ï¼å®ä¼æ ¹æ®éè¦åå»ºä¸ä¸ª4å±çcgroupæ ã\n\n * node(root) cgroup\n * qos cgroup\n * pod cgroup\n * container cgroup\n\nkubeletè¿è¡å¨kuberneteséç¾¤çå·¥ä½èç¹ä¸ï¼ç®¡çpodççå½å¨æï¼è¿æ¥å°criãcniãcsiç­è¿è¡æ¶æ¥å£ï¼éè¿cgroupæç§éç½®åpodæä¾èµæºï¼å¹¶å¨ä½¿ç¨è¶è¿æ¶å é¤æoomkilled podã\n\nkubeletä¸­çææcgroupæä½é½æ¯ç±å¶åé¨çcontainermanageræ¨¡åå®ç°çï¼è¯¥æ¨¡åéè¿cgroup(ä»ä¸å°ä¸)å¯¹èµæºä½¿ç¨è¿è¡éå±éå¶\n\n> container-> pod-> qos -> node(root)ã\n\n\n# å®¹å¨çº§å«çcgroup\n\n * å¦æå®¹å¨è¶åºå¶åå­éå¶ï¼åå¯è½ç»æ­¢è¯¥å®¹å¨ãå¦æå®æ¯å¯éæ°å¯å¨çï¼kubeletå°éæ°å¯å¨å®ï¼å°±åå¤çä»»ä½å¶ä»ç±»åçè¿è¡æ¶æéä¸æ ·ã\n * å¦æå®¹å¨è¶åºäºå®çåå­è¯·æ±ï¼é£ä¹æ¯å½èç¹èå°½åå­æ¶ï¼å®çpodå¾å¯è½ä¼è¢«éåºã\n * å®¹å¨å¯è½è¢«åè®¸ï¼ä¹å¯è½ä¸è¢«åè®¸å¨è¾é¿æ¶é´åè¶è¿å¶cpuéå¶ãä½æ¯ï¼å®ä¸ä¼å ä¸ºcpuå ç¨è¿å¤èè¢«ææ­»ã\n\n\n# podçº§å«çcgroup\n\næ¯ä¸ªpodé½æä¸å®çå¼éèµæºï¼æ¯å¦ç±sandboxå®¹å¨ædocker containerd-shim(å¨1.22ä¸­å é¤)ä½¿ç¨çèµæºãå¦å¤ï¼podå¨æå®åå­ç±»åçå·æ¶ä¹ä¼å ç¨åå­èµæºã\n\n * è®¡ç®ææpodå®¹å¨çcpuè¯·æ±/éå¶ååå­éå¶ï¼å¹¶å°cpuè¯·æ±/éå¶è½¬æ¢ä¸ºcpuharesåcpuquotaã\n\n> pod/cpu.shares = sum(pod.spec.containers.resources.requests[cpu]) pod/cpu.cfs_quota_us = sum(pod.spec.containers.resources.limits[cpu]) pod/memory.limit_in_bytes = sum(pod.spec.containers.resources.limits[memory])\n\n * åªæpod cgroupçcpuãå¦æå¶ä¸­ä¸ä¸ªå®¹å¨åªæå®è¯·æ±èä¸æå®éå¶ï¼åå°è®¾ç½®å±äº«å¼ï¼èä¸è®¾ç½®å¶éå¶å¼ã\n\n * åªè®¾ç½®cpuãå½æ å®¹å¨æå®è¯·æ±å¼æéå¶å¼æ¶å±äº«ï¼å³podå¨èµæºç©ºé²æ¶ä½¿ç¨ææèç¹èµæºï¼å¨èµæºåéæ¶ä¸è·åä»»ä½èµæºï¼ç¬¦åä½ä¼åçº§åå\n\n\n# qosçº§å«çcgroup\n\n * guaranteed(ä¿è¯å)::ç±è¯·æ±è®¾ç½®çå¼ç­äºç±éå¶è®¾ç½®çå¼ã å½podéçæ¯ä¸ä¸ªcontaineré½åæ¶è®¾ç½®äºrequestsålimitsï¼å¹¶ä¸requestsålimitså¼ç¸ç­çæ¶åï¼è¿ä¸ªpodå°±å±äºguaranteedç±»å«\n * burstable(çªå¢å):è¯·æ±è®¾ç½®çå¼å°äºéå¶è®¾ç½®çå¼ï¼ä½æ¯!= 0ã èå½podä¸æ»¡è¶³guaranteedçæ¡ä»¶ï¼ä½è³å°æä¸ä¸ªcontainerè®¾ç½®äºrequestsãé£ä¹è¿ä¸ªpodå°±ä¼è¢«ååå°burstableç±»å«\n * besteffort(å°½åèä¸ºå):è¯·æ±åéå¶è®¾ç½®çå¼é½æ¯0ã ä¼åçº§æ¯ èå¦æä¸ä¸ªpodæ¢æ²¡æè®¾ç½®requestsï¼ä¹æ²¡æè®¾ç½®limitsï¼é£ä¹å®çqosç±»å«å°±æ¯besteffort\n\n> guaranteed > burstable > besteffort\n\n\n# èç¹nodeçº§å«çcgroup\n\n * ä¸å¡æµç¨ä½¿ç¨çèµæºï¼å³podä½¿ç¨çèµæºã\n * kubernetesç»ä»¶ä½¿ç¨çèµæºï¼å¦kubeletådockerã\n * ç³»ç»ç»ä»¶ä½¿ç¨çèµæºï¼å¦logindãjournaldåå¶ä»è¿ç¨ã\n\n\n# èµæºéå¶\n\nå¨è°åº¦çæ¶åï¼kube-scheduleråªä¼æç§requestsçå¼è¿è¡è®¡ç®ãèå¨çæ­£è®¾ç½®cgroupséå¶çæ¶åï¼kubeletåä¼æç§limitsçå¼æ¥è¿è¡è®¾ç½®ã\n\n * å½ä½ æå®äºrequests.cpu=250mä¹åï¼ç¸å½äºå°cgroupsçcpu.sharesçå¼è®¾ç½®ä¸º(250/1000)*1024ãèå½ä½ æ²¡æè®¾ç½®requests.cpuçæ¶åï¼cpu.sharesé»è®¤åæ¯1024\n\n * å¦æä½ æå®äºlimits.cpu=500mä¹åï¼åç¸å½äºå°cgroupsçcpu.cfs_quota_usçå¼è®¾ç½®ä¸º(500/1000)*100msï¼ècpu.cfs_period_usçå¼å§ç»æ¯100msãè¿æ ·ï¼kuberneteså°±ä¸ºä½ è®¾ç½®äºè¿ä¸ªå®¹å¨åªè½ç¨å°cpuç50%ã\n\n * å¯¹äºåå­æ¥è¯´ï¼å½ä½ æå®äºlimits.memory=128miä¹åï¼ç¸å½äºå°cgroupsçmemory.limit_in_bytesè®¾ç½®ä¸º128 * 1024 * 1024ã\n\n> kubernetesè¿ç§å¯¹cpuååå­èµæºéé¢çè®¾è®¡ï¼å®éä¸åèäºborgè®ºæä¸­å¯¹âå¨æèµæºè¾¹çâçå®ä¹ï¼æ¢ï¼å®¹å¨åä½ä¸å¨æäº¤æ¶æè®¾ç½®çèµæºè¾¹çï¼å¹¶ä¸ä¸å®æ¯è°åº¦ç³»ç»æå¿é¡»ä¸¥æ ¼éµå®çï¼è¿æ¯å ä¸ºå¨å®éåºæ¯ä¸­ï¼å¤§å¤æ°ä½ä¸ä½¿ç¨å°çèµæºå¶å®è¿å°äºå®æè¯·æ±çèµæºéé¢ã\n\n\n# eviction\n\nç®åï¼kubernetesä¸ºä½ è®¾ç½®çevictionçé»è®¤éå¼å¦ä¸æç¤ºï¼\n\nmemory.available<100mi nodefs.available<10% nodefs.inodesfree<5% imagefs.available<15% å½ç¶ï¼ä¸è¿°åä¸ªè§¦åæ¡ä»¶å¨kubeletéé½æ¯å¯éç½®çãæ¯å¦ä¸é¢è¿ä¸ªä¾å­ï¼\n\nkubelet --eviction-hard=imagefs.available<10%,memory.available<500mi,nodefs.available<5%,nodefs.inodesfree<5% --eviction-soft=imagefs.available<30%,nodefs.available<10% --eviction-soft-grace-period=imagefs.available=2m,nodefs.available=2m --eviction-max-pod-grace-period=600 å¨è¿ä¸ªéç½®ä¸­ï¼ä½ å¯ä»¥çå°evictionå¨kuberneteséå¶å®åä¸ºsoftåhardä¸¤ç§æ¨¡å¼ã\n\n\n# å®¹å¨æ¯ä¸ä¸ªâåè¿ç¨âæ¨¡å",charsets:{cjk:!0}},{title:"æµééå¶",frontmatter:{title:"æµééå¶",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/d395da/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`',meta:[{name:"twitter:title",content:"æµééå¶"},{name:"twitter:description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æµééå¶"},{property:"og:description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"æµééå¶"},{itemprop:"description",content:'[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n`'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/05.%E6%B5%81%E9%87%8F%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/03.kubernetes/05.æµééå¶.md",key:"v-4d3d3bec",path:"/pages/d395da/",headersStr:null,content:'# kubeletå¯å¨åæ°ï¼\n\n> --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin --network-plugin=cni\n\nsystemctl cat kubelet | grep network-plugin\n\n\n1\n\n\n\n# calicoéç½®\n\n[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n\n\n1\n2\n\n\n\n# æµééå¶éªè¯\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: netperf-server\n  annotations:\n    kubernetes.io/egress-bandwidth: 1M\n    kubernetes.io/ingress-bandwidth: 1M\nspec:\n  containers:\n  - image: sirot/netperf-latest\n    command: ["/bin/sh","-c","netserver -p 4444 -4; iperf3 -s -i 1;"]\n    imagePullPolicy: IfNotPresent\n    name: netperf\n    ports:\n    - name: netperf-port\n      containerPort: 4444\n    - name: iperf-port\n      containerPort: 5210\n  restartPolicy: Always\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n> æ³¨ï¼ podåå»ºåä¿®æ¹annotationæ æï¼éè¦éå¯podæçæ å¦æä¸æ¯dockerèæ¯ä½¿ç¨containerdä½ä¸ºruntimeï¼éè¦containerd 1.4çæ¬æè½æ¯æã\n\n tc qdisc show\n\n...\n\nqdisc tbf 1: dev cali90ab6b94883 root refcnt 2 rate 1000Kbit burst 27917286b lat 1924.2s\n\nqdisc ingress ffff: dev cali90ab6b94883 parent ffff:fff1 ----------------\n\nqdisc tbf 1: dev 31b3 root refcnt 2 rate 1000Kbit burst 27917286b lat 1924.2s\n\nroot@netperf-server:/# iperf3 -c 10.19.0.13\n\nConnecting to host 10.19.0.13, port 5201\n\n[  4] local 10.242.235.108 port 46514 connected to 10.19.0.13 port 5201\n\n[ ID] Interval           Transfer     Bandwidth       Retr  Cwnd\n\n[  4]   0.00-1.00   sec  26.2 MBytes   220 Mbits/sec    1    274 KBytes\n\n[  4]   1.00-2.00   sec  0.00 Bytes  0.00 bits/sec    0    275 KBytes\n\n[  4]   2.00-3.00   sec  0.00 Bytes  0.00 bits/sec    0    278 KBytes\n\n[  4]   3.00-4.00   sec   331 KBytes  2.71 Mbits/sec    0    285 KBytes\n\n[  4]   4.00-5.00   sec  0.00 Bytes  0.00 bits/sec    0    295 KBytes\n\n[  4]   5.00-6.00   sec   382 KBytes  3.13 Mbits/sec    0    312 KBytes\n\n[  4]   6.00-7.00   sec  0.00 Bytes  0.00 bits/sec    0    332 KBytes\n\n[  4]   7.00-8.00   sec  0.00 Bytes  0.00 bits/sec    0    361 KBytes\n\n[  4]   8.00-9.00   sec   446 KBytes  3.65 Mbits/sec    0    389 KBytes\n\n^C[  4]   9.00-9.55   sec  0.00 Bytes  0.00 bits/sec    0    405 KBytes\n\n- - - - - - - - - - - - - - - - - - - - - - - - -\n\n[ ID] Interval           Transfer     Bandwidth       Retr\n\n[  4]   0.00-9.55   sec  27.4 MBytes  24.1 Mbits/sec    1             sender\n\n[  4]   0.00-9.55   sec  0.00 Bytes  0.00 bits/sec                  receiver\n\niperf3: interrupt - the client has terminated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\n\n# centos7å®è£iperfï¼\n\nyum install -y iperf3',normalizedContent:'# kubeletå¯å¨åæ°ï¼\n\n> --cni-conf-dir=/etc/cni/net.d --cni-bin-dir=/opt/cni/bin --network-plugin=cni\n\nsystemctl cat kubelet | grep network-plugin\n\n\n1\n\n\n\n# calicoéç½®\n\n[root@localhost ~]# cat /etc/cni/net.d/10-calico.conflist | grep bandwidth\n    { "type": "bandwidth", "capabilities": { "bandwidth": true } }\n\n\n1\n2\n\n\n\n# æµééå¶éªè¯\n\napiversion: v1\nkind: pod\nmetadata:\n  name: netperf-server\n  annotations:\n    kubernetes.io/egress-bandwidth: 1m\n    kubernetes.io/ingress-bandwidth: 1m\nspec:\n  containers:\n  - image: sirot/netperf-latest\n    command: ["/bin/sh","-c","netserver -p 4444 -4; iperf3 -s -i 1;"]\n    imagepullpolicy: ifnotpresent\n    name: netperf\n    ports:\n    - name: netperf-port\n      containerport: 4444\n    - name: iperf-port\n      containerport: 5210\n  restartpolicy: always\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n> æ³¨ï¼ podåå»ºåä¿®æ¹annotationæ æï¼éè¦éå¯podæçæ å¦æä¸æ¯dockerèæ¯ä½¿ç¨containerdä½ä¸ºruntimeï¼éè¦containerd 1.4çæ¬æè½æ¯æã\n\n tc qdisc show\n\n...\n\nqdisc tbf 1: dev cali90ab6b94883 root refcnt 2 rate 1000kbit burst 27917286b lat 1924.2s\n\nqdisc ingress ffff: dev cali90ab6b94883 parent ffff:fff1 ----------------\n\nqdisc tbf 1: dev 31b3 root refcnt 2 rate 1000kbit burst 27917286b lat 1924.2s\n\nroot@netperf-server:/# iperf3 -c 10.19.0.13\n\nconnecting to host 10.19.0.13, port 5201\n\n[  4] local 10.242.235.108 port 46514 connected to 10.19.0.13 port 5201\n\n[ id] interval           transfer     bandwidth       retr  cwnd\n\n[  4]   0.00-1.00   sec  26.2 mbytes   220 mbits/sec    1    274 kbytes\n\n[  4]   1.00-2.00   sec  0.00 bytes  0.00 bits/sec    0    275 kbytes\n\n[  4]   2.00-3.00   sec  0.00 bytes  0.00 bits/sec    0    278 kbytes\n\n[  4]   3.00-4.00   sec   331 kbytes  2.71 mbits/sec    0    285 kbytes\n\n[  4]   4.00-5.00   sec  0.00 bytes  0.00 bits/sec    0    295 kbytes\n\n[  4]   5.00-6.00   sec   382 kbytes  3.13 mbits/sec    0    312 kbytes\n\n[  4]   6.00-7.00   sec  0.00 bytes  0.00 bits/sec    0    332 kbytes\n\n[  4]   7.00-8.00   sec  0.00 bytes  0.00 bits/sec    0    361 kbytes\n\n[  4]   8.00-9.00   sec   446 kbytes  3.65 mbits/sec    0    389 kbytes\n\n^c[  4]   9.00-9.55   sec  0.00 bytes  0.00 bits/sec    0    405 kbytes\n\n- - - - - - - - - - - - - - - - - - - - - - - - -\n\n[ id] interval           transfer     bandwidth       retr\n\n[  4]   0.00-9.55   sec  27.4 mbytes  24.1 mbits/sec    1             sender\n\n[  4]   0.00-9.55   sec  0.00 bytes  0.00 bits/sec                  receiver\n\niperf3: interrupt - the client has terminated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n\n\n\n# centos7å®è£iperfï¼\n\nyum install -y iperf3',charsets:{cjk:!0}},{title:"ç½ç»ç­ç¥calico",frontmatter:{title:"ç½ç»ç­ç¥calico",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/9594e3/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ç½ç»ç­ç¥calico"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ç½ç»ç­ç¥calico"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ç½ç»ç­ç¥calico"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/06.%E7%BD%91%E7%BB%9C%E7%AD%96%E7%95%A5calico.html",relativePath:"01.ææ¯æè°/03.kubernetes/06.ç½ç»ç­ç¥calico.md",key:"v-59c6ef63",path:"/pages/9594e3/",headersStr:null,content:"---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-default\nspec:\n  egress:\n  - action: Allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: Allow\n    destination: {}\n    source: {}\n  order: 9999\n  types:\n  - Ingress\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-egress-deny\nspec:\n  egress:\n  - action: Deny\n    destination:\n      selector: area == 'dummy'\n    source: {}\n  namespaceSelector: (! has(privileged-namespace))\n  order: 502\n  types:\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-egress-allow\nspec:\n  egress:\n  - action: Allow\n    destination:\n      nets:\n      - 127.0.0.1/32\n    source:\n      namespaceSelector: name == \"dummy\"\n  order: 501\n  types:\n  - Egress\n---\napiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: global-privileged-namespace\nspec:\n  egress:\n  - action: Allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: Allow\n    destination: {}\n    source: {}\n  namespaceSelector: has(privileged-namespace)\n  order: 500\n  types:\n  - Ingress\n  - Egress\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n",normalizedContent:"---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-default\nspec:\n  egress:\n  - action: allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: allow\n    destination: {}\n    source: {}\n  order: 9999\n  types:\n  - ingress\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-egress-deny\nspec:\n  egress:\n  - action: deny\n    destination:\n      selector: area == 'dummy'\n    source: {}\n  namespaceselector: (! has(privileged-namespace))\n  order: 502\n  types:\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-egress-allow\nspec:\n  egress:\n  - action: allow\n    destination:\n      nets:\n      - 127.0.0.1/32\n    source:\n      namespaceselector: name == \"dummy\"\n  order: 501\n  types:\n  - egress\n---\napiversion: projectcalico.org/v3\nkind: globalnetworkpolicy\nmetadata:\n  name: global-privileged-namespace\nspec:\n  egress:\n  - action: allow\n    destination: {}\n    source: {}\n  ingress:\n  - action: allow\n    destination: {}\n    source: {}\n  namespaceselector: has(privileged-namespace)\n  order: 500\n  types:\n  - ingress\n  - egress\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n",charsets:{}},{title:"grafanaåpromuthues",frontmatter:{title:"grafanaåpromuthues",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/f1f52d/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"grafanaåpromuthues"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html"},{property:"og:type",content:"article"},{property:"og:title",content:"grafanaåpromuthues"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"grafanaåpromuthues"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/07.grafana%E5%92%8Cpromuthues.html",relativePath:"01.ææ¯æè°/03.kubernetes/07.grafanaåpromuthues.md",key:"v-0b248a60",path:"/pages/f1f52d/",headers:[{level:2,title:"ç­å è½½",slug:"ç­å è½½",normalizedTitle:"ç­å è½½",charIndex:763},{level:2,title:"ææ ç±»å",slug:"ææ ç±»å",normalizedTitle:"ææ ç±»å",charIndex:850},{level:2,title:"è®¡ç®è¡¨è¾¾å¼ï¼",slug:"è®¡ç®è¡¨è¾¾å¼",normalizedTitle:"è®¡ç®è¡¨è¾¾å¼ï¼",charIndex:931},{level:2,title:"ææ å½åè§è",slug:"ææ å½åè§è",normalizedTitle:"ææ å½åè§è",charIndex:1107}],headersStr:"ç­å è½½ ææ ç±»å è®¡ç®è¡¨è¾¾å¼ï¼ ææ å½åè§è",content:"[TOC]\n\n\n# ç»ä»¶\n\n * Prometheus Server: ç¨äºæ¶éåå­å¨æ¶é´åºåæ°æ®ã\n * Client Library: å®¢æ·ç«¯åºï¼ä¸ºéè¦çæ§çæå¡çæç¸åºç metrics å¹¶æ´é²ç» Prometheus serverãå½Prometheus server æ¥ pull æ¶ï¼ç´æ¥è¿åå®æ¶ç¶æç metricsãå¯¹äºæºå¨å±é¢ç metricesï¼éè¦ä½¿ç¨ node exporterã\n * Push Gateway: ä¸»è¦ç¨äºç­æç jobsã\n * Exporters: ç¨äºæ´é²å·²æçç¬¬ä¸æ¹æå¡ç metrics ç» Prometheusã\n * Alertmanager: ä» Prometheus server ç«¯æ¥æ¶å° alerts åï¼ä¼è¿è¡å»é¤éå¤æ°æ®ï¼åç»ï¼å¹¶è·¯ç±å°å¯¹æ¶çæ¥åæ¹å¼ï¼ååºæ¥è­¦ãå¸¸è§çæ¥æ¶æ¹å¼æï¼çµå­é®ä»¶ï¼pagerdutyï¼OpsGenie, webhook ç­ã\n\n\n# curl\n\necho \"hfftest 111\" |curl --data-binary @- http://10.19.0.13:9091/metrics/job/schedulerStatus/instance/tztest\n\ncurl -X POST -g 'http://127.0.0.1:9090/api/v1/admin/tsdb/delete_series?match[]=scheduler_effective_dynamic_schedule_count'\n\ncurl -X POST -g 'http://10.19.0.13:9090/api/v1/admin/tsdb/delete_series?match[]={job=\"schedulerStatus\"}'\n\n\n# ç­å è½½\n\ncurl -XPOST <prometheus-url>/-/reload\n\n\n1\n\n\n\n# pushgateway\n\n\n# Grafana\n\n\n# ææ \n\n\n# ææ ç±»å\n\nCounterï¼è®¡æ°å¨ï¼å¯¹æ°æ®åªå¢ä¸å Gauageï¼ä»ªè¡¨çï¼å¯å¢å¯å Histogramï¼ç´æ¹å¾ï¼,Summaryï¼æè¦ï¼æä¾æ´å¤çç»è®¡ä¿¡\n\n\n# è®¡ç®è¡¨è¾¾å¼ï¼\n\nPrometheusä¸ºä¸åçæ°æ®æä¾äºéå¸¸å¤çè®¡ç®å½æ°ï¼å¶ä¸­æä¸ªå°æå·§å°±æ¯éå°counteræ°æ®ç±»åï¼å¨åä»»ä½æä½ä¹åï¼åå¥ä¸ä¸ä¸ªrate()æèincrease()å½æ°\n\n> 100-avg(irate(node_cpu_seconds_total{mode='idle'}[5m])) by (node_name)*100\n\n\n# ææ å½åè§è\n\nä¸ä¸ªææ åç§°ï¼ â¢ å¿é¡»ç¬¦åææå­ç¬¦çæ°æ®æ¨¡åã â¢ åºè¯¥å·æä¸ææ æå±åç¸å³çï¼åä¸ªè¯æ±ï¼åºç¨ç¨åºåç¼ãåç¼ææ¶è¢«å®¢æ·ç«¯åºç§°ä¸ºå½åç©ºé´ãå¯¹äºç¹å®äºåºç¨ç¨åºçææ ï¼åç¼éå¸¸æ¯åºç¨ç¨åºåç§°æ¬èº«ãç¶èï¼ææ¶åææ æ´éç¨ï¼æ¯å¦å®¢æ·ç«¯åºå¯¼åºçæ ååææ ãä¾å¦ï¼ â prometheus_notifications_total ï¼éå¯¹Prometheus æå¡å¨ï¼ â process_cpu_seconds_total ï¼ç±å®¢æ·ç«¯åºå¯¼åºï¼ â http_request_duration_seconds ï¼ç¨äºææHTTPè¯·æ±ï¼ â¢ å¿é¡»æä¸ä¸ªåä¸çåä½ï¼å³ï¼ä¸è¦æç§ä¸æ¯«ç§ï¼æç§ä¸å­èæ··ç¨ï¼ã â¢ åºè¯¥ä½¿ç¨åºæ¬åä½ï¼å¦ç§ãå­èãç±³ââèä¸æ¯æ¯«ç§ãåå­èãå¬éï¼ãåè§ä¸é¢çåºæ¬åä½åè¡¨ã â¢ åºä»¥å¤æ°å½¢å¼ç¨åç¼æ¥æè¿°åä½ãè¯·æ³¨æï¼ç´¯è®¡è®¡æ°ä»¥totalä½ä¸ºåç¼ï¼éå å¨åä½ä¹åã â http_request_duration_seconds â node_memory_usage_bytes â http_requests_total ï¼ç¨äºæ åä½çç´¯è®¡è®¡æ°ï¼ â process_cpu_seconds_total ï¼ç¨äºæåä½çç´¯è®¡è®¡æ°ï¼ â foobar_build_info ï¼ç¨äºæä¾å³äºæ­£å¨è¿è¡çäºè¿å¶æä»¶çåæ°æ®çä¼ªææ ï¼ â¢ åºè¯¥å¨ææçæ ç­¾ç»´åº¦ä¸­è¡¨ç¤ºç¸åççæ§é»è¾ã â è¯·æ±æä¹æ¶é¿ â ä¼ è¾çæ°æ®å­èæ° â ç¬æ¶èµæºä½¿ç¨ç¾åæ¯",normalizedContent:"[toc]\n\n\n# ç»ä»¶\n\n * prometheus server: ç¨äºæ¶éåå­å¨æ¶é´åºåæ°æ®ã\n * client library: å®¢æ·ç«¯åºï¼ä¸ºéè¦çæ§çæå¡çæç¸åºç metrics å¹¶æ´é²ç» prometheus serverãå½prometheus server æ¥ pull æ¶ï¼ç´æ¥è¿åå®æ¶ç¶æç metricsãå¯¹äºæºå¨å±é¢ç metricesï¼éè¦ä½¿ç¨ node exporterã\n * push gateway: ä¸»è¦ç¨äºç­æç jobsã\n * exporters: ç¨äºæ´é²å·²æçç¬¬ä¸æ¹æå¡ç metrics ç» prometheusã\n * alertmanager: ä» prometheus server ç«¯æ¥æ¶å° alerts åï¼ä¼è¿è¡å»é¤éå¤æ°æ®ï¼åç»ï¼å¹¶è·¯ç±å°å¯¹æ¶çæ¥åæ¹å¼ï¼ååºæ¥è­¦ãå¸¸è§çæ¥æ¶æ¹å¼æï¼çµå­é®ä»¶ï¼pagerdutyï¼opsgenie, webhook ç­ã\n\n\n# curl\n\necho \"hfftest 111\" |curl --data-binary @- http://10.19.0.13:9091/metrics/job/schedulerstatus/instance/tztest\n\ncurl -x post -g 'http://127.0.0.1:9090/api/v1/admin/tsdb/delete_series?match[]=scheduler_effective_dynamic_schedule_count'\n\ncurl -x post -g 'http://10.19.0.13:9090/api/v1/admin/tsdb/delete_series?match[]={job=\"schedulerstatus\"}'\n\n\n# ç­å è½½\n\ncurl -xpost <prometheus-url>/-/reload\n\n\n1\n\n\n\n# pushgateway\n\n\n# grafana\n\n\n# ææ \n\n\n# ææ ç±»å\n\ncounterï¼è®¡æ°å¨ï¼å¯¹æ°æ®åªå¢ä¸å gauageï¼ä»ªè¡¨çï¼å¯å¢å¯å histogramï¼ç´æ¹å¾ï¼,summaryï¼æè¦ï¼æä¾æ´å¤çç»è®¡ä¿¡\n\n\n# è®¡ç®è¡¨è¾¾å¼ï¼\n\nprometheusä¸ºä¸åçæ°æ®æä¾äºéå¸¸å¤çè®¡ç®å½æ°ï¼å¶ä¸­æä¸ªå°æå·§å°±æ¯éå°counteræ°æ®ç±»åï¼å¨åä»»ä½æä½ä¹åï¼åå¥ä¸ä¸ä¸ªrate()æèincrease()å½æ°\n\n> 100-avg(irate(node_cpu_seconds_total{mode='idle'}[5m])) by (node_name)*100\n\n\n# ææ å½åè§è\n\nä¸ä¸ªææ åç§°ï¼ â¢ å¿é¡»ç¬¦åææå­ç¬¦çæ°æ®æ¨¡åã â¢ åºè¯¥å·æä¸ææ æå±åç¸å³çï¼åä¸ªè¯æ±ï¼åºç¨ç¨åºåç¼ãåç¼ææ¶è¢«å®¢æ·ç«¯åºç§°ä¸ºå½åç©ºé´ãå¯¹äºç¹å®äºåºç¨ç¨åºçææ ï¼åç¼éå¸¸æ¯åºç¨ç¨åºåç§°æ¬èº«ãç¶èï¼ææ¶åææ æ´éç¨ï¼æ¯å¦å®¢æ·ç«¯åºå¯¼åºçæ ååææ ãä¾å¦ï¼ â prometheus_notifications_total ï¼éå¯¹prometheus æå¡å¨ï¼ â process_cpu_seconds_total ï¼ç±å®¢æ·ç«¯åºå¯¼åºï¼ â http_request_duration_seconds ï¼ç¨äºææhttpè¯·æ±ï¼ â¢ å¿é¡»æä¸ä¸ªåä¸çåä½ï¼å³ï¼ä¸è¦æç§ä¸æ¯«ç§ï¼æç§ä¸å­èæ··ç¨ï¼ã â¢ åºè¯¥ä½¿ç¨åºæ¬åä½ï¼å¦ç§ãå­èãç±³ââèä¸æ¯æ¯«ç§ãåå­èãå¬éï¼ãåè§ä¸é¢çåºæ¬åä½åè¡¨ã â¢ åºä»¥å¤æ°å½¢å¼ç¨åç¼æ¥æè¿°åä½ãè¯·æ³¨æï¼ç´¯è®¡è®¡æ°ä»¥totalä½ä¸ºåç¼ï¼éå å¨åä½ä¹åã â http_request_duration_seconds â node_memory_usage_bytes â http_requests_total ï¼ç¨äºæ åä½çç´¯è®¡è®¡æ°ï¼ â process_cpu_seconds_total ï¼ç¨äºæåä½çç´¯è®¡è®¡æ°ï¼ â foobar_build_info ï¼ç¨äºæä¾å³äºæ­£å¨è¿è¡çäºè¿å¶æä»¶çåæ°æ®çä¼ªææ ï¼ â¢ åºè¯¥å¨ææçæ ç­¾ç»´åº¦ä¸­è¡¨ç¤ºç¸åççæ§é»è¾ã â è¯·æ±æä¹æ¶é¿ â ä¼ è¾çæ°æ®å­èæ° â ç¬æ¶èµæºä½¿ç¨ç¾åæ¯",charsets:{cjk:!0}},{title:"etcdèç¹downæºæ°æ®æ¢å¤",frontmatter:{title:"etcdèç¹downæºæ°æ®æ¢å¤",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/43f072/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html"},{property:"og:type",content:"article"},{property:"og:title",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"etcdèç¹downæºæ°æ®æ¢å¤"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/08.etcd%E8%8A%82%E7%82%B9down%E6%9C%BA%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D.html",relativePath:"01.ææ¯æè°/03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.md",key:"v-2f3eb2e7",path:"/pages/43f072/",headersStr:null,content:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åXXï¼ (2) åæ­¢etcdæå¡ (3) éè¦å°éç½®ä¸­ç cluster_stateæ¹ä¸ºï¼existingï¼å ä¸ºæ¯å å¥å·²æéç¾¤ï¼ä¸è½ç¨ new ä¿®å¤æºå¨é®é¢ï¼å é¤æ§çæ°æ®ç®å½ï¼éæ°å¯å¨ etcd æå¡ (4) å å¥ memeberï¼ etcdctl member add xxx âpeer-urls=https://x.x.x.x:2380 (5) éªè¯ï¼etcdctl endpoint status",normalizedContent:"(1) ç§»åºè¯¥èç¹ï¼etcdctl member remove xxï¼å¯ä»¥éè¿member listè·åxxï¼ (2) åæ­¢etcdæå¡ (3) éè¦å°éç½®ä¸­ç cluster_stateæ¹ä¸ºï¼existingï¼å ä¸ºæ¯å å¥å·²æéç¾¤ï¼ä¸è½ç¨ new ä¿®å¤æºå¨é®é¢ï¼å é¤æ§çæ°æ®ç®å½ï¼éæ°å¯å¨ etcd æå¡ (4) å å¥ memeberï¼ etcdctl member add xxx âpeer-urls=https://x.x.x.x:2380 (5) éªè¯ï¼etcdctl endpoint status",charsets:{cjk:!0}},{title:"ceph",frontmatter:{title:"ceph",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/070d33/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",meta:[{name:"twitter:title",content:"ceph"},{name:"twitter:description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ceph"},{property:"og:description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ceph"},{itemprop:"description",content:"rbdä¸æ¯æReadWriteMany\nå¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/09.ceph.html",relativePath:"01.ææ¯æè°/03.kubernetes/09.ceph.md",key:"v-1247b65b",path:"/pages/070d33/",headersStr:null,content:"# æè½½ç¹æ¥è¯¢\n\n\n# rbd vs cephfs\n\nrbdä¸æ¯æReadWriteMany å¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",normalizedContent:"# æè½½ç¹æ¥è¯¢\n\n\n# rbd vs cephfs\n\nrbdä¸æ¯æreadwritemany å¨åä¸ä¸ªèç¹ä¸­,æ¯å¯ä»¥æ¯æå¤ä¸ªpodå±äº«rbd imageè¿è¡ç",charsets:{cjk:!0}},{title:"chrony",frontmatter:{title:"chrony",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/bfddf3/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"chrony"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html"},{property:"og:type",content:"article"},{property:"og:title",content:"chrony"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"chrony"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/10.chrony.html",relativePath:"01.ææ¯æè°/03.kubernetes/10.chrony.md",key:"v-cbe0d60a",path:"/pages/bfddf3/",headers:[{level:2,title:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:",slug:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹",normalizedTitle:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:",charIndex:643},{level:2,title:"ntpè½åï¼chronyåä¸å°çï¼",slug:"ntpè½å-chronyåä¸å°ç",normalizedTitle:"ntpè½åï¼chronyåä¸å°çï¼",charIndex:923},{level:2,title:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼",slug:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½",normalizedTitle:"chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼",charIndex:1212},{level:2,title:"å¸¸ç¨éç½®é¡¹ï¼",slug:"å¸¸ç¨éç½®é¡¹",normalizedTitle:"å¸¸ç¨éç½®é¡¹ï¼",charIndex:3018},{level:2,title:"å»ºè®®éç½®é¡¹ï¼",slug:"å»ºè®®éç½®é¡¹",normalizedTitle:"å»ºè®®éç½®é¡¹ï¼",charIndex:4461},{level:2,title:"NTP Server(masterèç¹)",slug:"ntp-server-masterèç¹",normalizedTitle:"ntp server(masterèç¹)",charIndex:4663},{level:2,title:"NTP Client(æ®énodeèç¹)",slug:"ntp-client-æ®énodeèç¹",normalizedTitle:"ntp client(æ®énodeèç¹)",charIndex:4843}],headersStr:"chronyçä¼å¿åæ¬ä»¥ä¸å ç¹: ntpè½åï¼chronyåä¸å°çï¼ chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼ å¸¸ç¨éç½®é¡¹ï¼ å»ºè®®éç½®é¡¹ï¼ NTP Server(masterèç¹) NTP Client(æ®énodeèç¹)",content:"[TOC]\n\n\n# ä¸ãChronyç®è¿°\n\nchronyæ¯ç½ç»æ¶é´åè®®(NTP)çå¦ä¸ç§å®ç°,ä¸ç½ç»æ¶é´åè®®åå°ç¨åº(ntpd)ä¸å,å®å¯ä»¥æ´å¿«å°ä¸æ´åç¡®å°åæ­¥ç³»ç»æ¶éï¼è¯·æ³¨æï¼ntpdä»ç¶åå«å¶ä¸­ä»¥ä¾éè¦è¿è¡NTPæå¡çå®¢æ·ä½¿ç¨ã ä¸¤ä¸ªä¸»è¦ç¨åºï¼chronydåchronyc\n\n * chronydï¼åå°è¿è¡çå®æ¤è¿ç¨ï¼ç¨äºè°æ´åæ ¸ä¸­è¿è¡çç³»ç»æ¶éåæ¶éæå¡å¨åæ­¥ãå®ç¡®å®è®¡ç®æºå¢åæ¶é´çæ¯çï¼å¹¶å¯¹æ­¤è¿è¡è¡¥å¿\n * chronycï¼å½ä»¤è¡ç¨æ·å·¥å·ï¼ç¨äºçæ§æ§è½å¹¶è¿è¡å¤æ ·åçéç½®ãå®å¯ä»¥å¨chronydå®ä¾æ§å¶çè®¡ç®æºä¸å·¥ä½ï¼ä¹å¯å¨ä¸å°ä¸åçè¿ç¨è®¡ç®æºä¸å·¥ä½\n\n> æå¡unitæä»¶ï¼ /usr/lib/systemd/system/chronyd.service çå¬ç«¯å£ï¼ 323/udpï¼123/udp éç½®æä»¶ï¼ /etc/chrony.conf\n\n\n# äºãé¨ç½²çæ¬ï¼\n\nå®æ¹çæ¬ï¼3.4\n\n\n# ä¸ãç¯å¢éç½®ï¼\n\n1ãå³é­firewalldé²ç«å¢ 2ãå³é­SELinux 3ãchronyä¸ntpé½æ¯æ¶é´åæ­¥è½¯ä»¶ï¼ä¸¤ä¸ªè½¯ä»¶ä¸è½å¤åæ¶å¼å¯ï¼ä¼åºç°æ¶é´å²çª\n\n\n# åãNTP/Chronyå¯¹æ¯ï¼\n\nä½¿ç¨chronydæå¡å¹³æ»åæ­¥æ¶é´çæ¹å¼è¦ä¼äºcrontab + ntpdateï¼å ä¸ºntpdateåæ­¥æ¶é´ä¼é ææ¶é´çè·³è·ï¼å¯¹ä¸äºä¾èµæ¶é´çç¨åºåæå¡ä¼é æå½±åï¼ä¾å¦ï¼sleepãtimerç­ï¼ä¸chronydæå¡å¯ä»¥å¨ä¿®æ­£æ¶é´çè¿ç¨ä¸­åæ¶ä¿®æ­£CPU tickã\n\n\n# chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:\n\n1.æ´å¿«çåæ­¥åªéè¦æ°åéèéæ°å°æ¶æ¶é´ï¼ä»èæå¤§ç¨åº¦åå°æ¶é´åé¢çè¯¯å·®ï¼è¿å¯¹äºå¹¶éå¨å¤©24å°æ¶çè¿è¡çå°å¼è®¡ç®æºæç³»ç»èè¨éå¸¸æç¨ï¼ 2.è½å¤æ´å¥½å°ååºæ¶éé¢ççå¿«éååï¼è¿å¯¹äºå·å¤ä¸ç¨³å®æ¶éçèææºæå¯¼è´èµäºä¸­é¢çåçæ¯ååçèè½ææ¯; 3.å¨åå§åæ­¥åï¼å®ä¸ä¼åæ­¢æ¶éï¼ä»¥é²å¯¹éè¦ç³»ç»æ¶é´ä¿æåè°çåºç¨ç¨åºé æå½±å; 4.å¨åºå¯¹ä¸´æ¶éå¯¹ç§°å»¶è¿æ¶(ä¾å¦å¤§è§æ¨¡ä¸è½½é æé¾æ¥é¥±åç­æåµ)æä¾äºæ´å¥½çç¨³å®æ§; 5.æ éå¯¹æ¶é´æå¡å¨è¿è¡å®æè½®è¯¢ï¼å æ­¤å·å¤é´æ­æ§ç½ç»è¿æ¥(å¦ç½ç»ä¸ç¨³å®çåºæ¯)çç³»ç»ä»ç¶å¯ä»¥å¿«éåæ­¥æ¶éã\n\n\n# ntpè½åï¼chronyåä¸å°çï¼\n\nntpæ¯æRFC 5905çæææä½æ¨¡å¼ï¼åæ¬å¹¿æ­ãå¤æ­åmanycastæå¡å¨/å®¢æ·ç«¯ãç¶èï¼å¹¿æ­åå¤æ­æ¨¡å¼æ¬è´¨ä¸ä¸å¦æ®éçæå¡å¨/å®¢æ·æºæ¨¡å¼åç¡®åå®å¨ï¼å³ä½¿æèº«ä»½éªè¯ï¼ï¼éå¸¸åºè¯¥é¿åã ntpæ¯æèªå¨å¯é¥åè®®ï¼RFC 5906ï¼æ¥ä½¿ç¨å¬é¥å å¯å¯¹æå¡å¨è¿è¡èº«ä»½éªè¯ãè¯·æ³¨æï¼è¯¥åè®®å·²è¢«è¯ææ¯ä¸å®å¨çï¼å¹¶ä¸å·²è¢«NTSï¼RFC 8915ï¼æ·æ±°ã ntpå·²ç»è¢«ç§»æ¤å°æ´å¤çæä½ç³»ç»ä¸­ã ntpåå«å¤§éç¨äºåç§ç¡¬ä»¶åèæ¶éçé©±å¨ç¨åºãchronyéè¦å¶ä»ç¨åºï¼å¦gpsdæntp refclockï¼éè¿SHMæSOCKæ¥å£æä¾åèæ¶é´ã\n\n\n# chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼\n\nchronyå¯ä»¥å¨è®¿é®æ¶é´åèæ¯æ­æ­ç»­ç»­çç¯å¢ä¸­ææå°æ§è¡ãntpéè¦å®æå¯¹å¼ç¨è¿è¡è½®è¯¢æè½æ­£å¸¸å·¥ä½ã chronyéå¸¸å¯ä»¥æ´å¿«å°åæ­¥æ¶éï¼å¹¶å·ææ´å¥½çæ¶é´ç²¾åº¦ã chronyå¿«ééåºæ¶ééçççªç¶ååï¼ä¾å¦ï¼ç±äºæ¶ä½æ¯è¡å¨çæ¸©åº¦ååï¼ãntpå¯è½éè¦å¾é¿æ¶é´æè½éæ°å®å®ä¸æ¥ã chronyå³ä½¿å¨ç½ç»æ¥å¡æ¶é´è¾é¿çæåµä¸ä¹è½è¡¨ç°è¯å¥½ã é»è®¤éç½®ä¸­çchronyä»ä¸å ç¨æ¶é´æ¥ä¸æä¹±å¶ä»æ­£å¨è¿è¡çç¨åºãntpä¹å¯ä»¥éç½®ä¸ºä»ä¸æ­¥è¿æ¶é´ï¼ä½æ¯å¨è¿ç§æåµä¸ï¼å®å¿é¡»ä½¿ç¨ä¸åçæ¹æ³æ¥è°æ´æ¶éï¼daemonå¾ªç¯èä¸æ¯åæ ¸è§ç¨ï¼ï¼è¿å¯è½ä¼å¯¹æ¶éçåç¡®æ§äº§çè´é¢å½±åã chronyå¯ä»¥å¨æ´å¤§çèå´åè°æ´æ¶éçéçï¼è¿ä½¿å¾å®çè³å¯ä»¥å¨æ¶éä¸­æ­æä¸ç¨³å®çæºå¨ä¸è¿è¡ï¼ä¾å¦å¨æäºèææºä¸­ï¼ã chronyæ´å°ï¼å ç¨çåå­æ´å°ï¼åªæå¨éè¦æ¶æä¼å¤éCPUï¼è¿æ ·æ´ççµã chronyå¯ä»¥åntpåä¸å°çäºæï¼ chronyæ¯æç½ç»æ¶é´å®å¨ï¼NTSï¼è®¤è¯æºå¶ã chronyå¨Linuxä¸æ¯æç¡¬ä»¶æ¶é´æ³ï¼è¿åè®¸å¨æ¬å°ç½ç»ä¸­è¿è¡éå¸¸ç¨³å®ååç¡®çåæ­¥ã chronyä¸ºç¬ç«ç½ç»æä¾æ¯æï¼æ è®ºæ¶é´æ ¡æ­£çå¯ä¸æ¹æ³æ¯æå¨è¾å¥ï¼ä¾å¦ï¼ç±ç®¡çåæ¥çæ¶éï¼ãchronyå¯ä»¥æ¥çå¨ä¸åæ´æ°æ¶æ´æ­£çéè¯¯ï¼è®¡ç®åºè®¡ç®æºè·å¾æä¸¢å¤±æ¶é´çéçï¼å¹¶ä½¿ç¨æ­¤ä¼°è®¡å¼æ¥éåè°æ´è®¡ç®æºæ¶éã chronyæ¯æè®¡ç®å®æ¶æ¶éçå¢çæä¸¢å¤±çï¼å³å¨è®¡ç®æºå³é­æ¶ä¿ææ¶é´çæ¶éãå½ç³»ç»å¼å¯¼æ¶ï¼å®å¯ä»¥ä½¿ç¨è¿äºæ°æ®ä»å®æ¶æ¶éçä¿®æ­£çæ¬è®¾ç½®ç³»ç»æ¶é´ãå°ç®åä¸ºæ­¢ï¼è¿äºå®æ¶æ¶éå·¥å·ä»å¨Linuxä¸å¯ç¨ã\n\n\n# äºãchronyæå¡å®è£çæä»¶ï¼\n\n[root@master200.yinzhengjie.org.cn ~]# rpm -ql chrony\n/etc/NetworkManager/dispatcher.d/20-chrony\n/etc/chrony.confãããããããã#chronyçä¸»éç½®æä»¶\n/etc/chrony.keys\n/etc/dhcp/dhclient.d/chrony.sh\n/etc/logrotate.d/chrony\n/etc/sysconfig/chronyd\n/usr/bin/chronycãããããããã#chronycæ¯ä¸ä¸ªå½ä»¤è¡äº¤äºå¼æ¥å£ç¨åºï¼å¯ç¨äºçè§chronydçæ§è½ï¼å¹¶å¨è¿è¡æ¶æ´æ¹åç§æä½åæ°ã\n/usr/lib/systemd/ntp-units.d/50-chronyd.list\n/usr/lib/systemd/system/chrony-dnssrv@.service\n/usr/lib/systemd/system/chrony-dnssrv@.timer\n/usr/lib/systemd/system/chrony-wait.service\n/usr/lib/systemd/system/chronyd.serviceãããããã#CentOS 7.xçæ¬å¯¹åºçunit file\n/usr/libexec/chrony-helper\n/usr/sbin/chronyd              #chronydæ¯ä¸ä¸ªå¯ä»¥å¨å¯å¨æ¶å¯å¨çå®æ¤ç¨åºï¼å®æ¢å¯ä»¥åå½æå¡ç«¯è¿ç¨ä¹å¯ä»¥åå½æå¡ç«¯è¿ç¨\n/usr/share/doc/chrony-3.4\n/usr/share/doc/chrony-3.4/COPYING\n/usr/share/doc/chrony-3.4/FAQ\n/usr/share/doc/chrony-3.4/NEWS\n/usr/share/doc/chrony-3.4/README\n/usr/share/man/man1/chronyc.1.gz\n/usr/share/man/man5/chrony.conf.5.gz\n/usr/share/man/man8/chronyd.8.gz\n/var/lib/chrony\n/var/lib/chrony/drift\n/var/lib/chrony/rtc\n/var/log/chrony\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# å­ãChronyéç½®chrony.conf\n\n\n# å¸¸ç¨éç½®é¡¹ï¼\n\nPool 10.210.116.60                       #æ­¤æä»¤çè¯­æ³ä¸serveræä»¤çè¯­æ³ç±»ä¼¼ï¼åªæ¯å®ç¨äºæå®NTPæå¡å¨æ± ï¼èä¸æ¯åä¸ªNTPæå¡å¨ãæ± åç§°éè¦è§£æä¸ºå¤ä¸ªå°åï¼è¿äºå°åå¯è½ä¼éçæ¶é´çæ¨ç§»èæ¹åã\nserver 0.centos.pool.ntp.org iburst          #serverå¯ç¨äºæ¶éæå¡å¨ï¼iburstï¼å½æå¡å¨å¯è¾¾æ¶ï¼åéä¸ä¸ªå«ä¸ªæ°æ®åèä¸æ¯éå¸¸çä¸ä¸ªæ°æ®åï¼åé´ééå¸¸ä¸º2ç§ï¼å¯å å¿«åå§åæ­¥éåº¦; iburst æ¯åæ°, ä¸è¬ç¨æ­¤åæ°å³å¯ãè¯¥åæ°çå«ä¹æ¯å¨å¤´åæ¬¡ NTP è¯·æ±ä»¥ 2s æèæ´ç­çé´éï¼èä¸æ¯ä»¥ minpoll x æå®çæå°é´éï¼è¿æ ·çè®¾ç½®å¯ä»¥è®© chronyd å¯å¨æ¶å¿«éè¿è¡ä¸æ¬¡åæ­¥ã\nå¶ä»çåæ°æ minpoll x é»è®¤å¼æ¯ 6ï¼ä»£è¡¨ 64sãmaxpoll x é»è®¤å¼æ¯ 9ï¼ä»£è¡¨ 512sã\nserver 1.centos.pool.ntp.org iburst          #N.centos.pool.ntp.orgï¼è¿ä¸ªæ¯å°åæ± ï¼æ¯ntpæå¡çèæéç¾¤ï¼è¿éå¯ä»¥åæéç¾¤å°åï¼ä¹å¯ä»¥åæå®çææå¡å¨\npeer 10.210.116.160     #åntp, å¯¹ç­ä½æ¨¡å¼\ndriftfile /var/lib/chrony/drift              #æ ¹æ®å®éæ¶é´è®¡ç®åºè®¡ç®æºå¢åæ¶é´çæ¯çï¼è®²å®è®°å½å°ä¸ä¸ªæä»¶ä¸­ï¼ä¼å¨éå¯åä¸ºç³»ç»æ¶éååºè¡¥å¿\nmakestep 1.0 3                         #å½å¤´ä¸æ¬¡æ ¡æ¶ï¼å¦ææ¶é´ç¸å·® 1.0s, åè·³è·å¼æ ¡æ¶\nrtcsync                                #å¯ç¨åæ ¸æ¨¡å¼ï¼ç³»ç»æ¶éæ¯11åéä¼æ·è´å°å®æ¶æ¶éï¼RTCï¼\n#allow 192.168.0.0/16                   #allow/denyï¼ä»åè®¸/æç»192.168.2.0/24ç½ç»çä¸»æºå¯ä»¥è®¿é®æ­¤æ¶é´æå¡å¨ deny allæç»ææå®¢æ·ç«¯\n#local stratum 10                       #å³ä½¿serveræä»¤ä¸­æ¶é´æå¡å¨ä¸å¯ç¨ï¼ä¹åè®¸è®²æ¬å°æ¶é´åä¸ºæ åæ¶é´ææ¶ç»å¶å®å®¢æ·ç«¯\nstratumweight 0.05                      # è®©chronydå¨éæ©æºæ¶å¿½ç¥æºçå±çº§\n#hwtimestamp *                        #éè¿ä½¿ç¨ hwtimestamp æä»¤å¯ç¨ç¡¬ä»¶æ¶é´æ³\n#minsources 2                          #å¢å è°æ´æéçå¯éæ©æºçæå°æ°é\n#keyfile /etc/chrony.keys                 # æå®åå«NTPéªè¯å¯é¥çæä»¶ã\nlogdir /var/log/chrony                   # æå®æ¥å¿æä»¶çç®å½ã\nlogchange 0.5                          # å¦ææ¶éè°æ´å¤§äº0.5ç§ï¼ååç³»ç»æ¥å¿åéæ¶æ¯\n#log measurements statistics tracking      #éæ©æ¥å¿æä»¶è¦è®°å½çä¿¡æ¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# å»ºè®®éç½®é¡¹ï¼\n\n 1. å½åèç¹è®¾ç½®æserver:127.127.0.1\n 2. ä¸ä¸ªmasterèç¹ä½ä¸ºå¶ä»æ®éèç¹çæ¶é´æå¡å¨ï¼éç½®æpoolï¼\n 3. ä¸ä¸ªmasterèç¹äºä¸ºpeer(ååntp)\n 4. å¦ææå¤é¨æ¶éæºéç½®ï¼åè®¾ç½®æpool\n 5. å¦ææ¶é´è¶è¿10minï¼ååè®¸ç¬¬ä¸æ¬¡è·³è· ï¼ä¸ä¹åæ²ééæ±ä¿æä¸è´ï¼å¯ä¿®æ¹ç­ç¥ï¼\n 6. æå¤3ä¸ªå¤é¨æ¶éæºï¼å¯ä»¥ä¸è®¾ç½®å¤é¨æ¶éæº\n\n\n# NTP Server(masterèç¹)\n\nserver 127.127.0.1 pool å¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 peer master2èç¹IP peer master3èç¹IP driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# NTP Client(æ®énodeèç¹)\n\nserver 127.127.0.1 poolå¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 pool master1èç¹IP pool master2èç¹IP pool master3èç¹IP driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ä¸ãé¨ç½²:\n\nenable chronyï¼ disable ntpd\n\n 1. Stop/disable ntpd\n 2. configure chrony.conf(master/node)\n 3. systemctl start/enable chronyd.service\n 4. systemctl restart chronyd.service (notify)\n\n\n# å«ãå¸¸ç¨chronyå½ä»¤ï¼\n\n1ã chronyd -q 'server ntp.ntsc.ac.cn iburst' ä¸´æ¶åæ­¥æ¶é´ 2ã chronyc -n sources -v æ¥çæ¶é´åæ­¥æå¡å¨åè¡¨ 3ã accheck - æ£æ¥NTPè®¿é®æ¯å¦å¯¹ç¹å®ä¸»æºå¯ç¨ 4ã activity - è¯¥å½ä»¤ä¼æ¾ç¤ºæå¤å°NTPæºå¨çº¿/ç¦»çº¿ 5ã add server - æå¨æ·»å ä¸å°æ°çNTPæå¡å¨ã 6ã clients - å¨å®¢æ·ç«¯æ¥åå·²è®¿é®å°æå¡å¨ 7ã delete - æå¨ç§»é¤NTPæå¡å¨æå¯¹ç­æå¡å¨ 8ã settime - æå¨è®¾ç½®å®æ¤è¿ç¨æ¶é´ 9ã tracking - æ¾ç¤ºç³»ç»æ¶é´ä¿¡æ¯\n\n\n# ä¹ãé®é¢å®ä½æè·¯\n\n1.æ£æ¥chronyæå¡æ¯å¦æ­£å¸¸ï¼chrony activity 2.æ£æ¥ntpdæå¡æ¯å¦å¯å¨ï¼systemctl is-active ntpd 3.æ£æ¥æ¶é´åæ­¥æå¡å¨åè¡¨ï¼chronyc -n sources -v\n\n\n# åãåèèµæï¼\n\nhttps://chrony.tuxfamily.org/documentation.html",normalizedContent:"[toc]\n\n\n# ä¸ãchronyç®è¿°\n\nchronyæ¯ç½ç»æ¶é´åè®®(ntp)çå¦ä¸ç§å®ç°,ä¸ç½ç»æ¶é´åè®®åå°ç¨åº(ntpd)ä¸å,å®å¯ä»¥æ´å¿«å°ä¸æ´åç¡®å°åæ­¥ç³»ç»æ¶éï¼è¯·æ³¨æï¼ntpdä»ç¶åå«å¶ä¸­ä»¥ä¾éè¦è¿è¡ntpæå¡çå®¢æ·ä½¿ç¨ã ä¸¤ä¸ªä¸»è¦ç¨åºï¼chronydåchronyc\n\n * chronydï¼åå°è¿è¡çå®æ¤è¿ç¨ï¼ç¨äºè°æ´åæ ¸ä¸­è¿è¡çç³»ç»æ¶éåæ¶éæå¡å¨åæ­¥ãå®ç¡®å®è®¡ç®æºå¢åæ¶é´çæ¯çï¼å¹¶å¯¹æ­¤è¿è¡è¡¥å¿\n * chronycï¼å½ä»¤è¡ç¨æ·å·¥å·ï¼ç¨äºçæ§æ§è½å¹¶è¿è¡å¤æ ·åçéç½®ãå®å¯ä»¥å¨chronydå®ä¾æ§å¶çè®¡ç®æºä¸å·¥ä½ï¼ä¹å¯å¨ä¸å°ä¸åçè¿ç¨è®¡ç®æºä¸å·¥ä½\n\n> æå¡unitæä»¶ï¼ /usr/lib/systemd/system/chronyd.service çå¬ç«¯å£ï¼ 323/udpï¼123/udp éç½®æä»¶ï¼ /etc/chrony.conf\n\n\n# äºãé¨ç½²çæ¬ï¼\n\nå®æ¹çæ¬ï¼3.4\n\n\n# ä¸ãç¯å¢éç½®ï¼\n\n1ãå³é­firewalldé²ç«å¢ 2ãå³é­selinux 3ãchronyä¸ntpé½æ¯æ¶é´åæ­¥è½¯ä»¶ï¼ä¸¤ä¸ªè½¯ä»¶ä¸è½å¤åæ¶å¼å¯ï¼ä¼åºç°æ¶é´å²çª\n\n\n# åãntp/chronyå¯¹æ¯ï¼\n\nä½¿ç¨chronydæå¡å¹³æ»åæ­¥æ¶é´çæ¹å¼è¦ä¼äºcrontab + ntpdateï¼å ä¸ºntpdateåæ­¥æ¶é´ä¼é ææ¶é´çè·³è·ï¼å¯¹ä¸äºä¾èµæ¶é´çç¨åºåæå¡ä¼é æå½±åï¼ä¾å¦ï¼sleepãtimerç­ï¼ä¸chronydæå¡å¯ä»¥å¨ä¿®æ­£æ¶é´çè¿ç¨ä¸­åæ¶ä¿®æ­£cpu tickã\n\n\n# chronyçä¼å¿åæ¬ä»¥ä¸å ç¹:\n\n1.æ´å¿«çåæ­¥åªéè¦æ°åéèéæ°å°æ¶æ¶é´ï¼ä»èæå¤§ç¨åº¦åå°æ¶é´åé¢çè¯¯å·®ï¼è¿å¯¹äºå¹¶éå¨å¤©24å°æ¶çè¿è¡çå°å¼è®¡ç®æºæç³»ç»èè¨éå¸¸æç¨ï¼ 2.è½å¤æ´å¥½å°ååºæ¶éé¢ççå¿«éååï¼è¿å¯¹äºå·å¤ä¸ç¨³å®æ¶éçèææºæå¯¼è´èµäºä¸­é¢çåçæ¯ååçèè½ææ¯; 3.å¨åå§åæ­¥åï¼å®ä¸ä¼åæ­¢æ¶éï¼ä»¥é²å¯¹éè¦ç³»ç»æ¶é´ä¿æåè°çåºç¨ç¨åºé æå½±å; 4.å¨åºå¯¹ä¸´æ¶éå¯¹ç§°å»¶è¿æ¶(ä¾å¦å¤§è§æ¨¡ä¸è½½é æé¾æ¥é¥±åç­æåµ)æä¾äºæ´å¥½çç¨³å®æ§; 5.æ éå¯¹æ¶é´æå¡å¨è¿è¡å®æè½®è¯¢ï¼å æ­¤å·å¤é´æ­æ§ç½ç»è¿æ¥(å¦ç½ç»ä¸ç¨³å®çåºæ¯)çç³»ç»ä»ç¶å¯ä»¥å¿«éåæ­¥æ¶éã\n\n\n# ntpè½åï¼chronyåä¸å°çï¼\n\nntpæ¯ærfc 5905çæææä½æ¨¡å¼ï¼åæ¬å¹¿æ­ãå¤æ­åmanycastæå¡å¨/å®¢æ·ç«¯ãç¶èï¼å¹¿æ­åå¤æ­æ¨¡å¼æ¬è´¨ä¸ä¸å¦æ®éçæå¡å¨/å®¢æ·æºæ¨¡å¼åç¡®åå®å¨ï¼å³ä½¿æèº«ä»½éªè¯ï¼ï¼éå¸¸åºè¯¥é¿åã ntpæ¯æèªå¨å¯é¥åè®®ï¼rfc 5906ï¼æ¥ä½¿ç¨å¬é¥å å¯å¯¹æå¡å¨è¿è¡èº«ä»½éªè¯ãè¯·æ³¨æï¼è¯¥åè®®å·²è¢«è¯ææ¯ä¸å®å¨çï¼å¹¶ä¸å·²è¢«ntsï¼rfc 8915ï¼æ·æ±°ã ntpå·²ç»è¢«ç§»æ¤å°æ´å¤çæä½ç³»ç»ä¸­ã ntpåå«å¤§éç¨äºåç§ç¡¬ä»¶åèæ¶éçé©±å¨ç¨åºãchronyéè¦å¶ä»ç¨åºï¼å¦gpsdæntp refclockï¼éè¿shmæsockæ¥å£æä¾åèæ¶é´ã\n\n\n# chronyå¯ä»¥æ¯ntpåå¾æ´å¥½ï¼\n\nchronyå¯ä»¥å¨è®¿é®æ¶é´åèæ¯æ­æ­ç»­ç»­çç¯å¢ä¸­ææå°æ§è¡ãntpéè¦å®æå¯¹å¼ç¨è¿è¡è½®è¯¢æè½æ­£å¸¸å·¥ä½ã chronyéå¸¸å¯ä»¥æ´å¿«å°åæ­¥æ¶éï¼å¹¶å·ææ´å¥½çæ¶é´ç²¾åº¦ã chronyå¿«ééåºæ¶ééçççªç¶ååï¼ä¾å¦ï¼ç±äºæ¶ä½æ¯è¡å¨çæ¸©åº¦ååï¼ãntpå¯è½éè¦å¾é¿æ¶é´æè½éæ°å®å®ä¸æ¥ã chronyå³ä½¿å¨ç½ç»æ¥å¡æ¶é´è¾é¿çæåµä¸ä¹è½è¡¨ç°è¯å¥½ã é»è®¤éç½®ä¸­çchronyä»ä¸å ç¨æ¶é´æ¥ä¸æä¹±å¶ä»æ­£å¨è¿è¡çç¨åºãntpä¹å¯ä»¥éç½®ä¸ºä»ä¸æ­¥è¿æ¶é´ï¼ä½æ¯å¨è¿ç§æåµä¸ï¼å®å¿é¡»ä½¿ç¨ä¸åçæ¹æ³æ¥è°æ´æ¶éï¼daemonå¾ªç¯èä¸æ¯åæ ¸è§ç¨ï¼ï¼è¿å¯è½ä¼å¯¹æ¶éçåç¡®æ§äº§çè´é¢å½±åã chronyå¯ä»¥å¨æ´å¤§çèå´åè°æ´æ¶éçéçï¼è¿ä½¿å¾å®çè³å¯ä»¥å¨æ¶éä¸­æ­æä¸ç¨³å®çæºå¨ä¸è¿è¡ï¼ä¾å¦å¨æäºèææºä¸­ï¼ã chronyæ´å°ï¼å ç¨çåå­æ´å°ï¼åªæå¨éè¦æ¶æä¼å¤écpuï¼è¿æ ·æ´ççµã chronyå¯ä»¥åntpåä¸å°çäºæï¼ chronyæ¯æç½ç»æ¶é´å®å¨ï¼ntsï¼è®¤è¯æºå¶ã chronyå¨linuxä¸æ¯æç¡¬ä»¶æ¶é´æ³ï¼è¿åè®¸å¨æ¬å°ç½ç»ä¸­è¿è¡éå¸¸ç¨³å®ååç¡®çåæ­¥ã chronyä¸ºç¬ç«ç½ç»æä¾æ¯æï¼æ è®ºæ¶é´æ ¡æ­£çå¯ä¸æ¹æ³æ¯æå¨è¾å¥ï¼ä¾å¦ï¼ç±ç®¡çåæ¥çæ¶éï¼ãchronyå¯ä»¥æ¥çå¨ä¸åæ´æ°æ¶æ´æ­£çéè¯¯ï¼è®¡ç®åºè®¡ç®æºè·å¾æä¸¢å¤±æ¶é´çéçï¼å¹¶ä½¿ç¨æ­¤ä¼°è®¡å¼æ¥éåè°æ´è®¡ç®æºæ¶éã chronyæ¯æè®¡ç®å®æ¶æ¶éçå¢çæä¸¢å¤±çï¼å³å¨è®¡ç®æºå³é­æ¶ä¿ææ¶é´çæ¶éãå½ç³»ç»å¼å¯¼æ¶ï¼å®å¯ä»¥ä½¿ç¨è¿äºæ°æ®ä»å®æ¶æ¶éçä¿®æ­£çæ¬è®¾ç½®ç³»ç»æ¶é´ãå°ç®åä¸ºæ­¢ï¼è¿äºå®æ¶æ¶éå·¥å·ä»å¨linuxä¸å¯ç¨ã\n\n\n# äºãchronyæå¡å®è£çæä»¶ï¼\n\n[root@master200.yinzhengjie.org.cn ~]# rpm -ql chrony\n/etc/networkmanager/dispatcher.d/20-chrony\n/etc/chrony.confãããããããã#chronyçä¸»éç½®æä»¶\n/etc/chrony.keys\n/etc/dhcp/dhclient.d/chrony.sh\n/etc/logrotate.d/chrony\n/etc/sysconfig/chronyd\n/usr/bin/chronycãããããããã#chronycæ¯ä¸ä¸ªå½ä»¤è¡äº¤äºå¼æ¥å£ç¨åºï¼å¯ç¨äºçè§chronydçæ§è½ï¼å¹¶å¨è¿è¡æ¶æ´æ¹åç§æä½åæ°ã\n/usr/lib/systemd/ntp-units.d/50-chronyd.list\n/usr/lib/systemd/system/chrony-dnssrv@.service\n/usr/lib/systemd/system/chrony-dnssrv@.timer\n/usr/lib/systemd/system/chrony-wait.service\n/usr/lib/systemd/system/chronyd.serviceãããããã#centos 7.xçæ¬å¯¹åºçunit file\n/usr/libexec/chrony-helper\n/usr/sbin/chronyd              #chronydæ¯ä¸ä¸ªå¯ä»¥å¨å¯å¨æ¶å¯å¨çå®æ¤ç¨åºï¼å®æ¢å¯ä»¥åå½æå¡ç«¯è¿ç¨ä¹å¯ä»¥åå½æå¡ç«¯è¿ç¨\n/usr/share/doc/chrony-3.4\n/usr/share/doc/chrony-3.4/copying\n/usr/share/doc/chrony-3.4/faq\n/usr/share/doc/chrony-3.4/news\n/usr/share/doc/chrony-3.4/readme\n/usr/share/man/man1/chronyc.1.gz\n/usr/share/man/man5/chrony.conf.5.gz\n/usr/share/man/man8/chronyd.8.gz\n/var/lib/chrony\n/var/lib/chrony/drift\n/var/lib/chrony/rtc\n/var/log/chrony\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# å­ãchronyéç½®chrony.conf\n\n\n# å¸¸ç¨éç½®é¡¹ï¼\n\npool 10.210.116.60                       #æ­¤æä»¤çè¯­æ³ä¸serveræä»¤çè¯­æ³ç±»ä¼¼ï¼åªæ¯å®ç¨äºæå®ntpæå¡å¨æ± ï¼èä¸æ¯åä¸ªntpæå¡å¨ãæ± åç§°éè¦è§£æä¸ºå¤ä¸ªå°åï¼è¿äºå°åå¯è½ä¼éçæ¶é´çæ¨ç§»èæ¹åã\nserver 0.centos.pool.ntp.org iburst          #serverå¯ç¨äºæ¶éæå¡å¨ï¼iburstï¼å½æå¡å¨å¯è¾¾æ¶ï¼åéä¸ä¸ªå«ä¸ªæ°æ®åèä¸æ¯éå¸¸çä¸ä¸ªæ°æ®åï¼åé´ééå¸¸ä¸º2ç§ï¼å¯å å¿«åå§åæ­¥éåº¦; iburst æ¯åæ°, ä¸è¬ç¨æ­¤åæ°å³å¯ãè¯¥åæ°çå«ä¹æ¯å¨å¤´åæ¬¡ ntp è¯·æ±ä»¥ 2s æèæ´ç­çé´éï¼èä¸æ¯ä»¥ minpoll x æå®çæå°é´éï¼è¿æ ·çè®¾ç½®å¯ä»¥è®© chronyd å¯å¨æ¶å¿«éè¿è¡ä¸æ¬¡åæ­¥ã\nå¶ä»çåæ°æ minpoll x é»è®¤å¼æ¯ 6ï¼ä»£è¡¨ 64sãmaxpoll x é»è®¤å¼æ¯ 9ï¼ä»£è¡¨ 512sã\nserver 1.centos.pool.ntp.org iburst          #n.centos.pool.ntp.orgï¼è¿ä¸ªæ¯å°åæ± ï¼æ¯ntpæå¡çèæéç¾¤ï¼è¿éå¯ä»¥åæéç¾¤å°åï¼ä¹å¯ä»¥åæå®çææå¡å¨\npeer 10.210.116.160     #åntp, å¯¹ç­ä½æ¨¡å¼\ndriftfile /var/lib/chrony/drift              #æ ¹æ®å®éæ¶é´è®¡ç®åºè®¡ç®æºå¢åæ¶é´çæ¯çï¼è®²å®è®°å½å°ä¸ä¸ªæä»¶ä¸­ï¼ä¼å¨éå¯åä¸ºç³»ç»æ¶éååºè¡¥å¿\nmakestep 1.0 3                         #å½å¤´ä¸æ¬¡æ ¡æ¶ï¼å¦ææ¶é´ç¸å·® 1.0s, åè·³è·å¼æ ¡æ¶\nrtcsync                                #å¯ç¨åæ ¸æ¨¡å¼ï¼ç³»ç»æ¶éæ¯11åéä¼æ·è´å°å®æ¶æ¶éï¼rtcï¼\n#allow 192.168.0.0/16                   #allow/denyï¼ä»åè®¸/æç»192.168.2.0/24ç½ç»çä¸»æºå¯ä»¥è®¿é®æ­¤æ¶é´æå¡å¨ deny allæç»ææå®¢æ·ç«¯\n#local stratum 10                       #å³ä½¿serveræä»¤ä¸­æ¶é´æå¡å¨ä¸å¯ç¨ï¼ä¹åè®¸è®²æ¬å°æ¶é´åä¸ºæ åæ¶é´ææ¶ç»å¶å®å®¢æ·ç«¯\nstratumweight 0.05                      # è®©chronydå¨éæ©æºæ¶å¿½ç¥æºçå±çº§\n#hwtimestamp *                        #éè¿ä½¿ç¨ hwtimestamp æä»¤å¯ç¨ç¡¬ä»¶æ¶é´æ³\n#minsources 2                          #å¢å è°æ´æéçå¯éæ©æºçæå°æ°é\n#keyfile /etc/chrony.keys                 # æå®åå«ntpéªè¯å¯é¥çæä»¶ã\nlogdir /var/log/chrony                   # æå®æ¥å¿æä»¶çç®å½ã\nlogchange 0.5                          # å¦ææ¶éè°æ´å¤§äº0.5ç§ï¼ååç³»ç»æ¥å¿åéæ¶æ¯\n#log measurements statistics tracking      #éæ©æ¥å¿æä»¶è¦è®°å½çä¿¡æ¯\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# å»ºè®®éç½®é¡¹ï¼\n\n 1. å½åèç¹è®¾ç½®æserver:127.127.0.1\n 2. ä¸ä¸ªmasterèç¹ä½ä¸ºå¶ä»æ®éèç¹çæ¶é´æå¡å¨ï¼éç½®æpoolï¼\n 3. ä¸ä¸ªmasterèç¹äºä¸ºpeer(ååntp)\n 4. å¦ææå¤é¨æ¶éæºéç½®ï¼åè®¾ç½®æpool\n 5. å¦ææ¶é´è¶è¿10minï¼ååè®¸ç¬¬ä¸æ¬¡è·³è· ï¼ä¸ä¹åæ²ééæ±ä¿æä¸è´ï¼å¯ä¿®æ¹ç­ç¥ï¼\n 6. æå¤3ä¸ªå¤é¨æ¶éæºï¼å¯ä»¥ä¸è®¾ç½®å¤é¨æ¶éæº\n\n\n# ntp server(masterèç¹)\n\nserver 127.127.0.1 pool å¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 peer master2èç¹ip peer master3èç¹ip driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ntp client(æ®énodeèç¹)\n\nserver 127.127.0.1 poolå¤é¨æ¶éæº1 poolå¤é¨æ¶éæº2 pool master1èç¹ip pool master2èç¹ip pool master3èç¹ip driftfile /var/lib/chrony/drift makestep 600 1 rtcsync logdir /var/log/chrony\n\n\n# ä¸ãé¨ç½²:\n\nenable chronyï¼ disable ntpd\n\n 1. stop/disable ntpd\n 2. configure chrony.conf(master/node)\n 3. systemctl start/enable chronyd.service\n 4. systemctl restart chronyd.service (notify)\n\n\n# å«ãå¸¸ç¨chronyå½ä»¤ï¼\n\n1ã chronyd -q 'server ntp.ntsc.ac.cn iburst' ä¸´æ¶åæ­¥æ¶é´ 2ã chronyc -n sources -v æ¥çæ¶é´åæ­¥æå¡å¨åè¡¨ 3ã accheck - æ£æ¥ntpè®¿é®æ¯å¦å¯¹ç¹å®ä¸»æºå¯ç¨ 4ã activity - è¯¥å½ä»¤ä¼æ¾ç¤ºæå¤å°ntpæºå¨çº¿/ç¦»çº¿ 5ã add server - æå¨æ·»å ä¸å°æ°çntpæå¡å¨ã 6ã clients - å¨å®¢æ·ç«¯æ¥åå·²è®¿é®å°æå¡å¨ 7ã delete - æå¨ç§»é¤ntpæå¡å¨æå¯¹ç­æå¡å¨ 8ã settime - æå¨è®¾ç½®å®æ¤è¿ç¨æ¶é´ 9ã tracking - æ¾ç¤ºç³»ç»æ¶é´ä¿¡æ¯\n\n\n# ä¹ãé®é¢å®ä½æè·¯\n\n1.æ£æ¥chronyæå¡æ¯å¦æ­£å¸¸ï¼chrony activity 2.æ£æ¥ntpdæå¡æ¯å¦å¯å¨ï¼systemctl is-active ntpd 3.æ£æ¥æ¶é´åæ­¥æå¡å¨åè¡¨ï¼chronyc -n sources -v\n\n\n# åãåèèµæï¼\n\nhttps://chrony.tuxfamily.org/documentation.html",charsets:{cjk:!0}},{title:"crd operator",frontmatter:{title:"crd operator",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/5d5fcc/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)",meta:[{name:"twitter:title",content:"crd operator"},{name:"twitter:description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html"},{property:"og:type",content:"article"},{property:"og:title",content:"crd operator"},{property:"og:description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"crd operator"},{itemprop:"description",content:"èªå®ä¹èµæºçæè¿°(Custom Resource Definition)"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/11.crd%20operator.html",relativePath:"01.ææ¯æè°/03.kubernetes/11.crd operator.md",key:"v-81d98e10",path:"/pages/5d5fcc/",headersStr:null,content:"# CRD\n\nèªå®ä¹èµæºçæè¿°(Custom Resource Definition)\n\n\n# Operator\n\nOperatorçå·¥ä½åçï¼å®éä¸æ¯å©ç¨äºKubernetesçèªå®ä¹APIèµæºï¼CRDï¼ï¼æ¥æè¿°æä»¬æ³è¦é¨ç½²çâæç¶æåºç¨âï¼ç¶åå¨èªå®ä¹æ§å¶å¨éï¼æ ¹æ®èªå®ä¹APIå¯¹è±¡çååï¼æ¥å®æå·ä½çé¨ç½²åè¿ç»´å·¥ä½ã",normalizedContent:"# crd\n\nèªå®ä¹èµæºçæè¿°(custom resource definition)\n\n\n# operator\n\noperatorçå·¥ä½åçï¼å®éä¸æ¯å©ç¨äºkubernetesçèªå®ä¹apièµæºï¼crdï¼ï¼æ¥æè¿°æä»¬æ³è¦é¨ç½²çâæç¶æåºç¨âï¼ç¶åå¨èªå®ä¹æ§å¶å¨éï¼æ ¹æ®èªå®ä¹apiå¯¹è±¡çååï¼æ¥å®æå·ä½çé¨ç½²åè¿ç»´å·¥ä½ã",charsets:{cjk:!0}},{title:"criä¹containerd shimv2",frontmatter:{title:"criä¹containerd shimv2",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/fe3b2b/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"criä¹containerd shimv2"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html"},{property:"og:type",content:"article"},{property:"og:title",content:"criä¹containerd shimv2"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"criä¹containerd shimv2"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/12.cri%E4%B9%8Bcontainerd%20shimv2.html",relativePath:"01.ææ¯æè°/03.kubernetes/12.criä¹containerd shimv2.md",key:"v-16eeeecc",path:"/pages/fe3b2b/",headersStr:null,content:"[TOC]\n\n\n# åèèµæ\n\nhttps://www.infoq.cn/article/r*ikOvovTHhADAWw1Hb1 CRI Shimv2ï¼ä¸ç§ Kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼",normalizedContent:"[toc]\n\n\n# åèèµæ\n\nhttps://www.infoq.cn/article/r*ikovovthhadaww1hb1 cri shimv2ï¼ä¸ç§ kubernetes éæå®¹å¨è¿è¡æ¶çæ°æè·¯ï¼å¼ ç£ï¼",charsets:{cjk:!0}},{title:"harbor",frontmatter:{title:"harbor",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/c3cbc2/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"harbor"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html"},{property:"og:type",content:"article"},{property:"og:title",content:"harbor"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"harbor"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/13.harbor.html",relativePath:"01.ææ¯æè°/03.kubernetes/13.harbor.md",key:"v-c5d8330a",path:"/pages/c3cbc2/",headers:[{level:2,title:"harborå®è£",slug:"harborå®è£",normalizedTitle:"harborå®è£",charIndex:23},{level:2,title:"harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼",slug:"harboråçº§-å¤§äºv1-10-xå°æ´æ°çæ¬",normalizedTitle:"harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼",charIndex:141},{level:2,title:"harboråæ»",slug:"harboråæ»",normalizedTitle:"harboråæ»",charIndex:566},{level:2,title:"harboræ°æ®åºè¿ç§»ågolang-migrate",slug:"harboræ°æ®åºè¿ç§»ågolang-migrate",normalizedTitle:"harboræ°æ®åºè¿ç§»ågolang-migrate",charIndex:662}],headersStr:"harborå®è£ harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼ harboråæ» harboræ°æ®åºè¿ç§»ågolang-migrate",content:"# harboråçº§æ°æ®åºè¿ç§»ååæ»\n\n\n# harborå®è£\n\n 1. ä¸è½½docker-compose\n 2. ä¸è½½ï¼è§£åHarborç¦»çº¿å\n 3. ä¿®æ¹éç½®harbor.yml.tmpl>harbor.ymlåçæè¯ä¹¦ç­\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼\n\nharborä¸åé¶æ®µçåçº§æ¹å¼ä¸åï¼å­å¨å¼å®¹æ§é®é¢ï¼æäºçæ¬æ æ³ç´æ¥è·¨çæ¬åçº§ï¼éè¦å¤é¶æ®µåçº§æ¹å¼è¾¾å°æç»åçº§ç®ç èªharborv2èµ·ï¼è¿ç§»å·¥å·å¨é¨è½¬ç§»å°äº goharbor/prepare è¿ä¸ªéåä¸­\n\n 1. å°githubä¸è½½2.4.2çæ¬çç¦»çº¿åï¼åå«éågoharbor/prepareï¼\n 2. åå¤è¿ç§»å·¥å·éågoharbor/prepare\n 3. åæ­¢harbor\n 4. å¤ä»½æ°æ®åºåå®è£ç®å½\n 5. è§£åç¦»çº¿åå°å®è£ç®å½\n 6. ç§»å¨æ§çéç½®æä»¶å°æ°çå®è£ç®å½ä¸\n 7. æ°æ®è¿ç§»ï¼docker run -it --rm -v /:/hostfs goharbor/prepare:v2.4.2 migrate -i /opt/harbor/harbor.yml ï¼æ­¤æ´æ°åæ¬æ°æ®åºæ¨¡å¼ï¼schemaï¼åéç½®æä»¶æ°æ®ï¼\n 8. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråæ»\n\n 1. åæ­¢harbor\n 2. å é¤å®è£ç®å½åæ°æ®åºæä»¶\n 3. å°å¤ä»½ç®å½åå¤ä»½æ°æ®åºè¿ååå®è£ç®å½åæ°æ®åºç®å½\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboræ°æ®åºè¿ç§»ågolang-migrate\n\næ°æ®åºåçº§æ¯èªå¨å®æçï¼ç¨æ·æå¨æ§è¡åçº§éç½®æä»¶çå½ä»¤è¡å·¥å·åãæ­¤å·¥å·åä¸Harborä¸ååå¸ï¼è¢«åå«å¨goharbor/prepareéåä¸­ã\n\næ¯æ¬¡å¯å¨Harborå®ä¾æ¶ï¼å®çæ°æ®åºæ¨¡å¼é½æ¯èªå¨åçº§çï¼å¶åçä¸ºï¼Harborå¨æ¯æ¬¡å¯å¨æ¶é½ä¼è°ç¨ç¬¬ä¸æ¹åº âgolang-migrateâï¼å®ä¼æ£æµå½åæ°æ®åºæ¨¡å¼ççæ¬ï¼å¦æå®ä¾ççæ¬æ¯å½åæ°æ®åºççæ¬æ´é«ï¼åä¼èªå¨åçº§ã\n\n$ docker run -v /:/hostfs goharbor/prepare:v2.0.0 migrate -i ${harbor.ymlè·¯å¾}\n\n\n1\n",normalizedContent:"# harboråçº§æ°æ®åºè¿ç§»ååæ»\n\n\n# harborå®è£\n\n 1. ä¸è½½docker-compose\n 2. ä¸è½½ï¼è§£åharborç¦»çº¿å\n 3. ä¿®æ¹éç½®harbor.yml.tmpl>harbor.ymlåçæè¯ä¹¦ç­\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråçº§ï¼å¤§äºv1.10.xå°æ´æ°çæ¬ï¼\n\nharborä¸åé¶æ®µçåçº§æ¹å¼ä¸åï¼å­å¨å¼å®¹æ§é®é¢ï¼æäºçæ¬æ æ³ç´æ¥è·¨çæ¬åçº§ï¼éè¦å¤é¶æ®µåçº§æ¹å¼è¾¾å°æç»åçº§ç®ç èªharborv2èµ·ï¼è¿ç§»å·¥å·å¨é¨è½¬ç§»å°äº goharbor/prepare è¿ä¸ªéåä¸­\n\n 1. å°githubä¸è½½2.4.2çæ¬çç¦»çº¿åï¼åå«éågoharbor/prepareï¼\n 2. åå¤è¿ç§»å·¥å·éågoharbor/prepare\n 3. åæ­¢harbor\n 4. å¤ä»½æ°æ®åºåå®è£ç®å½\n 5. è§£åç¦»çº¿åå°å®è£ç®å½\n 6. ç§»å¨æ§çéç½®æä»¶å°æ°çå®è£ç®å½ä¸\n 7. æ°æ®è¿ç§»ï¼docker run -it --rm -v /:/hostfs goharbor/prepare:v2.4.2 migrate -i /opt/harbor/harbor.yml ï¼æ­¤æ´æ°åæ¬æ°æ®åºæ¨¡å¼ï¼schemaï¼åéç½®æä»¶æ°æ®ï¼\n 8. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboråæ»\n\n 1. åæ­¢harbor\n 2. å é¤å®è£ç®å½åæ°æ®åºæä»¶\n 3. å°å¤ä»½ç®å½åå¤ä»½æ°æ®åºè¿ååå®è£ç®å½åæ°æ®åºç®å½\n 4. å®è£å¹¶å¯å¨ï¼./install.sh\n\n\n# harboræ°æ®åºè¿ç§»ågolang-migrate\n\næ°æ®åºåçº§æ¯èªå¨å®æçï¼ç¨æ·æå¨æ§è¡åçº§éç½®æä»¶çå½ä»¤è¡å·¥å·åãæ­¤å·¥å·åä¸harborä¸ååå¸ï¼è¢«åå«å¨goharbor/prepareéåä¸­ã\n\næ¯æ¬¡å¯å¨harborå®ä¾æ¶ï¼å®çæ°æ®åºæ¨¡å¼é½æ¯èªå¨åçº§çï¼å¶åçä¸ºï¼harborå¨æ¯æ¬¡å¯å¨æ¶é½ä¼è°ç¨ç¬¬ä¸æ¹åº âgolang-migrateâï¼å®ä¼æ£æµå½åæ°æ®åºæ¨¡å¼ççæ¬ï¼å¦æå®ä¾ççæ¬æ¯å½åæ°æ®åºççæ¬æ´é«ï¼åä¼èªå¨åçº§ã\n\n$ docker run -v /:/hostfs goharbor/prepare:v2.0.0 migrate -i ${harbor.ymlè·¯å¾}\n\n\n1\n",charsets:{cjk:!0}},{title:"helm chart",frontmatter:{title:"helm chart",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/b685a0/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"helm chart"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html"},{property:"og:type",content:"article"},{property:"og:title",content:"helm chart"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"helm chart"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/14.helm%20chart.html",relativePath:"01.ææ¯æè°/03.kubernetes/14.helm chart.md",key:"v-6da5591e",path:"/pages/b685a0/",headersStr:null,content:"# helmå½ä»¤ï¼\n\nhelm create myservice helm install . helm install myservice --name myservice --namespace hfftest helm list helm package .\n\nhelm ls --all hfftest helm del --purge hfftest\n\n\n# examples/\n\nChart.yaml # Yamlæä»¶ï¼ç¨äºæè¿°Chartçåºæ¬ä¿¡æ¯ï¼åæ¬åç§°çæ¬ç­ LICENSE # [å¯é] åè®® README.md # [å¯é] å½åChartçä»ç» values.yaml # Chartçé»è®¤éç½®æä»¶ requirements.yaml # [å¯é] ç¨äºå­æ¾å½åChartä¾èµçå¶å®Chartçè¯´ææä»¶ charts/ # [å¯é]: è¯¥ç®å½ä¸­æ¾ç½®å½åChartä¾èµçå¶å®Chart templates/ # [å¯é]: é¨ç½²æä»¶æ¨¡çç®å½ï¼æ¨¡çä½¿ç¨çå¼æ¥èªvalues.yamlåç±Tilleræä¾çå¼ templates/NOTES.txt # [å¯é]: æ¾ç½®Chartçä½¿ç¨æå",normalizedContent:"# helmå½ä»¤ï¼\n\nhelm create myservice helm install . helm install myservice --name myservice --namespace hfftest helm list helm package .\n\nhelm ls --all hfftest helm del --purge hfftest\n\n\n# examples/\n\nchart.yaml # yamlæä»¶ï¼ç¨äºæè¿°chartçåºæ¬ä¿¡æ¯ï¼åæ¬åç§°çæ¬ç­ license # [å¯é] åè®® readme.md # [å¯é] å½åchartçä»ç» values.yaml # chartçé»è®¤éç½®æä»¶ requirements.yaml # [å¯é] ç¨äºå­æ¾å½åchartä¾èµçå¶å®chartçè¯´ææä»¶ charts/ # [å¯é]: è¯¥ç®å½ä¸­æ¾ç½®å½åchartä¾èµçå¶å®chart templates/ # [å¯é]: é¨ç½²æä»¶æ¨¡çç®å½ï¼æ¨¡çä½¿ç¨çå¼æ¥èªvalues.yamlåç±tilleræä¾çå¼ templates/notes.txt # [å¯é]: æ¾ç½®chartçä½¿ç¨æå",charsets:{cjk:!0}},{title:"Loongnix mips64",frontmatter:{title:"Loongnix mips64",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/1bc186/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"Loongnix mips64"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html"},{property:"og:type",content:"article"},{property:"og:title",content:"Loongnix mips64"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"Loongnix mips64"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/15.Loongnix%20mips64.html",relativePath:"01.ææ¯æè°/03.kubernetes/15.Loongnix mips64.md",key:"v-211c03e0",path:"/pages/1bc186/",headers:[{level:2,title:"yumæºä¿®æ¹ï¼",slug:"yumæºä¿®æ¹",normalizedTitle:"yumæºä¿®æ¹ï¼",charIndex:338},{level:2,title:"aptæºï¼",slug:"aptæº",normalizedTitle:"aptæºï¼",charIndex:834},{level:2,title:"Loongnix-20.mips64elç³»ç»æºå°å",slug:"loongnix-20-mips64elç³»ç»æºå°å",normalizedTitle:"loongnix-20.mips64elç³»ç»æºå°å",charIndex:1375},{level:2,title:"é¾è¯NPMæº",slug:"é¾è¯npmæº",normalizedTitle:"é¾è¯npmæº",charIndex:1720}],headersStr:"yumæºä¿®æ¹ï¼ aptæºï¼ Loongnix-20.mips64elç³»ç»æºå°å é¾è¯NPMæº",content:'[TOC]\n\n\n# é¾è¯mips64\n\n\n# ç¤¾åºééæåµï¼\n\né¾è¯å¹³å°å·²ééäºMIPSä¸çloongnix-Serverä»¥åDebian10å¯¹åºççæ¬ï¼nodejs-v12.16.3ï¼LoongArchä¸çLoongnix-20.loongarch64æ¡é¢ç³»ç»ä»¥åLoongnix-server-20.loongarch64æå¡å¨ç³»ç»å¯¹åºççæ¬: nodejs-v14.16.1ï¼å¹¶å°æç»­ç»´æ¤ï¼åäºä¸ºç¨æ·æä¾å¥½ç¨çå¼åç¯å¢ã\n\n * mips: loongnix-Server Debian10\n * LoongArch: Loongnix-20.loongarch64æ¡é¢ç³»ç» Loongnix-server-20.loongarch64æå¡å¨ç³»ç»\n\n\n# æºï¼\n\n\n# yumæºä¿®æ¹ï¼\n\nyum install epel-release -y\n\nvi  /etc/yum.repos.d/Loongnix-Base.repo\norg>cn\nsed -i \'s/org/cn/g\' /etc/yum.repos.d/Loongnix-Base.repo \nyum clean all \nyum makecache\n\nyum install epel-release -y && cp /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel-test.repo && sed -i s/ftp.loongnix.org/10.2.5.28/g /etc/yum.repos.d/epel-test.repo && yum makecache && yum install git which gcc g++ libatomic gpg tar openssl11 -y\n\nyum install epel-release -y && yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# aptæºï¼\n\necho "deb http://os.loongnix.org/mirrors/debian/debian/ buster main" >> /etc/apt/sources.list\n\necho "deb http://mirrors.163.com/debian/ buster main contrib non-free" > /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-updates main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-backports main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian-security buster/updates main contrib non-free" >> /etc/apt/sources.list\n\n\n1\n2\n3\n\n\n\n# Loongnix-20.mips64elç³»ç»æºå°å\n\ndeb [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ DaoXiangHu-testing main contrib non-free \ndeb-src [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ DaoXiangHu-testing main contrib non-free\nLoongnix-server-1.7.2007 æå¡å¨ç³»ç»æºå°å\nhttp://ftp.loongnix.org/os/loongnix-server/1.7/\n\n\n1\n2\n3\n4\n\n\n\n# é¾è¯NPMæº\n\næºå°å1ï¼http://npm.loongnix.cn:4873 æºå°å2ï¼http://registry.loongnix.cn:4873\n\n\n# harbor\n\nç¨æ·å: loongsoncloud å¯ç : loongson@SYS3\n\næ§è¡ä»¥ä¸å½ä»¤ç¼è¾/etc/docker/daemon.jsonï¼å¢å insecure-registriesçéç½®ï¼éæ°å è½½å¹¶éå¯dockerä½¿éç½®çæ\n\nmkdir -p /etc/docker/\ntee /etc/docker/daemon.json <<-âEOFâ\n{\nâinsecure-registriesâ:[âharbor.loongnix.cnâ]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl enable docker\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åèèµæ\n\nhttp://doc.loongnix.cn/web/#/50?page_id=146 é¾è¯Dockerå®è£æå http://ftp.loongnix.cn/ é¾è¯å¼æºç¤¾åºftpä¸è½½ç«ç¹ http://www.loongnix.cn/index.php/Container-Registry Loongarchæ¶æçè½¯ä»¶ä»åºç«ç¹ http://ask.loongnix.cn/?/search/q-bm9kZWpz#all',normalizedContent:'[toc]\n\n\n# é¾è¯mips64\n\n\n# ç¤¾åºééæåµï¼\n\né¾è¯å¹³å°å·²ééäºmipsä¸çloongnix-serverä»¥ådebian10å¯¹åºççæ¬ï¼nodejs-v12.16.3ï¼loongarchä¸çloongnix-20.loongarch64æ¡é¢ç³»ç»ä»¥åloongnix-server-20.loongarch64æå¡å¨ç³»ç»å¯¹åºççæ¬: nodejs-v14.16.1ï¼å¹¶å°æç»­ç»´æ¤ï¼åäºä¸ºç¨æ·æä¾å¥½ç¨çå¼åç¯å¢ã\n\n * mips: loongnix-server debian10\n * loongarch: loongnix-20.loongarch64æ¡é¢ç³»ç» loongnix-server-20.loongarch64æå¡å¨ç³»ç»\n\n\n# æºï¼\n\n\n# yumæºä¿®æ¹ï¼\n\nyum install epel-release -y\n\nvi  /etc/yum.repos.d/loongnix-base.repo\norg>cn\nsed -i \'s/org/cn/g\' /etc/yum.repos.d/loongnix-base.repo \nyum clean all \nyum makecache\n\nyum install epel-release -y && cp /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel-test.repo && sed -i s/ftp.loongnix.org/10.2.5.28/g /etc/yum.repos.d/epel-test.repo && yum makecache && yum install git which gcc g++ libatomic gpg tar openssl11 -y\n\nyum install epel-release -y && yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# aptæºï¼\n\necho "deb http://os.loongnix.org/mirrors/debian/debian/ buster main" >> /etc/apt/sources.list\n\necho "deb http://mirrors.163.com/debian/ buster main contrib non-free" > /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-updates main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian/ buster-backports main contrib non-free" >> /etc/apt/sources.list && echo "deb http://mirrors.163.com/debian-security buster/updates main contrib non-free" >> /etc/apt/sources.list\n\n\n1\n2\n3\n\n\n\n# loongnix-20.mips64elç³»ç»æºå°å\n\ndeb [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ daoxianghu-testing main contrib non-free \ndeb-src [trusted=yes] http://ftp.loongnix.org/os/loongnix/20/mips64el/ daoxianghu-testing main contrib non-free\nloongnix-server-1.7.2007 æå¡å¨ç³»ç»æºå°å\nhttp://ftp.loongnix.org/os/loongnix-server/1.7/\n\n\n1\n2\n3\n4\n\n\n\n# é¾è¯npmæº\n\næºå°å1ï¼http://npm.loongnix.cn:4873 æºå°å2ï¼http://registry.loongnix.cn:4873\n\n\n# harbor\n\nç¨æ·å: loongsoncloud å¯ç : loongson@sys3\n\næ§è¡ä»¥ä¸å½ä»¤ç¼è¾/etc/docker/daemon.jsonï¼å¢å insecure-registriesçéç½®ï¼éæ°å è½½å¹¶éå¯dockerä½¿éç½®çæ\n\nmkdir -p /etc/docker/\ntee /etc/docker/daemon.json <<-âeofâ\n{\nâinsecure-registriesâ:[âharbor.loongnix.cnâ]\n}\neof\nsudo systemctl daemon-reload\nsudo systemctl enable docker\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åèèµæ\n\nhttp://doc.loongnix.cn/web/#/50?page_id=146 é¾è¯dockerå®è£æå http://ftp.loongnix.cn/ é¾è¯å¼æºç¤¾åºftpä¸è½½ç«ç¹ http://www.loongnix.cn/index.php/container-registry loongarchæ¶æçè½¯ä»¶ä»åºç«ç¹ http://ask.loongnix.cn/?/search/q-bm9kzwpz#all',charsets:{cjk:!0}},{title:"nvidia-device-plugin",frontmatter:{title:"nvidia-device-plugin",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/717c4b/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"nvidia-device-plugin"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.nvidia-device-plugin.html"},{property:"og:type",content:"article"},{property:"og:title",content:"nvidia-device-plugin"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.nvidia-device-plugin.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"nvidia-device-plugin"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/16.nvidia-device-plugin.html",relativePath:"01.ææ¯æè°/03.kubernetes/16.nvidia-device-plugin.md",key:"v-3a9f53ca",path:"/pages/717c4b/",headers:[{level:2,title:"å®è£æ¹æ³",slug:"å®è£æ¹æ³",normalizedTitle:"å®è£æ¹æ³",charIndex:40},{level:2,title:"ä½¿ç¨æ¹æ³",slug:"ä½¿ç¨æ¹æ³",normalizedTitle:"ä½¿ç¨æ¹æ³",charIndex:3405},{level:3,title:"docker",slug:"docker",normalizedTitle:"docker",charIndex:1844},{level:3,title:"k8s",slug:"k8s",normalizedTitle:"k8s",charIndex:2}],headersStr:"å®è£æ¹æ³ ä½¿ç¨æ¹æ³ docker k8s",content:'# k8sè±ä¼è¾¾GPUæä»¶ï¼nvidia-device-pluginï¼\n\n\n# å®è£æ¹æ³\n\nhttps://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n\n 1. æ¬å°èç¹æ·»å  NVIDIA é©±å¨ç¨åº è¦æ±ï¼NVIDIA drivers ~= 384.81 åç¡®ä¿ä½ çä¸»æºä¸ç NVIDIA é©±å¨ç¨åºæ­£å¸¸å·¥ä½ï¼ä½ åºè¯¥è½å¤æåè¿è¡ nvidia-smi å¹¶æ¥çä½ ç GPU åç§°ãé©±å¨ç¨åºçæ¬å CUDA çæ¬\n\n$ nvidia-smi\nThu Jul 14 11:49:33 2022\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.57       Driver Version: 515.57       CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:02:00.0 Off |                  N/A |\n|  0%   48C    P8    11W / 200W |      0MiB /  8192MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\néè¦æ³¨æçæ¯ï¼ç¬¬ä¸æ¬¡å®è£æ¾å¡é©±å¨çè¯ï¼æ¯ä¸ç¨éå¯æå¡å¨ç\n\n 2. æ¬å°èç¹å®è£nvidia-dockerænvidia-container-toolkit\n\nnvidia-docker >= 2.0 || nvidia-container-toolkit >= 1.7.0\n\nè¿è¡NVIDIA Container Toolkitçæ¡ä»¶ï¼\n\n * åæ ¸çæ¬ > 3.10 ç GNU/Linux x86_64\n * Docker >= 19.03ï¼æ¨èï¼ä½æäºåè¡çå¯è½åå«æ§çæ¬ç Dockerãæ¯æçæä½çæ¬ä¸º 1.12ï¼\n * æ¶æ >= Keplerï¼æè®¡ç®è½å 3.0ï¼ç NVIDIA GPU\n * NVIDIA Linux é©±å¨ç¨åº>= 418.81.07ï¼è¯·æ³¨æï¼ä¸æ¯æè¾æ§çé©±å¨ç¨åºçæ¬æåæ¯ãï¼\n\nå¦ï¼centos, nvidia-container-toolkit\n\n$ curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.repo | sudo tee /etc/yum.repos.d/nvidia-docker.repo\n$ yum install -y nvidia-container-toolkit\n$ rpm -qa | grep nvidia\nlibnvidia-container-tools-1.10.0-1.x86_64\nlibnvidia-container1-1.10.0-1.x86_64\nnvidia-container-toolkit-1.10.0-1.x86_64\n\n\n1\n2\n3\n4\n5\n6\n\n 3. æ¯ä¸ªèç¹Dockerçé»è®¤è¿è¡æ¶è®¾ç½®ä¸º nvidia-container-runtime\n\n$ cat /etc/docker/daemon.json\n{\n    "default-runtime":"nvidia",\n    "runtimes": {\n        "nvidia": {\n            "path":"/usr/bin/nvidia-container-runtime",\n            "runtimeArgs": []\n        }\n    }\n}\n\n$ systemctl daemon-reload\n$ systemctl restart docker\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n 4. é¨ç½² NVIDIA è®¾å¤æä»¶: kubectl create -f nvidia-device-plugin.yml\n\n#1.0.0-beta4\n$ docker pull nvidia/k8s-device-plugin:1.0.0-beta4\n$ kubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/1.0.0-beta4/nvidia-device-plugin.yml\n# æ1.12\n$ docker pull nvidia/k8s-device-plugin:1.11\n$ kubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.12/nvidia-device-plugin.yml\n\n\n1\n2\n3\n4\n5\n6\n\n 5. æ£æ¥ï¼ Kuberneteså°æ´é² amd.com/gpuænvidia.com/gpuä¸ºå¯è°åº¦çèµæº\n\n$ kubectl describe node | grep nvidia.com/gpu\n\n\n1\n\n\n\n# ä½¿ç¨æ¹æ³\n\n\n# docker\n\n$ docker run --name hfftest --rm -it --gpus all nvidia/cuda:10.0-base nvidia-smi\nThu Jul 14 04:54:04 2022\n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 515.57       Driver Version: 515.57       CUDA Version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|                               |                      |               MIG M. |\n|===============================+======================+======================|\n|   0  NVIDIA GeForce ...  Off  | 00000000:02:00.0 Off |                  N/A |\n| 21%   49C    P8    16W / 200W |      0MiB /  8192MiB |      0%      Default |\n|                               |                      |                  N/A |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| Processes:                                                                  |\n|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |\n|        ID   ID                                                   Usage      |\n|=============================================================================|\n|  No running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n\n# k8s\n\napiVersion: v1\nkind: Pod\nmetadata:\n  name: test-gpu\nspec:\n  restartPolicy: OnFailure\n  containers:\n    - name: test-gpu\n      image: "k8s.gcr.io/cuda-vector-add:v0.1"\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¸äºéå¶çï¼\n\n * GPUs åªè½è®¾ç½®å¨ limits é¨åï¼è¿æå³çï¼\n\n> ä½ å¯ä»¥æå® GPU ç limits èä¸æå®å¶ requestsï¼Kubernetes å°ä½¿ç¨éå¶ å¼ä½ä¸ºé»è®¤çè¯·æ±å¼ï¼ ä½ å¯ä»¥åæ¶æå® limits å requestsï¼ä¸è¿è¿ä¸¤ä¸ªå¼å¿é¡»ç¸ç­ã ä½ ä¸å¯ä»¥ä»æå® requests èä¸æå® limitsã\n\n * å®¹å¨ï¼ä»¥å Podï¼ä¹é´æ¯ä¸å±äº« GPU çãGPU ä¹ä¸å¯ä»¥è¿éåéï¼Overcommittingï¼ã\n * æ¯ä¸ªå®¹å¨å¯ä»¥è¯·æ±ä¸ä¸ªæèå¤ä¸ª GPUï¼ä½æ¯ç¨å°æ°å¼æ¥è¯·æ±é¨å GPU æ¯ä¸åè®¸çã\n\n\n# åè\n\n * https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n * https://kubernetes.io/zh-cn/docs/tasks/manage-gpus/scheduling-gpus/#deploying-nvidia-gpu-device-plugin\n * https://github.com/NVIDIA/k8s-device-plugin\n\n\n# å¨k8sä¸­å®ç°å±äº«GPUè°åº¦(GPUshare)\n\né¿éäºæå¡å¢éè´¡ç®ç GPU å±äº«çè°åº¦æ¹æ¡ï¼å¶ç®çå¨äºè§£å³ç¨æ·å±äº« GPU è°åº¦çéæ±Kubernetes GPUå±äº«å®è·µ gpushare-scheduler-extender gpushare-device-plugin',normalizedContent:'# k8sè±ä¼è¾¾gpuæä»¶ï¼nvidia-device-pluginï¼\n\n\n# å®è£æ¹æ³\n\nhttps://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n\n 1. æ¬å°èç¹æ·»å  nvidia é©±å¨ç¨åº è¦æ±ï¼nvidia drivers ~= 384.81 åç¡®ä¿ä½ çä¸»æºä¸ç nvidia é©±å¨ç¨åºæ­£å¸¸å·¥ä½ï¼ä½ åºè¯¥è½å¤æåè¿è¡ nvidia-smi å¹¶æ¥çä½ ç gpu åç§°ãé©±å¨ç¨åºçæ¬å cuda çæ¬\n\n$ nvidia-smi\nthu jul 14 11:49:33 2022\n+-----------------------------------------------------------------------------+\n| nvidia-smi 515.57       driver version: 515.57       cuda version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n| fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n|                               |                      |               mig m. |\n|===============================+======================+======================|\n|   0  nvidia geforce ...  off  | 00000000:02:00.0 off |                  n/a |\n|  0%   48c    p8    11w / 200w |      0mib /  8192mib |      0%      default |\n|                               |                      |                  n/a |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| processes:                                                                  |\n|  gpu   gi   ci        pid   type   process name                  gpu memory |\n|        id   id                                                   usage      |\n|=============================================================================|\n|  no running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\néè¦æ³¨æçæ¯ï¼ç¬¬ä¸æ¬¡å®è£æ¾å¡é©±å¨çè¯ï¼æ¯ä¸ç¨éå¯æå¡å¨ç\n\n 2. æ¬å°èç¹å®è£nvidia-dockerænvidia-container-toolkit\n\nnvidia-docker >= 2.0 || nvidia-container-toolkit >= 1.7.0\n\nè¿è¡nvidia container toolkitçæ¡ä»¶ï¼\n\n * åæ ¸çæ¬ > 3.10 ç gnu/linux x86_64\n * docker >= 19.03ï¼æ¨èï¼ä½æäºåè¡çå¯è½åå«æ§çæ¬ç dockerãæ¯æçæä½çæ¬ä¸º 1.12ï¼\n * æ¶æ >= keplerï¼æè®¡ç®è½å 3.0ï¼ç nvidia gpu\n * nvidia linux é©±å¨ç¨åº>= 418.81.07ï¼è¯·æ³¨æï¼ä¸æ¯æè¾æ§çé©±å¨ç¨åºçæ¬æåæ¯ãï¼\n\nå¦ï¼centos, nvidia-container-toolkit\n\n$ curl -s -l https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.repo | sudo tee /etc/yum.repos.d/nvidia-docker.repo\n$ yum install -y nvidia-container-toolkit\n$ rpm -qa | grep nvidia\nlibnvidia-container-tools-1.10.0-1.x86_64\nlibnvidia-container1-1.10.0-1.x86_64\nnvidia-container-toolkit-1.10.0-1.x86_64\n\n\n1\n2\n3\n4\n5\n6\n\n 3. æ¯ä¸ªèç¹dockerçé»è®¤è¿è¡æ¶è®¾ç½®ä¸º nvidia-container-runtime\n\n$ cat /etc/docker/daemon.json\n{\n    "default-runtime":"nvidia",\n    "runtimes": {\n        "nvidia": {\n            "path":"/usr/bin/nvidia-container-runtime",\n            "runtimeargs": []\n        }\n    }\n}\n\n$ systemctl daemon-reload\n$ systemctl restart docker\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n 4. é¨ç½² nvidia è®¾å¤æä»¶: kubectl create -f nvidia-device-plugin.yml\n\n#1.0.0-beta4\n$ docker pull nvidia/k8s-device-plugin:1.0.0-beta4\n$ kubectl create -f https://raw.githubusercontent.com/nvidia/k8s-device-plugin/1.0.0-beta4/nvidia-device-plugin.yml\n# æ1.12\n$ docker pull nvidia/k8s-device-plugin:1.11\n$ kubectl create -f https://raw.githubusercontent.com/nvidia/k8s-device-plugin/v1.12/nvidia-device-plugin.yml\n\n\n1\n2\n3\n4\n5\n6\n\n 5. æ£æ¥ï¼ kuberneteså°æ´é² amd.com/gpuænvidia.com/gpuä¸ºå¯è°åº¦çèµæº\n\n$ kubectl describe node | grep nvidia.com/gpu\n\n\n1\n\n\n\n# ä½¿ç¨æ¹æ³\n\n\n# docker\n\n$ docker run --name hfftest --rm -it --gpus all nvidia/cuda:10.0-base nvidia-smi\nthu jul 14 04:54:04 2022\n+-----------------------------------------------------------------------------+\n| nvidia-smi 515.57       driver version: 515.57       cuda version: 11.7     |\n|-------------------------------+----------------------+----------------------+\n| gpu  name        persistence-m| bus-id        disp.a | volatile uncorr. ecc |\n| fan  temp  perf  pwr:usage/cap|         memory-usage | gpu-util  compute m. |\n|                               |                      |               mig m. |\n|===============================+======================+======================|\n|   0  nvidia geforce ...  off  | 00000000:02:00.0 off |                  n/a |\n| 21%   49c    p8    16w / 200w |      0mib /  8192mib |      0%      default |\n|                               |                      |                  n/a |\n+-------------------------------+----------------------+----------------------+\n\n+-----------------------------------------------------------------------------+\n| processes:                                                                  |\n|  gpu   gi   ci        pid   type   process name                  gpu memory |\n|        id   id                                                   usage      |\n|=============================================================================|\n|  no running processes found                                                 |\n+-----------------------------------------------------------------------------+\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n\n# k8s\n\napiversion: v1\nkind: pod\nmetadata:\n  name: test-gpu\nspec:\n  restartpolicy: onfailure\n  containers:\n    - name: test-gpu\n      image: "k8s.gcr.io/cuda-vector-add:v0.1"\n      resources:\n        limits:\n          nvidia.com/gpu: 1\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\nä¸äºéå¶çï¼\n\n * gpus åªè½è®¾ç½®å¨ limits é¨åï¼è¿æå³çï¼\n\n> ä½ å¯ä»¥æå® gpu ç limits èä¸æå®å¶ requestsï¼kubernetes å°ä½¿ç¨éå¶ å¼ä½ä¸ºé»è®¤çè¯·æ±å¼ï¼ ä½ å¯ä»¥åæ¶æå® limits å requestsï¼ä¸è¿è¿ä¸¤ä¸ªå¼å¿é¡»ç¸ç­ã ä½ ä¸å¯ä»¥ä»æå® requests èä¸æå® limitsã\n\n * å®¹å¨ï¼ä»¥å podï¼ä¹é´æ¯ä¸å±äº« gpu çãgpu ä¹ä¸å¯ä»¥è¿éåéï¼overcommittingï¼ã\n * æ¯ä¸ªå®¹å¨å¯ä»¥è¯·æ±ä¸ä¸ªæèå¤ä¸ª gpuï¼ä½æ¯ç¨å°æ°å¼æ¥è¯·æ±é¨å gpu æ¯ä¸åè®¸çã\n\n\n# åè\n\n * https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html\n * https://kubernetes.io/zh-cn/docs/tasks/manage-gpus/scheduling-gpus/#deploying-nvidia-gpu-device-plugin\n * https://github.com/nvidia/k8s-device-plugin\n\n\n# å¨k8sä¸­å®ç°å±äº«gpuè°åº¦(gpushare)\n\né¿éäºæå¡å¢éè´¡ç®ç gpu å±äº«çè°åº¦æ¹æ¡ï¼å¶ç®çå¨äºè§£å³ç¨æ·å±äº« gpu è°åº¦çéæ±kubernetes gpuå±äº«å®è·µ gpushare-scheduler-extender gpushare-device-plugin',charsets:{cjk:!0}},{title:"openebs-lvm-localpv",frontmatter:{title:"openebs-lvm-localpv",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/4be786/",categories:["ææ¯æè°","kubernetes"],tags:[null],titleTag:"åå",readingShow:"top",description:"https://github.com/openebs/lvm-localpv",meta:[{name:"twitter:title",content:"openebs-lvm-localpv"},{name:"twitter:description",content:"https://github.com/openebs/lvm-localpv"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.openebs-lvm-localpv.html"},{property:"og:type",content:"article"},{property:"og:title",content:"openebs-lvm-localpv"},{property:"og:description",content:"https://github.com/openebs/lvm-localpv"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.openebs-lvm-localpv.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"openebs-lvm-localpv"},{itemprop:"description",content:"https://github.com/openebs/lvm-localpv"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/17.openebs-lvm-localpv.html",relativePath:"01.ææ¯æè°/03.kubernetes/17.openebs-lvm-localpv.md",key:"v-6e77716d",path:"/pages/4be786/",headers:[{level:2,title:"åå»ºpv",slug:"åå»ºpv",normalizedTitle:"åå»ºpv",charIndex:50},{level:2,title:"åå»ºvg",slug:"åå»ºvg",normalizedTitle:"åå»ºvg",charIndex:141}],headersStr:"åå»ºpv åå»ºvg",content:'https://github.com/openebs/lvm-localpv\n\n\n# pv\n\n\n# åå»ºpv\n\npvname=${disk}1\n\nsgdisk -n 1:2048 ${disk} pvcreate ${pvname} pvdisplay ${pvname}\n\n\n# åå»ºvg\n\nvgcreate ${vgname} ${pvname} vgextend ${vgname} ${pvname} pvdisplay ${pvname} | grep ${vgname}\n\n\n# deploy\n\n$ kubectl apply -f https://openebs.github.io/charts/lvm-operator.yaml\n\n\n# åºç¨\n\napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: openebs-lvmpv\nallowVolumeExpansion: true\nparameters:\n  storage: "lvm"\n  volgroup: "lvmvg"\nprovisioner: local.csi.openebs.io\nallowedTopologies:\n- matchLabelExpressions:\n  - key: kubernetes.io/hostname\n    values:\n      - lvmpv-node1\n      - lvmpv-node2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nvolgroupï¼éæ©vg allowedTopologies: éæ©èç¹\n\n\n# diskåæ¶\n\npvname=${disk}1\n\nvgremove ${vgname} æ vgreduce ${vgname} ${pvname}\n\npvremove ${pvname}\n\npvdisplay ${pvname}\n\nsgdisk --zap-all --clear --mbrtogpt ${disk}',normalizedContent:'https://github.com/openebs/lvm-localpv\n\n\n# pv\n\n\n# åå»ºpv\n\npvname=${disk}1\n\nsgdisk -n 1:2048 ${disk} pvcreate ${pvname} pvdisplay ${pvname}\n\n\n# åå»ºvg\n\nvgcreate ${vgname} ${pvname} vgextend ${vgname} ${pvname} pvdisplay ${pvname} | grep ${vgname}\n\n\n# deploy\n\n$ kubectl apply -f https://openebs.github.io/charts/lvm-operator.yaml\n\n\n# åºç¨\n\napiversion: storage.k8s.io/v1\nkind: storageclass\nmetadata:\n  name: openebs-lvmpv\nallowvolumeexpansion: true\nparameters:\n  storage: "lvm"\n  volgroup: "lvmvg"\nprovisioner: local.csi.openebs.io\nallowedtopologies:\n- matchlabelexpressions:\n  - key: kubernetes.io/hostname\n    values:\n      - lvmpv-node1\n      - lvmpv-node2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\nvolgroupï¼éæ©vg allowedtopologies: éæ©èç¹\n\n\n# diskåæ¶\n\npvname=${disk}1\n\nvgremove ${vgname} æ vgreduce ${vgname} ${pvname}\n\npvremove ${pvname}\n\npvdisplay ${pvname}\n\nsgdisk --zap-all --clear --mbrtogpt ${disk}',charsets:{cjk:!0}},{title:"dockeråºç¡",frontmatter:{title:"dockeråºç¡",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/f23c30/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"dockeråºç¡"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/00.docker%E5%9F%BA%E7%A1%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeråºç¡"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/00.docker%E5%9F%BA%E7%A1%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeråºç¡"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/00.docker%E5%9F%BA%E7%A1%80.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/00.dockeråºç¡.md",key:"v-77ff5797",path:"/pages/f23c30/",headersStr:null,content:'# èæ¬éå\n\néååè¡¨ä¸­ï¼å¯è½ä¼çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º\n\n<none>               <none>              00285df0df87        5 days ago          342 MB\n\n\n1\n\n\nåå æå¯è½æ¯å®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼åéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº docker pull å¯è½å¯¼è´è¿ç§æåµï¼docker build ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n<none>              <none>              00285df0df87        5 days ago          342 MB\n\n\n1\n2\n3\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n1\n\n\n??å®æµæ æ³å¨é¨å å®\n\n\n# ä¸­é´å±éå\n\né»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\n1\n\n\n\n# ä¸äºå½ä»¤æå·§\n\n * åªè¾åºéåIDåä»åºåï¼\n\n$ docker image ls --format "{{.ID}}:{{.Repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\n329ed837d508: ubuntu\n329ed837d508: ubuntu\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * åªè¾åºidå\n\ndocker image ls -q\n\n\n1\n\n * å é¤ææä»åºåä¸º redis çéå\n\n$ docker image rm $(docker image ls -q redis)\n\n\n1\n\n\n\n# éå¯dockerä¸å½±åpod\n\n/etc/docker/daemon.jsonéç½®æä»¶ä¸­è®¾ç½® { "live-restore": true }',normalizedContent:'# èæ¬éå\n\néååè¡¨ä¸­ï¼å¯è½ä¼çå°ä¸ä¸ªç¹æ®çéåï¼è¿ä¸ªéåæ¢æ²¡æä»åºåï¼ä¹æ²¡ææ ç­¾ï¼åä¸º\n\n<none>               <none>              00285df0df87        5 days ago          342 mb\n\n\n1\n\n\nåå æå¯è½æ¯å®æ¹éåç»´æ¤ï¼åå¸äºæ°çæ¬åï¼åéååè¢«è½¬ç§»å°äºæ°ä¸è½½çéåèº«ä¸ï¼èæ§çéåä¸çè¿ä¸ªåç§°åè¢«åæ¶ï¼ä»èæä¸ºäº ãé¤äº docker pull å¯è½å¯¼è´è¿ç§æåµï¼docker build ä¹åæ ·å¯ä»¥å¯¼è´è¿ç§ç°è±¡ãç±äºæ°æ§éåååï¼æ§éååç§°è¢«åæ¶ï¼ä»èåºç°ä»åºåãæ ç­¾åä¸º çéåãè¿ç±»æ æ ç­¾éåä¹è¢«ç§°ä¸º èæ¬éå(dangling image) ï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤ä¸é¨æ¾ç¤ºè¿ç±»éåï¼\n\ndocker image ls -f dangling=true\nrepository          tag                 image id            created             size\n<none>              <none>              00285df0df87        5 days ago          342 mb\n\n\n1\n2\n3\n\n\nä¸è¬æ¥è¯´ï¼èæ¬éåå·²ç»å¤±å»äºå­å¨çä»·å¼ï¼æ¯å¯ä»¥éæå é¤çï¼å¯ä»¥ç¨ä¸é¢çå½ä»¤å é¤ã\n\ndocker image prune\n\n\n1\n\n\n??å®æµæ æ³å¨é¨å å®\n\n\n# ä¸­é´å±éå\n\né»è®¤ç docker image ls åè¡¨ä¸­åªä¼æ¾ç¤ºé¡¶å±éåï¼å¦æå¸ææ¾ç¤ºåæ¬ä¸­é´å±éåå¨åçææéåçè¯ï¼éè¦å  -a åæ°ã\n\ndocker image ls -a\n\n\n1\n\n\n\n# ä¸äºå½ä»¤æå·§\n\n * åªè¾åºéåidåä»åºåï¼\n\n$ docker image ls --format "{{.id}}:{{.repository}}"\n5f515359c7f8: redis\n05a60462f8ba: nginx\nfe9198c04d62: mongo\n00285df0df87: <none>\n329ed837d508: ubuntu\n329ed837d508: ubuntu\n\n\n1\n2\n3\n4\n5\n6\n7\n\n * åªè¾åºidå\n\ndocker image ls -q\n\n\n1\n\n * å é¤ææä»åºåä¸º redis çéå\n\n$ docker image rm $(docker image ls -q redis)\n\n\n1\n\n\n\n# éå¯dockerä¸å½±åpod\n\n/etc/docker/daemon.jsonéç½®æä»¶ä¸­è®¾ç½® { "live-restore": true }',charsets:{cjk:!0}},{title:"buildxå¤å¹³å°æå»º",frontmatter:{title:"buildxå¤å¹³å°æå»º",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/f7bcff/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ",meta:[{name:"twitter:title",content:"buildxå¤å¹³å°æå»º"},{name:"twitter:description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"buildxå¤å¹³å°æå»º"},{property:"og:description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"buildxå¤å¹³å°æå»º"},{itemprop:"description",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/01.buildx%E5%A4%9A%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/01.buildxå¤å¹³å°æå»º.md",key:"v-256d06ea",path:"/pages/f7bcff/",headers:[{level:2,title:"ç¯å¢è¦æ±",slug:"ç¯å¢è¦æ±",normalizedTitle:"ç¯å¢è¦æ±",charIndex:286},{level:2,title:"æå»ºéå",slug:"æå»ºéå",normalizedTitle:"æå»ºéå",charIndex:827}],headersStr:"ç¯å¢è¦æ± æå»ºéå",content:"Dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ\n\n\n# è·¨ CPU æ¶æç¼è¯ç¨åºçæ¹æ³\n\n 1. ç´æ¥å¨ç®æ ç¡¬ä»¶ä¸ç¼è¯ï¼å¸¸ç¨ï¼\n 2. æ¨¡æç®æ ç¡¬ä»¶\n 3. éè¿ binfmt_misc æ¨¡æç®æ ç¡¬ä»¶çç¨æ·ç©ºé´\n 4. ä½¿ç¨äº¤åç¼è¯å¨\n\n\n# buildx\n\nDocker 19.03 å¼å¥çæä»¶ buildx buildx ä¼éè¿ QEMU å binfmt_misc åå«ä¸ºä¸åç CPU æ¶æï¼armï¼arm64 å amd64ç­ï¼æå»ºä¸åçéåãæå»ºå®æåï¼å°±ä¼åå»ºä¸ä¸ª manifest listï¼å¶ä¸­åå«äºæåè¿äºéåçæéã\n\n\n# ç¯å¢è¦æ±\n\n * è¦ç¡®ä¿ Docker çæ¬ä¸ä½äº 19.03ï¼åæ¶è¿è¦éè¿è®¾ç½®ç¯å¢åé DOCKER_CLI_EXPERIMENTAL æ¥å¯ç¨\n\n * å¦æä½ ä½¿ç¨çæ¯ Linuxï¼éè¦æå¨å¯ç¨ binfmt_misc å¤§å¤æ° Linux åè¡çé½å¾å®¹æå¯ç¨ï¼ä¸è¿è¿æä¸ä¸ªæ´å®¹æçåæ³ï¼ç´æ¥è¿è¡ä¸ä¸ªç¹æå®¹å¨ï¼å®¹å¨éé¢åå¥½äºè®¾ç½®èæ¬ï¼ ð³ â docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d å»ºè®®å° Linux åæ ¸çæ¬åçº§å° 4.x ä»¥ä¸ï¼ç¹å«æ¯ CentOS ç¨æ·ï¼ä½ å¯è½ä¼éå°éè¯¯ã cat /proc/sys/fs/binfmt_misc/qemu-aarch64\n\n * Docker é»è®¤ä¼ä½¿ç¨ä¸æ¯æå¤ CPU æ¶æçæå»ºå¨ï¼æä»¬éè¦æå¨åæ¢ã ååå»ºä¸ä¸ªæ°çæå»ºå¨ï¼docker buildx create --use --name mybuilder å¯å¨æå»ºå¨ï¼ docker buildx inspect mybuilder --bootstrap æ¥çå½åä½¿ç¨çæå»ºå¨åæå»ºå¨æ¯æç CPU æ¶æï¼docker buildx ls\n\n\n# æå»ºéå\n\ndocker buildx build -t yangchuansheng/hello-arch --platform=linux/arm,linux/arm64,linux/amd64 . --push\n\nå¦ææ³å°æå»ºå¥½çéåä¿å­å¨æ¬å°ï¼å¯ä»¥å° type æå®ä¸º dockerï¼ä½å¿é¡»åå«ä¸ºä¸åç CPU æ¶ææå»ºä¸åçéåï¼ä¸è½åå¹¶æä¸ä¸ªéå ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm64 -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/amd64 -o type=docker .",normalizedContent:"dockerçå¤æ¶ææ¯ææ¯åºäºä¸åcpuçæ¶æèä¸æ¯ä¸åæä½ç³»ç»çæ¶æ\n\n\n# è·¨ cpu æ¶æç¼è¯ç¨åºçæ¹æ³\n\n 1. ç´æ¥å¨ç®æ ç¡¬ä»¶ä¸ç¼è¯ï¼å¸¸ç¨ï¼\n 2. æ¨¡æç®æ ç¡¬ä»¶\n 3. éè¿ binfmt_misc æ¨¡æç®æ ç¡¬ä»¶çç¨æ·ç©ºé´\n 4. ä½¿ç¨äº¤åç¼è¯å¨\n\n\n# buildx\n\ndocker 19.03 å¼å¥çæä»¶ buildx buildx ä¼éè¿ qemu å binfmt_misc åå«ä¸ºä¸åç cpu æ¶æï¼armï¼arm64 å amd64ç­ï¼æå»ºä¸åçéåãæå»ºå®æåï¼å°±ä¼åå»ºä¸ä¸ª manifest listï¼å¶ä¸­åå«äºæåè¿äºéåçæéã\n\n\n# ç¯å¢è¦æ±\n\n * è¦ç¡®ä¿ docker çæ¬ä¸ä½äº 19.03ï¼åæ¶è¿è¦éè¿è®¾ç½®ç¯å¢åé docker_cli_experimental æ¥å¯ç¨\n\n * å¦æä½ ä½¿ç¨çæ¯ linuxï¼éè¦æå¨å¯ç¨ binfmt_misc å¤§å¤æ° linux åè¡çé½å¾å®¹æå¯ç¨ï¼ä¸è¿è¿æä¸ä¸ªæ´å®¹æçåæ³ï¼ç´æ¥è¿è¡ä¸ä¸ªç¹æå®¹å¨ï¼å®¹å¨éé¢åå¥½äºè®¾ç½®èæ¬ï¼ ð³ â docker run --rm --privileged docker/binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d å»ºè®®å° linux åæ ¸çæ¬åçº§å° 4.x ä»¥ä¸ï¼ç¹å«æ¯ centos ç¨æ·ï¼ä½ å¯è½ä¼éå°éè¯¯ã cat /proc/sys/fs/binfmt_misc/qemu-aarch64\n\n * docker é»è®¤ä¼ä½¿ç¨ä¸æ¯æå¤ cpu æ¶æçæå»ºå¨ï¼æä»¬éè¦æå¨åæ¢ã ååå»ºä¸ä¸ªæ°çæå»ºå¨ï¼docker buildx create --use --name mybuilder å¯å¨æå»ºå¨ï¼ docker buildx inspect mybuilder --bootstrap æ¥çå½åä½¿ç¨çæå»ºå¨åæå»ºå¨æ¯æç cpu æ¶æï¼docker buildx ls\n\n\n# æå»ºéå\n\ndocker buildx build -t yangchuansheng/hello-arch --platform=linux/arm,linux/arm64,linux/amd64 . --push\n\nå¦ææ³å°æå»ºå¥½çéåä¿å­å¨æ¬å°ï¼å¯ä»¥å° type æå®ä¸º dockerï¼ä½å¿é¡»åå«ä¸ºä¸åç cpu æ¶ææå»ºä¸åçéåï¼ä¸è½åå¹¶æä¸ä¸ªéå ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/arm64 -o type=docker . ð³ â docker buildx build -t yangchuansheng/hello-arch --platform=linux/amd64 -o type=docker .",charsets:{cjk:!0}},{title:"dockerfileæ¹æº",frontmatter:{title:"dockerfileæ¹æº",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/4b6bd5/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"dockerfileæ¹æº"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/02.dockerfile%E6%94%B9%E6%BA%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockerfileæ¹æº"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/02.dockerfile%E6%94%B9%E6%BA%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockerfileæ¹æº"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/02.dockerfile%E6%94%B9%E6%BA%90.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/02.dockerfileæ¹æº.md",key:"v-395859ae",path:"/pages/4b6bd5/",headersStr:null,content:'# apkæº\n\nFROM alpine:3.14\n\nRUN sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories\n\nRUN apk update\n\n\n1\n2\n3\n4\n5\n\n\nFROM golang:${GO_VER}-alpine${ALPINE_VER} as golang\nRUN sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories    #æ°å ç\nRUN apk add --no-cache \\\n\tbash \\\n\tgcc \\\n\tgit \\\n\tmake \\\n\tmusl-dev\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# aptæº\n\nFROM debian\n\nRUN mv /etc/apt/sources.list /etc/apt/sources.list.bak && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    apt-get update && \\\n    apt-get install procps -y --allow-unauthenticated && \\\n    apt-get install telnetd -y --allow-unauthenticated && \\\n    apt-get install telnet -y --allow-unauthenticated && \\\n    apt-get install wget -y --allow-unauthenticated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',normalizedContent:'# apkæº\n\nfrom alpine:3.14\n\nrun sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories\n\nrun apk update\n\n\n1\n2\n3\n4\n5\n\n\nfrom golang:${go_ver}-alpine${alpine_ver} as golang\nrun sed -i \'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g\' /etc/apk/repositories    #æ°å ç\nrun apk add --no-cache \\\n\tbash \\\n\tgcc \\\n\tgit \\\n\tmake \\\n\tmusl-dev\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# aptæº\n\nfrom debian\n\nrun mv /etc/apt/sources.list /etc/apt/sources.list.bak && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.cloud.aliyuncs.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list  && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-proposed-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    echo "deb-src http://mirrors.aliyun.com/debian stable-updates main contrib non-free" >>/etc/apt/sources.list && \\\n    apt-get update && \\\n    apt-get install procps -y --allow-unauthenticated && \\\n    apt-get install telnetd -y --allow-unauthenticated && \\\n    apt-get install telnet -y --allow-unauthenticated && \\\n    apt-get install wget -y --allow-unauthenticated\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n',charsets:{cjk:!0}},{title:"dockeréå",frontmatter:{title:"dockeréå",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/74eaf6/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"dockeréå"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/03.docker%E9%95%9C%E5%83%8F.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeréå"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/03.docker%E9%95%9C%E5%83%8F.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeréå"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/03.docker%E9%95%9C%E5%83%8F.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/03.dockeréå.md",key:"v-226c4c47",path:"/pages/74eaf6/",headersStr:null,content:"# sysbench\n\nctr -n k8s.io run -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/dotnetdr/sysbench:0.5 hfftest sh\n\n\n# fio\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\n\n# iperf3\n\nctr -n k8s.io run -t --rm sirot/netperf-latest netperf sh",normalizedContent:"# sysbench\n\nctr -n k8s.io run -t --rm docker.io/ljishen/sysbench:latest sysbench cpu run\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/dotnetdr/sysbench:0.5 hfftest sh\n\n\n# fio\n\nctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\n\n# iperf3\n\nctr -n k8s.io run -t --rm sirot/netperf-latest netperf sh",charsets:{}},{title:"dockeréåä¼å",frontmatter:{title:"dockeréåä¼å",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/be8ffb/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",meta:[{name:"twitter:title",content:"dockeréåä¼å"},{name:"twitter:description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"dockeréåä¼å"},{property:"og:description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"dockeréåä¼å"},{itemprop:"description",content:"1ã  apk âno-cache\n2ã  rm ârf /var/lib/apk/*\n3ã  pip install âno-cache-dir\n4ã  run rm ârf find / -name â*.pycâ\n5ã  ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile\n6ã  éålayerä¸å¾è¶è¿6å±\n7ã  &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª\n8ã  åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/04.docker%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/04.dockeréåä¼å.md",key:"v-2ce4f6b6",path:"/pages/be8ffb/",headersStr:null,content:"1ã apk âno-cache 2ã rm ârf /var/lib/apk/* 3ã pip install âno-cache-dir 4ã run rm ârf find / -name â*.pycâ 5ã ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile 6ã éålayerä¸å¾è¶è¿6å± 7ã &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª 8ã åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",normalizedContent:"1ã apk âno-cache 2ã rm ârf /var/lib/apk/* 3ã pip install âno-cache-dir 4ã run rm ârf find / -name â*.pycâ 5ã ç¦æ­¢ä½¿ç¨docker commitï¼ä½¿ç¨dockerfile 6ã éålayerä¸å¾è¶è¿6å± 7ã &&\\ å¯ä»¥ærunãcopyç­åæä¸ä¸ª 8ã åºç¡éåå¯ä»¥å¤çæscratch,ä½¿ç¨2ä¸ªé¶æ®µæå»ºéå",charsets:{cjk:!0}},{title:"å¨Dockerä¸­è®¾ç½®æ¶åº",frontmatter:{title:"å¨Dockerä¸­è®¾ç½®æ¶åº",date:"2022-07-27T14:56:55.000Z",permalink:"/pages/e29999/",categories:["ææ¯æè°","kubernetes","docker"],tags:[null],titleTag:"åå",readingShow:"top",description:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch",meta:[{name:"twitter:title",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{name:"twitter:description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{property:"og:description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:55.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¨Dockerä¸­è®¾ç½®æ¶åº"},{itemprop:"description",content:"ç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\nFROM debian:stretch"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/300.docker/05.%E5%9C%A8Docker%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA.html",relativePath:"01.ææ¯æè°/03.kubernetes/300.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.md",key:"v-67301908",path:"/pages/e29999/",headersStr:null,content:'# åºäº Debian éå\n\nç±äº Debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åéTZå³å¯ã\n\nFROM debian:stretch\n\nENV TZ=Asia/Shanghai\n\n\n1\n2\n3\n\n\n\n# åºäº Alpine éå\n\nFROM alpine:3.9\n\nENV TZ=Asia/Shanghai\n\nRUN apk update \\\n    && apk add tzdata \\\n    && echo "${TZ}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    && rm /var/cache/apk/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åºäº Ubuntu éå\n\nFROM ubuntu:bionic\n\nENV TZ=Asia/Shanghai\n\nRUN echo "${TZ}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${TZ} /etc/localtime \\\n    && apt update \\\n    && apt install -y tzdata \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n',normalizedContent:'# åºäº debian éå\n\nç±äº debian éåä¸­å·²ç»åå«äºtzdataï¼å æ­¤è®¾ç½®æ¶åºçæ¹æ³æ¯è¾ç®åï¼åªéæ·»å ç¯å¢åétzå³å¯ã\n\nfrom debian:stretch\n\nenv tz=asia/shanghai\n\n\n1\n2\n3\n\n\n\n# åºäº alpine éå\n\nfrom alpine:3.9\n\nenv tz=asia/shanghai\n\nrun apk update \\\n    && apk add tzdata \\\n    && echo "${tz}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${tz} /etc/localtime \\\n    && rm /var/cache/apk/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# åºäº ubuntu éå\n\nfrom ubuntu:bionic\n\nenv tz=asia/shanghai\n\nrun echo "${tz}" > /etc/timezone \\\n    && ln -sf /usr/share/zoneinfo/${tz} /etc/localtime \\\n    && apt update \\\n    && apt install -y tzdata \\\n    && rm -rf /var/lib/apt/lists/*\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n',charsets:{cjk:!0}},{title:"å¸¸ç¨è®¡ç®",frontmatter:{title:"å¸¸ç¨è®¡ç®",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/7a288b/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å¸¸ç¨è®¡ç®"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¸¸ç¨è®¡ç®"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¸¸ç¨è®¡ç®"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/01.%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97.html",relativePath:"01.ææ¯æè°/04.golang/01.å¸¸ç¨è®¡ç®.md",key:"v-fa04c054",path:"/pages/7a288b/",headersStr:null,content:"# æ°ç»å»é\n\nfunc RemoveRepeatedElement(arr []string) (newArr []string) {\n\tnewArr = make([]string, 0)\n\tfor i := 0; i < len(arr); i++ {\n\t\trepeat := false\n\t\tfor j := i + 1; j < len(arr); j++ {\n\t\t\tif arr[i] == arr[j] {\n\t\t\t\trepeat = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif !repeat {\n\t\t\tnewArr = append(newArr, arr[i])\n\t\t}\n\t}\n\treturn\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",normalizedContent:"# æ°ç»å»é\n\nfunc removerepeatedelement(arr []string) (newarr []string) {\n\tnewarr = make([]string, 0)\n\tfor i := 0; i < len(arr); i++ {\n\t\trepeat := false\n\t\tfor j := i + 1; j < len(arr); j++ {\n\t\t\tif arr[i] == arr[j] {\n\t\t\t\trepeat = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif !repeat {\n\t\t\tnewarr = append(newarr, arr[i])\n\t\t}\n\t}\n\treturn\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",charsets:{cjk:!0}},{title:"golangé¢è¯é®é¢",frontmatter:{title:"golangé¢è¯é®é¢",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/b587ce/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"golangé¢è¯é®é¢"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html"},{property:"og:type",content:"article"},{property:"og:title",content:"golangé¢è¯é®é¢"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"golangé¢è¯é®é¢"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/02.golang%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html",relativePath:"01.ææ¯æè°/04.golang/02.golangé¢è¯é®é¢.md",key:"v-6c7b2800",path:"/pages/b587ce/",headers:[{level:3,title:"Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼",slug:"golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åé",normalizedTitle:"golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼",charIndex:2},{level:3,title:"Golang ä¸­çå¹¶åæ¨¡å",slug:"golang-ä¸­çå¹¶åæ¨¡å",normalizedTitle:"golang ä¸­çå¹¶åæ¨¡å",charIndex:103},{level:3,title:"Goçº¿ç¨å®ç°æ¨¡åMPG",slug:"goçº¿ç¨å®ç°æ¨¡åmpg",normalizedTitle:"goçº¿ç¨å®ç°æ¨¡åmpg",charIndex:623},{level:3,title:"ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼",slug:"ä»ä¹æ¯channel-å®æ¯çº¿ç¨å®å¨çå",normalizedTitle:"ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼",charIndex:927},{level:3,title:"goroutineä¸­çè°åº¦åç",slug:"goroutineä¸­çè°åº¦åç",normalizedTitle:"goroutineä¸­çè°åº¦åç",charIndex:952},{level:3,title:"çº¿ç¨/åç¨/è¿ç¨çåºå«",slug:"çº¿ç¨-åç¨-è¿ç¨çåºå«",normalizedTitle:"çº¿ç¨/åç¨/è¿ç¨çåºå«",charIndex:972},{level:3,title:"golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹",slug:"golangåé¾è¡¨çå®ç°-æä¹å®ä¹-åå§å-æ·»å -å é¤èç¹",normalizedTitle:"golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹",charIndex:1275},{level:3,title:"makeånewå·®å«",slug:"makeånewå·®å«",normalizedTitle:"makeånewå·®å«",charIndex:1309},{level:3,title:"nilåçåç©ºåççåºå«",slug:"nilåçåç©ºåççåºå«",normalizedTitle:"nilåçåç©ºåççåºå«",charIndex:1769},{level:3,title:"å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼",slug:"å¯¹å·²ç»å³é­çç-chan-è¿è¡è¯»å-ä¼æä¹æ ·-ä¸ºä»ä¹",normalizedTitle:"å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼",charIndex:1873},{level:3,title:"ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼",slug:"ç¨è¿-fallthrough-å³é®å­å-è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹",normalizedTitle:"ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼",charIndex:2141},{level:3,title:"restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼",slug:"restfulçæå-é½æåªäºè¯·æ±æ¹æ³-åå«ä»£è¡¨ä»ä¹ææ",normalizedTitle:"restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼",charIndex:2388},{level:3,title:"Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå«",slug:"golangå¯¼å¥åæ¶-ä½¿ç¨-å¯¼å¥æä»ä¹åºå«",normalizedTitle:"golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå«",charIndex:2422},{level:3,title:"Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å",slug:"goæ¯æç±»åç»§æ¿å-go-æ¯é¢åå¯¹è±¡çè¯­è¨å",normalizedTitle:"goæ¯æç±»åç»§æ¿åï¼go æ¯é¢åå¯¹è±¡çè¯­è¨å",charIndex:2454},{level:3,title:"å¦ä½å¤æ­é¾è¡¨æç¯",slug:"å¦ä½å¤æ­é¾è¡¨æç¯",normalizedTitle:"å¦ä½å¤æ­é¾è¡¨æç¯",charIndex:2760}],headersStr:"Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼ Golang ä¸­çå¹¶åæ¨¡å Goçº¿ç¨å®ç°æ¨¡åMPG ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼ goroutineä¸­çè°åº¦åç çº¿ç¨/åç¨/è¿ç¨çåºå« golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹ makeånewå·®å« nilåçåç©ºåççåºå« å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼ ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼ restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼ Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.'å¯¼å¥æä»ä¹åºå« Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å å¦ä½å¤æ­é¾è¡¨æç¯",content:'# Golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼\n\nmutexé Golangä¸­Goroutine å¯ä»¥éè¿ Channel è¿è¡å®å¨è¯»åå±äº«åé\n\næç¼å²channelåæ ç¼åchannelçåºå«\n\n\n# Golang ä¸­çå¹¶åæ¨¡å\n\nè¯·è°ä¸è° go è¯­è¨çå¹¶åæºå¶ä»¥åå®æä½¿ç¨çCSPå¹¶åæ¨¡å\n\nGoå®ç°äºä¸¤ç§å¹¶åå½¢å¼ãç¬¬ä¸ç§æ¯å¤§å®¶æ®éè®¤ç¥çï¼å¤çº¿ç¨å±äº«åå­ãå¶å®å°±æ¯JavaæèC++ç­è¯­è¨ä¸­çå¤çº¿ç¨å¼åãå¦å¤ä¸ç§æ¯Goè¯­è¨ç¹æçï¼ä¹æ¯Goè¯­è¨æ¨èçï¼CSPï¼communicating sequential processesï¼å¹¶åæ¨¡åã\n\néè¿channeléç¥å®ç°å¹¶åæ§å¶ éè¿syncåä¸­çWaitGroupå®ç°å¹¶åæ§å¶ å½ä¸» goroutine è¿è¡å° <-ch æ¥å channel çå¼çæ¶åï¼å¦æè¯¥ channel ä¸­æ²¡ææ°æ®ï¼å°±ä¼ä¸ç´é»å¡ç­å¾ï¼ç´å°æå¼ãè¿æ ·å°±å¯ä»¥ç®åå®ç°å¹¶åæ§å¶\n\nå¨Go 1.7 ä»¥åå¼è¿çå¼ºå¤§çContextä¸ä¸æï¼å®ç°å¹¶åæ§å¶\n\nGoçCSPå¹¶åæ¨¡åï¼æ¯éè¿goroutineåchannelæ¥å®ç°çã ï·goroutineÂ æ¯Goè¯­è¨ä¸­å¹¶åçæ§è¡åä½ãæç¹æ½è±¡ï¼å¶å®å°±æ¯åä¼ ç»æ¦å¿µä¸çâçº¿ç¨âç±»ä¼¼ï¼å¯ä»¥çè§£ä¸ºâçº¿ç¨âã ï·channelæ¯Goè¯­è¨ä¸­åä¸ªå¹¶åç»æä½(goroutine)ä¹åçéä¿¡æºå¶ã éä¿çè®²ï¼å°±æ¯åä¸ªgoroutineä¹é´éä¿¡çâç®¡éâï¼æç¹ç±»ä¼¼äºLinuxä¸­çç®¡éã\n\n\n# Goçº¿ç¨å®ç°æ¨¡åMPG\n\nMæçæ¯Machineï¼ä¸ä¸ªMç´æ¥å³èäºä¸ä¸ªåæ ¸çº¿ç¨ãç±æä½ç³»ç»ç®¡çã Pæçæ¯âprocessorâï¼ä»£è¡¨äºMæéçä¸ä¸æç¯å¢ï¼ä¹æ¯å¤çç¨æ·çº§ä»£ç é»è¾çå¤çå¨ãå®è´è´£è¡æ¥MåGçè°åº¦ä¸ä¸æï¼å°ç­å¾æ§è¡çGä¸Må¯¹æ¥ã Gæçæ¯Goroutineï¼å¶å®æ¬è´¨ä¸ä¹æ¯ä¸ç§è½»éçº§ççº¿ç¨ãåæ¬äºè°ç¨æ ï¼éè¦çè°åº¦ä¿¡æ¯ï¼ä¾å¦channelç­ã Pçæ°éç±ç¯å¢åéä¸­çGOMAXPROCSå³å®ï¼éå¸¸æ¥è¯´å®æ¯åæ ¸å¿æ°å¯¹åºï¼ä¾å¦å¨4Coreçæå¡å¨ä¸åå¯å¨4ä¸ªçº¿ç¨ãGä¼æå¾å¤ä¸ªï¼æ¯ä¸ªPä¼å°Goroutineä»ä¸ä¸ªå°±ç»ªçéåä¸­åPopæä½ï¼ä¸ºäºåå°éçç«äºï¼éå¸¸æåµä¸æ¯ä¸ªPä¼è´è´£ä¸ä¸ªéåã\n\n\n# ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼\n\n\n# goroutineä¸­çè°åº¦åç\n\n\n# çº¿ç¨/åç¨/è¿ç¨çåºå«\n\nçº¿ç¨æ¥æèªå·±ç¬ç«çæ åå±äº«çå ï¼å±äº«å ï¼ä¸å±äº«æ ï¼çº¿ç¨çåæ¢ä¸è¬ä¹ç±æä½ç³»ç»è°åº¦ã åçº¿ç¨ç±»ä¼¼ï¼å±äº«å ï¼ä¸å±äº«æ ï¼åç¨çåæ¢ä¸è¬ç±ç¨åºåå¨ä»£ç ä¸­æ¾å¼æ§å¶ãå®é¿åäºä¸ä¸æåæ¢çé¢å¤èè´¹ï¼å¼é¡¾äºå¤çº¿ç¨çä¼ç¹ï¼ç®åäºé«å¹¶åç¨åºçå¤æã\n\nGoroutineåå¶ä»è¯­è¨çåç¨ï¼coroutineï¼å¨ä½¿ç¨æ¹å¼ä¸ç±»ä¼¼ï¼ä½ä»å­é¢æä¹ä¸æ¥çä¸åï¼ä¸ä¸ªæ¯Goroutineï¼ä¸ä¸ªæ¯coroutineï¼ï¼åå°±æ¯åç¨æ¯ä¸ç§åä½ä»»å¡æ§å¶æºå¶ï¼å¨æç®åçæä¹ä¸ï¼åç¨ä¸æ¯å¹¶åçï¼èGoroutineæ¯æå¹¶åçãå æ­¤Goroutineå¯ä»¥çè§£ä¸ºä¸ç§Goè¯­è¨çåç¨ãåæ¶å®å¯ä»¥è¿è¡å¨ä¸ä¸ªæå¤ä¸ªçº¿ç¨ä¸ã\n\n\n# golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹\n\n\n# makeånewå·®å«\n\nnew ()æ¯åå»ºå½æ°ï¼å½æ°ååä¸º: func new(Type) *Type ï·1 make ä¹æ¯åå»ºå½æ°ï¼å®çå½æ°åå æ¯ new å¤äºä¸ä¸ªï¼é¿åº¦ï¼åæ°ï¼è¿åå¼ä¹ä¸å: //ç¬¬ä¸ä¸ªåæ°æ¯ä¸ä¸ªç±»åï¼ç¬¬äºä¸ªåæ°æ¯é¿åº¦ //è¿åå¼æ¯ä¸ä¸ªæåè¯¥ç±»åçä¸ä¸ªå¼ç¨ func make(Type, size IntegerType) Type makeånewé½æ¯golangç¨æ¥åéåå­çå§å»ºå½æ°ï¼ä¸å¨å ä¸åéåå­ï¼å¹¶ä¸ºè¯¥åéæ§è¡äºåå§åæä½make ç¨äºä¸ºå¼ç¨ç±»ååéåå­ç©ºé´ï¼å¶å¨åéåå­çåæ¶ï¼ä¹åå§åäºä¸äºç¸å³å±æ§(è¿éåå§åè¿äºç¸å³å±æ§æ¶ä¸åæ¯ç®åçç¨é»è®¤é¶å¼æ¥åå§åäºï¼ï¼ï¼)ãnewåªæ¯åéé»è®¤é¶å¼åå­å¹¶è¿åæåè¯¥é¶å¼åå­çä¸ä¸ªæéä¹å°±æ¯æ§è¡äºä¸ä¸ªé»è®¤åå§åï¼å¨é¨ç¨é»è®¤é¶å¼æ¥è¿è¡åå§åï¼ã makeè¿åçæ¯ä¸ä¸ªå¼ç¨ç±»åï¼ènewè¿åçæ¯ä¸ä¸ªæåé¶å¼åå­ç©ºé´çæéã makeåªè½ç¨æ¥åéååå§åå¼ç¨ç±»åï¼sliceï¼mapï¼channelçæ°æ®ï¼ newå¯ä»¥åéä»»æç±»åçæ°æ®ã\n\n\n# nilåçåç©ºåççåºå«\n\nnilåçåç©ºåçæåçå°åä¸ä¸æ ·ãnilç©ºåçå¼ç¨æ°ç»æéå°åä¸º0ï¼æ æåä»»ä½å®éå°åï¼ ç©ºåççå¼ç¨æ°ç»æéå°åæ¯æçï¼ä¸åºå®ä¸ºä¸ä¸ªå¼ è½å¦éè¿forå¾ªç¯éåå é¤åç´ \n\n\n# å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼\n\nè¯»å·²ç»å³é­ç chan è½ä¸ç´è¯»å°ä¸è¥¿ï¼ä½æ¯è¯»å°çåå®¹æ ¹æ®ééåå³é­åæ¯å¦æåç´ èä¸åã å¦æ chan å³é­åï¼buffer åæåç´ è¿æªè¯» , ä¼æ­£ç¡®è¯»å° chan åçå¼ï¼ä¸è¿åçç¬¬äºä¸ª bool å¼ï¼æ¯å¦è¯»æåï¼ä¸º trueã å¦æ chan å³é­åï¼buffer åæåç´ å·²ç»è¢«è¯»å®ï¼chan åæ å¼ï¼æ¥ä¸æ¥æææ¥æ¶çå¼é½ä¼éé»å¡ç´æ¥æåï¼è¿å channel åç´ çé¶å¼ï¼ä½æ¯ç¬¬äºä¸ª bool å¼ä¸ç´ä¸º falseã åå·²ç»å³é­ç chan ä¼ panic\n\n\n# ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼\n\nå¶ä»è¯­è¨ä¸­ï¼switch-case ç»æä¸­ä¸è¬é½éè¦å¨æ¯ä¸ª case åæ¯ç»æå¤æ¾å¼çè°ç¨ break è¯­å¥ä»¥é²æ­¢ åä¸ä¸ª case åæ¯è¢«è´¯ç©¿åè°ç¨ä¸ä¸ä¸ª case åæ¯çé»è¾ï¼go ç¼è¯å¨ä»è¯­æ³å±é¢ä¸æ¶é¤äºè¿ç§éå¤çå·¥ä½ï¼è®©å¼åèæ´è½»æ¾ï¼ä½ææ¶åæä»¬çåºæ¯å°±æ¯éè¦è´¯ç©¿å¤ä¸ª caseï¼ä½æ¯ç¼è¯å¨é»è®¤æ¯ä¸è´¯ç©¿çï¼è¿ä¸ªæ¶å fallthrough å°±èµ·ä½ç¨äºï¼è®©æä¸ª case åæ¯åæ¬¡è´¯ç©¿å°ä¸ä¸ä¸ª case åæ¯ã\n\n\n# restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼\n\n\n# Golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.\'å¯¼å¥æä»ä¹åºå«\n\n\n# Goæ¯æç±»åç»§æ¿åï¼Go æ¯é¢åå¯¹è±¡çè¯­è¨å\n\næ²¡æä¼ ç»çç±»ï¼ä¹æ²¡æç»§æ¿ã\n\nåèä»£ä¹çæ¯ç»æåç»åçæ¹å¼\n\nGo æç±»ååæ¹æ³ï¼å¹¶ä¸åè®¸é¢åå¯¹è±¡çç¼ç¨é£æ ¼ï¼ä½æ²¡æç±»åå±æ¬¡ã\n\nGo ä¸­ç "æ¥å£ "æ¦å¿µæä¾äºä¸ç§ä¸åçæ¹æ³ï¼æä»¬è®¤ä¸ºè¿ç§æ¹æ³æäºä½¿ç¨ï¼èä¸å¨æäºæ¹é¢æ´å éç¨ãè¿æä¸äºæ¹æ³å¯ä»¥å°ç±»ååµå¥å°å¶ä»ç±»åä¸­ï¼ä»¥æä¾ç±»ä¼¼çä¸è¥¿ï¼ä½ä¸ç­åäºå­ç±»ã\n\nGo ä¸­çæ¹æ³æ¯ C++ æ Java ä¸­çæ¹æ³æ´éç¨ï¼å®ä»¬å¯ä»¥ä¸ºä»»ä½ç±»åçæ°æ®å®ä¹ï¼çè³æ¯åç½®ç±»åï¼å¦æ®éçã"æªè£ç®±ç "æ´æ°ãå®ä»¬å¹¶ä¸å±éäºç»æï¼ç±»ï¼ã\n\nGo ç±äºç¼ºä¹ç±»åå±æ¬¡ï¼Go ä¸­ç "å¯¹è±¡ "æ¯ C++ æ Java ç­è¯­è¨æ´è½»å·§ã\n\n\n# å¦ä½å¤æ­é¾è¡¨æç¯\n\nä¸åè®¸ä¿®æ¹é¾è¡¨ç»æã æ¶é´å¤æåº¦O(n)ï¼ç©ºé´å¤æåº¦O(1)ã\n\nhttps://blog.csdn.net/u010983881/article/details/78896293 å¿«æ¢æéï¼ä¸ä¸ªè·³1ï¼ä¸ä¸ªè·³2\n\næ¹æ³ä¸ãç©·ä¸¾éå æ¹æ³ä¸ï¼é¦åä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ä»å¤´èç¹éæ°éåæ°èç¹ä¹åçææèç¹ï¼ç¨æ°èç¹IDåæ­¤èç¹ä¹åææèç¹IDä¾æ¬¡ä½æ¯è¾ãå¦æåç°æ°èç¹ä¹åçææèç¹å½ä¸­å­å¨ç¸åèç¹IDï¼åè¯´æè¯¥èç¹è¢«éåè¿ä¸¤æ¬¡ï¼é¾è¡¨æç¯ï¼å¦æä¹åçææèç¹å½ä¸­ä¸å­å¨ç¸åçèç¹ï¼å°±ç»§ç»­éåä¸ä¸ä¸ªæ°èç¹ï¼ç»§ç»­éå¤åæçæä½ã ç®æ³çæ¶é´å¤æåº¦æ¯0+1+2+3+â¦+(D+S-1) = (D+S-1)(D+S)/2 ï¼ å¯ä»¥ç®åå°çè§£æ O(NN)ãèæ­¤ç®æ³æ²¡æåå»ºé¢å¤å­å¨ç©ºé´ï¼ç©ºé´å¤æåº¦å¯ä»¥ç®åå°çè§£æä¸ºO(1) æ¹æ³äºãåå¸è¡¨ç¼å­ é¦ååå»ºä¸ä¸ªä»¥èç¹IDä¸ºé®çHashSetéåï¼ç¨æ¥å­å¨æ¾ç»éåè¿çèç¹ãç¶ååæ ·æ¯ä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ç¨æ°èç¹åHashSetéåå½ä¸­å­å¨çèç¹ä½æ¯è¾ï¼å¦æåç°HashSetå½ä¸­å­å¨ç¸åèç¹IDï¼åè¯´æé¾è¡¨æç¯ï¼å¦æHashSetå½ä¸­ä¸å­å¨ç¸åçèç¹IDï¼å°±æè¿ä¸ªæ°èç¹IDå­å¥HashSetï¼ä¹åè¿å¥ä¸ä¸èç¹ï¼ç»§ç»­éå¤åæçæä½ã\n\næ¹æ³ä¸ãå¿«æ¢æé é¦ååå»ºä¸¤ä¸ªæé1å2ï¼å¨javaéå°±æ¯ä¸¤ä¸ªå¯¹è±¡å¼ç¨ï¼ï¼åæ¶æåè¿ä¸ªé¾è¡¨çå¤´èç¹ãç¶åå¼å§ä¸ä¸ªå¤§å¾ªç¯ï¼å¨å¾ªç¯ä½ä¸­ï¼è®©æé1æ¯æ¬¡åä¸ç§»å¨ä¸ä¸ªèç¹ï¼è®©æé2æ¯æ¬¡åä¸ç§»å¨ä¸¤ä¸ªèç¹ï¼ç¶åæ¯è¾ä¸¤ä¸ªæéæåçèç¹æ¯å¦ç¸åãå¦æç¸åï¼åå¤æ­åºé¾è¡¨æç¯ï¼å¦æä¸åï¼åç»§ç»­ä¸ä¸æ¬¡å¾ªç¯ã æ¹æ³åãSetéåå¤§å°åå æèç¹æ¾å¥setéï¼æ¯æ¬¡è®¿é®ä¸ä¸ªèç¹æ¶ï¼å¦æseté¿åº¦ä¸åï¼åè·³åºï¼è¯´ææç¯ãå¦åseté¿åº¦+1ï¼ç»§ç»­éåã è¯¥æ¹æ³æ¶é´å¤æåº¦æ¯Oï¼Nï¼ï¼ç©ºé´å¤æåº¦ä¸å ä¸ºéè¦é¢å¤ç­æ°éçå­å¨ç©ºé´ï¼æä»¥ç©ºé´å¤æåº¦æ¯Oï¼nï¼ã å¦ä½å¤æ­ä¸¤ä¸ªåé¾è¡¨æ¯å¦ç¸äº¤ï¼ä»¥åç¸äº¤ç¹ æ¹æ³ä¸ãç´æ¥æ³ ç´æ¥å¤æ­ç¬¬ä¸ä¸ªé¾è¡¨çæ¯ä¸ªç»ç¹æ¯å¦å¨ç¬¬äºä¸ªé¾è¡¨ä¸­ï¼æ¶é´å¤æåº¦ä¸ºO(len1*len2)ï¼èæ¶å¾å¤§',normalizedContent:'# golangä¸­æåªäºæ¹å¼å®å¨è¯»åå±äº«åéï¼\n\nmutexé golangä¸­goroutine å¯ä»¥éè¿ channel è¿è¡å®å¨è¯»åå±äº«åé\n\næç¼å²channelåæ ç¼åchannelçåºå«\n\n\n# golang ä¸­çå¹¶åæ¨¡å\n\nè¯·è°ä¸è° go è¯­è¨çå¹¶åæºå¶ä»¥åå®æä½¿ç¨çcspå¹¶åæ¨¡å\n\ngoå®ç°äºä¸¤ç§å¹¶åå½¢å¼ãç¬¬ä¸ç§æ¯å¤§å®¶æ®éè®¤ç¥çï¼å¤çº¿ç¨å±äº«åå­ãå¶å®å°±æ¯javaæèc++ç­è¯­è¨ä¸­çå¤çº¿ç¨å¼åãå¦å¤ä¸ç§æ¯goè¯­è¨ç¹æçï¼ä¹æ¯goè¯­è¨æ¨èçï¼cspï¼communicating sequential processesï¼å¹¶åæ¨¡åã\n\néè¿channeléç¥å®ç°å¹¶åæ§å¶ éè¿syncåä¸­çwaitgroupå®ç°å¹¶åæ§å¶ å½ä¸» goroutine è¿è¡å° <-ch æ¥å channel çå¼çæ¶åï¼å¦æè¯¥ channel ä¸­æ²¡ææ°æ®ï¼å°±ä¼ä¸ç´é»å¡ç­å¾ï¼ç´å°æå¼ãè¿æ ·å°±å¯ä»¥ç®åå®ç°å¹¶åæ§å¶\n\nå¨go 1.7 ä»¥åå¼è¿çå¼ºå¤§çcontextä¸ä¸æï¼å®ç°å¹¶åæ§å¶\n\ngoçcspå¹¶åæ¨¡åï¼æ¯éè¿goroutineåchannelæ¥å®ç°çã ï·goroutineÂ æ¯goè¯­è¨ä¸­å¹¶åçæ§è¡åä½ãæç¹æ½è±¡ï¼å¶å®å°±æ¯åä¼ ç»æ¦å¿µä¸çâçº¿ç¨âç±»ä¼¼ï¼å¯ä»¥çè§£ä¸ºâçº¿ç¨âã ï·channelæ¯goè¯­è¨ä¸­åä¸ªå¹¶åç»æä½(goroutine)ä¹åçéä¿¡æºå¶ã éä¿çè®²ï¼å°±æ¯åä¸ªgoroutineä¹é´éä¿¡çâç®¡éâï¼æç¹ç±»ä¼¼äºlinuxä¸­çç®¡éã\n\n\n# goçº¿ç¨å®ç°æ¨¡åmpg\n\nmæçæ¯machineï¼ä¸ä¸ªmç´æ¥å³èäºä¸ä¸ªåæ ¸çº¿ç¨ãç±æä½ç³»ç»ç®¡çã pæçæ¯âprocessorâï¼ä»£è¡¨äºmæéçä¸ä¸æç¯å¢ï¼ä¹æ¯å¤çç¨æ·çº§ä»£ç é»è¾çå¤çå¨ãå®è´è´£è¡æ¥mågçè°åº¦ä¸ä¸æï¼å°ç­å¾æ§è¡çgä¸må¯¹æ¥ã gæçæ¯goroutineï¼å¶å®æ¬è´¨ä¸ä¹æ¯ä¸ç§è½»éçº§ççº¿ç¨ãåæ¬äºè°ç¨æ ï¼éè¦çè°åº¦ä¿¡æ¯ï¼ä¾å¦channelç­ã pçæ°éç±ç¯å¢åéä¸­çgomaxprocså³å®ï¼éå¸¸æ¥è¯´å®æ¯åæ ¸å¿æ°å¯¹åºï¼ä¾å¦å¨4coreçæå¡å¨ä¸åå¯å¨4ä¸ªçº¿ç¨ãgä¼æå¾å¤ä¸ªï¼æ¯ä¸ªpä¼å°goroutineä»ä¸ä¸ªå°±ç»ªçéåä¸­åpopæä½ï¼ä¸ºäºåå°éçç«äºï¼éå¸¸æåµä¸æ¯ä¸ªpä¼è´è´£ä¸ä¸ªéåã\n\n\n# ä»ä¹æ¯channelï¼å®æ¯çº¿ç¨å®å¨çåï¼\n\n\n# goroutineä¸­çè°åº¦åç\n\n\n# çº¿ç¨/åç¨/è¿ç¨çåºå«\n\nçº¿ç¨æ¥æèªå·±ç¬ç«çæ åå±äº«çå ï¼å±äº«å ï¼ä¸å±äº«æ ï¼çº¿ç¨çåæ¢ä¸è¬ä¹ç±æä½ç³»ç»è°åº¦ã åçº¿ç¨ç±»ä¼¼ï¼å±äº«å ï¼ä¸å±äº«æ ï¼åç¨çåæ¢ä¸è¬ç±ç¨åºåå¨ä»£ç ä¸­æ¾å¼æ§å¶ãå®é¿åäºä¸ä¸æåæ¢çé¢å¤èè´¹ï¼å¼é¡¾äºå¤çº¿ç¨çä¼ç¹ï¼ç®åäºé«å¹¶åç¨åºçå¤æã\n\ngoroutineåå¶ä»è¯­è¨çåç¨ï¼coroutineï¼å¨ä½¿ç¨æ¹å¼ä¸ç±»ä¼¼ï¼ä½ä»å­é¢æä¹ä¸æ¥çä¸åï¼ä¸ä¸ªæ¯goroutineï¼ä¸ä¸ªæ¯coroutineï¼ï¼åå°±æ¯åç¨æ¯ä¸ç§åä½ä»»å¡æ§å¶æºå¶ï¼å¨æç®åçæä¹ä¸ï¼åç¨ä¸æ¯å¹¶åçï¼ègoroutineæ¯æå¹¶åçãå æ­¤goroutineå¯ä»¥çè§£ä¸ºä¸ç§goè¯­è¨çåç¨ãåæ¶å®å¯ä»¥è¿è¡å¨ä¸ä¸ªæå¤ä¸ªçº¿ç¨ä¸ã\n\n\n# golangåé¾è¡¨çå®ç°ï¼æä¹å®ä¹ï¼åå§åï¼æ·»å ï¼å é¤èç¹\n\n\n# makeånewå·®å«\n\nnew ()æ¯åå»ºå½æ°ï¼å½æ°ååä¸º: func new(type) *type ï·1 make ä¹æ¯åå»ºå½æ°ï¼å®çå½æ°åå æ¯ new å¤äºä¸ä¸ªï¼é¿åº¦ï¼åæ°ï¼è¿åå¼ä¹ä¸å: //ç¬¬ä¸ä¸ªåæ°æ¯ä¸ä¸ªç±»åï¼ç¬¬äºä¸ªåæ°æ¯é¿åº¦ //è¿åå¼æ¯ä¸ä¸ªæåè¯¥ç±»åçä¸ä¸ªå¼ç¨ func make(type, size integertype) type makeånewé½æ¯golangç¨æ¥åéåå­çå§å»ºå½æ°ï¼ä¸å¨å ä¸åéåå­ï¼å¹¶ä¸ºè¯¥åéæ§è¡äºåå§åæä½make ç¨äºä¸ºå¼ç¨ç±»ååéåå­ç©ºé´ï¼å¶å¨åéåå­çåæ¶ï¼ä¹åå§åäºä¸äºç¸å³å±æ§(è¿éåå§åè¿äºç¸å³å±æ§æ¶ä¸åæ¯ç®åçç¨é»è®¤é¶å¼æ¥åå§åäºï¼ï¼ï¼)ãnewåªæ¯åéé»è®¤é¶å¼åå­å¹¶è¿åæåè¯¥é¶å¼åå­çä¸ä¸ªæéä¹å°±æ¯æ§è¡äºä¸ä¸ªé»è®¤åå§åï¼å¨é¨ç¨é»è®¤é¶å¼æ¥è¿è¡åå§åï¼ã makeè¿åçæ¯ä¸ä¸ªå¼ç¨ç±»åï¼ènewè¿åçæ¯ä¸ä¸ªæåé¶å¼åå­ç©ºé´çæéã makeåªè½ç¨æ¥åéååå§åå¼ç¨ç±»åï¼sliceï¼mapï¼channelçæ°æ®ï¼ newå¯ä»¥åéä»»æç±»åçæ°æ®ã\n\n\n# nilåçåç©ºåççåºå«\n\nnilåçåç©ºåçæåçå°åä¸ä¸æ ·ãnilç©ºåçå¼ç¨æ°ç»æéå°åä¸º0ï¼æ æåä»»ä½å®éå°åï¼ ç©ºåççå¼ç¨æ°ç»æéå°åæ¯æçï¼ä¸åºå®ä¸ºä¸ä¸ªå¼ è½å¦éè¿forå¾ªç¯éåå é¤åç´ \n\n\n# å¯¹å·²ç»å³é­ççÂ chanÂ è¿è¡è¯»åï¼ä¼æä¹æ ·ï¼ä¸ºä»ä¹ï¼\n\nè¯»å·²ç»å³é­ç chan è½ä¸ç´è¯»å°ä¸è¥¿ï¼ä½æ¯è¯»å°çåå®¹æ ¹æ®ééåå³é­åæ¯å¦æåç´ èä¸åã å¦æ chan å³é­åï¼buffer åæåç´ è¿æªè¯» , ä¼æ­£ç¡®è¯»å° chan åçå¼ï¼ä¸è¿åçç¬¬äºä¸ª bool å¼ï¼æ¯å¦è¯»æåï¼ä¸º trueã å¦æ chan å³é­åï¼buffer åæåç´ å·²ç»è¢«è¯»å®ï¼chan åæ å¼ï¼æ¥ä¸æ¥æææ¥æ¶çå¼é½ä¼éé»å¡ç´æ¥æåï¼è¿å channel åç´ çé¶å¼ï¼ä½æ¯ç¬¬äºä¸ª bool å¼ä¸ç´ä¸º falseã åå·²ç»å³é­ç chan ä¼ panic\n\n\n# ç¨è¿ fallthrough å³é®å­åï¼è¿ä¸ªå³é®å­çä½ç¨æ¯ä»ä¹ï¼\n\nå¶ä»è¯­è¨ä¸­ï¼switch-case ç»æä¸­ä¸è¬é½éè¦å¨æ¯ä¸ª case åæ¯ç»æå¤æ¾å¼çè°ç¨ break è¯­å¥ä»¥é²æ­¢ åä¸ä¸ª case åæ¯è¢«è´¯ç©¿åè°ç¨ä¸ä¸ä¸ª case åæ¯çé»è¾ï¼go ç¼è¯å¨ä»è¯­æ³å±é¢ä¸æ¶é¤äºè¿ç§éå¤çå·¥ä½ï¼è®©å¼åèæ´è½»æ¾ï¼ä½ææ¶åæä»¬çåºæ¯å°±æ¯éè¦è´¯ç©¿å¤ä¸ª caseï¼ä½æ¯ç¼è¯å¨é»è®¤æ¯ä¸è´¯ç©¿çï¼è¿ä¸ªæ¶å fallthrough å°±èµ·ä½ç¨äºï¼è®©æä¸ª case åæ¯åæ¬¡è´¯ç©¿å°ä¸ä¸ä¸ª case åæ¯ã\n\n\n# restfulçæåï¼é½æåªäºè¯·æ±æ¹æ³ï¼åå«ä»£è¡¨ä»ä¹ææï¼\n\n\n# golangå¯¼å¥åæ¶ï¼ä½¿ç¨â_â/â.\'å¯¼å¥æä»ä¹åºå«\n\n\n# goæ¯æç±»åç»§æ¿åï¼go æ¯é¢åå¯¹è±¡çè¯­è¨å\n\næ²¡æä¼ ç»çç±»ï¼ä¹æ²¡æç»§æ¿ã\n\nåèä»£ä¹çæ¯ç»æåç»åçæ¹å¼\n\ngo æç±»ååæ¹æ³ï¼å¹¶ä¸åè®¸é¢åå¯¹è±¡çç¼ç¨é£æ ¼ï¼ä½æ²¡æç±»åå±æ¬¡ã\n\ngo ä¸­ç "æ¥å£ "æ¦å¿µæä¾äºä¸ç§ä¸åçæ¹æ³ï¼æä»¬è®¤ä¸ºè¿ç§æ¹æ³æäºä½¿ç¨ï¼èä¸å¨æäºæ¹é¢æ´å éç¨ãè¿æä¸äºæ¹æ³å¯ä»¥å°ç±»ååµå¥å°å¶ä»ç±»åä¸­ï¼ä»¥æä¾ç±»ä¼¼çä¸è¥¿ï¼ä½ä¸ç­åäºå­ç±»ã\n\ngo ä¸­çæ¹æ³æ¯ c++ æ java ä¸­çæ¹æ³æ´éç¨ï¼å®ä»¬å¯ä»¥ä¸ºä»»ä½ç±»åçæ°æ®å®ä¹ï¼çè³æ¯åç½®ç±»åï¼å¦æ®éçã"æªè£ç®±ç "æ´æ°ãå®ä»¬å¹¶ä¸å±éäºç»æï¼ç±»ï¼ã\n\ngo ç±äºç¼ºä¹ç±»åå±æ¬¡ï¼go ä¸­ç "å¯¹è±¡ "æ¯ c++ æ java ç­è¯­è¨æ´è½»å·§ã\n\n\n# å¦ä½å¤æ­é¾è¡¨æç¯\n\nä¸åè®¸ä¿®æ¹é¾è¡¨ç»æã æ¶é´å¤æåº¦o(n)ï¼ç©ºé´å¤æåº¦o(1)ã\n\nhttps://blog.csdn.net/u010983881/article/details/78896293 å¿«æ¢æéï¼ä¸ä¸ªè·³1ï¼ä¸ä¸ªè·³2\n\næ¹æ³ä¸ãç©·ä¸¾éå æ¹æ³ä¸ï¼é¦åä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ä»å¤´èç¹éæ°éåæ°èç¹ä¹åçææèç¹ï¼ç¨æ°èç¹idåæ­¤èç¹ä¹åææèç¹idä¾æ¬¡ä½æ¯è¾ãå¦æåç°æ°èç¹ä¹åçææèç¹å½ä¸­å­å¨ç¸åèç¹idï¼åè¯´æè¯¥èç¹è¢«éåè¿ä¸¤æ¬¡ï¼é¾è¡¨æç¯ï¼å¦æä¹åçææèç¹å½ä¸­ä¸å­å¨ç¸åçèç¹ï¼å°±ç»§ç»­éåä¸ä¸ä¸ªæ°èç¹ï¼ç»§ç»­éå¤åæçæä½ã ç®æ³çæ¶é´å¤æåº¦æ¯0+1+2+3+â¦+(d+s-1) = (d+s-1)(d+s)/2 ï¼ å¯ä»¥ç®åå°çè§£æ o(nn)ãèæ­¤ç®æ³æ²¡æåå»ºé¢å¤å­å¨ç©ºé´ï¼ç©ºé´å¤æåº¦å¯ä»¥ç®åå°çè§£æä¸ºo(1) æ¹æ³äºãåå¸è¡¨ç¼å­ é¦ååå»ºä¸ä¸ªä»¥èç¹idä¸ºé®çhashsetéåï¼ç¨æ¥å­å¨æ¾ç»éåè¿çèç¹ãç¶ååæ ·æ¯ä»å¤´èç¹å¼å§ï¼ä¾æ¬¡éååé¾è¡¨çæ¯ä¸ä¸ªèç¹ãæ¯éåå°ä¸ä¸ªæ°èç¹ï¼å°±ç¨æ°èç¹åhashsetéåå½ä¸­å­å¨çèç¹ä½æ¯è¾ï¼å¦æåç°hashsetå½ä¸­å­å¨ç¸åèç¹idï¼åè¯´æé¾è¡¨æç¯ï¼å¦æhashsetå½ä¸­ä¸å­å¨ç¸åçèç¹idï¼å°±æè¿ä¸ªæ°èç¹idå­å¥hashsetï¼ä¹åè¿å¥ä¸ä¸èç¹ï¼ç»§ç»­éå¤åæçæä½ã\n\næ¹æ³ä¸ãå¿«æ¢æé é¦ååå»ºä¸¤ä¸ªæé1å2ï¼å¨javaéå°±æ¯ä¸¤ä¸ªå¯¹è±¡å¼ç¨ï¼ï¼åæ¶æåè¿ä¸ªé¾è¡¨çå¤´èç¹ãç¶åå¼å§ä¸ä¸ªå¤§å¾ªç¯ï¼å¨å¾ªç¯ä½ä¸­ï¼è®©æé1æ¯æ¬¡åä¸ç§»å¨ä¸ä¸ªèç¹ï¼è®©æé2æ¯æ¬¡åä¸ç§»å¨ä¸¤ä¸ªèç¹ï¼ç¶åæ¯è¾ä¸¤ä¸ªæéæåçèç¹æ¯å¦ç¸åãå¦æç¸åï¼åå¤æ­åºé¾è¡¨æç¯ï¼å¦æä¸åï¼åç»§ç»­ä¸ä¸æ¬¡å¾ªç¯ã æ¹æ³åãsetéåå¤§å°åå æèç¹æ¾å¥setéï¼æ¯æ¬¡è®¿é®ä¸ä¸ªèç¹æ¶ï¼å¦æseté¿åº¦ä¸åï¼åè·³åºï¼è¯´ææç¯ãå¦åseté¿åº¦+1ï¼ç»§ç»­éåã è¯¥æ¹æ³æ¶é´å¤æåº¦æ¯oï¼nï¼ï¼ç©ºé´å¤æåº¦ä¸å ä¸ºéè¦é¢å¤ç­æ°éçå­å¨ç©ºé´ï¼æä»¥ç©ºé´å¤æåº¦æ¯oï¼nï¼ã å¦ä½å¤æ­ä¸¤ä¸ªåé¾è¡¨æ¯å¦ç¸äº¤ï¼ä»¥åç¸äº¤ç¹ æ¹æ³ä¸ãç´æ¥æ³ ç´æ¥å¤æ­ç¬¬ä¸ä¸ªé¾è¡¨çæ¯ä¸ªç»ç¹æ¯å¦å¨ç¬¬äºä¸ªé¾è¡¨ä¸­ï¼æ¶é´å¤æåº¦ä¸ºo(len1*len2)ï¼èæ¶å¾å¤§',charsets:{cjk:!0}},{title:"go-æé",frontmatter:{title:"go-æé",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/88c22b/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®",meta:[{name:"twitter:title",content:"go-æé"},{name:"twitter:description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-æé"},{property:"og:description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-æé"},{itemprop:"description",content:"Go æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½\næéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å\nåæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/03.go-%E6%8C%87%E9%92%88.html",relativePath:"01.ææ¯æè°/04.golang/03.go-æé.md",key:"v-783e73dc",path:"/pages/88c22b/",headersStr:null,content:"# Go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢\n\nGo æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½ æéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ Compile çéæç±»åæ£æ¥çèå´å åæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®\n\n\n# unsafe.Pointerä¸å®å¨æé\n\nå®è¡¨ç¤ºä»»æç±»åä¸å¯å¯»åçæéå¼,å¯ä»¥å¨ä¸åçæéç±»åä¹é´è¿è¡è½¬æ¢ï¼ç±»ä¼¼ C è¯­è¨ç void * çç¨éï¼ å¶åå«åç§æ ¸å¿æä½ï¼\n\n * ä»»ä½ç±»åçæéå¼é½å¯ä»¥è½¬æ¢ä¸º Pointer\n * Pointer å¯ä»¥è½¬æ¢ä¸ºä»»ä½ç±»åçæéå¼\n * uintptr å¯ä»¥è½¬æ¢ä¸º Pointer\n * Pointer å¯ä»¥è½¬æ¢ä¸º uintptr\n\nunsafe.Pointer å¯ä»¥è®©æ¨çåéå¨ä¸åçæéç±»åè½¬æ¥è½¬å»,ä¹å°±æ¯è¡¨ç¤ºä¸ºä»»æå¯å¯»åçæéç±»å uintptr å¸¸ç¨äºä¸ unsafe.Pointer æéå,ç¨äºåæéè¿ç®",normalizedContent:"# go çæéæ¯ä¸æ¯ææéè¿ç®åè½¬æ¢\n\ngo æ¯ä¸é¨éæè¯­è¨,ææçåéé½å¿é¡»ä¸ºæ éç±»å.ä¸åçç±»åä¸è½å¤è¿è¡èµå¼,è®¡ç®ç­è·¨ç±»åçæä½ æéä¹å¯¹åºçç¸å¯¹çç±»å,ä¹å¨ compile çéæç±»åæ£æ¥çèå´å åæ¶éæè¯­è¨,ä¹ç§°ä¸ºå¼ºç±»å.ä¹å°±æ¯ä¸æ¦å®ä¹äº,å°±ä¸è½åæ¹åå®\n\n\n# unsafe.pointerä¸å®å¨æé\n\nå®è¡¨ç¤ºä»»æç±»åä¸å¯å¯»åçæéå¼,å¯ä»¥å¨ä¸åçæéç±»åä¹é´è¿è¡è½¬æ¢ï¼ç±»ä¼¼ c è¯­è¨ç void * çç¨éï¼ å¶åå«åç§æ ¸å¿æä½ï¼\n\n * ä»»ä½ç±»åçæéå¼é½å¯ä»¥è½¬æ¢ä¸º pointer\n * pointer å¯ä»¥è½¬æ¢ä¸ºä»»ä½ç±»åçæéå¼\n * uintptr å¯ä»¥è½¬æ¢ä¸º pointer\n * pointer å¯ä»¥è½¬æ¢ä¸º uintptr\n\nunsafe.pointer å¯ä»¥è®©æ¨çåéå¨ä¸åçæéç±»åè½¬æ¥è½¬å»,ä¹å°±æ¯è¡¨ç¤ºä¸ºä»»æå¯å¯»åçæéç±»å uintptr å¸¸ç¨äºä¸ unsafe.pointer æéå,ç¨äºåæéè¿ç®",charsets:{cjk:!0}},{title:"go embed",frontmatter:{title:"go embed",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/ebb478/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"go embed"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go embed"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go embed"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/04.go%20embed.html",relativePath:"01.ææ¯æè°/04.golang/04.go embed.md",key:"v-51cd8504",path:"/pages/ebb478/",headersStr:null,content:"embedæ¯å¨Go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã\n\n\n# embedçåºæ¬è¯­æ³\n\nåºæ¬è¯­æ³éå¸¸ç®åï¼é¦åå¯¼å¥embedåï¼ç¶åä½¿ç¨æä»¤//go:embed æä»¶å å°å¯¹åºçæä»¶æç®å½ç»æå¯¼å¥å°å¯¹åºçåéä¸ã",normalizedContent:"embedæ¯å¨go 1.16ä¸­æ°å åãå®éè¿//go:embedæä»¤ï¼å¯ä»¥å¨ç¼è¯é¶æ®µå°éæèµæºæä»¶æåè¿ç¼è¯å¥½çç¨åºä¸­ï¼å¹¶æä¾è®¿é®è¿äºæä»¶çè½åã\n\n\n# embedçåºæ¬è¯­æ³\n\nåºæ¬è¯­æ³éå¸¸ç®åï¼é¦åå¯¼å¥embedåï¼ç¶åä½¿ç¨æä»¤//go:embed æä»¶å å°å¯¹åºçæä»¶æç®å½ç»æå¯¼å¥å°å¯¹åºçåéä¸ã",charsets:{cjk:!0}},{title:"go-å°è£ç»§æ¿åå¤æ",frontmatter:{title:"go-å°è£ç»§æ¿åå¤æ",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/5848e9/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ",meta:[{name:"twitter:title",content:"go-å°è£ç»§æ¿åå¤æ"},{name:"twitter:description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-å°è£ç»§æ¿åå¤æ"},{property:"og:description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-å°è£ç»§æ¿åå¤æ"},{itemprop:"description",content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/05.go-%E5%B0%81%E8%A3%85%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81.html",relativePath:"01.ææ¯æè°/04.golang/05.go-å°è£ç»§æ¿åå¤æ.md",key:"v-0169ea0d",path:"/pages/5848e9/",headersStr:null,content:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ\n\nå°è£ï¼éè¿ç»æä½ä¸­çå¿åå­æ®µæ¥å®ç° ç»§æ¿å¯ä»¥ä½¿ç¨æ¥å£ååµå¥ç»æä½ go ä¸­ï¼å°½ç®¡æ²¡æå¤æï¼ä½æ¯è½å®ç°å¤æç¸åçç¨æ³\n\n\n# ç»§æ¿\n\ntype BaseNum struct {\n     num1 int\n     num2 int\n} // BaseNum å³ä¸ºç¶ç±»ååç§°\n\ntype Add struct {\n    BaseNum\n} //å æ³å­ç±», å®ä¹å æ³å­ç±»çä¸»è¦ç®ç, æ¯ä¸ºäºå®ä¹å¯¹åºå­ç±»çæ¹æ³\n\ntype Sub struct {\n    BaseNum\n} //åæ³å­ç±»\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n//Add åSub å°±æ¯BaseNumçå­ç±»\n\n\n# å°è£\n\nfunc (a *Add)Opt()(value int) {\n    return a.num1 + a.num2\n}//å æ³çæ¹æ³å®ç°\n\nfunc (s *Sub)Opt()(value int) {\n    return s.num1 + s.num2\n}//åæ³çæ¹æ³å®ç°\ntype Opter interface { //æ¥å£å®ä¹\n    Opt()int      //å°è£, å½çº³å­ç±»æ¹æ³, æ³¨ææ­¤å¤éè¦å ä¸è¿åå¼, ä¸ç¶æ²¡æåæ³è¾åºè¿åå¼(å ä¸ºæ¹æ³ä¸­ä½¿ç¨äºè¿åå¼)\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å¤æ\n\nfunc MultiState(o *Opter)(value int) { //å¤æå®ä¹, å¯ä»¥ç®åçè§£ä¸ºä»¥æ¥å£ä½ä¸ºå½¢åçå½æ°, æ¹ä¾¿å­¦ä¹ \n    value = o.Opt()\n    return\n}\n\n// ç»§æ¿\ndata:= BaseNum{2,3}\nvar a Add = Add{data}\nvar b Sub= Sub{data}\n   \n//ä½¿ç¨æ¥å£\nvar i Opter\ni = &a\nvalue := i.Opt()\ni = &b\nvalue := i.Opt()\n\n//ä½¿ç¨å¤æ\nvalue := MultiState(&a)\nvalue := MultiState(&b)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",normalizedContent:"go ä¸­æ²¡æé¢åå¯¹è±¡çè¯´æ³ï¼ä¹æ²¡æå¯¹åºçå°è£ãç»§æ¿åå¤æ\n\nå°è£ï¼éè¿ç»æä½ä¸­çå¿åå­æ®µæ¥å®ç° ç»§æ¿å¯ä»¥ä½¿ç¨æ¥å£ååµå¥ç»æä½ go ä¸­ï¼å°½ç®¡æ²¡æå¤æï¼ä½æ¯è½å®ç°å¤æç¸åçç¨æ³\n\n\n# ç»§æ¿\n\ntype basenum struct {\n     num1 int\n     num2 int\n} // basenum å³ä¸ºç¶ç±»ååç§°\n\ntype add struct {\n    basenum\n} //å æ³å­ç±», å®ä¹å æ³å­ç±»çä¸»è¦ç®ç, æ¯ä¸ºäºå®ä¹å¯¹åºå­ç±»çæ¹æ³\n\ntype sub struct {\n    basenum\n} //åæ³å­ç±»\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n//add åsub å°±æ¯basenumçå­ç±»\n\n\n# å°è£\n\nfunc (a *add)opt()(value int) {\n    return a.num1 + a.num2\n}//å æ³çæ¹æ³å®ç°\n\nfunc (s *sub)opt()(value int) {\n    return s.num1 + s.num2\n}//åæ³çæ¹æ³å®ç°\ntype opter interface { //æ¥å£å®ä¹\n    opt()int      //å°è£, å½çº³å­ç±»æ¹æ³, æ³¨ææ­¤å¤éè¦å ä¸è¿åå¼, ä¸ç¶æ²¡æåæ³è¾åºè¿åå¼(å ä¸ºæ¹æ³ä¸­ä½¿ç¨äºè¿åå¼)\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# å¤æ\n\nfunc multistate(o *opter)(value int) { //å¤æå®ä¹, å¯ä»¥ç®åçè§£ä¸ºä»¥æ¥å£ä½ä¸ºå½¢åçå½æ°, æ¹ä¾¿å­¦ä¹ \n    value = o.opt()\n    return\n}\n\n// ç»§æ¿\ndata:= basenum{2,3}\nvar a add = add{data}\nvar b sub= sub{data}\n   \n//ä½¿ç¨æ¥å£\nvar i opter\ni = &a\nvalue := i.opt()\ni = &b\nvalue := i.opt()\n\n//ä½¿ç¨å¤æ\nvalue := multistate(&a)\nvalue := multistate(&b)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n",charsets:{cjk:!0}},{title:"go-æä»¶æä½",frontmatter:{title:"go-æä»¶æä½",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/b270a4/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")',meta:[{name:"twitter:title",content:"go-æä»¶æä½"},{name:"twitter:description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-æä»¶æä½"},{property:"og:description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-æä»¶æä½"},{itemprop:"description",content:'emptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n_, err := os.Stat("test")'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/06.go-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html",relativePath:"01.ææ¯æè°/04.golang/06.go-æä»¶æä½.md",key:"v-5b58f46b",path:"/pages/b270a4/",headersStr:null,content:'# å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶\n\nemptyFile, err := os.Create("empty.txt")\ndefer emptyFile.Close()\n\n\n1\n2\n\n\n_, err := os.Stat("test")\n \nif os.IsNotExist(err) {\n    errDir := os.MkdirAll("test", 0755)\n    if errDir != nil {\n        log.Fatal(err)\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éå½åæä»¶: os.Rename\n\noldName := "test.txt"\nnewName := "testing.txt"\nerr := os.Rename(oldName, newName)\n\n\n1\n2\n3\n\n\n\n# ç§»å¨æä»¶: os.Rename\n\noldLocation := "/var/www/html/test.txt"\nnewLocation := "/var/www/html/src/test.txt"\nerr := os.Rename(oldLocation, newLocation)\n\n\n1\n2\n3\n\n\n\n# å¤å¶æä»¶: io.Copy\n\nsourceFile, err := os.Open("/var/www/html/src/test.txt")\ndefer sourceFile.Close()\nnewFile, err := os.Create("/var/www/html/test.txt")\ndefer newFile.Close()\nbytesCopied, err := io.Copy(newFile, sourceFile)\n\n\n1\n2\n3\n4\n5\n\n\n\n# è·åæä»¶çmetadataä¿¡æ¯: os.Stat()\n\nfileStat, err := os.Stat("test.txt")\nfmt.Println("File Name:", fileStat.Name())        // Base name of the file\nfmt.Println("Size:", fileStat.Size())             // Length in bytes for regular files\nfmt.Println("Permissions:", fileStat.Mode())      // File mode bits\nfmt.Println("Last Modified:", fileStat.ModTime()) // Last modification time\nfmt.Println("Is Directory: ", fileStat.IsDir())   // Abbreviation for Mode().IsDir()\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å é¤æä»¶: os.Remove()\n\n\n# è¯»åæä»¶å­ç¬¦: bufio.NewScanner()\n\nfilebuffer, err := ioutil.ReadFile(filename)\ninputdata := string(filebuffer)\ndata := bufio.NewScanner(strings.NewReader(inputdata))\ndata.Split(bufio.ScanRunes)\nfor data.Scan() {\n    fmt.Print(data.Text())\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# æ¸é¤æä»¶: os.Truncate()\n\nè£åªä¸ä¸ªæä»¶å°100ä¸ªå­è. å¦ææä»¶æ¬æ¥å°±å°äº100ä¸ªå­è,åæä»¶ä¸­åå§åå®¹å¾ä»¥ä¿ç,å©ä½çå­èä»¥nullå­èå¡«å. å¦ææä»¶æ¬æ¥è¶è¿100ä¸ªå­è,åè¶è¿çå­èä¼è¢«æå¼. è¿æ ·æä»¬æ»æ¯å¾å°ç²¾ç¡®ç100ä¸ªå­èçæä»¶. ä¼ å¥0åä¼æ¸ç©ºæä»¶.\n\n\n# åæä»¶æ·»å åå®¹\n\nf, err := os.OpenFile(filename, os.O_RDWR|os.O_APPEND|os.O_CREATE, 0660)\nfmt.Fprintf(f, "%s\\n", message)\n\n\n1\n2\n\n\n\n# ä¿®æ¹æä»¶æé,æ¶é´æ³\n\nerr = os.Chmod("test.txt", 0777)\nerr = os.Chown("test.txt", os.Getuid(), os.Getgid())\nerr = os.Chtimes("test.txt", lastAccessTime, lastModifyTime)\n\n\n1\n2\n3\n\n\n\n# zipæä½ "archive/zip"\n\n * åç¼©æä»¶å°ZIPæ ¼å¼\n * è¯»åZIPæä»¶éé¢çæä»¶\n * è§£åZIPæä»¶',normalizedContent:'# å¤æ­æä»¶æ¯å¦å­å¨/åå»ºç©ºæä»¶\n\nemptyfile, err := os.create("empty.txt")\ndefer emptyfile.close()\n\n\n1\n2\n\n\n_, err := os.stat("test")\n \nif os.isnotexist(err) {\n    errdir := os.mkdirall("test", 0755)\n    if errdir != nil {\n        log.fatal(err)\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éå½åæä»¶: os.rename\n\noldname := "test.txt"\nnewname := "testing.txt"\nerr := os.rename(oldname, newname)\n\n\n1\n2\n3\n\n\n\n# ç§»å¨æä»¶: os.rename\n\noldlocation := "/var/www/html/test.txt"\nnewlocation := "/var/www/html/src/test.txt"\nerr := os.rename(oldlocation, newlocation)\n\n\n1\n2\n3\n\n\n\n# å¤å¶æä»¶: io.copy\n\nsourcefile, err := os.open("/var/www/html/src/test.txt")\ndefer sourcefile.close()\nnewfile, err := os.create("/var/www/html/test.txt")\ndefer newfile.close()\nbytescopied, err := io.copy(newfile, sourcefile)\n\n\n1\n2\n3\n4\n5\n\n\n\n# è·åæä»¶çmetadataä¿¡æ¯: os.stat()\n\nfilestat, err := os.stat("test.txt")\nfmt.println("file name:", filestat.name())        // base name of the file\nfmt.println("size:", filestat.size())             // length in bytes for regular files\nfmt.println("permissions:", filestat.mode())      // file mode bits\nfmt.println("last modified:", filestat.modtime()) // last modification time\nfmt.println("is directory: ", filestat.isdir())   // abbreviation for mode().isdir()\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å é¤æä»¶: os.remove()\n\n\n# è¯»åæä»¶å­ç¬¦: bufio.newscanner()\n\nfilebuffer, err := ioutil.readfile(filename)\ninputdata := string(filebuffer)\ndata := bufio.newscanner(strings.newreader(inputdata))\ndata.split(bufio.scanrunes)\nfor data.scan() {\n    fmt.print(data.text())\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# æ¸é¤æä»¶: os.truncate()\n\nè£åªä¸ä¸ªæä»¶å°100ä¸ªå­è. å¦ææä»¶æ¬æ¥å°±å°äº100ä¸ªå­è,åæä»¶ä¸­åå§åå®¹å¾ä»¥ä¿ç,å©ä½çå­èä»¥nullå­èå¡«å. å¦ææä»¶æ¬æ¥è¶è¿100ä¸ªå­è,åè¶è¿çå­èä¼è¢«æå¼. è¿æ ·æä»¬æ»æ¯å¾å°ç²¾ç¡®ç100ä¸ªå­èçæä»¶. ä¼ å¥0åä¼æ¸ç©ºæä»¶.\n\n\n# åæä»¶æ·»å åå®¹\n\nf, err := os.openfile(filename, os.o_rdwr|os.o_append|os.o_create, 0660)\nfmt.fprintf(f, "%s\\n", message)\n\n\n1\n2\n\n\n\n# ä¿®æ¹æä»¶æé,æ¶é´æ³\n\nerr = os.chmod("test.txt", 0777)\nerr = os.chown("test.txt", os.getuid(), os.getgid())\nerr = os.chtimes("test.txt", lastaccesstime, lastmodifytime)\n\n\n1\n2\n3\n\n\n\n# zipæä½ "archive/zip"\n\n * åç¼©æä»¶å°zipæ ¼å¼\n * è¯»åzipæä»¶éé¢çæä»¶\n * è§£åzipæä»¶',charsets:{cjk:!0}},{title:"go-json",frontmatter:{title:"go-json",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/417389/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"go-json"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-json"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-json"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/07.go-json.html",relativePath:"01.ææ¯æè°/04.golang/07.go-json.md",key:"v-92ed690a",path:"/pages/417389/",headers:[{level:2,title:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty",slug:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µ-omitempty",normalizedTitle:"ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty",charIndex:366},{level:2,title:"å¿½ç¥ä¸äºå­æ®µ: -",slug:"å¿½ç¥ä¸äºå­æ®µ",normalizedTitle:"å¿½ç¥ä¸äºå­æ®µ: -",charIndex:532},{level:2,title:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ:",slug:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ",normalizedTitle:"ä¸´æ¶æ·»å é¢å¤çå­æ®µ:",charIndex:645},{level:2,title:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",slug:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",normalizedTitle:"ä¸´æ¶ç²åä¸¤ä¸ªstruct",charIndex:858},{level:2,title:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo",slug:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct-todo",normalizedTitle:"ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo",charIndex:1163},{level:2,title:'ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"',slug:"ç¨å­ç¬¦ä¸²ä¼ éæ°å­-json-string",normalizedTitle:"ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:&quot;,string&quot;",charIndex:null}],headersStr:'ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty å¿½ç¥ä¸äºå­æ®µ: - ä¸´æ¶æ·»å é¢å¤çå­æ®µ: ä¸´æ¶ç²åä¸¤ä¸ªstruct ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"',content:'Json(Javascript Object Nanotation)æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼å¸¸ç¨äºååç«¯æ°æ®ä¼ è¾ã goè¯­è¨æ¬èº«ä¸ºæä»¬æä¾äºjsonçå·¥å·åâencoding/jsonâ\n\n\n# å®å¶JSONåºåå\n\nJson Marshalï¼å°æ°æ®ç¼ç æjsonå­ç¬¦ä¸²\n\n    jsonStu, err := json.Marshal(stu)\n\n\n1\n\n\njson.Unmarshal: ååºåçå½æ°ï¼å°jsonå­ç¬¦ä¸²è§£ç å°ç¸åºçæ°æ®ç»æï¼\n\n    jsonstr := `{"a":"aaa","b":"bbb"}`\n    map1 := make(map[string]interface{})\n    err := json.Unmarshal([]byte(jsonstr), &map1)\n\n\n1\n2\n3\n\n\n\n# ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty\n\njson.Marshal(struct {\n    *User\n    Password bool `json:"password,omitempty"`  //å¿½ç¥è¯¥å­æ®µ\n    }{\n        User: user,\n    })\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å¿½ç¥ä¸äºå­æ®µ: -\n\njson.Marshal(struct {\n    *User\n    Password bool `json:"-"`\n}{\n    User: user,\n})\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# ä¸´æ¶æ·»å é¢å¤çå­æ®µ:\n\njson.Marshal(struct {\n    *User\n    Token    string `json:"token"`  //æ·»å è¯¥å­æ®µ\n    Password bool `json:"password,omitempty"`\n    }{\n        User: user,\n        Token: token,\n    })\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä¸´æ¶ç²åä¸¤ä¸ªstruct\n\ntype BlogPost struct {\n    URL   string `json:"url"`\n    Title string `json:"title"`\n}\ntype Analytics struct {\n    Visitors  int `json:"visitors"`\n    PageViews int `json:"page_views"`\n}\njson.Marshal(struct{\n    *BlogPost\n    *Analytics\n}{post, analytics})\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo\n\n\n# ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"\n\ntype TestObject struct {\n    Field1 int    `json:",string"`\n}\n\n\n1\n2\n3\n',normalizedContent:'json(javascript object nanotation)æ¯ä¸ç§æ°æ®äº¤æ¢æ ¼å¼ï¼å¸¸ç¨äºååç«¯æ°æ®ä¼ è¾ã goè¯­è¨æ¬èº«ä¸ºæä»¬æä¾äºjsonçå·¥å·åâencoding/jsonâ\n\n\n# å®å¶jsonåºåå\n\njson marshalï¼å°æ°æ®ç¼ç æjsonå­ç¬¦ä¸²\n\n    jsonstu, err := json.marshal(stu)\n\n\n1\n\n\njson.unmarshal: ååºåçå½æ°ï¼å°jsonå­ç¬¦ä¸²è§£ç å°ç¸åºçæ°æ®ç»æï¼\n\n    jsonstr := `{"a":"aaa","b":"bbb"}`\n    map1 := make(map[string]interface{})\n    err := json.unmarshal([]byte(jsonstr), &map1)\n\n\n1\n2\n3\n\n\n\n# ä¸´æ¶å¿½ç¥structç©ºå­æ®µï¼ omitempty\n\njson.marshal(struct {\n    *user\n    password bool `json:"password,omitempty"`  //å¿½ç¥è¯¥å­æ®µ\n    }{\n        user: user,\n    })\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# å¿½ç¥ä¸äºå­æ®µ: -\n\njson.marshal(struct {\n    *user\n    password bool `json:"-"`\n}{\n    user: user,\n})\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# ä¸´æ¶æ·»å é¢å¤çå­æ®µ:\n\njson.marshal(struct {\n    *user\n    token    string `json:"token"`  //æ·»å è¯¥å­æ®µ\n    password bool `json:"password,omitempty"`\n    }{\n        user: user,\n        token: token,\n    })\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ä¸´æ¶ç²åä¸¤ä¸ªstruct\n\ntype blogpost struct {\n    url   string `json:"url"`\n    title string `json:"title"`\n}\ntype analytics struct {\n    visitors  int `json:"visitors"`\n    pageviews int `json:"page_views"`\n}\njson.marshal(struct{\n    *blogpost\n    *analytics\n}{post, analytics})\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# ä¸ä¸ªjsonååæä¸¤ä¸ªstruct: todo\n\n\n# ç¨å­ç¬¦ä¸²ä¼ éæ°å­: json:",string"\n\ntype testobject struct {\n    field1 int    `json:",string"`\n}\n\n\n1\n2\n3\n',charsets:{cjk:!0}},{title:"go-sliceåç",frontmatter:{title:"go-sliceåç",date:"2022-07-27T14:56:54.000Z",permalink:"/pages/1d629a/",categories:["ææ¯æè°","golang"],tags:[null],titleTag:"åå",readingShow:"top",description:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å",meta:[{name:"twitter:title",content:"go-sliceåç"},{name:"twitter:description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html"},{property:"og:type",content:"article"},{property:"og:title",content:"go-sliceåç"},{property:"og:description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:54.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"go-sliceåç"},{itemprop:"description",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/04.golang/08.go-slice%E5%88%87%E7%89%87.html",relativePath:"01.ææ¯æè°/04.golang/08.go-sliceåç.md",key:"v-d695f1cc",path:"/pages/1d629a/",headers:[{level:2,title:"Slice çåå»ºæ¹å¼ï¼",slug:"slice-çåå»ºæ¹å¼",normalizedTitle:"slice çåå»ºæ¹å¼ï¼",charIndex:522}],headersStr:"Slice çåå»ºæ¹å¼ï¼",content:"å¨ Go ä¸­,Sliceï¼åçï¼æ¯æ½è±¡å¨ Arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å\n\n\n# Arrayæ°ç»\n\n[3]int{} è¡¨ç¤º 3 ä¸ªæ´æ°çæ°ç»\n\n\n# Sliceåç\n\ntype slice struct {\n\tarray unsafe.Pointer\n\tlen   int\n\tcap   int\n}\n\n\n1\n2\n3\n4\n5\n\n\nSlice çåºå±æ°æ®ç»æå±åä¸ºä¸é¨å,å¦ä¸ï¼\n\n * arrayï¼æåæå¼ç¨çæ°ç»æéï¼unsafe.Pointer å¯ä»¥è¡¨ç¤ºä»»ä½å¯å¯»åçå¼çæéï¼\n * lenï¼é¿åº¦,å½åå¼ç¨åççåç´ ä¸ªæ°\n * capï¼å®¹é,å½åå¼ç¨åççå®¹éï¼åºå±æ°ç»çåç´ æ»æ°ï¼ å¨å®éä½¿ç¨ä¸­,cap ä¸å®æ¯å¤§äºæç­äº len ç.å¦åä¼å¯¼è´ panic\n\nnums := [3]int{}\nnums[0] = 1\ndnums := nums[0:2]\n# nums: [1 0 0] \n# dnums: [1 0], len: 2, cap: 3\n\n\n1\n2\n3\n4\n5\n\n\nSlice æ¯å¯¹ Array çæ½è±¡,ç±»åä¸º []T dnums åééè¿ nums[:] è¿è¡èµå¼ dnums åééè¿ nums[:] è¿è¡èµå¼\n\n\n# Slice çåå»ºæ¹å¼ï¼\n\n * test := []int{2,3}\n * test := make([]int, 5, 5) // åå»ºä¸ä¸ªç±»åä¸º intï¼é¿åº¦ä¸º 5ï¼å®¹éä¸º 5 çåç\n * test1 := make([]int, 3) //å¦æä¸æå®å®¹éï¼é»è®¤å®¹éç­äºåå§æ¶çé¿åº¦\n * test := make([]int,0) // åå»ºä¸ä¸ªé¿åº¦ä¸º0ï¼å®¹éä¸º0 çæ°ç» test = append(test, 1) //å½æ°ç»çå®¹éä¸å¤æ¶ï¼ä¼éæ°ç³è¯·ä¸ä¸ªä¸¤åäºå½åé¿åº¦ç sliceï¼æä»¥å¨ä½¿ç¨è¿ç¨ä¸­ï¼å°¤å¶æ¯é¢ç¹å»å¾ä¸ä¸ª slice ä¸­ append æ°æ®ï¼éè¦å°½å¯è½ç»ä¸ä¸ªç¸å¯¹åç¡®çå®¹éï¼ åå°åéè¿ç¨çæèã",normalizedContent:"å¨ go ä¸­,sliceï¼åçï¼æ¯æ½è±¡å¨ arrayï¼æ°ç»ï¼ä¹ä¸çç¹æ®ç±»å\n\n\n# arrayæ°ç»\n\n[3]int{} è¡¨ç¤º 3 ä¸ªæ´æ°çæ°ç»\n\n\n# sliceåç\n\ntype slice struct {\n\tarray unsafe.pointer\n\tlen   int\n\tcap   int\n}\n\n\n1\n2\n3\n4\n5\n\n\nslice çåºå±æ°æ®ç»æå±åä¸ºä¸é¨å,å¦ä¸ï¼\n\n * arrayï¼æåæå¼ç¨çæ°ç»æéï¼unsafe.pointer å¯ä»¥è¡¨ç¤ºä»»ä½å¯å¯»åçå¼çæéï¼\n * lenï¼é¿åº¦,å½åå¼ç¨åççåç´ ä¸ªæ°\n * capï¼å®¹é,å½åå¼ç¨åççå®¹éï¼åºå±æ°ç»çåç´ æ»æ°ï¼ å¨å®éä½¿ç¨ä¸­,cap ä¸å®æ¯å¤§äºæç­äº len ç.å¦åä¼å¯¼è´ panic\n\nnums := [3]int{}\nnums[0] = 1\ndnums := nums[0:2]\n# nums: [1 0 0] \n# dnums: [1 0], len: 2, cap: 3\n\n\n1\n2\n3\n4\n5\n\n\nslice æ¯å¯¹ array çæ½è±¡,ç±»åä¸º []t dnums åééè¿ nums[:] è¿è¡èµå¼ dnums åééè¿ nums[:] è¿è¡èµå¼\n\n\n# slice çåå»ºæ¹å¼ï¼\n\n * test := []int{2,3}\n * test := make([]int, 5, 5) // åå»ºä¸ä¸ªç±»åä¸º intï¼é¿åº¦ä¸º 5ï¼å®¹éä¸º 5 çåç\n * test1 := make([]int, 3) //å¦æä¸æå®å®¹éï¼é»è®¤å®¹éç­äºåå§æ¶çé¿åº¦\n * test := make([]int,0) // åå»ºä¸ä¸ªé¿åº¦ä¸º0ï¼å®¹éä¸º0 çæ°ç» test = append(test, 1) //å½æ°ç»çå®¹éä¸å¤æ¶ï¼ä¼éæ°ç³è¯·ä¸ä¸ªä¸¤åäºå½åé¿åº¦ç sliceï¼æä»¥å¨ä½¿ç¨è¿ç¨ä¸­ï¼å°¤å¶æ¯é¢ç¹å»å¾ä¸ä¸ª slice ä¸­ append æ°æ®ï¼éè¦å°½å¯è½ç»ä¸ä¸ªç¸å¯¹åç¡®çå®¹éï¼ åå°åéè¿ç¨çæèã",charsets:{cjk:!0}},{title:"kataåºæ¬åçä¸æ¶æ",frontmatter:{title:"kataåºæ¬åçä¸æ¶æ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/276ee1/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã",meta:[{name:"image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{name:"twitter:title",content:"kataåºæ¬åçä¸æ¶æ"},{name:"twitter:description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataåºæ¬åçä¸æ¶æ"},{property:"og:description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{property:"og:image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataåºæ¬åçä¸æ¶æ"},{itemprop:"description",content:"â\t\tKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã"},{itemprop:"image",content:"https://fangfenghuang.github.io/../images/20220330151918.png"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/01.kata%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9E%B6%E6%9E%84.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.md",key:"v-54d78b23",path:"/pages/276ee1/",headers:[{level:2,title:"The speed of containers, the security of VMs",slug:"the-speed-of-containers-the-security-of-vms",normalizedTitle:"the speed of containers, the security of vms",charIndex:498},{level:2,title:"é¡¹ç®æè·¯ï¼",slug:"é¡¹ç®æè·¯",normalizedTitle:"é¡¹ç®æè·¯ï¼",charIndex:766},{level:2,title:"å®å¨éç¦»",slug:"å®å¨éç¦»",normalizedTitle:"å®å¨éç¦»",charIndex:1046},{level:2,title:"kataéç¦»æç",slug:"kataéç¦»æç",normalizedTitle:"kataéç¦»æç",charIndex:1151},{level:2,title:"åå°èæåå¼é",slug:"åå°èæåå¼é",normalizedTitle:"åå°èæåå¼é",charIndex:1543},{level:2,title:"ææ ·æ¥ä¸å®¹å¨ççæ",slug:"ææ ·æ¥ä¸å®¹å¨ççæ",normalizedTitle:"ææ ·æ¥ä¸å®¹å¨ççæ",charIndex:1716},{level:2,title:"åä¼ ç»çrunCçåºå«",slug:"åä¼ ç»çruncçåºå«",normalizedTitle:"åä¼ ç»çruncçåºå«",charIndex:1896},{level:2,title:"ä½¿ç¨åºæ¯",slug:"ä½¿ç¨åºæ¯",normalizedTitle:"ä½¿ç¨åºæ¯",charIndex:2036},{level:2,title:"Kata Containers 2.x vs 1.x",slug:"kata-containers-2-x-vs-1-x",normalizedTitle:"kata containers 2.x vs 1.x",charIndex:2686},{level:2,title:"kata Runtime (shimv2)",slug:"kata-runtime-shimv2",normalizedTitle:"kata runtime (shimv2)",charIndex:3249},{level:2,title:"kata-agent",slug:"kata-agent",normalizedTitle:"kata-agent",charIndex:3767},{level:2,title:"èæåææ¯",slug:"èæåææ¯",normalizedTitle:"èæåææ¯",charIndex:3974},{level:3,title:"hypervisor",slug:"hypervisor",normalizedTitle:"hypervisor",charIndex:4182},{level:4,title:"qemu-system-x86_64",slug:"qemu-system-x86-64",normalizedTitle:"qemu-system-x86_64",charIndex:4502},{level:3,title:"cgroup",slug:"cgroup",normalizedTitle:"cgroup",charIndex:4555},{level:3,title:"å®¢æ·æºåæ ¸åéå",slug:"å®¢æ·æºåæ ¸åéå",normalizedTitle:"å®¢æ·æºåæ ¸åéå",charIndex:4583},{level:3,title:"ç½ç»åå­å¨",slug:"ç½ç»åå­å¨",normalizedTitle:"ç½ç»åå­å¨",charIndex:4622},{level:3,title:"CPUååå­",slug:"cpuååå­",normalizedTitle:"cpuååå­",charIndex:4653},{level:3,title:"VSOCK",slug:"vsock",normalizedTitle:"vsock",charIndex:2013},{level:3,title:"kata monitor",slug:"kata-monitor",normalizedTitle:"kata monitor",charIndex:4698},{level:2,title:"ææ¯è¦ç¹æ»ç»",slug:"ææ¯è¦ç¹æ»ç»",normalizedTitle:"ææ¯è¦ç¹æ»ç»",charIndex:4737},{level:2,title:"é¨ç½²ç»ä»¶ï¼",slug:"é¨ç½²ç»ä»¶",normalizedTitle:"é¨ç½²ç»ä»¶ï¼",charIndex:5153},{level:2,title:"å®¹å¨åå»ºæµç¨",slug:"å®¹å¨åå»ºæµç¨",normalizedTitle:"å®¹å¨åå»ºæµç¨",charIndex:5443},{level:2,title:"ç¯å¢è¦æ±ï¼",slug:"ç¯å¢è¦æ±",normalizedTitle:"ç¯å¢è¦æ±ï¼",charIndex:5823},{level:2,title:"å¯¹èµæºç®¡ççä¸äºå½±å",slug:"å¯¹èµæºç®¡ççä¸äºå½±å",normalizedTitle:"å¯¹èµæºç®¡ççä¸äºå½±å",charIndex:5908},{level:2,title:"å­å¨éå¶ï¼",slug:"å­å¨éå¶",normalizedTitle:"å­å¨éå¶ï¼",charIndex:6115},{level:2,title:"ä¸»æºèµæºå±äº«é®é¢",slug:"ä¸»æºèµæºå±äº«é®é¢",normalizedTitle:"ä¸»æºèµæºå±äº«é®é¢",charIndex:6316},{level:3,title:"Privileged containers",slug:"privileged-containers",normalizedTitle:"privileged containers",charIndex:6455},{level:2,title:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",slug:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",normalizedTitle:"dockeråæ¢æcontainerdçä½¿ç¨å½±å",charIndex:6947},{level:2,title:"éåï¼",slug:"éå",normalizedTitle:"éåï¼",charIndex:6976},{level:2,title:"ç½ç»éå¶",slug:"ç½ç»éå¶",normalizedTitle:"ç½ç»éå¶",charIndex:7334},{level:2,title:"èµæºçº¦æç®¡ç",slug:"èµæºçº¦æç®¡ç",normalizedTitle:"èµæºçº¦æç®¡ç",charIndex:7688},{level:2,title:"åå­ç¸å³é®é¢ï¼",slug:"åå­ç¸å³é®é¢",normalizedTitle:"åå­ç¸å³é®é¢ï¼",charIndex:7820},{level:2,title:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",slug:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",normalizedTitle:"runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é",charIndex:7891},{level:2,title:"Sandboxä¸Container",slug:"sandboxä¸container",normalizedTitle:"sandboxä¸container",charIndex:8296},{level:2,title:"k8sådockeråéæ¬é³çæäº(v1.23ä¹å)",slug:"k8sådockeråéæ¬é³çæäº-v1-23ä¹å",normalizedTitle:"k8sådockeråéæ¬é³çæäº(v1.23ä¹å)",charIndex:8471},{level:2,title:"docker vs containerd",slug:"docker-vs-containerd",normalizedTitle:"docker vs containerd",charIndex:8948},{level:2,title:"Kata Containers ä¸ gVisor",slug:"kata-containers-ä¸-gvisor",normalizedTitle:"kata containers ä¸ gvisor",charIndex:9332},{level:2,title:"runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢",slug:"runcå®¹å¨çå®å¨æ§-éç¦»-é®é¢",normalizedTitle:"runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢",charIndex:9839},{level:2,title:"çæ³çå¤ç§æ·ç¶æ",slug:"çæ³çå¤ç§æ·ç¶æ",normalizedTitle:"çæ³çå¤ç§æ·ç¶æ",charIndex:10085},{level:2,title:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",slug:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",normalizedTitle:"k8sçåçå¤ç§æ·è§£å³æ¹æ¡",charIndex:10328},{level:2,title:"kata vs container",slug:"kata-vs-container",normalizedTitle:"kata vs container",charIndex:10503},{level:2,title:"kata vs VMï¼openstackï¼",slug:"kata-vs-vm-openstack",normalizedTitle:"kata vs vmï¼openstackï¼",charIndex:10527},{level:2,title:"kata vs kubevirt",slug:"kata-vs-kubevirt",normalizedTitle:"kata vs kubevirt",charIndex:10555}],headersStr:"The speed of containers, the security of VMs é¡¹ç®æè·¯ï¼ å®å¨éç¦» kataéç¦»æç åå°èæåå¼é ææ ·æ¥ä¸å®¹å¨ççæ åä¼ ç»çrunCçåºå« ä½¿ç¨åºæ¯ Kata Containers 2.x vs 1.x kata Runtime (shimv2) kata-agent èæåææ¯ hypervisor qemu-system-x86_64 cgroup å®¢æ·æºåæ ¸åéå ç½ç»åå­å¨ CPUååå­ VSOCK kata monitor ææ¯è¦ç¹æ»ç» é¨ç½²ç»ä»¶ï¼ å®¹å¨åå»ºæµç¨ ç¯å¢è¦æ±ï¼ å¯¹èµæºç®¡ççä¸äºå½±å å­å¨éå¶ï¼ ä¸»æºèµæºå±äº«é®é¢ Privileged containers dockeråæ¢æcontainerdçä½¿ç¨å½±å éåï¼ ç½ç»éå¶ èµæºçº¦æç®¡ç åå­ç¸å³é®é¢ï¼ runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é Sandboxä¸Container k8sådockeråéæ¬é³çæäº(v1.23ä¹å) docker vs containerd Kata Containers ä¸ gVisor runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢ çæ³çå¤ç§æ·ç¶æ k8sçåçå¤ç§æ·è§£å³æ¹æ¡ kata vs container kata vs VMï¼openstackï¼ kata vs kubevirt",content:'# å®å¨å®¹å¨-Kata containers\n\nå®å¨å®¹å¨4ç±»æ¹æ¡ï¼\n\n * ä¼ ç»OSå®¹å¨éåå®å¨æºå¶ï¼runc + SELinux, AppArmor, â¦ + rootless modeï¼\n * ç¨æ·æåæ ¸çå®¹å¨ï¼GoogleçgVisorï¼\n * Library OSï¼UniKernelãNabla Containersï¼\n * è½»éèæåçå®¹å¨ï¼Kata ContainersãFirecrackerï¼ã\n\nKata Containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âIntelClear ContainersâåâHyper runVâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çVMï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã\n\nKataContainersç¤¾åºäº2018å¹´5æåå¸äºç¬¬ä¸ç1.0ãç±äºKataå®¹å¨è¿è¡æ¶å¼å®¹OCIï¼å®å¯ä»¥æ ç¼å°æå¥Dockerå¼æåä»»ä½å¶ä»å®¹å¨ç®¡çå¹³å°ï¼å¦KubernetesåOpen-Stackï¼åªéç®åå°å°RUNCæ¿æ¢ä¸ºKata-runtimeã\n\nKata Containers çæ¬è´¨å°±æ¯ä¸ä¸ªç²¾ç®åçè½»éçº§èææºã\n\n\n# The speed of containers, the security of VMs\n\nå®å¨ä½ç°å¨:\n\nå¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ãI/O ååå­çéç¦»ï¼å¹¶ä¸å¯ä»¥å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»åèæå VT æ©å±ã\n\nå®¹å¨ä½ç°å¨ï¼\n\nå¼å®¹æ§ä¸ï¼æ¯æOCIä»¥åCRIæ¥å£ï¼åå®¹å¨ä¸æ ·æä½ã æ§è½ä¸ï¼å¯å¨éåº¦è¾¾å°ç¾æ¯«ç§çº§ï¼æ¥è¿å®¹å¨ã å¼éä¸ï¼åå­å¼éå°ï¼ç±»ä¼¼å®¹å¨ã ä¸KubernetesåDockeræ ç¼è¡æ¥ï¼å¹¶ä¸æ¯runcçæ¿ä»£å å¼æºåºç¡è®¾æ½åºéä¼ä¸çå¼æºæ²»çé¡¹ç® å¤æ¶ææ¯æï¼x86ãARMãIBM PowerãIBM s/390x\n\n\n# é¡¹ç®æè·¯ï¼\n\n 1. æä½ç³»ç»æ¬èº«çå®¹å¨æºå¶æ²¡åæ³è§£å³å®å¨æ§é®é¢ï¼éè¦ä¸ä¸ªéç¦»å±ï¼\n 2. èææºæ¯ä¸ä¸ªç°æçéç¦»å±ï¼AWSè¿æ ·çäºæå¡å·²ç»è®©å¨ä¸çç¸ä¿¡ï¼å¯¹æ·æ¥è¯´ï¼"secure of VM" æ¯å¯ä»¥æ»¡è¶³éæ±çï¼\n 3. èæºéé¢åªè¦æä¸ªåæ ¸ï¼å°±å¯ä»¥æ¯æ OCI è§èçè¯­ä¹ï¼å¨åæ ¸ä¸è·ä¸ª Linux åºç¨è¿å¹¶ä¸å¤ªé¾å®ç°ï¼\n 4. èæºå¯è½ä¸å¤å¿«ï¼é»ç¢äºå®å¨å®¹å¨ç¯å¢çåºç¨ï¼é£ä¹å¯ä¸å¯ä»¥æ¥æ "speed of container" å¢ï¼ ç°å¨ï¼å¦ææåä¸ä¸ªé®é¢å¯ä»¥è§£å³ï¼é£ä¹å®å°±æ¯æä»¬è¦çâå®å¨çå®¹å¨âäºââè¿å°±æ¯ Kata Containersã\n\n\n# å®å¨éç¦»\n\nå®å¨æ§é®é¢90%ä»¥ä¸å¯ä»¥å½ç»ä¸ºéç¦»æ§é®é¢\n\n * Dockerå®å¨éç¦»é®é¢\n\n * å¨Kata Containersä¸­ï¼æ¯ä¸ªå®¹å¨é½æèªå·±çè½»éçº§èææºåå°åæ ¸ï¼éè¿ç¡¬ä»¶èæåæä¾å®¹å¨éç¦»ã\n\n\n# kataéç¦»æç\n\nkata å®éä¸æ¯éè¿åå»ºè½»éçº§èææºå®ç°å®¹å¨ä¹é´çèµæºéç¦»ï¼åå¨èææºä¸­è¿è¡å®¹å¨è¿è¡æ¶ï¼è¿æ ·å°±ä½¿å®¹å¨å¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ï¼I / Oååå­çéç¦»ï¼å¹¶å¯ä»¥éè¿èæåVTæ©å±å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»ã\n\nä¼ ç»çæä½ç³»ç»å®¹å¨ææ¯æ¯åæ ¸è¿ç¨ç®¡ççä¸ä¸ªå»¶ä¼¸ï¼å®¹å¨è¿ç¨æ¬èº«æ¯ä¸ç»å³èçè¿ç¨ï¼å¯¹äºå®¿ä¸»æºçè°åº¦å¨æ¥è¯´æ¯å®å¨å¯è§çï¼ä¸ä¸ª Pod éçææå®¹å¨æè¿ç¨ï¼åæ¶ä¹é½è¢«å®¿ä¸»æºè°åº¦åç®¡çãè¿å°±æå³çï¼å¨æå¤§éå®¹å¨çç¯å¢ä¸ï¼å®¿ä¸»æºåæ ¸çè´æå¾éãèéçº³å®å¨å®¹å¨ä¹åï¼ä»å®¿ä¸»æºä¸æ¯çä¸å°è¿äºå®æ´çä¿¡æ¯çï¼éç¦»å±åæ¶ä¹éä½äºå®¿ä¸»æºçè°åº¦å¼éï¼åå°äºç»´æ¤è´æï¼é¿åäºå®¹å¨ä¹é´ãå®¹å¨åå®¿ä¸»æºä¹é´çæå¡è´¨éå¹²æ°ã\n\nå®å¨å®¹å¨ä½ä¸ºä¸éå±éï¼å¯ä»¥è®©å®¿ä¸»æºçè¿ç»´ç®¡çæä½ä¸è½ç´æ¥è®¿é®å°åºç¨çæ°æ®ï¼è¿æ ·ï¼æç¨æ·çåºç¨æ°æ®ç´æ¥ä¿æ¤å¨æ²ç®±éå°±å¯ä»¥éä½å¯¹ç¨æ·çææè¦æ±ï¼ä¿éç¨æ·çæ°æ®ç§å¯æ§ã\n\n\n# åå°èæåå¼é\n\n * éè¿âå°ç¨ä¸å¿è¦çåå­âåâå±äº«è½å±äº«çåå­âæ¥éä½åå­çå¼éï¼æ´å°çåå­ä¸ä»å¼éæ´å°ï¼å¯å¨ä¹æ´è½»å¿«\n\n * æå³é®çæ§è½ä¼åæ¥èªIntel Clear Containersã\n\n * æå³é®çä¼åå¶å®å°±æ¯VMçå¯å¨æ¶é´è¿è¡è£åªï¼ä¼åã\n\n * ä½¿ç¨ç¹å®çLinuxåæ ¸ï¼ä½¿ç¨ç®åçinitrdä»¥årootfsã\n\n\n# ææ ·æ¥ä¸å®¹å¨ççæ\n\nkata-containerså®æ¬è´¨ä¸å°±ä¸ä¸ªå®¹å¨çruntimeãåªè¦å®ç°äºOCIçæ¥å£å°±å¯ä»¥æ¥ä¸é£äºå®¹å¨ç®¡çå·¥å·ï¼åªè¦å®ç°äºCRIæ¥å£ï¼å°±å¯ä»¥æ¥ä¸k8sã\n\næä»¥kata-containersä¸OCIè¿è¡æ¶è§èå¼å®¹ï¼å¯ä»¥éè¿CRI-OåContainerdå®ç°ä¸ Kubernetes CRIè¿è¡æ ç¼åä½ãï¼Shim APIï¼\n\n\n# åä¼ ç»çrunCçåºå«\n\næå¤§çåºå«å°±å¨äºcontaineræ¯æ¾å¨èææºéé¢è¿è¡çï¼ä¸­é´å¤äºä¸å±kernelåï¼å¤é¢çå®¹å¨ç®¡çè½¯ä»¶å°±æ æ³ç®¡çï¼çæ§éé¢çè¿ç¨ãå®¹å¨ï¼ä¹æ æ³åéé¢éä¿¡ã è§£å³æ¹æ¡å°±æ¯å¨VMéé¢æ¾äºä¸ä¸ªagentï¼åå¤éè¿VSOCKéä¿¡ï¼è¿æ ·å­åå¤å°±æéäºã\n\n\n# ä½¿ç¨åºæ¯\n\n * ä¸»è¦ä½¿ç¨åºæ¯æ¯å¨å¬æäºæ¨¡å¼\n\n * è£¸éå±åºç¡è®¾æ½\n\n * æ··åå·¥ä½è´è½½çäº§ç¯å¢\n\n * çç®¡åææççäº§ç¯å¢\n\n * å¤ç§æ·å®¹å¨éç¾¤\n\n * å·æåæ ¸ç¸å³åè½çéççä¾èµåæ ¸çå·¥ä½è´è½½\n\n\n# æ¶æï¼Kata2.0ï¼\n\narchitecture\n\n\n\n\n\næ´ä¸ªkataçæç³»ç»åä¸º 3 é¨åï¼\n\n * å®¹å¨è°åº¦ç³»ç»ï¼å¦ K8sï¼\n * ä¸å± runtimeï¼è¿ä¸å±ä¸»è¦æ¯å®ç°äº CRI æ¥å£ï¼ç¶åä½¿ç¨ä¸å± runtime å¯¹å®¹å¨è¿è¡ç®¡çãä¸å± runtime å¸åä»£è¡¨æ containerd å CRI-Oã\n * ä¸å± runtimeï¼è¿ä¸å±æä¼ç´æ¥è´è´£å®¹å¨çç®¡çï¼å¸åä»£è¡¨ä¸º runc å Kata Containersã\n\nå¯¹ Kata Containers æ¥è¯´ï¼Kata Containers ä¼æ¥æ¶æ¥èªä¸å± runtime çè¯·æ±ï¼å®ç°å®¹å¨çåå»ºãå é¤ç­ç®¡çå·¥ä½ã\n\nåæ¶ï¼ä¸å¾ä¸­ä¹æ 3 ä¸ªéä¿¡åè®®å­å¨ï¼\n\n * CRIï¼ å®¹å¨è¿è¡æ¶æ¥å£ï¼è¿æ¯ k8sï¼å®éä¸æ¯ kubeletï¼å ä¸å± runtime ä¹é´çéä¿¡æ¥å£\n * shim v2ï¼ä¸å± runtime ï¼å¦ containerd ï¼å ä¸å± runtimeï¼å¦ Kata Containers ï¼ ä¹é´çéä¿¡æ¥å£\n * agent åè®®ï¼è¿æ¯ Kata Containers åé¨çåè®®ï¼ç¨äº Kata Containers ç shim è¿ç¨å guest åç agent ä¹é´çéä¿¡ã\n\n\n# Kata Containers 2.x vs 1.x\n\n2.x å¨å¼åä¸ä¸»è¦æä»¥ä¸å ä¸ªéå¤§çåæ´ç¹ï¼\n\n * agent ä½¿ç¨ Rust éå\n\n * åªæ¯æ shimv2ï¼å æ­¤å°äº proxy å shim ç»ä»¶, shimv2 æä¾äº Containerd Runtime V2 (Shim API) ç Kata å®ç°ï¼ä»èä½¿å¾ Kubernetes åºæ¯ä¸è½å¤å®ç°æ¯ä¸ª Pod ä¸ä¸ª shim è¿ç¨ â shimv2ã\n\n * å¨ Kata Containers 2.x ä¸­ï¼æ ¸å¿ç»ä»¶åªå©ä¸ä¸¤ä¸ªï¼runtime åagent ï¼ä¸é½å¨ kata-containers è¿ä¸ª repo ä¸ã\n\nå¨kata1.xï¼ kata-containerå¯ä»¥å½ådockerçä¸ä¸ªæä»¶ï¼å¯å¨kata-containerå¯ä»¥éè¿dockerå½ä»¤ï¼ä½æ¯kata2.xä¹åï¼kataå»æäºdockerçcliï¼ä¸è½éè¿dockerå¯å¨kata runtimeå®¹å¨ã\n\nå¨ Kata 1.x ä¸­ï¼é¢åç¨æ·çä¸»è¦ç»ä»¶æ¯è¿è¡æ¶ï¼kata-runtimeï¼ãå¯¹äº Kata 2.0ï¼ä¸»è¦ç»ä»¶æ¯ Kata containerd shim v2ã å¯¹â Kata è¿è¡æ¶âçä»»ä½æåååºæä»£ Kata containerd shim v2ã\n\n\n# kata Runtime (shimv2)\n\nruntime ä¸ºè¿è¡å¨å®¿ä¸»æºä¸çãæ¯æ shim v2 åè®®çè¿ç¨ãå¨è¿ç³»åæç« ä¸­ï¼å¤æ°æåµä¸å¯ä»¥å° runtime ãshimv2 è§ä¸ºåä¸åå®¹ã\n\næ´ä¸ª Runtime ï¼å¶å¯æ§è¡ç¨åºä¸º containerd-shim-kata-v2ï¼ä¹å³ shim è¿ç¨ï¼è¿ä¹æ¯ Kata Containers çå¥å£ç¹ãRuntime å¯¹ä¸æ¥å containerd çè¯·æ±ï¼éè¿ shimv2 âåè®®âï¼ï¼å¯¹ guest æ¥è¯´ï¼éè¿ guest åç agent æ¥æ§å¶ guest åå®¹å¨çåå»ºãå é¤ç­ç®¡çã\n\nRuntime å agent ä¹é´çéç¨äº ttrpc åè®®éä¿¡ï¼è¿æ¯ä¸ä¸ªä½¿ç¨äº protocol buffer ç¼è§£ç æ¹å¼çç±»ä¼¼ gRPC çéä¿¡æ¹å¼ãè¯¥åè®®ç± containerd åå»ºï¼ç¨äº containered ååºå± runtime ä¹é´çéä¿¡ãå¨ Kata Containers ä¸­ï¼ runtime å agent ä¹éè¿ ttrpc éä¿¡ã\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\n\n# kata-agent\n\nagent å¯ä»¥ä½ä¸º guest init è¿ç¨å¯å¨ï¼ä¹å¯ä»¥ä½¿ç¨ systemd ç­ä½ä¸º init ï¼agent ä½ä¸ºæ®éè¿ç¨å¯å¨ã http://liubin.org/kata-dev-book/src/agent-arch.html\n\nhttps://github.com/kata-containers/kata-containers/tree/main/src/agent\n\n\n# èæåææ¯\n\nkata sanbox/vmçæ¥å£ å¨èææºä¸­ï¼æä»¬éè¦æä¾ä»¥ä¸virtioè®¾å¤ï¼(qemu)\n\n * å­å¨(virtio-fs)\n * ç½ç»(tap): åºäºæ§è½èèï¼qemué»è®¤ä¸ºvhost-netä½ä¸ºvirtio-net åç«¯ï¼é»è®¤éç½®è¿å¨è¯ä¼°ä¸­ã\n * æ§å¶ï¼virtio-vsockï¼\n * è®¾å¤é©±å¨ï¼vfioï¼:è®¾å¤ç´é\n * å¨æèµæºç®¡ç(acpi): CPUãåå­åè®¾å¤ç­ææ\n\n\n# hypervisor\n\nKata Containers æ¯æå¤ä¸ªypervisor\n\n * QEMU æ¯ä¸ä¸ªæçèå¤æçç®¡çç¨åºã\n\n * Firecracker æ¯AWS ä¸ºæ æå¡å¨åºæ¯å¼åçè½»éçº§hypervisorãå®åªæ¯ææéçèæè®¾å¤ã\n\n * Cloud-Hypervisor æ¯è±ç¹å°éå¯¹äºåçåºæ¯è®¾è®¡çå¦ä¸æ¬¾è½»éçº§hypervisorã\n\n * ACRN æ¯éå¯¹è¾¹ç¼åºæ¯å¼åçhypervisorã\n\n[root@localhost ~]#  kata-runtime kata-env | awk -v RS= \'/\\[Hypervisor\\]/\' | grep Path\n  Path = "/opt/kata/bin/qemu-system-x86_64"\n\n\n1\n2\n\n\n# qemu-system-x86_64\n\n\n# cgroup\n\n[[kata cgroup]]\n\n\n# å®¢æ·æºåæ ¸åéå\n\n[[guest kernelåguestos]]\n\n\n# ç½ç»åå­å¨\n\n[[kataç½ç»åå­å¨æä»¶ç³»ç»åæ]]\n\n\n# CPUååå­\n\n[[kata CPUååå­]]\n\n\n# VSOCK\n\nVsock\n\n\n# kata monitor\n\n[[kata-monitorçæ§ææ ]]\n\n\n# ææ¯è¦ç¹æ»ç»\n\n * VMä½ä¸ºå®å¨æ²ç®±\n\n * æ¯æå¤ç§èæåæ¹æ¡ï¼qemuãfirecrackerãcloud-hypervisorç­\n\n * vmä¸­agentè´è´£ç´æ¥åå»ºãæ´æ°ãéæ¯å®¹å¨\n\n * ä½¿ç¨vsockä½ä¸ºshim v2è¿ç¨ä¸agentçéä¿¡ä¿¡é\n\n * ä½¿ç¨tcè§å/macvtapè¿æ¥vethåtapï¼æ¥æéCNIåVMç½ç»\n\n * éè¿virtio-9pãvirtio-fså°hostä¸éåæè½½å°vmä¸­\n\n * éè¿åè®¾å¤éä¼ ï¼å°hostä¸åè®¾å¤ä½ä¸ºå®¹å¨rootfs\n\nä¸»è¦è§£å³çé®é¢ï¼ç°æå®¹å¨ç½ç»æ¨¡åä¸ç°æèææºç½ç»æ¨¡åä¸å¹éçé®é¢ï¼å°CNIç½ç»åèæºç½ç»å¯¹æ¥wethåtapè¿éæ¹æ¡ï¼\n\n 1. tcfilterï¼ä½¿ç¨tc ruleså°vethçingressåegresséååå«å¯¹æ¥tapçegressåingresséåå®ç°vethåtapçç´è¿\n\n 2. macvtapï¼ç°æèæç½å¡è¿éææ¯\n\n\n# é¨ç½²ç»ä»¶ï¼\n\né¨ç½²å¨ä¸»æºä¸çï¼\n\n * cloud-hypervisor, firecracker,Â qemu, åæ¯æçäºè¿å¶æä»¶\n\n * containerd-shim-kata-v2\n\n * kata-collect-data.sh\n\n * kata-runtime\n\néå:\n\n * kata-containers.imgåkata-containers-initrd.imgï¼ä» Kata GitHub åå¸é¡µé¢ä¸­æå\n\n * vmlinuz.containeråvmlinuz-virtiofs.containerï¼ä» Kata GitHub åå¸é¡µé¢ä¸­æå\n\n\n# å®¹å¨åå»ºæµç¨\n\n * ç¨æ·åå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨ï¼containerdï¼åå»ºkata runtime\n\n * kata-runtimeå è½½éç½®æä»¶ï¼è°ç¨shimv2 API\n\n * kata-runtimeè¿è¡hypervisor\n\n * hypervisoråå»ºåå¼å¯èææºVMï¼åå»ºå®¹å¨æ ¹ç¯å¢rootfsï¼\n\n * proxyä½ä¸º VM å¼å¯¼çä¸é¨åå¯å¨\n\n * è¿è¡æ¶è°ç¨proxyçCreateSandboxAPI è¯·æ±proxyåå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨å°å®¹å¨çæ§å¶æè¿åç»è¿è¡ctrå½ä»¤çç¨æ·\n\n[[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]]\n\n\n# éå¶ä¸çº¦æ:\n\nåèèµæï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md\n\n\n# ç¯å¢è¦æ±ï¼\n\n * Kata Containers éè¦åµå¥èæåæè£¸æº\n\n * ä¸æ¯æk8sä½¿ç¨dockerè¿è¡æ¶ï¼éè¦åæ¢æcontainerdæcri-o\n\n\n# å¯¹èµæºç®¡ççä¸äºå½±å\n\n * æ æ³è¿è¡containerçº§å«çæ§å¶ é¦åèææºæ¬èº«å°±æ¯hostä¸çä¸ä¸ªè¿ç¨ï¼ä»ç¶åhostä¸çcgroupæ§å¶ãæä»¥ä»ç¶å¯ä»¥çæ§æ´ä¸ªpodçèµæºä½¿ç¨æ°æ®ï¼å¹¶æ§å¶podçèµæºä½¿ç¨ã ä½æ¯æä»¬æ æ³æ¿å°containerçº§å«çæ°æ®ï¼ä¹æ æ³ç´æ¥éè¿hostçcgroupæ¥æ§å¶podéé¢containerçèµæºä½¿ç¨ã\n\n * èæåææ¯çä¸äºå½±å\n\n * èæåçoverhead\n\n\n# å­å¨éå¶ï¼\n\nKata ä¸æ¯æ k8s subPath (emptydir?)\n\nhttps://github.com/kata-containers/runtime/issues/2812\n\nhttps://github.com/kata-containers/kata-containers/issues/1728\n\nå®æµconfigmapæ²¡æé®é¢ï¼å¯è½åªå¯¹äºemptydirä½¿ç¨æé®é¢?\n\n\n# ä¸»æºèµæºå±äº«é®é¢\n\nRUNCå¯ä»¥å¯å¨ä¸ä¸ªå®¹å¨ä»¥ç¹ææ¨¡å¼è®¿é®ä¸»æºè®¾å¤ï¼èKata-runtimeä¹æ¯ææ­¤éé¡¹ï¼ä½å¨è¿ç§æåµä¸ï¼è·å¾å¯¹å®¢æ·VMè®¾å¤çå®å¨è®¿é®ãå°½ç®¡è¿ä¸ªéé¡¹è¢«è§ä¸ºä¸ç§éå¶ï¼ä½ä»å®å¨æ§çè§åº¦æ¥çï¼å®ç¡®å®æ¯ä¸ç§ä¼å¿ï¼å ä¸ºå¨å®¹å¨çæ ¹åçº§çæåµä¸ï¼ä¸ä¼æ¯å®³ä¸»æºåæ ¸ã\n\n\n# Privileged containers\n\nhttps://github.com/kata-containers/documentation/blob/master/Limitations.md#docker-run---privileged\n\nhttps://github.com/kata-containers/runtime/issues/1568\n\nhttps://github.com/kata-containers/documentation/blob/master/how-to/privileged.md\n\nrunc Kata ä¸­çç¹ææ¯æä¸å®¹å¨ææ¬è´¨çä¸åãå®¹å¨å¨æ¥å®¾ä¸­ä»¥æåçåè½è¿è¡ï¼å¹¶è¢«æäºè®¿é®ç¨æ·è®¾å¤èä¸æ¯ä¸»æºè®¾å¤çæéãsecurityContext privileged=trueä¸ Kubernetesä¸èµ·ä½¿ç¨ä¹æ¯å¦æ­¤ã\n\nå¨ runc ä¸­ï¼â--privilegedâä¼å°ä¸»æº dev çåè½è½¬æ¢ä¸ºå®¹å¨ã\n\nå¨ Kata ä¸­ï¼â--privilegedâæå³ç Kata VM ä¸­çå®¹å¨å¯ä»¥è®¿é® Kata guest VM ä¸­çææè®¾å¤ã\n\n\n# dockeråæ¢æcontainerdçä½¿ç¨å½±å\n\n\n# éåï¼\n\n * éåä¸å¤ç¨ï¼\n\ncontainerdéç¨èªå·±çæ¹å¼ç®¡çå®¹å¨éåï¼ä¸è½å¬ç¨dockerå·²æéåï¼å¹¶ä¸containerdéåä½¿ç¨äºå½åç©ºé´è¿è¡äºéç¦»ï¼crié»è®¤å½åç©ºé´æ¯k8s.ioï¼containerdé»è®¤å­å¨å½åç©ºé´æ¯defaultã\n\n * éåæå»º\n\nåæ¢å° containerd ä¹åï¼éè¦æ³¨æ docker.sock ä¸åå¯ç¨ï¼ä¹å°±æå³çä¸è½åå¨å®¹å¨éé¢æ§è¡ docker å½ä»¤æ¥æå»ºéåäºï¼docker build æå»ºéåçåºç¨éè¦åæ¢å°æ é Dockerd å°±å¯ä»¥æå»ºéåçå·¥å·ï¼å¦ docker buildxãbuildahãkaniko\n\n * æ¥å¿éç½®\n\ndocker å containerd é¤äºå¨å¸¸ç¨å½ä»¤ä¸æäºåºå«å¤ï¼å¨å®¹å¨æ¥å¿åç¸å³åæ°éç½®æ¹é¢ä¹å­å¨ä¸äºå·®å¼ã\n\n\n# ç½ç»éå¶\n\n * kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶ååºç¨æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n * Kata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\nDocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãKata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° Kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° VMãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# èµæºçº¦æç®¡ç\n\nRUNCåªä½¿ç¨æ§å¶ç»(cgroups)æ¥éå¶ãä¼ååãæ§å¶åè®¡ç®èµæºï¼èå¯¹äºkat-runtimeï¼ç±äºåå®å¨å±ï¼ä¸ºäºå¾å°ç¸åçç»æï¼å¯è½æå¿è¦å°çº¦æåºç¨å°å¤ä¸ªçº§å«ãå æ­¤ï¼èµæºçº¦æç®¡çå¨RUNCä¸­æ¯ç²ç²åº¦çï¼èå¨kataè¿è¡æ¶æ¯ç»ç²åº¦çã\n\n\n# åå­ç¸å³é®é¢ï¼\n\nèææºä¹åºç¨äºä¸äºåå­ç®¡çææ¯ï¼KSMï¼balloonï¼è¿äºå¯è½ä¹ä¼å¯¹åå­ç®¡çæä¸äºå½±åã\n\n\n# ä¸äºç¥è¯æ©å±ï¼\n\n\n# runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é\n\nrunCæ¯ä¸ä¸ªæ ¹æ®OCIæ ååå»ºå¹¶è¿è¡å®¹å¨çå½ä»¤è¡å·¥å·ï¼CLI toolï¼(low-level runtime)ã\n\nDockerå°±æ¯åºäºrunCåå»ºçï¼ç®åå°è¯´ï¼runCå°±æ¯dockerä¸­æä¸ºæ ¸å¿çé¨å\n\ncontainerdæ¯å®¹å¨ææ¯æ ååä¹åçäº§ç©ï¼ä¸ºäºè½å¤å¼å®¹OCIæ åï¼å°å®¹å¨è¿è¡æ¶åå¶ç®¡çåè½ä»Docker Daemonå¥ç¦»ãçè®ºä¸ï¼å³ä½¿ä¸è¿è¡dockerdï¼ä¹è½å¤ç´æ¥éè¿containerdæ¥ç®¡çå®¹å¨ãï¼å½ç¶ï¼containerdæ¬èº«ä¹åªæ¯ä¸ä¸ªå®æ¤è¿ç¨ï¼å®¹å¨çå®éè¿è¡æ¶ç±åé¢ä»ç»çrunCæ§å¶ãï¼\n\nKubelet æ¯ä¸ä¸ªCRIå®¢æ·ç«¯ï¼å¹¶ææCRIå®ç°æ¥å¤çæ¥å£çæå¡ç«¯ãCRI-OåContainerdæ¯ä¾èµOCIå¼å®¹è¿è¡æ¶æ¥ç®¡çå®¹å¨å®ä¾çCRIå®ç°ï¼high level runtimeï¼ã\n\n\n# Sandboxä¸Container\n\nSandboxæ¯ä¸ä¸ªç»ä¸ãåºæ¬çéç¦»ç©ºé´ï¼ä¸ä¸ªèææºä¸­åªæä¸ä¸ªSandboxï¼ä½æ¯è¯¥Sandboxåå¯ä»¥æå¤ä¸ªå®¹å¨ï¼è¿å°±å¯¹åºäºKubernetes Podçæ¨¡åï¼å¯¹äºDockeræ¥è¯´ï¼ä¸è¬ä¸ä¸ªSandboxååªè¿è¡ä¸ä¸ªContainerãæ è®ºæ¯åªç§æåµï¼SandboxçIDä¸åé¨ç¬¬ä¸ä¸ªå®¹å¨çIDç¸åã\n\n\n# k8sådockeråéæ¬é³çæäº(v1.23ä¹å)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.20.md#dockershim-deprecation\n\nhttps://kubernetes.io/zh/blog/2020/12/02/dont-panic-kubernetes-and-docker/\n\ndockeræ¯ä¸ä¸ªå®æ´çææ¯å æ ï¼æ¯ä¸ä¸ªç¨æ·åå¥½çæ½è±¡å±ï¼ä½æ¯ï¼å¯¹äºk8sæ¥è¯´ï¼å¹¶ä¸æ¯è®¾è®¡ç¨æ¥åµå¥å° Kubernetesçï¼éCRIå®¹å¨è¿è¡æ¶æ¥å£ï¼ï¼å®éä¸k8séè¦çæ¯containerdï¼dockerä¸­çä¸ä¸ªé«çº§è¿è¡æ¶åè½ï¼ï¼ç±äºDocker ä¸å¼å®¹ CRIï¼Kubernetes éç¾¤ä¸å¾ä¸å¼å¥ä¸ä¸ªå«å Dockershim çå·¥å·æ¥è®¿é®å®çæ­£éè¦ç containerdãï¼å¢å è¿ç»´ææ¬ï¼å®¹æåºéï¼ã\n\näºæ¯k8så³å®ä¸åæ¯æDockershimï¼ç¨æ·åºè¯¥å°å®¹å¨è¿è¡æ¶ä» Docker åæ¢å°å¶ä»åæ¯æçå®¹å¨è¿è¡æ¶ã\n\n\n# docker vs containerd\n\ndockerç± docker-client ,dockerd,containerd,docker-shim,runcç»æï¼æä»¥containerdæ¯dockerçåºç¡ç»ä»¶ä¹ä¸\n\nä»k8sçè§åº¦çï¼å¯ä»¥éæ© containerd æ docker ä½ä¸ºè¿è¡æ¶ç»ä»¶ï¼Containerd è°ç¨é¾æ´ç­ï¼ç»ä»¶æ´å°ï¼æ´ç¨³å®ï¼å ç¨èç¹èµæºæ´å°\n\nè°ç¨é¾\n\nDocker ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e docker shim ï¼å¨ kubelet è¿ç¨ä¸­ï¼ --\x3e dockerd --\x3e containerd\n\nContainerd ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e cri pluginï¼å¨ containerd è¿ç¨ä¸­ï¼ --\x3e containerd\n\n\n# Kata Containers ä¸ gVisor\n\nå¨2018å¹´ï¼Google å¬å¸ååå¸äºä¸ä¸ªåå« gVisor çé¡¹ç®ãgVisor é¡¹ç®ç»å®¹å¨è¿ç¨éç½®ä¸ä¸ªç¨ Go è¯­è¨å®ç°çãè¿è¡å¨ç¨æ·æçãæå°çâç¬ç«åæ ¸âãè¿ä¸ªåæ ¸å¯¹å®¹å¨è¿ç¨æ´é² Linux åæ ¸ ABIï¼æ®æ¼çâGuest Kernelâçè§è²ï¼ä»èè¾¾å°äºå°å®¹å¨åå®¿ä¸»æºéç¦»å¼çç®çã\n\nkataågvisorçæ¬è´¨ï¼é½æ¯ç»è¿ç¨åéäºä¸ä¸ªç¬ç«çæä½ç³»ç»åæ ¸ï¼ä»èé¿åäºè®©å®¹å¨å±äº«å®¿ä¸»æºçåæ ¸ãè¿æ ·ï¼å®¹å¨è¿ç¨è½å¤çå°çæ»å»é¢ï¼å°±ä»æ´ä¸ªå®¿ä¸»æºåæ ¸åæäºä¸ä¸ªæå°çãç¬ç«çãä»¥å®¹å¨ä¸ºåä½çåæ ¸ï¼ä»èææè§£å³äºå®¹å¨è¿ç¨åçâéé¸âæèå¤ºåæ´ä¸ªå®¿ä¸»æºçæ§å¶æçé®é¢ã\n\nèå®ä»¬çåºå«å¨äºï¼Kata Containers ä½¿ç¨çæ¯ä¼ ç»çèæåææ¯ï¼éè¿èæç¡¬ä»¶æ¨¡æåºäºä¸å°âå°èææºâï¼ç¶åå¨è¿ä¸ªå°èææºéå®è£äºä¸ä¸ªè£åªåç Linux åæ ¸æ¥å®ç°å¼ºéç¦»ã\n\nè gVisor çåæ³åæ´å æ¿è¿ï¼Google çå·¥ç¨å¸ç´æ¥ç¨ Go è¯­è¨âæ¨¡æâåºäºä¸ä¸ªè¿è¡å¨ç¨æ·æçæä½ç³»ç»åæ ¸ï¼ç¶åéè¿è¿ä¸ªæ¨¡æçåæ ¸æ¥ä»£æ¿å®¹å¨è¿ç¨åå®¿ä¸»æºåèµ·æéçãå¯æ§çç³»ç»è°ç¨ã\n\n\n# runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢\n\nDockerçå®å¨é®é¢æ¬è´¨ä¸å°±æ¯å®¹å¨ææ¯çå®å¨æ§é®é¢ï¼åºäºè½¯ä»¶éç¦»ï¼è¿åæ¬å±ç¨åæ ¸é®é¢ä»¥åNamespaceè¿ä¸å¤å®åçéå¶ï¼\n\n 1. /procã/sysç­æªå®å¨éç¦»\n 2. Top, free, iostatç­å½ä»¤å±ç¤ºçä¿¡æ¯æªéç¦»\n 3. Rootç¨æ·æªéç¦»\n 4. /devè®¾å¤æªéç¦»\n 5. åæ ¸æ¨¡åæªéç¦»\n 6. SELinuxãtimeãsyslogç­ææç°æNamespaceä¹å¤çä¿¡æ¯é½æªéç¦» éåæ¬èº«ä¸å®å¨ä¹ä¼å¯¼è´å®å¨æ§é®é¢ã\n\n\n# çæ³çå¤ç§æ·ç¶æ\n\nçæ³æ¥è¯´ï¼å¹³å°çåä¸ªç§æ·ï¼tenantï¼ä¹é´åºè¯¥æ æ³æåå°å½¼æ­¤çå­å¨ï¼è¡¨ç°å¾å°±åæ¯ä¸ªç§æ·ç¬å æ´ä¸ªå¹³å°ä¸æ ·ãå·ä½æ¥è¯´å°±æ¯ï¼æä¸è½çå°å¶å®ç§æ·çèµæºï¼æçèµæºè·æ»¡äºï¼ä¹ä¸è½å½±åå¶å®ç§æ·çèµæºä½¿ç¨ãææ æ³ä»ç½ç»æåæ ¸ä¸å¶å®ç§æ·ã\n\nKubernetesÂ å½ç¶åä¸å°ï¼å¶ä¸­æå¤§çä¸¤ä¸ªåå æ¯ï¼\n\n * kube-apiserverÂ æ¯æ´ä¸ªéç¾¤ä¸­çåä¾ï¼å¹¶ä¸æ²¡æå¤ç§æ·æ¦å¿µï¼\n\n * é»è®¤ç oci-runtime æ¯ runcï¼è runc å¯å¨çå®¹å¨æ¯å±äº«åæ ¸çã\n\n\n# k8sçåçå¤ç§æ·è§£å³æ¹æ¡\n\n * å½åç©ºé´éç¦»â\n * RBACæéç®¡çâ\n * èµæºéé¢ResourceQuotaâ\n * Pod Security Policy\n * podè°åº¦ï¼ç»å®èç¹ãæ±¡ç¹å®¹å¿â\n * ç½ç»ç­ç¥éå¶â\n * æå¡ç½æ ¼ï¼Istioâ\n * StorageClasså­å¨èµæºéç¦»ï¼æè§æä¹ä¸å¤§ï¼\n * å¤éç¾¤éç¦»ç®¡ç\n\n\n# kata vs container\n\n\n\n\n# kata vs VMï¼openstackï¼\n\n\n\n\n# kata vs kubevirt\n\n * (kata)ï¼å¨èææºåä½¿ç¨å®¹å¨ï¼å¯ä»¥åå»ºä¸ä¸ªåå«å¤ä¸ªå®¹å¨çåºç¨ï¼å¹¶ä¸é½å¨èææºåè¿è¡ï¼å¯ä»¥åæ¶å¨å¤ä¸ªèææºä¸åå»º/éæ¯å®¹å¨ï¼èèææºåå¯å¨ä½¿ç¨ç°æèææºåºç¡è®¾æ½å¨ç©çæå¡å¨ä¹é´è¿ç§»ã\n * (kubevirt)ï¼å¨å®¹å¨åä½¿ç¨èææºï¼å©ç¨èµæºç®¡çææ¯ï¼å©ç¨æå»ºåé¨ç½²å·¥å·\n * Kubevirtæ¯åç¨Kubernetesçæ©å±æ§æ¥ç®¡çVMï¼éè¿CRDç®¡çèææºï¼ï¼ä½ ç¨å°çæ¯ä¸ä¸ªçæ­£çVMï¼\n * KubeVirtæ¨å¨æä¾å°½å¯è½å¤çèææºåè½\n * Kata-containeræ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æçVMçå®å¨æ§åéç¦»æ§ï¼ä»¥å®¹å¨çæ¹å¼è¿è¡ï¼æçå®¹å¨çéåº¦åç¹ç¹ï¼ä½ä¸æ¯ä¸ä¸ªçæ­£çVMï¼Kataå®¹å¨åè¯å¾ä¸ºèææºæä¾ç±»ä¼¼å®¹å¨çä½éª\n * Virtletæ¯æVMå½æä¸ä¸ªCRIæ¥è·äºï¼æ¯æPod APIæ¥å®ä¹ä¸ä¸ªVMï¼æä»¥VMçå¾å¤åè½æ¯å¦ç­è¿ç§»ç­ï¼Virtletæ¯æ²¡æ³æ»¡è¶³VMçå¨é¨ç¹æ§çï¼ç®æ¯ä¸ä¸ª70%åè½çVM\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers',normalizedContent:'# å®å¨å®¹å¨-kata containers\n\nå®å¨å®¹å¨4ç±»æ¹æ¡ï¼\n\n * ä¼ ç»oså®¹å¨éåå®å¨æºå¶ï¼runc + selinux, apparmor, â¦ + rootless modeï¼\n * ç¨æ·æåæ ¸çå®¹å¨ï¼googleçgvisorï¼\n * library osï¼unikernelãnabla containersï¼\n * è½»éèæåçå®¹å¨ï¼kata containersãfirecrackerï¼ã\n\nkata containersé¡¹ç®æ¥èªäº2017å¹´12æåå¹¶çä¸¤ä¸ªé¡¹ç®âintelclear containersâåâhyper runvâï¼å¶ç®æ æ¯æå»ºæå¶è½»éçº§çvmï¼å®ä»¬åå®¹å¨ä¸æ ·æ§è¡ï¼ä½æä¾å·¥ä½è´è½½éç¦»åæ·»å èææºå±çå®å¨ä¼å¿ã\n\nkatacontainersç¤¾åºäº2018å¹´5æåå¸äºç¬¬ä¸ç1.0ãç±äºkataå®¹å¨è¿è¡æ¶å¼å®¹ociï¼å®å¯ä»¥æ ç¼å°æå¥dockerå¼æåä»»ä½å¶ä»å®¹å¨ç®¡çå¹³å°ï¼å¦kubernetesåopen-stackï¼åªéç®åå°å°runcæ¿æ¢ä¸ºkata-runtimeã\n\nkata containers çæ¬è´¨å°±æ¯ä¸ä¸ªç²¾ç®åçè½»éçº§èææºã\n\n\n# the speed of containers, the security of vms\n\nå®å¨ä½ç°å¨:\n\nå¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ãi/o ååå­çéç¦»ï¼å¹¶ä¸å¯ä»¥å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»åèæå vt æ©å±ã\n\nå®¹å¨ä½ç°å¨ï¼\n\nå¼å®¹æ§ä¸ï¼æ¯æociä»¥åcriæ¥å£ï¼åå®¹å¨ä¸æ ·æä½ã æ§è½ä¸ï¼å¯å¨éåº¦è¾¾å°ç¾æ¯«ç§çº§ï¼æ¥è¿å®¹å¨ã å¼éä¸ï¼åå­å¼éå°ï¼ç±»ä¼¼å®¹å¨ã ä¸kubernetesådockeræ ç¼è¡æ¥ï¼å¹¶ä¸æ¯runcçæ¿ä»£å å¼æºåºç¡è®¾æ½åºéä¼ä¸çå¼æºæ²»çé¡¹ç® å¤æ¶ææ¯æï¼x86ãarmãibm powerãibm s/390x\n\n\n# é¡¹ç®æè·¯ï¼\n\n 1. æä½ç³»ç»æ¬èº«çå®¹å¨æºå¶æ²¡åæ³è§£å³å®å¨æ§é®é¢ï¼éè¦ä¸ä¸ªéç¦»å±ï¼\n 2. èææºæ¯ä¸ä¸ªç°æçéç¦»å±ï¼awsè¿æ ·çäºæå¡å·²ç»è®©å¨ä¸çç¸ä¿¡ï¼å¯¹æ·æ¥è¯´ï¼"secure of vm" æ¯å¯ä»¥æ»¡è¶³éæ±çï¼\n 3. èæºéé¢åªè¦æä¸ªåæ ¸ï¼å°±å¯ä»¥æ¯æ oci è§èçè¯­ä¹ï¼å¨åæ ¸ä¸è·ä¸ª linux åºç¨è¿å¹¶ä¸å¤ªé¾å®ç°ï¼\n 4. èæºå¯è½ä¸å¤å¿«ï¼é»ç¢äºå®å¨å®¹å¨ç¯å¢çåºç¨ï¼é£ä¹å¯ä¸å¯ä»¥æ¥æ "speed of container" å¢ï¼ ç°å¨ï¼å¦ææåä¸ä¸ªé®é¢å¯ä»¥è§£å³ï¼é£ä¹å®å°±æ¯æä»¬è¦çâå®å¨çå®¹å¨âäºââè¿å°±æ¯ kata containersã\n\n\n# å®å¨éç¦»\n\nå®å¨æ§é®é¢90%ä»¥ä¸å¯ä»¥å½ç»ä¸ºéç¦»æ§é®é¢\n\n * dockerå®å¨éç¦»é®é¢\n\n * å¨kata containersä¸­ï¼æ¯ä¸ªå®¹å¨é½æèªå·±çè½»éçº§èææºåå°åæ ¸ï¼éè¿ç¡¬ä»¶èæåæä¾å®¹å¨éç¦»ã\n\n\n# kataéç¦»æç\n\nkata å®éä¸æ¯éè¿åå»ºè½»éçº§èææºå®ç°å®¹å¨ä¹é´çèµæºéç¦»ï¼åå¨èææºä¸­è¿è¡å®¹å¨è¿è¡æ¶ï¼è¿æ ·å°±ä½¿å®¹å¨å¨ä¸ç¨åæ ¸ä¸­è¿è¡ï¼æä¾ç½ç»ï¼i / oååå­çéç¦»ï¼å¹¶å¯ä»¥éè¿èæåvtæ©å±å©ç¨ç¡¬ä»¶å¼ºå¶éç¦»ã\n\nä¼ ç»çæä½ç³»ç»å®¹å¨ææ¯æ¯åæ ¸è¿ç¨ç®¡ççä¸ä¸ªå»¶ä¼¸ï¼å®¹å¨è¿ç¨æ¬èº«æ¯ä¸ç»å³èçè¿ç¨ï¼å¯¹äºå®¿ä¸»æºçè°åº¦å¨æ¥è¯´æ¯å®å¨å¯è§çï¼ä¸ä¸ª pod éçææå®¹å¨æè¿ç¨ï¼åæ¶ä¹é½è¢«å®¿ä¸»æºè°åº¦åç®¡çãè¿å°±æå³çï¼å¨æå¤§éå®¹å¨çç¯å¢ä¸ï¼å®¿ä¸»æºåæ ¸çè´æå¾éãèéçº³å®å¨å®¹å¨ä¹åï¼ä»å®¿ä¸»æºä¸æ¯çä¸å°è¿äºå®æ´çä¿¡æ¯çï¼éç¦»å±åæ¶ä¹éä½äºå®¿ä¸»æºçè°åº¦å¼éï¼åå°äºç»´æ¤è´æï¼é¿åäºå®¹å¨ä¹é´ãå®¹å¨åå®¿ä¸»æºä¹é´çæå¡è´¨éå¹²æ°ã\n\nå®å¨å®¹å¨ä½ä¸ºä¸éå±éï¼å¯ä»¥è®©å®¿ä¸»æºçè¿ç»´ç®¡çæä½ä¸è½ç´æ¥è®¿é®å°åºç¨çæ°æ®ï¼è¿æ ·ï¼æç¨æ·çåºç¨æ°æ®ç´æ¥ä¿æ¤å¨æ²ç®±éå°±å¯ä»¥éä½å¯¹ç¨æ·çææè¦æ±ï¼ä¿éç¨æ·çæ°æ®ç§å¯æ§ã\n\n\n# åå°èæåå¼é\n\n * éè¿âå°ç¨ä¸å¿è¦çåå­âåâå±äº«è½å±äº«çåå­âæ¥éä½åå­çå¼éï¼æ´å°çåå­ä¸ä»å¼éæ´å°ï¼å¯å¨ä¹æ´è½»å¿«\n\n * æå³é®çæ§è½ä¼åæ¥èªintel clear containersã\n\n * æå³é®çä¼åå¶å®å°±æ¯vmçå¯å¨æ¶é´è¿è¡è£åªï¼ä¼åã\n\n * ä½¿ç¨ç¹å®çlinuxåæ ¸ï¼ä½¿ç¨ç®åçinitrdä»¥årootfsã\n\n\n# ææ ·æ¥ä¸å®¹å¨ççæ\n\nkata-containerså®æ¬è´¨ä¸å°±ä¸ä¸ªå®¹å¨çruntimeãåªè¦å®ç°äºociçæ¥å£å°±å¯ä»¥æ¥ä¸é£äºå®¹å¨ç®¡çå·¥å·ï¼åªè¦å®ç°äºcriæ¥å£ï¼å°±å¯ä»¥æ¥ä¸k8sã\n\næä»¥kata-containersä¸ociè¿è¡æ¶è§èå¼å®¹ï¼å¯ä»¥éè¿cri-oåcontainerdå®ç°ä¸ kubernetes criè¿è¡æ ç¼åä½ãï¼shim apiï¼\n\n\n# åä¼ ç»çruncçåºå«\n\næå¤§çåºå«å°±å¨äºcontaineræ¯æ¾å¨èææºéé¢è¿è¡çï¼ä¸­é´å¤äºä¸å±kernelåï¼å¤é¢çå®¹å¨ç®¡çè½¯ä»¶å°±æ æ³ç®¡çï¼çæ§éé¢çè¿ç¨ãå®¹å¨ï¼ä¹æ æ³åéé¢éä¿¡ã è§£å³æ¹æ¡å°±æ¯å¨vméé¢æ¾äºä¸ä¸ªagentï¼åå¤éè¿vsockéä¿¡ï¼è¿æ ·å­åå¤å°±æéäºã\n\n\n# ä½¿ç¨åºæ¯\n\n * ä¸»è¦ä½¿ç¨åºæ¯æ¯å¨å¬æäºæ¨¡å¼\n\n * è£¸éå±åºç¡è®¾æ½\n\n * æ··åå·¥ä½è´è½½çäº§ç¯å¢\n\n * çç®¡åææççäº§ç¯å¢\n\n * å¤ç§æ·å®¹å¨éç¾¤\n\n * å·æåæ ¸ç¸å³åè½çéççä¾èµåæ ¸çå·¥ä½è´è½½\n\n\n# æ¶æï¼kata2.0ï¼\n\narchitecture\n\n\n\n\n\næ´ä¸ªkataçæç³»ç»åä¸º 3 é¨åï¼\n\n * å®¹å¨è°åº¦ç³»ç»ï¼å¦ k8sï¼\n * ä¸å± runtimeï¼è¿ä¸å±ä¸»è¦æ¯å®ç°äº cri æ¥å£ï¼ç¶åä½¿ç¨ä¸å± runtime å¯¹å®¹å¨è¿è¡ç®¡çãä¸å± runtime å¸åä»£è¡¨æ containerd å cri-oã\n * ä¸å± runtimeï¼è¿ä¸å±æä¼ç´æ¥è´è´£å®¹å¨çç®¡çï¼å¸åä»£è¡¨ä¸º runc å kata containersã\n\nå¯¹ kata containers æ¥è¯´ï¼kata containers ä¼æ¥æ¶æ¥èªä¸å± runtime çè¯·æ±ï¼å®ç°å®¹å¨çåå»ºãå é¤ç­ç®¡çå·¥ä½ã\n\nåæ¶ï¼ä¸å¾ä¸­ä¹æ 3 ä¸ªéä¿¡åè®®å­å¨ï¼\n\n * criï¼ å®¹å¨è¿è¡æ¶æ¥å£ï¼è¿æ¯ k8sï¼å®éä¸æ¯ kubeletï¼å ä¸å± runtime ä¹é´çéä¿¡æ¥å£\n * shim v2ï¼ä¸å± runtime ï¼å¦ containerd ï¼å ä¸å± runtimeï¼å¦ kata containers ï¼ ä¹é´çéä¿¡æ¥å£\n * agent åè®®ï¼è¿æ¯ kata containers åé¨çåè®®ï¼ç¨äº kata containers ç shim è¿ç¨å guest åç agent ä¹é´çéä¿¡ã\n\n\n# kata containers 2.x vs 1.x\n\n2.x å¨å¼åä¸ä¸»è¦æä»¥ä¸å ä¸ªéå¤§çåæ´ç¹ï¼\n\n * agent ä½¿ç¨ rust éå\n\n * åªæ¯æ shimv2ï¼å æ­¤å°äº proxy å shim ç»ä»¶, shimv2 æä¾äº containerd runtime v2 (shim api) ç kata å®ç°ï¼ä»èä½¿å¾ kubernetes åºæ¯ä¸è½å¤å®ç°æ¯ä¸ª pod ä¸ä¸ª shim è¿ç¨ â shimv2ã\n\n * å¨ kata containers 2.x ä¸­ï¼æ ¸å¿ç»ä»¶åªå©ä¸ä¸¤ä¸ªï¼runtime åagent ï¼ä¸é½å¨ kata-containers è¿ä¸ª repo ä¸ã\n\nå¨kata1.xï¼ kata-containerå¯ä»¥å½ådockerçä¸ä¸ªæä»¶ï¼å¯å¨kata-containerå¯ä»¥éè¿dockerå½ä»¤ï¼ä½æ¯kata2.xä¹åï¼kataå»æäºdockerçcliï¼ä¸è½éè¿dockerå¯å¨kata runtimeå®¹å¨ã\n\nå¨ kata 1.x ä¸­ï¼é¢åç¨æ·çä¸»è¦ç»ä»¶æ¯è¿è¡æ¶ï¼kata-runtimeï¼ãå¯¹äº kata 2.0ï¼ä¸»è¦ç»ä»¶æ¯ kata containerd shim v2ã å¯¹â kata è¿è¡æ¶âçä»»ä½æåååºæä»£ kata containerd shim v2ã\n\n\n# kata runtime (shimv2)\n\nruntime ä¸ºè¿è¡å¨å®¿ä¸»æºä¸çãæ¯æ shim v2 åè®®çè¿ç¨ãå¨è¿ç³»åæç« ä¸­ï¼å¤æ°æåµä¸å¯ä»¥å° runtime ãshimv2 è§ä¸ºåä¸åå®¹ã\n\næ´ä¸ª runtime ï¼å¶å¯æ§è¡ç¨åºä¸º containerd-shim-kata-v2ï¼ä¹å³ shim è¿ç¨ï¼è¿ä¹æ¯ kata containers çå¥å£ç¹ãruntime å¯¹ä¸æ¥å containerd çè¯·æ±ï¼éè¿ shimv2 âåè®®âï¼ï¼å¯¹ guest æ¥è¯´ï¼éè¿ guest åç agent æ¥æ§å¶ guest åå®¹å¨çåå»ºãå é¤ç­ç®¡çã\n\nruntime å agent ä¹é´çéç¨äº ttrpc åè®®éä¿¡ï¼è¿æ¯ä¸ä¸ªä½¿ç¨äº protocol buffer ç¼è§£ç æ¹å¼çç±»ä¼¼ grpc çéä¿¡æ¹å¼ãè¯¥åè®®ç± containerd åå»ºï¼ç¨äº containered ååºå± runtime ä¹é´çéä¿¡ãå¨ kata containers ä¸­ï¼ runtime å agent ä¹éè¿ ttrpc éä¿¡ã\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\n\n# kata-agent\n\nagent å¯ä»¥ä½ä¸º guest init è¿ç¨å¯å¨ï¼ä¹å¯ä»¥ä½¿ç¨ systemd ç­ä½ä¸º init ï¼agent ä½ä¸ºæ®éè¿ç¨å¯å¨ã http://liubin.org/kata-dev-book/src/agent-arch.html\n\nhttps://github.com/kata-containers/kata-containers/tree/main/src/agent\n\n\n# èæåææ¯\n\nkata sanbox/vmçæ¥å£ å¨èææºä¸­ï¼æä»¬éè¦æä¾ä»¥ä¸virtioè®¾å¤ï¼(qemu)\n\n * å­å¨(virtio-fs)\n * ç½ç»(tap): åºäºæ§è½èèï¼qemué»è®¤ä¸ºvhost-netä½ä¸ºvirtio-net åç«¯ï¼é»è®¤éç½®è¿å¨è¯ä¼°ä¸­ã\n * æ§å¶ï¼virtio-vsockï¼\n * è®¾å¤é©±å¨ï¼vfioï¼:è®¾å¤ç´é\n * å¨æèµæºç®¡ç(acpi): cpuãåå­åè®¾å¤ç­ææ\n\n\n# hypervisor\n\nkata containers æ¯æå¤ä¸ªypervisor\n\n * qemu æ¯ä¸ä¸ªæçèå¤æçç®¡çç¨åºã\n\n * firecracker æ¯aws ä¸ºæ æå¡å¨åºæ¯å¼åçè½»éçº§hypervisorãå®åªæ¯ææéçèæè®¾å¤ã\n\n * cloud-hypervisor æ¯è±ç¹å°éå¯¹äºåçåºæ¯è®¾è®¡çå¦ä¸æ¬¾è½»éçº§hypervisorã\n\n * acrn æ¯éå¯¹è¾¹ç¼åºæ¯å¼åçhypervisorã\n\n[root@localhost ~]#  kata-runtime kata-env | awk -v rs= \'/\\[hypervisor\\]/\' | grep path\n  path = "/opt/kata/bin/qemu-system-x86_64"\n\n\n1\n2\n\n\n# qemu-system-x86_64\n\n\n# cgroup\n\n[[kata cgroup]]\n\n\n# å®¢æ·æºåæ ¸åéå\n\n[[guest kernelåguestos]]\n\n\n# ç½ç»åå­å¨\n\n[[kataç½ç»åå­å¨æä»¶ç³»ç»åæ]]\n\n\n# cpuååå­\n\n[[kata cpuååå­]]\n\n\n# vsock\n\nvsock\n\n\n# kata monitor\n\n[[kata-monitorçæ§ææ ]]\n\n\n# ææ¯è¦ç¹æ»ç»\n\n * vmä½ä¸ºå®å¨æ²ç®±\n\n * æ¯æå¤ç§èæåæ¹æ¡ï¼qemuãfirecrackerãcloud-hypervisorç­\n\n * vmä¸­agentè´è´£ç´æ¥åå»ºãæ´æ°ãéæ¯å®¹å¨\n\n * ä½¿ç¨vsockä½ä¸ºshim v2è¿ç¨ä¸agentçéä¿¡ä¿¡é\n\n * ä½¿ç¨tcè§å/macvtapè¿æ¥vethåtapï¼æ¥æécniåvmç½ç»\n\n * éè¿virtio-9pãvirtio-fså°hostä¸éåæè½½å°vmä¸­\n\n * éè¿åè®¾å¤éä¼ ï¼å°hostä¸åè®¾å¤ä½ä¸ºå®¹å¨rootfs\n\nä¸»è¦è§£å³çé®é¢ï¼ç°æå®¹å¨ç½ç»æ¨¡åä¸ç°æèææºç½ç»æ¨¡åä¸å¹éçé®é¢ï¼å°cniç½ç»åèæºç½ç»å¯¹æ¥wethåtapè¿éæ¹æ¡ï¼\n\n 1. tcfilterï¼ä½¿ç¨tc ruleså°vethçingressåegresséååå«å¯¹æ¥tapçegressåingresséåå®ç°vethåtapçç´è¿\n\n 2. macvtapï¼ç°æèæç½å¡è¿éææ¯\n\n\n# é¨ç½²ç»ä»¶ï¼\n\né¨ç½²å¨ä¸»æºä¸çï¼\n\n * cloud-hypervisor, firecracker,Â qemu, åæ¯æçäºè¿å¶æä»¶\n\n * containerd-shim-kata-v2\n\n * kata-collect-data.sh\n\n * kata-runtime\n\néå:\n\n * kata-containers.imgåkata-containers-initrd.imgï¼ä» kata github åå¸é¡µé¢ä¸­æå\n\n * vmlinuz.containeråvmlinuz-virtiofs.containerï¼ä» kata github åå¸é¡µé¢ä¸­æå\n\n\n# å®¹å¨åå»ºæµç¨\n\n * ç¨æ·åå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨ï¼containerdï¼åå»ºkata runtime\n\n * kata-runtimeå è½½éç½®æä»¶ï¼è°ç¨shimv2 api\n\n * kata-runtimeè¿è¡hypervisor\n\n * hypervisoråå»ºåå¼å¯èææºvmï¼åå»ºå®¹å¨æ ¹ç¯å¢rootfsï¼\n\n * proxyä½ä¸º vm å¼å¯¼çä¸é¨åå¯å¨\n\n * è¿è¡æ¶è°ç¨proxyçcreatesandboxapi è¯·æ±proxyåå»ºå®¹å¨\n\n * å®¹å¨ç®¡çå¨å°å®¹å¨çæ§å¶æè¿åç»è¿è¡ctrå½ä»¤çç¨æ·\n\n[[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]]\n\n\n# éå¶ä¸çº¦æ:\n\nåèèµæï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md\n\n\n# ç¯å¢è¦æ±ï¼\n\n * kata containers éè¦åµå¥èæåæè£¸æº\n\n * ä¸æ¯æk8sä½¿ç¨dockerè¿è¡æ¶ï¼éè¦åæ¢æcontainerdæcri-o\n\n\n# å¯¹èµæºç®¡ççä¸äºå½±å\n\n * æ æ³è¿è¡containerçº§å«çæ§å¶ é¦åèææºæ¬èº«å°±æ¯hostä¸çä¸ä¸ªè¿ç¨ï¼ä»ç¶åhostä¸çcgroupæ§å¶ãæä»¥ä»ç¶å¯ä»¥çæ§æ´ä¸ªpodçèµæºä½¿ç¨æ°æ®ï¼å¹¶æ§å¶podçèµæºä½¿ç¨ã ä½æ¯æä»¬æ æ³æ¿å°containerçº§å«çæ°æ®ï¼ä¹æ æ³ç´æ¥éè¿hostçcgroupæ¥æ§å¶podéé¢containerçèµæºä½¿ç¨ã\n\n * èæåææ¯çä¸äºå½±å\n\n * èæåçoverhead\n\n\n# å­å¨éå¶ï¼\n\nkata ä¸æ¯æ k8s subpath (emptydir?)\n\nhttps://github.com/kata-containers/runtime/issues/2812\n\nhttps://github.com/kata-containers/kata-containers/issues/1728\n\nå®æµconfigmapæ²¡æé®é¢ï¼å¯è½åªå¯¹äºemptydirä½¿ç¨æé®é¢?\n\n\n# ä¸»æºèµæºå±äº«é®é¢\n\nruncå¯ä»¥å¯å¨ä¸ä¸ªå®¹å¨ä»¥ç¹ææ¨¡å¼è®¿é®ä¸»æºè®¾å¤ï¼èkata-runtimeä¹æ¯ææ­¤éé¡¹ï¼ä½å¨è¿ç§æåµä¸ï¼è·å¾å¯¹å®¢æ·vmè®¾å¤çå®å¨è®¿é®ãå°½ç®¡è¿ä¸ªéé¡¹è¢«è§ä¸ºä¸ç§éå¶ï¼ä½ä»å®å¨æ§çè§åº¦æ¥çï¼å®ç¡®å®æ¯ä¸ç§ä¼å¿ï¼å ä¸ºå¨å®¹å¨çæ ¹åçº§çæåµä¸ï¼ä¸ä¼æ¯å®³ä¸»æºåæ ¸ã\n\n\n# privileged containers\n\nhttps://github.com/kata-containers/documentation/blob/master/limitations.md#docker-run---privileged\n\nhttps://github.com/kata-containers/runtime/issues/1568\n\nhttps://github.com/kata-containers/documentation/blob/master/how-to/privileged.md\n\nrunc kata ä¸­çç¹ææ¯æä¸å®¹å¨ææ¬è´¨çä¸åãå®¹å¨å¨æ¥å®¾ä¸­ä»¥æåçåè½è¿è¡ï¼å¹¶è¢«æäºè®¿é®ç¨æ·è®¾å¤èä¸æ¯ä¸»æºè®¾å¤çæéãsecuritycontext privileged=trueä¸ kubernetesä¸èµ·ä½¿ç¨ä¹æ¯å¦æ­¤ã\n\nå¨ runc ä¸­ï¼â--privilegedâä¼å°ä¸»æº dev çåè½è½¬æ¢ä¸ºå®¹å¨ã\n\nå¨ kata ä¸­ï¼â--privilegedâæå³ç kata vm ä¸­çå®¹å¨å¯ä»¥è®¿é® kata guest vm ä¸­çææè®¾å¤ã\n\n\n# dockeråæ¢æcontainerdçä½¿ç¨å½±å\n\n\n# éåï¼\n\n * éåä¸å¤ç¨ï¼\n\ncontainerdéç¨èªå·±çæ¹å¼ç®¡çå®¹å¨éåï¼ä¸è½å¬ç¨dockerå·²æéåï¼å¹¶ä¸containerdéåä½¿ç¨äºå½åç©ºé´è¿è¡äºéç¦»ï¼crié»è®¤å½åç©ºé´æ¯k8s.ioï¼containerdé»è®¤å­å¨å½åç©ºé´æ¯defaultã\n\n * éåæå»º\n\nåæ¢å° containerd ä¹åï¼éè¦æ³¨æ docker.sock ä¸åå¯ç¨ï¼ä¹å°±æå³çä¸è½åå¨å®¹å¨éé¢æ§è¡ docker å½ä»¤æ¥æå»ºéåäºï¼docker build æå»ºéåçåºç¨éè¦åæ¢å°æ é dockerd å°±å¯ä»¥æå»ºéåçå·¥å·ï¼å¦ docker buildxãbuildahãkaniko\n\n * æ¥å¿éç½®\n\ndocker å containerd é¤äºå¨å¸¸ç¨å½ä»¤ä¸æäºåºå«å¤ï¼å¨å®¹å¨æ¥å¿åç¸å³åæ°éç½®æ¹é¢ä¹å­å¨ä¸äºå·®å¼ã\n\n\n# ç½ç»éå¶\n\n * kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶ååºç¨æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n * kata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\ndocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãkata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° vmãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# èµæºçº¦æç®¡ç\n\nruncåªä½¿ç¨æ§å¶ç»(cgroups)æ¥éå¶ãä¼ååãæ§å¶åè®¡ç®èµæºï¼èå¯¹äºkat-runtimeï¼ç±äºåå®å¨å±ï¼ä¸ºäºå¾å°ç¸åçç»æï¼å¯è½æå¿è¦å°çº¦æåºç¨å°å¤ä¸ªçº§å«ãå æ­¤ï¼èµæºçº¦æç®¡çå¨runcä¸­æ¯ç²ç²åº¦çï¼èå¨kataè¿è¡æ¶æ¯ç»ç²åº¦çã\n\n\n# åå­ç¸å³é®é¢ï¼\n\nèææºä¹åºç¨äºä¸äºåå­ç®¡çææ¯ï¼ksmï¼balloonï¼è¿äºå¯è½ä¹ä¼å¯¹åå­ç®¡çæä¸äºå½±åã\n\n\n# ä¸äºç¥è¯æ©å±ï¼\n\n\n# runcãruntimeãdockerãcontainerdãcri-oä¸äºåè¯è§£é\n\nruncæ¯ä¸ä¸ªæ ¹æ®ociæ ååå»ºå¹¶è¿è¡å®¹å¨çå½ä»¤è¡å·¥å·ï¼cli toolï¼(low-level runtime)ã\n\ndockerå°±æ¯åºäºruncåå»ºçï¼ç®åå°è¯´ï¼runcå°±æ¯dockerä¸­æä¸ºæ ¸å¿çé¨å\n\ncontainerdæ¯å®¹å¨ææ¯æ ååä¹åçäº§ç©ï¼ä¸ºäºè½å¤å¼å®¹ociæ åï¼å°å®¹å¨è¿è¡æ¶åå¶ç®¡çåè½ä»docker daemonå¥ç¦»ãçè®ºä¸ï¼å³ä½¿ä¸è¿è¡dockerdï¼ä¹è½å¤ç´æ¥éè¿containerdæ¥ç®¡çå®¹å¨ãï¼å½ç¶ï¼containerdæ¬èº«ä¹åªæ¯ä¸ä¸ªå®æ¤è¿ç¨ï¼å®¹å¨çå®éè¿è¡æ¶ç±åé¢ä»ç»çruncæ§å¶ãï¼\n\nkubelet æ¯ä¸ä¸ªcriå®¢æ·ç«¯ï¼å¹¶ææcriå®ç°æ¥å¤çæ¥å£çæå¡ç«¯ãcri-oåcontainerdæ¯ä¾èµociå¼å®¹è¿è¡æ¶æ¥ç®¡çå®¹å¨å®ä¾çcriå®ç°ï¼high level runtimeï¼ã\n\n\n# sandboxä¸container\n\nsandboxæ¯ä¸ä¸ªç»ä¸ãåºæ¬çéç¦»ç©ºé´ï¼ä¸ä¸ªèææºä¸­åªæä¸ä¸ªsandboxï¼ä½æ¯è¯¥sandboxåå¯ä»¥æå¤ä¸ªå®¹å¨ï¼è¿å°±å¯¹åºäºkubernetes podçæ¨¡åï¼å¯¹äºdockeræ¥è¯´ï¼ä¸è¬ä¸ä¸ªsandboxååªè¿è¡ä¸ä¸ªcontainerãæ è®ºæ¯åªç§æåµï¼sandboxçidä¸åé¨ç¬¬ä¸ä¸ªå®¹å¨çidç¸åã\n\n\n# k8sådockeråéæ¬é³çæäº(v1.23ä¹å)\n\nhttps://github.com/kubernetes/kubernetes/blob/master/changelog/changelog-1.20.md#dockershim-deprecation\n\nhttps://kubernetes.io/zh/blog/2020/12/02/dont-panic-kubernetes-and-docker/\n\ndockeræ¯ä¸ä¸ªå®æ´çææ¯å æ ï¼æ¯ä¸ä¸ªç¨æ·åå¥½çæ½è±¡å±ï¼ä½æ¯ï¼å¯¹äºk8sæ¥è¯´ï¼å¹¶ä¸æ¯è®¾è®¡ç¨æ¥åµå¥å° kubernetesçï¼écriå®¹å¨è¿è¡æ¶æ¥å£ï¼ï¼å®éä¸k8séè¦çæ¯containerdï¼dockerä¸­çä¸ä¸ªé«çº§è¿è¡æ¶åè½ï¼ï¼ç±äºdocker ä¸å¼å®¹ criï¼kubernetes éç¾¤ä¸å¾ä¸å¼å¥ä¸ä¸ªå«å dockershim çå·¥å·æ¥è®¿é®å®çæ­£éè¦ç containerdãï¼å¢å è¿ç»´ææ¬ï¼å®¹æåºéï¼ã\n\näºæ¯k8så³å®ä¸åæ¯ædockershimï¼ç¨æ·åºè¯¥å°å®¹å¨è¿è¡æ¶ä» docker åæ¢å°å¶ä»åæ¯æçå®¹å¨è¿è¡æ¶ã\n\n\n# docker vs containerd\n\ndockerç± docker-client ,dockerd,containerd,docker-shim,runcç»æï¼æä»¥containerdæ¯dockerçåºç¡ç»ä»¶ä¹ä¸\n\nä»k8sçè§åº¦çï¼å¯ä»¥éæ© containerd æ docker ä½ä¸ºè¿è¡æ¶ç»ä»¶ï¼containerd è°ç¨é¾æ´ç­ï¼ç»ä»¶æ´å°ï¼æ´ç¨³å®ï¼å ç¨èç¹èµæºæ´å°\n\nè°ç¨é¾\n\ndocker ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e docker shim ï¼å¨ kubelet è¿ç¨ä¸­ï¼ --\x3e dockerd --\x3e containerd\n\ncontainerd ä½ä¸º k8s å®¹å¨è¿è¡æ¶ï¼è°ç¨å³ç³»å¦ä¸ï¼\n\nkubelet --\x3e cri pluginï¼å¨ containerd è¿ç¨ä¸­ï¼ --\x3e containerd\n\n\n# kata containers ä¸ gvisor\n\nå¨2018å¹´ï¼google å¬å¸ååå¸äºä¸ä¸ªåå« gvisor çé¡¹ç®ãgvisor é¡¹ç®ç»å®¹å¨è¿ç¨éç½®ä¸ä¸ªç¨ go è¯­è¨å®ç°çãè¿è¡å¨ç¨æ·æçãæå°çâç¬ç«åæ ¸âãè¿ä¸ªåæ ¸å¯¹å®¹å¨è¿ç¨æ´é² linux åæ ¸ abiï¼æ®æ¼çâguest kernelâçè§è²ï¼ä»èè¾¾å°äºå°å®¹å¨åå®¿ä¸»æºéç¦»å¼çç®çã\n\nkataågvisorçæ¬è´¨ï¼é½æ¯ç»è¿ç¨åéäºä¸ä¸ªç¬ç«çæä½ç³»ç»åæ ¸ï¼ä»èé¿åäºè®©å®¹å¨å±äº«å®¿ä¸»æºçåæ ¸ãè¿æ ·ï¼å®¹å¨è¿ç¨è½å¤çå°çæ»å»é¢ï¼å°±ä»æ´ä¸ªå®¿ä¸»æºåæ ¸åæäºä¸ä¸ªæå°çãç¬ç«çãä»¥å®¹å¨ä¸ºåä½çåæ ¸ï¼ä»èææè§£å³äºå®¹å¨è¿ç¨åçâéé¸âæèå¤ºåæ´ä¸ªå®¿ä¸»æºçæ§å¶æçé®é¢ã\n\nèå®ä»¬çåºå«å¨äºï¼kata containers ä½¿ç¨çæ¯ä¼ ç»çèæåææ¯ï¼éè¿èæç¡¬ä»¶æ¨¡æåºäºä¸å°âå°èææºâï¼ç¶åå¨è¿ä¸ªå°èææºéå®è£äºä¸ä¸ªè£åªåç linux åæ ¸æ¥å®ç°å¼ºéç¦»ã\n\nè gvisor çåæ³åæ´å æ¿è¿ï¼google çå·¥ç¨å¸ç´æ¥ç¨ go è¯­è¨âæ¨¡æâåºäºä¸ä¸ªè¿è¡å¨ç¨æ·æçæä½ç³»ç»åæ ¸ï¼ç¶åéè¿è¿ä¸ªæ¨¡æçåæ ¸æ¥ä»£æ¿å®¹å¨è¿ç¨åå®¿ä¸»æºåèµ·æéçãå¯æ§çç³»ç»è°ç¨ã\n\n\n# runcå®¹å¨çå®å¨æ§ï¼éç¦»ï¼é®é¢\n\ndockerçå®å¨é®é¢æ¬è´¨ä¸å°±æ¯å®¹å¨ææ¯çå®å¨æ§é®é¢ï¼åºäºè½¯ä»¶éç¦»ï¼è¿åæ¬å±ç¨åæ ¸é®é¢ä»¥ånamespaceè¿ä¸å¤å®åçéå¶ï¼\n\n 1. /procã/sysç­æªå®å¨éç¦»\n 2. top, free, iostatç­å½ä»¤å±ç¤ºçä¿¡æ¯æªéç¦»\n 3. rootç¨æ·æªéç¦»\n 4. /devè®¾å¤æªéç¦»\n 5. åæ ¸æ¨¡åæªéç¦»\n 6. selinuxãtimeãsyslogç­ææç°ænamespaceä¹å¤çä¿¡æ¯é½æªéç¦» éåæ¬èº«ä¸å®å¨ä¹ä¼å¯¼è´å®å¨æ§é®é¢ã\n\n\n# çæ³çå¤ç§æ·ç¶æ\n\nçæ³æ¥è¯´ï¼å¹³å°çåä¸ªç§æ·ï¼tenantï¼ä¹é´åºè¯¥æ æ³æåå°å½¼æ­¤çå­å¨ï¼è¡¨ç°å¾å°±åæ¯ä¸ªç§æ·ç¬å æ´ä¸ªå¹³å°ä¸æ ·ãå·ä½æ¥è¯´å°±æ¯ï¼æä¸è½çå°å¶å®ç§æ·çèµæºï¼æçèµæºè·æ»¡äºï¼ä¹ä¸è½å½±åå¶å®ç§æ·çèµæºä½¿ç¨ãææ æ³ä»ç½ç»æåæ ¸ä¸å¶å®ç§æ·ã\n\nkubernetesÂ å½ç¶åä¸å°ï¼å¶ä¸­æå¤§çä¸¤ä¸ªåå æ¯ï¼\n\n * kube-apiserverÂ æ¯æ´ä¸ªéç¾¤ä¸­çåä¾ï¼å¹¶ä¸æ²¡æå¤ç§æ·æ¦å¿µï¼\n\n * é»è®¤ç oci-runtime æ¯ runcï¼è runc å¯å¨çå®¹å¨æ¯å±äº«åæ ¸çã\n\n\n# k8sçåçå¤ç§æ·è§£å³æ¹æ¡\n\n * å½åç©ºé´éç¦»â\n * rbacæéç®¡çâ\n * èµæºéé¢resourcequotaâ\n * pod security policy\n * podè°åº¦ï¼ç»å®èç¹ãæ±¡ç¹å®¹å¿â\n * ç½ç»ç­ç¥éå¶â\n * æå¡ç½æ ¼ï¼istioâ\n * storageclasså­å¨èµæºéç¦»ï¼æè§æä¹ä¸å¤§ï¼\n * å¤éç¾¤éç¦»ç®¡ç\n\n\n# kata vs container\n\n\n\n\n# kata vs vmï¼openstackï¼\n\n\n\n\n# kata vs kubevirt\n\n * (kata)ï¼å¨èææºåä½¿ç¨å®¹å¨ï¼å¯ä»¥åå»ºä¸ä¸ªåå«å¤ä¸ªå®¹å¨çåºç¨ï¼å¹¶ä¸é½å¨èææºåè¿è¡ï¼å¯ä»¥åæ¶å¨å¤ä¸ªèææºä¸åå»º/éæ¯å®¹å¨ï¼èèææºåå¯å¨ä½¿ç¨ç°æèææºåºç¡è®¾æ½å¨ç©çæå¡å¨ä¹é´è¿ç§»ã\n * (kubevirt)ï¼å¨å®¹å¨åä½¿ç¨èææºï¼å©ç¨èµæºç®¡çææ¯ï¼å©ç¨æå»ºåé¨ç½²å·¥å·\n * kubevirtæ¯åç¨kubernetesçæ©å±æ§æ¥ç®¡çvmï¼éè¿crdç®¡çèææºï¼ï¼ä½ ç¨å°çæ¯ä¸ä¸ªçæ­£çvmï¼\n * kubevirtæ¨å¨æä¾å°½å¯è½å¤çèææºåè½\n * kata-containeræ¯ä¸ä¸ªå®¹å¨è¿è¡æ¶ï¼æçvmçå®å¨æ§åéç¦»æ§ï¼ä»¥å®¹å¨çæ¹å¼è¿è¡ï¼æçå®¹å¨çéåº¦åç¹ç¹ï¼ä½ä¸æ¯ä¸ä¸ªçæ­£çvmï¼kataå®¹å¨åè¯å¾ä¸ºèææºæä¾ç±»ä¼¼å®¹å¨çä½éª\n * virtletæ¯ævmå½æä¸ä¸ªcriæ¥è·äºï¼æ¯æpod apiæ¥å®ä¹ä¸ä¸ªvmï¼æä»¥vmçå¾å¤åè½æ¯å¦ç­è¿ç§»ç­ï¼virtletæ¯æ²¡æ³æ»¡è¶³vmçå¨é¨ç¹æ§çï¼ç®æ¯ä¸ä¸ª70%åè½çvm\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers',charsets:{cjk:!0}},{title:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ",frontmatter:{title:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/25c61d/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã',meta:[{name:"twitter:title",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{name:"twitter:description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{property:"og:description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataç½ç»åå­å¨æä»¶ç³»ç»åæ"},{itemprop:"description",content:'internetworking_model="tcfilter"\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã'}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/02.kata%E7%BD%91%E7%BB%9C%E5%92%8C%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.md",key:"v-5167d661",path:"/pages/25c61d/",headers:[{level:2,title:"ç½ç»æµéèµ°åï¼",slug:"ç½ç»æµéèµ°å",normalizedTitle:"ç½ç»æµéèµ°åï¼",charIndex:1115},{level:2,title:"virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯",slug:"virtio-9p-å-virtio-fs-æä»¶ç³»ç»å¯¹æ¯",normalizedTitle:"virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯",charIndex:4393},{level:2,title:"virtiofs",slug:"virtiofs",normalizedTitle:"virtiofs",charIndex:4373},{level:2,title:"å­å¨è·¯å¾ï¼",slug:"å­å¨è·¯å¾",normalizedTitle:"å­å¨è·¯å¾ï¼",charIndex:8420},{level:3,title:"virtiofsd cache",slug:"virtiofsd-cache",normalizedTitle:"virtiofsd cache",charIndex:9206},{level:3,title:"DAX(ç´æ¥è®¿é®)",slug:"dax-ç´æ¥è®¿é®",normalizedTitle:"dax(ç´æ¥è®¿é®)",charIndex:9369},{level:3,title:"virtiofsdå·²ç¥é®é¢æ±æ»",slug:"virtiofsdå·²ç¥é®é¢æ±æ»",normalizedTitle:"virtiofsdå·²ç¥é®é¢æ±æ»",charIndex:9728},{level:2,title:"containerdçSnapshotter",slug:"containerdçsnapshotter",normalizedTitle:"containerdçsnapshotter",charIndex:9804}],headersStr:"ç½ç»æµéèµ°åï¼ virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯ virtiofs å­å¨è·¯å¾ï¼ virtiofsd cache DAX(ç´æ¥è®¿é®) virtiofsdå·²ç¥é®é¢æ±æ» containerdçSnapshotter",content:'# ç½ç»\n\nèææºè¿æ¥å®¹å¨ç½ç»æ¥å£çæ¹å¼ï¼\n\n * macvtapï¼æ©æé»è®¤ï¼ï¼åå»ºäºä¸ä¸ª MACVTAP è®¾å¤ä»¥ç´æ¥è¿æ¥å°eth0è®¾å¤\n * none(ä½¿ç¨èªå®ä¹ç½ç»ï¼åªåå»ºä¸ä¸ª tap è®¾å¤ï¼ä¸åå»º veth pair)\n * tcfilter(éè¿ tc filter è§åå°æä»¶æä¾çç½ç»æ¥å£æµééå®åå°è¿æ¥å° VM ç tap æ¥å£) ï¼ç°å¨é»è®¤ï¼\n * bridgeï¼ï¼å·²å¼ç¨ï¼\n\n# Internetworking model\n# Determines how the VM should be connected to the\n# the container network interface\n# Options:\n#\n#   - macvtap\n#     Used when the Container network interface can be bridged using\n#     macvtap.\n#\n#   - none\n#     Used when customize network. Only creates a tap device. No veth pair.\n#\n#   - tcfilter\n#     Uses tc filter rules to redirect traffic from the network interface\n#     provided by plugin to a tap interface connected to the VM.\n#\ninternetworking_model="tcfilter"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nTC-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç CNI æä»¶å¼å®¹æ§ä»¥åä¸ MACVTAP ç¸å½çæ§è½ã\n\n * eth0å±äºveth-pairç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥å®¿ä¸»æº\n * tap0_kataå±äºtapç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥qemuåå»ºçhypervisor\n * ä½¿ç¨tcç­ç¥æéeth0ç½ç»æ¥å£åtap0_kataç½ç»æ¥å£\n\nSandboxç¯å¢ä¸­åªæeth0ç½ç»æ¥å£ï¼è¿ä¸ªæ¥å£æ¯qemuåtapæ¨¡æåºçæ¥å£ï¼macãipãæ©ç é½åå®¿ä¸»æºä¸­cniåå»ºçç½ç»å½åç©ºé´ä¸­eth0çéç½®ä¸æ ·\n\nContainerè¿è¡å¨Sandboxç¯å¢ä¸­ï¼Containeréç¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´æ¹å¼åå»ºå®¹å¨ï¼æä»¥å¨containerä¸­çå°çç½ç»éç½®åSandboxä¸æ ·\n\n\n# ç½ç»æµéèµ°åï¼\n\næµéè¿å¥å®¿ä¸»æºåé¦åç±ç©çç½ç»éè¿veth pairæ¥å¥å°net namespaceï¼net namespaceä¸­å¨ä½¿ç¨TC filter è§åæµéå°tapç½ç»æ¥å£ï¼ç¶ååéè¿tapç½ç»æ¥å£ææµééå¥èæåç¯å¢ä¸­ï¼æåèæåç¯å¢ä¸­çå®¹å¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´åå°±å¯ä»¥å¨å®¹å¨ä¸­æ¿å°ç½ç»æµé\n\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: tunl0@NONE: <NOARP> mtu 1480 qdisc noop state DOWN group default qlen 1000\n link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if113: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc noqueue state UP group default qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff link-netnsid 0\n inet 10.192.181.55/32 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n5: tap0_kata: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc mq state UNKNOWN group default qlen 1000\n link/ether ee:32:c5:ac:30:06 brd ff:ff:ff:ff:ff:ff\n inet6 fe80::ec32:c5ff:feac:3006/64 scope link\n valid_lft forever preferred_lft forever\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n Sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n Sent 936 bytes 15 pkt (dropped 0, overlimits 0 requeues 0\n backlog 0b 0p requeues 0\n[root@rqy-k8s-1 kbuser]# kubectl exec -it hostpath-kata-57477fb8f7-ls6mq sh\n/ # ip addr\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc fq qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff\n inet 10.192.181.55/32 brd 10.192.181.55 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n> calicoç½ç»æ¨¡åç½ç»æµåï¼ -å®¹å¨æµééè¿veth pairå°è¾¾å®¿ä¸»æºçç½ç»å½åç©ºé´ä¸ã -æ ¹æ®å®¹å¨è¦è®¿é®çIPæå¨çå­ç½CIDRåä¸»æºä¸çè·¯ç±è§åï¼æ¾å°ä¸ä¸è·³è¦å°è¾¾çå®¿ä¸»æºIPã -æµéå°è¾¾ä¸ä¸è·³çå®¿ä¸»æºåï¼æ ¹æ®å½åå®¿ä¸»æºä¸çè·¯ç±è§åï¼ç´æ¥å°è¾¾å¯¹ç«¯å®¹å¨çveth pairæå¨å®¿ä¸»æºçä¸ç«¯ï¼æç»è¿å¥å®¹å¨ã\n\n\n# å­å¨\n\nstorage\n\n * virtio SCSIï¼å¨åºäºåçå¾å½¢é©±å¨ç¨åºä¸ä½¿ç¨ï¼\n * virtio FSï¼é»è®¤ï¼\n * Devicemapperï¼åè®¾å¤ï¼\n\nä» Kata Containers ç 2.0 çæ¬å¼å§ï¼virtio-fsæ¯é»è®¤çæä»¶ç³»ç»å±äº«æºå¶ï¼åç«¯æ¯virtiofsdå®æ¤è¿ç¨ï¼ã\n\n\n# virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯\n\n 1. virtio-9p æ²¡æéå¯¹èæååºæ¯æä¾ä¼å\n 2. virtio-fs å©ç¨äº hypervisor åèææºå¤äºç¸åèç¹çä¼å¿\n 3. DAX ç¹æ§ï¼æä»¶åå®¹æ å°å°å®¿ä¸»æºçåå­çªå£ï¼å®¢æ·æºç´æ¥è®¿é®å®¿ä¸»æºç page cache\n    * åå°åå­å ç¨ï¼å ä¸ºå®¢æ·æº cache å·²ç»è¢«ç»è¿äº\n 4. ç¸æ¯ virtio-9pï¼virtio-fs å·ææ´å¥½ç POSIX åè§æ§\n\n\n# virtiofs\n\n * æææ°æ®é½è¦ç»è¿virtiofsï¼ä¸ç®¡æ¯éåæ°æ®è¿æ¯â½¹ç»å­å¨å·ãèææºè¦åå®¿ä¸»æºæ°æ® äº¤äºï¼å°±å¿é¡»è¦ç©¿è¿qemuï¼virtiofså°±æ¯ç©¿è¿qemuçæ¡¥æ¢ï¼æä¾å±äº«â½ä»¶æºå¶ã\n * gueståhostæ°æ®ä¼ è¾é½æ¯éè¿virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äºvirtiofsdè¿ç¨çæéã\n * æ°æ®ç¸å³çæä½æç»è¿æ¯å¨å®¿ä¸»æºä¸ï¼â½å¦éåå±çåå¹¶ï¼ä»ç¶æ¯containerdçå­å¨å±æä»¶snapshotterå®æï¼åºå±ä»ç¶æ¯è°â½¤äºoverlayfsâ½ä»¶ç³»ç»\n\n[root@localhost hff]# ps -ef | grep 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28330     1  0 10:49 ?        00:00:00 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28342 28330  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     28348     1  0 10:49 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 -name sandbox-55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774 -uuid 27f404fa-1887-4529-bbbb-df1525845c98 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/qmp.sock,server=on,wait=off -m 2048M,slots=10,maxmem=8773M -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-3099871275,guest-cid=3099871275 -chardev socket,id=char-3352582b4396a8ee,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-3352582b4396a8ee,tag=kataShared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=7e:c7:e5:c6:8c:d7,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048M,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none -pidfile /run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     28355 28342  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\n\n\n1\n2\n3\n4\n5\n\n\næ¯â¼ä¸ª virtiofsdè¿ç¨çfdåæ°é½ç­äº3ï¼å ä¸ºâ½ä»¶æè¿°ç¬¦æ¯è¿ç¨ç¬â½´çï¼STDIOå  æ®äº0ï¼1å2ï¼é£ä¹virtiofsdç¬¬â¼ä¸ªå¯â½¤çfd numå°±æ¯3äº\n\n\n# å­å¨éç½®\n\n\n# å­å¨è·¯å¾ï¼\n\n/run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/\n\n[root@localhost ~]# find / -name hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/mounts/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/shared/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/containerd/io.containerd.runtime.v2.task/k8s.io/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/199015/fs/etc/hfftest0413-etc\n\n\n1\n2\n3\n4\n5\n\n\n\n# virtiofsd cache\n\nguest çææ¶ä¼æå®åå­å¤§å°ï¼virtiofsd ä¼å±äº«ä½¿ç¨ guest çåå­ãé»è®¤ä½¿ç¨memory-backend-file åå­å¯¹è±¡ã\n\nguest å host æ°æ®ä¼ è¾é½æ¯éè¿ virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äº virtiofsd è¿ç¨çæéã\n\n\n# DAX(ç´æ¥è®¿é®)\n\nDAX windows æ¯ä¸åèæåå­åºåï¼éè¿ PCI Bar ææä»¶æ å°å° guest éé¢ï¼å¹¶ä¸çæ­£çå ç¨ä¸»æºé£ä¹å¤åå­ï¼å³ä½¿æ 100 ä¸ªèææºï¼è®¾ç½®ç DAX cache æ¯ 1Gï¼ä¹ä¸ä¼ççä½¿ç¨ 100G åå­ã\n\nå¦ææ²¡æ DAXï¼åå­ä½¿â½¤éå¯è½ä¼â¾®å¸¸â¼¤ï¼å ä¸ºæ¯ä¸ªÂ guesté½æâ¾â¼°çâ½ä»¶ç¼å²åºã\n\nKata Containers å®æ¹ä¸è½½ççæ¬é»è®¤æ²¡ææ¯æï¼éè¦ç¼è¯å®è£ gitlab æç®¡ç virtio-fs qemu é¡¹ç® qemu5.0-virtiofs-dax åæ¯ï¼éè¦åç¬ç¼è¯qemu?qemu5.0-virtiofs-dax????\n\n * configuration.toml è®¾ç½®virtio_fs_cache_size dax window â¼¤â¼©\n\n\n# virtiofsdå·²ç¥é®é¢æ±æ»\n\nhttps://github.com/kata-containers/runtime/issues/2797\n\n\n# containerdçSnapshotter\n\nSnapshotä¸ºcontainerdå®ç°äºSnapshotterç¨äºç®¡çæä»¶ç³»ç»ä¸å®¹å¨éåçå¿«ç§åå®¹å¨çrootfsæè½½åå¸è½½ç­æä½åè½ã snapshotterå¯¹æ Dockerä¸­çgraphdriverå­å¨é©±å¨çè®¾è®¡ã\n\nhttps://blog.mobyproject.org/where-are-containerds-graph-drivers-145fc9b7255\n\n\n# åèèµæ\n\nhttps://blog.csdn.net/u010827484/article/details/117488338 https://github.com/kata-containers/kata-containers/blob/main/docs/design/architecture/networking.md http://miaoyq.com/kata-containers-share/',normalizedContent:'# ç½ç»\n\nèææºè¿æ¥å®¹å¨ç½ç»æ¥å£çæ¹å¼ï¼\n\n * macvtapï¼æ©æé»è®¤ï¼ï¼åå»ºäºä¸ä¸ª macvtap è®¾å¤ä»¥ç´æ¥è¿æ¥å°eth0è®¾å¤\n * none(ä½¿ç¨èªå®ä¹ç½ç»ï¼åªåå»ºä¸ä¸ª tap è®¾å¤ï¼ä¸åå»º veth pair)\n * tcfilter(éè¿ tc filter è§åå°æä»¶æä¾çç½ç»æ¥å£æµééå®åå°è¿æ¥å° vm ç tap æ¥å£) ï¼ç°å¨é»è®¤ï¼\n * bridgeï¼ï¼å·²å¼ç¨ï¼\n\n# internetworking model\n# determines how the vm should be connected to the\n# the container network interface\n# options:\n#\n#   - macvtap\n#     used when the container network interface can be bridged using\n#     macvtap.\n#\n#   - none\n#     used when customize network. only creates a tap device. no veth pair.\n#\n#   - tcfilter\n#     uses tc filter rules to redirect traffic from the network interface\n#     provided by plugin to a tap interface connected to the vm.\n#\ninternetworking_model="tcfilter"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\ntc-filter æ¯é»è®¤è®¾ç½®ï¼å ä¸ºå®åè®¸æ´ç®åçéç½®ãæ´å¥½ç cni æä»¶å¼å®¹æ§ä»¥åä¸ macvtap ç¸å½çæ§è½ã\n\n * eth0å±äºveth-pairç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥å®¿ä¸»æº\n * tap0_kataå±äºtapç±»åæ¥å£ï¼ä¸ç«¯æ¥å¥cniåå»ºçç½ç»å½åç©ºé´ï¼ä¸ç«¯æ¥å¥qemuåå»ºçhypervisor\n * ä½¿ç¨tcç­ç¥æéeth0ç½ç»æ¥å£åtap0_kataç½ç»æ¥å£\n\nsandboxç¯å¢ä¸­åªæeth0ç½ç»æ¥å£ï¼è¿ä¸ªæ¥å£æ¯qemuåtapæ¨¡æåºçæ¥å£ï¼macãipãæ©ç é½åå®¿ä¸»æºä¸­cniåå»ºçç½ç»å½åç©ºé´ä¸­eth0çéç½®ä¸æ ·\n\ncontainerè¿è¡å¨sandboxç¯å¢ä¸­ï¼containeréç¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´æ¹å¼åå»ºå®¹å¨ï¼æä»¥å¨containerä¸­çå°çç½ç»éç½®åsandboxä¸æ ·\n\n\n# ç½ç»æµéèµ°åï¼\n\næµéè¿å¥å®¿ä¸»æºåé¦åç±ç©çç½ç»éè¿veth pairæ¥å¥å°net namespaceï¼net namespaceä¸­å¨ä½¿ç¨tc filter è§åæµéå°tapç½ç»æ¥å£ï¼ç¶ååéè¿tapç½ç»æ¥å£ææµééå¥èæåç¯å¢ä¸­ï¼æåèæåç¯å¢ä¸­çå®¹å¨å±äº«å®¿ä¸»æºç½ç»å½åç©ºé´åå°±å¯ä»¥å¨å®¹å¨ä¸­æ¿å°ç½ç»æµé\n\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: tunl0@none: <noarp> mtu 1480 qdisc noop state down group default qlen 1000\n link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if113: <broadcast,multicast,up,lower_up> mtu 1440 qdisc noqueue state up group default qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff link-netnsid 0\n inet 10.192.181.55/32 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n5: tap0_kata: <broadcast,multicast,up,lower_up> mtu 1440 qdisc mq state unknown group default qlen 1000\n link/ether ee:32:c5:ac:30:06 brd ff:ff:ff:ff:ff:ff\n inet6 fe80::ec32:c5ff:feac:3006/64 scope link\n valid_lft forever preferred_lft forever\n[root@rqy-k8s-1 hff]# ip netns exec cni-c1dea1e8-5df7-f16e-4810-e51d8895ca20 tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n sent 936 bytes 15 pkt (dropped 0, overlimits 0 requeues 0\n backlog 0b 0p requeues 0\n[root@rqy-k8s-1 kbuser]# kubectl exec -it hostpath-kata-57477fb8f7-ls6mq sh\n/ # ip addr\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue qlen 1000\n link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n inet 127.0.0.1/8 scope host lo\n valid_lft forever preferred_lft forever\n inet6 ::1/128 scope host\n valid_lft forever preferred_lft forever\n2: eth0: <broadcast,multicast,up,lower_up> mtu 1440 qdisc fq qlen 1000\n link/ether de:95:a9:f2:89:db brd ff:ff:ff:ff:ff:ff\n inet 10.192.181.55/32 brd 10.192.181.55 scope global eth0\n valid_lft forever preferred_lft forever\n inet6 fe80::dc95:a9ff:fef2:89db/64 scope link\n valid_lft forever preferred_lft forever\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n> calicoç½ç»æ¨¡åç½ç»æµåï¼ -å®¹å¨æµééè¿veth pairå°è¾¾å®¿ä¸»æºçç½ç»å½åç©ºé´ä¸ã -æ ¹æ®å®¹å¨è¦è®¿é®çipæå¨çå­ç½cidråä¸»æºä¸çè·¯ç±è§åï¼æ¾å°ä¸ä¸è·³è¦å°è¾¾çå®¿ä¸»æºipã -æµéå°è¾¾ä¸ä¸è·³çå®¿ä¸»æºåï¼æ ¹æ®å½åå®¿ä¸»æºä¸çè·¯ç±è§åï¼ç´æ¥å°è¾¾å¯¹ç«¯å®¹å¨çveth pairæå¨å®¿ä¸»æºçä¸ç«¯ï¼æç»è¿å¥å®¹å¨ã\n\n\n# å­å¨\n\nstorage\n\n * virtio scsiï¼å¨åºäºåçå¾å½¢é©±å¨ç¨åºä¸ä½¿ç¨ï¼\n * virtio fsï¼é»è®¤ï¼\n * devicemapperï¼åè®¾å¤ï¼\n\nä» kata containers ç 2.0 çæ¬å¼å§ï¼virtio-fsæ¯é»è®¤çæä»¶ç³»ç»å±äº«æºå¶ï¼åç«¯æ¯virtiofsdå®æ¤è¿ç¨ï¼ã\n\n\n# virtio-9p å virtio-fs æä»¶ç³»ç»å¯¹æ¯\n\n 1. virtio-9p æ²¡æéå¯¹èæååºæ¯æä¾ä¼å\n 2. virtio-fs å©ç¨äº hypervisor åèææºå¤äºç¸åèç¹çä¼å¿\n 3. dax ç¹æ§ï¼æä»¶åå®¹æ å°å°å®¿ä¸»æºçåå­çªå£ï¼å®¢æ·æºç´æ¥è®¿é®å®¿ä¸»æºç page cache\n    * åå°åå­å ç¨ï¼å ä¸ºå®¢æ·æº cache å·²ç»è¢«ç»è¿äº\n 4. ç¸æ¯ virtio-9pï¼virtio-fs å·ææ´å¥½ç posix åè§æ§\n\n\n# virtiofs\n\n * æææ°æ®é½è¦ç»è¿virtiofsï¼ä¸ç®¡æ¯éåæ°æ®è¿æ¯â½¹ç»å­å¨å·ãèææºè¦åå®¿ä¸»æºæ°æ® äº¤äºï¼å°±å¿é¡»è¦ç©¿è¿qemuï¼virtiofså°±æ¯ç©¿è¿qemuçæ¡¥æ¢ï¼æä¾å±äº«â½ä»¶æºå¶ã\n * gueståhostæ°æ®ä¼ è¾é½æ¯éè¿virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äºvirtiofsdè¿ç¨çæéã\n * æ°æ®ç¸å³çæä½æç»è¿æ¯å¨å®¿ä¸»æºä¸ï¼â½å¦éåå±çåå¹¶ï¼ä»ç¶æ¯containerdçå­å¨å±æä»¶snapshotterå®æï¼åºå±ä»ç¶æ¯è°â½¤äºoverlayfsâ½ä»¶ç³»ç»\n\n[root@localhost hff]# ps -ef | grep 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28330     1  0 10:49 ?        00:00:00 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774\nroot     28342 28330  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     28348     1  0 10:49 ?        00:00:00 /opt/kata/bin/qemu-system-x86_64 -name sandbox-55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774 -uuid 27f404fa-1887-4529-bbbb-df1525845c98 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/qmp.sock,server=on,wait=off -m 2048m,slots=10,maxmem=8773m -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-3099871275,guest-cid=3099871275 -chardev socket,id=char-3352582b4396a8ee,path=/run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-3352582b4396a8ee,tag=katashared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=7e:c7:e5:c6:8c:d7,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048m,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none -pidfile /run/vc/vm/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     28355 28342  0 10:49 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/55e043c4c5eacba28c8d97a2aa96f76f153c5f9e49a1ad51f1031237002cf774/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\n\n\n1\n2\n3\n4\n5\n\n\næ¯â¼ä¸ª virtiofsdè¿ç¨çfdåæ°é½ç­äº3ï¼å ä¸ºâ½ä»¶æè¿°ç¬¦æ¯è¿ç¨ç¬â½´çï¼stdioå  æ®äº0ï¼1å2ï¼é£ä¹virtiofsdç¬¬â¼ä¸ªå¯â½¤çfd numå°±æ¯3äº\n\n\n# å­å¨éç½®\n\n\n# å­å¨è·¯å¾ï¼\n\n/run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/\n\n[root@localhost ~]# find / -name hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/mounts/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/kata-containers/shared/sandboxes/3b54b3b02fc7f6905d01aedfc4eb209cfb11fd9136006ed6e11e1e26c0f48562/shared/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/run/containerd/io.containerd.runtime.v2.task/k8s.io/c7c33d3c7666933c6f1c182bb49bf850c5ca99f08b4595b0f37e6f817bb52768/rootfs/etc/hfftest0413-etc\n/var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/199015/fs/etc/hfftest0413-etc\n\n\n1\n2\n3\n4\n5\n\n\n\n# virtiofsd cache\n\nguest çææ¶ä¼æå®åå­å¤§å°ï¼virtiofsd ä¼å±äº«ä½¿ç¨ guest çåå­ãé»è®¤ä½¿ç¨memory-backend-file åå­å¯¹è±¡ã\n\nguest å host æ°æ®ä¼ è¾é½æ¯éè¿ virtio-fsï¼åæ¬å®¹å¨éååå®¹å¨å·ï¼è¯»åæéåå³äº virtiofsd è¿ç¨çæéã\n\n\n# dax(ç´æ¥è®¿é®)\n\ndax windows æ¯ä¸åèæåå­åºåï¼éè¿ pci bar ææä»¶æ å°å° guest éé¢ï¼å¹¶ä¸çæ­£çå ç¨ä¸»æºé£ä¹å¤åå­ï¼å³ä½¿æ 100 ä¸ªèææºï¼è®¾ç½®ç dax cache æ¯ 1gï¼ä¹ä¸ä¼ççä½¿ç¨ 100g åå­ã\n\nå¦ææ²¡æ daxï¼åå­ä½¿â½¤éå¯è½ä¼â¾®å¸¸â¼¤ï¼å ä¸ºæ¯ä¸ªÂ guesté½æâ¾â¼°çâ½ä»¶ç¼å²åºã\n\nkata containers å®æ¹ä¸è½½ççæ¬é»è®¤æ²¡ææ¯æï¼éè¦ç¼è¯å®è£ gitlab æç®¡ç virtio-fs qemu é¡¹ç® qemu5.0-virtiofs-dax åæ¯ï¼éè¦åç¬ç¼è¯qemu?qemu5.0-virtiofs-dax????\n\n * configuration.toml è®¾ç½®virtio_fs_cache_size dax window â¼¤â¼©\n\n\n# virtiofsdå·²ç¥é®é¢æ±æ»\n\nhttps://github.com/kata-containers/runtime/issues/2797\n\n\n# containerdçsnapshotter\n\nsnapshotä¸ºcontainerdå®ç°äºsnapshotterç¨äºç®¡çæä»¶ç³»ç»ä¸å®¹å¨éåçå¿«ç§åå®¹å¨çrootfsæè½½åå¸è½½ç­æä½åè½ã snapshotterå¯¹æ dockerä¸­çgraphdriverå­å¨é©±å¨çè®¾è®¡ã\n\nhttps://blog.mobyproject.org/where-are-containerds-graph-drivers-145fc9b7255\n\n\n# åèèµæ\n\nhttps://blog.csdn.net/u010827484/article/details/117488338 https://github.com/kata-containers/kata-containers/blob/main/docs/design/architecture/networking.md http://miaoyq.com/kata-containers-share/',charsets:{cjk:!0}},{title:"kata cgroupåèµæºéå¶",frontmatter:{title:"kata cgroupåèµæºéå¶",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/d4921b/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kata cgroupåèµæºéå¶"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata cgroupåèµæºéå¶"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata cgroupåèµæºéå¶"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/03.kata%20cgroup%E5%8F%8A%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.md",key:"v-240a9dec",path:"/pages/d4921b/",headers:[{level:2,title:"éªè¯1ï¼ æ¥çcgroupå¤§å°",slug:"éªè¯1-æ¥çcgroupå¤§å°",normalizedTitle:"éªè¯1ï¼ æ¥çcgroupå¤§å°",charIndex:1106},{level:3,title:"sandboxcgrouponly=true",slug:"sandbox-cgroup-only-true",normalizedTitle:"sandboxcgrouponly=true",charIndex:null},{level:3,title:"sandboxcgrouponly=falseï¼ç»æå=trueï¼",slug:"sandbox-cgroup-only-false-ç»æå-true",normalizedTitle:"sandboxcgrouponly=falseï¼ç»æå=trueï¼",charIndex:null},{level:3,title:"æ¥çå½ä»¤ï¼",slug:"æ¥çå½ä»¤",normalizedTitle:"æ¥çå½ä»¤ï¼",charIndex:3331},{level:2,title:"éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç",slug:"éªè¯2-å¦æä¸è®¾ç½®request-limit-kubepod-cgroupçéå¶æ¯ææ ·ç",normalizedTitle:"éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç",charIndex:5356},{level:2,title:"éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",slug:"éªè¯3-éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",normalizedTitle:"éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½",charIndex:6185},{level:2,title:"éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿",slug:"éªè¯4-éªè¯å¦æä¸è®¾ç½®request-limit-cpu-memçä½¿ç¨ä¸çº¿",normalizedTitle:"éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿",charIndex:6814},{level:2,title:"éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼",slug:"éªè¯5-éªè¯cpu-memå°äº1c-256miçæåµ-no-overhead",normalizedTitle:"éªè¯5ï¼ éªè¯cpu memå°äº1c 256miçæåµï¼no overheadï¼",charIndex:7526},{level:2,title:"éªè¯6ï¼ æå°èµæºå ç¨æµè¯",slug:"éªè¯6-æå°èµæºå ç¨æµè¯",normalizedTitle:"éªè¯6ï¼ æå°èµæºå ç¨æµè¯",charIndex:8677},{level:2,title:"éªè¯7ï¼ æ¥çkata vmä¸­çcgroup",slug:"éªè¯7-æ¥çkata-vmä¸­çcgroup",normalizedTitle:"éªè¯7ï¼ æ¥çkata vmä¸­çcgroup",charIndex:10477},{level:2,title:"ä¸¤ç§cgrouppath:",slug:"ä¸¤ç§cgrouppath",normalizedTitle:"ä¸¤ç§cgrouppath:",charIndex:14110},{level:2,title:"pod overhead",slug:"pod-overhead",normalizedTitle:"pod overhead",charIndex:489},{level:2,title:"sandboxcgrouponly",slug:"sandbox-cgroup-only",normalizedTitle:"sandboxcgrouponly",charIndex:null},{level:2,title:"default_vcpus/memory",slug:"default-vcpus-memory",normalizedTitle:"default_vcpus/memory",charIndex:716},{level:2,title:"kataèµæºå¼é",slug:"kataèµæºå¼é",normalizedTitle:"kataèµæºå¼é",charIndex:15028},{level:2,title:"kataç»ä»¶è¿ç¨ï¼",slug:"kataç»ä»¶è¿ç¨",normalizedTitle:"kataç»ä»¶è¿ç¨ï¼",charIndex:15107},{level:2,title:"ä¸æ¯æCgroups V2",slug:"ä¸æ¯æcgroups-v2",normalizedTitle:"ä¸æ¯æcgroups v2",charIndex:15676},{level:2,title:"éè¿æ³¨éä¿®æ¹éç½®ï¼",slug:"éè¿æ³¨éä¿®æ¹éç½®",normalizedTitle:"éè¿æ³¨éä¿®æ¹éç½®ï¼",charIndex:17610},{level:2,title:"æå¼--feature-gates PodOverhead",slug:"æå¼-feature-gates-podoverhead",normalizedTitle:"æå¼--feature-gates podoverhead",charIndex:17918},{level:3,title:"å¯ç¨RuntimeClassåå¥æ§å¶",slug:"å¯ç¨runtimeclassåå¥æ§å¶",normalizedTitle:"å¯ç¨runtimeclassåå¥æ§å¶",charIndex:18239},{level:3,title:"è®¾ç½®podOverHead",slug:"è®¾ç½®podoverhead",normalizedTitle:"è®¾ç½®podoverhead",charIndex:18437},{level:2,title:"virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼",slug:"virtio-memåå­ç­ææ-ä»æ¯æqemu",normalizedTitle:"virtio-memåå­ç­ææï¼ä»æ¯æqemuï¼",charIndex:18630}],headersStr:"éªè¯1ï¼ æ¥çcgroupå¤§å° sandboxcgrouponly=true sandboxcgrouponly=falseï¼ç»æå=trueï¼ æ¥çå½ä»¤ï¼ éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½ éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿ éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼ éªè¯6ï¼ æå°èµæºå ç¨æµè¯ éªè¯7ï¼ æ¥çkata vmä¸­çcgroup ä¸¤ç§cgrouppath: pod overhead sandboxcgrouponly default_vcpus/memory kataèµæºå¼é kataç»ä»¶è¿ç¨ï¼ ä¸æ¯æCgroups V2 éè¿æ³¨éä¿®æ¹éç½®ï¼ æå¼--feature-gates PodOverhead å¯ç¨RuntimeClassåå¥æ§å¶ è®¾ç½®podOverHead virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼",content:'# åèï¼\n\n * host-cgroups.md\n * vcpu-handling.md\n\n\n# ç»è®º\n\n * cgroupsPathçè·¯å¾æ ¹æ®Qosç±»å«ä¸å\n * kata_overheadçcpuåmemæ²¡æéå¶ï¼è½ç¨å°å®¿ä¸»æºææèµæºï¼å¦æä¸å¼å¯sandbox_cgroup_onlyä¼å¯¼è´ä¸»æºèµæºè¢«æ¢å \n * kubepod cgroupéå¶=limit+overheadï¼å®¹å¨ä¸å¡è´è½½å°±æ¯å¨è¿ä¸ªéå¶ä¹åä½¿ç¨ï¼ç¶ååºåsandbox_cgroup_onlyæ¯å¦å¼å¯å³å®kata vm(sandbox)å¼éæ¯å¦ç»è®¡å°kubepodä¸­ï¼å¦ææ¯åä¸å¡ç³è¯·cpu memèµæºå°±å¿é¡»èèkata sandboxå¼é\n * èææºå¤§å°=kata vmä¸­æèè¯´podä¸­çå°çcpu memï¼lscpu lsmemï¼=default+limitï¼è§éªè¯1ï¼\n * kubectl describe node | grep test-kataçå°çèµæºç³è¯·=limit+overheadï¼åruncï¼ï¼è§éªè¯1ï¼\n * kubectl top podçå°çæ¯ä¸å¡çæ­£çè´è½½å¼éï¼ï¼\n * pod overheadä¼å½±åè°åº¦ï¼overheadåªä½ç¨äºsandboxå¼éï¼ä¸è½ä½ç¨äºä¸å¡è´è½½ï¼è§éªè¯3ï¼\n * ä¸ºäºéå¶èµæºæ¢å é®é¢ï¼å»ºè®®å¼å¯sandbox_cgroup_only=true,overheadå»ºè®®ä¸è®¾ç½®ï¼å¾å®ï¼ï¼ä»¥ä¸è¯´æåå¨sandbox_cgroup_only=trueåæä¸è¿è¡è¯´æ\n * ä¸å¡è´è½½+sandboxå¼éæå¤§è½ä½¿ç¨çèµæºéå¶=limit+overheadï¼overheadé¨ååªè½æ¯é¢å¤å¼éç¨ï¼ï¼è§éªè¯3ï¼\n * default_vcpus/memoryï¼å½±åèææºçå¤§å°/å¯å¨æ¶é´ï¼è¿ä¸ªå¼å®æ¹ä¸å»ºè®®ä¿®æ¹\n * å¦æcontaineræªè®¾ç½®limitï¼åkubepod cgroupæ éå¶ï¼ä½æ¯ä¸å¡è´è½½åªè½ä½¿ç¨defaultè®¾ç½®ç1G2G???ææªæ¾å°å¨åªåçéå¶ï¼ï¼è§éªè¯7ï¼ï¼å¦æè®¾ç½®äºlimitï¼åè¿ä¸ªdefaultååªå½±åèææºå¤§å°ï¼ä½ä¸å½±åkubepod cgroupéå¶ï¼è§éªè¯1ï¼\n * ~ä¸ä¸ªPodçæå°è§æ ¼æ¯1C 256Mï¼å½ä½äº 256M æ¶ï¼ä¼éç½®ä¸º 2Gãï¼æ¯æçæå¤§åå­è§æ ¼æ¯256GBãå¦æç¨æ·åéçåå­è§æ ¼è¶è¿256GBï¼å¯è½ä¼åºç°æªå®ä¹çéè¯¯ï¼å®å¨å®¹å¨æä¸æ¯æè¶è¿256GBçå¤§åå­åºæ¯ã~ï¼æªæ¾å°å®æ¹åºå¤ï¼åºè¯¥åªæ¯openEuleråé¨åçéå¶ï¼ï¼è§éªè¯5ï¼\n * å¦æä¸è®¾ç½®requestï¼årequestçå¼ålimité»è®¤ç¸ç­\n\n\n# ä¸äºéªè¯\n\n\n# éªè¯1ï¼ æ¥çcgroupå¤§å°\n\ncpu.cfs_period_usæ¯CFSç®æ³çä¸ä¸ªè°åº¦å¨æï¼ä¸è¬å®çå¼æ¯100000usï¼å³100msã cpu.cfs_quota_usè¡¨ç¤ºå¨CFSç®æ³ä¸­ï¼å¨ä¸ä¸ªè°åº¦å¨æéè¯¥æ§å¶ç»è¢«åè®¸çè¿è¡æ¶é´ï¼æ¯å¦è¿ä¸ªå¼ä¸º50000æ¶ï¼å°±æ¯50msãç¨è¿ä¸ªå¼å»é¤ä»¥è°åº¦å¨æcpu.cfs_period_usï¼å³50ms/100ms=0.5ï¼å¾å°çå¼è¡¨ç¤ºè¯¥æ§å¶ç»è¢«åè®¸ä½¿ç¨çCPUæå¤§éé¢æ¯0.5ä¸ªCPUãå¨æçç³»ç»éï¼è¿ä¸ªå¼æ¯-1ï¼ä¸ºé»è®¤å¼ï¼è¡¨ç¤ºä¸éå¶ã\n\ndefault_vcpu=1 default_memory=2Gi overhead: "podFixed":{"cpu":"250m","memory":"160Mi"} pod Qos: resources: requests: memory: "500Mi" cpu: "0.5" limits: memory: "3000Mi" cpu: "4"\n\n\n# sandbox_cgroup_only=true\n\n"cgroupsPath": "/kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼ kubepods_mem: 3313500160 (~3.08G) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\nlscpu: 5 (default+limit) lsmemï¼ Memory block size: 128M Memory block size: 128M Total online memory: 5G (default+limit)\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660Mi (10%) 3160Mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1Mi kubectl top nodeï¼ 1306m 16% 5513Mi 84%\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 27.4M - - [root@localhost ~]# systemd-cgtop | grep pod287707dd-0fda-4fab-874d-e1b00e87390a /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a - - 193.4M - -\n\n\n# sandbox_cgroup_only=falseï¼ç»æå=trueï¼\n\n"cgroupsPath": "/kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44/87b5990ce61e4ff193124fc60e4a68c7061cf9299688c6c521cae29103bc3ef5",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 3313500160 (~3.08G) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 24.6M - - [root@localhost ~]# systemd-cgtop | grep pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 /kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 - - 151.7M - -\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660Mi (10%) 3160Mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1Mi kubectl top nodeï¼ 1330m 17% 5507Mi 84%\n\n\n# æ¥çå½ä»¤ï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     4.9M        -        -\n/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6       7      -   132.9M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    23.2M        -        -\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kata_overhead/memory.limit_in_bytes\n9223372036854771712\n[root@localhost ~]#  cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_quota_us\n-1\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/memory.limit_in_bytes\n1241513984\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_quota_us\n125000\n\n[root@localhost ~]#  cat /sys/fs/cgroup/memory/system.slice/kata-monitor.service/memory.limit_in_bytes\n9223372036854771712\n\n[root@localhost ~]# kubectl top pod test-kata\nNAME        CPU(cores)   MEMORY(bytes)\ntest-kata   0m           2Mi\n[root@localhost ~]# kubectl top node\nNAME                    CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%\nlocalhost.localdomain   355m         4%     5469Mi          83%\n\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184Mi (18%)     1184Mi (18%)   16d\n  kube-system                 kata-deploy-q2cnv                                        0 (0%)        0 (0%)       0 (0%)           0 (0%)         21d\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\n\n# éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç\n\n"cgroupsPath": "/kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f/367368f8f5c44bc69b277febfa5d533063f096c65cd9b6729bbc7847a582f51f",\n\nkata_overhead-mem: ~8Gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 9223372036854771712 ~8Gï¼ä¸éï¼ kubepods_cpu cfs_period_us cfs_quota_us: 100000 -1 ä¸é kubectl top podï¼ 1000m 0Mi kubectl top nodeï¼ 1316m 16% 5517Mi 84%\n\n[root@localhost hff]# systemd-cgtop | grep kata /kata_overhead - - 4.9M - - /system.slice/kata-monitor.service 1 - 25.1M - -\n\n[root@localhost hff]# systemd-cgtop | grep pod09a392bc-1080-4044-8015-39f392e3862f /kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f - - 95.8M - -\n\nkubectl describe node | grep test-kataï¼ 250m (3%)ï¼overheadï¼ 0 (0%) 160Mi (2%)ï¼overheadï¼ 0 (0%) 6m30s\n\nkubepodä¸éå¶ï¼ä½æ¯podç¡®å®åªè½ç¨å°limitçå¼\n\n\n# éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½\n\nè®¾ç½®overhead 2C 2Gåï¼limit 3C3G, ææ»¡cpu=6,mem=3Gi\n\n[root@localhost hff]# kubectl get pod\nNAME                              READY   STATUS        RESTARTS   AGE\ntest-kata-5687cdcb66-28lgn        0/1     OutOfmemory   0          17s\ntest-kata-5687cdcb66-2lmd5        0/1     OutOfmemory   0          11s\ntest-kata-5687cdcb66-2pbhm        0/1     OutOfmemory   0          23s\ntest-kata-5687cdcb66-575sb        0/1     OutOfmemory   0          19s\ntest-kata-5687cdcb66-5gvt2        0/1     OutOfmemory   0          5s\ntest-kata-5687cdcb66-62fbd        0/1     OutOfmemory   0          33s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿\n\nè®¾ç½®overhead 2C 2Gåï¼limitä¸è®¾ç½®ï¼ ææ»¡cpu=6,mem=1Gi\n\n[root@localhost hff]# kubectl get pod  -w\nNAME                              READY   STATUS        RESTARTS   AGE\ntest-kata-55867ffb58-26ndp        0/1     OutOfmemory   0          4s\ntest-kata-55867ffb58-2blnx        0/1     OutOfmemory   0          2s\ntest-kata-55867ffb58-2d858        0/1     OutOfmemory   0          1s\ntest-kata-55867ffb58-2qwzf        0/1     Pending       0          0s\ntest-kata-55867ffb58-4j4hl        0/1     OutOfmemory   0          1s\ntest-kata-55867ffb58-8zzbc        0/1     OutOfmemory   0          2s\ntest-kata-55867ffb58-crflb        0/1     OutOfmemory   0          4s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éªè¯5ï¼ éªè¯cpu memå°äº1C 256Miçæåµï¼no overheadï¼\n\n    resources:\n      requests:\n        memory: "1Mi"\n        cpu: "0.1"\n      limits:\n        memory: "100Mi"\n        cpu: "550m"\n    args:\n    - -cpus\n    - "2"\n    - -mem-total\n    - 100Mi\n    - -mem-alloc-size\n    - 10Mi\n    - -mem-alloc-sleep\n    - 1s\n\n\næ²¡æOOMï¼ä½æ¯podä¸æ­éå¯ï¼ææå¹¶æ²¡æè¢«éç½®æ2G\n\n[root@localhost hff]# kubectl get pod -w\nNAME                              READY   STATUS    RESTARTS   AGE\nkubefilebrowser-896974bcc-z6scd   1/1     Running   3          31d\ntest-kata-6878f4fd9f-76c5k        1/1     Running   2          61s\ntest-runc-79d8bdc4cb-v6j28        1/1     Running   0          75m\ntest-kata-6878f4fd9f-76c5k        0/1     Error     2          72s\ntest-kata-6878f4fd9f-76c5k        0/1     CrashLoopBackOff   2          75s\n\n[root@localhost hff]# kubectl logs test-kata-6878f4fd9f-76c5k\nI0527 07:16:06.932758       1 main.go:26] Allocating "200Mi" memory, in "10Mi" chunks, with a 1s sleep between allocations\nI0527 07:16:06.933058       1 main.go:39] Spawning a thread to consume CPU\nI0527 07:16:06.933082       1 main.go:39] Spawning a thread to consume CPU\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# éªè¯6ï¼ æå°èµæºå ç¨æµè¯\n\nlimit550m/200Miï¼å2C100Miï¼podä¼ä¸æ­éå¯ï¼ä½æ¯ä¸æ¯OOMKilled\n\n        resources:\n          requests:\n            memory: "1Mi"\n            cpu: "0.1"\n          limits:\n            memory: "200Mi"\n            cpu: "550m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100Mi\n        - -mem-alloc-size\n        - 10Mi\n        - -mem-alloc-sleep\n        - 1s\nEvents:\n  Type     Reason          Age                   From                            Message\n  ----     ------          ----                  ----                            -------\n  Normal   Scheduled       <unknown>             default-scheduler               Successfully assigned default/test-kata-68b77bc9f8-zlj5p to localhost.localdomain\n  Normal   Created         36m (x4 over 38m)     kubelet, localhost.localdomain  Created container cpu-stress-kata\n  Normal   Started         36m (x4 over 38m)     kubelet, localhost.localdomain  Started container cpu-stress-kata\n  Normal   SandboxChanged  35m (x4 over 37m)     kubelet, localhost.localdomain  Pod sandbox changed, it will be killed and re-created.\n  Normal   Pulled          7m53s (x11 over 38m)  kubelet, localhost.localdomain  Container image "vish/stress" already present on machine\n  Warning  BackOff         3m5s (x159 over 37m)  kubelet, localhost.localdomain  Back-off restarting failed container\n[root@localhost hff]#\n[root@localhost hff]# kubectl logs test-kata-68b77bc9f8-zlj5p\nI0527 08:13:52.926368       1 main.go:26] Allocating "100Mi" memory, in "10Mi" chunks, with a 1s sleep between allocations\nI0527 08:13:52.926544       1 main.go:39] Spawning a thread to consume CPU\nI0527 08:13:52.926570       1 main.go:39] Spawning a thread to consume CPU\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# éªè¯7ï¼ æ¥çkata vmä¸­çcgroup\n\nä¸è®¾ç½®limitï¼overhead\n\nbash-5.1# more /sys/fs/cgroup/memory/\ncgroup.clone_children               memory.max_usage_in_bytes\ncgroup.event_control                memory.memsw.failcnt\ncgroup.procs                        memory.memsw.limit_in_bytes\ncgroup.sane_behavior                memory.memsw.max_usage_in_bytes\nkubepods/                           memory.memsw.usage_in_bytes\nmemory.failcnt                      memory.move_charge_at_immigrate\nmemory.force_empty                  memory.oom_control\nmemory.kmem.failcnt                 memory.pressure_level\nmemory.kmem.limit_in_bytes          memory.soft_limit_in_bytes\nmemory.kmem.max_usage_in_bytes      memory.stat\nmemory.kmem.slabinfo                memory.swappiness\nmemory.kmem.tcp.failcnt             memory.usage_in_bytes\nmemory.kmem.tcp.limit_in_bytes      memory.use_hierarchy\nmemory.kmem.tcp.max_usage_in_bytes  notify_on_release\nmemory.kmem.tcp.usage_in_bytes      release_agent\nmemory.kmem.usage_in_bytes          system.slice/\nmemory.limit_in_bytes               tasks\nbash-5.1# more /sys/fs/cgroup/memory/kubepods/\nbesteffort/                         memory.max_usage_in_bytes\ncgroup.clone_children               memory.memsw.failcnt\ncgroup.event_control                memory.memsw.limit_in_bytes\ncgroup.procs                        memory.memsw.max_usage_in_bytes\nmemory.failcnt                      memory.memsw.usage_in_bytes\nmemory.force_empty                  memory.move_charge_at_immigrate\nmemory.kmem.failcnt                 memory.oom_control\nmemory.kmem.limit_in_bytes          memory.pressure_level\nmemory.kmem.max_usage_in_bytes      memory.soft_limit_in_bytes\nmemory.kmem.slabinfo                memory.stat\nmemory.kmem.tcp.failcnt             memory.swappiness\nmemory.kmem.tcp.limit_in_bytes      memory.usage_in_bytes\nmemory.kmem.tcp.max_usage_in_bytes  memory.use_hierarchy\nmemory.kmem.tcp.usage_in_bytes      notify_on_release\nmemory.kmem.usage_in_bytes          tasks\nmemory.limit_in_bytes\nbash-5.1# more /sys/fs/cgroup/cpu/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/f3cffcf893000b0c5f6105f1adb94e3be7fa62ebecd801a29b9a77a472d62c86/cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/memory/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/.limit_in_bytes\n9223372036854771712\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\næªæ¾å°default_vcpu/memoryæ¯å¨åªéåçéå¶\n\n\n# kata cgroupè¯´æ\n\nKata Containers å¨ä¸¤å± cgroup ä¸è¿è¡ã\n\n * workload guest\n * VMM host ï¼Kata Containers å¨ä¸¤å± cgroup ä¸è¿è¡ãç¬¬ä¸å±å¨èææºä¸­æ¾ç½®å·¥ä½è´è½½ï¼èç¬¬äºå±å¨ä¸»æºä¸è¿è¡ VMMå å³èçº¿ç¨ãï¼\n\nä» Kubernetes è§åº¦æ¥è®²ï¼Cgroup æçæ¯ Pod Cgroupï¼ç± Kubelet åå»ºï¼éå¶çæ¯ Pod çèµæº; ä» Container è§åº¦æ¥è®²ï¼Cgroup æçæ¯ Container Cgroupï¼ç±å¯¹åºç runtime åå»ºï¼éå¶çæ¯ container çèµæºãä½æ¯ä¸ºäºå¯ä»¥è·åå°æ´åç¡®çå®¹å¨èµæºï¼Kubelet ä¼æ ¹æ® Container Cgroup å»è°æ´ Pod Cgroupã å¨ä¼ ç»ç runtime ä¸­ï¼ä¸¤èæ²¡æå¤ªå¤§çåºå«ã\n\nè Kata Containers å¼å¥ VM çæ¦å¿µï¼æä»¥éå¯¹è¿ç§æåµæä¸¤ç§å¤çæ¹å¼ï¼\n\n * å¯ç¨ SandboxCgroupOnlyï¼é»è®¤ï¼ï¼Kubelet å¨è°æ´ Pod Cgroup çå¤§å°æ¶ï¼ä¼å° sandbox çå¼éç»è®¡è¿å» ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½åkataèææºå¼éçæå¤§ä½¿ç¨éå¶ï¼å¦æä¸è®¾ç½®limitï¼é»è®¤æ¯default_vcpus/mem??ï¼\n * ç¦ç¨ SandboxCgroupOnlyï¼sandbox çå¼éå Pod Cgroup åå¼è®¡ç®ï¼ç¬ç«å­å¨ ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½èªå·±çæå¤§ä½¿ç¨éå¶ï¼kataèææºå¼éåç¬ä¸ä¸ªcgroupèä¸æ²¡æéå¶ï¼å¦æä¸è®¾ç½®limitï¼ä¸å¡ä½¿ç¨é»è®¤æ¯default_vcpus/memï¼\n\n\n# ä¸¤ç§cgrouppath:\n\n * /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f ()\n * /kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6 ()\n\n\n# pod overhead\n\n\n# sandbox_cgroup_only\n\n * å¦æå¯ç¨ï¼è¿è¡æ¶å°å¨ä¸ä¸ªä¸ç¨cgroupä¸­æ·»å æækataè¿ç¨ãæ¯ä¸ªæ²çåªåå»ºä¸ä¸ªcgroupï¼ä¸»æºä¸­çcontainer cgroupå°ä¸ä¼åå»º\n * kata runtimeè°ç¨èå¯ä»¥èªç±å°éå¶ææ¶éæ´ä¸ªKataæ²ççcgroupç»è®¡ä¿¡æ¯ã\n * sandbox cgroupè·¯å¾æ¯å·æPodSandbox annotation(???)çå®¹å¨çç¶cgroupã\n * å¦ææ²¡æcontainer type annotation(??)ï¼åsandbox cgroupå°åå°éå¶\n * æå³ç pod cgroup çå¤§å°éå½ï¼å¹¶èèäº pod å¼éï¼è®¾ç½®podoverheadèèè°åº¦ï¼\n * Kata shim å°å¨sandbox_cgroup_onlypod çä¸ç¨ cgroup ä¸ä¸ºæ¯ä¸ª pod åå»ºä¸ä¸ªå­ cgroup\n * kata shimãqemu çº¿ç¨å°ä¸æ²ç®±å¨åä¸ä¸ª cgroup ä¸­ãå¨è¿ç§æåµä¸ï¼å®ä»¬å°ä¸ vcpu çº¿ç¨å±äº«åä¸ç» cpu åæ ¸\n\n=trueå¥½å¤ï¼\n\n * ä¾¿äºPodèµæºç»è®¡\n * æ´å¥½çä¸»æºèµæºéç¦»\n\n=fasleä¼ç¹åç¼ºç¹ï¼\n\n * ä¸éå¶ä¼æ¶èå¤§éä¸»æºèµæº\n * å¨ä¸ç¨å¼écgroupä¸è¿è¡ææévcpuçº¿ç¨å¯ä»¥æä¾æå³å®éçå¼éåç¡®å¼ï¼å¯ä»¥è®¾ç½®å¼écgroupå¤§å°ï¼æå¨ä¿®æ¹ï¼æ æ¥å£ï¼\n\n\n# default_vcpus/memory\n\n\n# kataèµæºå¼é\n\n * åèæå I/O åç«¯\n * VMM å®ä¾\n * Kata shim è¿ç¨\n * kata monitorå¼éï¼å¦æå¼å¯ï¼\n\n\n# kataç»ä»¶è¿ç¨ï¼\n\n * sandbox qemu-system-x86_64è¿ç¨cgroup\n * containerd-shim-kata-v2è¿ç¨\n * ä¸¤ä¸ªvirtiofsdè¿ç¨\n\nkata podèµ·æ¥åï¼å¶ä¸­ï¼kata shimè¿ç¨åqemuè¿ç¨å ç¨äºå¤§éçåå­å¼éï¼å¶ä¸­ï¼æ²ç®±éçåæ ¸å agent æ¯ç´æ¥åäº«äºåºç¨åå­ä½å¹¶ä¸æ¯åºç¨çä¸é¨åï¼ä¹å°±æ¯è¯´ï¼è¿ä¸é¨åæ¯ç¨æ·å¯è§çå¼éãè VMM æ¬èº«å¨å®¿ä¸»æºä¸çå¼éä»¥å shim-v2 å ç¨çåå­ï¼è½ç¶ç¨æ·åºç¨ä¸å¯è§ï¼ä½åæ ·æ¯ Kata å¸¦æ¥çå¼éï¼å½±ååºç¡è®¾æ½çèµæºæçã\n\nè¿äºåå­å¼ééï¼è¿åæ¬äºå¯å±äº«å¼éåä¸å¯å±äº«å¼éãææå®¿ä¸»è¿è¾¹çä»£ç æ®µåå­ï¼åªè¯»åå­ï¼ï¼å¯ä»¥å±äº« page cacheï¼æä»¥æ¯å±äº«çï¼èå¨æ²ç®±éçä»£ç ï¼åªè¯»ï¼åå­ï¼å¨ä½¿ç¨ DAX ææ¨¡ççæåµä¸ï¼ä¹å¯ä»¥å±äº«åä¸ä»½ãæä»¥ï¼å¯ä»¥å±äº«çåå­å¼éå¨èç¹å¨å±èå´åæ¯å¯ä¸ä¸ä»½ï¼æä»¥å¨æå¤ä¸ªPodçæåµä¸ï¼è¿é¨åçå¸¸æ°å¼éç¸å¯¹èè¨æ¯ä¸å¤ªéè¦çï¼ç¸åçï¼ä¸å¯å±äº«å¼éï¼å°¤å¶æ¯å åå­å¼éï¼ä¼éç Pod çå¢é¿èå¢é¿ï¼çæ¢å¥è¯è¯´ï¼å åå­ï¼å¿åé¡µï¼æ¯æéè¦è¢«éè§çå¼éã\n\nç»¼ä¸ï¼ç¬¬ä¸ä½éè¦è¢«éå¶çå¼éæ¯æ²ç®±åçç¨æ·å¯è§çä¸å¯å±äº«å¼éï¼å°¤å¶æ¯ Agent çå¼éï¼è VMM å shim çå¿åé¡µå¼éæ¬¡ä¹ã\n\n\n# ä¸æ¯æCgroups V2\n\n\n# ä¸äºéè¦ç¥éçéç½®\n\n# Default number of vCPUs per SB/VM:\n# unspecified or 0                --\x3e will be set to 1ï¼ä¸è®¾ç½®æ0åé»è®¤æ¯1ï¼\n# < 0                             --\x3e will be set to the actual number of physical cores(å°äº0åè®¾ä¸ºå®éç©çæ ¸)\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical coresï¼å¤§äºç©çæ ¸é»è®¤ä¸ºç©çæ ¸ï¼\ndefault_vcpus = 1\n\n# Default memory size in MiB for SB/VM.\n# If unspecified then it will be set 2048 MiB.ï¼ä¸è®¾ç½®é»è®¤æ¯2Giï¼\ndefault_memory = 2048\n\n# Default maximum number of vCPUs per SB/VM:\n# unspecified or == 0             --\x3e will be set to the actual number of physical cores or to the maximum numberï¼ä¸è®¾ç½®æ0é»è®¤ä¸ºæå¤§ç©çæ ¸æ°ï¼\n#                                     of vCPUs supported by KVM if that number is exceeded\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical cores or to the maximum number\n#                                     of vCPUs supported by KVM if that number is exceeded\n# WARNING: Depending of the architecture, the maximum number of vCPUs supported by KVM is used when\n# the actual number of physical cores is greater than it.\n# WARNING: Be aware that this value impacts the virtual machine\'s memory footprint and CPU\n# the hotplug functionality. For example, `default_maxvcpus = 240` specifies that until 240 vCPUs\n# can be added to a SB/VM, but the memory footprint will be big. Another example, with\n# `default_maxvcpus = 8` the memory footprint will be small, but 8 will be the maximum number of\n# vCPUs supported by the SB/VM. In general, we recommend that you do not edit this variable,\n# unless you know what are you doing.\n# NOTICE: on arm platform with gicv2 interrupt controller, set it to 8.\ndefault_maxvcpus = 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# éè¿æ³¨éä¿®æ¹éç½®ï¼\n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n runtime_type = "io.containerd.kata.v2"\n privileged_without_host_devices = false\n shim_debug = true\n pod_annotations = ["io.katacontainers.*"] #  <-- look here\n\n\n1\n2\n3\n4\n5\n\n\n> io.katacontainers.config.hypervisor.default_vcpus = 5\n\n\n# æå¼--feature-gates PodOverhead\n\n> /etc/kubernetes/manifests/kube-apiserver.yaml\n\n1.17é»è®¤å³é­ï¼1.18é»è®¤æå¼\n\n> Environment="KUBELET_FEATURE=--feature-gates=RotateKubeletServerCertificate=true,VolumeSnapshotDataSource=true,ExpandCSIVolumes=true,VolumePVCDataSource=true,ServiceTopology=true,EndpointSlice=true,PodOverhead=true"\n\n\n# å¯ç¨RuntimeClassåå¥æ§å¶\n\n> --feature-gates=VolumeSnapshotDataSource=true,ExpandCSIVolumes=true,VolumePVCDataSource=true,TTLAfterFinished=true,ServiceTopology=true,EndpointSlice=true,PodOverhead=true\n\n\n# è®¾ç½®podOverHead\n\nkind: RuntimeClass\napiVersion: node.k8s.io/v1beta1\nmetadata:\n  name: kata-containers\nhandler: kata\noverhead:\n  podFixed:\n  memory: "100Mi"\n  cpu: "100m"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# virtio-memåå­ç­ææï¼ä»æ¯æQEMUï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-virtio-mem-with-kata.md\n\n$ sudo sed -i -e \'s/^#enable_virtio_mem.*$/enable_virtio_mem = true/g\' /etc/kata-containers/configuration.toml\n\n\n1\n\n\n\n# éä»¶\n\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: test-kata\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: test-kata\n  template:\n    metadata:\n      labels:\n        app: test-kata\n    spec:\n      runtimeClassName: kata-containers\n      containers:\n      - image: vish/stress\n        imagePullPolicy: IfNotPresent\n        name: cpu-stress-kata\n        resources:\n          requests:\n            memory: "1Mi"\n            cpu: "0.1"\n          limits:\n            memory: "161Mi"\n            cpu: "350m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100Mi\n        - -mem-alloc-size\n        - 10Mi\n        - -mem-alloc-sleep\n        - 1s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n',normalizedContent:'# åèï¼\n\n * host-cgroups.md\n * vcpu-handling.md\n\n\n# ç»è®º\n\n * cgroupspathçè·¯å¾æ ¹æ®qosç±»å«ä¸å\n * kata_overheadçcpuåmemæ²¡æéå¶ï¼è½ç¨å°å®¿ä¸»æºææèµæºï¼å¦æä¸å¼å¯sandbox_cgroup_onlyä¼å¯¼è´ä¸»æºèµæºè¢«æ¢å \n * kubepod cgroupéå¶=limit+overheadï¼å®¹å¨ä¸å¡è´è½½å°±æ¯å¨è¿ä¸ªéå¶ä¹åä½¿ç¨ï¼ç¶ååºåsandbox_cgroup_onlyæ¯å¦å¼å¯å³å®kata vm(sandbox)å¼éæ¯å¦ç»è®¡å°kubepodä¸­ï¼å¦ææ¯åä¸å¡ç³è¯·cpu memèµæºå°±å¿é¡»èèkata sandboxå¼é\n * èææºå¤§å°=kata vmä¸­æèè¯´podä¸­çå°çcpu memï¼lscpu lsmemï¼=default+limitï¼è§éªè¯1ï¼\n * kubectl describe node | grep test-kataçå°çèµæºç³è¯·=limit+overheadï¼åruncï¼ï¼è§éªè¯1ï¼\n * kubectl top podçå°çæ¯ä¸å¡çæ­£çè´è½½å¼éï¼ï¼\n * pod overheadä¼å½±åè°åº¦ï¼overheadåªä½ç¨äºsandboxå¼éï¼ä¸è½ä½ç¨äºä¸å¡è´è½½ï¼è§éªè¯3ï¼\n * ä¸ºäºéå¶èµæºæ¢å é®é¢ï¼å»ºè®®å¼å¯sandbox_cgroup_only=true,overheadå»ºè®®ä¸è®¾ç½®ï¼å¾å®ï¼ï¼ä»¥ä¸è¯´æåå¨sandbox_cgroup_only=trueåæä¸è¿è¡è¯´æ\n * ä¸å¡è´è½½+sandboxå¼éæå¤§è½ä½¿ç¨çèµæºéå¶=limit+overheadï¼overheadé¨ååªè½æ¯é¢å¤å¼éç¨ï¼ï¼è§éªè¯3ï¼\n * default_vcpus/memoryï¼å½±åèææºçå¤§å°/å¯å¨æ¶é´ï¼è¿ä¸ªå¼å®æ¹ä¸å»ºè®®ä¿®æ¹\n * å¦æcontaineræªè®¾ç½®limitï¼åkubepod cgroupæ éå¶ï¼ä½æ¯ä¸å¡è´è½½åªè½ä½¿ç¨defaultè®¾ç½®ç1g2g???ææªæ¾å°å¨åªåçéå¶ï¼ï¼è§éªè¯7ï¼ï¼å¦æè®¾ç½®äºlimitï¼åè¿ä¸ªdefaultååªå½±åèææºå¤§å°ï¼ä½ä¸å½±åkubepod cgroupéå¶ï¼è§éªè¯1ï¼\n * ~ä¸ä¸ªpodçæå°è§æ ¼æ¯1c 256mï¼å½ä½äº 256m æ¶ï¼ä¼éç½®ä¸º 2gãï¼æ¯æçæå¤§åå­è§æ ¼æ¯256gbãå¦æç¨æ·åéçåå­è§æ ¼è¶è¿256gbï¼å¯è½ä¼åºç°æªå®ä¹çéè¯¯ï¼å®å¨å®¹å¨æä¸æ¯æè¶è¿256gbçå¤§åå­åºæ¯ã~ï¼æªæ¾å°å®æ¹åºå¤ï¼åºè¯¥åªæ¯openeuleråé¨åçéå¶ï¼ï¼è§éªè¯5ï¼\n * å¦æä¸è®¾ç½®requestï¼årequestçå¼ålimité»è®¤ç¸ç­\n\n\n# ä¸äºéªè¯\n\n\n# éªè¯1ï¼ æ¥çcgroupå¤§å°\n\ncpu.cfs_period_usæ¯cfsç®æ³çä¸ä¸ªè°åº¦å¨æï¼ä¸è¬å®çå¼æ¯100000usï¼å³100msã cpu.cfs_quota_usè¡¨ç¤ºå¨cfsç®æ³ä¸­ï¼å¨ä¸ä¸ªè°åº¦å¨æéè¯¥æ§å¶ç»è¢«åè®¸çè¿è¡æ¶é´ï¼æ¯å¦è¿ä¸ªå¼ä¸º50000æ¶ï¼å°±æ¯50msãç¨è¿ä¸ªå¼å»é¤ä»¥è°åº¦å¨æcpu.cfs_period_usï¼å³50ms/100ms=0.5ï¼å¾å°çå¼è¡¨ç¤ºè¯¥æ§å¶ç»è¢«åè®¸ä½¿ç¨çcpuæå¤§éé¢æ¯0.5ä¸ªcpuãå¨æçç³»ç»éï¼è¿ä¸ªå¼æ¯-1ï¼ä¸ºé»è®¤å¼ï¼è¡¨ç¤ºä¸éå¶ã\n\ndefault_vcpu=1 default_memory=2gi overhead: "podfixed":{"cpu":"250m","memory":"160mi"} pod qos: resources: requests: memory: "500mi" cpu: "0.5" limits: memory: "3000mi" cpu: "4"\n\n\n# sandbox_cgroup_only=true\n\n"cgroupspath": "/kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼ kubepods_mem: 3313500160 (~3.08g) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\nlscpu: 5 (default+limit) lsmemï¼ memory block size: 128m memory block size: 128m total online memory: 5g (default+limit)\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660mi (10%) 3160mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1mi kubectl top nodeï¼ 1306m 16% 5513mi 84%\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 27.4m - - [root@localhost ~]# systemd-cgtop | grep pod287707dd-0fda-4fab-874d-e1b00e87390a /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a - - 193.4m - -\n\n\n# sandbox_cgroup_only=falseï¼ç»æå=trueï¼\n\n"cgroupspath": "/kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44/87b5990ce61e4ff193124fc60e4a68c7061cf9299688c6c521cae29103bc3ef5",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 3313500160 (~3.08g) (limit+overhead) kubepods_cpu cfs_period_us: 100000 cpu.cfs_quota_us 425000 (4.25æ ¸) ï¼limit+overheadï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 24.6m - - [root@localhost ~]# systemd-cgtop | grep pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 /kubepods/burstable/pod3a449bdd-90d5-41fd-a57a-9cfd102f9e44 - - 151.7m - -\n\nkubectl describe node | grep test-kataï¼ 750m (9%) 4250m (54%)(limit+overhead) 660mi (10%) 3160mi (48%)(limit+overhead) 4m54s kubectl top podï¼ 1002m 1mi kubectl top nodeï¼ 1330m 17% 5507mi 84%\n\n\n# æ¥çå½ä»¤ï¼\n\n[root@localhost ~]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     4.9m        -        -\n/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6       7      -   132.9m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    23.2m        -        -\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kata_overhead/memory.limit_in_bytes\n9223372036854771712\n[root@localhost ~]#  cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kata_overhead/cpu.cfs_quota_us\n-1\n\n[root@localhost ~]# cat /sys/fs/cgroup/memory/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/memory.limit_in_bytes\n1241513984\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_period_us\n100000\n[root@localhost ~]# cat /sys/fs/cgroup/cpu/kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/cpu.cfs_quota_us\n125000\n\n[root@localhost ~]#  cat /sys/fs/cgroup/memory/system.slice/kata-monitor.service/memory.limit_in_bytes\n9223372036854771712\n\n[root@localhost ~]# kubectl top pod test-kata\nname        cpu(cores)   memory(bytes)\ntest-kata   0m           2mi\n[root@localhost ~]# kubectl top node\nname                    cpu(cores)   cpu%   memory(bytes)   memory%\nlocalhost.localdomain   355m         4%     5469mi          83%\n\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184mi (18%)     1184mi (18%)   16d\n  kube-system                 kata-deploy-q2cnv                                        0 (0%)        0 (0%)       0 (0%)           0 (0%)         21d\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n\n\n\n# éªè¯2ï¼å¦æä¸è®¾ç½®request limitï¼kubepod cgroupçéå¶æ¯ææ ·ç\n\n"cgroupspath": "/kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f/367368f8f5c44bc69b277febfa5d533063f096c65cd9b6729bbc7847a582f51f",\n\nkata_overhead-mem: ~8gï¼ä¸éï¼ kata_overhead-cpu: -1ï¼ä¸éï¼\n\nkubepods_mem: 9223372036854771712 ~8gï¼ä¸éï¼ kubepods_cpu cfs_period_us cfs_quota_us: 100000 -1 ä¸é kubectl top podï¼ 1000m 0mi kubectl top nodeï¼ 1316m 16% 5517mi 84%\n\n[root@localhost hff]# systemd-cgtop | grep kata /kata_overhead - - 4.9m - - /system.slice/kata-monitor.service 1 - 25.1m - -\n\n[root@localhost hff]# systemd-cgtop | grep pod09a392bc-1080-4044-8015-39f392e3862f /kubepods/besteffort/pod09a392bc-1080-4044-8015-39f392e3862f - - 95.8m - -\n\nkubectl describe node | grep test-kataï¼ 250m (3%)ï¼overheadï¼ 0 (0%) 160mi (2%)ï¼overheadï¼ 0 (0%) 6m30s\n\nkubepodä¸éå¶ï¼ä½æ¯podç¡®å®åªè½ç¨å°limitçå¼\n\n\n# éªè¯3ï¼ éªè¯overheadæ¯å¦å½±åä¸å¡è´è½½\n\nè®¾ç½®overhead 2c 2gåï¼limit 3c3g, ææ»¡cpu=6,mem=3gi\n\n[root@localhost hff]# kubectl get pod\nname                              ready   status        restarts   age\ntest-kata-5687cdcb66-28lgn        0/1     outofmemory   0          17s\ntest-kata-5687cdcb66-2lmd5        0/1     outofmemory   0          11s\ntest-kata-5687cdcb66-2pbhm        0/1     outofmemory   0          23s\ntest-kata-5687cdcb66-575sb        0/1     outofmemory   0          19s\ntest-kata-5687cdcb66-5gvt2        0/1     outofmemory   0          5s\ntest-kata-5687cdcb66-62fbd        0/1     outofmemory   0          33s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# éªè¯4ï¼éªè¯å¦æä¸è®¾ç½®request limitï¼cpu memçä½¿ç¨ä¸çº¿\n\nè®¾ç½®overhead 2c 2gåï¼limitä¸è®¾ç½®ï¼ ææ»¡cpu=6,mem=1gi\n\n[root@localhost hff]# kubectl get pod  -w\nname                              ready   status        restarts   age\ntest-kata-55867ffb58-26ndp        0/1     outofmemory   0          4s\ntest-kata-55867ffb58-2blnx        0/1     outofmemory   0          2s\ntest-kata-55867ffb58-2d858        0/1     outofmemory   0          1s\ntest-kata-55867ffb58-2qwzf        0/1     pending       0          0s\ntest-kata-55867ffb58-4j4hl        0/1     outofmemory   0          1s\ntest-kata-55867ffb58-8zzbc        0/1     outofmemory   0          2s\ntest-kata-55867ffb58-crflb        0/1     outofmemory   0          4s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# éªè¯5ï¼ éªè¯cpu memå°äº1c 256miçæåµï¼no overheadï¼\n\n    resources:\n      requests:\n        memory: "1mi"\n        cpu: "0.1"\n      limits:\n        memory: "100mi"\n        cpu: "550m"\n    args:\n    - -cpus\n    - "2"\n    - -mem-total\n    - 100mi\n    - -mem-alloc-size\n    - 10mi\n    - -mem-alloc-sleep\n    - 1s\n\n\næ²¡æoomï¼ä½æ¯podä¸æ­éå¯ï¼ææå¹¶æ²¡æè¢«éç½®æ2g\n\n[root@localhost hff]# kubectl get pod -w\nname                              ready   status    restarts   age\nkubefilebrowser-896974bcc-z6scd   1/1     running   3          31d\ntest-kata-6878f4fd9f-76c5k        1/1     running   2          61s\ntest-runc-79d8bdc4cb-v6j28        1/1     running   0          75m\ntest-kata-6878f4fd9f-76c5k        0/1     error     2          72s\ntest-kata-6878f4fd9f-76c5k        0/1     crashloopbackoff   2          75s\n\n[root@localhost hff]# kubectl logs test-kata-6878f4fd9f-76c5k\ni0527 07:16:06.932758       1 main.go:26] allocating "200mi" memory, in "10mi" chunks, with a 1s sleep between allocations\ni0527 07:16:06.933058       1 main.go:39] spawning a thread to consume cpu\ni0527 07:16:06.933082       1 main.go:39] spawning a thread to consume cpu\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# éªè¯6ï¼ æå°èµæºå ç¨æµè¯\n\nlimit550m/200miï¼å2c100miï¼podä¼ä¸æ­éå¯ï¼ä½æ¯ä¸æ¯oomkilled\n\n        resources:\n          requests:\n            memory: "1mi"\n            cpu: "0.1"\n          limits:\n            memory: "200mi"\n            cpu: "550m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100mi\n        - -mem-alloc-size\n        - 10mi\n        - -mem-alloc-sleep\n        - 1s\nevents:\n  type     reason          age                   from                            message\n  ----     ------          ----                  ----                            -------\n  normal   scheduled       <unknown>             default-scheduler               successfully assigned default/test-kata-68b77bc9f8-zlj5p to localhost.localdomain\n  normal   created         36m (x4 over 38m)     kubelet, localhost.localdomain  created container cpu-stress-kata\n  normal   started         36m (x4 over 38m)     kubelet, localhost.localdomain  started container cpu-stress-kata\n  normal   sandboxchanged  35m (x4 over 37m)     kubelet, localhost.localdomain  pod sandbox changed, it will be killed and re-created.\n  normal   pulled          7m53s (x11 over 38m)  kubelet, localhost.localdomain  container image "vish/stress" already present on machine\n  warning  backoff         3m5s (x159 over 37m)  kubelet, localhost.localdomain  back-off restarting failed container\n[root@localhost hff]#\n[root@localhost hff]# kubectl logs test-kata-68b77bc9f8-zlj5p\ni0527 08:13:52.926368       1 main.go:26] allocating "100mi" memory, in "10mi" chunks, with a 1s sleep between allocations\ni0527 08:13:52.926544       1 main.go:39] spawning a thread to consume cpu\ni0527 08:13:52.926570       1 main.go:39] spawning a thread to consume cpu\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# éªè¯7ï¼ æ¥çkata vmä¸­çcgroup\n\nä¸è®¾ç½®limitï¼overhead\n\nbash-5.1# more /sys/fs/cgroup/memory/\ncgroup.clone_children               memory.max_usage_in_bytes\ncgroup.event_control                memory.memsw.failcnt\ncgroup.procs                        memory.memsw.limit_in_bytes\ncgroup.sane_behavior                memory.memsw.max_usage_in_bytes\nkubepods/                           memory.memsw.usage_in_bytes\nmemory.failcnt                      memory.move_charge_at_immigrate\nmemory.force_empty                  memory.oom_control\nmemory.kmem.failcnt                 memory.pressure_level\nmemory.kmem.limit_in_bytes          memory.soft_limit_in_bytes\nmemory.kmem.max_usage_in_bytes      memory.stat\nmemory.kmem.slabinfo                memory.swappiness\nmemory.kmem.tcp.failcnt             memory.usage_in_bytes\nmemory.kmem.tcp.limit_in_bytes      memory.use_hierarchy\nmemory.kmem.tcp.max_usage_in_bytes  notify_on_release\nmemory.kmem.tcp.usage_in_bytes      release_agent\nmemory.kmem.usage_in_bytes          system.slice/\nmemory.limit_in_bytes               tasks\nbash-5.1# more /sys/fs/cgroup/memory/kubepods/\nbesteffort/                         memory.max_usage_in_bytes\ncgroup.clone_children               memory.memsw.failcnt\ncgroup.event_control                memory.memsw.limit_in_bytes\ncgroup.procs                        memory.memsw.max_usage_in_bytes\nmemory.failcnt                      memory.memsw.usage_in_bytes\nmemory.force_empty                  memory.move_charge_at_immigrate\nmemory.kmem.failcnt                 memory.oom_control\nmemory.kmem.limit_in_bytes          memory.pressure_level\nmemory.kmem.max_usage_in_bytes      memory.soft_limit_in_bytes\nmemory.kmem.slabinfo                memory.stat\nmemory.kmem.tcp.failcnt             memory.swappiness\nmemory.kmem.tcp.limit_in_bytes      memory.usage_in_bytes\nmemory.kmem.tcp.max_usage_in_bytes  memory.use_hierarchy\nmemory.kmem.tcp.usage_in_bytes      notify_on_release\nmemory.kmem.usage_in_bytes          tasks\nmemory.limit_in_bytes\nbash-5.1# more /sys/fs/cgroup/cpu/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/cpu.cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/cpu/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/f3cffcf893000b0c5f6105f1adb94e3be7fa62ebecd801a29b9a77a472d62c86/cfs_quota_us\n-1\nbash-5.1# more /sys/fs/cgroup/memory/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/memory.limit_in_bytes\n9223372036854771712\nbash-5.1#  more /sys/fs/cgroup/memory/kubepods/besteffort/pode0eb5953-c643-4429-8812-b8e36d75e3d9/.limit_in_bytes\n9223372036854771712\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\næªæ¾å°default_vcpu/memoryæ¯å¨åªéåçéå¶\n\n\n# kata cgroupè¯´æ\n\nkata containers å¨ä¸¤å± cgroup ä¸è¿è¡ã\n\n * workload guest\n * vmm host ï¼kata containers å¨ä¸¤å± cgroup ä¸è¿è¡ãç¬¬ä¸å±å¨èææºä¸­æ¾ç½®å·¥ä½è´è½½ï¼èç¬¬äºå±å¨ä¸»æºä¸è¿è¡ vmmå å³èçº¿ç¨ãï¼\n\nä» kubernetes è§åº¦æ¥è®²ï¼cgroup æçæ¯ pod cgroupï¼ç± kubelet åå»ºï¼éå¶çæ¯ pod çèµæº; ä» container è§åº¦æ¥è®²ï¼cgroup æçæ¯ container cgroupï¼ç±å¯¹åºç runtime åå»ºï¼éå¶çæ¯ container çèµæºãä½æ¯ä¸ºäºå¯ä»¥è·åå°æ´åç¡®çå®¹å¨èµæºï¼kubelet ä¼æ ¹æ® container cgroup å»è°æ´ pod cgroupã å¨ä¼ ç»ç runtime ä¸­ï¼ä¸¤èæ²¡æå¤ªå¤§çåºå«ã\n\nè kata containers å¼å¥ vm çæ¦å¿µï¼æä»¥éå¯¹è¿ç§æåµæä¸¤ç§å¤çæ¹å¼ï¼\n\n * å¯ç¨ sandboxcgrouponlyï¼é»è®¤ï¼ï¼kubelet å¨è°æ´ pod cgroup çå¤§å°æ¶ï¼ä¼å° sandbox çå¼éç»è®¡è¿å» ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½åkataèææºå¼éçæå¤§ä½¿ç¨éå¶ï¼å¦æä¸è®¾ç½®limitï¼é»è®¤æ¯default_vcpus/mem??ï¼\n * ç¦ç¨ sandboxcgrouponlyï¼sandbox çå¼éå pod cgroup åå¼è®¡ç®ï¼ç¬ç«å­å¨ ï¼å°±æ¯è¯´ï¼ç¨æ·ç³è¯·çèµæºlimit+overheadæ¯ä¸å¡è´è½½èªå·±çæå¤§ä½¿ç¨éå¶ï¼kataèææºå¼éåç¬ä¸ä¸ªcgroupèä¸æ²¡æéå¶ï¼å¦æä¸è®¾ç½®limitï¼ä¸å¡ä½¿ç¨é»è®¤æ¯default_vcpus/memï¼\n\n\n# ä¸¤ç§cgrouppath:\n\n * /kubepods/burstable/pod287707dd-0fda-4fab-874d-e1b00e87390a/c2bfeccb7580707e7559c00f7ee9d46e98745cc2a0d267fbb41c68da41df784f ()\n * /kubepods/pod24356d87-3993-4e9a-8d3f-55207af763f9/kata_842463ada9994438f6c663b082bbf5735c64309f77a0b57838b8a16f347433a6 ()\n\n\n# pod overhead\n\n\n# sandbox_cgroup_only\n\n * å¦æå¯ç¨ï¼è¿è¡æ¶å°å¨ä¸ä¸ªä¸ç¨cgroupä¸­æ·»å æækataè¿ç¨ãæ¯ä¸ªæ²çåªåå»ºä¸ä¸ªcgroupï¼ä¸»æºä¸­çcontainer cgroupå°ä¸ä¼åå»º\n * kata runtimeè°ç¨èå¯ä»¥èªç±å°éå¶ææ¶éæ´ä¸ªkataæ²ççcgroupç»è®¡ä¿¡æ¯ã\n * sandbox cgroupè·¯å¾æ¯å·æpodsandbox annotation(???)çå®¹å¨çç¶cgroupã\n * å¦ææ²¡æcontainer type annotation(??)ï¼åsandbox cgroupå°åå°éå¶\n * æå³ç pod cgroup çå¤§å°éå½ï¼å¹¶èèäº pod å¼éï¼è®¾ç½®podoverheadèèè°åº¦ï¼\n * kata shim å°å¨sandbox_cgroup_onlypod çä¸ç¨ cgroup ä¸ä¸ºæ¯ä¸ª pod åå»ºä¸ä¸ªå­ cgroup\n * kata shimãqemu çº¿ç¨å°ä¸æ²ç®±å¨åä¸ä¸ª cgroup ä¸­ãå¨è¿ç§æåµä¸ï¼å®ä»¬å°ä¸ vcpu çº¿ç¨å±äº«åä¸ç» cpu åæ ¸\n\n=trueå¥½å¤ï¼\n\n * ä¾¿äºpodèµæºç»è®¡\n * æ´å¥½çä¸»æºèµæºéç¦»\n\n=fasleä¼ç¹åç¼ºç¹ï¼\n\n * ä¸éå¶ä¼æ¶èå¤§éä¸»æºèµæº\n * å¨ä¸ç¨å¼écgroupä¸è¿è¡ææévcpuçº¿ç¨å¯ä»¥æä¾æå³å®éçå¼éåç¡®å¼ï¼å¯ä»¥è®¾ç½®å¼écgroupå¤§å°ï¼æå¨ä¿®æ¹ï¼æ æ¥å£ï¼\n\n\n# default_vcpus/memory\n\n\n# kataèµæºå¼é\n\n * åèæå i/o åç«¯\n * vmm å®ä¾\n * kata shim è¿ç¨\n * kata monitorå¼éï¼å¦æå¼å¯ï¼\n\n\n# kataç»ä»¶è¿ç¨ï¼\n\n * sandbox qemu-system-x86_64è¿ç¨cgroup\n * containerd-shim-kata-v2è¿ç¨\n * ä¸¤ä¸ªvirtiofsdè¿ç¨\n\nkata podèµ·æ¥åï¼å¶ä¸­ï¼kata shimè¿ç¨åqemuè¿ç¨å ç¨äºå¤§éçåå­å¼éï¼å¶ä¸­ï¼æ²ç®±éçåæ ¸å agent æ¯ç´æ¥åäº«äºåºç¨åå­ä½å¹¶ä¸æ¯åºç¨çä¸é¨åï¼ä¹å°±æ¯è¯´ï¼è¿ä¸é¨åæ¯ç¨æ·å¯è§çå¼éãè vmm æ¬èº«å¨å®¿ä¸»æºä¸çå¼éä»¥å shim-v2 å ç¨çåå­ï¼è½ç¶ç¨æ·åºç¨ä¸å¯è§ï¼ä½åæ ·æ¯ kata å¸¦æ¥çå¼éï¼å½±ååºç¡è®¾æ½çèµæºæçã\n\nè¿äºåå­å¼ééï¼è¿åæ¬äºå¯å±äº«å¼éåä¸å¯å±äº«å¼éãææå®¿ä¸»è¿è¾¹çä»£ç æ®µåå­ï¼åªè¯»åå­ï¼ï¼å¯ä»¥å±äº« page cacheï¼æä»¥æ¯å±äº«çï¼èå¨æ²ç®±éçä»£ç ï¼åªè¯»ï¼åå­ï¼å¨ä½¿ç¨ dax ææ¨¡ççæåµä¸ï¼ä¹å¯ä»¥å±äº«åä¸ä»½ãæä»¥ï¼å¯ä»¥å±äº«çåå­å¼éå¨èç¹å¨å±èå´åæ¯å¯ä¸ä¸ä»½ï¼æä»¥å¨æå¤ä¸ªpodçæåµä¸ï¼è¿é¨åçå¸¸æ°å¼éç¸å¯¹èè¨æ¯ä¸å¤ªéè¦çï¼ç¸åçï¼ä¸å¯å±äº«å¼éï¼å°¤å¶æ¯å åå­å¼éï¼ä¼éç pod çå¢é¿èå¢é¿ï¼çæ¢å¥è¯è¯´ï¼å åå­ï¼å¿åé¡µï¼æ¯æéè¦è¢«éè§çå¼éã\n\nç»¼ä¸ï¼ç¬¬ä¸ä½éè¦è¢«éå¶çå¼éæ¯æ²ç®±åçç¨æ·å¯è§çä¸å¯å±äº«å¼éï¼å°¤å¶æ¯ agent çå¼éï¼è vmm å shim çå¿åé¡µå¼éæ¬¡ä¹ã\n\n\n# ä¸æ¯æcgroups v2\n\n\n# ä¸äºéè¦ç¥éçéç½®\n\n# default number of vcpus per sb/vm:\n# unspecified or 0                --\x3e will be set to 1ï¼ä¸è®¾ç½®æ0åé»è®¤æ¯1ï¼\n# < 0                             --\x3e will be set to the actual number of physical cores(å°äº0åè®¾ä¸ºå®éç©çæ ¸)\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical coresï¼å¤§äºç©çæ ¸é»è®¤ä¸ºç©çæ ¸ï¼\ndefault_vcpus = 1\n\n# default memory size in mib for sb/vm.\n# if unspecified then it will be set 2048 mib.ï¼ä¸è®¾ç½®é»è®¤æ¯2giï¼\ndefault_memory = 2048\n\n# default maximum number of vcpus per sb/vm:\n# unspecified or == 0             --\x3e will be set to the actual number of physical cores or to the maximum numberï¼ä¸è®¾ç½®æ0é»è®¤ä¸ºæå¤§ç©çæ ¸æ°ï¼\n#                                     of vcpus supported by kvm if that number is exceeded\n# > 0 <= number of physical cores --\x3e will be set to the specified number\n# > number of physical cores      --\x3e will be set to the actual number of physical cores or to the maximum number\n#                                     of vcpus supported by kvm if that number is exceeded\n# warning: depending of the architecture, the maximum number of vcpus supported by kvm is used when\n# the actual number of physical cores is greater than it.\n# warning: be aware that this value impacts the virtual machine\'s memory footprint and cpu\n# the hotplug functionality. for example, `default_maxvcpus = 240` specifies that until 240 vcpus\n# can be added to a sb/vm, but the memory footprint will be big. another example, with\n# `default_maxvcpus = 8` the memory footprint will be small, but 8 will be the maximum number of\n# vcpus supported by the sb/vm. in general, we recommend that you do not edit this variable,\n# unless you know what are you doing.\n# notice: on arm platform with gicv2 interrupt controller, set it to 8.\ndefault_maxvcpus = 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# éè¿æ³¨éä¿®æ¹éç½®ï¼\n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n runtime_type = "io.containerd.kata.v2"\n privileged_without_host_devices = false\n shim_debug = true\n pod_annotations = ["io.katacontainers.*"] #  <-- look here\n\n\n1\n2\n3\n4\n5\n\n\n> io.katacontainers.config.hypervisor.default_vcpus = 5\n\n\n# æå¼--feature-gates podoverhead\n\n> /etc/kubernetes/manifests/kube-apiserver.yaml\n\n1.17é»è®¤å³é­ï¼1.18é»è®¤æå¼\n\n> environment="kubelet_feature=--feature-gates=rotatekubeletservercertificate=true,volumesnapshotdatasource=true,expandcsivolumes=true,volumepvcdatasource=true,servicetopology=true,endpointslice=true,podoverhead=true"\n\n\n# å¯ç¨runtimeclassåå¥æ§å¶\n\n> --feature-gates=volumesnapshotdatasource=true,expandcsivolumes=true,volumepvcdatasource=true,ttlafterfinished=true,servicetopology=true,endpointslice=true,podoverhead=true\n\n\n# è®¾ç½®podoverhead\n\nkind: runtimeclass\napiversion: node.k8s.io/v1beta1\nmetadata:\n  name: kata-containers\nhandler: kata\noverhead:\n  podfixed:\n  memory: "100mi"\n  cpu: "100m"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# virtio-memåå­ç­ææï¼ä»æ¯æqemuï¼\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-virtio-mem-with-kata.md\n\n$ sudo sed -i -e \'s/^#enable_virtio_mem.*$/enable_virtio_mem = true/g\' /etc/kata-containers/configuration.toml\n\n\n1\n\n\n\n# éä»¶\n\n---\napiversion: apps/v1\nkind: deployment\nmetadata:\n  name: test-kata\nspec:\n  replicas: 1\n  selector:\n    matchlabels:\n      app: test-kata\n  template:\n    metadata:\n      labels:\n        app: test-kata\n    spec:\n      runtimeclassname: kata-containers\n      containers:\n      - image: vish/stress\n        imagepullpolicy: ifnotpresent\n        name: cpu-stress-kata\n        resources:\n          requests:\n            memory: "1mi"\n            cpu: "0.1"\n          limits:\n            memory: "161mi"\n            cpu: "350m"\n        args:\n        - -cpus\n        - "2"\n        - -mem-total\n        - 100mi\n        - -mem-alloc-size\n        - 10mi\n        - -mem-alloc-sleep\n        - 1s\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n',charsets:{cjk:!0}},{title:"guest kernelåguestos",frontmatter:{title:"guest kernelåguestos",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/e5081b/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã",meta:[{name:"twitter:title",content:"guest kernelåguestos"},{name:"twitter:description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html"},{property:"og:type",content:"article"},{property:"og:title",content:"guest kernelåguestos"},{property:"og:description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"guest kernelåguestos"},{itemprop:"description",content:"ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/04.guest%20kernel%E5%92%8Cguestos.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/04.guest kernelåguestos.md",key:"v-397f9139",path:"/pages/e5081b/",headers:[{level:2,title:"image type(rootfs)",slug:"image-type-rootfs",normalizedTitle:"image type(rootfs)",charIndex:821},{level:2,title:"initrd type",slug:"initrd-type",normalizedTitle:"initrd type",charIndex:943},{level:2,title:"ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼",slug:"ä½¿ç¨-kata-éç½®æä»¶configuration-toml-å¨å±",normalizedTitle:"ä½¿ç¨ kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼",charIndex:2209},{level:2,title:"ä½¿ç¨æ³¨é",slug:"ä½¿ç¨æ³¨é",normalizedTitle:"ä½¿ç¨æ³¨é",charIndex:2338}],headersStr:"image type(rootfs) initrd type ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼ ä½¿ç¨æ³¨é",content:'ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã\n\n\n# éç½®\n\n[hypervisor.qemu]\npath = "/opt/kata/bin/qemu-system-x86_64"\nkernel = "/opt/kata/share/kata-containers/vmlinux.container"\nimage = "/opt/kata/share/kata-containers/kata-containers.img"\nmachine_type = "q35"\n[Kernel]\n Path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n Parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n [Image]\n Path = "/opt/kata/share/kata-containers/kata-clearlinux-latest.image"\n [Initrd]\n Path = ""\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# Guest kernel\n\nç¨äºå¯å¨VMãKata-containeré«åº¦ä¼åäºåæ ¸å¯å¨æ¶é´åæå°çåå­å ç¨ï¼åªç¨äºä¸ä¸ªå®¹å¨çè¿è¡ã\n\n\n# Guest image\n\næ¯æåºäºinitrdårootfs(image)çæå°éåï¼é»è®¤åä¸­æä¾ä¸ä¸ªéååä¸ä¸ªinitrdï¼ä»ä»¬é½æ¯éè¿osbuilderçæçã\n\n\n# image type(rootfs)\n\né»è®¤ç root filesystem image (ææ¶ç§°ä¸ºmini O/S)æ¯ä¸ä¸ªåºäº Clear Linux çé«åº¦ä¼åçå®¹å¨å¼å¯¼ç³»ç»ãå®æä¾äºä¸ä¸ªæå°çç¯å¢ï¼å¹¶æä¸ä¸ªé«åº¦ä¼åçå¼å¯¼è·¯å¾ã\n\n\n# initrd type\n\nåç¼©ç cpio(1) æä»¶ï¼ä» rootfs ï¼è¢«è½½å¥åå­å¹¶ä½ä¸º linux å¯å¨è¿ç¨çä¸é¨åè¢«ä½¿ç¨ï¼åå»ºã\n\nKata è¿è¡æ¶éç½®æä»¶ä¸­çinitrdåimageéé¡¹ä¹ä¸å¿é¡»è®¾ç½®ï¼ä½ä¸è½åæ¶è®¾ç½®ãéé¡¹ä¹é´çä¸»è¦åºå«å¨äºinitrd(10MB+) çå¤§å°ææ¾å°äº rootfs image(100MB+)ã\n\néè¿initrd=åimage=éç½®å³å®ä½¿ç¨åªä¸ä¸ªç±»å\n\n\n# æå°éåæåº¦ç®å\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n\n# åæ ¸æå»ºbuild-kernel.sh\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/packaging/kernel\n\nä¾å­ï¼\n\n$ ./build-kernel.sh -v 5.10.25 -g nvidia -f -d setup\nÂ· -v 5.10.25ï¼æå®æ¥å®¾åæ ¸çæ¬ã\nÂ· -g nvidia: æå»ºä¸ä¸ªæ¯æ Nvidia GPU çæ¥å®¾åæ ¸ã\nÂ· -f:.configå³ä½¿åæ ¸ç®å½å·²ç»å­å¨ä¹å¼ºå¶çææä»¶ã\nÂ· -d: å¯ç¨ bash è°è¯æ¨¡å¼ã\n\n\n1\n2\n3\n4\n5\n\n\næ·»å è¡¥ä¸ï¼${GOPATH}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/patches/\n\nåæ ¸éç½®ï¼${GOPATH}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/configs/\n\n\n# osbuilder\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/osbuilder\n\n\n# ä¿®æ¹åæ ¸åæ°\n\n[Kernel]\n Path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n Parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n\n\n1\n2\n3\n\n\n\n# å è½½åæ ¸æ¨¡å\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-load-kernel-modules-with-kata.md\n\n\n# ä½¿ç¨ Kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼\n\n> \n\nkernel_modules =[ â e1000e InterruptThrottleRate=3000,3000,3000 EEE=1 â , â i915 â ]\n\n\n# ä½¿ç¨æ³¨é\n\nannotations:\n  io.katacontainers.config.agent.kernel_modules: "e1000e EEE=1; i915"spec:\n\n\n1\n2\n\n\n\n# ä½¿ç¨ Kata è®¾ç½®sysctl\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-sysctls-with-kata.md\n\nsysctl ä½¿ç¨ pod ç securityContext å¨ pod ä¸è®¾ç½®ãsecurityContext éç¨äºåä¸ pod ä¸­çææå®¹å¨ã\n\napiVersion: v1kind: Podmetadata:\nname: sysctl-examplespec:\nsecurityContext:\n  sysctls:\n   - name: kernel.shm_rmid_forced\n     value: "0"\n   - name: net.ipv4.route.min_pmtu\n     value: "552"\n   - name: kernel.msgmax\n     value: "65536"\n ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nææå®å¨sysctlsé»è®¤è¢«å¼å¯\n\nä½¿ç¨ä¸å®å¨ç sysctlsï¼éç¾¤ç®¡çåéè¦åè®¸è¿äºï¼\n\n$ kubelet --allowed-unsafe-sysctls \'kernel.msg*,net.ipv4.route.min_pmtu\' ...\n\n\n1\n',normalizedContent:'ç³»ç»ç®¡çç¨åº hypervisorå°å¯å¨ä¸ä¸ªèææºï¼è¯¥èææºåæ¬æå°ç èææºåæ ¸åèææºéåã\n\n\n# éç½®\n\n[hypervisor.qemu]\npath = "/opt/kata/bin/qemu-system-x86_64"\nkernel = "/opt/kata/share/kata-containers/vmlinux.container"\nimage = "/opt/kata/share/kata-containers/kata-containers.img"\nmachine_type = "q35"\n[kernel]\n path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n [image]\n path = "/opt/kata/share/kata-containers/kata-clearlinux-latest.image"\n [initrd]\n path = ""\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# guest kernel\n\nç¨äºå¯å¨vmãkata-containeré«åº¦ä¼åäºåæ ¸å¯å¨æ¶é´åæå°çåå­å ç¨ï¼åªç¨äºä¸ä¸ªå®¹å¨çè¿è¡ã\n\n\n# guest image\n\næ¯æåºäºinitrdårootfs(image)çæå°éåï¼é»è®¤åä¸­æä¾ä¸ä¸ªéååä¸ä¸ªinitrdï¼ä»ä»¬é½æ¯éè¿osbuilderçæçã\n\n\n# image type(rootfs)\n\né»è®¤ç root filesystem image (ææ¶ç§°ä¸ºmini o/s)æ¯ä¸ä¸ªåºäº clear linux çé«åº¦ä¼åçå®¹å¨å¼å¯¼ç³»ç»ãå®æä¾äºä¸ä¸ªæå°çç¯å¢ï¼å¹¶æä¸ä¸ªé«åº¦ä¼åçå¼å¯¼è·¯å¾ã\n\n\n# initrd type\n\nåç¼©ç cpio(1) æä»¶ï¼ä» rootfs ï¼è¢«è½½å¥åå­å¹¶ä½ä¸º linux å¯å¨è¿ç¨çä¸é¨åè¢«ä½¿ç¨ï¼åå»ºã\n\nkata è¿è¡æ¶éç½®æä»¶ä¸­çinitrdåimageéé¡¹ä¹ä¸å¿é¡»è®¾ç½®ï¼ä½ä¸è½åæ¶è®¾ç½®ãéé¡¹ä¹é´çä¸»è¦åºå«å¨äºinitrd(10mb+) çå¤§å°ææ¾å°äº rootfs image(100mb+)ã\n\néè¿initrd=åimage=éç½®å³å®ä½¿ç¨åªä¸ä¸ªç±»å\n\n\n# æå°éåæåº¦ç®å\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n\n# åæ ¸æå»ºbuild-kernel.sh\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/packaging/kernel\n\nä¾å­ï¼\n\n$ ./build-kernel.sh -v 5.10.25 -g nvidia -f -d setup\nÂ· -v 5.10.25ï¼æå®æ¥å®¾åæ ¸çæ¬ã\nÂ· -g nvidia: æå»ºä¸ä¸ªæ¯æ nvidia gpu çæ¥å®¾åæ ¸ã\nÂ· -f:.configå³ä½¿åæ ¸ç®å½å·²ç»å­å¨ä¹å¼ºå¶çææä»¶ã\nÂ· -d: å¯ç¨ bash è°è¯æ¨¡å¼ã\n\n\n1\n2\n3\n4\n5\n\n\næ·»å è¡¥ä¸ï¼${gopath}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/patches/\n\nåæ ¸éç½®ï¼${gopath}/src/github.com/kata-containers/kata-containers/tools/packaging/kernel/configs/\n\n\n# osbuilder\n\nhttps://github.com/kata-containers/kata-containers/tree/main/tools/osbuilder\n\n\n# ä¿®æ¹åæ ¸åæ°\n\n[kernel]\n path = "/opt/kata/share/kata-containers/vmlinux-5.15.23-89"\n parameters = "systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026"\n\n\n1\n2\n3\n\n\n\n# å è½½åæ ¸æ¨¡å\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-load-kernel-modules-with-kata.md\n\n\n# ä½¿ç¨ kata éç½®æä»¶configuration.tomlï¼å¨å±ï¼\n\n> \n\nkernel_modules =[ â e1000e interruptthrottlerate=3000,3000,3000 eee=1 â , â i915 â ]\n\n\n# ä½¿ç¨æ³¨é\n\nannotations:\n  io.katacontainers.config.agent.kernel_modules: "e1000e eee=1; i915"spec:\n\n\n1\n2\n\n\n\n# ä½¿ç¨ kata è®¾ç½®sysctl\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-use-sysctls-with-kata.md\n\nsysctl ä½¿ç¨ pod ç securitycontext å¨ pod ä¸è®¾ç½®ãsecuritycontext éç¨äºåä¸ pod ä¸­çææå®¹å¨ã\n\napiversion: v1kind: podmetadata:\nname: sysctl-examplespec:\nsecuritycontext:\n  sysctls:\n   - name: kernel.shm_rmid_forced\n     value: "0"\n   - name: net.ipv4.route.min_pmtu\n     value: "552"\n   - name: kernel.msgmax\n     value: "65536"\n ...\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\nææå®å¨sysctlsé»è®¤è¢«å¼å¯\n\nä½¿ç¨ä¸å®å¨ç sysctlsï¼éç¾¤ç®¡çåéè¦åè®¸è¿äºï¼\n\n$ kubelet --allowed-unsafe-sysctls \'kernel.msg*,net.ipv4.route.min_pmtu\' ...\n\n\n1\n',charsets:{cjk:!0}},{title:"kata-monitorçæ§",frontmatter:{title:"kata-monitorçæ§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/4df25b/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md",meta:[{name:"twitter:title",content:"kata-monitorçæ§"},{name:"twitter:description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-monitorçæ§"},{property:"og:description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-monitorçæ§"},{itemprop:"description",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/05.kata-monitor%E7%9B%91%E6%8E%A7.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/05.kata-monitorçæ§.md",key:"v-02ffbd9e",path:"/pages/4df25b/",headers:[{level:2,title:"kata-monitorå¯å¨æ¹å¼",slug:"kata-monitorå¯å¨æ¹å¼",normalizedTitle:"kata-monitorå¯å¨æ¹å¼",charIndex:282},{level:2,title:"promethueså¢å scrape_configs",slug:"promethueså¢å scrape-configs",normalizedTitle:"promethueså¢å scrape_configs",charIndex:1078},{level:2,title:"å¯¼å¥ Grafana dashborad",slug:"å¯¼å¥-grafana-dashborad",normalizedTitle:"å¯¼å¥ grafana dashborad",charIndex:1193},{level:2,title:"Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼",slug:"kata-containers-ç®åééäºä¸é¢å ç§ç±»åç-metrics",normalizedTitle:"kata containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼",charIndex:1927},{level:2,title:"promethuesçæ§è´è½½ææ ",slug:"promethuesçæ§è´è½½ææ ",normalizedTitle:"promethuesçæ§è´è½½ææ ",charIndex:2725},{level:2,title:"ææ çæ§è½ä¸å¼é",slug:"ææ çæ§è½ä¸å¼é",normalizedTitle:"ææ çæ§è½ä¸å¼é",charIndex:2966}],headersStr:"kata-monitorå¯å¨æ¹å¼ promethueså¢å scrape_configs å¯¼å¥ Grafana dashborad Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼ promethuesçæ§è´è½½ææ  ææ çæ§è½ä¸å¼é",content:'https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md\n\nkata-monitor è¿ç¨è¿è¡å¨å®¿ä¸»æºä¸ï¼è´è´£ä»å Kata Containers å®¹å¨/VMä¸­è·å metricsï¼å¹¶è¿åç» Prometheusã\n\né»è®¤æåµä¸ kata-monitor ä¸éè¦æå®åæ°ï¼å®ä¼çå¬å¨æ¬å°ç 8090 ç«¯å£ï¼è¿ä¹æ¯å¨ Prometheus éç½®æä»¶ä¸­ target æå®çç«¯å£å·ãå¦æè¦ä¿®æ¹è¿ä¸ªç«¯å£å·ï¼åéè¦æ³¨æä¸¤å¤è¦ä¿æä¸è´ã\n\n\n# kata-monitorå¯å¨æ¹å¼\n\n 1. kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[Unit]\nDescription=kata monitor\n\n[Service]\nExecStart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nRestart=always\nStartLimitInterval=0\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n 2. daemonset(ï¼ï¼æ²¡æéåï¼æå¨ç¼è¯ä¸è¿)ï¼TODOï¼\n\n$ kubectl apply -f https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/kata-monitor-daemonset.yml\n\n\n1\n\n\nOnce the daemonset is running, Prometheus should discover kata-monitor as a target. You can open http://:30909/service-discovery and find kubernetes-pods under the Service Discovery list\n\n * å³äºæ²¡ækata-monitor éåé®é¢ https://github.com/kata-containers/kata-containers/issues/2421\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹IP>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ Grafana dashborad\n\n[root@localhost ~]# curl -XPOST -i <grafanaèç¹IP>:3000/api/dashboards/import \\\n>     -u admin:admin \\\n>     -H "Content-Type: application/json" \\\n> -d "{\\"dashboard\\":$(curl -sL https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\nHTTP/1.1 100 Continue\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nDate: Mon, 16 May 2022 05:16:33 GMT\nContent-Length: 253\n\n{"pluginId":"","title":"Kata containers","imported":true,"importedUri":"db/kata-containers","importedUrl":"/d/75pdqURGk/kata-containers","slug":"","dashboardId":0,"folderId":0,"importedRevision":1,"revision":1,"description":"","path":"","removed":false}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# çæ§ææ \n\n\n# Kata Containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼\n\nKata agent metricsï¼agent è¿ç¨ç metrics Kata guest OS metricsï¼VM ä¸­ç guest metrics Hypervisor metricsï¼hypervisor è¿ç¨ç metricsï¼å¦æ hypervisor æ¬èº«æä¾äº metrics æ¥å£ï¼æ¯å¦ firecrackerï¼ä¹ä¼ééå° Kata Containers ç metricsï¼ Kata monitor metricsï¼kata-monitor è¿ç¨ç metrics Kata containerd shim v2 metricsï¼shimv2 è¿ç¨ç metrics\n\nå¨kata vmä¸­/proc//io stat statusç­çæ°æ® kata_agent_io_statä»£çè¿ç¨ IO ç»è®¡ kata_agent_process_cpu_seconds_total ä»¥ç§ä¸ºåä½è±è´¹çæ»ç¨æ·åç³»ç» CPU æ¶é´ã kata_agent_total_vm\n\nå¨kata vmä¸­/proc/stat diskstats meminfoç­çæ°æ® kata_guest_cpu_time kata_guest_diskstat kata_guest_load kata_guest_meminfo kata_guest_vm_stat\n\nkata_hypervisor_io_stat å¤çIOç»è®¡ kata_hypervisor_proc_stat è¿ç¨ç»è®¡\n\nkata_shim_pod_overhead_cpu CPU èµæºç Kata Pod å¼éï¼ç¾åæ¯ï¼ kata_shim_pod_overhead_memory_in_bytes Kata Pod çåå­èµæºå¼éï¼å­èï¼\n\n\n# promethuesçæ§è´è½½ææ \n\n * container_fs_writes_bytes_total\n\n * container_cpu_usage_seconds_totalæ²¡æcontainerå­æ®µ\n\n * \n\nsum(irate(container_cpu_usage_seconds_total{namespace=~"${allNamespace}",pod=~"^${loadNames}",container!=""}[3m]))by(pod)\n\n\n1\n\n\n\n# ææ çæ§è½ä¸å¼é\n\n * ç«¯å°ç«¯ï¼ä» Prometheus æå¡å¨å°kata-monitorå¹¶kata-monitorååååºï¼ï¼20 æ¯«ç§ï¼å¹³åï¼\n\n * ä»£çï¼ä» shim å°agentçææ RPCï¼ï¼3 æ¯«ç§ï¼å¹³åï¼\n\n * Prometheus é»è®¤scrape_intervalä¸º 1 åéï¼ä½éå¸¸è®¾ç½®ä¸º 15 ç§ãè¾å°scrape_intervalä¼å¯¼è´æ´å¤å¼éï¼å æ­¤ç¨æ·åºæ ¹æ®èªå·±ççæ§éæ±è¿è¡è®¾ç½®ã\n   \n   Prometheus ååºçä¸ä¸ªææ è·åè¯·æ±çå¤§å°ãå½æ²¡æ gzip åç¼©æ¶ï¼è®¡ç®é¢æå¤§å°çå¬å¼æ¯ï¼\n   9 + (144 - 9) *number of kata sandboxes Prometheusæ¯ægzipåç¼©. å¯ç¨åï¼æ¯ä¸ªè¯·æ±çååºå¤§å°ä¼æ´å°ï¼\n   2 + (10 - 2) *number of kata sandboxes\n\n\n# endpoint\n\nkata-monitorå¬å¼äºä»¥ä¸endpointÂ·ï¼\n\n * /metrics : è·å Kata æ²ç®±ææ ã\n * /sandboxes : ååºä¸»æºä¸è¿è¡çææ Kata æ²ç®±ã\n * /agent-url : è·å Kata æ²ç®±çä»£ç URLã\n * /debug/vars : Kata è¿è¡æ¶ shim çåé¨æ°æ®ã\n * /debug/pprof/ : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼ç´¢å¼é¡µã\n * /debug/pprof/cmdline : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼cmdlineendpointã\n * /debug/pprof/profile : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼profileendpointï¼CPU åæï¼ã\n * /debug/pprof/symbol : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼symbolendpointã\n * /debug/pprof/trace : Kata è¿è¡æ¶ shim ç Golang åææ°æ®ï¼traceendpointã\n\n/agent-urlåææ/debug/ * é½éè¦å¨æ¥è¯¢å­ç¬¦ä¸²ä¸­æå®sandbox_id\n\ncurl 127.0.0.1:8090/sandboxes curl 127.0.0.1:8090/agent-url?sandboxes=df96b24bd49ec437c872c1a758edc084121d607ce1242ff5d2263a0e1b693343',normalizedContent:'https://github.com/kata-containers/kata-containers/blob/main/docs/design/kata-2-0-metrics.md\n\nkata-monitor è¿ç¨è¿è¡å¨å®¿ä¸»æºä¸ï¼è´è´£ä»å kata containers å®¹å¨/vmä¸­è·å metricsï¼å¹¶è¿åç» prometheusã\n\né»è®¤æåµä¸ kata-monitor ä¸éè¦æå®åæ°ï¼å®ä¼çå¬å¨æ¬å°ç 8090 ç«¯å£ï¼è¿ä¹æ¯å¨ prometheus éç½®æä»¶ä¸­ target æå®çç«¯å£å·ãå¦æè¦ä¿®æ¹è¿ä¸ªç«¯å£å·ï¼åéè¦æ³¨æä¸¤å¤è¦ä¿æä¸è´ã\n\n\n# kata-monitorå¯å¨æ¹å¼\n\n 1. kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[unit]\ndescription=kata monitor\n\n[service]\nexecstart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nrestart=always\nstartlimitinterval=0\nrestartsec=10\n\n[install]\nwantedby=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n 2. daemonset(ï¼ï¼æ²¡æéåï¼æå¨ç¼è¯ä¸è¿)ï¼todoï¼\n\n$ kubectl apply -f https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/kata-monitor-daemonset.yml\n\n\n1\n\n\nonce the daemonset is running, prometheus should discover kata-monitor as a target. you can open http://:30909/service-discovery and find kubernetes-pods under the service discovery list\n\n * å³äºæ²¡ækata-monitor éåé®é¢ https://github.com/kata-containers/kata-containers/issues/2421\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹ip>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ grafana dashborad\n\n[root@localhost ~]# curl -xpost -i <grafanaèç¹ip>:3000/api/dashboards/import \\\n>     -u admin:admin \\\n>     -h "content-type: application/json" \\\n> -d "{\\"dashboard\\":$(curl -sl https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\nhttp/1.1 100 continue\n\nhttp/1.1 200 ok\ncontent-type: application/json\ndate: mon, 16 may 2022 05:16:33 gmt\ncontent-length: 253\n\n{"pluginid":"","title":"kata containers","imported":true,"importeduri":"db/kata-containers","importedurl":"/d/75pdqurgk/kata-containers","slug":"","dashboardid":0,"folderid":0,"importedrevision":1,"revision":1,"description":"","path":"","removed":false}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# çæ§ææ \n\n\n# kata containers ç®åééäºä¸é¢å ç§ç±»åç metricsï¼\n\nkata agent metricsï¼agent è¿ç¨ç metrics kata guest os metricsï¼vm ä¸­ç guest metrics hypervisor metricsï¼hypervisor è¿ç¨ç metricsï¼å¦æ hypervisor æ¬èº«æä¾äº metrics æ¥å£ï¼æ¯å¦ firecrackerï¼ä¹ä¼ééå° kata containers ç metricsï¼ kata monitor metricsï¼kata-monitor è¿ç¨ç metrics kata containerd shim v2 metricsï¼shimv2 è¿ç¨ç metrics\n\nå¨kata vmä¸­/proc//io stat statusç­çæ°æ® kata_agent_io_statä»£çè¿ç¨ io ç»è®¡ kata_agent_process_cpu_seconds_total ä»¥ç§ä¸ºåä½è±è´¹çæ»ç¨æ·åç³»ç» cpu æ¶é´ã kata_agent_total_vm\n\nå¨kata vmä¸­/proc/stat diskstats meminfoç­çæ°æ® kata_guest_cpu_time kata_guest_diskstat kata_guest_load kata_guest_meminfo kata_guest_vm_stat\n\nkata_hypervisor_io_stat å¤çioç»è®¡ kata_hypervisor_proc_stat è¿ç¨ç»è®¡\n\nkata_shim_pod_overhead_cpu cpu èµæºç kata pod å¼éï¼ç¾åæ¯ï¼ kata_shim_pod_overhead_memory_in_bytes kata pod çåå­èµæºå¼éï¼å­èï¼\n\n\n# promethuesçæ§è´è½½ææ \n\n * container_fs_writes_bytes_total\n\n * container_cpu_usage_seconds_totalæ²¡æcontainerå­æ®µ\n\n * \n\nsum(irate(container_cpu_usage_seconds_total{namespace=~"${allnamespace}",pod=~"^${loadnames}",container!=""}[3m]))by(pod)\n\n\n1\n\n\n\n# ææ çæ§è½ä¸å¼é\n\n * ç«¯å°ç«¯ï¼ä» prometheus æå¡å¨å°kata-monitorå¹¶kata-monitorååååºï¼ï¼20 æ¯«ç§ï¼å¹³åï¼\n\n * ä»£çï¼ä» shim å°agentçææ rpcï¼ï¼3 æ¯«ç§ï¼å¹³åï¼\n\n * prometheus é»è®¤scrape_intervalä¸º 1 åéï¼ä½éå¸¸è®¾ç½®ä¸º 15 ç§ãè¾å°scrape_intervalä¼å¯¼è´æ´å¤å¼éï¼å æ­¤ç¨æ·åºæ ¹æ®èªå·±ççæ§éæ±è¿è¡è®¾ç½®ã\n   \n   prometheus ååºçä¸ä¸ªææ è·åè¯·æ±çå¤§å°ãå½æ²¡æ gzip åç¼©æ¶ï¼è®¡ç®é¢æå¤§å°çå¬å¼æ¯ï¼\n   9 + (144 - 9) *number of kata sandboxes prometheusæ¯ægzipåç¼©. å¯ç¨åï¼æ¯ä¸ªè¯·æ±çååºå¤§å°ä¼æ´å°ï¼\n   2 + (10 - 2) *number of kata sandboxes\n\n\n# endpoint\n\nkata-monitorå¬å¼äºä»¥ä¸endpointÂ·ï¼\n\n * /metrics : è·å kata æ²ç®±ææ ã\n * /sandboxes : ååºä¸»æºä¸è¿è¡çææ kata æ²ç®±ã\n * /agent-url : è·å kata æ²ç®±çä»£ç urlã\n * /debug/vars : kata è¿è¡æ¶ shim çåé¨æ°æ®ã\n * /debug/pprof/ : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼ç´¢å¼é¡µã\n * /debug/pprof/cmdline : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼cmdlineendpointã\n * /debug/pprof/profile : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼profileendpointï¼cpu åæï¼ã\n * /debug/pprof/symbol : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼symbolendpointã\n * /debug/pprof/trace : kata è¿è¡æ¶ shim ç golang åææ°æ®ï¼traceendpointã\n\n/agent-urlåææ/debug/ * é½éè¦å¨æ¥è¯¢å­ç¬¦ä¸²ä¸­æå®sandbox_id\n\ncurl 127.0.0.1:8090/sandboxes curl 127.0.0.1:8090/agent-url?sandboxes=df96b24bd49ec437c872c1a758edc084121d607ce1242ff5d2263a0e1b693343',charsets:{cjk:!0}},{title:"kataä½¿ç¨éå¶",frontmatter:{title:"kataä½¿ç¨éå¶",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/f1a570/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"kataä½¿ç¨éå¶"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataä½¿ç¨éå¶"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataä½¿ç¨éå¶"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/06.kata%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.md",key:"v-5ee541f8",path:"/pages/f1a570/",headers:[{level:2,title:"CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman",slug:"cliå½ä»¤-ä¸æ¯ædockeråpodman",normalizedTitle:"cliå½ä»¤ï¼ä¸æ¯ædockeråpodman",charIndex:358},{level:2,title:"runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate",slug:"runtimeå½ä»¤-ä¸æ¯æcheckpointãrestoreãevents-ãupdate",normalizedTitle:"runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate",charIndex:415},{level:2,title:"ç½ç»ï¼æªååº",slug:"ç½ç»-æªååº",normalizedTitle:"ç½ç»ï¼æªååº",charIndex:466},{level:2,title:"èµæºç®¡ç",slug:"èµæºç®¡ç",normalizedTitle:"èµæºç®¡ç",charIndex:477},{level:3,title:"docker ç--cpu",slug:"docker-ç-cpu",normalizedTitle:"docker ç--cpu",charIndex:539},{level:3,title:"vcpus",slug:"vcpus",normalizedTitle:"vcpus",charIndex:557},{level:2,title:"æ¶æéå¶",slug:"æ¶æéå¶",normalizedTitle:"æ¶æéå¶",charIndex:567},{level:3,title:"å­å¨éå¶subPaths",slug:"å­å¨éå¶subpaths",normalizedTitle:"å­å¨éå¶subpaths",charIndex:576},{level:3,title:"ä¸»æºèµæºå±äº«:securityContext privileged",slug:"ä¸»æºèµæºå±äº«-securitycontext-privileged",normalizedTitle:"ä¸»æºèµæºå±äº«:securitycontext privileged",charIndex:593},{level:2,title:"éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­",slug:"éè¿guest-kernelåæ°è®¾ç½®éå¶kata-vm-å¦sysctlåæ°ç­",normalizedTitle:"éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­",charIndex:734},{level:2,title:"éå¶kata container",slug:"éå¶kata-container",normalizedTitle:"éå¶kata container",charIndex:777},{level:2,title:"éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",slug:"éè¿ä¸»æºçº§çº¦æéå¶hypervisor-è®¾ç½®hypervisoråæ°",normalizedTitle:"éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",charIndex:798}],headersStr:"CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate ç½ç»ï¼æªååº èµæºç®¡ç docker ç--cpu vcpus æ¶æéå¶ å­å¨éå¶subPaths ä¸»æºèµæºå±äº«:securityContext privileged éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­ éå¶kata container éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",content:"https://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md\n\nkataå¨ç¡¬ä»¶éç¦»çèææºä¸­è¿è¡å®¹å¨ï¼æ¯ä¸ªvmé½æç¬ç«çåæ ¸ï¼ç±äºè¿ç§é«ç¨åº¦çéç¦»ï¼æäºå®¹å¨åè½æ æ³å¯ç¨ï¼æèéè¿vméå¼å¯ç¨ã\n\nOCI è§èå®ä¹äºè¿è¡æ¶å¿é¡»æ¯æçæä½è§èï¼ä»¥ä¾¿ä¸ Docker ç­å®¹å¨ç®¡çå¨è¿è¡äºæä½ãå¦æè¿è¡æ¶ä¸æ¯æ OCI è§èçæäºæ¹é¢ï¼åæ ¹æ®å®ä¹å®æ¯ä¸ä¸ªéå¶ã\n\nä½æ¯ï¼runcå¹¶ä¸å®å¨ç¬¦å OCI è§èæ¬èº«ã\n\nä»¥ä¸æ¯ç¤¾åºååºçéå¶ https://github.com/pulls?q=label%3Alimitation+org%3Akata-containers+is%3Aopen\n\n\n# ä¸äºååºçéå¶\n\n\n# CLIå½ä»¤ï¼ä¸æ¯ædockeråPodman\n\nä¸æ¯ædocker --runtimeæå®kataè¿è¡æ¶\n\n\n# runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate\n\n\n# ç½ç»ï¼æªååº\n\n\n# èµæºç®¡ç\n\nå¯¹äºåºäº VM çç³»ç»ï¼å° cgroupãCPUãåå­åå­å¨ç­èµæºçº¦æåºç¨äºå·¥ä½è´è½½å¹¶ä¸æ»æ¯é£ä¹ç®åã\n\n\n# docker ç--cpu\n\n\n# vcpus\n\n\n# æ¶æéå¶\n\n\n# å­å¨éå¶subPaths\n\n\n# ä¸»æºèµæºå±äº«:securityContext privileged\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/privileged.md\n\n\n# kataå®¹å¨éå¶çº§å«\n\n\n# éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­\n\n\n# éå¶kata container\n\n\n# éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",normalizedContent:"https://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md\n\nkataå¨ç¡¬ä»¶éç¦»çèææºä¸­è¿è¡å®¹å¨ï¼æ¯ä¸ªvmé½æç¬ç«çåæ ¸ï¼ç±äºè¿ç§é«ç¨åº¦çéç¦»ï¼æäºå®¹å¨åè½æ æ³å¯ç¨ï¼æèéè¿vméå¼å¯ç¨ã\n\noci è§èå®ä¹äºè¿è¡æ¶å¿é¡»æ¯æçæä½è§èï¼ä»¥ä¾¿ä¸ docker ç­å®¹å¨ç®¡çå¨è¿è¡äºæä½ãå¦æè¿è¡æ¶ä¸æ¯æ oci è§èçæäºæ¹é¢ï¼åæ ¹æ®å®ä¹å®æ¯ä¸ä¸ªéå¶ã\n\nä½æ¯ï¼runcå¹¶ä¸å®å¨ç¬¦å oci è§èæ¬èº«ã\n\nä»¥ä¸æ¯ç¤¾åºååºçéå¶ https://github.com/pulls?q=label%3alimitation+org%3akata-containers+is%3aopen\n\n\n# ä¸äºååºçéå¶\n\n\n# cliå½ä»¤ï¼ä¸æ¯ædockeråpodman\n\nä¸æ¯ædocker --runtimeæå®kataè¿è¡æ¶\n\n\n# runtimeå½ä»¤ï¼ä¸æ¯æcheckpointãrestoreãevents ãupdate\n\n\n# ç½ç»ï¼æªååº\n\n\n# èµæºç®¡ç\n\nå¯¹äºåºäº vm çç³»ç»ï¼å° cgroupãcpuãåå­åå­å¨ç­èµæºçº¦æåºç¨äºå·¥ä½è´è½½å¹¶ä¸æ»æ¯é£ä¹ç®åã\n\n\n# docker ç--cpu\n\n\n# vcpus\n\n\n# æ¶æéå¶\n\n\n# å­å¨éå¶subpaths\n\n\n# ä¸»æºèµæºå±äº«:securitycontext privileged\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/privileged.md\n\n\n# kataå®¹å¨éå¶çº§å«\n\n\n# éè¿guest kernelåæ°è®¾ç½®éå¶kata vmï¼å¦sysctlåæ°ç­\n\n\n# éå¶kata container\n\n\n# éè¿ä¸»æºçº§çº¦æéå¶hypervisorï¼è®¾ç½®hypervisoråæ°",charsets:{cjk:!0}},{title:"å¶ä»ç¹æ§",frontmatter:{title:"å¶ä»ç¹æ§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/2dc340/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å¶ä»ç¹æ§"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¶ä»ç¹æ§"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¶ä»ç¹æ§"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/07.%E5%85%B6%E4%BB%96%E7%89%B9%E6%80%A7.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.md",key:"v-093891d7",path:"/pages/2dc340/",headersStr:null,content:"# vm cache\n\nVMCache æå¡å¨å°åå»ºä¸äº VM å¹¶éè¿å·¥åç¼å­å¯¹å¶è¿è¡ç¼å­ãå®å° VM è½¬æ¢ä¸º gRPC æ ¼å¼ï¼å¹¶å¨æ¶å°å®¢æ·ç«¯è¯·æ±æ¶è¿è¡ä¼ è¾ã\n\nvm_cache_numberæå®VMCacheçç¼å­æ°éï¼\n- æªæå®æ == 0\n  VMCache å·²ç¦ç¨\n- \\> 0\n  å°è¢«è®¾ç½®ä¸ºæå®çæ°å­\nvm_cache_endpointæå® Unix å¥æ¥å­çå°åã\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿è°ç¨åå»ºä¸ä¸ª VM æ¨¡æ¿ä¾ä»¥åä½¿ç¨ï¼\n\n$ sudo kata-runtime factory init\n\n\n1\n\n\n\n# èææºæ¨¡æ¿\n\n\n# ç¹æå®¹å¨\n\nå·æéå¸¸ä¸æäºçéå åè½åè®¿é®æé å¦æéç½®ä¸æ­£ç¡®ï¼å®å¯è½ä¼éä½ Kata Containers çå®å¨æ§ã\n\né»è®¤æåµä¸ï¼å½ä¸ºå®¹å¨å¯ç¨ç¹ææ¶ï¼/dev/*ä¸»æºä¸­çææåè®¾å¤é½ä¼æè½½å°guestä¸­ãè¿å°åè®¸ Kata gueståé¨çç¹æå®¹å¨è·å¾ä»ä¸»æºæè½½ä»»ä½åè®¾å¤çè®¿é®æéï¼è¿æ¯éä½ Kata å®å¨æ§çæ½å¨ä¸è¯å¯ä½ç¨ã\n\néè¿privileged_without_host_devicesï¼ åè®¸å¨ containerd éç½®ä¸­ä¸ºæ¯ä¸ªè¿è¡æ¶éç½®ç¹æä¸»æºè®¾å¤è¡ä¸ºï¼å°æ­¤è®¾ç½®ä¸ºtrueå°ç¦ç¨ä¸»æºè®¾å¤ç­æå¥æ¥å®¾ï¼å³ä½¿å¯ç¨äºç¹æä¹æ¯å¦æ­¤ã\n\n\n# Serverless",normalizedContent:"# vm cache\n\nvmcache æå¡å¨å°åå»ºä¸äº vm å¹¶éè¿å·¥åç¼å­å¯¹å¶è¿è¡ç¼å­ãå®å° vm è½¬æ¢ä¸º grpc æ ¼å¼ï¼å¹¶å¨æ¶å°å®¢æ·ç«¯è¯·æ±æ¶è¿è¡ä¼ è¾ã\n\nvm_cache_numberæå®vmcacheçç¼å­æ°éï¼\n- æªæå®æ == 0\n  vmcache å·²ç¦ç¨\n- \\> 0\n  å°è¢«è®¾ç½®ä¸ºæå®çæ°å­\nvm_cache_endpointæå® unix å¥æ¥å­çå°åã\n\n\n1\n2\n3\n4\n5\n6\n\n\néè¿è°ç¨åå»ºä¸ä¸ª vm æ¨¡æ¿ä¾ä»¥åä½¿ç¨ï¼\n\n$ sudo kata-runtime factory init\n\n\n1\n\n\n\n# èææºæ¨¡æ¿\n\n\n# ç¹æå®¹å¨\n\nå·æéå¸¸ä¸æäºçéå åè½åè®¿é®æé å¦æéç½®ä¸æ­£ç¡®ï¼å®å¯è½ä¼éä½ kata containers çå®å¨æ§ã\n\né»è®¤æåµä¸ï¼å½ä¸ºå®¹å¨å¯ç¨ç¹ææ¶ï¼/dev/*ä¸»æºä¸­çææåè®¾å¤é½ä¼æè½½å°guestä¸­ãè¿å°åè®¸ kata gueståé¨çç¹æå®¹å¨è·å¾ä»ä¸»æºæè½½ä»»ä½åè®¾å¤çè®¿é®æéï¼è¿æ¯éä½ kata å®å¨æ§çæ½å¨ä¸è¯å¯ä½ç¨ã\n\néè¿privileged_without_host_devicesï¼ åè®¸å¨ containerd éç½®ä¸­ä¸ºæ¯ä¸ªè¿è¡æ¶éç½®ç¹æä¸»æºè®¾å¤è¡ä¸ºï¼å°æ­¤è®¾ç½®ä¸ºtrueå°ç¦ç¨ä¸»æºè®¾å¤ç­æå¥æ¥å®¾ï¼å³ä½¿å¯ç¨äºç¹æä¹æ¯å¦æ­¤ã\n\n\n# serverless",charsets:{cjk:!0}},{title:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§",frontmatter:{title:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/84f980/",categories:["ææ¯æè°","kata-containers","kataé¨ç½²"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-deployé¨ç½²ãå¸è½½ä¸åçº§"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/01.kata-deploy%E9%83%A8%E7%BD%B2%E3%80%81%E5%8D%B8%E8%BD%BD%E4%B8%8E%E5%8D%87%E7%BA%A7.html",relativePath:"01.ææ¯æè°/06.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.md",key:"v-b4021342",path:"/pages/84f980/",headers:[{level:2,title:"é¨ç½²kata-monitor",slug:"é¨ç½²kata-monitor",normalizedTitle:"é¨ç½²kata-monitor",charIndex:924},{level:3,title:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",slug:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",normalizedTitle:"kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨",charIndex:966},{level:3,title:"promethueså¢å scrape_configs",slug:"promethueså¢å scrape-configs",normalizedTitle:"promethueså¢å scrape_configs",charIndex:1288},{level:3,title:"å¯¼å¥ Grafana dashborad",slug:"å¯¼å¥-grafana-dashborad",normalizedTitle:"å¯¼å¥ grafana dashborad",charIndex:1403},{level:2,title:"æ£æ¥ï¼",slug:"æ£æ¥",normalizedTitle:"æ£æ¥ï¼",charIndex:1701}],headersStr:"é¨ç½²kata-monitor kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨ promethueså¢å scrape_configs å¯¼å¥ Grafana dashborad æ£æ¥ï¼",content:'[TOC]\n\n\n# åæ\n\n * ç©çæºå·²å¼å¯ç¡¬ä»¶èæå\n * k8så®¹å¨è¿è¡æ¶ä½¿ç¨containerdï¼æ¨èï¼\n\n\n# é¨ç½²\n\n * ç»kataèç¹æä¸label: kata-worker=trueï¼å¦æä¸éè¦åºåkataèç¹ï¼å¯ä»¥ækata-deployä¸­çèç¹äº²åæ§å»æï¼\n * çæconfiguration.tomlååå°åä¸ªkataèç¹ï¼ææèç¹ï¼/etc/kata-containers/configuration.toml\n * åå»ºkataèµæºï¼kata-rbac.yamlãkata-deploy.yamlï¼åå»ºruntimeClassï¼ runtimeClass.yaml\n\n$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=condition=Ready -l name=kata-deploy pod\n\n$ kubectl apply -f kata-runtimeClasses.yaml\n\n\n1\n2\n3\n4\n5\n6\n\n * åä¸ªkataèç¹ï¼ææèç¹ï¼åå»ºè½¯é¾æ¥ï¼\n\nln -s /opt/kata/bin/kata-runtime /usr/bin/kata-runtime\nln -s /opt/kata/bin/kata-monitor /usr/bin/kata-monitor\n\n\n1\n2\n\n\næ³¨ï¼\n\n * éè¦æ³¨æçæ¯kata-deployéå¯å¯è½ä¼å¯¼è´é»è®¤çconfiguration.tomlæä»¶æ¢å¤é»è®¤éç½®ï¼å æ­¤ä½¿ç¨çæ¯ä¼åçº§æ´é«ç/etc/kata-containers/configuration.toml\n * ä½¿ç¨ctr runåå»ºçå®¹å¨é»è®¤ä½¿ç¨çæ¯-qemuéç½®ï¼/opt/kata/share/defaults/kata-containers/configuration-qemu.tomlï¼ï¼å¦æéè¦ä½¿ç¨ctr runæµè¯ï¼è¯·åæ­¥éç½®å°-qemuéç½®ï¼æéå®åshimé¾æ¥å°æ°çæä»¶ä¸\n\n\n# é¨ç½²kata-monitor\n\nè¯¦æè§[[kata-monitorçæ§]]\n\n\n# kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[Unit]\nDescription=kata monitor\n\n[Service]\nExecStart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nRestart=always\nStartLimitInterval=0\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹IP>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ Grafana dashborad\n\n$ curl -XPOST -i <grafanaèç¹IP>:3000/api/dashboards/import \\\n    -u admin:admin \\\n    -H "Content-Type: application/json" \\\n\t-d "{\\"dashboard\\":$(curl -sL https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\n\n1\n2\n3\n4\n\n\n\n# æ£æ¥ï¼\n\n[root@rqy-k8s-1 ~]# kata-runtime check\n  WARN[0000] Not running network checks as super user      arch=amd64 name=kata-runtime pid=48176 source=runtime\n  System is capable of running Kata Containers\n  System can currently create Kata Containers\n\n\n1\n2\n3\n4\n\n\n\n# å¸è½½\n\n * å é¤æækataå®¹å¨\n * å é¤kataèç¹è½¯è¿æ¥\n * å é¤kataèµæºï¼kata-rbac.yamlãkata-deploy.yamlãruntimeClass.yaml\n * å é¤kataèç¹configuration.tomlæä»¶\n\n$ kubectl delete -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=delete -l name=kata-deploy pod\n\n$ kubectl apply -f kata-cleanup.yaml\n# The cleanup daemon-set will run a single time, cleaning up the node-label, which makes it difficult to check in an automated fashion. This process should take, at most, 5 minutes.\n# kubectl get pod -n kube-system | grep kubelet-kata-cleanup\n\n$ kubectl delete -f kata-cleanup.yaml\n$ kubectl delete -f kata-rbac.yaml\n$ kubectl delete -f kata-runtimeClasses.yaml\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åçº§(TODO)',normalizedContent:'[toc]\n\n\n# åæ\n\n * ç©çæºå·²å¼å¯ç¡¬ä»¶èæå\n * k8så®¹å¨è¿è¡æ¶ä½¿ç¨containerdï¼æ¨èï¼\n\n\n# é¨ç½²\n\n * ç»kataèç¹æä¸label: kata-worker=trueï¼å¦æä¸éè¦åºåkataèç¹ï¼å¯ä»¥ækata-deployä¸­çèç¹äº²åæ§å»æï¼\n * çæconfiguration.tomlååå°åä¸ªkataèç¹ï¼ææèç¹ï¼/etc/kata-containers/configuration.toml\n * åå»ºkataèµæºï¼kata-rbac.yamlãkata-deploy.yamlï¼åå»ºruntimeclassï¼ runtimeclass.yaml\n\n$ kubectl apply -f kata-rbac.yaml\n$ kubectl apply -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=condition=ready -l name=kata-deploy pod\n\n$ kubectl apply -f kata-runtimeclasses.yaml\n\n\n1\n2\n3\n4\n5\n6\n\n * åä¸ªkataèç¹ï¼ææèç¹ï¼åå»ºè½¯é¾æ¥ï¼\n\nln -s /opt/kata/bin/kata-runtime /usr/bin/kata-runtime\nln -s /opt/kata/bin/kata-monitor /usr/bin/kata-monitor\n\n\n1\n2\n\n\næ³¨ï¼\n\n * éè¦æ³¨æçæ¯kata-deployéå¯å¯è½ä¼å¯¼è´é»è®¤çconfiguration.tomlæä»¶æ¢å¤é»è®¤éç½®ï¼å æ­¤ä½¿ç¨çæ¯ä¼åçº§æ´é«ç/etc/kata-containers/configuration.toml\n * ä½¿ç¨ctr runåå»ºçå®¹å¨é»è®¤ä½¿ç¨çæ¯-qemuéç½®ï¼/opt/kata/share/defaults/kata-containers/configuration-qemu.tomlï¼ï¼å¦æéè¦ä½¿ç¨ctr runæµè¯ï¼è¯·åæ­¥éç½®å°-qemuéç½®ï¼æéå®åshimé¾æ¥å°æ°çæä»¶ä¸\n\n\n# é¨ç½²kata-monitor\n\nè¯¦æè§[[kata-monitorçæ§]]\n\n\n# kataèç¹è¿è¡kata-monitorå®æ¤è¿ç¨\n\n[root@localhost ~]# cat /etc/systemd/system/kata-monitor.service\n[unit]\ndescription=kata monitor\n\n[service]\nexecstart=/opt/kata/bin/kata-monitor -listen-address 0.0.0.0:8090\nrestart=always\nstartlimitinterval=0\nrestartsec=10\n\n[install]\nwantedby=multi-user.target\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# promethueså¢å scrape_configs\n\n- job_name: \'kata\'\n    static_configs:\n    - targets: [\'<kataèç¹ip>:8090\']\n\n\n1\n2\n3\n\n\n\n# å¯¼å¥ grafana dashborad\n\n$ curl -xpost -i <grafanaèç¹ip>:3000/api/dashboards/import \\\n    -u admin:admin \\\n    -h "content-type: application/json" \\\n\t-d "{\\"dashboard\\":$(curl -sl https://raw.githubusercontent.com/kata-containers/kata-containers/main/docs/how-to/data/dashboard.json )}"\n\n\n1\n2\n3\n4\n\n\n\n# æ£æ¥ï¼\n\n[root@rqy-k8s-1 ~]# kata-runtime check\n  warn[0000] not running network checks as super user      arch=amd64 name=kata-runtime pid=48176 source=runtime\n  system is capable of running kata containers\n  system can currently create kata containers\n\n\n1\n2\n3\n4\n\n\n\n# å¸è½½\n\n * å é¤æækataå®¹å¨\n * å é¤kataèç¹è½¯è¿æ¥\n * å é¤kataèµæºï¼kata-rbac.yamlãkata-deploy.yamlãruntimeclass.yaml\n * å é¤kataèç¹configuration.tomlæä»¶\n\n$ kubectl delete -f kata-deploy.yaml\n\n$ kubectl -n kube-system wait --timeout=10m --for=delete -l name=kata-deploy pod\n\n$ kubectl apply -f kata-cleanup.yaml\n# the cleanup daemon-set will run a single time, cleaning up the node-label, which makes it difficult to check in an automated fashion. this process should take, at most, 5 minutes.\n# kubectl get pod -n kube-system | grep kubelet-kata-cleanup\n\n$ kubectl delete -f kata-cleanup.yaml\n$ kubectl delete -f kata-rbac.yaml\n$ kubectl delete -f kata-runtimeclasses.yaml\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n\n# åçº§(todo)',charsets:{cjk:!0}},{title:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾",frontmatter:{title:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/cda215/",categories:["ææ¯æè°","kata-containers","kataåè¯"],tags:[null],titleTag:"åå",readingShow:"top",description:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0",meta:[{name:"twitter:title",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{name:"twitter:description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{property:"og:description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾"},{itemprop:"description",content:"k8s: 1.17.2\ncontainerd: 1.4.6\nkata: 2.4.0"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html",relativePath:"01.ææ¯æè°/06.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.md",key:"v-1b6d1231",path:"/pages/cda215/",headers:[{level:2,title:"crictl pods",slug:"crictl-pods",normalizedTitle:"crictl pods",charIndex:902},{level:2,title:"crictl ps",slug:"crictl-ps",normalizedTitle:"crictl ps",charIndex:1296},{level:2,title:"crictl stats",slug:"crictl-stats",normalizedTitle:"crictl stats",charIndex:1652},{level:2,title:"è·åsandboxID",slug:"è·åsandboxid",normalizedTitle:"è·åsandboxid",charIndex:1899},{level:2,title:"å®¿ä¸»æºè¿ç¨",slug:"å®¿ä¸»æºè¿ç¨",normalizedTitle:"å®¿ä¸»æºè¿ç¨",charIndex:2074},{level:2,title:"ip netns",slug:"ip-netns",normalizedTitle:"ip netns",charIndex:5851},{level:2,title:"å®¿ä¸»æºç®å½",slug:"å®¿ä¸»æºç®å½",normalizedTitle:"å®¿ä¸»æºç®å½",charIndex:8032},{level:2,title:"vm_pid",slug:"vm-pid",normalizedTitle:"vm_pid",charIndex:8218},{level:2,title:"df -h",slug:"df-h",normalizedTitle:"df -h",charIndex:9781},{level:2,title:"lsblk",slug:"lsblk",normalizedTitle:"lsblk",charIndex:10298},{level:2,title:"ip addr",slug:"ip-addr",normalizedTitle:"ip addr",charIndex:10493},{level:2,title:"mount",slug:"mount",normalizedTitle:"mount",charIndex:2853},{level:2,title:"lsblk",slug:"lsblk-2",normalizedTitle:"lsblk",charIndex:10298},{level:2,title:"ççæè½½äºä»ä¹ååº",slug:"ççæè½½äºä»ä¹ååº",normalizedTitle:"ççæè½½äºä»ä¹ååº",charIndex:14012},{level:2,title:"lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã",slug:"lsé½æ²¡æ-åªè½echo-ä»£æ¿ã",normalizedTitle:"lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã",charIndex:17558},{level:2,title:"uname -a",slug:"uname-a",normalizedTitle:"uname -a",charIndex:17705},{level:2,title:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",slug:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",normalizedTitle:"ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å",charIndex:17718},{level:2,title:"ççé½æä»ä¹è¿ç¨",slug:"ççé½æä»ä¹è¿ç¨",normalizedTitle:"ççé½æä»ä¹è¿ç¨",charIndex:17918},{level:2,title:"ççæå¤å°åå­",slug:"ççæå¤å°åå­",normalizedTitle:"ççæå¤å°åå­",charIndex:17952},{level:2,title:"ççåæ ¸å¯å¨åæ°",slug:"ççåæ ¸å¯å¨åæ°",normalizedTitle:"ççåæ ¸å¯å¨åæ°",charIndex:17983},{level:2,title:"ççsystemctlçæå¡",slug:"ççsystemctlçæå¡",normalizedTitle:"ççsystemctlçæå¡",charIndex:18019},{level:2,title:"cpuinfo/meminfo  (2C)",slug:"cpuinfo-meminfo-2c",normalizedTitle:"cpuinfo/meminfo  (2c)",charIndex:null}],headersStr:"crictl pods crictl ps crictl stats è·åsandboxID å®¿ä¸»æºè¿ç¨ ip netns å®¿ä¸»æºç®å½ vm_pid df -h lsblk ip addr mount lsblk ççæè½½äºä»ä¹ååº lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã uname -a ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å ççé½æä»ä¹è¿ç¨ ççæå¤å°åå­ ççåæ ¸å¯å¨åæ° ççsystemctlçæå¡ cpuinfo/meminfo  (2C)",content:'# ç¯å¢\n\n> k8s: 1.17.2 containerd: 1.4.6 kata: 2.4.0\n\n\n# åå»ºä¸ä¸ªkataå®¹å¨\n\n    resources:\n      limits:\n        cpu: "1"\n        memory: 1Gi\n      requests:\n        cpu: "1"\n        memory: 1Gi\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n[root@localhost ~]# kubectl get pod -o wide\nNAME                              READY   STATUS    RESTARTS   AGE   IP               NODE                    NOMINATED NODE   READINESS GATES\ntest-runc                         1/1     Running   0          19h   10.241.102.169   localhost.localdomain   <none>           <none>\n[root@localhost ~]# kubectl top pod\nNAME                              CPU(cores)   MEMORY(bytes)\ntest-kata                         0m           2Mi\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184Mi (18%)     1184Mi (18%)   64m\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# crictl pods\n\n[root@localhost ~]# crictl pods\nPOD ID              CREATED             STATE               NAME                                                    NAMESPACE              ATTEMPT             RUNTIME\n3871d0c8108c6       About an hour ago   Ready               test-kata                                               default                0                   kata-qemu\n\n\n1\n2\n3\n\n\n\n# crictl ps\n\n[root@localhost ~]# crictl ps\nCONTAINER           IMAGE               CREATED             STATE               NAME                                   ATTEMPT             POD ID\na83ce7bc82f78       e39e5c33c2d50       About an hour ago   Running             pod1                                   0                   3871d0c8108c6\n\n\n\n1\n2\n3\n4\n\n\n\n# crictl stats\n\n[root@localhost ~]# crictl stats a83ce7bc82f78\nCONTAINER           CPU %               MEM                 DISK                INODES\na83ce7bc82f78       0.00                3.056MB             16.38kB             14\n\n\n\n1\n2\n3\n4\n\n\n\n# è·åsandboxID\n\n[root@localhost ~]# crictl inspect a83ce7bc82f78 | grep sandboxID\n    "sandboxID": "3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985",\n\n\n1\n2\n\n\n\n# å®¿ä¸»æºè¿ç¨\n\n[root@localhost ~]# ps -ef | grep 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot      2251   429  0 11:32 pts/2    00:00:00 grep --color=auto 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23520     1  0 10:24 ?        00:00:01 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23528 23520  0 10:24 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     23535     1  0 10:24 ?        00:00:09 /opt/kata/bin/qemu-system-x86_64 -name sandbox-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985 -uuid 2cfc6a6d-63ab-41aa-ac4b-18cb10377791 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/qmp.sock,server=on,wait=off -m 2048M,slots=10,maxmem=8773M -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-4001198526,guest-cid=4001198526 -chardev socket,id=char-93f9924bc919f096,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-93f9924bc919f096,tag=kataShared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=ea:e4:96:23:5e:9f,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048M,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026 -pidfile /run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     23543 23528  0 10:24 ?        00:00:01 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     27463 17898  0 10:26 pts/0    00:00:00 kata-runtime exec 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# ip netns\n\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: tunl0@NONE: <NOARP> mtu 1480 qdisc noop state DOWN group default qlen 1000\n    link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if17552: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc noqueue state UP group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 10.241.103.177/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n5: tap0_kata: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc mq state UNKNOWN group default qlen 1000\n    link/ether a2:a5:96:5b:90:23 brd ff:ff:ff:ff:ff:ff\n    inet6 fe80::a0a5:96ff:fe5b:9023/64 scope link\n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n Sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n Sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n Sent 992 bytes 16 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# å®¿ä¸»æºç®å½\n\n> /run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/ /sys/fs/cgroup/(memoryãdevicesãcpu,cpuacct...) /sys/fs/cgroup/systemd/kata_overhead/ /app/docker/containerd/\n\n\n# vm_pid\n\n[root@localhost ~]# cat /proc/23535/status\nName:   qemu-system-x86\nUmask:  0027\nState:  S (sleeping)\nTgid:   23535\nNgid:   0\nPid:    23535\nPPid:   1\nTracerPid:      0\nUid:    0       0       0       0\nGid:    0       0       0       0\nFDSize: 128\nGroups:\nVmPeak:  3659100 kB\nVmSize:  3659100 kB\nVmLck:         0 kB\nVmPin:         0 kB\nVmHWM:    152104 kB\nVmRSS:    152104 kB\nRssAnon:           14288 kB\nRssFile:           35956 kB\nRssShmem:         101860 kB\nVmData:   326316 kB\nVmStk:       132 kB\nVmExe:      8496 kB\nVmLib:         0 kB\nVmPTE:       652 kB\nVmSwap:        0 kB\nThreads:        5\nSigQ:   0/30632\nSigPnd: 0000000000000000\nShdPnd: 0000000000000000\nSigBlk: 0000000010002240\nSigIgn: 0000000000381000\nSigCgt: 0000000180004243\nCapInh: 0000000000000000\nCapPrm: 0000001fffffffff\nCapEff: 0000001fffffffff\nCapBnd: 0000001fffffffff\nCapAmb: 0000000000000000\nNoNewPrivs:     0\nSeccomp:        0\nSpeculation_Store_Bypass:       thread vulnerable\nCpus_allowed:   ff\nCpus_allowed_list:      0-7\nMems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001\nMems_allowed_list:      0\nvoluntary_ctxt_switches:        1769\nnonvoluntary_ctxt_switches:     4\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# è¿å¥kataå®¹å¨\n\n\n# df -h\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# df -h\n\nFilesystem      Size  Used Avail Use% Mounted on\n\nnone            494G   28G  466G   6% /\n\ntmpfs            64M     0   64M   0% /dev\n\ntmpfs           992M     0  992M   0% /sys/fs/cgroup\n\nnone            494G   28G  466G   6% /hff\n\nkataShared      494G   28G  466G   6% /etc/hosts\n\nshm             992M     0  992M   0% /dev/shm\n\ntmpfs           992M   12K  992M   1% /run/secrets/kubernetes.io/serviceaccount\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# lsblk\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# lsblk\n\nNAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n\npmem0     259:0    0  126M  1 disk\n\n`-pmem0p1 259:1    0  124M  1 part\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ip addr\n\n/ # ip addr\nroot@test-kata:/# ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1440 qdisc fq state UP group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff\n    inet 10.241.103.177/32 brd 10.241.103.177 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# mount\n\nroot@test-kata:/# mount\nnone on / type virtiofs (rw,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=666)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (ro,nosuid,nodev,noexec,relatime)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,relatime,size=1020892k,nr_inodes=255223)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (ro,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/devices type cgroup (ro,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (ro,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/pids type cgroup (ro,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (ro,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (ro,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (ro,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/blkio type cgroup (ro,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/freezer type cgroup (ro,nosuid,nodev,noexec,relatime,freezer)\nnone on /test type virtiofs (rw,relatime)\nkataShared on /etc/hosts type virtiofs (rw,relatime)\nkataShared on /dev/termination-log type virtiofs (rw,relatime)\nkataShared on /etc/hostname type virtiofs (rw,relatime)\nkataShared on /etc/resolv.conf type virtiofs (rw,relatime)\nshm on /dev/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /run/secrets/kubernetes.io/serviceaccount type tmpfs (ro,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /proc/timer_list type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\nproc on /proc/bus type proc (ro,relatime)\nproc on /proc/fs type proc (ro,relatime)\nproc on /proc/irq type proc (ro,relatime)\nproc on /proc/sys type proc (ro,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# è¿å¥kata vm\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# lsblk\n\nbash-5.1# lsblk\nNAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\npmem0     259:0    0  126M  1 disk\n`-pmem0p1 259:1    0  124M  1 part /\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n\n\n\n# ççæè½½äºä»ä¹ååº\n\nbash-5.1# mount\n/dev/pmem0p1 on / type ext4 (ro,relatime,errors=remount-ro,data=ordered,dax=always)\ndevtmpfs on /dev type devtmpfs (rw,relatime,size=1019140k,nr_inodes=254785,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,size=1020892k,nr_inodes=255223)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,size=4096k,nr_inodes=1024,mode=755)\ncgroup2 on /sys/fs/cgroup/unified type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,noexec,relatime,pagesize=2M)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ntmpfs on /etc/machine-id type tmpfs (ro,size=408360k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=29,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)\ntmpfs on /tmp type tmpfs (rw,nosuid,nodev,size=1020896k,nr_inodes=1048576)\nnsfs on /run/sandbox-ns/ipc type nsfs (rw)\nnsfs on /run/sandbox-ns/uts type nsfs (rw)\nkataShared on /run/kata-containers/shared/containers type virtiofs (rw,relatime)\nshm on /run/kata-containers/sandbox/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /etc/resolv.conf type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\nnone on /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\ntmpfs on /run/kata-containers/shared/containers/watchable type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount type virtiofs (rw,relatime)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã\n\nbash-5.1# echo *\nautofs bin boot dev etc home lib lib64 lost+found media mnt proc root run sbin srv sys tmp usr var\n\n\n1\n2\n\n\n\n# uname -a\n\n\n# ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å\n\nbash-5.1# lsmod\nlibkmod: kmod_module_new_from_loaded: could not open /proc/modules: No such file or directory\nError: could not get list of modules: No such file or directory\n\n\n1\n2\n3\n\n\n\n# ççé½æä»ä¹è¿ç¨\n\nbash-5.1# ps efx ww\n\n\n# ççæå¤å°åå­\n\nbash-5.1# free -h\n\n\n# ççåæ ¸å¯å¨åæ°\n\nbash-5.1# cat cmdline\n\n\n# ççsystemctlçæå¡\n\nbash-5.1# systemctl list-units\n  UNIT                                                                                                                                                  LOAD   ACTIVE     SUB       DESCRIPTION          \n  proc-sys-fs-binfmt_misc.automount                                                                                                                     loaded active     waiting   Arbitrary Executable File Formats File System Automount Point\n  dev-pmem0p1.device                                                                                                                                    loaded activating tentative /dev/pmem0p1         \n  -.mount                                                                                                                                               loaded active     mounted   Root Mount\n  etc-machine\\x2did.mount                                                                                                                               loaded active     mounted   /etc/machine-id\n  etc-resolv.conf.mount                                                                                                                                 loaded active     mounted   /etc/resolv.conf\n  run-kata\\x2dcontainers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-sandbox-shm.mount                                                                                                              loaded active     mounted   /run/kata-containers/sandbox/shm\n  run-kata\\x2dcontainers-shared-containers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a\\x2d172195b99cf7a9fd\\x2dserviceaccount.mount loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount\n  run-kata\\x2dcontainers-shared-containers-watchable.mount                                                                                              loaded active     mounted   /run/kata-containers/shared/containers/watchable\n  run-kata\\x2dcontainers-shared-containers.mount                                                                                                        loaded active     mounted   /run/kata-containers/shared/containers\n  run-sandbox\\x2dns-ipc.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/ipc\n  run-sandbox\\x2dns-uts.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/uts\n  tmp.mount                                                                                                                                             loaded active     mounted   Temporary Directory /tmp\n  systemd-ask-password-console.path                                                                                                                     loaded active     waiting   Dispatch Password Requests to Console Directory Watch\n  init.scope                                                                                                                                            loaded active     running   System and Service Manager\nâ chronyd.service                                                                                                                                       loaded failed     failed    NTP client/server\n  kata-agent.service                                                                                                                                    loaded active     running   Kata Containers Agent\n  systemd-remount-fs.service                                                                                                                            loaded active     exited    Remount Root and Kernel File Systems\n  systemd-sysctl.service                                                                                                                                loaded active     exited    Apply Kernel Variables\n  -.slice                                                                                                                                               loaded active     active    Root Slice\n  system.slice                                                                                                                                          loaded active     active    System Slice         \n  systemd-coredump.socket                                                                                                                               loaded active     listening Process Core Dump Socket\n  basic.target                                                                                                                                          loaded active     active    Basic System\n  cryptsetup.target                                                                                                                                     loaded active     active    Local Encrypted Volumes\n  kata-containers.target                                                                                                                                loaded active     active    Kata Containers Agent Target\n  local-fs-pre.target                                                                                                                                   loaded active     active    Preparation for Local File Systems\n  local-fs.target                                                                                                                                       loaded active     active    Local File Systems\n  paths.target                                                                                                                                          loaded active     active    Path Units\n  slices.target                                                                                                                                         loaded active     active    Slice Units\n  sockets.target                                                                                                                                        loaded active     active    Socket Units\n  swap.target                                                                                                                                           loaded active     active    Swaps\n  sysinit.target                                                                                                                                        loaded active     active    System Initialization\n  timers.target                                                                                                                                         loaded active     active    Timer Units          \n  systemd-tmpfiles-clean.timer                                                                                                                          loaded active     waiting   Daily Cleanup of Temporary Directories\n\nLOAD   = Reflects whether the unit definition was properly loaded.\nACTIVE = The high-level unit activation state, i.e. generalization of SUB.\nSUB    = The low-level unit activation state, values depend on unit type.\n37 loaded units listed. Pass --all to see loaded but inactive units, too.\nTo show all installed unit files use \'systemctl list-unit-files\'.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\nbash-5.1#   systemctl cat kata-containers.target\n# /usr/lib/systemd/system/kata-containers.target\n#\n# Copyright (c) 2018-2019 Intel Corporation\n#\n# SPDX-License-Identifier: Apache-2.0\n#\n\n[Unit]\nDescription=Kata Containers Agent Target\nRequires=basic.target\nRequires=tmp.mount\nWants=chronyd.service\nRequires=kata-agent.service\nConflicts=rescue.service rescue.target\nAfter=basic.target rescue.service rescue.target\nAllowIsolate=yes\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# cpuinfo/meminfo (2C)\n\nbash-5.1# more /proc/cpuinfo\nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 158\nmodel name      : Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz\nstepping        : 9\nmicrocode       : 0xea\ncpu MHz         : 3599.982\ncache size      : 16384 KB\nphysical id     : 0\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_ arat md_clearinvpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1--More--e_timer aes xsave avx f16c rdra--More--\niority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest pmld ept_1gb flexpr--More--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\nprocessor       : 1\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 158\nmodel name      : Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz\nstepping        : 9\nmicrocode       : 0xea\ncpu MHz         : 3599.982\ncache size      : 16384 KB\nphysical id     : 7\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nlushopt xsaveopt xsavec xgetbv1 arat md_clearinvpcid rtm mpx rdseed adx smap clf--More--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\n[root@localhost ~]# more /proc/meminfo   (??)\nMemTotal:        7935356 kB\nMemFree:          478024 kB\nMemAvailable:    1827752 kB\nBuffers:            1064 kB\nCached:          1903388 kB\nSwapCached:            0 kB\nActive:          5728076 kB\nInactive:         891144 kB\nActive(anon):    5029108 kB\nInactive(anon):   207680 kB\nActive(file):     698968 kB\nInactive(file):   683464 kB\nUnevictable:           4 kB\nMlocked:               4 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:              9584 kB\nWriteback:             0 kB\nAnonPages:       4715640 kB\nMapped:           564200 kB\nShmem:            522020 kB\nSlab:             469116 kB\nSReclaimable:     280468 kB\nSUnreclaim:       188648 kB\nKernelStack:       43248 kB\nPageTables:        39740 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:     3967676 kB\nCommitted_AS:   23822760 kB\nVmallocTotal:   34359738367 kB\nVmallocUsed:      461976 kB\nVmallocChunk:   34358937596 kB\nPercpu:            11552 kB\nHardwareCorrupted:     0 kB\nAnonHugePages:     20480 kB\nCmaTotal:              0 kB\nCmaFree:               0 kB\nHugePages_Total:       0\nHugePages_Free:        0\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:       2048 kB\nDirectMap4k:      211152 kB\nDirectMap2M:     8038400 kB\nDirectMap1G:           0 kB\n[root@localhost ~]#\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n\n\n\n# æ»ç»\n\nlimit 1C1G default:1C2G\n\nvm: cpuinfoï¼ 2CPU meminfo: MemTotal: 7935356 kB (7.5G)\n\npod: cpuinfoï¼2CPU meminfo: MemTotal: 3090364 kB (2.9G) free -h: 2.9G',normalizedContent:'# ç¯å¢\n\n> k8s: 1.17.2 containerd: 1.4.6 kata: 2.4.0\n\n\n# åå»ºä¸ä¸ªkataå®¹å¨\n\n    resources:\n      limits:\n        cpu: "1"\n        memory: 1gi\n      requests:\n        cpu: "1"\n        memory: 1gi\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n[root@localhost ~]# kubectl get pod -o wide\nname                              ready   status    restarts   age   ip               node                    nominated node   readiness gates\ntest-runc                         1/1     running   0          19h   10.241.102.169   localhost.localdomain   <none>           <none>\n[root@localhost ~]# kubectl top pod\nname                              cpu(cores)   memory(bytes)\ntest-kata                         0m           2mi\n[root@localhost ~]# kubectl describe node | grep kata\n  default                     test-kata                                                1250m (16%)   1250m (16%)  1184mi (18%)     1184mi (18%)   64m\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# crictl pods\n\n[root@localhost ~]# crictl pods\npod id              created             state               name                                                    namespace              attempt             runtime\n3871d0c8108c6       about an hour ago   ready               test-kata                                               default                0                   kata-qemu\n\n\n1\n2\n3\n\n\n\n# crictl ps\n\n[root@localhost ~]# crictl ps\ncontainer           image               created             state               name                                   attempt             pod id\na83ce7bc82f78       e39e5c33c2d50       about an hour ago   running             pod1                                   0                   3871d0c8108c6\n\n\n\n1\n2\n3\n4\n\n\n\n# crictl stats\n\n[root@localhost ~]# crictl stats a83ce7bc82f78\ncontainer           cpu %               mem                 disk                inodes\na83ce7bc82f78       0.00                3.056mb             16.38kb             14\n\n\n\n1\n2\n3\n4\n\n\n\n# è·åsandboxid\n\n[root@localhost ~]# crictl inspect a83ce7bc82f78 | grep sandboxid\n    "sandboxid": "3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985",\n\n\n1\n2\n\n\n\n# å®¿ä¸»æºè¿ç¨\n\n[root@localhost ~]# ps -ef | grep 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot      2251   429  0 11:32 pts/2    00:00:00 grep --color=auto 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23520     1  0 10:24 ?        00:00:01 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\nroot     23528 23520  0 10:24 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     23535     1  0 10:24 ?        00:00:09 /opt/kata/bin/qemu-system-x86_64 -name sandbox-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985 -uuid 2cfc6a6d-63ab-41aa-ac4b-18cb10377791 -machine q35,accel=kvm,kernel_irqchip=on,nvdimm=on -cpu host,pmu=off -qmp unix:/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/qmp.sock,server=on,wait=off -m 2048m,slots=10,maxmem=8773m -device pci-bridge,bus=pcie.0,id=pci-bridge-0,chassis_nr=1,shpc=off,addr=2,io-reserve=4k,mem-reserve=1m,pref64-reserve=1m -device virtio-serial-pci,disable-modern=false,id=serial0 -device virtconsole,chardev=charconsole0,id=console0 -chardev socket,id=charconsole0,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/console.sock,server=on,wait=off -device nvdimm,id=nv0,memdev=mem0,unarmed=on -object memory-backend-file,id=mem0,mem-path=/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size=134217728,readonly=on -device virtio-scsi-pci,id=scsi0,disable-modern=false -object rng-random,id=rng0,filename=/dev/urandom -device virtio-rng-pci,rng=rng0 -device vhost-vsock-pci,disable-modern=false,vhostfd=3,id=vsock-4001198526,guest-cid=4001198526 -chardev socket,id=char-93f9924bc919f096,path=/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/vhost-fs.sock -device vhost-user-fs-pci,chardev=char-93f9924bc919f096,tag=katashared -netdev tap,id=network-0,vhost=on,vhostfds=4,fds=5 -device driver=virtio-net-pci,netdev=network-0,mac=ea:e4:96:23:5e:9f,disable-modern=false,mq=on,vectors=4 -rtc base=utc,driftfix=slew,clock=host -global kvm-pit.lost_tick_policy=discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id=dimm1,size=2048m,mem-path=/dev/shm,share=on -numa node,memdev=dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append tsc=reliable no_timer_check rcupdate.rcu_expedited=1 i8042.direct=1 i8042.dumbkbd=1 i8042.nopnp=1 i8042.noaux=1 noreplace-smp reboot=k console=hvc0 console=hvc1 cryptomgr.notests net.ifnames=0 pci=lastbus=0 root=/dev/pmem0p1 rootflags=dax,data=ordered,errors=remount-ro ro rootfstype=ext4 quiet systemd.show_status=false panic=1 nr_cpus=8 systemd.unit=kata-containers.target systemd.mask=systemd-networkd.service systemd.mask=systemd-networkd.socket scsi_mod.scan=none agent.debug_console agent.debug_console_vport=1026 -pidfile /run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/pid -smp 1,cores=1,threads=1,sockets=8,maxcpus=8\nroot     23543 23528  0 10:24 ?        00:00:01 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o cache=auto -o no_posix_lock -o source=/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd=3 -f --thread-pool-size=1 -o announce_submounts\nroot     27463 17898  0 10:26 pts/0    00:00:00 kata-runtime exec 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# ip netns\n\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: tunl0@none: <noarp> mtu 1480 qdisc noop state down group default qlen 1000\n    link/ipip 0.0.0.0 brd 0.0.0.0\n4: eth0@if17552: <broadcast,multicast,up,lower_up> mtu 1440 qdisc noqueue state up group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff link-netnsid 0\n    inet 10.241.103.177/32 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n5: tap0_kata: <broadcast,multicast,up,lower_up> mtu 1440 qdisc mq state unknown group default qlen 1000\n    link/ether a2:a5:96:5b:90:23 brd ff:ff:ff:ff:ff:ff\n    inet6 fe80::a0a5:96ff:fe5b:9023/64 scope link\n       valid_lft forever preferred_lft forever\n[root@localhost ~]# ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  tc -s qdisc\nqdisc noqueue 0: dev lo root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc noqueue 0: dev eth0 root refcnt 2\n sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------\n sent 468 bytes 7 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc mq 0: dev tap0_kata root\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc pfifo_fast 0: dev tap0_kata parent :1 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n sent 1222 bytes 15 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\nqdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------\n sent 992 bytes 16 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# å®¿ä¸»æºç®å½\n\n> /run/kata-containers/shared/sandboxes/ /run/vc/vm/ /run/vc/sbs/ /sys/fs/cgroup/(memoryãdevicesãcpu,cpuacct...) /sys/fs/cgroup/systemd/kata_overhead/ /app/docker/containerd/\n\n\n# vm_pid\n\n[root@localhost ~]# cat /proc/23535/status\nname:   qemu-system-x86\numask:  0027\nstate:  s (sleeping)\ntgid:   23535\nngid:   0\npid:    23535\nppid:   1\ntracerpid:      0\nuid:    0       0       0       0\ngid:    0       0       0       0\nfdsize: 128\ngroups:\nvmpeak:  3659100 kb\nvmsize:  3659100 kb\nvmlck:         0 kb\nvmpin:         0 kb\nvmhwm:    152104 kb\nvmrss:    152104 kb\nrssanon:           14288 kb\nrssfile:           35956 kb\nrssshmem:         101860 kb\nvmdata:   326316 kb\nvmstk:       132 kb\nvmexe:      8496 kb\nvmlib:         0 kb\nvmpte:       652 kb\nvmswap:        0 kb\nthreads:        5\nsigq:   0/30632\nsigpnd: 0000000000000000\nshdpnd: 0000000000000000\nsigblk: 0000000010002240\nsigign: 0000000000381000\nsigcgt: 0000000180004243\ncapinh: 0000000000000000\ncapprm: 0000001fffffffff\ncapeff: 0000001fffffffff\ncapbnd: 0000001fffffffff\ncapamb: 0000000000000000\nnonewprivs:     0\nseccomp:        0\nspeculation_store_bypass:       thread vulnerable\ncpus_allowed:   ff\ncpus_allowed_list:      0-7\nmems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001\nmems_allowed_list:      0\nvoluntary_ctxt_switches:        1769\nnonvoluntary_ctxt_switches:     4\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# è¿å¥kataå®¹å¨\n\n\n# df -h\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# df -h\n\nfilesystem      size  used avail use% mounted on\n\nnone            494g   28g  466g   6% /\n\ntmpfs            64m     0   64m   0% /dev\n\ntmpfs           992m     0  992m   0% /sys/fs/cgroup\n\nnone            494g   28g  466g   6% /hff\n\nkatashared      494g   28g  466g   6% /etc/hosts\n\nshm             992m     0  992m   0% /dev/shm\n\ntmpfs           992m   12k  992m   1% /run/secrets/kubernetes.io/serviceaccount\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# lsblk\n\n\nroot@hostpath-kata-7949f86f8c-8gfqj:/# lsblk\n\nname      maj:min rm  size ro type mountpoint\n\npmem0     259:0    0  126m  1 disk\n\n`-pmem0p1 259:1    0  124m  1 part\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# ip addr\n\n/ # ip addr\nroot@test-kata:/# ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <broadcast,multicast,up,lower_up> mtu 1440 qdisc fq state up group default qlen 1000\n    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff\n    inet 10.241.103.177/32 brd 10.241.103.177 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope link\n       valid_lft forever preferred_lft forever\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# mount\n\nroot@test-kata:/# mount\nnone on / type virtiofs (rw,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=666)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (ro,nosuid,nodev,noexec,relatime)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,relatime,size=1020892k,nr_inodes=255223)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\ncgroup on /sys/fs/cgroup/memory type cgroup (ro,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/devices type cgroup (ro,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (ro,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/pids type cgroup (ro,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (ro,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (ro,nosuid,nodev,noexec,relatime,perf_event)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (ro,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/blkio type cgroup (ro,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/freezer type cgroup (ro,nosuid,nodev,noexec,relatime,freezer)\nnone on /test type virtiofs (rw,relatime)\nkatashared on /etc/hosts type virtiofs (rw,relatime)\nkatashared on /dev/termination-log type virtiofs (rw,relatime)\nkatashared on /etc/hostname type virtiofs (rw,relatime)\nkatashared on /etc/resolv.conf type virtiofs (rw,relatime)\nshm on /dev/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /run/secrets/kubernetes.io/serviceaccount type tmpfs (ro,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /proc/timer_list type tmpfs (rw,nosuid,size=65536k,nr_inodes=255223,mode=755)\nproc on /proc/bus type proc (ro,relatime)\nproc on /proc/fs type proc (ro,relatime)\nproc on /proc/irq type proc (ro,relatime)\nproc on /proc/sys type proc (ro,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# è¿å¥kata vm\n\nhttps://github.com/kata-containers/kata-containers/issues/2010\n\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# lsblk\n\nbash-5.1# lsblk\nname      maj:min rm  size ro type mountpoints\npmem0     259:0    0  126m  1 disk\n`-pmem0p1 259:1    0  124m  1 part /\nbash-5.1#\n\n\n1\n2\n3\n4\n5\n\n\n\n# ççæè½½äºä»ä¹ååº\n\nbash-5.1# mount\n/dev/pmem0p1 on / type ext4 (ro,relatime,errors=remount-ro,data=ordered,dax=always)\ndevtmpfs on /dev type devtmpfs (rw,relatime,size=1019140k,nr_inodes=254785,mode=755)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,size=1020892k,nr_inodes=255223)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,size=4096k,nr_inodes=1024,mode=755)\ncgroup2 on /sys/fs/cgroup/unified type cgroup2 (rw,nosuid,nodev,noexec,relatime,nsdelegate)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,name=systemd)\nbpf on /sys/fs/bpf type bpf (rw,nosuid,nodev,noexec,relatime,mode=700)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,nosuid,nodev,noexec,relatime,pagesize=2m)\nmqueue on /dev/mqueue type mqueue (rw,nosuid,nodev,noexec,relatime)\nfusectl on /sys/fs/fuse/connections type fusectl (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\ntmpfs on /etc/machine-id type tmpfs (ro,size=408360k,nr_inodes=819200,mode=755)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=29,pgrp=1,timeout=0,minproto=5,maxproto=5,direct)\ntmpfs on /tmp type tmpfs (rw,nosuid,nodev,size=1020896k,nr_inodes=1048576)\nnsfs on /run/sandbox-ns/ipc type nsfs (rw)\nnsfs on /run/sandbox-ns/uts type nsfs (rw)\nkatashared on /run/kata-containers/shared/containers type virtiofs (rw,relatime)\nshm on /run/kata-containers/sandbox/shm type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\ntmpfs on /etc/resolv.conf type tmpfs (rw,nosuid,nodev,size=408360k,nr_inodes=819200,mode=755)\nnone on /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs type virtiofs (rw,relatime)\ntmpfs on /run/kata-containers/shared/containers/watchable type tmpfs (rw,relatime,size=1020892k,nr_inodes=255223)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount type virtiofs (rw,relatime)\nnone on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\nnone on /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs type virtiofs (rw,relatime)\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# lsé½æ²¡æï¼åªè½echo * ä»£æ¿ã\n\nbash-5.1# echo *\nautofs bin boot dev etc home lib lib64 lost+found media mnt proc root run sbin srv sys tmp usr var\n\n\n1\n2\n\n\n\n# uname -a\n\n\n# ççæ¿æ´»äºä»ä¹åæ ¸æ¨¡å\n\nbash-5.1# lsmod\nlibkmod: kmod_module_new_from_loaded: could not open /proc/modules: no such file or directory\nerror: could not get list of modules: no such file or directory\n\n\n1\n2\n3\n\n\n\n# ççé½æä»ä¹è¿ç¨\n\nbash-5.1# ps efx ww\n\n\n# ççæå¤å°åå­\n\nbash-5.1# free -h\n\n\n# ççåæ ¸å¯å¨åæ°\n\nbash-5.1# cat cmdline\n\n\n# ççsystemctlçæå¡\n\nbash-5.1# systemctl list-units\n  unit                                                                                                                                                  load   active     sub       description          \n  proc-sys-fs-binfmt_misc.automount                                                                                                                     loaded active     waiting   arbitrary executable file formats file system automount point\n  dev-pmem0p1.device                                                                                                                                    loaded activating tentative /dev/pmem0p1         \n  -.mount                                                                                                                                               loaded active     mounted   root mount\n  etc-machine\\x2did.mount                                                                                                                               loaded active     mounted   /etc/machine-id\n  etc-resolv.conf.mount                                                                                                                                 loaded active     mounted   /etc/resolv.conf\n  run-kata\\x2dcontainers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-sandbox-shm.mount                                                                                                              loaded active     mounted   /run/kata-containers/sandbox/shm\n  run-kata\\x2dcontainers-shared-containers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs\n  run-kata\\x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a\\x2d172195b99cf7a9fd\\x2dserviceaccount.mount loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount\n  run-kata\\x2dcontainers-shared-containers-watchable.mount                                                                                              loaded active     mounted   /run/kata-containers/shared/containers/watchable\n  run-kata\\x2dcontainers-shared-containers.mount                                                                                                        loaded active     mounted   /run/kata-containers/shared/containers\n  run-sandbox\\x2dns-ipc.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/ipc\n  run-sandbox\\x2dns-uts.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/uts\n  tmp.mount                                                                                                                                             loaded active     mounted   temporary directory /tmp\n  systemd-ask-password-console.path                                                                                                                     loaded active     waiting   dispatch password requests to console directory watch\n  init.scope                                                                                                                                            loaded active     running   system and service manager\nâ chronyd.service                                                                                                                                       loaded failed     failed    ntp client/server\n  kata-agent.service                                                                                                                                    loaded active     running   kata containers agent\n  systemd-remount-fs.service                                                                                                                            loaded active     exited    remount root and kernel file systems\n  systemd-sysctl.service                                                                                                                                loaded active     exited    apply kernel variables\n  -.slice                                                                                                                                               loaded active     active    root slice\n  system.slice                                                                                                                                          loaded active     active    system slice         \n  systemd-coredump.socket                                                                                                                               loaded active     listening process core dump socket\n  basic.target                                                                                                                                          loaded active     active    basic system\n  cryptsetup.target                                                                                                                                     loaded active     active    local encrypted volumes\n  kata-containers.target                                                                                                                                loaded active     active    kata containers agent target\n  local-fs-pre.target                                                                                                                                   loaded active     active    preparation for local file systems\n  local-fs.target                                                                                                                                       loaded active     active    local file systems\n  paths.target                                                                                                                                          loaded active     active    path units\n  slices.target                                                                                                                                         loaded active     active    slice units\n  sockets.target                                                                                                                                        loaded active     active    socket units\n  swap.target                                                                                                                                           loaded active     active    swaps\n  sysinit.target                                                                                                                                        loaded active     active    system initialization\n  timers.target                                                                                                                                         loaded active     active    timer units          \n  systemd-tmpfiles-clean.timer                                                                                                                          loaded active     waiting   daily cleanup of temporary directories\n\nload   = reflects whether the unit definition was properly loaded.\nactive = the high-level unit activation state, i.e. generalization of sub.\nsub    = the low-level unit activation state, values depend on unit type.\n37 loaded units listed. pass --all to see loaded but inactive units, too.\nto show all installed unit files use \'systemctl list-unit-files\'.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n\n\nbash-5.1#   systemctl cat kata-containers.target\n# /usr/lib/systemd/system/kata-containers.target\n#\n# copyright (c) 2018-2019 intel corporation\n#\n# spdx-license-identifier: apache-2.0\n#\n\n[unit]\ndescription=kata containers agent target\nrequires=basic.target\nrequires=tmp.mount\nwants=chronyd.service\nrequires=kata-agent.service\nconflicts=rescue.service rescue.target\nafter=basic.target rescue.service rescue.target\nallowisolate=yes\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# cpuinfo/meminfo (2c)\n\nbash-5.1# more /proc/cpuinfo\nprocessor       : 0\nvendor_id       : genuineintel\ncpu family      : 6\nmodel           : 158\nmodel name      : intel(r) core(tm) i7-7700 cpu @ 3.60ghz\nstepping        : 9\nmicrocode       : 0xea\ncpu mhz         : 3599.982\ncache size      : 16384 kb\nphysical id     : 0\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 0\ninitial apicid  : 0\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nflags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_ arat md_clearinvpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1--more--e_timer aes xsave avx f16c rdra--more--\niority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest pmld ept_1gb flexpr--more--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --more--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\nprocessor       : 1\nvendor_id       : genuineintel\ncpu family      : 6\nmodel           : 158\nmodel name      : intel(r) core(tm) i7-7700 cpu @ 3.60ghz\nstepping        : 9\nmicrocode       : 0xea\ncpu mhz         : 3599.982\ncache size      : 16384 kb\nphysical id     : 7\nsiblings        : 1\ncore id         : 0\ncpu cores       : 1\napicid          : 7\ninitial apicid  : 7\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 13\nwp              : yes\nlushopt xsaveopt xsavec xgetbv1 arat md_clearinvpcid rtm mpx rdseed adx smap clf--more--\nswapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --more--\nbogomips        : 7199.96\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 39 bits physical, 48 bits virtual\npower management:\n\n[root@localhost ~]# more /proc/meminfo   (??)\nmemtotal:        7935356 kb\nmemfree:          478024 kb\nmemavailable:    1827752 kb\nbuffers:            1064 kb\ncached:          1903388 kb\nswapcached:            0 kb\nactive:          5728076 kb\ninactive:         891144 kb\nactive(anon):    5029108 kb\ninactive(anon):   207680 kb\nactive(file):     698968 kb\ninactive(file):   683464 kb\nunevictable:           4 kb\nmlocked:               4 kb\nswaptotal:             0 kb\nswapfree:              0 kb\ndirty:              9584 kb\nwriteback:             0 kb\nanonpages:       4715640 kb\nmapped:           564200 kb\nshmem:            522020 kb\nslab:             469116 kb\nsreclaimable:     280468 kb\nsunreclaim:       188648 kb\nkernelstack:       43248 kb\npagetables:        39740 kb\nnfs_unstable:          0 kb\nbounce:                0 kb\nwritebacktmp:          0 kb\ncommitlimit:     3967676 kb\ncommitted_as:   23822760 kb\nvmalloctotal:   34359738367 kb\nvmallocused:      461976 kb\nvmallocchunk:   34358937596 kb\npercpu:            11552 kb\nhardwarecorrupted:     0 kb\nanonhugepages:     20480 kb\ncmatotal:              0 kb\ncmafree:               0 kb\nhugepages_total:       0\nhugepages_free:        0\nhugepages_rsvd:        0\nhugepages_surp:        0\nhugepagesize:       2048 kb\ndirectmap4k:      211152 kb\ndirectmap2m:     8038400 kb\ndirectmap1g:           0 kb\n[root@localhost ~]#\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n\n\n\n# æ»ç»\n\nlimit 1c1g default:1c2g\n\nvm: cpuinfoï¼ 2cpu meminfo: memtotal: 7935356 kb (7.5g)\n\npod: cpuinfoï¼2cpu meminfo: memtotal: 3090364 kb (2.9g) free -h: 2.9g',charsets:{cjk:!0}},{title:"kata-deployåæ",frontmatter:{title:"kata-deployåæ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/69d5c3/",categories:["ææ¯æè°","kata-containers","kataé¨ç½²"],tags:[null],titleTag:"åå",readingShow:"top",description:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.",meta:[{name:"twitter:title",content:"kata-deployåæ"},{name:"twitter:description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata-deployåæ"},{property:"og:description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata-deployåæ"},{itemprop:"description",content:"å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup."}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/02.kata%E9%83%A8%E7%BD%B2/02.kata-deploy%E5%88%86%E6%9E%90.html",relativePath:"01.ææ¯æè°/06.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.md",key:"v-de20ac86",path:"/pages/69d5c3/",headers:[{level:2,title:"Host artifacts:",slug:"host-artifacts",normalizedTitle:"host artifacts:",charIndex:291},{level:2,title:"Virtual Machine artifacts:",slug:"virtual-machine-artifacts",normalizedTitle:"virtual machine artifacts:",charIndex:431},{level:2,title:"kata-deployåé¨",slug:"kata-deployåé¨",normalizedTitle:"kata-deployåé¨",charIndex:1405}],headersStr:"Host artifacts: Virtual Machine artifacts: kata-deployåé¨",content:'å¨èç¹ä¸å®è£å¿è¦ç Kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼DaemonSet æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® CRI-O æ containerd ä»¥æ³¨åä¸ä¸ªruntimeClassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼DaemonSet éæ°å¯å¨ CRI-O æ containerdãå é¤åï¼DaemonSet ä¼å é¤ Kata äºè¿å¶æä»¶å VM å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.\n\n\n# Host artifacts:\n\ncloud-hypervisor, firecracker, qemu, and supporting binaries containerd-shim-kata-v2 kata-collect-data.sh kata-runtime\n\n\n# Virtual Machine artifacts:\n\nkata-containers.img and kata-containers-initrd.img vmlinuz.container and vmlinuz-virtiofs.container\n\n\n# é¨ç½²kata-deployä¹å\n\n[root@localhost ~]# ps -ef | grep kata\nroot     16533 16031  0 14:26 pts/1    00:00:00 grep --color=auto kata\nroot     24526 20728  0 11:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\n[root@localhost ~]# ps -ef | grep qemu\nroot     18834 16031  0 14:27 pts/1    00:00:00 grep --color=auto qemu\n[root@localhost ~]#\n[root@localhost ~]#\n[root@localhost ~]# ps -ef | grep kvm\nroot       756     2  0 Mar25 ?        00:00:00 [kvm-irqfd-clean]\nroot     18975 16031  0 14:27 pts/1    00:00:00 grep --color=auto kvm\n[root@localhost ~]# ls /opt/kata/\nbin  libexec  share\n[root@localhost ~]# ls /opt/kata/bin/\ncloud-hypervisor         firecracker  kata-collect-data.sh  kata-runtime\ncontainerd-shim-kata-v2  jailer       kata-monitor          qemu-system-x86_64\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# kata-deployåé¨\n\n[root@kata-deploy-6r86s /]# ps -ef \nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 03:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\nroot        80     1  0 03:09 ?        00:00:00 sleep infinity\nroot        81     0  0 06:41 pts/0    00:00:00 bash\nroot        96    81  0 06:42 pts/0    00:00:00 ps -ef\næè½½/run/systemåå¯ä»¥æ§å¶å®¿ä¸»æºæå¡\n[root@kata-deploy-6r86s /]# systemctl status containerd\nâ containerd.service - containerd container runtime\n   Loaded: loaded (/usr/lib/systemd/system/containerd.service; enabled; vendor preset: disabled)\n   Active: active (running) since Thu 2022-04-07 06:47:47 UTC; 6min ago\n     Docs: https://containerd.io\n  Process: 3033 ExecStartPre=/sbin/modprobe overlay (code=exited, status=0/SUCCESS)\n Main PID: 3035\n    Tasks: 585\n   Memory: 535.9M\n   CGroup: /system.slice/containerd.service\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# é¨ç½²åcontainerdéç½®è¿½å \n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# é¨ç½²æ¥å¿ï¼\n\ncopying kata artifacts onto host\nwarning: containerd-shim-kata-fc-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-fc.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nwarning: containerd-shim-kata-qemu-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nCreating the default shim-v2 binary\nwarning: containerd-shim-kata-clh-v2 already exists\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-clh.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nAdd Kata Containers as a supported runtime for containerd\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    ConfigPath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\nnode/localhost.localdomain unlabeled\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',normalizedContent:'å¨èç¹ä¸å®è£å¿è¦ç kata äºè¿å¶æä»¶ãéç½®æä»¶åèææºç»ä»¶ãå®è£åï¼daemonset æ·»å ä¸ä¸ªèç¹æ ç­¾katacontainers.io/kata-runtime=trueå¹¶éæ°éç½® cri-o æ containerd ä»¥æ³¨åä¸ä¸ªruntimeclassesï¼kata-clhãkata-qemuåkata-fcãä½ä¸ºæåä¸æ­¥ï¼daemonset éæ°å¯å¨ cri-o æ containerdãå é¤åï¼daemonset ä¼å é¤ kata äºè¿å¶æä»¶å vm å·¥ä»¶ï¼å¹¶å°èç¹æ ç­¾æ´æ°ä¸ºkatacontainers.io/kata-runtime=cleanup.\n\n\n# host artifacts:\n\ncloud-hypervisor, firecracker, qemu, and supporting binaries containerd-shim-kata-v2 kata-collect-data.sh kata-runtime\n\n\n# virtual machine artifacts:\n\nkata-containers.img and kata-containers-initrd.img vmlinuz.container and vmlinuz-virtiofs.container\n\n\n# é¨ç½²kata-deployä¹å\n\n[root@localhost ~]# ps -ef | grep kata\nroot     16533 16031  0 14:26 pts/1    00:00:00 grep --color=auto kata\nroot     24526 20728  0 11:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\n[root@localhost ~]# ps -ef | grep qemu\nroot     18834 16031  0 14:27 pts/1    00:00:00 grep --color=auto qemu\n[root@localhost ~]#\n[root@localhost ~]#\n[root@localhost ~]# ps -ef | grep kvm\nroot       756     2  0 mar25 ?        00:00:00 [kvm-irqfd-clean]\nroot     18975 16031  0 14:27 pts/1    00:00:00 grep --color=auto kvm\n[root@localhost ~]# ls /opt/kata/\nbin  libexec  share\n[root@localhost ~]# ls /opt/kata/bin/\ncloud-hypervisor         firecracker  kata-collect-data.sh  kata-runtime\ncontainerd-shim-kata-v2  jailer       kata-monitor          qemu-system-x86_64\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# kata-deployåé¨\n\n[root@kata-deploy-6r86s /]# ps -ef \nuid        pid  ppid  c stime tty          time cmd\nroot         1     0  0 03:09 ?        00:00:00 bash /opt/kata-artifacts/scripts/kata-deploy.sh install\nroot        80     1  0 03:09 ?        00:00:00 sleep infinity\nroot        81     0  0 06:41 pts/0    00:00:00 bash\nroot        96    81  0 06:42 pts/0    00:00:00 ps -ef\næè½½/run/systemåå¯ä»¥æ§å¶å®¿ä¸»æºæå¡\n[root@kata-deploy-6r86s /]# systemctl status containerd\nâ containerd.service - containerd container runtime\n   loaded: loaded (/usr/lib/systemd/system/containerd.service; enabled; vendor preset: disabled)\n   active: active (running) since thu 2022-04-07 06:47:47 utc; 6min ago\n     docs: https://containerd.io\n  process: 3033 execstartpre=/sbin/modprobe overlay (code=exited, status=0/success)\n main pid: 3035\n    tasks: 585\n   memory: 535.9m\n   cgroup: /system.slice/containerd.service\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# é¨ç½²åcontainerdéç½®è¿½å \n\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# é¨ç½²æ¥å¿ï¼\n\ncopying kata artifacts onto host\nwarning: containerd-shim-kata-fc-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-fc.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nwarning: containerd-shim-kata-qemu-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\ncreating the default shim-v2 binary\nwarning: containerd-shim-kata-clh-v2 already exists\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-clh.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\nadd kata containers as a supported runtime for containerd\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n  runtime_type = "io.containerd.kata.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc]\n  runtime_type = "io.containerd.kata-fc.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-fc.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-fc.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu]\n  runtime_type = "io.containerd.kata-qemu.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-qemu.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-qemu.toml"\n[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh]\n  runtime_type = "io.containerd.kata-clh.v2"\n  privileged_without_host_devices = true\n  pod_annotations = ["io.katacontainers.*"]\n  [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata-clh.options]\n    configpath = "/opt/kata/share/defaults/kata-containers/configuration-clh.toml"\nnode/localhost.localdomain unlabeled\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n',charsets:{cjk:!0}},{title:"å¸¸ç¨å½ä»¤",frontmatter:{title:"å¸¸ç¨å½ä»¤",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/3cb03e/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"å¸¸ç¨å½ä»¤"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¸¸ç¨å½ä»¤"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¸¸ç¨å½ä»¤"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/01.%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html",relativePath:"01.ææ¯æè°/06.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.md",key:"v-21013b52",path:"/pages/3cb03e/",headers:[{level:2,title:"è¿å¥kataèææº  kata-runtime  exec",slug:"è¿å¥kataèææº-kata-runtime-exec",normalizedTitle:"è¿å¥kataèææº  kata-runtime  exec",charIndex:null}],headersStr:"è¿å¥kataèææº  kata-runtime  exec",content:'[TOC]\n\n\n# kata-rumtime\n\n * kata-runtime check\n\n> WARN[0000] Not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n> \n> System is capable of running Kata Containers\n> \n> System can currently create Kata Containers\n\n * kata-runtime env\n\n * kata-runtime metrics fd77dc25ad3e958ded82cc5449c521a00b8300b71981370ba43a757e14ce7b19\n\n\n# è¿å¥kataèææº kata-runtime exec\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#connect-to-debug-console\n\nkata v2ç¯å¢ä¸­èèå°å®å¨æ§é®é¢ä¸è½ç´æ¥ä½¿ç¨kata-runtime execè¿å¥sandboxèææºï¼å¹¶ä¸kata releaseçæ¬çéåæ²¡æåå«ç»å½ç»ä»¶ï¼å¦æè¦ç»å½éè¦éæ°å¶ä½sandboxæä»¶ç³»ç»ï¼ç»å½sandboxéè¦éè¿kata-monitorå¹¶ä¸sandboxéè¦å¨kata-monitorå¯å¨ä¹ååå¯å¨æè½è¿è¡è°è¯å·¥ä½\n\n * ä¿®æ¹éç½® debug_console_enabled\n\n> [agent.kata] debug_console_enabled = true\n\n * å¯å¨kata-monitor\n\n[root@rqy-k8s-1 kbuser]# /opt/kata/bin/kata-monitor\nINFO[0000] announce                    app=kata-monitor arch=amd64 git-commit=8d545f7438fc8b1189c1dcc8c414dcc50f7e5587 go-version=go1.17.3 listen-address="127.0.0.1:8090" log-level=info os=linux runtime-endpoint=/run/containerd/containerd.sock version=0.3.0\n\n\n\n# èææºéé¢ï¼æ¯ä¸ªè¶çº§ç®åçç³»ç»ï¼å½ä»¤å¥ç¼º\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\nbash-5.1# df -h\nbash: df: command not found\nbash-5.1# lsblk\nNAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS\npmem0   259:0   0  126M  1 disk\n`-pmem0p1 259:1   0  124M  1 part /\nbash-5.1# ip addr\nbash: ip: command not found\nbash-5.1# ifconfig\nbash: ifconfig: command not found\n# è¯¦æè§[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# crictl\n\nctræ¯containerdçä¸ä¸ªå®¢æ·ç«¯å·¥å·\n\ncrictl æ¯ CRI å¼å®¹çå®¹å¨è¿è¡æ¶å½ä»¤è¡æ¥å£ï¼å¯ä»¥ä½¿ç¨å®æ¥æ£æ¥åè°è¯ Kubernetes èç¹ä¸çå®¹å¨è¿è¡æ¶ååºç¨ç¨åº\n\ncrictl ä½¿ç¨å½åç©ºé´ k8s.ioï¼å³crictl image list = ctr -n=k8s.io image list\n\ncrictl config runtime-endpoint unix:///run/containerd/containerd.sock crictl ps #ådocker ps crictl inspect crictl exec crictl pods # å¯ä»¥æ¥çåªäºæ¯kataå®¹å¨ crictl images # ådocker images crictl logs\n\ncrictl ps | grep stress\n86a94ad5059a4  14701355bb465   12 minutes ago   Running    stress   0    7247eaccec1b6\ncrictl inspect  86a94ad5059a4\ncrictl exec -it  86a94ad5059a4 bash\nrictl stats 86a94ad5059a4\nCONTAINER    CPU %     MEM        DISK         INODES\n86a94ad5059a4  99.88     1.628GB       0B          13\ncrictl pods | grep stress\nbcfeedf0c17bf   3 minutes ago    Ready   stress-b4fdd868-s8d7n     default     0      kata\ncrictl images | grep vish/stress\ndocker.io/vish/stress      latest          14701355bb465    1.56MB\n[root@localhost kata]# POD_ID="$(sudo crictl pods --name test -q)"\n[root@localhost kata]# echo $POD_ID\n2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb\n[root@localhost kata]# crictl inspectp -o=json $POD_ID | grep cgroupsPath\n "cgroupsPath": "/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb",\n [root@localhost kata]# cat /sys/fs/cgroup/memory/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/memory.limit_in_bytes\n524288000\n[root@rqy-k8s-1 kbuser]# ls /run/vc/vm/\n685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894  6d46a824dae01c4675da741ca2aff98b1e7eb005103d10cf0c3af6f758c97afe [root@rqy-k8s-1 kbuser]# kata-runtime exec 685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894 rpc error: code = DeadlineExceeded desc = timed out connecting to vsock 621008089:1026\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# ctr\n\nctr -n k8s.io image list\n\nctr -n k8s.io i export img.tar imgname\n\nctr -n k8s.io i import img.tar\n\nctr run -d imgname hfftest\n\n// æµè¯å¢å --rmåæ°éåºåå é¤ï¼å¦åéåºåè¿ç¨ä¸ä¼å é¤ ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\nctr -n k8s.io t kill -s SIGKILL hfftest ctr -n k8s.io t rm hfftest\n\nctr -n k8s.io snapshot rm hfftest ctr -n k8s.io container rm hfftest\n\nctr -n k8s.io tasks list\n\nctr -n k8s.io task ps hfftest ctr -n k8s.io t exec --exec-id $RANDOM -t hfftest sh\n\n\n# éåç®¡çå½ä»¤\n\ndockers images ctr -n k8s.io images list crictl images\n\ndocker inspect pause:3.1 crictl inspecti docker.io/vish/stress:latest ctræ inspecå½ä»¤\n\ndocker pull vish/stress ctr -n k8s.io pull vish/stress\n\n\n# éä»¶',normalizedContent:'[toc]\n\n\n# kata-rumtime\n\n * kata-runtime check\n\n> warn[0000] not running network checks as super user Â Â Â Â Â arch=amd64 name=kata-runtime pid=25571 source=runtime\n> \n> system is capable of running kata containers\n> \n> system can currently create kata containers\n\n * kata-runtime env\n\n * kata-runtime metrics fd77dc25ad3e958ded82cc5449c521a00b8300b71981370ba43a757e14ce7b19\n\n\n# è¿å¥kataèææº kata-runtime exec\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#connect-to-debug-console\n\nkata v2ç¯å¢ä¸­èèå°å®å¨æ§é®é¢ä¸è½ç´æ¥ä½¿ç¨kata-runtime execè¿å¥sandboxèææºï¼å¹¶ä¸kata releaseçæ¬çéåæ²¡æåå«ç»å½ç»ä»¶ï¼å¦æè¦ç»å½éè¦éæ°å¶ä½sandboxæä»¶ç³»ç»ï¼ç»å½sandboxéè¦éè¿kata-monitorå¹¶ä¸sandboxéè¦å¨kata-monitorå¯å¨ä¹ååå¯å¨æè½è¿è¡è°è¯å·¥ä½\n\n * ä¿®æ¹éç½® debug_console_enabled\n\n> [agent.kata] debug_console_enabled = true\n\n * å¯å¨kata-monitor\n\n[root@rqy-k8s-1 kbuser]# /opt/kata/bin/kata-monitor\ninfo[0000] announce                    app=kata-monitor arch=amd64 git-commit=8d545f7438fc8b1189c1dcc8c414dcc50f7e5587 go-version=go1.17.3 listen-address="127.0.0.1:8090" log-level=info os=linux runtime-endpoint=/run/containerd/containerd.sock version=0.3.0\n\n\n\n# èææºéé¢ï¼æ¯ä¸ªè¶çº§ç®åçç³»ç»ï¼å½ä»¤å¥ç¼º\n[root@rqy-k8s-1 kbuser]# kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0\nbash: grep: command not found\nbash: grep: command not found\nbash: tty: command not found\nbash: expr: command not found\nbash: [: : integer expression expected\nbash-5.1#\nbash-5.1#\nbash-5.1# df -h\nbash: df: command not found\nbash-5.1# lsblk\nname    maj:min rm  size ro type mountpoints\npmem0   259:0   0  126m  1 disk\n`-pmem0p1 259:1   0  124m  1 part /\nbash-5.1# ip addr\nbash: ip: command not found\nbash-5.1# ifconfig\nbash: ifconfig: command not found\n# è¯¦æè§[ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# crictl\n\nctræ¯containerdçä¸ä¸ªå®¢æ·ç«¯å·¥å·\n\ncrictl æ¯ cri å¼å®¹çå®¹å¨è¿è¡æ¶å½ä»¤è¡æ¥å£ï¼å¯ä»¥ä½¿ç¨å®æ¥æ£æ¥åè°è¯ kubernetes èç¹ä¸çå®¹å¨è¿è¡æ¶ååºç¨ç¨åº\n\ncrictl ä½¿ç¨å½åç©ºé´ k8s.ioï¼å³crictl image list = ctr -n=k8s.io image list\n\ncrictl config runtime-endpoint unix:///run/containerd/containerd.sock crictl ps #ådocker ps crictl inspect crictl exec crictl pods # å¯ä»¥æ¥çåªäºæ¯kataå®¹å¨ crictl images # ådocker images crictl logs\n\ncrictl ps | grep stress\n86a94ad5059a4  14701355bb465   12 minutes ago   running    stress   0    7247eaccec1b6\ncrictl inspect  86a94ad5059a4\ncrictl exec -it  86a94ad5059a4 bash\nrictl stats 86a94ad5059a4\ncontainer    cpu %     mem        disk         inodes\n86a94ad5059a4  99.88     1.628gb       0b          13\ncrictl pods | grep stress\nbcfeedf0c17bf   3 minutes ago    ready   stress-b4fdd868-s8d7n     default     0      kata\ncrictl images | grep vish/stress\ndocker.io/vish/stress      latest          14701355bb465    1.56mb\n[root@localhost kata]# pod_id="$(sudo crictl pods --name test -q)"\n[root@localhost kata]# echo $pod_id\n2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb\n[root@localhost kata]# crictl inspectp -o=json $pod_id | grep cgroupspath\n "cgroupspath": "/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/2766411ac797b74cdb16fc7a042715e434cfa127c522e45ffe347bd5f7f88cbb",\n [root@localhost kata]# cat /sys/fs/cgroup/memory/kubepods/pod31c20d7a-3733-4b8c-8651-160b23868773/memory.limit_in_bytes\n524288000\n[root@rqy-k8s-1 kbuser]# ls /run/vc/vm/\n685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894  6d46a824dae01c4675da741ca2aff98b1e7eb005103d10cf0c3af6f758c97afe [root@rqy-k8s-1 kbuser]# kata-runtime exec 685a6f8538efaee72b1d38efd824aff76241b6ff307e75d3764b3d0606d33894 rpc error: code = deadlineexceeded desc = timed out connecting to vsock 621008089:1026\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# ctr\n\nctr -n k8s.io image list\n\nctr -n k8s.io i export img.tar imgname\n\nctr -n k8s.io i import img.tar\n\nctr run -d imgname hfftest\n\n// æµè¯å¢å --rmåæ°éåºåå é¤ï¼å¦åéåºåè¿ç¨ä¸ä¼å é¤ ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/xridge/fio:latest hfftest sh\n\nctr -n k8s.io t kill -s sigkill hfftest ctr -n k8s.io t rm hfftest\n\nctr -n k8s.io snapshot rm hfftest ctr -n k8s.io container rm hfftest\n\nctr -n k8s.io tasks list\n\nctr -n k8s.io task ps hfftest ctr -n k8s.io t exec --exec-id $random -t hfftest sh\n\n\n# éåç®¡çå½ä»¤\n\ndockers images ctr -n k8s.io images list crictl images\n\ndocker inspect pause:3.1 crictl inspecti docker.io/vish/stress:latest ctræ inspecå½ä»¤\n\ndocker pull vish/stress ctr -n k8s.io pull vish/stress\n\n\n# éä»¶',charsets:{cjk:!0}},{title:"kataä½¿ç¨é®é¢æ±æ»",frontmatter:{title:"kataä½¿ç¨é®é¢æ±æ»",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/37753f/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã",meta:[{name:"twitter:title",content:"kataä½¿ç¨é®é¢æ±æ»"},{name:"twitter:description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataä½¿ç¨é®é¢æ±æ»"},{property:"og:description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataä½¿ç¨é®é¢æ±æ»"},{itemprop:"description",content:"â\t\tä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/02.kata%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html",relativePath:"01.ææ¯æè°/06.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».md",key:"v-6d806f67",path:"/pages/37753f/",headers:[{level:2,title:"ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨",slug:"ä¸æ¯æsubpaths-emptydir-ä½¿ç¨",normalizedTitle:"ä¸æ¯æsubpaths(emptydir )ä½¿ç¨",charIndex:83},{level:2,title:"kataä¸æ¯æhostç½ç»",slug:"kataä¸æ¯æhostç½ç»",normalizedTitle:"kataä¸æ¯æhostç½ç»",charIndex:112},{level:2,title:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",slug:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",normalizedTitle:"ä¸æ¯æç½ç»å½åç©ºé´å±äº«",charIndex:220},{level:2,title:"ä¸æ¯æcpuset-cpus",slug:"ä¸æ¯æcpuset-cpus",normalizedTitle:"ä¸æ¯æcpuset-cpus",charIndex:441},{level:2,title:"å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢",slug:"å®¹å¨åfioæµè¯-ååå­-ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oom-æèç¹å¡æ­»-èç¹å¼å¸¸é®é¢",normalizedTitle:"å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢",charIndex:2003},{level:2,title:"OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼",slug:"overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢",normalizedTitle:"overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼",charIndex:2275},{level:2,title:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼",slug:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨release",normalizedTitle:"å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼",charIndex:2309},{level:2,title:"æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼",slug:"æªenable-dax-fioæµè¯ç»æè¾å·®",normalizedTitle:"æªenable dax, fioæµè¯ç»æè¾å·®ï¼ï¼",charIndex:2344},{level:2,title:"qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",slug:"qemu-ä¸è½ç´æ¥ä½¿ç¨-veth-pair-å¯¼è´vm-containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢-kubevirtåæ ·çé®é¢",normalizedTitle:"qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",charIndex:2382}],headersStr:"ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨ kataä¸æ¯æhostç½ç» ä¸æ¯æç½ç»å½åç©ºé´å±äº« ä¸æ¯æcpuset-cpus å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢ OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼ å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼ æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼ qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢",content:'[TOC]\n\n\n# docker å¼å®¹é®é¢\n\n * kataå·²å»ædocker cliæ¯æï¼è¯·ä½¿ç¨crictlå½ä»¤\n\n * DinDé®é¢\n\n\n# ä½¿ç¨éå¶ï¼\n\n\n# ä¸æ¯æsubPaths(emptyDir )ä½¿ç¨\n\n\n# kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n\n# ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\nDocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãKata Containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° Kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° VMãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# ä¸æ¯æcpuset-cpus\n\nhttps://github.com/kata-containers/runtime/issues/1079 docker run -d --cpuset-cpus= â 0-1 â ubuntu sleep 30000\n\n\n# cträ¾èµ/configuration-qemu.tomlè·¯å¾é®é¢\n\n/etc/kata-containers/configuration.tomlå·²å­å¨ï¼ä¸ºæµè¯å é¤äºé»è®¤éç½®æä»¶ï¼ä½æ¯containerdéç½®ä¿ç\n\n[root@localhost ~]# cat  /etc/containerd/config.toml \n      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n        runtime_type = "io.containerd.kata.v2"\n        privileged_without_host_devices = true\n        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n           ConfigPath = "/etc/kata-containers/configuration.toml"\n\n[root@localhost ~]# kubectl get runtimeclasses.node.k8s.io kata-containers -o yaml | grep handler\nhandler: kata\n\n[root@localhost ~]# ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/library/busybox:latest hfftest dmesg \nctr: Cannot find usable config file (file /opt/kata/share/defaults/kata-containers/configuration-qemu.toml does not exist): not found\n\n\n[root@rqy-k8s-1 kbuser]# ll /usr/local/bin/containerd-shim-kata-v2\nlrwxrwxrwx. 1 root root 43 Mar 18 11:31 /usr/local/bin/containerd-shim-kata-v2 -> /usr/local/bin/containerd-shim-kata-qemu-v2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# kata deployéå¯/èç¹éå¯ä¼å¯¼è´éç½®è¿åé®é¢ï¼å¿ç°ï¼\n\ncat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=true\n\n## éå¯å\n[root@localhost ~]# cat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=false\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# èµæºå¼éé®é¢\n\n\n# å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢\n\né®é¢1ï¼ pod sanbox changeï¼execéåºï¼podéå¯æ¬¡æ°å 1 é®é¢2ï¼ èç¹å¡æ­»ï¼èç¹notradyï¼ç¸åéç½®runcæµè¯æ è¯¥é®é¢\n\næçï¼ æªå¼å¯SandboxCgroupOnlyï¼å¯¼è´sanbox overheadæ éå¶å ç¨ä¸»æºèµæºï¼å¯¼è´èç¹å¼å¸¸ï¼è¿æ ·çè¯å°±è¯´ækataçèµæºå¼éè¿æ¯å¾å¤§çã\n\nå¼å¯SandboxCgroupOnlyåæµè¯å¡æ­»ï¼ä½æ¯pod/èç¹æªå¼å¸¸,è¿ç¨ç»æããã æä»¥ï¼é®é¢æ¯ï¼ä¸ºä»ä¹æ²¡æéè¯¯ä¿¡æ¯\n\n\n# OverheadçCPUååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼\n\n\n# å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼\n\n\n# å­å¨æ§è½é®é¢\n\n\n# æªenable DAX, fioæµè¯ç»æè¾å·®ï¼ï¼\n\n\n# ç½ç»é®é¢\n\n\n# qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Limitations.md https://github.com/pulls?q=label%3Alimitation+org%3Akata-containers+is%3Aclosed https://github.com/chestack/k8s-blog/blob/master/kata-container/kata-container.md',normalizedContent:'[toc]\n\n\n# docker å¼å®¹é®é¢\n\n * kataå·²å»ædocker cliæ¯æï¼è¯·ä½¿ç¨crictlå½ä»¤\n\n * dindé®é¢\n\n\n# ä½¿ç¨éå¶ï¼\n\n\n# ä¸æ¯æsubpaths(emptydir )ä½¿ç¨\n\n\n# kataä¸æ¯æhostç½ç»\n\nä¸äºä½¿ç¨ä¸»æºç½ç»çk8sç»ä»¶åä¸å¡æ æ³ä½¿ç¨kataå®¹å¨ï¼æä»¥runcï¼containerdï¼å¿é¡»ä¿çä½ä¸ºé»è®¤è¿è¡æ¶ï¼èkata-containerä½ä¸ºå¯éè¿è¡æ¶ç»ç¹å®è´è½½ä½¿ç¨ã\n\n\n# ä¸æ¯æç½ç»å½åç©ºé´å±äº«\n\ndocker æ¯æå®¹å¨ä½¿ç¨docker run --net=containersè¯­æ³å å¥å¦ä¸ä¸ªå®¹å¨å½åç©ºé´çè½åãè¿åè®¸å¤ä¸ªå®¹å¨å±äº«ä¸ä¸ªå¬å±ç½ç»å½åç©ºé´åæ¾ç½®å¨ç½ç»å½åç©ºé´ä¸­çç½ç»æ¥å£ãkata containers ä¸æ¯æç½ç»å½åç©ºé´å±äº«ãå¦æå° kata å®¹å¨è®¾ç½®ä¸ºå±äº«runcå®¹å¨çç½ç»å½åç©ºé´ï¼åè¿è¡æ¶ä¼ææå°æ¥ç®¡åéç»å½åç©ºé´çææç½ç»æ¥å£å¹¶å°å®ä»¬ç»å®å° vmãå æ­¤ï¼runcå®¹å¨å¤±å»å¶ç½ç»è¿æ¥ã\n\n\n# ä¸æ¯æcpuset-cpus\n\nhttps://github.com/kata-containers/runtime/issues/1079 docker run -d --cpuset-cpus= â 0-1 â ubuntu sleep 30000\n\n\n# cträ¾èµ/configuration-qemu.tomlè·¯å¾é®é¢\n\n/etc/kata-containers/configuration.tomlå·²å­å¨ï¼ä¸ºæµè¯å é¤äºé»è®¤éç½®æä»¶ï¼ä½æ¯containerdéç½®ä¿ç\n\n[root@localhost ~]# cat  /etc/containerd/config.toml \n      [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\n        runtime_type = "io.containerd.kata.v2"\n        privileged_without_host_devices = true\n        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata.options]\n           configpath = "/etc/kata-containers/configuration.toml"\n\n[root@localhost ~]# kubectl get runtimeclasses.node.k8s.io kata-containers -o yaml | grep handler\nhandler: kata\n\n[root@localhost ~]# ctr -n k8s.io run --runtime io.containerd.kata.v2 -t --rm docker.io/library/busybox:latest hfftest dmesg \nctr: cannot find usable config file (file /opt/kata/share/defaults/kata-containers/configuration-qemu.toml does not exist): not found\n\n\n[root@rqy-k8s-1 kbuser]# ll /usr/local/bin/containerd-shim-kata-v2\nlrwxrwxrwx. 1 root root 43 mar 18 11:31 /usr/local/bin/containerd-shim-kata-v2 -> /usr/local/bin/containerd-shim-kata-qemu-v2\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# kata deployéå¯/èç¹éå¯ä¼å¯¼è´éç½®è¿åé®é¢ï¼å¿ç°ï¼\n\ncat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=true\n\n## éå¯å\n[root@localhost ~]# cat /opt/kata/share/defaults/kata-containers/configuration-qemu.toml  | grep sandbox_cgroup_only\nsandbox_cgroup_only=false\n\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# èµæºå¼éé®é¢\n\n\n# å®¹å¨åfioæµè¯(ååå­)ä¼å¯¼è´hostä¸å¯¹åºqemuè¿ç¨oomï¼æèç¹å¡æ­»ï¼èç¹å¼å¸¸é®é¢\n\né®é¢1ï¼ pod sanbox changeï¼execéåºï¼podéå¯æ¬¡æ°å 1 é®é¢2ï¼ èç¹å¡æ­»ï¼èç¹notradyï¼ç¸åéç½®runcæµè¯æ è¯¥é®é¢\n\næçï¼ æªå¼å¯sandboxcgrouponlyï¼å¯¼è´sanbox overheadæ éå¶å ç¨ä¸»æºèµæºï¼å¯¼è´èç¹å¼å¸¸ï¼è¿æ ·çè¯å°±è¯´ækataçèµæºå¼éè¿æ¯å¾å¤§çã\n\nå¼å¯sandboxcgrouponlyåæµè¯å¡æ­»ï¼ä½æ¯pod/èç¹æªå¼å¸¸,è¿ç¨ç»æããã æä»¥ï¼é®é¢æ¯ï¼ä¸ºä»ä¹æ²¡æéè¯¯ä¿¡æ¯\n\n\n# overheadçcpuååå­å ç¨åºè¯¥çº³å¥å·²åééé¢ï¼ï¼ï¼\n\n\n# å®¹å¨ä½¿ç¨åå­ä¸ä¼èªå¨releaseï¼ï¼\n\n\n# å­å¨æ§è½é®é¢\n\n\n# æªenable dax, fioæµè¯ç»æè¾å·®ï¼ï¼\n\n\n# ç½ç»é®é¢\n\n\n# qemu ä¸è½ç´æ¥ä½¿ç¨ veth-pair, å¯¼è´vm+containerçç½ç»æææ¯è¾å¤æä¸å®¹æææ§è½é®é¢, kubevirtåæ ·çé®é¢\n\n\n# åèèµæ\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/limitations.md https://github.com/pulls?q=label%3alimitation+org%3akata-containers+is%3aclosed https://github.com/chestack/k8s-blog/blob/master/kata-container/kata-container.md',charsets:{cjk:!0}},{title:"kataç¸å³éç½®åè·¯å¾",frontmatter:{title:"kataç¸å³éç½®åè·¯å¾",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/821097/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf",meta:[{name:"twitter:title",content:"kataç¸å³éç½®åè·¯å¾"},{name:"twitter:description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kataç¸å³éç½®åè·¯å¾"},{property:"og:description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kataç¸å³éç½®åè·¯å¾"},{itemprop:"description",content:"/etc/containerd/config.toml\n> /etc/systemd/system/kubelet.service.d/0-containerd.conf"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/03.kata%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%B7%AF%E5%BE%84.html",relativePath:"01.ææ¯æè°/06.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.md",key:"v-d84e5c68",path:"/pages/821097/",headers:[{level:2,title:"containerdæ°æ®è·¯å¾",slug:"containerdæ°æ®è·¯å¾",normalizedTitle:"containerdæ°æ®è·¯å¾",charIndex:114},{level:2,title:"containerdæä»¶æ°æ®",slug:"containerdæä»¶æ°æ®",normalizedTitle:"containerdæä»¶æ°æ®",charIndex:205},{level:2,title:"æ³¨æéç½®æä»¶é®é¢",slug:"æ³¨æéç½®æä»¶é®é¢",normalizedTitle:"æ³¨æéç½®æä»¶é®é¢",charIndex:908},{level:2,title:"1. [hypervisor.qemu]",slug:"_1-hypervisor-qemu",normalizedTitle:"1. [hypervisor.qemu]",charIndex:1014},{level:2,title:"containerdéç½®ï¼",slug:"containerdéç½®-2",normalizedTitle:"containerdéç½®ï¼",charIndex:3634},{level:2,title:"åéæ³¨éï¼",slug:"åéæ³¨é",normalizedTitle:"åéæ³¨éï¼",charIndex:3867}],headersStr:"containerdæ°æ®è·¯å¾ containerdæä»¶æ°æ® æ³¨æéç½®æä»¶é®é¢ 1. [hypervisor.qemu] containerdéç½®ï¼ åéæ³¨éï¼",content:'[TOC]\n\n\n# containerdéç½®\n\n> /etc/containerd/config.toml /etc/systemd/system/kubelet.service.d/0-containerd.conf\n\n\n# containerdæ°æ®è·¯å¾\n\n> root = "/app/docker/containerd" state = "/app/docker/run/containerd"\n\n\n# containerdæä»¶æ°æ®\n\n> ctr plugin ls\n\n\n# kataéç½®configuration.toml\n\né»è®¤çéç½®æä»¶ä½äº/opt/kata/share/defaults/kata-containers/configuration.tomlï¼å¦æ/etc/kata-containers/configuration.tomlçéç½®æä»¶å­å¨ï¼åä¼æ¿ä»£é»è®¤çéç½®æä»¶ã\n\n[root@rqy-k8s-1 hff]# kata-runtime --kata-show-default-config-paths\n/etc/kata-containers/configuration.toml\n/opt/kata/share/defaults/kata-containers/configuration.toml\n\n\n1\n2\n3\n\n\n[hypervisor.qemu]\nuse_vsock ï¼ä½¿ç¨vsocksä¸agentç´æ¥éä¿¡ï¼åææ¯ævsocksï¼ï¼é»è®¤false \n[runtime]\nenable_cpu_memory_hotplug ï¼ä½¿è½cpuååå­ç­ææï¼é»è®¤false\n[agent.kata]\ndebug_console_enabled = true\n[hypervisor.qemu]\nsed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.debug_console"/g\' "${kata_configuration_file}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¿®æ¹åæ°å®¹å¨çæ\n\n\n# æ³¨æéç½®æä»¶é®é¢\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/containerd-kata.md\n\n\n# 1. [hypervisor.qemu]\n\npath = "/usr/bin/qemu-system-x86_64" æå® qemu çè·¯å¾\nkernel = "/usr/share/kata-containers/vmlinuz.container" æå®å¯å¨åæ ¸è·¯å¾\ninitrd = "/usr/share/kata-containers/kata-containers-initrd.img" æå® initrd\nimage = "/usr/share/kata-containers/kata-containers-centos.img" æå®ç³»ç»çï¼initrd å image ä¸å¯ä»¥åæ¶éç½®ï¼å¦åä¼åºé\nkernel_params = "" éç½®-append åæ°ï¼å®å¶èææºåæ ¸å¯å¨åæ°\nfirmware = "" æå®åºä»¶ï¼å½±å qemu ç-bios åæ°\nmachine_accelerators="" virtcontainers/qemu.go ç getQemuMachine() è¿è¡å¤çï¼å å° machine.Options ä¸­ï¼æç»æ¯å å°-machine åæ°ä¸­\ndefault_vcpus = 1 é»è®¤ vcpu ä¸ªæ°\ndefault_maxvcpus = 0  é»è®¤æå¤§ vcpu ä¸ªæ°ï¼è®¾ç½®ä¸º 0 æ¶å®éä¸æ¶ 240\ndefault_bridges = 1 é»è®¤ PCI æ¡¥ä¸ªæ°\ndefault_memory = 2048  VM é»è®¤åå­å¤§å°\nmemory_slots = 10 åå­ææ§½ä¸ªæ°\ndisable_block_device_use = false æ¯å¦ç¦ç¨åè®¾å¤\nblock_device_driver = "virtio-scsi" åè®¾å¤é©±å¨ï¼å¯ä»¥æ¯ virtio-scsiãvirtio-blk æ nvdimm\n#block_device_cache_set = true\n#block_device_cache_direct = true\n#block_device_cache_noflush = true  åè®¾å¤æ¯å¦è®¾ç½® cache\nenable_iothreads = false  //enable_iothreas å½åä»éå¯¹ virtio-scsi åè®¾å¤çæ\n#enable_mem_prealloc = true\n#enable_hugepages = true\n#file_mem_backend = ""  //è¿å ä¸ªéç½®ç»ä¸ç¨äº kata-runtime qemu æä»¶å¯å¨èææºæ¶çåå­éç½®\n#enable_swap=true  //æ¯å¦åè®¸èææºåå­ swapï¼ä»¥æ¯ææ´å¤§çèææºå¯åº¦\n#enable_debug=false  //å½±å guest kernel åæ ¸å¯å¨ï¼å¨ enable_debug åï¼guest kernel å¯å¨é¡¹ä¼å ä¸ systemd.show_status true systemd.log_level debug\n#disable_nesting_checks = true èææºæ å¿æ¯å¦ nestedRunï¼å³èæååµå¥\nmsize=8192 9p fs msize éé¡¹\n#use_vsock = true æ¯å¦ä½¿ç¨ vsock\n#hotplug_vfio_on_root_bus = true å¯¹äº vfio è®¾å¤ï¼ä¼æå¨å° root bus ä¸ï¼å¦åæè½½å° PCI bridge ä¸, é»è®¤æ¯ false\n#disable_vhost_net = true ç¦ç¨ vhost_net\n#entropy_source= "/dev/urandom" æå®éæºæ°åçå¨ï¼é»è®¤ä¸º/dev/urandom,kata å¯å¨èææºæ¶ä¼ç»èææºéå ä¸ä¸ªéæºæ°åçå¨\n#guest_hook_path = "/usr/share/oci/hooks" guest é©å­å½æ°æ§è¡è·¯å¾,ç¨äº OCI\n#enable_template = true é»è®¤ä¸º falseï¼enable åæ°çèææºä»æ¨¡æ¿éè¿èææºåéæ¹å¼å¯å¨ï¼ææ VM å±äº«ç¸åçåå§å kernelãinitramfs å agent åå­\n#enable_debug = true é»è®¤ä¸º falseï¼enable åï¼shim å°æ¶æ¯åå¾ system log\n#enable_tracing = true é»è®¤ä¸º falseï¼ç¨äºè·è¸ª\n#diable_new_netns=true é»è®¤ä¸º falseï¼enable åï¼runtime ä¸ä¼åä¸º shim å hypervisor è¿ç¨åå»ºä¸ä¸ªç½ç» namespaceï¼å¨ enable_netmonãç½ç»æ¨¡å¼éç¨ bridged æè macvtap åä¸è½ enable è¯¥éé¡¹\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\n\n# crictl\n\ncrictl é»è®¤è¿æ¥å° unix:///var/run/dockershim.sock\n\n[root@rqy-k8s-3 fio-iperf]# cat /etc/crictl.yaml\nruntime-endpoint: unix:///run/containerd/containerd.sock\ntimeout: 0\ndebug: false\n\n\n1\n2\n3\n4\n\n\n\n# éåéç½®ï¼\n\n> [plugins."io.containerd.grpc.v1.cri".registry]\n\néåå­å¨è·¯å¾ï¼\n\n> /var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/ ådocker: /app/docker/overlay2\n\n\n# ä¿®æ¹sanbox(èææº)éç½®\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-set-sandbox-config-kata.md\n\n\n# containerdéç½®ï¼\n\nâ [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\nâ  runtime_type = "io.containerd.kata.v2"\nâ  pod_annotations = ["io.katacontainers.*"]\nâ  container_annotations = ["io.katacontainers.*"]\n\n\n1\n2\n3\n4\n\n\n\n# åéæ³¨éï¼\n\nä¸äºæ³¨éæ¯åéçï¼è¿æå³çéç½®æä»¶æå®äºå¯æ¥åçå¼ãç®åï¼åºäºå®å¨åå ï¼ä»ç®¡çç¨åºæ³¨éåå°éå¶ï¼ç®çæ¯æ§å¶ Kata Containers è¿è¡æ¶å°ä»£è¡¨æ¨å¯å¨åªäºäºè¿å¶æä»¶ã\n\n> configuration.tomlï¼ enable_annotations = []\n\n\n# å³äºruntime åå­æä¹åï¼\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\nå¨ K8s å containerd ä¸­ï¼æä»¬ä¼çå°å¾å¤ç¨äºè®¾ç½® runtime çå°æ¹ï¼æ¯å¦ RuntimeClass ãPod ç runtimeClassName å®ä¹ï¼ä»¥å ctr run --runtime io.containerd.run.kata.v2 å crictl runp -r kata ï¼éé¢é½æåæ°æå®è¿è¡æ¶çåå­ã\n\nPod ç runtimeClassName å±æ§ä¼æ¥æ¾ååç RuntimeClass èµæº æ ¹æ® è¯¥èµæºç handler ï¼å¨ containerd çéç½®æä»¶æ¥æ¾ç¸åºçè¿è¡æ¶ï¼ [plugins.cri.containerd.runtimes.${HANDLER_NAME}] ï¼ã ä¸è¬æåµä¸ containerd éç½®ä¼åè¿æ ·ï¼\n\n> [plugins.cri.containerd.runtimes.kata] runtime_type = "io.containerd.kata.v2"\n\n * ctr å½ä»¤ä½¿ç¨çæ¯ containerd éç½®æä»¶ä¸­ç runtime_type å±æ§ï¼ containerd ç¨ï¼ã\n * crictl å K8sï¼å®éä¹æ¯ CRI æ¥å£ï¼ ä½¿ç¨çæ¯ containerd éç½®ä¸­ç HANDLER_NAMEï¼ CRI ç¨ï¼ã\n\né»è®¤æåµä¸ï¼containerd ä¼æ ¹æ® runtime_type æè§åå¯¹åºå°å·ä½çè¿è¡æ¶çå¯æ§è¡æä»¶åãæ¯å¦ Kata Containers(io.containerd.kata.v2) è¿è¡æ¶æç»ä¼è½¬æ¢ä¸º containerd-shim-kata-v2 å½ä»¤ï¼è¯¥å½ä»¤é»è®¤å®è£å¨ /usr/local/bin/containerd-shim-kata-v2ã\n\n[root@localhost ~]# cat /usr/local/bin/containerd-shim-kata-v2\n#!/usr/bin/env bash\nKATA_CONF_FILE=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\n\n\n1\n2\n3\n',normalizedContent:'[toc]\n\n\n# containerdéç½®\n\n> /etc/containerd/config.toml /etc/systemd/system/kubelet.service.d/0-containerd.conf\n\n\n# containerdæ°æ®è·¯å¾\n\n> root = "/app/docker/containerd" state = "/app/docker/run/containerd"\n\n\n# containerdæä»¶æ°æ®\n\n> ctr plugin ls\n\n\n# kataéç½®configuration.toml\n\né»è®¤çéç½®æä»¶ä½äº/opt/kata/share/defaults/kata-containers/configuration.tomlï¼å¦æ/etc/kata-containers/configuration.tomlçéç½®æä»¶å­å¨ï¼åä¼æ¿ä»£é»è®¤çéç½®æä»¶ã\n\n[root@rqy-k8s-1 hff]# kata-runtime --kata-show-default-config-paths\n/etc/kata-containers/configuration.toml\n/opt/kata/share/defaults/kata-containers/configuration.toml\n\n\n1\n2\n3\n\n\n[hypervisor.qemu]\nuse_vsock ï¼ä½¿ç¨vsocksä¸agentç´æ¥éä¿¡ï¼åææ¯ævsocksï¼ï¼é»è®¤false \n[runtime]\nenable_cpu_memory_hotplug ï¼ä½¿è½cpuååå­ç­ææï¼é»è®¤false\n[agent.kata]\ndebug_console_enabled = true\n[hypervisor.qemu]\nsed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.debug_console"/g\' "${kata_configuration_file}"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\nä¿®æ¹åæ°å®¹å¨çæ\n\n\n# æ³¨æéç½®æä»¶é®é¢\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/containerd-kata.md\n\n\n# 1. [hypervisor.qemu]\n\npath = "/usr/bin/qemu-system-x86_64" æå® qemu çè·¯å¾\nkernel = "/usr/share/kata-containers/vmlinuz.container" æå®å¯å¨åæ ¸è·¯å¾\ninitrd = "/usr/share/kata-containers/kata-containers-initrd.img" æå® initrd\nimage = "/usr/share/kata-containers/kata-containers-centos.img" æå®ç³»ç»çï¼initrd å image ä¸å¯ä»¥åæ¶éç½®ï¼å¦åä¼åºé\nkernel_params = "" éç½®-append åæ°ï¼å®å¶èææºåæ ¸å¯å¨åæ°\nfirmware = "" æå®åºä»¶ï¼å½±å qemu ç-bios åæ°\nmachine_accelerators="" virtcontainers/qemu.go ç getqemumachine() è¿è¡å¤çï¼å å° machine.options ä¸­ï¼æç»æ¯å å°-machine åæ°ä¸­\ndefault_vcpus = 1 é»è®¤ vcpu ä¸ªæ°\ndefault_maxvcpus = 0  é»è®¤æå¤§ vcpu ä¸ªæ°ï¼è®¾ç½®ä¸º 0 æ¶å®éä¸æ¶ 240\ndefault_bridges = 1 é»è®¤ pci æ¡¥ä¸ªæ°\ndefault_memory = 2048  vm é»è®¤åå­å¤§å°\nmemory_slots = 10 åå­ææ§½ä¸ªæ°\ndisable_block_device_use = false æ¯å¦ç¦ç¨åè®¾å¤\nblock_device_driver = "virtio-scsi" åè®¾å¤é©±å¨ï¼å¯ä»¥æ¯ virtio-scsiãvirtio-blk æ nvdimm\n#block_device_cache_set = true\n#block_device_cache_direct = true\n#block_device_cache_noflush = true  åè®¾å¤æ¯å¦è®¾ç½® cache\nenable_iothreads = false  //enable_iothreas å½åä»éå¯¹ virtio-scsi åè®¾å¤çæ\n#enable_mem_prealloc = true\n#enable_hugepages = true\n#file_mem_backend = ""  //è¿å ä¸ªéç½®ç»ä¸ç¨äº kata-runtime qemu æä»¶å¯å¨èææºæ¶çåå­éç½®\n#enable_swap=true  //æ¯å¦åè®¸èææºåå­ swapï¼ä»¥æ¯ææ´å¤§çèææºå¯åº¦\n#enable_debug=false  //å½±å guest kernel åæ ¸å¯å¨ï¼å¨ enable_debug åï¼guest kernel å¯å¨é¡¹ä¼å ä¸ systemd.show_status true systemd.log_level debug\n#disable_nesting_checks = true èææºæ å¿æ¯å¦ nestedrunï¼å³èæååµå¥\nmsize=8192 9p fs msize éé¡¹\n#use_vsock = true æ¯å¦ä½¿ç¨ vsock\n#hotplug_vfio_on_root_bus = true å¯¹äº vfio è®¾å¤ï¼ä¼æå¨å° root bus ä¸ï¼å¦åæè½½å° pci bridge ä¸, é»è®¤æ¯ false\n#disable_vhost_net = true ç¦ç¨ vhost_net\n#entropy_source= "/dev/urandom" æå®éæºæ°åçå¨ï¼é»è®¤ä¸º/dev/urandom,kata å¯å¨èææºæ¶ä¼ç»èææºéå ä¸ä¸ªéæºæ°åçå¨\n#guest_hook_path = "/usr/share/oci/hooks" guest é©å­å½æ°æ§è¡è·¯å¾,ç¨äº oci\n#enable_template = true é»è®¤ä¸º falseï¼enable åæ°çèææºä»æ¨¡æ¿éè¿èææºåéæ¹å¼å¯å¨ï¼ææ vm å±äº«ç¸åçåå§å kernelãinitramfs å agent åå­\n#enable_debug = true é»è®¤ä¸º falseï¼enable åï¼shim å°æ¶æ¯åå¾ system log\n#enable_tracing = true é»è®¤ä¸º falseï¼ç¨äºè·è¸ª\n#diable_new_netns=true é»è®¤ä¸º falseï¼enable åï¼runtime ä¸ä¼åä¸º shim å hypervisor è¿ç¨åå»ºä¸ä¸ªç½ç» namespaceï¼å¨ enable_netmonãç½ç»æ¨¡å¼éç¨ bridged æè macvtap åä¸è½ enable è¯¥éé¡¹\n\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n\n\n\n# crictl\n\ncrictl é»è®¤è¿æ¥å° unix:///var/run/dockershim.sock\n\n[root@rqy-k8s-3 fio-iperf]# cat /etc/crictl.yaml\nruntime-endpoint: unix:///run/containerd/containerd.sock\ntimeout: 0\ndebug: false\n\n\n1\n2\n3\n4\n\n\n\n# éåéç½®ï¼\n\n> [plugins."io.containerd.grpc.v1.cri".registry]\n\néåå­å¨è·¯å¾ï¼\n\n> /var/lib/containerd/io.containerd.snapshotter.v1.overlayfs/snapshots/ ådocker: /app/docker/overlay2\n\n\n# ä¿®æ¹sanbox(èææº)éç½®\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/how-to/how-to-set-sandbox-config-kata.md\n\n\n# containerdéç½®ï¼\n\nâ [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.kata]\nâ  runtime_type = "io.containerd.kata.v2"\nâ  pod_annotations = ["io.katacontainers.*"]\nâ  container_annotations = ["io.katacontainers.*"]\n\n\n1\n2\n3\n4\n\n\n\n# åéæ³¨éï¼\n\nä¸äºæ³¨éæ¯åéçï¼è¿æå³çéç½®æä»¶æå®äºå¯æ¥åçå¼ãç®åï¼åºäºå®å¨åå ï¼ä»ç®¡çç¨åºæ³¨éåå°éå¶ï¼ç®çæ¯æ§å¶ kata containers è¿è¡æ¶å°ä»£è¡¨æ¨å¯å¨åªäºäºè¿å¶æä»¶ã\n\n> configuration.tomlï¼ enable_annotations = []\n\n\n# å³äºruntime åå­æä¹åï¼\n\nhttp://liubin.org/kata-dev-book/src/runtime-arch.html\n\nå¨ k8s å containerd ä¸­ï¼æä»¬ä¼çå°å¾å¤ç¨äºè®¾ç½® runtime çå°æ¹ï¼æ¯å¦ runtimeclass ãpod ç runtimeclassname å®ä¹ï¼ä»¥å ctr run --runtime io.containerd.run.kata.v2 å crictl runp -r kata ï¼éé¢é½æåæ°æå®è¿è¡æ¶çåå­ã\n\npod ç runtimeclassname å±æ§ä¼æ¥æ¾ååç runtimeclass èµæº æ ¹æ® è¯¥èµæºç handler ï¼å¨ containerd çéç½®æä»¶æ¥æ¾ç¸åºçè¿è¡æ¶ï¼ [plugins.cri.containerd.runtimes.${handler_name}] ï¼ã ä¸è¬æåµä¸ containerd éç½®ä¼åè¿æ ·ï¼\n\n> [plugins.cri.containerd.runtimes.kata] runtime_type = "io.containerd.kata.v2"\n\n * ctr å½ä»¤ä½¿ç¨çæ¯ containerd éç½®æä»¶ä¸­ç runtime_type å±æ§ï¼ containerd ç¨ï¼ã\n * crictl å k8sï¼å®éä¹æ¯ cri æ¥å£ï¼ ä½¿ç¨çæ¯ containerd éç½®ä¸­ç handler_nameï¼ cri ç¨ï¼ã\n\né»è®¤æåµä¸ï¼containerd ä¼æ ¹æ® runtime_type æè§åå¯¹åºå°å·ä½çè¿è¡æ¶çå¯æ§è¡æä»¶åãæ¯å¦ kata containers(io.containerd.kata.v2) è¿è¡æ¶æç»ä¼è½¬æ¢ä¸º containerd-shim-kata-v2 å½ä»¤ï¼è¯¥å½ä»¤é»è®¤å®è£å¨ /usr/local/bin/containerd-shim-kata-v2ã\n\n[root@localhost ~]# cat /usr/local/bin/containerd-shim-kata-v2\n#!/usr/bin/env bash\nkata_conf_file=/opt/kata/share/defaults/kata-containers/configuration-qemu.toml /opt/kata/bin/containerd-shim-kata-v2 "$@"\n\n\n1\n2\n3\n',charsets:{cjk:!0}},{title:"kata debugä¸æ¥å¿",frontmatter:{title:"kata debugä¸æ¥å¿",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/7393ee/",categories:["ææ¯æè°","kata-containers","kataåºç¨"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"kata debugä¸æ¥å¿"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html"},{property:"og:type",content:"article"},{property:"og:title",content:"kata debugä¸æ¥å¿"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"kata debugä¸æ¥å¿"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/06.kata-containers/04.kata%E5%BA%94%E7%94%A8/04.kata%20debug%E4%B8%8E%E6%97%A5%E5%BF%97.html",relativePath:"01.ææ¯æè°/06.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.md",key:"v-ea1be710",path:"/pages/7393ee/",headers:[{level:2,title:"journalctl -t kata",slug:"journalctl-t-kata",normalizedTitle:"journalctl -t kata",charIndex:10},{level:2,title:"journalctl -t containerd",slug:"journalctl-t-containerd",normalizedTitle:"journalctl -t containerd",charIndex:149}],headersStr:"journalctl -t kata journalctl -t containerd",content:'[TOC]\n\n\n# journalctl -t kata\n\nKata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã\n\næ¥çshimv2è¿è¡æ¶æ¥å¿ï¼\n\n> $ sudo journalctl -t kata\n\n\n# journalctl -t containerd\n\n\n# å¼å¯ debug log\n\nå¼å¯ debug log å¯ä»¥å¸®å©æä»¬è·å¾æ´è¯¦ç»ç logï¼é¤äº runtime ç logï¼èä¸è¿è½çå° agent ç logï¼ä»¥å guest OS ä¸­ kernel ç logï¼dmesgå½ä»¤çè¾åºï¼ã\n\nå¼å¯ debug logï¼éè¦ä¿®æ¹ä¸¤ä¸ªéç½®æä»¶ï¼\n\n * containerd éç½®æä»¶æå¦ä¸ä¿®æ¹å³å¯ï¼ [debug] level = "debug"\n\n * Kata Containerséè¦å¼å¯ runtime å agent ç debug log\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\n#enable_debug = true\n#enable_debug = true\n#enable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = ""\n\n\n$ sudo sed -i -e \'s/^# *\\(enable_debug\\).*=.*$/\\1 = true/g\' /etc/kata-containers/configuration.toml\n$ sudo sed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.log=debug"/g\' /etc/kata-containers/configuration.toml\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\nenable_debug = true\nenable_debug = true\nenable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = " agent.log=debug"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#troubleshoot-kata-containers\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/Developer-Guide.md#connect-to-debug-console ï¼è¿å¥èææºéè¦æå¼debug_console_enabledï¼\n\n\n# tracing\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/tracing.md\n\n\n# kata-log-parser\n\nhttps://github.com/kata-containers/tests/tree/main/cmd/log-parser\n\n\n# kata-collect-data.sh\n\nåç¤¾åºæissueéè¦æ·»å ééä¿¡æ¯\n\n\n# å¼å¯debugçå¼é\n\nå¼å¯åï¼å·²å¼å¯äºdebug_console_enabledï¼å¥½åå¹¶ä¸ä¼å ä¸ºpodå¢å èå¢å ï¼\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4M        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   167.8M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    22.2M        -        -\n\n\n1\n2\n3\n4\n\n\næä¸è¿°å¼å¯ debug logè®¾ç½®å\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4M        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   166.6M        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    21.8M        -        -\n\n\n1\n2\n3\n4\n\n\ndmesgæ¥å¿\n\n[root@localhost hff]# dmesg | grep kata\n[2056734.849647] containerd-shim cpuset=kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a mems_allowed=0\n[2056734.849679] Task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n[2056734.849690] Memory cgroup stats for /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a: cache:188900KB rss:15900KB rss_huge:0KB mapped_file:188876KB swap:0KB inactive_anon:188372KB active_anon:16428KB inactive_file:0KB active_file:0KB unevictable:0KB\n[2056751.353176] pool cpuset=kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 mems_allowed=0\n[2056751.353223] Task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n\n\n\n1\n2\n3\n4\n5\n6\n7\n',normalizedContent:'[toc]\n\n\n# journalctl -t kata\n\nkata containerd shimv2 è¿è¡æ¶æ¥å¿éè¿containerdï¼å¶æ¥å¿å°è¢«åéå°containerdæ¥å¿æåçä»»ä½å°æ¹ã\n\næ¥çshimv2è¿è¡æ¶æ¥å¿ï¼\n\n> $ sudo journalctl -t kata\n\n\n# journalctl -t containerd\n\n\n# å¼å¯ debug log\n\nå¼å¯ debug log å¯ä»¥å¸®å©æä»¬è·å¾æ´è¯¦ç»ç logï¼é¤äº runtime ç logï¼èä¸è¿è½çå° agent ç logï¼ä»¥å guest os ä¸­ kernel ç logï¼dmesgå½ä»¤çè¾åºï¼ã\n\nå¼å¯ debug logï¼éè¦ä¿®æ¹ä¸¤ä¸ªéç½®æä»¶ï¼\n\n * containerd éç½®æä»¶æå¦ä¸ä¿®æ¹å³å¯ï¼ [debug] level = "debug"\n\n * kata containerséè¦å¼å¯ runtime å agent ç debug log\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\n#enable_debug = true\n#enable_debug = true\n#enable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = ""\n\n\n$ sudo sed -i -e \'s/^# *\\(enable_debug\\).*=.*$/\\1 = true/g\' /etc/kata-containers/configuration.toml\n$ sudo sed -i -e \'s/^kernel_params = "\\(.*\\)"/kernel_params = "\\1 agent.log=debug"/g\' /etc/kata-containers/configuration.toml\n\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep enable_debug\nenable_debug = true\nenable_debug = true\nenable_debug = true\n[root@localhost hff]# cat /etc/kata-containers/configuration.toml | grep kernel_params\nkernel_params = " agent.log=debug"\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#troubleshoot-kata-containers\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/developer-guide.md#connect-to-debug-console ï¼è¿å¥èææºéè¦æå¼debug_console_enabledï¼\n\n\n# tracing\n\nhttps://github.com/kata-containers/kata-containers/blob/main/docs/tracing.md\n\n\n# kata-log-parser\n\nhttps://github.com/kata-containers/tests/tree/main/cmd/log-parser\n\n\n# kata-collect-data.sh\n\nåç¤¾åºæissueéè¦æ·»å ééä¿¡æ¯\n\n\n# å¼å¯debugçå¼é\n\nå¼å¯åï¼å·²å¼å¯äºdebug_console_enabledï¼å¥½åå¹¶ä¸ä¼å ä¸ºpodå¢å èå¢å ï¼\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4m        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   167.8m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    22.2m        -        -\n\n\n1\n2\n3\n4\n\n\næä¸è¿°å¼å¯ debug logè®¾ç½®å\n\n[root@localhost hff]# systemd-cgtop | grep kata\n/kata_overhead                                                                                                                -      -     2.4m        -        -\n/kubepods/podfa152857-05d1-44fc-9cdc-d448b2c98941/kata_f40286f09e1ef5de468d894f1519c7ca6d30962653e7dce8daf90681802a0dde       7      -   166.6m        -        -\n/system.slice/kata-monitor.service                                                                                            1      -    21.8m        -        -\n\n\n1\n2\n3\n4\n\n\ndmesgæ¥å¿\n\n[root@localhost hff]# dmesg | grep kata\n[2056734.849647] containerd-shim cpuset=kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a mems_allowed=0\n[2056734.849679] task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n[2056734.849690] memory cgroup stats for /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_5051ee8a1c623152246de3245c514de818127663500f71c01ae4f2952dbdc73a: cache:188900kb rss:15900kb rss_huge:0kb mapped_file:188876kb swap:0kb inactive_anon:188372kb active_anon:16428kb inactive_file:0kb active_file:0kb unevictable:0kb\n[2056751.353176] pool cpuset=kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 mems_allowed=0\n[2056751.353223] task in /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a/kata_d888b88f19234d8148f43414242b99ec4de2d25e881d0453a920622da946c2e1 killed as a result of limit of /kubepods/burstable/podf4bff02f-469b-4fbb-8152-5daafbe2cb3a\n\n\n\n1\n2\n3\n4\n5\n6\n7\n',charsets:{cjk:!0}},{title:"å¼å¯ç¡¬ä»¶èæå",frontmatter:{title:"å¼å¯ç¡¬ä»¶èæå",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/6f3d25/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"[TOC]",meta:[{name:"twitter:title",content:"å¼å¯ç¡¬ä»¶èæå"},{name:"twitter:description",content:"[TOC]"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å¼å¯ç¡¬ä»¶èæå"},{property:"og:description",content:"[TOC]"},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"å¼å¯ç¡¬ä»¶èæå"},{itemprop:"description",content:"[TOC]"}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/01.%E5%BC%80%E5%90%AF%E7%A1%AC%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%8C%96.html",relativePath:"01.ææ¯æè°/07.èæå/01.å¼å¯ç¡¬ä»¶èæå.md",key:"v-4a20ad90",path:"/pages/6f3d25/",headers:[{level:2,title:"1.BIOS å¯ç¨èæå",slug:"_1-bios-å¯ç¨èæå",normalizedTitle:"1.bios å¯ç¨èæå",charIndex:22},{level:2,title:"2.å è½½åæ ¸æ¨¡å",slug:"_2-å è½½åæ ¸æ¨¡å",normalizedTitle:"2.å è½½åæ ¸æ¨¡å",charIndex:69},{level:2,title:"3.IOMMUå¼å¯ï¼",slug:"_3-iommuå¼å¯",normalizedTitle:"3.iommuå¼å¯ï¼",charIndex:123},{level:2,title:'4.egrep --color -i "svm|vmx" /proc/cpuinfo',slug:"_4-egrep-color-i-svm-vmx-proc-cpuinfo",normalizedTitle:"4.egrep --color -i &quot;svm|vmx&quot; /proc/cpuinfo",charIndex:null}],headersStr:'1.BIOS å¯ç¨èæå 2.å è½½åæ ¸æ¨¡å 3.IOMMUå¼å¯ï¼ 4.egrep --color -i "svm|vmx" /proc/cpuinfo',content:'[TOC]\n\n\n# å¼å¯ç¡¬ä»¶èæå\n\n\n# 1.BIOS å¯ç¨èæå\n\nè®¾ç½®biosä¸­çç¡¬ä»¶æ¯æVT-xï¼å³CPUæ¯æçèæåï¼\n\n\n# 2.å è½½åæ ¸æ¨¡å\n\nmodprobe kvm-intel modprobe vhost-vsock\n\n\n# 3.IOMMUå¼å¯ï¼\n\nå¤æ­æ¯å¦amd/intel: ls /sys/firmware/ | grep efi\n\n1 ä¿®æ¹/etc/default/grub, è°æ´GRUB_CMDLINE_LINUXåå®¹\n\n * amd_iommuï¼\n\n> GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet amd_iommu=on iommu=pt"\n\n * intel_iommuï¼\n\n> GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet intel_iommu=on iommu=pt"\n\n2 éæ°åå»ºå¼å¯¼\n\n * å¦ææå¡å¨æ¯UEFIå¯å¨\n\n> grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg\n\n * æ®éLEGACYæ¨¡å¼å¯å¨\n\n> grub2-mkconfig -o /boot/grub2/grub.cfg\n\n3 reboot\n\nIOMMUå³é­ï¼\n\n1 ä¿®æ¹/etc/default/grubï¼å é¤iommuéç½®\n\n2 éæ°åå»ºå¼å¯¼åä¸\n\n3 reboot\n\n\n# 4.egrep --color -i "svm|vmx" /proc/cpuinfo\n\n\n# æ£æ¥èæå\n\næ£æ¥æ¯å¦èææºï¼\n\n> systemd-detect-virt egrep --color -i "svm|vmx" /proc/cpuinfo\n\nå¤æ­å½åç¯å¢æä½¿ç¨çèæææ¯ï¼\n\n> virt-what\n\næ£æµ Linux åºå±çèæåç±»å:\n\n> dmidecode -s system-manufacturer virsh vcpuinfo --domain hfftest',normalizedContent:'[toc]\n\n\n# å¼å¯ç¡¬ä»¶èæå\n\n\n# 1.bios å¯ç¨èæå\n\nè®¾ç½®biosä¸­çç¡¬ä»¶æ¯ævt-xï¼å³cpuæ¯æçèæåï¼\n\n\n# 2.å è½½åæ ¸æ¨¡å\n\nmodprobe kvm-intel modprobe vhost-vsock\n\n\n# 3.iommuå¼å¯ï¼\n\nå¤æ­æ¯å¦amd/intel: ls /sys/firmware/ | grep efi\n\n1 ä¿®æ¹/etc/default/grub, è°æ´grub_cmdline_linuxåå®¹\n\n * amd_iommuï¼\n\n> grub_cmdline_linux="crashkernel=auto rhgb quiet amd_iommu=on iommu=pt"\n\n * intel_iommuï¼\n\n> grub_cmdline_linux="crashkernel=auto rhgb quiet intel_iommu=on iommu=pt"\n\n2 éæ°åå»ºå¼å¯¼\n\n * å¦ææå¡å¨æ¯uefiå¯å¨\n\n> grub2-mkconfig -o /boot/efi/efi/centos/grub.cfg\n\n * æ®élegacyæ¨¡å¼å¯å¨\n\n> grub2-mkconfig -o /boot/grub2/grub.cfg\n\n3 reboot\n\niommuå³é­ï¼\n\n1 ä¿®æ¹/etc/default/grubï¼å é¤iommuéç½®\n\n2 éæ°åå»ºå¼å¯¼åä¸\n\n3 reboot\n\n\n# 4.egrep --color -i "svm|vmx" /proc/cpuinfo\n\n\n# æ£æ¥èæå\n\næ£æ¥æ¯å¦èææºï¼\n\n> systemd-detect-virt egrep --color -i "svm|vmx" /proc/cpuinfo\n\nå¤æ­å½åç¯å¢æä½¿ç¨çèæææ¯ï¼\n\n> virt-what\n\næ£æµ linux åºå±çèæåç±»å:\n\n> dmidecode -s system-manufacturer virsh vcpuinfo --domain hfftest',charsets:{cjk:!0}},{title:"èæååºç¡æ¦å¿µ",frontmatter:{title:"èæååºç¡æ¦å¿µ",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/697e48/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"èæååºç¡æ¦å¿µ"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"},{property:"og:type",content:"article"},{property:"og:title",content:"èæååºç¡æ¦å¿µ"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"èæååºç¡æ¦å¿µ"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/02.%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html",relativePath:"01.ææ¯æè°/07.èæå/02.èæååºç¡æ¦å¿µ.md",key:"v-2e18135a",path:"/pages/697e48/",headersStr:null,content:'[TOC]\n\n\n# æ¦å¿µ\n\n * KVMï¼Kernel-Based Virtual Machine åºäºåæ ¸çèææºï¼åªè´è´£CPUååå­çèæå\n\n * qemu-kvmï¼kvmç¨æ·ç©ºé´ç®¡çå·¥å·ï¼\n\n * libvirtï¼ç®¡çkvmèææºçè½¯ä»¶ï¼\n\n * QEMUï¼ QEMUæ¯ä¸ä¸ªç¬ç«çèæåè§£å³æ¹æ¡ï¼å¹¶ä¸ä¾èµKVMï¼å®æ¬èº«èªå·±å¯ä»¥åCPUååå­çæ¨¡æï¼åªä¸è¿æçè¾ä½ï¼ï¼èKVMæ¯å¦ä¸å¥èæåè§£å³æ¹æ¡ï¼å¯¹CPUè¿è¡èææçè¾é«ï¼éç¨äºç¡¬ä»¶è¾å©èæåï¼ï¼ä½æ¬èº«ä¸æä¾å¶ä»è®¾å¤çèæåï¼åç¨äºQEMUçä»£ç è¿è¡äºå®å¶ï¼æä»¥KVMæ¹æ¡ä¸å®è¦ä¾èµQEMU\n\n * QEMU-KVMï¼\n   \n   1.æä¾å¯¹cpuï¼åå­ï¼KVMè´è´£ï¼ï¼IOè®¾å¤ï¼QEMUè´è´£ï¼çèæ\n   \n   2.å¯¹åç§èæè®¾å¤çåå»ºï¼è°ç¨è¿è¡ç®¡çï¼QEMUè´è´£ï¼\n\n * libvirtï¼ åªè½ç®åçè®¤ä¸ºæ¯ä¸ªèææºç®¡çå·¥å·ï¼ä»ç¶éè¦éè¿ç¨æ·ç©ºé´QEMUæ¥ä¸KVMè¿è¡äº¤äºã ä¸äºå¸¸ç¨çèææºç®¡çå·¥å·å¦virshï¼ç±»ä¼¼vimç¼è¾å¨ï¼ï¼virt-installï¼virt-managerç­åäºè®¡ç®æ¡æ¶å¹³å°ï¼å¦OpenStackï¼OpenNebulaï¼Eucalyptusç­ï¼é½å¨åºå±ä½¿ç¨libvirtæä¾çåºç¨ç¨åºæ¥å£ã\n\n * Hyper-Vï¼\n\n * xen:\n\n * VSOCKï¼è½¯ä»¶åvsockæä¾äºå¯¹Linux VMå¥æ¥å­ï¼ AF_VSOCK ï¼çè®¿é®ï¼ä»¥å¨èææºç®¡çç¨åºä¸å¶èææºä¹é´è¿è¡éä¿¡ã\n\n * Hypervisor: åå©èæåææ¯ï¼ç¨æ·è½ä»¥åä¸ªç©çç¡¬ä»¶ç³»ç»ä¸ºåºç¡åå»ºå¤ä¸ªæ¨¡æç¯å¢æä¸ç¨èµæºãç§°ä¸º"Hypervisor" ï¼èææºçæ§ç¨åºï¼\n\n * å¤§é¡µåå­ï¼å¢å åå­ä¸é¡µçå¤§å°ï¼é»è®¤æ¯å¼å¯ç,æé«èææºåå­çioæ§è½ cat /sys/kernel/mm/transparent_hugepage/enabled\n\n * KSM KSMåå­åå¹¶,ç¸åçé¡µåå¹¶ï¼ps -aux | grep ksm | grep -v grep\n\n * noopï¼ ç³»ç»åæ ¸ioçè°åº¦ç®æ³ï¼å¦ææ¯ssdç¡¬çéè¦ä½¿ç¨çæ¯noopåæ ¸è°åº¦ï¼ cat /sys/block/sda/queue/scheduler\n\n\n# èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:\n\nï¼1ï¼. è¿è¡ä¸ç©çæºä¹ä¸ï¼ç©çæº --\x3e hypervisor ä¾å¦ï¼kvmãMicrosoft Hyper-V å VMware vSphere ï¼2ï¼. è¿è¡ä¸æä½ç³»ç»ä¹ä¸ï¼ç©çæº --\x3e OS --\x3e Hypervisor ä¾å¦ï¼VMware Workstation å Oracle VirtualBox\n\n\n# ç¼å²(cache)',normalizedContent:'[toc]\n\n\n# æ¦å¿µ\n\n * kvmï¼kernel-based virtual machine åºäºåæ ¸çèææºï¼åªè´è´£cpuååå­çèæå\n\n * qemu-kvmï¼kvmç¨æ·ç©ºé´ç®¡çå·¥å·ï¼\n\n * libvirtï¼ç®¡çkvmèææºçè½¯ä»¶ï¼\n\n * qemuï¼ qemuæ¯ä¸ä¸ªç¬ç«çèæåè§£å³æ¹æ¡ï¼å¹¶ä¸ä¾èµkvmï¼å®æ¬èº«èªå·±å¯ä»¥åcpuååå­çæ¨¡æï¼åªä¸è¿æçè¾ä½ï¼ï¼èkvmæ¯å¦ä¸å¥èæåè§£å³æ¹æ¡ï¼å¯¹cpuè¿è¡èææçè¾é«ï¼éç¨äºç¡¬ä»¶è¾å©èæåï¼ï¼ä½æ¬èº«ä¸æä¾å¶ä»è®¾å¤çèæåï¼åç¨äºqemuçä»£ç è¿è¡äºå®å¶ï¼æä»¥kvmæ¹æ¡ä¸å®è¦ä¾èµqemu\n\n * qemu-kvmï¼\n   \n   1.æä¾å¯¹cpuï¼åå­ï¼kvmè´è´£ï¼ï¼ioè®¾å¤ï¼qemuè´è´£ï¼çèæ\n   \n   2.å¯¹åç§èæè®¾å¤çåå»ºï¼è°ç¨è¿è¡ç®¡çï¼qemuè´è´£ï¼\n\n * libvirtï¼ åªè½ç®åçè®¤ä¸ºæ¯ä¸ªèææºç®¡çå·¥å·ï¼ä»ç¶éè¦éè¿ç¨æ·ç©ºé´qemuæ¥ä¸kvmè¿è¡äº¤äºã ä¸äºå¸¸ç¨çèææºç®¡çå·¥å·å¦virshï¼ç±»ä¼¼vimç¼è¾å¨ï¼ï¼virt-installï¼virt-managerç­åäºè®¡ç®æ¡æ¶å¹³å°ï¼å¦openstackï¼opennebulaï¼eucalyptusç­ï¼é½å¨åºå±ä½¿ç¨libvirtæä¾çåºç¨ç¨åºæ¥å£ã\n\n * hyper-vï¼\n\n * xen:\n\n * vsockï¼è½¯ä»¶åvsockæä¾äºå¯¹linux vmå¥æ¥å­ï¼ af_vsock ï¼çè®¿é®ï¼ä»¥å¨èææºç®¡çç¨åºä¸å¶èææºä¹é´è¿è¡éä¿¡ã\n\n * hypervisor: åå©èæåææ¯ï¼ç¨æ·è½ä»¥åä¸ªç©çç¡¬ä»¶ç³»ç»ä¸ºåºç¡åå»ºå¤ä¸ªæ¨¡æç¯å¢æä¸ç¨èµæºãç§°ä¸º"hypervisor" ï¼èææºçæ§ç¨åºï¼\n\n * å¤§é¡µåå­ï¼å¢å åå­ä¸é¡µçå¤§å°ï¼é»è®¤æ¯å¼å¯ç,æé«èææºåå­çioæ§è½ cat /sys/kernel/mm/transparent_hugepage/enabled\n\n * ksm ksmåå­åå¹¶,ç¸åçé¡µåå¹¶ï¼ps -aux | grep ksm | grep -v grep\n\n * noopï¼ ç³»ç»åæ ¸ioçè°åº¦ç®æ³ï¼å¦ææ¯ssdç¡¬çéè¦ä½¿ç¨çæ¯noopåæ ¸è°åº¦ï¼ cat /sys/block/sda/queue/scheduler\n\n\n# èæåæä¸¤ç§ä¸åç±»åçèææºçæ§ç¨åº:\n\nï¼1ï¼. è¿è¡ä¸ç©çæºä¹ä¸ï¼ç©çæº --\x3e hypervisor ä¾å¦ï¼kvmãmicrosoft hyper-v å vmware vsphere ï¼2ï¼. è¿è¡ä¸æä½ç³»ç»ä¹ä¸ï¼ç©çæº --\x3e os --\x3e hypervisor ä¾å¦ï¼vmware workstation å oracle virtualbox\n\n\n# ç¼å²(cache)',charsets:{cjk:!0}},{title:"centosä½¿ç¨kvmåå»ºèææº",frontmatter:{title:"centosä½¿ç¨kvmåå»ºèææº",date:"2022-07-27T14:56:49.000Z",permalink:"/pages/33705b/",categories:["ææ¯æè°","èæå"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"centosä½¿ç¨kvmåå»ºèææº"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html"},{property:"og:type",content:"article"},{property:"og:title",content:"centosä½¿ç¨kvmåå»ºèææº"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T14:56:49.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"centosä½¿ç¨kvmåå»ºèææº"},{itemprop:"description",content:""}]},regularPath:"/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/07.%E8%99%9A%E6%8B%9F%E5%8C%96/03.centos%E4%BD%BF%E7%94%A8kvm%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA.html",relativePath:"01.ææ¯æè°/07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.md",key:"v-080925d0",path:"/pages/33705b/",headers:[{level:2,title:"å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼",slug:"å®è£å®kvmä¹å-éè¦éç½®ä¸ä¸ç½å¡-å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡",normalizedTitle:"å®è£å®kvmä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼",charIndex:60},{level:2,title:"åå»ºå·",slug:"åå»ºå·",normalizedTitle:"åå»ºå·",charIndex:939},{level:2,title:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",slug:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",normalizedTitle:"åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶",charIndex:1254},{level:2,title:"èææºæä½",slug:"èææºæä½",normalizedTitle:"èææºæä½",charIndex:2044},{level:2,title:"å®è£å®æï¼éç½®åºå®IP",slug:"å®è£å®æ-éç½®åºå®ip",normalizedTitle:"å®è£å®æï¼éç½®åºå®ip",charIndex:2602}],headersStr:"å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ åå»ºå· åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶ èææºæä½ å®è£å®æï¼éç½®åºå®IP",content:"https://blog.csdn.net/dhRainer/article/details/83411555\n\n\n# å®è£å®KVMä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼\n\ncd /etc/sysconfig/network-scripts/\ncp ifcfg-eno16777728 ifcfg-br0  # æ·è´å½åçç½å¡æä»¶\nvim ifcfg-eno16777728  # ä¿®æ¹æä»¶åå®¹å¦ä¸\nTYPE=Ethernet\nBOOTPROTO=dhcp\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=eno16777728\nDEVICE=eno16777728\nONBOOT=yes\nBRIDGE=br0\n\nvim ifcfg-br0  # ä¿®æ¹æä»¶åå®¹å¦ä¸\nTYPE=Bridge\nBOOTPROTO=dhcp\nDEFROUTE=yes\nPEERDNS=yes\nPEERROUTES=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_PEERDNS=yes\nIPV6_PEERROUTES=yes\nIPV6_FAILURE_FATAL=no\nNAME=br0\nDEVICE=br0\nONBOOT=yes\n\nsystemctl restart network  # éå¯æå¡\n\nsystemctl start libvirtd  # å¯å¨libvirtdæå¡\n\nbrctl show  # å¯ä»¥çå°ä¸¤ä¸ªç½å¡\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# åå»ºå·\n\ncd /root/hff/kvm\nqemu-img create -f qcow2    hfftest.qcow2  10G\nqemu-img info  hfftest.qcow2 \nimage: hfftest.qcow2\nfile format: qcow2\nvirtual size: 10G (10737418240 bytes)\ndisk size: 196K\ncluster_size: 65536\nFormat specific information:\n    compat: 1.1\n    lazy refcounts: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶\n\na)å½ä»¤è¡å®è£èææº\n\nvirt-install \\\n--virt-type=kvm \\\n--name=hfftest \\\n--vcpus=2 \\\n--memory=2048 \\\n--location=/hff/kvm/iso/CentOS-7-x86_64-Minimal-2009.iso \\\n--disk path=/hff/kvm/images/hfftest.qcow2,size=15,format=qcow2 \\\n--network bridge=virbr0 \\\n--graphics none \\\n--extra-args='console=ttyS0' \\\n--force\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> å½ä»¤è¯´æï¼ --name æå®èææºçåç§° --memory æå®åéç»èææºçåå­èµæºå¤§å° maxmemory æå®å¯è°èçæå¤§åå­èµæºå¤§å°ï¼å ä¸ºKVMæ¯æç­è°æ´èææºçèµæº --vcpus æå®åéç»èææºçCPUæ ¸å¿æ°é maxvcpus æå®å¯è°èçæå¤§CPUæ ¸å¿æ°é --os-type æå®èææºå®è£çæä½ç³»ç»ç±»å --os-variant æå®ç³»ç»çåè¡çæ¬ --location æå®ISOéåæä»¶æå¨çè·¯å¾ï¼æ¯æä½¿ç¨ç½ç»èµæºè·¯å¾ï¼ä¹å°±æ¯è¯´å¯ä»¥ä½¿ç¨URL --disk path æå®èæç¡¬çæå­æ¾çè·¯å¾ååç§°ï¼size åæ¯æå®è¯¥ç¡¬ççå¯ç¨å¤§å°ï¼åä½æ¯G --bridge æå®ä½¿ç¨åªä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ä¹å°±æ¯è¯´ä½¿ç¨æ¡¥æ¥çç½ç»æ¨¡å¼ --graphics æå®æ¯å¦å¼å¯å¾å½¢ --console å®ä¹ç»ç«¯çå±æ§ï¼target_type åæ¯å®ä¹ç»ç«¯çç±»å --extra-args å®ä¹ç»ç«¯é¢å¤çåæ°\n\næ¥è¯¢èææºæä½¿ç¨çvncç«¯å£virsh vncdisplay centos\n\n\n# èææºæä½\n\n[root@localhost ~]# virsh console study01  # è¿å¥æå®çèææºï¼è¿å¥çæ¶åè¿éè¦æä¸ä¸åè½¦\n[root@localhost ~]# virsh start study01  # å¯å¨èææº\n[root@localhost ~]# virsh shutdown study01  # å³é­èææº\n[root@localhost ~]# virsh destroy study01  # å¼ºå¶åæ­¢èææº\n[root@localhost ~]# virsh undefine study01  # å½»åºéæ¯èææºï¼ä¼å é¤èææºéç½®æä»¶ï¼ä½ä¸ä¼å é¤èæç£ç\n[root@localhost ~]# virsh autostart study01  # è®¾ç½®å®¿ä¸»æºå¼æºæ¶è¯¥èææºä¹å¼æº\n[root@localhost ~]# virsh autostart --disable study01  # è§£é¤å¼æºå¯å¨\n[root@localhost ~]# virsh suspend study01 # æèµ·èææº\n[root@localhost ~]# virsh resume study01 # æ¢å¤æèµ·çèææº\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®è£å®æï¼éç½®åºå®IP\n\n[root@localhost network-scripts]# ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: ens3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n    link/ether 52:54:00:40:a4:ef brd ff:ff:ff:ff:ff:ff\n    inet 192.168.122.151/24 brd 192.168.122.255 scope global noprefixroute dynamic ens3\n       valid_lft 3598sec preferred_lft 3598sec\n    inet6 fe80::f5ed:53d0:e383:59e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\n[root@localhost network-scripts]#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",normalizedContent:"https://blog.csdn.net/dhrainer/article/details/83411555\n\n\n# å®è£å®kvmä¹åï¼éè¦éç½®ä¸ä¸ç½å¡ï¼å¢å ä¸ä¸ªæ¡¥æ¥ç½å¡ï¼\n\ncd /etc/sysconfig/network-scripts/\ncp ifcfg-eno16777728 ifcfg-br0  # æ·è´å½åçç½å¡æä»¶\nvim ifcfg-eno16777728  # ä¿®æ¹æä»¶åå®¹å¦ä¸\ntype=ethernet\nbootproto=dhcp\ndefroute=yes\npeerdns=yes\npeerroutes=yes\nipv4_failure_fatal=no\nipv6init=yes\nipv6_autoconf=yes\nipv6_defroute=yes\nipv6_peerdns=yes\nipv6_peerroutes=yes\nipv6_failure_fatal=no\nname=eno16777728\ndevice=eno16777728\nonboot=yes\nbridge=br0\n\nvim ifcfg-br0  # ä¿®æ¹æä»¶åå®¹å¦ä¸\ntype=bridge\nbootproto=dhcp\ndefroute=yes\npeerdns=yes\npeerroutes=yes\nipv4_failure_fatal=no\nipv6init=yes\nipv6_autoconf=yes\nipv6_defroute=yes\nipv6_peerdns=yes\nipv6_peerroutes=yes\nipv6_failure_fatal=no\nname=br0\ndevice=br0\nonboot=yes\n\nsystemctl restart network  # éå¯æå¡\n\nsystemctl start libvirtd  # å¯å¨libvirtdæå¡\n\nbrctl show  # å¯ä»¥çå°ä¸¤ä¸ªç½å¡\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# åå»ºå·\n\ncd /root/hff/kvm\nqemu-img create -f qcow2    hfftest.qcow2  10g\nqemu-img info  hfftest.qcow2 \nimage: hfftest.qcow2\nfile format: qcow2\nvirtual size: 10g (10737418240 bytes)\ndisk size: 196k\ncluster_size: 65536\nformat specific information:\n    compat: 1.1\n    lazy refcounts: false\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# åå¤ä¸ä¸ªæä½ç³»ç»çéåæä»¶\n\na)å½ä»¤è¡å®è£èææº\n\nvirt-install \\\n--virt-type=kvm \\\n--name=hfftest \\\n--vcpus=2 \\\n--memory=2048 \\\n--location=/hff/kvm/iso/centos-7-x86_64-minimal-2009.iso \\\n--disk path=/hff/kvm/images/hfftest.qcow2,size=15,format=qcow2 \\\n--network bridge=virbr0 \\\n--graphics none \\\n--extra-args='console=ttys0' \\\n--force\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n> å½ä»¤è¯´æï¼ --name æå®èææºçåç§° --memory æå®åéç»èææºçåå­èµæºå¤§å° maxmemory æå®å¯è°èçæå¤§åå­èµæºå¤§å°ï¼å ä¸ºkvmæ¯æç­è°æ´èææºçèµæº --vcpus æå®åéç»èææºçcpuæ ¸å¿æ°é maxvcpus æå®å¯è°èçæå¤§cpuæ ¸å¿æ°é --os-type æå®èææºå®è£çæä½ç³»ç»ç±»å --os-variant æå®ç³»ç»çåè¡çæ¬ --location æå®isoéåæä»¶æå¨çè·¯å¾ï¼æ¯æä½¿ç¨ç½ç»èµæºè·¯å¾ï¼ä¹å°±æ¯è¯´å¯ä»¥ä½¿ç¨url --disk path æå®èæç¡¬çæå­æ¾çè·¯å¾ååç§°ï¼size åæ¯æå®è¯¥ç¡¬ççå¯ç¨å¤§å°ï¼åä½æ¯g --bridge æå®ä½¿ç¨åªä¸ä¸ªæ¡¥æ¥ç½å¡ï¼ä¹å°±æ¯è¯´ä½¿ç¨æ¡¥æ¥çç½ç»æ¨¡å¼ --graphics æå®æ¯å¦å¼å¯å¾å½¢ --console å®ä¹ç»ç«¯çå±æ§ï¼target_type åæ¯å®ä¹ç»ç«¯çç±»å --extra-args å®ä¹ç»ç«¯é¢å¤çåæ°\n\næ¥è¯¢èææºæä½¿ç¨çvncç«¯å£virsh vncdisplay centos\n\n\n# èææºæä½\n\n[root@localhost ~]# virsh console study01  # è¿å¥æå®çèææºï¼è¿å¥çæ¶åè¿éè¦æä¸ä¸åè½¦\n[root@localhost ~]# virsh start study01  # å¯å¨èææº\n[root@localhost ~]# virsh shutdown study01  # å³é­èææº\n[root@localhost ~]# virsh destroy study01  # å¼ºå¶åæ­¢èææº\n[root@localhost ~]# virsh undefine study01  # å½»åºéæ¯èææºï¼ä¼å é¤èææºéç½®æä»¶ï¼ä½ä¸ä¼å é¤èæç£ç\n[root@localhost ~]# virsh autostart study01  # è®¾ç½®å®¿ä¸»æºå¼æºæ¶è¯¥èææºä¹å¼æº\n[root@localhost ~]# virsh autostart --disable study01  # è§£é¤å¼æºå¯å¨\n[root@localhost ~]# virsh suspend study01 # æèµ·èææº\n[root@localhost ~]# virsh resume study01 # æ¢å¤æèµ·çèææº\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# å®è£å®æï¼éç½®åºå®ip\n\n[root@localhost network-scripts]# ip a\n1: lo: <loopback,up,lower_up> mtu 65536 qdisc noqueue state unknown group default qlen 1000\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: ens3: <broadcast,multicast,up,lower_up> mtu 1500 qdisc pfifo_fast state up group default qlen 1000\n    link/ether 52:54:00:40:a4:ef brd ff:ff:ff:ff:ff:ff\n    inet 192.168.122.151/24 brd 192.168.122.255 scope global noprefixroute dynamic ens3\n       valid_lft 3598sec preferred_lft 3598sec\n    inet6 fe80::f5ed:53d0:e383:59e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\n[root@localhost network-scripts]#\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n",charsets:{cjk:!0}},{title:"å»æ¡è±é",frontmatter:{title:"å»æ¡è±é",date:"2019-12-25T14:27:01.000Z",permalink:"/pages/ythx",categories:["æ¡å­"],tags:["æ¡å­"],author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700",meta:[{name:"twitter:title",content:"å»æ¡è±é"},{name:"twitter:description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å»æ¡è±é"},{property:"og:description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"},{property:"og:url",content:"https://fangfenghuang.github.io/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2019-12-25T14:27:01.000Z"},{property:"article:tag",content:"æ¡å­"},{itemprop:"name",content:"å»æ¡è±é"},{itemprop:"description",content:"|æ¥æ|ç©å|æ»ä»·|å¤æ³¨|\n|----|----|--------|---------|\n|2019/7/5|æ¡å­|1700"}]},regularPath:"/02.%E7%94%9F%E6%B4%BB%E9%9A%8F%E5%86%99/01.%E5%85%BB%E6%A1%83%E6%97%A5%E8%AE%B0/01.%E5%85%BB%E6%A1%83%E8%8A%B1%E9%94%80.html",relativePath:"02.çæ´»éå/01.å»æ¡æ¥è®°/01.å»æ¡è±é.md",key:"v-51e55098",path:"/pages/ythx/",headers:[{level:2,title:"ç«ç²®æç»",slug:"ç«ç²®æç»",normalizedTitle:"ç«ç²®æç»",charIndex:62}],headersStr:"ç«ç²®æç»",content:"# å»æ¡è±é\n\næ¥æ         ç©å   æ»ä»·     å¤æ³¨\n2019/7/5   æ¡å­   1700   \n\n\n# ç«ç²®æç»\n\næ¥æ     ç©å   æ»ä»·   å¤æ³¨\n2019   ç«ç²®        \n2020   ç«ç²®        \n2021   ç«ç²®        ",normalizedContent:"# å»æ¡è±é\n\næ¥æ         ç©å   æ»ä»·     å¤æ³¨\n2019/7/5   æ¡å­   1700   \n\n\n# ç«ç²®æç»\n\næ¥æ     ç©å   æ»ä»·   å¤æ³¨\n2019   ç«ç²®        \n2020   ç«ç²®        \n2021   ç«ç²®        ",charsets:{cjk:!0}},{title:"å³äº",frontmatter:{title:"å³äº",date:"2019-12-25T14:27:01.000Z",permalink:"/about/",sidebar:!1,article:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å³äº"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å³äº"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2019-12-25T14:27:01.000Z"},{itemprop:"name",content:"å³äº"},{itemprop:"description",content:""}]},regularPath:"/03.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E.html",relativePath:"03.å³äº/01.å³äº.md",key:"v-4ed9e4ca",path:"/about/",headers:[{level:2,title:"å³äºæ¬ç«",slug:"å³äºæ¬ç«",normalizedTitle:"å³äºæ¬ç«",charIndex:2},{level:2,title:"å³äºæ",slug:"å³äºæ",normalizedTitle:"å³äºæ",charIndex:11}],headersStr:"å³äºæ¬ç« å³äºæ",content:"# å³äºæ¬ç«\n\n\n# å³äºæ",normalizedContent:"# å³äºæ¬ç«\n\n\n# å³äºæ",charsets:{cjk:!0},lastUpdated:"2022/07/26, 10:59:19",lastUpdatedTimestamp:1658804359e3},{title:"ä¹¦å",frontmatter:{title:"ä¹¦å",permalink:"/books/",date:"2020-04-19T11:33:04.000Z",article:!1,author:{name:"fangfenghuang",link:"https://github.com/fangfenghuang"},titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"ä¹¦å"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/04.%E4%B9%A6%E7%B1%8D/01.%E4%B9%A6%E5%8D%95.html"},{property:"og:type",content:"article"},{property:"og:title",content:"ä¹¦å"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/04.%E4%B9%A6%E7%B1%8D/01.%E4%B9%A6%E5%8D%95.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2020-04-19T11:33:04.000Z"},{itemprop:"name",content:"ä¹¦å"},{itemprop:"description",content:""}]},regularPath:"/04.%E4%B9%A6%E7%B1%8D/01.%E4%B9%A6%E5%8D%95.html",relativePath:"04.ä¹¦ç±/01.ä¹¦å.md",key:"v-50e59150",path:"/books/",headersStr:null,content:"todo",normalizedContent:"todo",charsets:{}},{title:"çµå­ä¹¦",frontmatter:{title:"çµå­ä¹¦",date:"2022-07-27T15:12:21.000Z",permalink:"/pages/dianzishu/",categories:["ä¹¦ç±"],tags:[null],titleTag:"åå",readingShow:"top",description:"",meta:[{name:"twitter:title",content:"çµå­ä¹¦"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/04.%E4%B9%A6%E7%B1%8D/02.%E7%94%B5%E5%AD%90%E4%B9%A6.html"},{property:"og:type",content:"article"},{property:"og:title",content:"çµå­ä¹¦"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/04.%E4%B9%A6%E7%B1%8D/02.%E7%94%B5%E5%AD%90%E4%B9%A6.html"},{property:"og:site_name",content:"fangfenghuang"},{property:"article:published_time",content:"2022-07-27T15:12:21.000Z"},{property:"article:tag",content:null},{itemprop:"name",content:"çµå­ä¹¦"},{itemprop:"description",content:""}]},regularPath:"/04.%E4%B9%A6%E7%B1%8D/02.%E7%94%B5%E5%AD%90%E4%B9%A6.html",relativePath:"04.ä¹¦ç±/02.çµå­ä¹¦.md",key:"v-4c375d97",path:"/pages/dianzishu/",headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"å½æ¡£",frontmatter:{archivesPage:!0,title:"å½æ¡£",permalink:"/archives/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"å½æ¡£"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/archivesPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"å½æ¡£"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/archivesPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"å½æ¡£"},{itemprop:"description",content:""}]},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-994f98d2",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/06/21, 21:34:00",lastUpdatedTimestamp:165581844e4},{title:"åç±»",frontmatter:{categoriesPage:!0,title:"åç±»",permalink:"/categories/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"åç±»"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/categoriesPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"åç±»"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/categoriesPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"åç±»"},{itemprop:"description",content:""}]},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-ea545412",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/06/21, 21:34:00",lastUpdatedTimestamp:165581844e4},{title:"æ ç­¾",frontmatter:{tagsPage:!0,title:"æ ç­¾",permalink:"/tags/",article:!1,readingShow:"top",description:"",meta:[{name:"twitter:title",content:"æ ç­¾"},{name:"twitter:description",content:""},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/@pages/tagsPage.html"},{property:"og:type",content:"article"},{property:"og:title",content:"æ ç­¾"},{property:"og:description",content:""},{property:"og:url",content:"https://fangfenghuang.github.io/@pages/tagsPage.html"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"æ ç­¾"},{itemprop:"description",content:""}]},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-1d3069d2",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/06/21, 21:34:00",lastUpdatedTimestamp:165581844e4},{title:"Home",frontmatter:{home:!0,heroText:"hff's blog",tagline:"å¤©éé¬å¤",bannerBg:"/img/bg.jpg",features:[{title:"ææ¯æè°",details:"å·¥ä½ãå­¦ä¹ ",link:"/tech/"},{title:"çæ´»éå",details:"ä¸ªäººãçæ´»",link:"/life/"}],readingShow:"top",description:"https://fangfenghuang.github.io/",meta:[{name:"twitter:title",content:"hff"},{name:"twitter:description",content:"https://fangfenghuang.github.io/"},{name:"twitter:card",content:"summary"},{name:"twitter:url",content:"https://fangfenghuang.github.io/"},{property:"og:type",content:"website"},{property:"og:title",content:"hff"},{property:"og:description",content:"https://fangfenghuang.github.io/"},{property:"og:url",content:"https://fangfenghuang.github.io/"},{property:"og:site_name",content:"fangfenghuang"},{itemprop:"name",content:"hff"},{itemprop:"description",content:"https://fangfenghuang.github.io/"}]},regularPath:"/",relativePath:"index.md",key:"v-0c8b6730",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"2022/07/17, 01:47:45",lastUpdatedTimestamp:1657993665e3}],themeConfig:{nav:[{text:"é¦é¡µ",link:"/"},{text:"å­¦ä¹ ",link:"/tech/"},{text:"çæ´»",link:"/life/",items:[{text:"å»æ¡æ¥è®°",link:"/pages/ythx/"}]},{text:"å³äº",link:"/about/"},{text:"ç´¢å¼",link:"/categories/",items:[{text:"åç±»",link:"/categories/"},{text:"æ ç­¾",link:"/tags/"},{text:"å½æ¡£",link:"/archives/"},{items:[{text:"github",link:"https://github.com/fangfenghuang"},{text:"scdn",link:"https://blog.csdn.net/qq_26572567"},{text:"ç¥ä¹",link:"https://www.zhihu.com/people/huangfangfeng-20"},{text:"linkin",link:"https://www.linkedin.com/"}]}]},{text:"ä¹¦ç±",link:"/books/",items:[{items:[{text:"ä¹¦å",link:"/books/"},{text:"çµå­ä¹¦",link:"/pages/dianzishu/"}]}]}],sidebarDepth:2,logo:"/img/logo.png",repo:"https://github.com/fangfenghuang/fangfenghuang.github.io",searchMaxSuggestions:10,lastUpdated:"ä¸æ¬¡æ´æ°",editLinks:!1,sidebarHoverTriggerOpen:!0,searchPlaceholder:"æä¸ ðº æç´¢",extendFrontmatter:{titleTag:"åå"},pageButton:!1,sidebar:{"/00.ç®å½é¡µ/":[["01.ææ¯æè°.md","ææ¯æè°","/tech/","åå"],["02.çæ´»éå.md","çæ´»éå","/life/","åå"]],catalogue:{"ææ¯æè°":"/tech/","çæ´»éå":"/life/"},"/01.ææ¯æè°/":[{title:"å¸¸ç¨æ»ç»",collapsable:!0,children:[["01.å¸¸ç¨æ»ç»/01.ä¸äºå¸¸ç¨éç½®.md","ä¸äºå¸¸ç¨éç½®","/pages/yxcypz/","åå"],["01.å¸¸ç¨æ»ç»/02.ä¸äºå·¥å·ç½ç«.md","ä¸äºå·¥å·ç½ç«","/pages/yxgjwz/","åå"],["01.å¸¸ç¨æ»ç»/03.ä¸äºå­¦ä¹ ç½ç«.md","ä¸äºå·¥å·ç½ç«","/pages/yxxxwz/","åå"],["01.å¸¸ç¨æ»ç»/04.ä¸äºå·¥å·å®è£.md","ä¸äºå·¥å·å®è£","/pages/yxgjaz/","åå"]]},{title:"è¸©åè®°å½",collapsable:!0,children:[["02.è¸©åè®°å½/01.2022è¸©åè®°å½.md","2022è¸©åè®°å½","/pages/2022ckjl/","åå"]]},{title:"kubernetes",collapsable:!0,children:[["03.kubernetes/01.k8såºç¡.md","k8såºç¡","/pages/k8sjichu/","åå"],["03.kubernetes/02.k8så­å¨.md","k8så­å¨","/pages/92d322/","åå"],["03.kubernetes/03.k8sç½ç».md","k8sç½ç»","/pages/9e8904/","åå"],["03.kubernetes/04.pod cgroupåèµæºéå¶.md","pod cgroupåèµæºéå¶","/pages/1408c2/","åå"],["03.kubernetes/05.æµééå¶.md","æµééå¶","/pages/d395da/","åå"],["03.kubernetes/06.ç½ç»ç­ç¥calico.md","ç½ç»ç­ç¥calico","/pages/9594e3/","åå"],["03.kubernetes/07.grafanaåpromuthues.md","grafanaåpromuthues","/pages/f1f52d/","åå"],["03.kubernetes/08.etcdèç¹downæºæ°æ®æ¢å¤.md","etcdèç¹downæºæ°æ®æ¢å¤","/pages/43f072/","åå"],["03.kubernetes/09.ceph.md","ceph","/pages/070d33/","åå"],["03.kubernetes/10.chrony.md","chrony","/pages/bfddf3/","åå"],["03.kubernetes/11.crd operator.md","crd operator","/pages/5d5fcc/","åå"],["03.kubernetes/12.criä¹containerd shimv2.md","criä¹containerd shimv2","/pages/fe3b2b/","åå"],["03.kubernetes/13.harbor.md","harbor","/pages/c3cbc2/","åå"],["03.kubernetes/14.helm chart.md","helm chart","/pages/b685a0/","åå"],["03.kubernetes/15.Loongnix mips64.md","Loongnix mips64","/pages/1bc186/","åå"],["03.kubernetes/16.nvidia-device-plugin.md","nvidia-device-plugin","/pages/717c4b/","åå"],["03.kubernetes/17.openebs-lvm-localpv.md","openebs-lvm-localpv","/pages/4be786/","åå"],{title:"docker",collapsable:!0,children:[["03.kubernetes/300.docker/00.dockeråºç¡.md","dockeråºç¡","/pages/f23c30/","åå"],["03.kubernetes/300.docker/01.buildxå¤å¹³å°æå»º.md","buildxå¤å¹³å°æå»º","/pages/f7bcff/","åå"],["03.kubernetes/300.docker/02.dockerfileæ¹æº.md","dockerfileæ¹æº","/pages/4b6bd5/","åå"],["03.kubernetes/300.docker/03.dockeréå.md","dockeréå","/pages/74eaf6/","åå"],["03.kubernetes/300.docker/04.dockeréåä¼å.md","dockeréåä¼å","/pages/be8ffb/","åå"],["03.kubernetes/300.docker/05.å¨Dockerä¸­è®¾ç½®æ¶åº.md","å¨Dockerä¸­è®¾ç½®æ¶åº","/pages/e29999/","åå"]]}]},{title:"golang",collapsable:!0,children:[["04.golang/01.å¸¸ç¨è®¡ç®.md","å¸¸ç¨è®¡ç®","/pages/7a288b/","åå"],["04.golang/02.golangé¢è¯é®é¢.md","golangé¢è¯é®é¢","/pages/b587ce/","åå"],["04.golang/03.go-æé.md","go-æé","/pages/88c22b/","åå"],["04.golang/04.go embed.md","go embed","/pages/ebb478/","åå"],["04.golang/05.go-å°è£ç»§æ¿åå¤æ.md","go-å°è£ç»§æ¿åå¤æ","/pages/5848e9/","åå"],["04.golang/06.go-æä»¶æä½.md","go-æä»¶æä½","/pages/b270a4/","åå"],["04.golang/07.go-json.md","go-json","/pages/417389/","åå"],["04.golang/08.go-sliceåç.md","go-sliceåç","/pages/1d629a/","åå"]]},{title:"python",collapsable:!0,children:[]},{title:"kata-containers",collapsable:!0,children:[{title:"kataåè¯",collapsable:!0,children:[["06.kata-containers/01.kataåè¯/01.kataåºæ¬åçä¸æ¶æ.md","kataåºæ¬åçä¸æ¶æ","/pages/276ee1/","åå"],["06.kata-containers/01.kataåè¯/02.kataç½ç»åå­å¨æä»¶ç³»ç»åæ.md","kataç½ç»åå­å¨æä»¶ç³»ç»åæ","/pages/25c61d/","åå"],["06.kata-containers/01.kataåè¯/03.kata cgroupåèµæºéå¶.md","kata cgroupåèµæºéå¶","/pages/d4921b/","åå"],["06.kata-containers/01.kataåè¯/04.guest kernelåguestos.md","guest kernelåguestos","/pages/e5081b/","åå"],["06.kata-containers/01.kataåè¯/05.kata-monitorçæ§.md","kata-monitorçæ§","/pages/4df25b/","åå"],["06.kata-containers/01.kataåè¯/06.kataä½¿ç¨éå¶.md","kataä½¿ç¨éå¶","/pages/f1a570/","åå"],["06.kata-containers/01.kataåè¯/07.å¶ä»ç¹æ§.md","å¶ä»ç¹æ§","/pages/2dc340/","åå"],["06.kata-containers/01.kataåè¯/08.ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾.md","ä¸ä¸ªkataå®¹å¨çåå»ºç¤ºä¾","/pages/cda215/","åå"]]},{title:"kataé¨ç½²",collapsable:!0,children:[["06.kata-containers/02.kataé¨ç½²/01.kata-deployé¨ç½²ãå¸è½½ä¸åçº§.md","kata-deployé¨ç½²ãå¸è½½ä¸åçº§","/pages/84f980/","åå"],["06.kata-containers/02.kataé¨ç½²/02.kata-deployåæ.md","kata-deployåæ","/pages/69d5c3/","åå"]]},{title:"kataåºç¨",collapsable:!0,children:[["06.kata-containers/04.kataåºç¨/01.å¸¸ç¨å½ä»¤.md","å¸¸ç¨å½ä»¤","/pages/3cb03e/","åå"],["06.kata-containers/04.kataåºç¨/02.kataä½¿ç¨é®é¢æ±æ».md","kataä½¿ç¨é®é¢æ±æ»","/pages/37753f/","åå"],["06.kata-containers/04.kataåºç¨/03.kataç¸å³éç½®åè·¯å¾.md","kataç¸å³éç½®åè·¯å¾","/pages/821097/","åå"],["06.kata-containers/04.kataåºç¨/04.kata debugä¸æ¥å¿.md","kata debugä¸æ¥å¿","/pages/7393ee/","åå"]]}]},{title:"èæå",collapsable:!0,children:[["07.èæå/01.å¼å¯ç¡¬ä»¶èæå.md","å¼å¯ç¡¬ä»¶èæå","/pages/6f3d25/","åå"],["07.èæå/02.èæååºç¡æ¦å¿µ.md","èæååºç¡æ¦å¿µ","/pages/697e48/","åå"],["07.èæå/03.centosä½¿ç¨kvmåå»ºèææº.md","centosä½¿ç¨kvmåå»ºèææº","/pages/33705b/","åå"]]},{title:"ç½ç»",collapsable:!0,children:[]}],"/02.çæ´»éå/":[{title:"å»æ¡æ¥è®°",collapsable:!0,children:[["01.å»æ¡æ¥è®°/01.å»æ¡è±é.md","å»æ¡è±é","/pages/ythx","åå"]]}],"/03.å³äº/":[["01.å³äº.md","å³äº","/about/","åå"]],"/04.ä¹¦ç±/":[["01.ä¹¦å.md","ä¹¦å","/books/","åå"],["02.çµå­ä¹¦.md","çµå­ä¹¦","/pages/dianzishu/","åå"]]},author:{name:"hff",link:"https://github.com/fangfenghuang"},blogger:{avatar:"/img/bg.jpeg",name:"hff",slogan:"ä¸ä¸ªæææ³çç¨åºç¿"},social:{icons:[{iconClass:"icon-github",title:"GitHub",link:"https://github.com/fangfenghuang"},{iconClass:"icon-youjian",title:"åé®ä»¶",link:"mailto:15068704759@163.com"},{iconClass:"icon-rss",title:"linkedin",link:"https://www.linkedin.com/in/huang-fangfeng-60887981/"}]},htmlModules:{homeSidebarB:'<div style="padding: 0.95rem">\n        <p style="\n          color: var(--textColor);\n          opacity: 0.9;\n          font-size: 20px;\n          font-weight: bold;\n          margin: 0 0 8px 0;\n        ">å¾®ä¿¡</p>\n        <img src="/img/weixin.jpg"  style="width:100%;" />\n        <p>\n        èç³»æ¹å¼:fangfeng_huang\n        </p>\n        </div>'},footer:{createYear:2022,copyrightInfo:'| <a rel="nofollow " target="_blank" href="https://github.com/fangfenghuang/fangfenghuang.GitHub.io">@fangfenghuang</a>'}}};var yc=t(94),_c=t(95),Ec=t(11);var xc={computed:{$filterPosts(){return this.$site.pages.filter(n=>{const{frontmatter:{pageComponent:e,article:t,home:o}}=n;return!(e||!1===t||!0===o)})},$sortPosts(){return(n=this.$filterPosts).sort((n,e)=>{const t=n.frontmatter.sticky,o=e.frontmatter.sticky;return t&&o?t==o?Object(Ec.a)(n,e):t-o:t&&!o?-1:!t&&o?1:Object(Ec.a)(n,e)}),n;var n},$sortPostsByDate(){return(n=this.$filterPosts).sort((n,e)=>Object(Ec.a)(n,e)),n;var n},$groupPosts(){return function(n){const e={},t={};for(let o=0,r=n.length;o<r;o++){const{frontmatter:{categories:r,tags:a}}=n[o];"array"===Object(Ec.n)(r)&&r.forEach(t=>{t&&(e[t]||(e[t]=[]),e[t].push(n[o]))}),"array"===Object(Ec.n)(a)&&a.forEach(e=>{e&&(t[e]||(t[e]=[]),t[e].push(n[o]))})}return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags(){return function(n){const e=[],t=[];for(let t in n.categories)e.push({key:t,length:n.categories[t].length});for(let e in n.tags)t.push({key:e,length:n.tags[e].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Kt.component(yc.default),Kt.component(_c.default);function wc(n){return n.toString().padStart(2,"0")}t(237);Kt.component("Badge",()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,395))),Kt.component("CodeBlock",()=>Promise.resolve().then(t.bind(null,94))),Kt.component("CodeGroup",()=>Promise.resolve().then(t.bind(null,95)));t(238);var Cc,Ac,Bc,Tc,Pc=Object.defineProperty,Sc=Object.getOwnPropertySymbols,Oc=Object.prototype.hasOwnProperty,Ic=Object.prototype.propertyIsEnumerable,Dc=(n,e,t)=>e in n?Pc(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,zc=(n,e)=>{for(var t in e||(e={}))Oc.call(e,t)&&Dc(n,t,e[t]);if(Sc)for(var t of Sc(e))Ic.call(e,t)&&Dc(n,t,e[t]);return n},jc=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},qc=(n,e,t)=>(jc(n,e,"read from private field"),t?t.call(n):e.get(n)),Mc=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},$c=(n,e,t,o)=>(jc(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t);const Fc=class{constructor(n,e,t,o=!0){Mc(this,Cc,void 0),Mc(this,Ac,void 0),$c(this,Cc,{width:0,height:0});const{el:r,ctx:a}=Fc.initCanvas(n);this.el=r,this.ctx=a,$c(this,Ac,o),this.size={width:e||window.innerWidth,height:t||window.innerHeight}}get size(){return zc({},qc(this,Cc))}set size({width:n,height:e}){var t;if(qc(this,Cc).width===n&&qc(this,Cc).height===e)return;qc(this,Cc).width=n,qc(this,Cc).height=e;const o=null!=(t=qc(this,Ac)?window.devicePixelRatio:1)?t:1;this.el.width=Math.round(qc(this,Cc).width*o),this.el.height=Math.round(qc(this,Cc).height*o),this.el.style.width=qc(this,Cc).width+"px",this.el.style.height=qc(this,Cc).height+"px",qc(this,Ac)&&this.ctx.scale(o,o)}clear(){Fc.clearCanvas(this.ctx,zc({},qc(this,Cc)))}to(n){n.ctx.drawImage(this.el,0,0,qc(this,Cc).width,qc(this,Cc).height)}handleResize(n){this.size={width:window.innerWidth,height:window.innerHeight}}static setCanvasStyle(n,e,t){const o=n.style,{zIndex:r=0,opacity:a=1}=e;o.position="fixed",o.top="0",o.left="0",o.zIndex=r.toString(),o.width=(t?t.width:n.width).toString()+"px",o.height=(t?t.height:n.height).toString()+"px",1!==a&&(o.opacity=a.toString()),o.pointerEvents="none"}static initCanvas(n){n||(n=document.createElement("canvas"));const e=n.getContext("2d");return{el:n,ctx:e}}static createOffscreenCanvas(){return new Fc}static clearCanvas(n,e){const{width:t,height:o}=e;n.clearRect(0,0,t,o)}};let Rc=Fc;Cc=new WeakMap,Ac=new WeakMap;class Lc{constructor(n,e,t,o=!0,r=!0,a={zIndex:0,opacity:1}){Mc(this,Bc,void 0),Mc(this,Tc,void 0),$c(this,Bc,new Rc(n,e,t,o)),Rc.setCanvasStyle(qc(this,Bc).el,a,{width:e,height:t}),$c(this,Tc,r?new Rc(void 0,e,t,o):null)}get size(){return qc(this,Bc).size}draw(n){var e;const t=null!=(e=qc(this,Tc))?e:qc(this,Bc);t.clear(),n(t.ctx,zc({},t.size))}render(){qc(this,Tc)&&(qc(this,Bc).clear(),qc(this,Tc).to(qc(this,Bc)))}handleResize(n){qc(this,Bc).handleResize(n),qc(this,Tc)&&qc(this,Tc).handleResize(n)}clear(){qc(this,Bc).clear(),qc(this,Tc)&&qc(this,Tc).clear()}}Bc=new WeakMap,Tc=new WeakMap;var Nc,Uc=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Vc=(n,e,t)=>(Uc(n,e,"read from private field"),t?t.call(n):e.get(n));class Kc{constructor(){var n,e,t,o;((n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)})(this,Nc,void 0),n=this,e=Nc,t=new Map,Uc(n,e,"write to private field"),o?o.call(n,t):e.set(n,t)}add(n,e){var t;Vc(this,Nc).has(n)||Vc(this,Nc).set(n,new Set),null==(t=Vc(this,Nc).get(n))||t.add(e)}start(n){if(Vc(this,Nc).has(n))for(const e of Vc(this,Nc).get(n))window.addEventListener(n,e)}stop(n){if(Vc(this,Nc).has(n))for(const e of Vc(this,Nc).get(n))window.removeEventListener(n,e)}startAll(){for(const n of Vc(this,Nc).keys())this.start(n)}stopAll(){for(const n of Vc(this,Nc).keys())this.stop(n)}clear(){Vc(this,Nc).clear()}}function Gc(n){return!!n.touches}Nc=new WeakMap;class Zc{static randomFloat(n,e){return Math.random()*(e-n)+n}static randomInt(n,e){return Math.floor(Zc.randomFloat(n,e))}static choice(n){const e=n.length;return n[Math.floor(e*Math.random())]}static color(n="0123456789ABCDEF"){return"#"+Zc.choice(n)+Zc.choice(n)+Zc.choice(n)+Zc.choice(n)+Zc.choice(n)+Zc.choice(n)}}var Hc,Wc,Xc,Yc,Qc,Jc,nl,el,tl,ol,rl,al,il,sl,cl,ll,pl,dl,ul,ml,fl,hl,gl,vl,bl,kl=Object.defineProperty,yl=Object.getOwnPropertySymbols,_l=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable,xl=(n,e,t)=>e in n?kl(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wl=(n,e)=>{for(var t in e||(e={}))_l.call(e,t)&&xl(n,t,e[t]);if(yl)for(var t of yl(e))El.call(e,t)&&xl(n,t,e[t]);return n},Cl=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Al=(n,e,t)=>(Cl(n,e,"read from private field"),t?t.call(n):e.get(n)),Bl=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Tl=(n,e,t,o)=>(Cl(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t),Pl=(n,e,t)=>(Cl(n,e,"access private method"),t);class Sl{constructor(n,e,t,o,r){Bl(this,Hc,void 0),Bl(this,Wc,void 0),Bl(this,Xc,void 0),this.size=t,this.color=o,Tl(this,Xc,0),Tl(this,Hc,r),Tl(this,Wc,e),this.position=wl({},n)}move(){var n,e,t,o;this.position.x=Math.sin(Al(this,Hc))*Al(this,Wc)+this.position.x,this.position.y=Math.cos(Al(this,Hc))*Al(this,Wc)+this.position.y+.3*Al(this,Xc),(n=this,e=Xc,{set _(o){Tl(n,e,o,t)},get _(){return Al(n,e,o)}})._++}shouleRemove(n){return this.position.x<0||this.position.x>n.width||this.position.y>n.height}}Hc=new WeakMap,Wc=new WeakMap,Xc=new WeakMap;Yc=new WeakMap;class Ol{static create(n,e,t,o,r,a){return new(this.shapeMap.get(n))(e,t,o,r,a)}}Ol.shapeMap=new Map([["star",class extends Sl{constructor(n,e,t,o,r){super(n,e,t,o,r),Bl(this,Yc,0)}draw(n,e){n.fillStyle=this.color,n.beginPath();const t=2*this.size,o=this.size;for(let e=0;e<5;e++)n.lineTo(Math.cos((18+72*e-Al(this,Yc))/180*Math.PI)*t+this.position.x,-Math.sin((18+72*e-Al(this,Yc))/180*Math.PI)*t+this.position.y),n.lineTo(Math.cos((54+72*e-Al(this,Yc))/180*Math.PI)*o+this.position.x,-Math.sin((54+72*e-Al(this,Yc))/180*Math.PI)*o+this.position.y);n.fill(),Tl(this,Yc,Al(this,Yc)+5)}}],["circle",class extends Sl{draw(n,e){n.fillStyle=this.color,n.beginPath(),n.arc(this.position.x,this.position.y,this.size,0,2*Math.PI),n.fill()}}]]);class Il{constructor(n,e,t,o){Bl(this,Qc,void 0),this.stopped=!1,Tl(this,Qc,new Set);for(let r=0;r<o;r++){const o=Ol.create(n,e,Zc.randomFloat(1,6),t,Zc.color("89ABCDEF"),Zc.randomFloat(Math.PI-1,Math.PI+1));Al(this,Qc).add(o)}}move(n){for(const e of Al(this,Qc))e.shouleRemove(n)?Al(this,Qc).delete(e):e.move();0===Al(this,Qc).size&&(this.stopped=!0)}draw(n,e){for(const t of Al(this,Qc))t.draw(n,e)}}Qc=new WeakMap;class Dl{constructor({shape:n="star",size:e=2,numParticles:t=10}={},o={}){Bl(this,sl),Bl(this,ll),Bl(this,dl),Bl(this,ml),Bl(this,hl),Bl(this,vl),Bl(this,Jc,void 0),Bl(this,nl,void 0),Bl(this,el,void 0),Bl(this,tl,null),Bl(this,ol,new Set),Bl(this,rl,!1),Bl(this,al,void 0),Bl(this,il,new Kc),Tl(this,Jc,n),Tl(this,nl,e),Tl(this,el,t),Tl(this,al,o),this.animate=this.animate.bind(this)}mount(n){Tl(this,tl,new Lc(n,window.innerWidth,window.innerHeight,!0,!0,Al(this,al))),Pl(this,sl,cl).call(this),function(n,{leftColor:e="#fff",rightColor:t="#444",leftBgColor:o="#35495e",rightBgColor:r="#00ffc0"}={}){console.log(`%c ${n} %c v0.3.3 a117dec %c`,`background: ${o}; padding: 2px; color: ${e}; font-weight: bold; text-transform: uppercase;`,`background: ${r}; padding: 2px; color: ${t}; font-weight: bold; text-transform: uppercase;`,"background: transparent")}("Theme Popper ð",{leftBgColor:"#ffb366"})}unmount(){Pl(this,ll,pl).call(this),Tl(this,rl,!1)}animate(){if(Tl(this,rl,!0),0===Al(this,ol).size)return Tl(this,rl,!1),void Al(this,tl).clear();requestAnimationFrame(this.animate);for(const n of Al(this,ol)){if(n.stopped)return void Al(this,ol).delete(n);n.move(Al(this,tl).size)}Al(this,tl).draw((n,e)=>{for(const t of Al(this,ol))t.draw(n,e)}),Al(this,tl).render()}}Jc=new WeakMap,nl=new WeakMap,el=new WeakMap,tl=new WeakMap,ol=new WeakMap,rl=new WeakMap,al=new WeakMap,il=new WeakMap,sl=new WeakSet,cl=function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?Al(this,il).add("touchstart",Pl(this,dl,ul).bind(this)):Al(this,il).add("mousedown",Pl(this,dl,ul).bind(this)),Al(this,il).add("visibilitychange",Pl(this,hl,gl).bind(this)),Al(this,il).add("resize",function(n,e,t){var o,r,a;void 0===e&&(e=50),void 0===t&&(t={});var i=null!=(o=t.isImmediate)&&o,s=null!=(r=t.callback)&&r,c=t.maxWait,l=Date.now(),p=[];function d(){if(void 0!==c){var n=Date.now()-l;if(n+e>=c)return c-n}return e}var u=function(){var e=[].slice.call(arguments),t=this;return new Promise((function(o,r){var c=i&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,l=Date.now(),!i){var o=n.apply(t,e);s&&s(o),p.forEach((function(n){return(0,n.resolve)(o)})),p=[]}}),d()),c){var u=n.apply(t,e);return s&&s(u),o(u)}p.push({resolve:o,reject:r})}))};return u.cancel=function(n){void 0!==a&&clearTimeout(a),p.forEach((function(e){return(0,e.reject)(n)})),p=[]},u}(Pl(this,ml,fl).bind(this),500)),Al(this,il).startAll()},ll=new WeakSet,pl=function(){Al(this,il).stopAll(),Al(this,il).clear()},dl=new WeakSet,ul=function(n){const e={x:Gc(n)?n.touches[0].clientX:n.clientX,y:Gc(n)?n.touches[0].clientY:n.clientY},t=new Il(Al(this,Jc),wl({},e),Al(this,nl),Al(this,el));Al(this,ol).add(t),Al(this,rl)||Pl(this,vl,bl).call(this)},ml=new WeakSet,fl=function(n){Al(this,tl).handleResize(n)},hl=new WeakSet,gl=function(n){Al(this,ol).clear(),Tl(this,rl,!1)},vl=new WeakSet,bl=function(){requestAnimationFrame(this.animate)};var zl={name:"CursorEffects",data:()=>({popper:new Dl({shape:"star",size:2},{opacity:1,zIndex:999999999})}),mounted(){this.popper.mount(this.$el)},beforeDestroy(){this.popper.unmount()}},jl=Object(gc.a)(zl,(function(){return(0,this._self._c)("canvas",{attrs:{id:"vuepress-canvas-cursor"}})}),[],!1,null,null,null).exports,ql={name:"ReadingProgress",data:()=>({readingTop:0,readingHeight:1,progressStyle:null,transform:void 0,running:!1}),watch:{$readingShow(){this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)}},mounted(){this.transform=this.getTransform(),this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)},beforeDestroy(){this.$readingShow&&window.removeEventListener("scroll",this.base)},methods:{base(){this.running||(this.running=!0,requestAnimationFrame(this.getReadingBase))},getReadingBase(){this.readingHeight=this.getReadingHeight()-this.getScreenHeight(),this.readingTop=this.getReadingTop(),this.progressStyle=this.getProgressStyle(),this.running=!1},getReadingHeight:()=>Math.max(document.body.scrollHeight,document.body.offsetHeight,0),getScreenHeight:()=>Math.max(window.innerHeight,document.documentElement.clientHeight,0),getReadingTop:()=>Math.max(window.pageYOffset,document.documentElement.scrollTop,0),getTransform(){const n=document.createElement("div");return["transform","-webkit-transform","-moz-transform","-o-transform","-ms-transform"].find(e=>e in n.style)||void 0},getProgressStyle(){const n=this.readingTop/this.readingHeight;switch(this.$readingShow){case"top":case"bottom":return this.transform?`${this.transform}: scaleX(${n})`:`width: ${100*n}%`;case"left":case"right":return this.transform?`${this.transform}: scaleY(${n})`:`height: ${100*n}%`;default:return null}}}},Ml=(t(239),Object(gc.a)(ql,(function(){var n=this._self._c;return n("ClientOnly",[this.$readingShow?n("div",{staticClass:"reading-progress",class:this.$readingShow},[n("div",{staticClass:"progress",style:this.progressStyle})]):this._e()])}),[],!1,null,"3640397f",null).exports),$l={props:{color:{required:!1,default:"rgb(66, 185, 131)"}}},Fl=(t(240),Object(gc.a)($l,(function(){return(0,this._self._c)("div",{staticClass:"spinner",style:{background:this.color}})}),[],!1,null,"1bbcb91a",null).exports);const Rl={name:"Mermaid",props:{id:{type:String,required:!1,default:()=>"diagram_"+Date.now()},graph:{type:String,required:!1}},data:()=>({svg:void 0}),computed:{graphData(){return this.graph?this.graph:this.$slots.default[0].text}},render(n){return void 0===this.svg?n("Loading"):n("div",{class:["mermaid-diagram"],domProps:{innerHTML:this.svg,style:"width: 100%"}})},mounted(){t.e(68).then(t.t.bind(null,329,7)).then(n=>{n.initialize({startOnLoad:!0}),n.render(this.id,this.graphData,n=>{this.svg=n})})},components:{Loading:Fl}};var Ll=[({Vue:n,options:e,router:t,siteData:o})=>{},({Vue:n,options:e,router:t,siteData:o})=>{o.pages.map(n=>{const{frontmatter:{date:e,author:t}}=n;"string"==typeof e&&"Z"===e.charAt(e.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return`${n.getUTCFullYear()}-${wc(n.getUTCMonth()+1)}-${wc(n.getUTCDate())} ${wc(n.getUTCHours())}:${wc(n.getUTCMinutes())}:${wc(n.getUTCSeconds())}`}(e)),t?n.author=t:o.themeConfig.author&&(n.author=o.themeConfig.author)}),n.mixin(xc)},{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{},({router:n})=>{"undefined"!=typeof window&&function(){var n=document.createElement("script"),e=window.location.protocol.split(":")[0];n.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()},({Vue:n})=>{n.component("CursorEffects",jl)},({Vue:n})=>{n.component(Ml.name,Ml),n.mixin({computed:{$readingShow(){return this.$page.frontmatter.readingShow}}})},({router:n})=>{"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?f8fd5c4e21ca384b4785396a87bcc468";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),n.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))},({Vue:n})=>{n.component(Rl.name,Rl)}],Nl=["CursorEffects","ReadingProgress","PageInfo","BlockToggle"];class Ul extends class{constructor(){this.store=new Kt({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Kt.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Ul.prototype,{getPageAsyncComponent:as,getLayoutAsyncComponent:is,getAsyncComponent:ss,getVueComponent:cs});var Vl={install(n){const e=new Ul;n.$vuepress=e,n.prototype.$vuepress=e}};function Kl(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var Gl={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return ps("pageKey",e),Kt.component(e)||Kt.component(e,as(e)),Kt.component(e)?n(e):n("")}},Zl={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},Hl={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Wl=(t(241),t(242),Object(gc.a)(Hl,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Xl={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Kt.config.productionTip=!1,Kt.use(Vi),Kt.use(Vl),Kt.mixin(function(n,e,t=Kt){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const o=new(n(t.$vuepress.$get("siteData"))),r=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(o)),a={};return Object.keys(r).reduce((n,e)=>(e.startsWith("$")&&(n[e]=r[e].get),n),a),{computed:a}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const o in n)"/"===o?t=n[o]:0===this.$page.path.indexOf(o)&&(e=n[o]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,o=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?o?o+" | "+t:t:o||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const o=n[t];if(o.path.toLowerCase()===e.toLowerCase())return o}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},kc)),Kt.component("Content",Gl),Kt.component("ContentSlotsDistributor",Zl),Kt.component("OutboundLink",Wl),Kt.component("ClientOnly",Xl),Kt.component("Layout",is("Layout")),Kt.component("NotFound",is("NotFound")),Kt.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.5",hash:"9db6ce9"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:kc.routerBase||kc.base,t=new Vi({base:e,mode:"history",fallback:!1,routes:bc,scrollBehavior:(n,e,t)=>t||(n.hash?!Kt.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,o)=>{if(Kl(n,e.path))o();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";Kl(n,t)?o(t):o()}else o();else{const t=e.path+"/",r=e.path+".html";Kl(n,r)?o(r):Kl(n,t)?o(t):o()}})}(t);const o={};try{await Promise.all(Ll.filter(n=>"function"==typeof n).map(e=>e({Vue:Kt,options:o,router:t,siteData:kc,isServer:n})))}catch(n){console.error(n)}return{app:new Kt(Object.assign(o,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Nl.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);