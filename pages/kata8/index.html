<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一个kata容器的创建示例 | hff</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/logo.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <script language="javascript" type="text/javascript" src="/js/pgmanor-self.js"></script>
    <meta name="description" content="k8s: 1.17.2
containerd: 1.4.6
kata: 2.4.0">
    <meta name="twitter:title" content="一个kata容器的创建示例">
    <meta name="twitter:description" content="k8s: 1.17.2
containerd: 1.4.6
kata: 2.4.0">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html">
    <meta property="og:type" content="article">
    <meta property="og:title" content="一个kata容器的创建示例">
    <meta property="og:description" content="k8s: 1.17.2
containerd: 1.4.6
kata: 2.4.0">
    <meta property="og:url" content="https://fangfenghuang.github.io/01.%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/03.kubernetes/303.kata-containers/01.kata%E5%88%9D%E8%AF%86/08.%E4%B8%80%E4%B8%AAkata%E5%AE%B9%E5%99%A8%E7%9A%84%E5%88%9B%E5%BB%BA%E7%A4%BA%E4%BE%8B.html">
    <meta property="og:site_name" content="fangfenghuang">
    <meta property="article:published_time" content="2022-07-27T14:56:49.000Z">
    <meta property="article:tag" content="null">
    <meta itemprop="name" content="一个kata容器的创建示例">
    <meta itemprop="description" content="k8s: 1.17.2
containerd: 1.4.6
kata: 2.4.0">
    <meta name="keywords" content="go,python,c,c++,vue,shell,php">
    <meta name="baidu-site-verification" content="code-LTKHwOecxI">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.3e92b113.css" as="style"><link rel="preload" href="/assets/js/app.8f006922.js" as="script"><link rel="preload" href="/assets/js/2.22dca872.js" as="script"><link rel="preload" href="/assets/js/42.d44d3ffb.js" as="script"><link rel="prefetch" href="/assets/js/10.6dbd03e8.js"><link rel="prefetch" href="/assets/js/11.5e9d4442.js"><link rel="prefetch" href="/assets/js/12.acb42216.js"><link rel="prefetch" href="/assets/js/13.062e3194.js"><link rel="prefetch" href="/assets/js/14.3f50b389.js"><link rel="prefetch" href="/assets/js/15.f4edcbd3.js"><link rel="prefetch" href="/assets/js/16.506888b5.js"><link rel="prefetch" href="/assets/js/17.fce4526e.js"><link rel="prefetch" href="/assets/js/18.5a7f9410.js"><link rel="prefetch" href="/assets/js/19.08465d51.js"><link rel="prefetch" href="/assets/js/20.98fb664c.js"><link rel="prefetch" href="/assets/js/21.4ff7b1e7.js"><link rel="prefetch" href="/assets/js/22.18a1b0a4.js"><link rel="prefetch" href="/assets/js/23.3dc3fc2b.js"><link rel="prefetch" href="/assets/js/24.47ce8269.js"><link rel="prefetch" href="/assets/js/25.133e8693.js"><link rel="prefetch" href="/assets/js/26.226893ac.js"><link rel="prefetch" href="/assets/js/27.a2f30984.js"><link rel="prefetch" href="/assets/js/28.b65f1cd9.js"><link rel="prefetch" href="/assets/js/29.01deddf8.js"><link rel="prefetch" href="/assets/js/3.759551b0.js"><link rel="prefetch" href="/assets/js/30.8c14521c.js"><link rel="prefetch" href="/assets/js/31.78e76f31.js"><link rel="prefetch" href="/assets/js/32.bde44dbe.js"><link rel="prefetch" href="/assets/js/33.8c01e4f4.js"><link rel="prefetch" href="/assets/js/34.148e5980.js"><link rel="prefetch" href="/assets/js/35.85e8117c.js"><link rel="prefetch" href="/assets/js/36.ebde3125.js"><link rel="prefetch" href="/assets/js/37.11468077.js"><link rel="prefetch" href="/assets/js/38.58b8d85a.js"><link rel="prefetch" href="/assets/js/39.ae95ff59.js"><link rel="prefetch" href="/assets/js/4.fb5fef80.js"><link rel="prefetch" href="/assets/js/40.36733902.js"><link rel="prefetch" href="/assets/js/41.9b846970.js"><link rel="prefetch" href="/assets/js/43.b861cc49.js"><link rel="prefetch" href="/assets/js/44.49725d19.js"><link rel="prefetch" href="/assets/js/45.56896254.js"><link rel="prefetch" href="/assets/js/46.ceb92d03.js"><link rel="prefetch" href="/assets/js/47.53943c70.js"><link rel="prefetch" href="/assets/js/48.7cb2a485.js"><link rel="prefetch" href="/assets/js/49.fdda30d1.js"><link rel="prefetch" href="/assets/js/5.3ff92d1d.js"><link rel="prefetch" href="/assets/js/50.12ab4828.js"><link rel="prefetch" href="/assets/js/51.982cc4ef.js"><link rel="prefetch" href="/assets/js/52.e2ccdabe.js"><link rel="prefetch" href="/assets/js/53.b13c3384.js"><link rel="prefetch" href="/assets/js/54.d19130a3.js"><link rel="prefetch" href="/assets/js/55.fc584fda.js"><link rel="prefetch" href="/assets/js/56.db773209.js"><link rel="prefetch" href="/assets/js/57.9e058cdf.js"><link rel="prefetch" href="/assets/js/58.9c7a17bf.js"><link rel="prefetch" href="/assets/js/59.4f4b3bc0.js"><link rel="prefetch" href="/assets/js/6.8b7ae4b3.js"><link rel="prefetch" href="/assets/js/60.ebc6775f.js"><link rel="prefetch" href="/assets/js/61.76966a3f.js"><link rel="prefetch" href="/assets/js/62.5ece8fc3.js"><link rel="prefetch" href="/assets/js/63.260ce721.js"><link rel="prefetch" href="/assets/js/64.36039818.js"><link rel="prefetch" href="/assets/js/65.ed6d4c1e.js"><link rel="prefetch" href="/assets/js/66.22992592.js"><link rel="prefetch" href="/assets/js/67.b8c973cc.js"><link rel="prefetch" href="/assets/js/68.940c2f4b.js"><link rel="prefetch" href="/assets/js/69.443fc645.js"><link rel="prefetch" href="/assets/js/7.ad948ccb.js"><link rel="prefetch" href="/assets/js/70.0b5afd7c.js"><link rel="prefetch" href="/assets/js/71.5550a338.js"><link rel="prefetch" href="/assets/js/72.c93cd7ad.js"><link rel="prefetch" href="/assets/js/73.0aaf4b9a.js"><link rel="prefetch" href="/assets/js/74.9efa82e5.js"><link rel="prefetch" href="/assets/js/75.f790db09.js"><link rel="prefetch" href="/assets/js/76.e74c5da7.js"><link rel="prefetch" href="/assets/js/77.3ae4a800.js"><link rel="prefetch" href="/assets/js/78.2626edf2.js"><link rel="prefetch" href="/assets/js/79.b0170e47.js"><link rel="prefetch" href="/assets/js/8.0ff2779d.js"><link rel="prefetch" href="/assets/js/80.bf7fa1f0.js"><link rel="prefetch" href="/assets/js/81.70e4d87b.js"><link rel="prefetch" href="/assets/js/82.39aaeec9.js"><link rel="prefetch" href="/assets/js/83.f1068b1a.js"><link rel="prefetch" href="/assets/js/84.cc72b220.js"><link rel="prefetch" href="/assets/js/85.5424faa1.js"><link rel="prefetch" href="/assets/js/86.94ec5ced.js"><link rel="prefetch" href="/assets/js/87.f3fd6943.js"><link rel="prefetch" href="/assets/js/88.06bd6e5d.js"><link rel="prefetch" href="/assets/js/89.8dafa3b8.js"><link rel="prefetch" href="/assets/js/9.414c2cf4.js"><link rel="prefetch" href="/assets/js/90.7d7493c8.js"><link rel="prefetch" href="/assets/js/91.e80e56cb.js"><link rel="prefetch" href="/assets/js/92.166c0a20.js"><link rel="prefetch" href="/assets/js/93.b8eae48b.js"><link rel="prefetch" href="/assets/js/94.d9451de8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3e92b113.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="hff" class="logo"> <span class="site-name can-hide">hff</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/tech/" class="nav-link">学习</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活" class="dropdown-title"><a href="/life/" class="link-title">生活</a> <span class="title" style="display:none;">生活</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ythx/" class="nav-link">养桃日记</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/categories/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/fangfenghuang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/qq_26572567" target="_blank" rel="noopener noreferrer" class="nav-link external">
  scdn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zhihu.com/people/huangfangfeng-20" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  linkin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><a href="/books/" class="link-title">阅读</a> <span class="title" style="display:none;">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/" class="nav-link">书单</a></li><li class="dropdown-subitem"><a href="/pages/dianzishu/" class="nav-link">电子书</a></li><li class="dropdown-subitem"><a href="/pages/yzbook/" class="nav-link">优质博客</a></li></ul></li></ul></div></div> <a href="https://github.com/fangfenghuang/fangfenghuang.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/bg.jpeg"> <div class="blogger-info"><h3>hff</h3> <span>一个有思想的程序猿</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/tech/" class="nav-link">学习</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活" class="dropdown-title"><a href="/life/" class="link-title">生活</a> <span class="title" style="display:none;">生活</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ythx/" class="nav-link">养桃日记</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/categories/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/fangfenghuang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/qq_26572567" target="_blank" rel="noopener noreferrer" class="nav-link external">
  scdn
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.zhihu.com/people/huangfangfeng-20" target="_blank" rel="noopener noreferrer" class="nav-link external">
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  linkin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><a href="/books/" class="link-title">阅读</a> <span class="title" style="display:none;">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/books/" class="nav-link">书单</a></li><li class="dropdown-subitem"><a href="/pages/dianzishu/" class="nav-link">电子书</a></li><li class="dropdown-subitem"><a href="/pages/yzbook/" class="nav-link">优质博客</a></li></ul></li></ul></div></div> <a href="https://github.com/fangfenghuang/fangfenghuang.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>常用总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>踩坑记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/k8s01/" class="sidebar-link">k8s基础</a></li><li><a href="/pages/k8s02/" class="sidebar-link">k8s存储</a></li><li><a href="/pages/k8s03/" class="sidebar-link">k8s网络</a></li><li><a href="/pages/k8s04/" class="sidebar-link">pod cgroup和资源限制</a></li><li><a href="/pages/k8s05/" class="sidebar-link">流量限制</a></li><li><a href="/pages/k8s06/" class="sidebar-link">网络策略calico</a></li><li><a href="/pages/k8s07/" class="sidebar-link">grafana和promuthues</a></li><li><a href="/pages/k8s08/" class="sidebar-link">etcd节点down机数据恢复</a></li><li><a href="/pages/k8s09/" class="sidebar-link">ceph</a></li><li><a href="/pages/k8s10/" class="sidebar-link">chrony</a></li><li><a href="/pages/k8s11/" class="sidebar-link">crd operator</a></li><li><a href="/pages/k8s12/" class="sidebar-link">cri之containerd shimv2</a></li><li><a href="/pages/harbor/" class="sidebar-link">harbor</a></li><li><a href="/pages/k8s14/" class="sidebar-link">helm chart</a></li><li><a href="/pages/Loongnix/" class="sidebar-link">Loongnix mips64</a></li><li><a href="/pages/k8s16/" class="sidebar-link">openebs-lvm-localpv</a></li><li><a href="/pages/ingressroute/" class="sidebar-link">traefik-IngressRoute</a></li><li><a href="/pages/devops/" class="sidebar-link">DevOps</a></li><li><a href="/pages/serverless/" class="sidebar-link">Serverless</a></li><li><a href="/pages/k8s20/" class="sidebar-link">k8s容器故障处理</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>k8s面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>kubevirt</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>kata-containers</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading open"><span>kata初识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/kata1/" class="sidebar-link">kata基本原理与架构</a></li><li><a href="/pages/kata2/" class="sidebar-link">kata网络和存储文件系统分析</a></li><li><a href="/pages/kata3/" class="sidebar-link">kata cgroup及资源限制</a></li><li><a href="/pages/kata4/" class="sidebar-link">guest kernel和guestos</a></li><li><a href="/pages/kata5/" class="sidebar-link">kata-monitor监控</a></li><li><a href="/pages/kata6/" class="sidebar-link">kata使用限制</a></li><li><a href="/pages/kata7/" class="sidebar-link">其他特性</a></li><li><a href="/pages/kata8/" aria-current="page" class="active sidebar-link">一个kata容器的创建示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/kata8/#crictl-pods" class="sidebar-link">crictl pods</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#crictl-ps" class="sidebar-link">crictl ps</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#crictl-stats" class="sidebar-link">crictl stats</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#获取sandboxid" class="sidebar-link">获取sandboxID</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#宿主机进程" class="sidebar-link">宿主机进程</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#ip-netns" class="sidebar-link">ip netns</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#宿主机目录" class="sidebar-link">宿主机目录</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#vm-pid" class="sidebar-link">vm_pid</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#df-h" class="sidebar-link">df -h</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#lsblk" class="sidebar-link">lsblk</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#ip-addr" class="sidebar-link">ip addr</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#mount" class="sidebar-link">mount</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#lsblk-2" class="sidebar-link">lsblk</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看挂载了什么分区" class="sidebar-link">看看挂载了什么分区</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#ls都没有-只能echo-代替。" class="sidebar-link">ls都没有，只能echo * 代替。</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#uname-a" class="sidebar-link">uname -a</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看激活了什么内核模块" class="sidebar-link">看看激活了什么内核模块</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看都有什么进程" class="sidebar-link">看看都有什么进程</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看有多少内存" class="sidebar-link">看看有多少内存</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看内核启动参数" class="sidebar-link">看看内核启动参数</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#看看systemctl的服务" class="sidebar-link">看看systemctl的服务</a></li><li class="sidebar-sub-header level2"><a href="/pages/kata8/#cpuinfo-meminfo-2c" class="sidebar-link">cpuinfo/meminfo  (2C)</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>kata部署</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>kata应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>kataV3.0</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>日志采集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>GPU</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>golang</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>虚拟化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维脚本</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软考高项</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/tech/#技术杂谈" data-v-06225672>技术杂谈</a></li><li data-v-06225672><a href="/tech/#kubernetes" data-v-06225672>kubernetes</a></li><li data-v-06225672><a href="/tech/#kata-containers" data-v-06225672>kata-containers</a></li><li data-v-06225672><a href="/tech/#kata初识" data-v-06225672>kata初识</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/fangfenghuang" target="_blank" title="作者" class="beLink" data-v-06225672>hff</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-07-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">一个kata容器的创建示例<span class="title-tag">原创</span></h1>  <div class="theme-vdoing-content content__default"><h1 id="环境"><a href="#环境" class="header-anchor">#</a> 环境</h1> <blockquote><p>k8s: 1.17.2
containerd: 1.4.6
kata: 2.4.0</p></blockquote> <h1 id="创建一个kata容器"><a href="#创建一个kata容器" class="header-anchor">#</a> 创建一个kata容器</h1> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
      <span class="token key atrule">limits</span><span class="token punctuation">:</span>
        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1Gi
      <span class="token key atrule">requests</span><span class="token punctuation">:</span>
        <span class="token key atrule">cpu</span><span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span>
        <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1Gi

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># kubectl get pod -o wide</span>
NAME                              READY   STATUS    RESTARTS   AGE   IP               NODE                    NOMINATED NODE   READINESS GATES
test-runc                         <span class="token number">1</span>/1     Running   <span class="token number">0</span>          19h   <span class="token number">10.241</span>.102.169   localhost.localdomain   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># kubectl top pod</span>
NAME                              CPU<span class="token punctuation">(</span>cores<span class="token punctuation">)</span>   MEMORY<span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
test-kata                         0m           2Mi
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># kubectl describe node | grep kata</span>
  default                     test-kata                                                1250m <span class="token punctuation">(</span><span class="token number">16</span>%<span class="token punctuation">)</span>   1250m <span class="token punctuation">(</span><span class="token number">16</span>%<span class="token punctuation">)</span>  1184Mi <span class="token punctuation">(</span><span class="token number">18</span>%<span class="token punctuation">)</span>     1184Mi <span class="token punctuation">(</span><span class="token number">18</span>%<span class="token punctuation">)</span>   64m
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="crictl-pods"><a href="#crictl-pods" class="header-anchor">#</a> crictl pods</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># crictl pods</span>
POD ID              CREATED             STATE               NAME                                                    NAMESPACE              ATTEMPT             RUNTIME
3871d0c8108c6       About an hour ago   Ready               test-kata                                               default                <span class="token number">0</span>                   kata-qemu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="crictl-ps"><a href="#crictl-ps" class="header-anchor">#</a> crictl ps</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># crictl ps</span>
CONTAINER           IMAGE               CREATED             STATE               NAME                                   ATTEMPT             POD ID
a83ce7bc82f78       e39e5c33c2d50       About an hour ago   Running             pod1                                   <span class="token number">0</span>                   3871d0c8108c6

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="crictl-stats"><a href="#crictl-stats" class="header-anchor">#</a> crictl stats</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># crictl stats a83ce7bc82f78</span>
CONTAINER           CPU %               MEM                 DISK                INODES
a83ce7bc82f78       <span class="token number">0.00</span>                <span class="token number">3</span>.056MB             <span class="token number">16</span>.38kB             <span class="token number">14</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="获取sandboxid"><a href="#获取sandboxid" class="header-anchor">#</a> 获取sandboxID</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># crictl inspect a83ce7bc82f78 | grep sandboxID</span>
    <span class="token string">&quot;sandboxID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985&quot;</span>,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="宿主机进程"><a href="#宿主机进程" class="header-anchor">#</a> 宿主机进程</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985</span>
root      <span class="token number">2251</span>   <span class="token number">429</span>  <span class="token number">0</span> <span class="token number">11</span>:32 pts/2    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985
root     <span class="token number">23520</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">10</span>:24 ?        00:00:01 /opt/kata/bin/containerd-shim-kata-v2 -namespace k8s.io -address /run/containerd/containerd.sock -publish-binary /usr/bin/containerd -id 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985
root     <span class="token number">23528</span> <span class="token number">23520</span>  <span class="token number">0</span> <span class="token number">10</span>:24 ?        00:00:00 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o <span class="token assign-left variable">cache</span><span class="token operator">=</span>auto -o no_posix_lock -o <span class="token assign-left variable">source</span><span class="token operator">=</span>/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd<span class="token operator">=</span><span class="token number">3</span> -f --thread-pool-size<span class="token operator">=</span><span class="token number">1</span> -o announce_submounts
root     <span class="token number">23535</span>     <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">10</span>:24 ?        00:00:09 /opt/kata/bin/qemu-system-x86_64 -name sandbox-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985 -uuid 2cfc6a6d-63ab-41aa-ac4b-18cb10377791 -machine q35,accel<span class="token operator">=</span>kvm,kernel_irqchip<span class="token operator">=</span>on,nvdimm<span class="token operator">=</span>on -cpu host,pmu<span class="token operator">=</span>off -qmp unix:/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/qmp.sock,server<span class="token operator">=</span>on,wait<span class="token operator">=</span>off -m 2048M,slots<span class="token operator">=</span><span class="token number">10</span>,maxmem<span class="token operator">=</span>8773M -device pci-bridge,bus<span class="token operator">=</span>pcie.0,id<span class="token operator">=</span>pci-bridge-0,chassis_nr<span class="token operator">=</span><span class="token number">1</span>,shpc<span class="token operator">=</span>off,addr<span class="token operator">=</span><span class="token number">2</span>,io-reserve<span class="token operator">=</span>4k,mem-reserve<span class="token operator">=</span>1m,pref64-reserve<span class="token operator">=</span>1m -device virtio-serial-pci,disable-modern<span class="token operator">=</span>false,id<span class="token operator">=</span>serial0 -device virtconsole,chardev<span class="token operator">=</span>charconsole0,id<span class="token operator">=</span>console0 -chardev socket,id<span class="token operator">=</span>charconsole0,path<span class="token operator">=</span>/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/console.sock,server<span class="token operator">=</span>on,wait<span class="token operator">=</span>off -device nvdimm,id<span class="token operator">=</span>nv0,memdev<span class="token operator">=</span>mem0,unarmed<span class="token operator">=</span>on -object memory-backend-file,id<span class="token operator">=</span>mem0,mem-path<span class="token operator">=</span>/opt/kata/share/kata-containers/kata-clearlinux-latest.image,size<span class="token operator">=</span><span class="token number">134217728</span>,readonly<span class="token operator">=</span>on -device virtio-scsi-pci,id<span class="token operator">=</span>scsi0,disable-modern<span class="token operator">=</span>false -object rng-random,id<span class="token operator">=</span>rng0,filename<span class="token operator">=</span>/dev/urandom -device virtio-rng-pci,rng<span class="token operator">=</span>rng0 -device vhost-vsock-pci,disable-modern<span class="token operator">=</span>false,vhostfd<span class="token operator">=</span><span class="token number">3</span>,id<span class="token operator">=</span>vsock-4001198526,guest-cid<span class="token operator">=</span><span class="token number">4001198526</span> -chardev socket,id<span class="token operator">=</span>char-93f9924bc919f096,path<span class="token operator">=</span>/run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/vhost-fs.sock -device vhost-user-fs-pci,chardev<span class="token operator">=</span>char-93f9924bc919f096,tag<span class="token operator">=</span>kataShared -netdev tap,id<span class="token operator">=</span>network-0,vhost<span class="token operator">=</span>on,vhostfds<span class="token operator">=</span><span class="token number">4</span>,fds<span class="token operator">=</span><span class="token number">5</span> -device <span class="token assign-left variable">driver</span><span class="token operator">=</span>virtio-net-pci,netdev<span class="token operator">=</span>network-0,mac<span class="token operator">=</span>ea:e4:96:23:5e:9f,disable-modern<span class="token operator">=</span>false,mq<span class="token operator">=</span>on,vectors<span class="token operator">=</span><span class="token number">4</span> -rtc <span class="token assign-left variable">base</span><span class="token operator">=</span>utc,driftfix<span class="token operator">=</span>slew,clock<span class="token operator">=</span>host -global kvm-pit.lost_tick_policy<span class="token operator">=</span>discard -vga none -no-user-config -nodefaults -nographic --no-reboot -daemonize -object memory-backend-file,id<span class="token operator">=</span>dimm1,size<span class="token operator">=</span>2048M,mem-path<span class="token operator">=</span>/dev/shm,share<span class="token operator">=</span>on -numa node,memdev<span class="token operator">=</span>dimm1 -kernel /opt/kata/share/kata-containers/vmlinux-5.15.26-90 -append <span class="token assign-left variable">tsc</span><span class="token operator">=</span>reliable no_timer_check rcupdate.rcu_expedited<span class="token operator">=</span><span class="token number">1</span> i8042.direct<span class="token operator">=</span><span class="token number">1</span> i8042.dumbkbd<span class="token operator">=</span><span class="token number">1</span> i8042.nopnp<span class="token operator">=</span><span class="token number">1</span> i8042.noaux<span class="token operator">=</span><span class="token number">1</span> noreplace-smp <span class="token assign-left variable">reboot</span><span class="token operator">=</span>k <span class="token assign-left variable">console</span><span class="token operator">=</span>hvc0 <span class="token assign-left variable">console</span><span class="token operator">=</span>hvc1 cryptomgr.notests net.ifnames<span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">pci</span><span class="token operator">=</span>lastbus<span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">root</span><span class="token operator">=</span>/dev/pmem0p1 <span class="token assign-left variable">rootflags</span><span class="token operator">=</span>dax,data<span class="token operator">=</span>ordered,errors<span class="token operator">=</span>remount-ro ro <span class="token assign-left variable">rootfstype</span><span class="token operator">=</span>ext4 quiet systemd.show_status<span class="token operator">=</span>false <span class="token assign-left variable">panic</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">nr_cpus</span><span class="token operator">=</span><span class="token number">8</span> systemd.unit<span class="token operator">=</span>kata-containers.target systemd.mask<span class="token operator">=</span>systemd-networkd.service systemd.mask<span class="token operator">=</span>systemd-networkd.socket scsi_mod.scan<span class="token operator">=</span>none agent.debug_console agent.debug_console_vport<span class="token operator">=</span><span class="token number">1026</span> -pidfile /run/vc/vm/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/pid -smp <span class="token number">1</span>,cores<span class="token operator">=</span><span class="token number">1</span>,threads<span class="token operator">=</span><span class="token number">1</span>,sockets<span class="token operator">=</span><span class="token number">8</span>,maxcpus<span class="token operator">=</span><span class="token number">8</span>
root     <span class="token number">23543</span> <span class="token number">23528</span>  <span class="token number">0</span> <span class="token number">10</span>:24 ?        00:00:01 /opt/kata/libexec/kata-qemu/virtiofsd --syslog -o <span class="token assign-left variable">cache</span><span class="token operator">=</span>auto -o no_posix_lock -o <span class="token assign-left variable">source</span><span class="token operator">=</span>/run/kata-containers/shared/sandboxes/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/shared --fd<span class="token operator">=</span><span class="token number">3</span> -f --thread-pool-size<span class="token operator">=</span><span class="token number">1</span> -o announce_submounts
root     <span class="token number">27463</span> <span class="token number">17898</span>  <span class="token number">0</span> <span class="token number">10</span>:26 pts/0    00:00:00 kata-runtime <span class="token builtin class-name">exec</span> 3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="ip-netns"><a href="#ip-netns" class="header-anchor">#</a> ip netns</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  ip a</span>
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope <span class="token function">host</span>
       valid_lft forever preferred_lft forever
<span class="token number">2</span>: tunl0@NONE: <span class="token operator">&lt;</span>NOARP<span class="token operator">&gt;</span> mtu <span class="token number">1480</span> qdisc noop state DOWN group default qlen <span class="token number">1000</span>
    link/ipip <span class="token number">0.0</span>.0.0 brd <span class="token number">0.0</span>.0.0
<span class="token number">4</span>: eth0@if17552: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1440</span> qdisc noqueue state UP group default qlen <span class="token number">1000</span>
    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
    inet <span class="token number">10.241</span>.103.177/32 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
<span class="token number">5</span>: tap0_kata: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1440</span> qdisc mq state UNKNOWN group default qlen <span class="token number">1000</span>
    link/ether a2:a5:96:5b:90:23 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::a0a5:96ff:fe5b:9023/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ip netns exec cni-75b072ca-fd5a-ceda-617d-9ce0b606ac5e  tc -s qdisc</span>
qdisc noqueue <span class="token number">0</span>: dev lo root refcnt <span class="token number">2</span>
 Sent <span class="token number">0</span> bytes <span class="token number">0</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>
qdisc noqueue <span class="token number">0</span>: dev eth0 root refcnt <span class="token number">2</span>
 Sent <span class="token number">0</span> bytes <span class="token number">0</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>
qdisc ingress ffff: dev eth0 parent ffff:fff1 ----------------
 Sent <span class="token number">468</span> bytes <span class="token number">7</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>
qdisc mq <span class="token number">0</span>: dev tap0_kata root
 Sent <span class="token number">1222</span> bytes <span class="token number">15</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>
qdisc pfifo_fast <span class="token number">0</span>: dev tap0_kata parent :1 bands <span class="token number">3</span> priomap  <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span>
 Sent <span class="token number">1222</span> bytes <span class="token number">15</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>
qdisc ingress ffff: dev tap0_kata parent ffff:fff1 ----------------
 Sent <span class="token number">992</span> bytes <span class="token number">16</span> pkt <span class="token punctuation">(</span>dropped <span class="token number">0</span>, overlimits <span class="token number">0</span> requeues <span class="token number">0</span><span class="token punctuation">)</span>
 backlog 0b 0p requeues <span class="token number">0</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="宿主机目录"><a href="#宿主机目录" class="header-anchor">#</a> 宿主机目录</h2> <blockquote><p>/run/kata-containers/shared/sandboxes/
/run/vc/vm/
/run/vc/sbs/
/sys/fs/cgroup/(memory、devices、cpu,cpuacct...)
/sys/fs/cgroup/systemd/kata_overhead/
/app/docker/containerd/</p></blockquote> <h2 id="vm-pid"><a href="#vm-pid" class="header-anchor">#</a> vm_pid</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/23535/status</span>
Name:   qemu-system-x86
Umask:  0027
State:  S <span class="token punctuation">(</span>sleeping<span class="token punctuation">)</span>
Tgid:   <span class="token number">23535</span>
Ngid:   <span class="token number">0</span>
Pid:    <span class="token number">23535</span>
PPid:   <span class="token number">1</span>
TracerPid:      <span class="token number">0</span>
Uid:    <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0</span>
Gid:    <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0</span>
FDSize: <span class="token number">128</span>
Groups:
VmPeak:  <span class="token number">3659100</span> kB
VmSize:  <span class="token number">3659100</span> kB
VmLck:         <span class="token number">0</span> kB
VmPin:         <span class="token number">0</span> kB
VmHWM:    <span class="token number">152104</span> kB
VmRSS:    <span class="token number">152104</span> kB
RssAnon:           <span class="token number">14288</span> kB
RssFile:           <span class="token number">35956</span> kB
RssShmem:         <span class="token number">101860</span> kB
VmData:   <span class="token number">326316</span> kB
VmStk:       <span class="token number">132</span> kB
VmExe:      <span class="token number">8496</span> kB
VmLib:         <span class="token number">0</span> kB
VmPTE:       <span class="token number">652</span> kB
VmSwap:        <span class="token number">0</span> kB
Threads:        <span class="token number">5</span>
SigQ:   <span class="token number">0</span>/30632
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000010002240
SigIgn: 0000000000381000
SigCgt: 0000000180004243
CapInh: 0000000000000000
CapPrm: 0000001fffffffff
CapEff: 0000001fffffffff
CapBnd: 0000001fffffffff
CapAmb: 0000000000000000
NoNewPrivs:     <span class="token number">0</span>
Seccomp:        <span class="token number">0</span>
Speculation_Store_Bypass:       thread vulnerable
Cpus_allowed:   ff
Cpus_allowed_list:      <span class="token number">0</span>-7
Mems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001
Mems_allowed_list:      <span class="token number">0</span>
voluntary_ctxt_switches:        <span class="token number">1769</span>
nonvoluntary_ctxt_switches:     <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h1 id="进入kata容器"><a href="#进入kata容器" class="header-anchor">#</a> 进入kata容器</h1> <h2 id="df-h"><a href="#df-h" class="header-anchor">#</a> df -h</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>
root@hostpath-kata-7949f86f8c-8gfqj:/<span class="token comment"># df -h</span>

Filesystem      Size  Used Avail Use% Mounted on

none            494G   28G  466G   <span class="token number">6</span>% /

tmpfs            64M     <span class="token number">0</span>   64M   <span class="token number">0</span>% /dev

tmpfs           992M     <span class="token number">0</span>  992M   <span class="token number">0</span>% /sys/fs/cgroup

none            494G   28G  466G   <span class="token number">6</span>% /hff

kataShared      494G   28G  466G   <span class="token number">6</span>% /etc/hosts

shm             992M     <span class="token number">0</span>  992M   <span class="token number">0</span>% /dev/shm

tmpfs           992M   12K  992M   <span class="token number">1</span>% /run/secrets/kubernetes.io/serviceaccount
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="lsblk"><a href="#lsblk" class="header-anchor">#</a> lsblk</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>
root@hostpath-kata-7949f86f8c-8gfqj:/<span class="token comment"># lsblk</span>

NAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT

pmem0     <span class="token number">259</span>:0    <span class="token number">0</span>  126M  <span class="token number">1</span> disk

`-pmem0p1 <span class="token number">259</span>:1    <span class="token number">0</span>  124M  <span class="token number">1</span> part
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ip-addr"><a href="#ip-addr" class="header-anchor">#</a> ip addr</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/ <span class="token comment"># ip addr</span>
root@test-kata:/<span class="token comment"># ip a</span>
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope <span class="token function">host</span>
       valid_lft forever preferred_lft forever
<span class="token number">2</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1440</span> qdisc fq state UP group default qlen <span class="token number">1000</span>
    link/ether ea:e4:96:23:5e:9f brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">10.241</span>.103.177/32 brd <span class="token number">10.241</span>.103.177 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::e8e4:96ff:fe23:5e9f/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="mount"><a href="#mount" class="header-anchor">#</a> mount</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>root@test-kata:/<span class="token comment"># mount</span>
none on / <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
proc on /proc <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
tmpfs on /dev <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,size<span class="token operator">=</span>65536k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
devpts on /dev/pts <span class="token builtin class-name">type</span> devpts <span class="token punctuation">(</span>rw,nosuid,noexec,relatime,gid<span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span><span class="token number">620</span>,ptmxmode<span class="token operator">=</span><span class="token number">666</span><span class="token punctuation">)</span>
mqueue on /dev/mqueue <span class="token builtin class-name">type</span> mqueue <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
sysfs on /sys <span class="token builtin class-name">type</span> sysfs <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
tmpfs on /sys/fs/cgroup <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/systemd <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,xattr,name<span class="token operator">=</span>systemd<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/memory <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,memory<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/devices <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,devices<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/cpuset <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,cpuset<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/pids <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,pids<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/net_cls,net_prio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,net_cls,net_prio<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/perf_event <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,perf_event<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/cpu,cpuacct <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,cpu,cpuacct<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/blkio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,blkio<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/freezer <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,relatime,freezer<span class="token punctuation">)</span>
none on /test <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
kataShared on /etc/hosts <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
kataShared on /dev/termination-log <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
kataShared on /etc/hostname <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
kataShared on /etc/resolv.conf <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
shm on /dev/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
tmpfs on /run/secrets/kubernetes.io/serviceaccount <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>ro,relatime,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
tmpfs on /proc/timer_list <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,size<span class="token operator">=</span>65536k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
proc on /proc/bus <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>ro,relatime<span class="token punctuation">)</span>
proc on /proc/fs <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>ro,relatime<span class="token punctuation">)</span>
proc on /proc/irq <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>ro,relatime<span class="token punctuation">)</span>
proc on /proc/sys <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>ro,relatime<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h1 id="进入kata-vm"><a href="#进入kata-vm" class="header-anchor">#</a> 进入kata vm</h1> <p>https://github.com/kata-containers/kata-containers/issues/2010</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@rqy-k8s-1 kbuser<span class="token punctuation">]</span><span class="token comment"># kata-runtime exec 1b482bb4613ba606894d30370fe7637610a495d9b3a504bc36e9aa292db9a0f0</span>
bash: grep: <span class="token builtin class-name">command</span> not found
bash: grep: <span class="token builtin class-name">command</span> not found
bash: tty: <span class="token builtin class-name">command</span> not found
bash: expr: <span class="token builtin class-name">command</span> not found
bash: <span class="token punctuation">[</span>: <span class="token builtin class-name">:</span> integer expression expected
bash-5.1<span class="token comment">#</span>
bash-5.1<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="lsblk-2"><a href="#lsblk-2" class="header-anchor">#</a> lsblk</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># lsblk</span>
NAME      MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
pmem0     <span class="token number">259</span>:0    <span class="token number">0</span>  126M  <span class="token number">1</span> disk
`-pmem0p1 <span class="token number">259</span>:1    <span class="token number">0</span>  124M  <span class="token number">1</span> part /
bash-5.1<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="看看挂载了什么分区"><a href="#看看挂载了什么分区" class="header-anchor">#</a> 看看挂载了什么分区</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># mount</span>
/dev/pmem0p1 on / <span class="token builtin class-name">type</span> ext4 <span class="token punctuation">(</span>ro,relatime,errors<span class="token operator">=</span>remount-ro,data<span class="token operator">=</span>ordered,dax<span class="token operator">=</span>always<span class="token punctuation">)</span>
devtmpfs on /dev <span class="token builtin class-name">type</span> devtmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1019140k,nr_inodes<span class="token operator">=</span><span class="token number">254785</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
proc on /proc <span class="token builtin class-name">type</span> proc <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
sysfs on /sys <span class="token builtin class-name">type</span> sysfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
tmpfs on /dev/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
devpts on /dev/pts <span class="token builtin class-name">type</span> devpts <span class="token punctuation">(</span>rw,nosuid,noexec,relatime,gid<span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span><span class="token number">620</span>,ptmxmode<span class="token operator">=</span>000<span class="token punctuation">)</span>
tmpfs on /run <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,size<span class="token operator">=</span>408360k,nr_inodes<span class="token operator">=</span><span class="token number">819200</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
tmpfs on /sys/fs/cgroup <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>ro,nosuid,nodev,noexec,size<span class="token operator">=</span>4096k,nr_inodes<span class="token operator">=</span><span class="token number">1024</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
cgroup2 on /sys/fs/cgroup/unified <span class="token builtin class-name">type</span> cgroup2 <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,nsdelegate<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/systemd <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,xattr,name<span class="token operator">=</span>systemd<span class="token punctuation">)</span>
bpf on /sys/fs/bpf <span class="token builtin class-name">type</span> bpf <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,mode<span class="token operator">=</span><span class="token number">700</span><span class="token punctuation">)</span>
hugetlbfs on /dev/hugepages <span class="token builtin class-name">type</span> hugetlbfs <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,pagesize<span class="token operator">=</span>2M<span class="token punctuation">)</span>
mqueue on /dev/mqueue <span class="token builtin class-name">type</span> mqueue <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
fusectl on /sys/fs/fuse/connections <span class="token builtin class-name">type</span> fusectl <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/blkio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,blkio<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/memory <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,memory<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/freezer <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,freezer<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/cpuset <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,cpuset<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/cpu,cpuacct <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,cpu,cpuacct<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/pids <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,pids<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/net_cls,net_prio <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,net_cls,net_prio<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/devices <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,devices<span class="token punctuation">)</span>
cgroup on /sys/fs/cgroup/perf_event <span class="token builtin class-name">type</span> cgroup <span class="token punctuation">(</span>rw,nosuid,nodev,noexec,relatime,perf_event<span class="token punctuation">)</span>
tmpfs on /etc/machine-id <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>ro,size<span class="token operator">=</span>408360k,nr_inodes<span class="token operator">=</span><span class="token number">819200</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
systemd-1 on /proc/sys/fs/binfmt_misc <span class="token builtin class-name">type</span> autofs <span class="token punctuation">(</span>rw,relatime,fd<span class="token operator">=</span><span class="token number">29</span>,pgrp<span class="token operator">=</span><span class="token number">1</span>,timeout<span class="token operator">=</span><span class="token number">0</span>,minproto<span class="token operator">=</span><span class="token number">5</span>,maxproto<span class="token operator">=</span><span class="token number">5</span>,direct<span class="token punctuation">)</span>
tmpfs on /tmp <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,size<span class="token operator">=</span>1020896k,nr_inodes<span class="token operator">=</span><span class="token number">1048576</span><span class="token punctuation">)</span>
nsfs on /run/sandbox-ns/ipc <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
nsfs on /run/sandbox-ns/uts <span class="token builtin class-name">type</span> nsfs <span class="token punctuation">(</span>rw<span class="token punctuation">)</span>
kataShared on /run/kata-containers/shared/containers <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
shm on /run/kata-containers/sandbox/shm <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
tmpfs on /etc/resolv.conf <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,nosuid,nodev,size<span class="token operator">=</span>408360k,nr_inodes<span class="token operator">=</span><span class="token number">819200</span>,mode<span class="token operator">=</span><span class="token number">755</span><span class="token punctuation">)</span>
none on /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
none on /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
tmpfs on /run/kata-containers/shared/containers/watchable <span class="token builtin class-name">type</span> tmpfs <span class="token punctuation">(</span>rw,relatime,size<span class="token operator">=</span>1020892k,nr_inodes<span class="token operator">=</span><span class="token number">255223</span><span class="token punctuation">)</span>
none on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
none on /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>
none on /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs <span class="token builtin class-name">type</span> virtiofs <span class="token punctuation">(</span>rw,relatime<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="ls都没有-只能echo-代替。"><a href="#ls都没有-只能echo-代替。" class="header-anchor">#</a> ls都没有，只能echo * 代替。</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># echo *</span>
autofs bin boot dev etc home lib lib64 lost+found media mnt proc root run sbin srv sys tmp usr var
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="uname-a"><a href="#uname-a" class="header-anchor">#</a> uname -a</h2> <h2 id="看看激活了什么内核模块"><a href="#看看激活了什么内核模块" class="header-anchor">#</a> 看看激活了什么内核模块</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># lsmod</span>
libkmod: kmod_module_new_from_loaded: could not <span class="token function">open</span> /proc/modules: No such <span class="token function">file</span> or directory
Error: could not get list of modules: No such <span class="token function">file</span> or directory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="看看都有什么进程"><a href="#看看都有什么进程" class="header-anchor">#</a> 看看都有什么进程</h2> <p>bash-5.1# ps efx ww</p> <h2 id="看看有多少内存"><a href="#看看有多少内存" class="header-anchor">#</a> 看看有多少内存</h2> <p>bash-5.1# free -h</p> <h2 id="看看内核启动参数"><a href="#看看内核启动参数" class="header-anchor">#</a> 看看内核启动参数</h2> <p>bash-5.1#  cat cmdline</p> <h2 id="看看systemctl的服务"><a href="#看看systemctl的服务" class="header-anchor">#</a> 看看systemctl的服务</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># systemctl list-units</span>
  UNIT                                                                                                                                                  LOAD   ACTIVE     SUB       DESCRIPTION          
  proc-sys-fs-binfmt_misc.automount                                                                                                                     loaded active     waiting   Arbitrary Executable File Formats File System Automount Point
  dev-pmem0p1.device                                                                                                                                    loaded activating tentative /dev/pmem0p1         
  -.mount                                                                                                                                               loaded active     mounted   Root Mount
  etc-machine<span class="token punctuation">\</span>x2did.mount                                                                                                                               loaded active     mounted   /etc/machine-id
  etc-resolv.conf.mount                                                                                                                                 loaded active     mounted   /etc/resolv.conf
  run-kata<span class="token punctuation">\</span>x2dcontainers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs
  run-kata<span class="token punctuation">\</span>x2dcontainers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                                  loaded active     mounted   /run/kata-containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs
  run-kata<span class="token punctuation">\</span>x2dcontainers-sandbox-shm.mount                                                                                                              loaded active     mounted   /run/kata-containers/sandbox/shm
  run-kata<span class="token punctuation">\</span>x2dcontainers-shared-containers-3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/3871d0c8108c66d3388f883f0d4de0cdf3e724607a06bce653fc13a988cd1985/rootfs
  run-kata<span class="token punctuation">\</span>x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-rootfs.mount                                loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a/rootfs
  run-kata<span class="token punctuation">\</span>x2dcontainers-shared-containers-a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a<span class="token punctuation">\</span>x2d172195b99cf7a9fd<span class="token punctuation">\</span>x2dserviceaccount.mount loaded active     mounted   /run/kata-containers/shared/containers/a83ce7bc82f78808ff1aa8165e705ecded65634ba54a57a1eda68c19d751f98a-172195b99cf7a9fd-serviceaccount
  run-kata<span class="token punctuation">\</span>x2dcontainers-shared-containers-watchable.mount                                                                                              loaded active     mounted   /run/kata-containers/shared/containers/watchable
  run-kata<span class="token punctuation">\</span>x2dcontainers-shared-containers.mount                                                                                                        loaded active     mounted   /run/kata-containers/shared/containers
  run-sandbox<span class="token punctuation">\</span>x2dns-ipc.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/ipc
  run-sandbox<span class="token punctuation">\</span>x2dns-uts.mount                                                                                                                           loaded active     mounted   /run/sandbox-ns/uts
  tmp.mount                                                                                                                                             loaded active     mounted   Temporary Directory /tmp
  systemd-ask-password-console.path                                                                                                                     loaded active     waiting   Dispatch Password Requests to Console Directory Watch
  init.scope                                                                                                                                            loaded active     running   System and Service Manager
● chronyd.service                                                                                                                                       loaded failed     failed    NTP client/server
  kata-agent.service                                                                                                                                    loaded active     running   Kata Containers Agent
  systemd-remount-fs.service                                                                                                                            loaded active     exited    Remount Root and Kernel File Systems
  systemd-sysctl.service                                                                                                                                loaded active     exited    Apply Kernel Variables
  -.slice                                                                                                                                               loaded active     active    Root Slice
  system.slice                                                                                                                                          loaded active     active    System Slice         
  systemd-coredump.socket                                                                                                                               loaded active     listening Process Core Dump Socket
  basic.target                                                                                                                                          loaded active     active    Basic System
  cryptsetup.target                                                                                                                                     loaded active     active    Local Encrypted Volumes
  kata-containers.target                                                                                                                                loaded active     active    Kata Containers Agent Target
  local-fs-pre.target                                                                                                                                   loaded active     active    Preparation <span class="token keyword">for</span> Local File Systems
  local-fs.target                                                                                                                                       loaded active     active    Local File Systems
  paths.target                                                                                                                                          loaded active     active    Path Units
  slices.target                                                                                                                                         loaded active     active    Slice Units
  sockets.target                                                                                                                                        loaded active     active    Socket Units
  swap.target                                                                                                                                           loaded active     active    Swaps
  sysinit.target                                                                                                                                        loaded active     active    System Initialization
  timers.target                                                                                                                                         loaded active     active    Timer Units          
  systemd-tmpfiles-clean.timer                                                                                                                          loaded active     waiting   Daily Cleanup of Temporary Directories

LOAD   <span class="token operator">=</span> Reflects whether the unit definition was properly loaded.
ACTIVE <span class="token operator">=</span> The high-level unit activation state, i.e. generalization of SUB.
SUB    <span class="token operator">=</span> The low-level unit activation state, values depend on unit type.
<span class="token number">37</span> loaded <span class="token function">units</span> listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use <span class="token string">'systemctl list-unit-files'</span><span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment">#   systemctl cat kata-containers.target</span>
<span class="token comment"># /usr/lib/systemd/system/kata-containers.target</span>
<span class="token comment">#</span>
<span class="token comment"># Copyright (c) 2018-2019 Intel Corporation</span>
<span class="token comment">#</span>
<span class="token comment"># SPDX-License-Identifier: Apache-2.0</span>
<span class="token comment">#</span>

<span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Kata Containers Agent Target
<span class="token assign-left variable">Requires</span><span class="token operator">=</span>basic.target
<span class="token assign-left variable">Requires</span><span class="token operator">=</span>tmp.mount
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>chronyd.service
<span class="token assign-left variable">Requires</span><span class="token operator">=</span>kata-agent.service
<span class="token assign-left variable">Conflicts</span><span class="token operator">=</span>rescue.service rescue.target
<span class="token assign-left variable">After</span><span class="token operator">=</span>basic.target rescue.service rescue.target
<span class="token assign-left variable">AllowIsolate</span><span class="token operator">=</span>yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="cpuinfo-meminfo-2c"><a href="#cpuinfo-meminfo-2c" class="header-anchor">#</a> cpuinfo/meminfo  (2C)</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bash-5.1<span class="token comment"># more /proc/cpuinfo</span>
processor       <span class="token builtin class-name">:</span> <span class="token number">0</span>
vendor_id       <span class="token builtin class-name">:</span> GenuineIntel
cpu family      <span class="token builtin class-name">:</span> <span class="token number">6</span>
model           <span class="token builtin class-name">:</span> <span class="token number">158</span>
model name      <span class="token builtin class-name">:</span> Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-7700 CPU @ <span class="token number">3</span>.60GHz
stepping        <span class="token builtin class-name">:</span> <span class="token number">9</span>
microcode       <span class="token builtin class-name">:</span> 0xea
cpu MHz         <span class="token builtin class-name">:</span> <span class="token number">3599.982</span>
cache size      <span class="token builtin class-name">:</span> <span class="token number">16384</span> KB
physical <span class="token function">id</span>     <span class="token builtin class-name">:</span> <span class="token number">0</span>
siblings        <span class="token builtin class-name">:</span> <span class="token number">1</span>
core <span class="token function">id</span>         <span class="token builtin class-name">:</span> <span class="token number">0</span>
cpu cores       <span class="token builtin class-name">:</span> <span class="token number">1</span>
apicid          <span class="token builtin class-name">:</span> <span class="token number">0</span>
initial apicid  <span class="token builtin class-name">:</span> <span class="token number">0</span>
fpu             <span class="token builtin class-name">:</span> <span class="token function">yes</span>
fpu_exception   <span class="token builtin class-name">:</span> <span class="token function">yes</span>
cpuid level     <span class="token builtin class-name">:</span> <span class="token number">13</span>
wp              <span class="token builtin class-name">:</span> <span class="token function">yes</span>
flags           <span class="token builtin class-name">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc rep_good nopl xtopology cpuid tsc_known_ arat md_clearinvpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1--More--e_timer aes xsave avx f16c rdra--More--
iority tsc_offset vtpr mtf vapic ept vpid unrestricted_guest pmld ept_1gb flexpr--More--
swapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--
bogomips        <span class="token builtin class-name">:</span> <span class="token number">7199.96</span>
clflush size    <span class="token builtin class-name">:</span> <span class="token number">64</span>
cache_alignment <span class="token builtin class-name">:</span> <span class="token number">64</span>
address sizes   <span class="token builtin class-name">:</span> <span class="token number">39</span> bits physical, <span class="token number">48</span> bits virtual
power management:

processor       <span class="token builtin class-name">:</span> <span class="token number">1</span>
vendor_id       <span class="token builtin class-name">:</span> GenuineIntel
cpu family      <span class="token builtin class-name">:</span> <span class="token number">6</span>
model           <span class="token builtin class-name">:</span> <span class="token number">158</span>
model name      <span class="token builtin class-name">:</span> Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Core<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> i7-7700 CPU @ <span class="token number">3</span>.60GHz
stepping        <span class="token builtin class-name">:</span> <span class="token number">9</span>
microcode       <span class="token builtin class-name">:</span> 0xea
cpu MHz         <span class="token builtin class-name">:</span> <span class="token number">3599.982</span>
cache size      <span class="token builtin class-name">:</span> <span class="token number">16384</span> KB
physical <span class="token function">id</span>     <span class="token builtin class-name">:</span> <span class="token number">7</span>
siblings        <span class="token builtin class-name">:</span> <span class="token number">1</span>
core <span class="token function">id</span>         <span class="token builtin class-name">:</span> <span class="token number">0</span>
cpu cores       <span class="token builtin class-name">:</span> <span class="token number">1</span>
apicid          <span class="token builtin class-name">:</span> <span class="token number">7</span>
initial apicid  <span class="token builtin class-name">:</span> <span class="token number">7</span>
fpu             <span class="token builtin class-name">:</span> <span class="token function">yes</span>
fpu_exception   <span class="token builtin class-name">:</span> <span class="token function">yes</span>
cpuid level     <span class="token builtin class-name">:</span> <span class="token number">13</span>
wp              <span class="token builtin class-name">:</span> <span class="token function">yes</span>
lushopt xsaveopt xsavec xgetbv1 arat md_clearinvpcid rtm mpx rdseed adx smap clf--More--
swapgs taa itlb_multihit srbds spectre_v1 spectre_v2 spec_store_bypass l1tf mds --More--
bogomips        <span class="token builtin class-name">:</span> <span class="token number">7199.96</span>
clflush size    <span class="token builtin class-name">:</span> <span class="token number">64</span>
cache_alignment <span class="token builtin class-name">:</span> <span class="token number">64</span>
address sizes   <span class="token builtin class-name">:</span> <span class="token number">39</span> bits physical, <span class="token number">48</span> bits virtual
power management:

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># more /proc/meminfo   (??)</span>
MemTotal:        <span class="token number">7935356</span> kB
MemFree:          <span class="token number">478024</span> kB
MemAvailable:    <span class="token number">1827752</span> kB
Buffers:            <span class="token number">1064</span> kB
Cached:          <span class="token number">1903388</span> kB
SwapCached:            <span class="token number">0</span> kB
Active:          <span class="token number">5728076</span> kB
Inactive:         <span class="token number">891144</span> kB
Active<span class="token punctuation">(</span>anon<span class="token punctuation">)</span>:    <span class="token number">5029108</span> kB
Inactive<span class="token punctuation">(</span>anon<span class="token punctuation">)</span>:   <span class="token number">207680</span> kB
Active<span class="token punctuation">(</span>file<span class="token punctuation">)</span>:     <span class="token number">698968</span> kB
Inactive<span class="token punctuation">(</span>file<span class="token punctuation">)</span>:   <span class="token number">683464</span> kB
Unevictable:           <span class="token number">4</span> kB
Mlocked:               <span class="token number">4</span> kB
SwapTotal:             <span class="token number">0</span> kB
SwapFree:              <span class="token number">0</span> kB
Dirty:              <span class="token number">9584</span> kB
Writeback:             <span class="token number">0</span> kB
AnonPages:       <span class="token number">4715640</span> kB
Mapped:           <span class="token number">564200</span> kB
Shmem:            <span class="token number">522020</span> kB
Slab:             <span class="token number">469116</span> kB
SReclaimable:     <span class="token number">280468</span> kB
SUnreclaim:       <span class="token number">188648</span> kB
KernelStack:       <span class="token number">43248</span> kB
PageTables:        <span class="token number">39740</span> kB
NFS_Unstable:          <span class="token number">0</span> kB
Bounce:                <span class="token number">0</span> kB
WritebackTmp:          <span class="token number">0</span> kB
CommitLimit:     <span class="token number">3967676</span> kB
Committed_AS:   <span class="token number">23822760</span> kB
VmallocTotal:   <span class="token number">34359738367</span> kB
VmallocUsed:      <span class="token number">461976</span> kB
VmallocChunk:   <span class="token number">34358937596</span> kB
Percpu:            <span class="token number">11552</span> kB
HardwareCorrupted:     <span class="token number">0</span> kB
AnonHugePages:     <span class="token number">20480</span> kB
CmaTotal:              <span class="token number">0</span> kB
CmaFree:               <span class="token number">0</span> kB
HugePages_Total:       <span class="token number">0</span>
HugePages_Free:        <span class="token number">0</span>
HugePages_Rsvd:        <span class="token number">0</span>
HugePages_Surp:        <span class="token number">0</span>
Hugepagesize:       <span class="token number">2048</span> kB
DirectMap4k:      <span class="token number">211152</span> kB
DirectMap2M:     <span class="token number">8038400</span> kB
DirectMap1G:           <span class="token number">0</span> kB
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <p>limit 1C1G
default:1C2G</p> <p>vm:
cpuinfo： 2CPU
meminfo: MemTotal:        7935356 kB (7.5G)</p> <p>pod:
cpuinfo：2CPU
meminfo: MemTotal:        3090364 kB  (2.9G)
free -h: 2.9G</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/24, 18:07:47</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/kata7/" class="prev">其他特性</a></span> <span class="next"><a href="/pages/kata0201/">kata-deploy部署、卸载与升级</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/ythx/"><div>
            养桃花销
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">12-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/074921/"><div>
            events持久化
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">10-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/99aba6/"><div>
            关于cpu内存
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">10-09</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/fangfenghuang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:15068704759@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://www.linkedin.com/in/huang-fangfeng-60887981/" title="linkedin" target="_blank" class="iconfont icon-rss"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>| <a rel="nofollow " target="_blank" href="https://github.com/fangfenghuang/fangfenghuang.GitHub.io">@fangfenghuang</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><!----><PageInfo></PageInfo><BlockToggle></BlockToggle></div></div>
    <script src="/assets/js/app.8f006922.js" defer></script><script src="/assets/js/2.22dca872.js" defer></script><script src="/assets/js/42.d44d3ffb.js" defer></script>
  </body>
</html>
